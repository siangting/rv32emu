cscope 15 $HOME/dev/rv32emu -q 0000006192 0001452000
	@src/breakpoint.c

6 #i‡!
RV32_HAS
(
GDBSTUB
)

10 
	~"bªakpoöt.h
"

12 
ölöe
 
	$cmp
(c⁄° *
¨g0
, c⁄° *
¨g1
)

14 
riscv_w‹d_t
 *
a
 = (riscv_w‹d_à*Ë
¨g0
, *
b
 = (riscv_w‹d_à*Ë
¨g1
;

15  (*
a
 < *
b
Ë? 
_CMP_LESS
 : (*®> *bË? 
_CMP_GREATER
 : 
_CMP_EQUAL
;

16 
	}
}

18 
bªakpoöt_m≠_t
 
	$bªakpoöt_m≠_√w
()

20  
	`m≠_öô
(
riscv_w‹d_t
, 
bªakpoöt_t
, 
cmp
);

21 
	}
}

23 
boﬁ
 
	$bªakpoöt_m≠_ö£π
(
bªakpoöt_m≠_t
 
m≠
, 
riscv_w‹d_t
 
addr
)

25 
bªakpoöt_t
 
bp
 = (bªakpoöt_t){.
addr
 =áddr, .
‹ig_ö¢
 = 0};

26 
m≠_ôî_t
 
ô
;

27 
	`m≠_föd
(
m≠
, &
ô
, &
addr
);

29 i‡(!
	`m≠_©_íd
(
m≠
, &
ô
))

30  
Ál£
;

32  
	`m≠_ö£π
(
m≠
, &
addr
, &
bp
);

33 
	}
}

35 
boﬁ
 
	$bªakpoöt_m≠_föd_ô
(
bªakpoöt_m≠_t
 
m≠
,

36 
riscv_w‹d_t
 
addr
,

37 
m≠_ôî_t
 *
ô
)

39 
	`m≠_föd
(
m≠
, 
ô
, &
addr
);

40 i‡(
	`m≠_©_íd
(
m≠
, 
ô
))

41  
Ál£
;

43  
åue
;

44 
	}
}

46 
bªakpoöt_t
 *
	$bªakpoöt_m≠_föd
(
bªakpoöt_m≠_t
 
m≠
, 
riscv_w‹d_t
 
addr
)

48 
m≠_ôî_t
 
ô
;

49 i‡(!
	`bªakpoöt_m≠_föd_ô
(
m≠
, 
addr
, &
ô
))

50  
NULL
;

52  (
bªakpoöt_t
 *Ë
	`m≠_ôî_vÆue
(&
ô
, breakpoint_t *);

53 
	}
}

55 
boﬁ
 
	$bªakpoöt_m≠_dñ
(
bªakpoöt_m≠_t
 
m≠
, 
riscv_w‹d_t
 
addr
)

57 
m≠_ôî_t
 
ô
;

58 i‡(!
	`bªakpoöt_m≠_föd_ô
(
m≠
, 
addr
, &
ô
))

59  
Ál£
;

61 
	`m≠_îa£
(
m≠
, &
ô
);

62  
åue
;

63 
	}
}

65 
	$bªakpoöt_m≠_de°roy
(
bªakpoöt_m≠_t
 
m≠
)

67 
	`m≠_dñëe
(
m≠
);

68 
	}
}

	@src/breakpoint.h

6 #¥agm®
⁄˚


8 
	~"m≠.h
"

9 
	~"riscv.h
"

12 
riscv_w‹d_t
 
	maddr
;

13 
uöt32_t
 
	m‹ig_ö¢
;

14 } 
	tbªakpoöt_t
;

16 
m≠_t
 
	tbªakpoöt_m≠_t
;

18 
bªakpoöt_m≠_t
 
bªakpoöt_m≠_√w
();

19 
boﬁ
 
bªakpoöt_m≠_ö£π
(
bªakpoöt_m≠_t
 
m≠
, 
riscv_w‹d_t
 
addr
);

20 
bªakpoöt_t
 *
bªakpoöt_m≠_föd
(
bªakpoöt_m≠_t
 
m≠
, 
riscv_w‹d_t
 
addr
);

21 
boﬁ
 
bªakpoöt_m≠_dñ
(
bªakpoöt_m≠_t
 
m≠
, 
riscv_w‹d_t
 
addr
);

22 
bªakpoöt_m≠_de°roy
(
bªakpoöt_m≠_t
 
m≠
);

	@src/cache.c

6 
	~<as£π.h
>

7 
	~<°dboﬁ.h
>

8 
	~<°ddef.h
>

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

13 
	~"ˇche.h
"

14 
	~"mpoﬁ.h
"

15 
	~"utûs.h
"

17 
uöt32_t
 
	gˇche_size
, 
	gˇche_size_bôs
;

18 
mpoﬁ
 *
	gˇche_mp
;

21 
	$HASH_FUNC_IMPL
(
ˇche_hash
, 
ˇche_size_bôs
, 
ˇche_size
)

23 
	shli°_hód
 {

24 
hli°_node
 *
fú°
;

27 
	shli°_node
 {

28 
hli°_node
 *
√xt
, **
µªv
;

32 *
vÆue
;

33 
uöt32_t
 
key
;

34 
uöt32_t
 
‰equícy
;

35 
li°_hód
 
li°
;

36 
hli°_node
 
ht_li°
;

37 } 
	tlfu_íåy_t
;

40 
hli°_hód
 *
ht_li°_hód
;

41 } 
	thashèbÀ_t
;

43 
	sˇche
 {

44 
li°_hód
 *
li°s
[
THRESHOLD
];

45 
uöt32_t
 
li°_size
;

46 
hashèbÀ_t
 *
m≠
;

47 
uöt32_t
 
ˇ∑côy
;

48 } 
	tˇche_t
;

50 
	#INIT_HLIST_HEAD
(
±r
Ë(’å)->
fú°
 = 
NULL
)

	)

52 
ölöe
 
	$INIT_HLIST_NODE
(
hli°_node
 *
h
)

54 
h
->
√xt
 = 
NULL
;

55 
h
->
µªv
 = 
NULL
;

56 
	}
}

58 
ölöe
 
	$hli°_em±y
(c⁄° 
hli°_hód
 *
h
)

60  !
h
->
fú°
;

61 
	}
}

63 
ölöe
 
	$hli°_add_hód
(
hli°_node
 *
n
, 
hli°_hód
 *
h
)

65 
hli°_node
 *
fú°
 = 
h
->first;

66 
n
->
√xt
 = 
fú°
;

67 i‡(
fú°
)

68 
fú°
->
µªv
 = &
n
->
√xt
;

70 
h
->
fú°
 = 
n
;

71 
n
->
µªv
 = &
h
->
fú°
;

72 
	}
}

74 
ölöe
 
boﬁ
 
	$hli°_unhashed
(c⁄° 
hli°_node
 *
h
)

76  !
h
->
µªv
;

77 
	}
}

79 
ölöe
 
	$hli°_dñ
(
hli°_node
 *
n
)

81 
hli°_node
 *
√xt
 = 
n
->next;

82 
hli°_node
 **
µªv
 = 
n
->pprev;

84 *
µªv
 = 
√xt
;

85 i‡(
√xt
)

86 
√xt
->
µªv
 =Öprev;

87 
	}
}

89 
ölöe
 
	$hli°_dñ_öô
(
hli°_node
 *
n
)

91 i‡(
	`hli°_unhashed
(
n
))

93 
	`hli°_dñ
(
n
);

94 
	`INIT_HLIST_NODE
(
n
);

95 
	}
}

97 
	#hli°_íåy
(
±r
, 
ty≥
, 
membî
Ë
	`c⁄èöî_of
’å,Åy≥, membî)

	)

99 #ifde‡
__HAVE_TYPEOF


100 
	#hli°_íåy_ß„
(
±r
, 
ty≥
, 
membî
) \

102 
	`ty≥of
(
±r
Ë
____±r
 = (ptr); \

103 
____±r
 ? 
	`hli°_íåy
(____±r, 
ty≥
, 
membî
Ë: 
NULL
; \

104 })

	)

106 
	#hli°_íåy_ß„
(
±r
, 
ty≥
, 
membî
) \

107 (
±r
Ë? 
	`hli°_íåy
’å, 
ty≥
, 
membî
Ë: 
NULL


	)

110 #ifde‡
__HAVE_TYPEOF


111 
	#hli°_f‹_óch_íåy
(
pos
, 
hód
, 
membî
) \

112 
pos
 = 
	`hli°_íåy_ß„
((
hód
)->
fú°
, 
	`ty≥of
(*’os)), 
membî
);Öos; \

113 
pos
 = 
	`hli°_íåy_ß„
(’os)->
membî
.
√xt
, 
	`ty≥of
(*’os)), membî))

	)

115 
	#hli°_f‹_óch_íåy
(
pos
, 
hód
, 
membî
, 
ty≥
) \

116 
pos
 = 
	`hli°_íåy_ß„
((
hód
)->
fú°
, 
ty≥
, 
membî
);Öos; \

117 
pos
 = 
	`hli°_íåy_ß„
(’os)->
membî
.
√xt
, 
ty≥
, membî))

	)

120 
ˇche_t
 *
	$ˇche_¸óã
(
size_bôs
)

122 
i
;

123 
ˇche_t
 *
ˇche
 = 
	`mÆloc
((cache_t));

124 i‡(!
ˇche
)

125  
NULL
;

127 
ˇche_size_bôs
 = 
size_bôs
;

128 
ˇche_size
 = 1 << 
size_bôs
;

129 
i
 = 0; i < 
THRESHOLD
; i++) {

130 
ˇche
->
li°s
[
i
] = 
	`mÆloc
((
li°_hód
));

131 i‡(!
ˇche
->
li°s
[
i
])

132 
‰ì_li°s
;

133 
	`INIT_LIST_HEAD
(
ˇche
->
li°s
[
i
]);

136 
ˇche
->
m≠
 = 
	`mÆloc
((
hashèbÀ_t
));

137 i‡(!
ˇche
->
m≠
)

138 
‰ì_li°s
;

140 
ˇche
->
m≠
->
ht_li°_hód
 = 
	`mÆloc
(
ˇche_size
 * (
hli°_hód
));

141 i‡(!
ˇche
->
m≠
->
ht_li°_hód
)

142 
‰ì_m≠
;

144 
size_t
 
ii
 = 0; iò< 
ˇche_size
; ii++)

145 
	`INIT_HLIST_HEAD
(&
ˇche
->
m≠
->
ht_li°_hód
[
ii
]);

146 
ˇche
->
li°_size
 = 0;

147 
ˇche_mp
 =

148 
	`mpoﬁ_¸óã
(
ˇche_size
 * (
lfu_íåy_t
), (lfu_entry_t));

149 
ˇche
->
ˇ∑côy
 = 
ˇche_size
;

150  
ˇche
;

152 
‰ì_m≠
:

153 
	`‰ì
(
ˇche
->
m≠
);

154 
‰ì_li°s
:

155 
j
 = 0; j < 
i
; j++)

156 
	`‰ì
(
ˇche
->
li°s
[
j
]);

158 
	`‰ì
(
ˇche
);

159  
NULL
;

160 
	}
}

162 *
	$ˇche_gë
(c⁄° 
ˇche_t
 *
ˇche
, 
uöt32_t
 
key
, 
boﬁ
 
upd©e
)

164 i‡(!
ˇche
->
ˇ∑côy
 ||

165 
	`hli°_em±y
(&
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)]))

166  
NULL
;

168 
lfu_íåy_t
 *
íåy
 = 
NULL
;

169 #ifde‡
__HAVE_TYPEOF


170 
	`hli°_f‹_óch_íåy
 (
íåy
, &
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)],

171 
ht_li°
)

173 
	`hli°_f‹_óch_íåy
 (
íåy
, &
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)],

174 
ht_li°
, 
lfu_íåy_t
)

177 i‡(
íåy
->
key
 == key)

180 i‡(!
íåy
 ||É¡ry->
key
 != key)

181  
NULL
;

188 i‡(
upd©e
 && 
íåy
->
‰equícy
 < 
THRESHOLD
) {

189 
	`li°_dñ_öô
(&
íåy
->
li°
);

190 
	`li°_add
(&
íåy
->
li°
, 
ˇche
->
li°s
[íåy->
‰equícy
++]);

194  
íåy
->
vÆue
;

195 
	}
}

197 *
	$ˇche_put
(
ˇche_t
 *
ˇche
, 
uöt32_t
 
key
, *
vÆue
)

199 *
dñëe_vÆue
 = 
NULL
;

200 
	`as£π
(
ˇche
->
li°_size
 <ˇche->
ˇ∑côy
);

202 i‡(
ˇche
->
li°_size
 =ˇche->
ˇ∑côy
) {

203 
i
 = 0; i < 
THRESHOLD
; i++) {

204 i‡(
	`li°_em±y
(
ˇche
->
li°s
[
i
]))

206 
lfu_íåy_t
 *
dñëe_èrgë
 =

207 
	`li°_œ°_íåy
(
ˇche
->
li°s
[
i
], 
lfu_íåy_t
, 
li°
);

208 
	`li°_dñ_öô
(&
dñëe_èrgë
->
li°
);

209 
	`hli°_dñ_öô
(&
dñëe_èrgë
->
ht_li°
);

210 
dñëe_vÆue
 = 
dñëe_èrgë
->
vÆue
;

211 
ˇche
->
li°_size
--;

212 
	`mpoﬁ_‰ì
(
ˇche_mp
, 
dñëe_èrgë
);

216 
lfu_íåy_t
 *
√w_íåy
 = 
	`mpoﬁ_Æloc
(
ˇche_mp
);

217 
√w_íåy
->
key
 = key;

218 
√w_íåy
->
vÆue
 = value;

219 
√w_íåy
->
‰equícy
 = 0;

220 
	`li°_add
(&
√w_íåy
->
li°
, 
ˇche
->
li°s
[√w_íåy->
‰equícy
++]);

221 
ˇche
->
li°_size
++;

222 
	`hli°_add_hód
(&
√w_íåy
->
ht_li°
,

223 &
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)]);

224 
	`as£π
(
ˇche
->
li°_size
 <ˇche->
ˇ∑côy
);

225  
dñëe_vÆue
;

226 
	}
}

228 
	$ˇche_‰ì
(
ˇche_t
 *
ˇche
)

230 
i
 = 0; i < 
THRESHOLD
; i++)

231 
	`‰ì
(
ˇche
->
li°s
[
i
]);

232 
	`mpoﬁ_de°roy
(
ˇche_mp
);

233 
	`‰ì
(
ˇche
->
m≠
->
ht_li°_hód
);

234 
	`‰ì
(
ˇche
->
m≠
);

235 
	`‰ì
(
ˇche
);

236 
	}
}

238 
uöt32_t
 
	$ˇche_‰eq
(c⁄° 
ˇche
 *ˇche, 
uöt32_t
 
key
)

240 i‡(!
ˇche
->
ˇ∑côy
 ||

241 
	`hli°_em±y
(&
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)]))

243 
lfu_íåy_t
 *
íåy
 = 
NULL
;

244 #ifde‡
__HAVE_TYPEOF


245 
	`hli°_f‹_óch_íåy
 (
íåy
, &
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)],

246 
ht_li°
)

248 
	`hli°_f‹_óch_íåy
 (
íåy
, &
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)],

249 
ht_li°
, 
lfu_íåy_t
)

252 i‡(
íåy
->
key
 == key)

253  
íåy
->
‰equícy
;

256 
	}
}

258 #i‡
RV32_HAS
(
JIT
)

259 
boﬁ
 
	$ˇche_hŸ
(c⁄° 
ˇche
 *ˇche, 
uöt32_t
 
key
)

261 i‡(!
ˇche
->
ˇ∑côy
 ||

262 
	`hli°_em±y
(&
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)]))

263  
Ál£
;

264 
lfu_íåy_t
 *
íåy
 = 
NULL
;

265 #ifde‡
__HAVE_TYPEOF


266 
	`hli°_f‹_óch_íåy
 (
íåy
, &
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)],

267 
ht_li°
)

269 
	`hli°_f‹_óch_íåy
 (
íåy
, &
ˇche
->
m≠
->
ht_li°_hód
[
	`ˇche_hash
(
key
)],

270 
ht_li°
, 
lfu_íåy_t
)

273 i‡(
íåy
->
key
 =key &&É¡ry->
‰equícy
 =
THRESHOLD
)

274  
åue
;

276  
Ál£
;

277 
	}
}

278 
	$ˇche_¥ofûe
(c⁄° 
ˇche
 *cache,

279 
FILE
 *
ouçut_fûe
,

280 
¥of_func_t
 
func
)

282 
	`as£π
(
func
);

283 
i
 = 0; i < 
THRESHOLD
; i++) {

284 
lfu_íåy_t
 *
íåy
, *
ß„
;

285 
	`li°_f‹_óch_íåy_ß„
 (
íåy
, 
ß„
, 
ˇche
->
li°s
[
i
], 
li°
) {

286 
	`func
(
íåy
->
vÆue
,É¡ry->
‰equícy
, 
ouçut_fûe
);

289 
	}
}

291 
	$˛ór_ˇche_hŸ
(c⁄° 
ˇche
 *ˇche, 
˛ór_func_t
 
func
)

293 
	`as£π
(
ˇche
);

294 
	`as£π
(
func
);

295 
i
 = 0; i < 
THRESHOLD
; i++) {

296 
lfu_íåy_t
 *
íåy
, *
ß„
;

297 
	`li°_f‹_óch_íåy_ß„
 (
íåy
, 
ß„
, 
ˇche
->
li°s
[
i
], 
li°
) {

298 
	`func
(
íåy
->
vÆue
);

301 
	}
}

	@src/cache.h

6 #¥agm®
⁄˚


8 
	~<°dboﬁ.h
>

9 
	~<°döt.h
>

10 
	~<°dio.h
>

16 
	#THRESHOLD
 4096

	)

18 
	gˇche
;

24 
ˇche
 *
ˇche_¸óã
(
size_bôs
);

33 *
ˇche_gë
(c⁄° 
ˇche
 *ˇche, 
uöt32_t
 
key
, 
boﬁ
 
upd©e
);

42 *
ˇche_put
(
ˇche
 *ˇche, 
uöt32_t
 
key
, *
vÆue
);

49 
ˇche_‰ì
(
ˇche
 *cache);

51 #i‡
RV32_HAS
(
JIT
)

58 
boﬁ
 
ˇche_hŸ
(c⁄° 
ˇche
 *ˇche, 
uöt32_t
 
key
);

60 (*
	t¥of_func_t
)(*, 
	tuöt32_t
, 
	tFILE
 *);

61 
	`ˇche_¥ofûe
(c⁄° 
ˇche
 *cache,

62 
FILE
 *
ouçut_fûe
,

63 
¥of_func_t
 
func
);

64 (*
	t˛ór_func_t
)(*);

65 
	`˛ór_ˇche_hŸ
(c⁄° 
ˇche
 *ˇche, 
˛ór_func_t
 
func
);

68 
uöt32_t
 
	`ˇche_‰eq
(c⁄° 
ˇche
 *ˇche, uöt32_à
key
);

	@src/common.h

6 #¥agm®
⁄˚


8 
	~"„©uª.h
"

10 #i‡
deföed
(
__GNUC__
Ë|| deföed(
__˛™g__
)

11 
	#UNUSED
 
	`__©åibuã__
((
unu£d
))

	)

12 
	#likñy
(
x
Ë
	`__buûtö_ex≥˘
(!!(x), 1)

	)

13 
	#u∆ikñy
(
x
Ë
	`__buûtö_ex≥˘
(!!(x), 0)

	)

14 
	#FORCE_INLINE
 
ölöe
 
	`__©åibuã__
((
Æways_ölöe
))

	)

16 
	#UNUSED


	)

17 
	#likñy
(
x
Ë(x)

	)

18 
	#u∆ikñy
(
x
Ë(x)

	)

19 #i‡
deföed
(
_MSC_VER
)

20 
	#FORCE_INLINE
 
ölöe
 
__f‹˚ölöe


	)

22 
	#FORCE_INLINE
 
ölöe


	)

26 
	#ARRAYS_SIZE
(
¨r
Ë(◊ºË/ ◊º[0]))

	)

28 
	#MASK
(
n
Ë(~((~0U << (n))))

	)

37 #i‡
deföed
(
__GNUC__
Ë|| deföed(
__˛™g__
)

38 
	#ûog2
(
x
Ë31 - 
	`__buûtö_˛z
(x | 1)

	)

39 #ñi‡
deföed
(
_MSC_VER
)

42 
	#ûog2
(
x
)

	)

46 #i‡
deföed
(
__GNUC__
Ë|| deföed(
__˛™g__
)

47 
	#__ALIGNED
(
x
Ë
	`__©åibuã__
((
	`Æig√d
(x)))

	)

48 #ñi‡
deföed
(
_MSC_VER
)

49 
	#__ALIGNED
(
x
Ë
	`__de˛•ec
(
	`Æign
(x))

	)

51 
	#__ALIGNED
(
x
)

	)

55 #i‡
deföed
(
__GNUC__
Ë|| deföed(
__˛™g__
)

56 
	#PACKED
(
«me
Ë«mê
	`__©åibuã__
((
∑cked
))

	)

57 #ñi‡
deföed
(
_MSC_VER
)

58 
	#PACKED
(
«me
Ë
	`__¥agma
(
	`∑ck
(
push
, 1)Ë«mê__¥agma’ack(
p›
))

	)

60 
	#PACKED
(
«me
)

	)

64 #i‡
deföed
(
__GNUC__
Ë|| deföed(
__˛™g__
)

65 
	#bsw≠16
(
x
Ë
	`__buûtö_bsw≠16
(x)

	)

66 
	#bsw≠32
(
x
Ë
	`__buûtö_bsw≠32
(x)

	)

68 
	#bsw≠16
(
x
Ë((x & 0xffË<< 8Ë| ((x >> 8Ë& 0xff)

	)

69 
	#bsw≠32
(
x
) \

70 (
	`bsw≠16
(((
x
 & 0xffff) << 16) | ((x >> 16) & 0xffff)) & 0xffff) | \

71 (
	`bsw≠16
(((
x
 & 0xffffË<< 16Ë| ((x >> 16Ë& 0xffff)Ë& 0xffffË<< 16

	)

79 #i‡
deföed
(
__GNUC__
Ë|| deföed(
__˛™g__
)

80 
	#__UNREACHABLE
 
	`__buûtö_uƒóchabÀ
()

	)

81 #ñi‡
deföed
(
_MSC_VER
)

82 
	#__UNREACHABLE
 
	`__assume
(
Ál£
)

	)

85 
	#__UNREACHABLE
 dÿ{ } 0)

	)

93 #i‡
deföed
(
__has_©åibuã
Ë&& __has_©åibuã(
mu°èû
)

94 
	#MUST_TAIL
 
	`__©åibuã__
((
mu°èû
))

	)

96 
	#MUST_TAIL


	)

100 #i‡
deföed
(
_WIN32
)

101 
	#HAVE_MMAP
 0

	)

104 
	#HAVE_MMAP
 1

	)

112 
	#FIX_VC_BUG
(
x
Ë
	)
x

115 
	#PRIMITIVE_CAT
(
a
, ...Ë
	`FIX_VC_BUG
◊##
__VA_ARGS__
)

	)

117 
	#IIF
(
c
Ë
	`PRIMITIVE_CAT
(
IIF_
, c)

	)

119 
	#IIF_0
(
t
, ...Ë
__VA_ARGS__


	)

121 
	#IIF_1
(
t
, ...Ë
	)
t

127 
	#_GET_NTH_ARG
(
_1
, 
_2
, 
_3
, 
_4
, 
_5
, 
N
, ...Ë
	)
N

135 
	#COUNT_VARARGS
(...Ë
	`_GET_NTH_ARG
("ign‹ed", ##
__VA_ARGS__
, 4, 3, 2, 1, 0)

	)

138 #i‡
deföed
(
__GNUC__
Ë|| deföed(
__˛™g__
) || \

139 (
deföed
(
__STDC__
Ë&& deföed(
__STDC_VERSION__
) && \

140 (
	g__STDC_VERSION__
 >= 202000L))

141 
	#__HAVE_TYPEOF
 1

	)

152 #i‚de‡
c⁄èöî_of


153 #ifde‡
__HAVE_TYPEOF


154 
	#c⁄èöî_of
(
±r
, 
ty≥
, 
membî
) \

155 
	`__exãnsi⁄__
({ \

156 c⁄° 
	`__ty≥of__
(((
ty≥
 *Ë0)->
membî
Ë*
__pmembî
 = (
±r
); \

157 (
ty≥
 *Ë((*Ë
__pmembî
 - 
	`off£tof
—y≥, 
membî
)); \

158 })

	)

160 
	#c⁄èöî_of
(
±r
, 
ty≥
, 
membî
) \

161 ((
ty≥
 *Ë((*Ë(
±r
Ë- (
	`off£tof
—y≥, 
membî
))))

	)

	@src/decode.c

6 
	~<as£π.h
>

7 
	~<°dlib.h
>

9 
	~"decode.h
"

10 
	~"riscv_¥iv©e.h
"

15 
ölöe
 
uöt32_t
 
	$decode_rd
(c⁄° 
uöt32_t
 
ö¢
)

17  (
ö¢
 & 
FR_RD
) >> 7;

18 
	}
}

23 
ölöe
 
uöt32_t
 
	$decode_rs1
(c⁄° 
uöt32_t
 
ö¢
)

25  (
ö¢
 & 
FR_RS1
) >> 15;

26 
	}
}

31 
ölöe
 
uöt32_t
 
	$decode_rs2
(c⁄° 
uöt32_t
 
ö¢
)

33  (
ö¢
 & 
FR_RS2
) >> 20;

34 
	}
}

39 
ölöe
 
uöt32_t
 
	$decode_fun˘3
(c⁄° 
uöt32_t
 
ö¢
)

41  (
ö¢
 & 
FR_FUNCT3
) >> 12;

42 
	}
}

47 
ölöe
 
uöt32_t
 
	$decode_fun˘7
(c⁄° 
uöt32_t
 
ö¢
)

49  (
ö¢
 & 
FR_FUNCT7
) >> 25;

50 
	}
}

55 
ölöe
 
uöt32_t
 
	$decode_uty≥_imm
(c⁄° 
uöt32_t
 
ö¢
)

57  
ö¢
 & 
FU_IMM_31_12
;

58 
	}
}

63 
ölöe
 
öt32_t
 
	$decode_jty≥_imm
(c⁄° 
uöt32_t
 
ö¢
)

65 
uöt32_t
 
d°
 = 0;

66 
d°
 |(
ö¢
 & 
FJ_IMM_20
);

67 
d°
 |(
ö¢
 & 
FJ_IMM_19_12
) << 11;

68 
d°
 |(
ö¢
 & 
FJ_IMM_11
) << 2;

69 
d°
 |(
ö¢
 & 
FJ_IMM_10_1
) >> 9;

71  ((
öt32_t
Ë
d°
) >> 11;

72 
	}
}

77 
ölöe
 
öt32_t
 
	$decode_ôy≥_imm
(c⁄° 
uöt32_t
 
ö¢
)

79  ((
öt32_t
Ë(
ö¢
 & 
FI_IMM_11_0
)) >> 20;

80 
	}
}

88 
ölöe
 
öt32_t
 
	$decode_bty≥_imm
(c⁄° 
uöt32_t
 
ö¢
)

90 
uöt32_t
 
d°
 = 0;

91 
d°
 |(
ö¢
 & 
FB_IMM_12
);

92 
d°
 |(
ö¢
 & 
FB_IMM_11
) << 23;

93 
d°
 |(
ö¢
 & 
FB_IMM_10_5
) >> 1;

94 
d°
 |(
ö¢
 & 
FB_IMM_4_1
) << 12;

96  ((
öt32_t
Ë
d°
) >> 19;

97 
	}
}

103 
ölöe
 
öt32_t
 
	$decode_°y≥_imm
(c⁄° 
uöt32_t
 
ö¢
)

105 
uöt32_t
 
d°
 = 0;

106 
d°
 |(
ö¢
 & 
FS_IMM_11_5
);

107 
d°
 |(
ö¢
 & 
FS_IMM_4_0
) << 13;

108  ((
öt32_t
Ë
d°
) >> 20;

109 
	}
}

111 #i‡
RV32_HAS
(
EXT_F
)

115 
ölöe
 
uöt32_t
 
	$decode_r4ty≥_rs3
(c⁄° 
uöt32_t
 
ö¢
)

117  (
ö¢
 & 
FR4_RS3
) >> 27;

118 
	}
}

121 #i‡
RV32_HAS
(
EXT_C
)

125 
	mCJ_IMM_11
 = 0b0001000000000000,

126 
	mCJ_IMM_4
 = 0b0000100000000000,

127 
	mCJ_IMM_9_8
 = 0b0000011000000000,

128 
	mCJ_IMM_10
 = 0b0000000100000000,

129 
	mCJ_IMM_6
 = 0b0000000010000000,

130 
	mCJ_IMM_7
 = 0b0000000001000000,

131 
	mCJ_IMM_3_1
 = 0b0000000000111000,

132 
	mCJ_IMM_5
 = 0b0000000000000100,

134 
	mCB_SHAMT_5
 = 0b0001000000000000,

135 
	mCB_SHAMT_4_0
 = 0b0000000001111100,

142 
ölöe
 
uöt16_t
 
	$c_decode_rs1
(c⁄° 
uöt16_t
 
ö¢
)

144  (
uöt16_t
Ë((
ö¢
 & 
FC_RS1
) >> 7U);

145 
	}
}

150 
ölöe
 
uöt16_t
 
	$c_decode_rs2
(c⁄° 
uöt16_t
 
ö¢
)

152  (
uöt16_t
Ë((
ö¢
 & 
FC_RS2
) >> 2U);

153 
	}
}

158 
ölöe
 
uöt16_t
 
	$c_decode_rd
(c⁄° 
uöt16_t
 
ö¢
)

160  (
uöt16_t
Ë((
ö¢
 & 
FC_RD
) >> 7U);

161 
	}
}

166 
ölöe
 
uöt16_t
 
	$c_decode_rs1c
(c⁄° 
uöt16_t
 
ö¢
)

168  (
uöt16_t
Ë((
ö¢
 & 
FC_RS1C
) >> 7U);

169 
	}
}

174 
ölöe
 
uöt16_t
 
	$c_decode_rs2c
(c⁄° 
uöt16_t
 
ö¢
)

176  (
uöt16_t
Ë((
ö¢
 & 
FC_RS2C
) >> 2U);

177 
	}
}

182 
ölöe
 
uöt16_t
 
	$c_decode_rdc
(c⁄° 
uöt16_t
 
ö¢
)

184  (
uöt16_t
Ë((
ö¢
 & 
FC_RDC
) >> 2U);

185 
	}
}

190 
ölöe
 
uöt16_t
 
	$c_decode_ˇddi4•n_nzuimm
(c⁄° 
uöt16_t
 
ö¢
)

192 
uöt16_t
 
tmp
 = 0;

193 
tmp
 |(
ö¢
 & 0x1800) >> 7;

194 
tmp
 |(
ö¢
 & 0x780) >> 1;

195 
tmp
 |(
ö¢
 & 0x40) >> 4;

196 
tmp
 |(
ö¢
 & 0x20) >> 2;

197  
tmp
;

198 
	}
}

204 
ölöe
 
öt32_t
 
	$c_decode_ˇddi16•_nzimm
(c⁄° 
uöt16_t
 
ö¢
)

206 
öt32_t
 
tmp
 = (
ö¢
 & 0x1000) >> 3;

207 
tmp
 |(
ö¢
 & 0x40) >> 2;

208 
tmp
 |(
ö¢
 & 0x20) << 1;

209 
tmp
 |(
ö¢
 & 0x18) << 4;

210 
tmp
 |(
ö¢
 & 0x4) << 3;

211  (
tmp
 & 0x200Ë? (0xfffffc00 |ÅmpË: (
uöt32_t
)Åmp;

212 
	}
}

218 
ölöe
 
uöt32_t
 
	$c_decode_˛ui_nzimm
(c⁄° 
uöt16_t
 
ö¢
)

220 
uöt32_t
 
tmp
 = (
ö¢
 & 0x1000) << 5 | (insn & 0x7c) << 10;

221  (
tmp
 & 0x20000) ? (0xfffc0000 |Åmp) :Åmp;

222 
	}
}

224 
ölöe
 
öt32_t
 
	$c_decode_ˇddi_imm
(c⁄° 
uöt16_t
 
ö¢
)

226 
öt32_t
 
tmp
 = 0;

227 
uöt16_t
 
mask
 = (0x1000 & 
ö¢
) << 3;

228 
i
 = 0; i <= 10; ++i)

229 
tmp
 |(
mask
 >> 
i
);

230 
tmp
 |(
ö¢
 & 0x007C) >> 2;

231  
	`sign_exãnd_h
(
tmp
);

232 
	}
}

238 
ölöe
 
öt32_t
 
	$c_decode_côy≥_imm
(c⁄° 
uöt16_t
 
ö¢
)

240 
uöt32_t
 
tmp
 = ((
ö¢
 & 
FCI_IMM_12
Ë>> 7Ë| ((ö¢ & 
FCI_IMM_6_2
) >> 2);

241  (
tmp
 & 0x20Ë? (
öt32_t
) (0xffffffc0 |Åmp) : (int32_t)Åmp;

242 
	}
}

254 
ölöe
 
öt32_t
 
	$c_decode_cjty≥_imm
(c⁄° 
uöt16_t
 
ö¢
)

256 
uöt16_t
 
tmp
 = 0;

257 
tmp
 |(
ö¢
 & 
CJ_IMM_3_1
) >> 2;

258 
tmp
 |(
ö¢
 & 
CJ_IMM_4
) >> 7;

259 
tmp
 |(
ö¢
 & 
CJ_IMM_5
) << 3;

260 
tmp
 |(
ö¢
 & 
CJ_IMM_6
) >> 1;

261 
tmp
 |(
ö¢
 & 
CJ_IMM_7
) << 1;

262 
tmp
 |(
ö¢
 & 
CJ_IMM_9_8
) >> 1;

263 
tmp
 |(
ö¢
 & 
CJ_IMM_10
) << 2;

264 
tmp
 |(
ö¢
 & 
CJ_IMM_11
) >> 1;

266 
i
 = 1; i <= 4; ++i)

267 
tmp
 |(0x0800 &ÅmpË<< 
i
;

270  (
öt32_t
Ë(
öt16_t
Ë
tmp
;

271 
	}
}

277 
ölöe
 
uöt8_t
 
	$c_decode_cbty≥_shamt
(c⁄° 
uöt16_t
 
ö¢
)

279 
uöt8_t
 
tmp
 = 0;

280 
tmp
 |(
ö¢
 & 
CB_SHAMT_5
) >> 7;

281 
tmp
 |(
ö¢
 & 
CB_SHAMT_4_0
) >> 2;

282  
tmp
;

283 
	}
}

292 
ölöe
 
uöt16_t
 
	$c_decode_cbty≥_imm
(c⁄° 
uöt16_t
 
ö¢
)

294 
uöt16_t
 
tmp
 = 0;

296 
tmp
 |(
ö¢
 & 0b0000000000011000) >> 2;

297 
tmp
 |(
ö¢
 & 0b0000110000000000) >> 7;

298 
tmp
 |(
ö¢
 & 0b0000000000000100) << 3;

299 
tmp
 |(
ö¢
 & 0b0000000001100000) << 1;

300 
tmp
 |(
ö¢
 & 0b0001000000000000) >> 4;

303 
i
 = 1; i <= 8; ++i)

304 
tmp
 |(0x0100 &ÅmpË<< 
i
;

305  
tmp
;

306 
	}
}

313 
ölöe
 
	$decode_ôy≥
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

315 
ú
->
imm
 = 
	`decode_ôy≥_imm
(
ö¢
);

316 
ú
->
rs1
 = 
	`decode_rs1
(
ö¢
);

317 
ú
->
rd
 = 
	`decode_rd
(
ö¢
);

318 
	}
}

324 
ölöe
 
	$decode_uty≥
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

326 
ú
->
imm
 = 
	`decode_uty≥_imm
(
ö¢
);

327 
ú
->
rd
 = 
	`decode_rd
(
ö¢
);

328 
	}
}

334 
ölöe
 
	$decode_°y≥
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

336 
ú
->
imm
 = 
	`decode_°y≥_imm
(
ö¢
);

337 
ú
->
rs2
 = 
	`decode_rs2
(
ö¢
);

338 
ú
->
rs1
 = 
	`decode_rs1
(
ö¢
);

339 
	}
}

345 
ölöe
 
	$decode_πy≥
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

347 
ú
->
rs2
 = 
	`decode_rs2
(
ö¢
);

348 
ú
->
rs1
 = 
	`decode_rs1
(
ö¢
);

349 
ú
->
rd
 = 
	`decode_rd
(
ö¢
);

350 
	}
}

356 
ölöe
 
	$decode_bty≥
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

358 
ú
->
imm
 = 
	`decode_bty≥_imm
(
ö¢
);

359 
ú
->
rs2
 = 
	`decode_rs2
(
ö¢
);

360 
ú
->
rs1
 = 
	`decode_rs1
(
ö¢
);

361 
	}
}

367 
ölöe
 
	$decode_jty≥
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

369 
ú
->
imm
 = 
	`decode_jty≥_imm
(
ö¢
);

370 
ú
->
rd
 = 
	`decode_rd
(
ö¢
);

371 
	}
}

373 #i‡
RV32_HAS
(
EXT_F
)

378 
ölöe
 
	$decode_r4ty≥
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

380 
ú
->
rd
 = 
	`decode_rd
(
ö¢
);

381 
ú
->
rs1
 = 
	`decode_rs1
(
ö¢
);

382 
ú
->
rs2
 = 
	`decode_rs2
(
ö¢
);

383 
ú
->
rs3
 = 
	`decode_r4ty≥_rs3
(
ö¢
);

384 
ú
->
rm
 = 
	`decode_fun˘3
(
ö¢
);

385 
	}
}

392 
ölöe
 
boﬁ
 
	$›_lﬂd
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

406 
	`decode_ôy≥
(
ú
, 
ö¢
);

409 
	`decode_fun˘3
(
ö¢
)) {

411 
ú
->
›code
 = 
rv_ö¢_lb
;

414 
ú
->
›code
 = 
rv_ö¢_lh
;

417 
ú
->
›code
 = 
rv_ö¢_lw
;

420 
ú
->
›code
 = 
rv_ö¢_lbu
;

423 
ú
->
›code
 = 
rv_ö¢_lhu
;

426  
Ál£
;

428  
åue
;

429 
	}
}

435 
ölöe
 
boﬁ
 
	$›_›_imm
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

451 
	`decode_ôy≥
(
ú
, 
ö¢
);

456 i‡(
	`u∆ikñy
(
ú
->
rd
 =
rv_ªg_zîo
)) {

457 
ú
->
›code
 = 
rv_ö¢_n›
;

458  
åue
;

462 
	`decode_fun˘3
(
ö¢
)) {

464 
ú
->
›code
 = 
rv_ö¢_addi
;

467 
ú
->
›code
 = 
rv_ö¢_¶li
;

468 i‡(
	`u∆ikñy
(
ú
->
imm
 & (1 << 5)))

469  
Ál£
;

472 
ú
->
›code
 = 
rv_ö¢_¶ti
;

475 
ú
->
›code
 = 
rv_ö¢_¶tiu
;

478 
ú
->
›code
 = 
rv_ö¢_x‹i
;

484 
ú
->
›code
 = (ú->
imm
 & ~0x1f)

485 ? 
rv_ö¢_§ai


486 : 
rv_ö¢_§li
;

487 i‡(
	`u∆ikñy
(
ú
->
imm
 & (1 << 5)))

488  
Ál£
;

491 
ú
->
›code
 = 
rv_ö¢_‹i
;

494 
ú
->
›code
 = 
rv_ö¢_™di
;

497  
Ál£
;

499  
åue
;

500 
	}
}

506 
ölöe
 
boﬁ
 
	$›_auùc
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

514 
	`decode_uty≥
(
ú
, 
ö¢
);

517 i‡(
	`u∆ikñy
(
ú
->
rd
 =
rv_ªg_zîo
)) {

518 
ú
->
›code
 = 
rv_ö¢_n›
;

519  
åue
;

522 
ú
->
›code
 = 
rv_ö¢_auùc
;

523  
åue
;

524 
	}
}

530 
ölöe
 
boﬁ
 
	$›_°‹e
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

541 
	`decode_°y≥
(
ú
, 
ö¢
);

544 
	`decode_fun˘3
(
ö¢
)) {

546 
ú
->
›code
 = 
rv_ö¢_sb
;

549 
ú
->
›code
 = 
rv_ö¢_sh
;

552 
ú
->
›code
 = 
rv_ö¢_sw
;

555  
Ál£
;

557  
åue
;

558 
	}
}

564 
ölöe
 
boﬁ
 
	$›_›
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

581 
	`decode_πy≥
(
ú
, 
ö¢
);

584 i‡(
	`u∆ikñy
(
ú
->
rd
 =
rv_ªg_zîo
)) {

585 
ú
->
›code
 = 
rv_ö¢_n›
;

586  
åue
;

589 
uöt8_t
 
fun˘3
 = 
	`decode_fun˘3
(
ö¢
);

592 
	`decode_fun˘7
(
ö¢
)) {

594 
fun˘3
) {

596 
ú
->
›code
 = 
rv_ö¢_add
;

599 
ú
->
›code
 = 
rv_ö¢_¶l
;

602 
ú
->
›code
 = 
rv_ö¢_¶t
;

605 
ú
->
›code
 = 
rv_ö¢_¶tu
;

608 
ú
->
›code
 = 
rv_ö¢_x‹
;

611 
ú
->
›code
 = 
rv_ö¢_§l
;

614 
ú
->
›code
 = 
rv_ö¢_‹
;

617 
ú
->
›code
 = 
rv_ö¢_™d
;

620  
Ál£
;

624 #i‡
	`RV32_HAS
(
EXT_M
)

637 
fun˘3
) {

639 
ú
->
›code
 = 
rv_ö¢_mul
;

642 
ú
->
›code
 = 
rv_ö¢_mulh
;

645 
ú
->
›code
 = 
rv_ö¢_mulhsu
;

648 
ú
->
›code
 = 
rv_ö¢_mulhu
;

651 
ú
->
›code
 = 
rv_ö¢_div
;

654 
ú
->
›code
 = 
rv_ö¢_divu
;

657 
ú
->
›code
 = 
rv_ö¢_ªm
;

660 
ú
->
›code
 = 
rv_ö¢_ªmu
;

663  
Ál£
;

669 
fun˘3
) {

671 
ú
->
›code
 = 
rv_ö¢_sub
;

674 
ú
->
›code
 = 
rv_ö¢_§a
;

677  
Ál£
;

681  
Ál£
;

683  
åue
;

684 
	}
}

690 
ölöe
 
boﬁ
 
	$›_lui
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

698 
	`decode_uty≥
(
ú
, 
ö¢
);

701 i‡(
	`u∆ikñy
(
ú
->
rd
 =
rv_ªg_zîo
)) {

702 
ú
->
›code
 = 
rv_ö¢_n›
;

703  
åue
;

706 
ú
->
›code
 = 
rv_ö¢_lui
;

707  
åue
;

708 
	}
}

714 
ölöe
 
boﬁ
 
	$›_bønch
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

727 
	`decode_bty≥
(
ú
, 
ö¢
);

730 
	`decode_fun˘3
(
ö¢
)) {

732 
ú
->
›code
 = 
rv_ö¢_beq
;

735 
ú
->
›code
 = 
rv_ö¢_b√
;

738 
ú
->
›code
 = 
rv_ö¢_b…
;

741 
ú
->
›code
 = 
rv_ö¢_bge
;

744 
ú
->
›code
 = 
rv_ö¢_b…u
;

747 
ú
->
›code
 = 
rv_ö¢_bgeu
;

750  
Ál£
;

752  
åue
;

753 
	}
}

759 
ölöe
 
boﬁ
 
	$›_jÆr
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

767 
	`decode_ôy≥
(
ú
, 
ö¢
);

769 
ú
->
›code
 = 
rv_ö¢_jÆr
;

770  
åue
;

771 
	}
}

777 
ölöe
 
boﬁ
 
	$›_jÆ
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

785 
	`decode_jty≥
(
ú
, 
ö¢
);

787 
ú
->
›code
 = 
rv_ö¢_jÆ
;

788  
åue
;

789 
	}
}

791 
FORCE_INLINE
 
boﬁ
 
	$c§_is_wrôabÀ
(c⁄° 
uöt32_t
 
c§
)

793  
c§
 < 0xc00;

794 
	}
}

800 
ölöe
 
boﬁ
 
	$›_sy°em
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

819 
	`decode_ôy≥
(
ú
, 
ö¢
);

822 
	`decode_fun˘3
(
ö¢
)) {

824 i‡((
ö¢
 >> 25) == 0b0001001) {

825 
ú
->
›code
 = 
rv_ö¢_s„n˚vma
;

830 
ú
->
imm
) {

832 
ú
->
›code
 = 
rv_ö¢_eˇŒ
;

835 
ú
->
›code
 = 
rv_ö¢_ebªak
;

838 
ú
->
›code
 = 
rv_ö¢_wfi
;

843  
Ál£
;

845 
ú
->
›code
 = 
rv_ö¢_§ë
;

848 
ú
->
›code
 = 
rv_ö¢_mªt
;

851  
Ál£
;

855 #i‡
	`RV32_HAS
(
Zic§
)

886 
ú
->
›code
 = 
rv_ö¢_c§rw
;

889 
ú
->
›code
 = 
rv_ö¢_c§rs
;

892 
ú
->
›code
 = 
rv_ö¢_c§rc
;

895 
ú
->
›code
 = 
rv_ö¢_c§rwi
;

898 
ú
->
›code
 = 
rv_ö¢_c§rsi
;

901 
ú
->
›code
 = 
rv_ö¢_c§rci
;

906  
Ál£
;

909  
	`c§_is_wrôabÀ
(
ú
->
imm
Ë|| (ú->
rs1
 =
rv_ªg_zîo
);

910 
	}
}

912 #i‡
RV32_HAS
(
Zi„n˚i
)

917 
ölöe
 
boﬁ
 
	$›_misc_mem
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

923 c⁄° 
uöt32_t
 
fun˘3
 = 
	`decode_fun˘3
(
ö¢
);

924 
fun˘3
){

927 
ú
->
›code
 = 
rv_ö¢_„n˚
;

928  
åue
;

931 
ú
->
›code
 = 
rv_ö¢_„n˚i
;

932  
åue
;

934  
Ál£
;

937  
Ál£
;

938 
	}
}

940 
	#›_misc_mem
 
OP_UNIMP


	)

943 #i‡
RV32_HAS
(
EXT_A
)

948 
ölöe
 
boﬁ
 
	$›_amo
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

966 
	`decode_πy≥
(
ú
, 
ö¢
);

969 c⁄° 
uöt32_t
 
fun˘5
 = (
	`decode_fun˘7
(
ö¢
) >> 2) & 0x1f;

972 
fun˘5
) {

974 
ú
->
›code
 = 
rv_ö¢_Ãw
;

977 
ú
->
›code
 = 
rv_ö¢_scw
;

980 
ú
->
›code
 = 
rv_ö¢_amosw≠w
;

983 
ú
->
›code
 = 
rv_ö¢_amﬂddw
;

986 
ú
->
›code
 = 
rv_ö¢_amox‹w
;

989 
ú
->
›code
 = 
rv_ö¢_amﬂndw
;

992 
ú
->
›code
 = 
rv_ö¢_amo‹w
;

995 
ú
->
›code
 = 
rv_ö¢_amomöw
;

998 
ú
->
›code
 = 
rv_ö¢_amomaxw
;

1001 
ú
->
›code
 = 
rv_ö¢_amomöuw
;

1004 
ú
->
›code
 = 
rv_ö¢_amomaxuw
;

1007  
Ál£
;

1009  
åue
;

1010 
	}
}

1012 
	#›_amo
 
OP_UNIMP


	)

1015 #i‡
RV32_HAS
(
EXT_F
)

1020 
ölöe
 
boﬁ
 
	$›_lﬂd_Â
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1028 
	`decode_ôy≥
(
ú
, 
ö¢
);

1030 
ú
->
›code
 = 
rv_ö¢_Êw
;

1031  
åue
;

1032 
	}
}

1038 
ölöe
 
boﬁ
 
	$›_°‹e_Â
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1046 
	`decode_°y≥
(
ú
, 
ö¢
);

1048 
ú
->
›code
 = 
rv_ö¢_fsw
;

1049  
åue
;

1050 
	}
}

1056 
ölöe
 
boﬁ
 
	$›_›_Â
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1083 
ú
->
rm
 = 
	`decode_fun˘3
(
ö¢
);

1084 
	`decode_πy≥
(
ú
, 
ö¢
);

1087 
	`decode_fun˘7
(
ö¢
)) {

1089 
ú
->
›code
 = 
rv_ö¢_Ádds
;

1092 
ú
->
›code
 = 
rv_ö¢_fsubs
;

1095 
ú
->
›code
 = 
rv_ö¢_fmuls
;

1098 
ú
->
›code
 = 
rv_ö¢_fdivs
;

1101 
ú
->
›code
 = 
rv_ö¢_fsqπs
;

1105 
ú
->
rm
) {

1107 
ú
->
›code
 = 
rv_ö¢_fsgnjs
;

1110 
ú
->
›code
 = 
rv_ö¢_fsgnjns
;

1113 
ú
->
›code
 = 
rv_ö¢_fsgnjxs
;

1116  
Ál£
;

1121 
ú
->
rs2
) {

1123 
ú
->
›code
 = 
rv_ö¢_fcvtws
;

1126 
ú
->
›code
 = 
rv_ö¢_fcvtwus
;

1132 
ú
->
rm
) {

1134 
ú
->
›code
 = 
rv_ö¢_fmös
;

1137 
ú
->
›code
 = 
rv_ö¢_fmaxs
;

1140  
Ál£
;

1145 
ú
->
rm
) {

1147 
ú
->
›code
 = 
rv_ö¢_fmvxw
;

1150 
ú
->
›code
 = 
rv_ö¢_f˛asss
;

1153  
Ál£
;

1158 
ú
->
rm
) {

1160 
ú
->
›code
 = 
rv_ö¢_„qs
;

1163 
ú
->
›code
 = 
rv_ö¢_Êts
;

1166 
ú
->
›code
 = 
rv_ö¢_Êes
;

1169  
Ál£
;

1174 
ú
->
rs2
) {

1176 
ú
->
›code
 = 
rv_ö¢_fcvtsw
;

1179 
ú
->
›code
 = 
rv_ö¢_fcvtswu
;

1182  
Ál£
;

1186 
ú
->
›code
 = 
rv_ö¢_fmvwx
;

1189  
Ál£
;

1191  
åue
;

1192 
	}
}

1198 
ölöe
 
boﬁ
 
	$›_madd
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1206 
	`decode_r4ty≥
(
ú
, 
ö¢
);

1208 
ú
->
›code
 = 
rv_ö¢_fmadds
;

1209  
åue
;

1210 
	}
}

1216 
ölöe
 
boﬁ
 
	$›_msub
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1224 
	`decode_r4ty≥
(
ú
, 
ö¢
);

1226 
ú
->
›code
 = 
rv_ö¢_fmsubs
;

1227  
åue
;

1228 
	}
}

1234 
ölöe
 
boﬁ
 
	$›_nmadd
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1242 
	`decode_r4ty≥
(
ú
, 
ö¢
);

1244 
ú
->
›code
 = 
rv_ö¢_‚madds
;

1245  
åue
;

1246 
	}
}

1252 
ölöe
 
boﬁ
 
	$›_nmsub
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1260 
	`decode_r4ty≥
(
ú
, 
ö¢
);

1262 
ú
->
›code
 = 
rv_ö¢_‚msubs
;

1263  
åue
;

1264 
	}
}

1267 
	#›_lﬂd_Â
 
OP_UNIMP


	)

1268 
	#›_°‹e_Â
 
OP_UNIMP


	)

1269 
	#›_›_Â
 
OP_UNIMP


	)

1270 
	#›_madd
 
OP_UNIMP


	)

1271 
	#›_msub
 
OP_UNIMP


	)

1272 
	#›_nmadd
 
OP_UNIMP


	)

1273 
	#›_nmsub
 
OP_UNIMP


	)

1276 #i‡
RV32_HAS
(
EXT_C
)

1281 
ölöe
 
boﬁ
 
	$›_ˇddi
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1289 
ú
->
rd
 = 
	`c_decode_rd
(
ö¢
);

1292 
ú
->
rd
) {

1294 
ú
->
›code
 = 
rv_ö¢_˙›
;

1298 
ú
->
imm
 = 
	`c_decode_côy≥_imm
(
ö¢
);

1299 
ú
->
›code
 = 
rv_ö¢_ˇddi
;

1302  
åue
;

1303 
	}
}

1309 
ölöe
 
boﬁ
 
	$›_ˇddi4•n
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1316 
ú
->
imm
 = 
	`c_decode_ˇddi4•n_nzuimm
(
ö¢
);

1317 
ú
->
rd
 = 
	`c_decode_rdc
(
ö¢
) | 0x08;

1320 i‡(!
ú
->
imm
)

1321  
Ál£
;

1322 
ú
->
›code
 = 
rv_ö¢_ˇddi4•n
;

1323  
åue
;

1324 
	}
}

1330 
ölöe
 
boﬁ
 
	$›_˛i
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1337 
ú
->
imm
 = 
	`c_decode_côy≥_imm
(
ö¢
);

1338 
ú
->
rd
 = 
	`c_decode_rd
(
ö¢
);

1339 
ú
->
›code
 = 
rv_ö¢_˛i
;

1340  
åue
;

1341 
	}
}

1347 
ölöe
 
boﬁ
 
	$›_˛ui
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1355 
ú
->
rd
 = 
	`c_decode_rd
(
ö¢
);

1357 
ú
->
rd
) {

1359 
ú
->
›code
 = 
rv_ö¢_˙›
;

1362 
ú
->
imm
 = 
	`c_decode_ˇddi16•_nzimm
(
ö¢
);

1364 i‡(!(
uöt32_t
Ë
ú
->
imm
)

1365  
Ál£
;

1366 
ú
->
›code
 = 
rv_ö¢_ˇddi16•
;

1370 
ú
->
imm
 = 
	`c_decode_˛ui_nzimm
(
ö¢
);

1372 i‡(!
ú
->
imm
)

1373  
Ál£
;

1374 
ú
->
›code
 = 
rv_ö¢_˛ui
;

1378  
åue
;

1379 
	}
}

1391 
ölöe
 
boﬁ
 
	$›_cmisc_Æu
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1407 
uöt8_t
 
fun˘2
 = (
ö¢
 & 0x0C00) >> 10;

1408 
fun˘2
) {

1410 
ú
->
shamt
 = 
	`c_decode_cbty≥_shamt
(
ö¢
);

1411 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1414 i‡(
ú
->
shamt
 & 0x20)

1415  
Ál£
;

1420 
ú
->
›code
 = (!ú->
rs1
 || !ú->
shamt
Ë? 
rv_ö¢_˙›
 : 
rv_ö¢_c§li
;

1423 
ú
->
shamt
 = 
	`c_decode_cbty≥_shamt
(
ö¢
);

1424 
ú
->
rs1
 = 
	`c_decode_rs1
(
ö¢
);

1427 i‡(
ú
->
shamt
 & 0x20)

1428  
Ál£
;

1429 
ú
->
›code
 = 
rv_ö¢_c§ai
;

1432 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1433 
ú
->
imm
 = 
	`c_decode_ˇddi_imm
(
ö¢
);

1434 
ú
->
›code
 = 
rv_ö¢_ˇndi
;

1437 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1438 
ú
->
rs2
 = 
	`c_decode_rs2c
(
ö¢
) | 0x08;

1439 
ú
->
rd
 = ir->
rs1
;

1442 ((
ö¢
 & 0x1000) >> 10) | ((insn & 0x0060) >> 5)) {

1444 
ú
->
›code
 = 
rv_ö¢_csub
;

1447 
ú
->
›code
 = 
rv_ö¢_cx‹
;

1450 
ú
->
›code
 = 
rv_ö¢_c‹
;

1453 
ú
->
›code
 = 
rv_ö¢_ˇnd
;

1457 
	`as£π
(!"RV64/128C instructions");

1461 
	`as£π
(!"InstructionÑeserved");

1464 
__UNREACHABLE
;

1469  
åue
;

1470 
	}
}

1476 
ölöe
 
boﬁ
 
	$›_c¶li
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1482 
uöt32_t
 
tmp
 = 0;

1483 
tmp
 |(
ö¢
 & 
FCI_IMM_12
) >> 7;

1484 
tmp
 |(
ö¢
 & 
FCI_IMM_6_2
) >> 2;

1485 
ú
->
imm
 = 
tmp
;

1486 
ú
->
rd
 = 
	`c_decode_rd
(
ö¢
);

1487 
ú
->
›code
 = ir->
rd
 ? 
rv_ö¢_c¶li
 : 
rv_ö¢_˙›
;

1488  
åue
;

1489 
	}
}

1495 
ölöe
 
boﬁ
 
	$›_˛w•
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1501 
uöt16_t
 
tmp
 = 0;

1502 
tmp
 |(
ö¢
 & 0x70) >> 2;

1503 
tmp
 |(
ö¢
 & 0x0c) << 4;

1504 
tmp
 |(
ö¢
 & 0x1000) >> 7;

1505 
ú
->
imm
 = 
tmp
;

1506 
ú
->
rd
 = 
	`c_decode_rd
(
ö¢
);

1509 
ú
->
›code
 = ir->
rd
 ? 
rv_ö¢_˛w•
 : 
rv_ö¢_˙›
;

1510  
åue
;

1511 
	}
}

1517 
ölöe
 
boﬁ
 
	$›_csw•
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1523 
ú
->
imm
 = (
ö¢
 & 0x1e00) >> 7 | (insn & 0x180) >> 1;

1524 
ú
->
rs2
 = 
	`c_decode_rs2
(
ö¢
);

1525 
ú
->
›code
 = 
rv_ö¢_csw•
;

1526  
åue
;

1527 
	}
}

1533 
ölöe
 
boﬁ
 
	$›_˛w
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1539 
uöt16_t
 
tmp
 = 0;

1540 
tmp
 |(
ö¢
 & 0b0000000001000000) >> 4;

1541 
tmp
 |(
ö¢
 & 
FC_IMM_12_10
) >> 7;

1542 
tmp
 |(
ö¢
 & 0b0000000000100000) << 1;

1543 
ú
->
imm
 = 
tmp
;

1544 
ú
->
rd
 = 
	`c_decode_rdc
(
ö¢
) | 0x08;

1545 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1546 
ú
->
›code
 = 
rv_ö¢_˛w
;

1547  
åue
;

1548 
	}
}

1554 
ölöe
 
boﬁ
 
	$›_csw
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1560 
uöt32_t
 
tmp
 = 0;

1562 
tmp
 |(
ö¢
 & 0b0000000001000000) >> 4;

1563 
tmp
 |(
ö¢
 & 
FC_IMM_12_10
) >> 7;

1564 
tmp
 |(
ö¢
 & 0b0000000000100000) << 1;

1565 
ú
->
imm
 = 
tmp
;

1566 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1567 
ú
->
rs2
 = 
	`c_decode_rs2c
(
ö¢
) | 0x08;

1568 
ú
->
›code
 = 
rv_ö¢_csw
;

1569  
åue
;

1570 
	}
}

1576 
ölöe
 
boﬁ
 
	$›_cj
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1582 
ú
->
imm
 = 
	`c_decode_cjty≥_imm
(
ö¢
);

1583 
ú
->
›code
 = 
rv_ö¢_cj
;

1584  
åue
;

1585 
	}
}

1591 
ölöe
 
boﬁ
 
	$›_cjÆ
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1597 
ú
->
imm
 = 
	`sign_exãnd_h
(
	`c_decode_cjty≥_imm
(
ö¢
));

1598 
ú
->
›code
 = 
rv_ö¢_cjÆ
;

1599  
åue
;

1600 
	}
}

1606 
ölöe
 
boﬁ
 
	$›_c¸
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1616 
ú
->
rs1
 = 
	`c_decode_rs1
(
ö¢
);

1617 
ú
->
rs2
 = 
	`c_decode_rs2
(
ö¢
);

1618 
ú
->
rd
 = ir->
rs1
;

1621 (
ö¢
 & 0x1000) >> 12) {

1624 
ú
->
rs2
) {

1627 i‡(!
ú
->
rs1
)

1628  
Ál£
;

1629 
ú
->
›code
 = 
rv_ö¢_cjr
;

1633 
ú
->
›code
 = ir->
rd
 ? 
rv_ö¢_cmv
 : 
rv_ö¢_˙›
;

1638 i‡(!
ú
->
rs1
 && !ú->
rs2
)

1639 
ú
->
›code
 = 
rv_ö¢_ebªak
;

1640 i‡(
ú
->
rs1
 && ir->
rs2
) {

1642 
ú
->
›code
 = ir->
rd
 ? 
rv_ö¢_ˇdd
 : 
rv_ö¢_˙›
;

1643 } i‡(
ú
->
rs1
 && !ú->
rs2
)

1644 
ú
->
›code
 = 
rv_ö¢_cjÆr
;

1647 
ú
->
›code
 = 
rv_ö¢_˙›
;

1651 
__UNREACHABLE
;

1654  
åue
;

1655 
	}
}

1661 
ölöe
 
boﬁ
 
	$›_cbeqz
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1667 
ú
->
imm
 = 
	`sign_exãnd_h
(
	`c_decode_cbty≥_imm
(
ö¢
));

1668 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1669 
ú
->
›code
 = 
rv_ö¢_cbeqz
;

1670  
åue
;

1671 
	}
}

1677 
ölöe
 
boﬁ
 
	$›_cb√z
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1683 
ú
->
imm
 = 
	`sign_exãnd_h
(
	`c_decode_cbty≥_imm
(
ö¢
));

1684 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1685 
ú
->
›code
 = 
rv_ö¢_cb√z
;

1686  
åue
;

1687 
	}
}

1690 
	#›_ˇddi4•n
 
OP_UNIMP


	)

1691 
	#›_ˇddi
 
OP_UNIMP


	)

1692 
	#›_c¶li
 
OP_UNIMP


	)

1693 
	#›_cjÆ
 
OP_UNIMP


	)

1694 
	#›_˛w
 
OP_UNIMP


	)

1695 
	#›_˛i
 
OP_UNIMP


	)

1696 
	#›_˛w•
 
OP_UNIMP


	)

1697 
	#›_˛ui
 
OP_UNIMP


	)

1698 
	#›_cmisc_Æu
 
OP_UNIMP


	)

1699 
	#›_c¸
 
OP_UNIMP


	)

1700 
	#›_cj
 
OP_UNIMP


	)

1701 
	#›_csw
 
OP_UNIMP


	)

1702 
	#›_cbeqz
 
OP_UNIMP


	)

1703 
	#›_csw•
 
OP_UNIMP


	)

1704 
	#›_cb√z
 
OP_UNIMP


	)

1707 #i‡
RV32_HAS
(
EXT_C
Ë&& RV32_HAS(
EXT_F
)

1712 
ölöe
 
boﬁ
 
	$›_cÊw•
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1718 
uöt16_t
 
tmp
 = 0;

1719 
tmp
 |(
ö¢
 & 0x70) >> 2;

1720 
tmp
 |(
ö¢
 & 0x0c) << 4;

1721 
tmp
 |(
ö¢
 & 0x1000) >> 7;

1722 
ú
->
imm
 = 
tmp
;

1723 
ú
->
rd
 = 
	`c_decode_rd
(
ö¢
);

1724 
ú
->
›code
 = 
rv_ö¢_cÊw•
;

1725  
åue
;

1726 
	}
}

1732 
ölöe
 
boﬁ
 
	$›_cfsw•
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1738 
ú
->
imm
 = (
ö¢
 & 0x1e00) >> 7 | (insn & 0x180) >> 1;

1739 
ú
->
rs2
 = 
	`c_decode_rs2
(
ö¢
);

1740 
ú
->
›code
 = 
rv_ö¢_cfsw•
;

1741  
åue
;

1742 
	}
}

1748 
ölöe
 
boﬁ
 
	$›_cÊw
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1754 
uöt16_t
 
tmp
 = 0;

1755 
tmp
 |(
ö¢
 & 0b0000000001000000) >> 4;

1756 
tmp
 |(
ö¢
 & 
FC_IMM_12_10
) >> 7;

1757 
tmp
 |(
ö¢
 & 0b0000000000100000) << 1;

1758 
ú
->
imm
 = 
tmp
;

1759 
ú
->
rd
 = 
	`c_decode_rdc
(
ö¢
) | 0x08;

1760 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1761 
ú
->
›code
 = 
rv_ö¢_cÊw
;

1762  
åue
;

1763 
	}
}

1769 
ölöe
 
boﬁ
 
	$›_cfsw
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
)

1775 
uöt32_t
 
tmp
 = 0;

1777 
tmp
 |(
ö¢
 & 0b0000000001000000) >> 4;

1778 
tmp
 |(
ö¢
 & 
FC_IMM_12_10
) >> 7;

1779 
tmp
 |(
ö¢
 & 0b0000000000100000) << 1;

1780 
ú
->
imm
 = 
tmp
;

1781 
ú
->
rs1
 = 
	`c_decode_rs1c
(
ö¢
) | 0x08;

1782 
ú
->
rs2
 = 
	`c_decode_rs2c
(
ö¢
) | 0x08;

1783 
ú
->
›code
 = 
rv_ö¢_cfsw
;

1784  
åue
;

1785 
	}
}

1788 
	#›_cfsw
 
OP_UNIMP


	)

1789 
	#›_cÊw
 
OP_UNIMP


	)

1790 
	#›_cfsw•
 
OP_UNIMP


	)

1791 
	#›_cÊw•
 
OP_UNIMP


	)

1795 
ölöe
 
boﬁ
 
	$›_unimp
(
rv_ö¢_t
 *
ú
 
UNUSED
, 
uöt32_t
 
ö¢
 UNUSED)

1797  
Ál£
;

1798 
	}
}

1801 
	$boﬁ
 (*
	tdecode_t
)(
	trv_ö¢_t
 *
	tú
, 
	tuöt32_t
 
	tö¢
);

1804 
boﬁ
 
	$rv_decode
(
rv_ö¢_t
 *
ú
, 
uöt32_t
 
ö¢
)

1806 
	`as£π
(
ú
);

1808 
	#OP_UNIMP
 
›_unimp


	)

1809 
	#OP
(
ö¢
Ë
›_
##
	)
ö¢

1813 c⁄° 
decode_t
 
rv_jump_èbÀ
[] = {

1815 
	`OP
(
lﬂd
), OP(
lﬂd_Â
), OP(
unimp
), OP(
misc_mem
), OP(
›_imm
), OP(
auùc
), OP(unimp), OP(unimp),

1816 
	`OP
(
°‹e
), OP(
°‹e_Â
), OP(
unimp
), OP(
amo
), OP(
›
), OP(
lui
), OP(unimp), OP(unimp),

1817 
	`OP
(
madd
), OP(
msub
), OP(
nmsub
), OP(
nmadd
), OP(
›_Â
), OP(
unimp
), OP(unimp), OP(unimp),

1818 
	`OP
(
bønch
), OP(
jÆr
), OP(
unimp
), OP(
jÆ
), OP(
sy°em
), OP(unimp), OP(unimp), OP(unimp),

1821 #i‡
	`RV32_HAS
(
EXT_C
)

1823 c⁄° 
decode_t
 
rvc_jump_èbÀ
[] = {

1825 
	`OP
(
ˇddi4•n
), OP(
ˇddi
), OP(
c¶li
), OP(
unimp
),

1826 
	`OP
(
unimp
), OP(
cjÆ
), OP(unimp), OP(unimp),

1827 
	`OP
(
˛w
), OP(
˛i
), OP(
˛w•
), OP(
unimp
),

1828 
	`OP
(
cÊw
), OP(
˛ui
), OP(
cÊw•
), OP(
unimp
),

1829 
	`OP
(
unimp
), OP(
cmisc_Æu
), OP(
c¸
), OP(unimp),

1830 
	`OP
(
unimp
), OP(
cj
), OP(unimp), OP(unimp),

1831 
	`OP
(
csw
), OP(
cbeqz
), OP(
csw•
), OP(
unimp
),

1832 
	`OP
(
cfsw
), OP(
cb√z
), OP(
cfsw•
), OP(
unimp
),

1838 #i‡
	`RV32_HAS
(
EXT_C
)

1842 i‡(
	`is_com¥es£d
(
ö¢
)) {

1843 
ö¢
 &= 0x0000FFFF;

1844 c⁄° 
uöt16_t
 
c_ödex
 = (
ö¢
 & 
FC_FUNC3
Ë>> 11 | (ö¢ & 
FC_OPCODE
);

1847 c⁄° 
decode_t
 
›
 = 
rvc_jump_èbÀ
[
c_ödex
];

1848 
	`as£π
(
›
);

1849  
	`›
(
ú
, 
ö¢
);

1854 c⁄° 
uöt32_t
 
ödex
 = (
ö¢
 & 
INSN_6_2
) >> 2;

1857 c⁄° 
decode_t
 
›
 = 
rv_jump_èbÀ
[
ödex
];

1858 
	`as£π
(
›
);

1859  
	`›
(
ú
, 
ö¢
);

1861 #unde‡
OP_UNIMP


1862 #unde‡
OP


1863 
	}
}

	@src/decode.h

6 #¥agm®
⁄˚


8 
	~<°dboﬁ.h
>

9 
	~<°döt.h
>

11 
	~"riscv.h
"

13 
	e›_fõld
 {

14 
	mF_n⁄e
 = 0,

15 
	mF_rs1
 = 1,

16 
	mF_rs2
 = 2,

17 
	mF_rs3
 = 4,

18 
	mF_rd
 = 8,

21 
	#ENC4
(
a
, 
b
, 
c
, 
d
, ...Ë
F_
##®| F_##b | F_##¯| F_##
	)
d

22 
	#ENC3
(
a
, 
b
, 
c
, ...Ë
F_
##®| F_##b | F_##
	)
c

23 
	#ENC2
(
a
, 
b
, ...Ë
F_
##®| F_##
	)
b

24 
	#ENC1
(
a
, ...Ë
F_
##
	)
a

25 
	#ENC0
(...Ë
F_n⁄e


	)

27 
	#ENCN
(
X
, 
A
ËX##
	)
A

28 
	#ENC_GEN
(
X
, 
A
Ë
	`ENCN
(X, A)

	)

29 
	#ENC
(...Ë
	`ENC_GEN
(
ENC
, 
	`COUNT_VARARGS
(
__VA_ARGS__
))(__VA_ARGS__)

	)

35 
	#RV_INSN_LIST
 \

36 
	`_
(
n›
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

38 
	`_
(
lui
, 0, 4, 1, 
	`ENC
(
rd
)) \

39 
	`_
(
auùc
, 0, 4, 1, 
	`ENC
(
rd
)) \

40 
	`_
(
jÆ
, 1, 4, 1, 
	`ENC
(
rd
)) \

41 
	`_
(
jÆr
, 1, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

42 
	`_
(
beq
, 1, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

43 
	`_
(
b√
, 1, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

44 
	`_
(
b…
, 1, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

45 
	`_
(
bge
, 1, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

46 
	`_
(
b…u
, 1, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

47 
	`_
(
bgeu
, 1, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

52 
	`_
(
lb
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

53 
	`_
(
lh
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

54 
	`_
(
lw
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

55 
	`_
(
lbu
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

56 
	`_
(
lhu
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

57 
	`_
(
sb
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

58 
	`_
(
sh
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

59 
	`_
(
sw
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
)) \

60 
	`_
(
addi
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

61 
	`_
(
¶ti
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

62 
	`_
(
¶tiu
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

63 
	`_
(
x‹i
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

64 
	`_
(
‹i
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

65 
	`_
(
™di
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

66 
	`_
(
¶li
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

67 
	`_
(
§li
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

68 
	`_
(
§ai
, 0, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

69 
	`_
(
add
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

70 
	`_
(
sub
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

71 
	`_
(
¶l
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

72 
	`_
(
¶t
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

73 
	`_
(
¶tu
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

74 
	`_
(
x‹
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

75 
	`_
(
§l
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

76 
	`_
(
§a
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

77 
	`_
(
‹
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

78 
	`_
(
™d
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

79 
	`_
(
„n˚
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

80 
	`_
(
eˇŒ
, 1, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

81 
	`_
(
ebªak
, 1, 4, 1, 
	`ENC
(
rs1
, 
rd
)) \

83 
	`_
(
wfi
, 0, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

84 
	`_
(
uªt
, 0, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

85 
	`_
(
§ë
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

86 
	`_
(
hªt
, 0, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

87 
	`_
(
mªt
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

88 
	`_
(
s„n˚vma
, 1, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

90 
	`IIF
(
	`RV32_HAS
(
Zi„n˚i
))( \

91 
	`_
(
„n˚i
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

94 
	`IIF
(
	`RV32_HAS
(
Zic§
))( \

95 
	`_
(
c§rw
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

96 
	`_
(
c§rs
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

97 
	`_
(
c§rc
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

98 
	`_
(
c§rwi
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

99 
	`_
(
c§rsi
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

100 
	`_
(
c§rci
, 1, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

103 
	`IIF
(
	`RV32_HAS
(
EXT_M
))( \

104 
	`_
(
mul
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

105 
	`_
(
mulh
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

106 
	`_
(
mulhsu
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

107 
	`_
(
mulhu
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

108 
	`_
(
div
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

109 
	`_
(
divu
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

110 
	`_
(
ªm
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

111 
	`_
(
ªmu
, 0, 4, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

114 
	`IIF
(
	`RV32_HAS
(
EXT_A
))( \

115 
	`_
(
Ãw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

116 
	`_
(
scw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

117 
	`_
(
amosw≠w
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

118 
	`_
(
amﬂddw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

119 
	`_
(
amox‹w
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

120 
	`_
(
amﬂndw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

121 
	`_
(
amo‹w
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

122 
	`_
(
amomöw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

123 
	`_
(
amomaxw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

124 
	`_
(
amomöuw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

125 
	`_
(
amomaxuw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

128 
	`IIF
(
	`RV32_HAS
(
EXT_F
))( \

129 
	`_
(
Êw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rd
)) \

130 
	`_
(
fsw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
)) \

131 
	`_
(
fmadds
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rs3
, 
rd
)) \

132 
	`_
(
fmsubs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rs3
, 
rd
)) \

133 
	`_
(
‚msubs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rs3
, 
rd
)) \

134 
	`_
(
‚madds
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rs3
, 
rd
)) \

135 
	`_
(
Ádds
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

136 
	`_
(
fsubs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

137 
	`_
(
fmuls
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

138 
	`_
(
fdivs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

139 
	`_
(
fsqπs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

140 
	`_
(
fsgnjs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

141 
	`_
(
fsgnjns
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

142 
	`_
(
fsgnjxs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

143 
	`_
(
fmös
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

144 
	`_
(
fmaxs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

145 
	`_
(
fcvtws
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

146 
	`_
(
fcvtwus
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

147 
	`_
(
fmvxw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

148 
	`_
(
„qs
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

149 
	`_
(
Êts
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

150 
	`_
(
Êes
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

151 
	`_
(
f˛asss
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

152 
	`_
(
fcvtsw
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

153 
	`_
(
fcvtswu
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

154 
	`_
(
fmvwx
, 0, 4, 0, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

157 
	`IIF
(
	`RV32_HAS
(
EXT_C
))( \

158 
	`_
(
ˇddi4•n
, 0, 2, 1, 
	`ENC
(
rd
)) \

159 
	`_
(
˛w
, 0, 2, 1, 
	`ENC
(
rs1
, 
rd
)) \

160 
	`_
(
csw
, 0, 2, 1, 
	`ENC
(
rs1
, 
rs2
)) \

161 
	`_
(
˙›
, 0, 2, 1, 
	`ENC
()) \

162 
	`_
(
ˇddi
, 0, 2, 1, 
	`ENC
(
rd
)) \

163 
	`_
(
cjÆ
, 1, 2, 1, 
	`ENC
()) \

164 
	`_
(
˛i
, 0, 2, 1, 
	`ENC
(
rd
)) \

165 
	`_
(
ˇddi16•
, 0, 2, 1, 
	`ENC
()) \

166 
	`_
(
˛ui
, 0, 2, 1, 
	`ENC
(
rd
)) \

167 
	`_
(
c§li
, 0, 2, 1, 
	`ENC
(
rs1
)) \

168 
	`_
(
c§ai
, 0, 2, 1, 
	`ENC
(
rs1
)) \

169 
	`_
(
ˇndi
, 0, 2, 1, 
	`ENC
(
rs1
)) \

170 
	`_
(
csub
, 0, 2, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

171 
	`_
(
cx‹
, 0, 2, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

172 
	`_
(
c‹
, 0, 2, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

173 
	`_
(
ˇnd
, 0, 2, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

174 
	`_
(
cj
, 1, 2, 1, 
	`ENC
()) \

175 
	`_
(
cbeqz
, 1, 2, 1, 
	`ENC
(
rs1
)) \

176 
	`_
(
cb√z
, 1, 2, 1, 
	`ENC
(
rs1
)) \

177 
	`_
(
c¶li
, 0, 2, 1, 
	`ENC
(
rd
)) \

178 
	`_
(
˛w•
, 0, 2, 1, 
	`ENC
(
rd
)) \

179 
	`_
(
cjr
, 1, 2, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

180 
	`_
(
cmv
, 0, 2, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

181 
	`_
(
˚bªak
, 1, 2, 1,
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

182 
	`_
(
cjÆr
, 1, 2, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

183 
	`_
(
ˇdd
, 0, 2, 1, 
	`ENC
(
rs1
, 
rs2
, 
rd
)) \

184 
	`_
(
csw•
, 0, 2, 1, 
	`ENC
(
rs2
)) \

186 
	`IIF
(
	`RV32_HAS
(
EXT_F
))( \

187 
	`_
(
cÊw•
, 0, 2, 1, 
	`ENC
(
rd
)) \

188 
	`_
(
cfsw•
, 0, 2, 1, 
	`ENC
(
rs2
)) \

189 
	`_
(
cÊw
, 0, 2, 1, 
	`ENC
(
rs1
, 
rd
)) \

190 
	`_
(
cfsw
, 0, 2, 1, 
	`ENC
(
rs1
, 
rs2
)) \

192 )

	)

200 
	#FUSE_INSN_LIST
 \

201 
	`_
(
fu£1
) \

202 
	`_
(
fu£2
) \

203 
	`_
(
fu£3
) \

204 
	`_
(
fu£4
) \

205 
	`_
(
fu£5
)

	)

212 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
Ë
rv_ö¢_
##ö°,

	)

213 
	mRV_INSN_LIST


214 #unde‡
_


215 
	mN_RV_INSNS
,

216 
	#_
(
ö°
Ë
rv_ö¢_
##ö°,

	)

217 
	mFUSE_INSN_LIST


218 #unde‡
_


226 
	mINSN_6_2
 = 0b00000000000000000000000001111100,

228 
	mFR_OPCODE
 = 0b00000000000000000000000001111111,

229 
	mFR_RD
 = 0b00000000000000000000111110000000,

230 
	mFR_FUNCT3
 = 0b00000000000000000111000000000000,

231 
	mFR_RS1
 = 0b00000000000011111000000000000000,

232 
	mFR_RS2
 = 0b00000001111100000000000000000000,

233 
	mFR_FUNCT7
 = 0b11111110000000000000000000000000,

235 
	mFI_IMM_11_0
 = 0b11111111111100000000000000000000,

237 
	mFS_IMM_4_0
 = 0b00000000000000000000111110000000,

238 
	mFS_IMM_11_5
 = 0b11111110000000000000000000000000,

240 
	mFB_IMM_11
 = 0b00000000000000000000000010000000,

241 
	mFB_IMM_4_1
 = 0b00000000000000000000111100000000,

242 
	mFB_IMM_10_5
 = 0b01111110000000000000000000000000,

243 
	mFB_IMM_12
 = 0b10000000000000000000000000000000,

245 
	mFU_IMM_31_12
 = 0b11111111111111111111000000000000,

247 
	mFJ_IMM_19_12
 = 0b00000000000011111111000000000000,

248 
	mFJ_IMM_11
 = 0b00000000000100000000000000000000,

249 
	mFJ_IMM_10_1
 = 0b01111111111000000000000000000000,

250 
	mFJ_IMM_20
 = 0b10000000000000000000000000000000,

252 
	mFR4_FMT
 = 0b00000110000000000000000000000000,

253 
	mFR4_RS3
 = 0b11111000000000000000000000000000,

255 
	mFC_OPCODE
 = 0b00000000000000000000000000000011,

256 
	mFC_FUNC3
 = 0b00000000000000001110000000000000,

258 
	mFC_RS1C
 = 0b00000000000000000000001110000000,

259 
	mFC_RS2C
 = 0b00000000000000000000000000011100,

260 
	mFC_RS1
 = 0b00000000000000000000111110000000,

261 
	mFC_RS2
 = 0b00000000000000000000000001111100,

263 
	mFC_RDC
 = 0b00000000000000000000000000011100,

264 
	mFC_RD
 = 0b00000000000000000000111110000000,

266 
	mFC_IMM_12_10
 = 0b00000000000000000001110000000000,

267 
	mFC_IMM_6_5
 = 0b00000000000000000000000001100000,

269 
	mFCI_IMM_12
 = 0b00000000000000000001000000000000,

270 
	mFCI_IMM_6_2
 = 0b00000000000000000000000001111100,

272 
	mFCSS_IMM
 = 0b00000000000000000001111110000000,

274 
	mFCJ_IMM
 = 0b00000000000000000001111111111100,

280 
öt32_t
 
	mimm
;

281 
uöt8_t
 
	mrd
, 
	mrs1
, 
	mrs2
;

282 
uöt8_t
 
	m›code
;

283 } 
	t›code_fu£_t
;

285 
	#HISTORY_SIZE
 16

	)

287 
uöt32_t
 
	mPC
[
HISTORY_SIZE
];

288 #i‡!
RV32_HAS
(
JIT
)

289 
uöt8_t
 
	midx
;

290 
rv_ö¢
 *
	mèrgë
[
HISTORY_SIZE
];

292 
uöt32_t
 
	mtimes
[
HISTORY_SIZE
];

294 } 
	tbønch_hi°‹y_èbÀ_t
;

296 
	srv_ö¢
 {

298 
öt32_t
 
	mimm
;

299 
uöt8_t
 
	mrs3
;

301 
uöt8_t
 
	mrd
, 
	mrs1
, 
	mrs2
;

303 
uöt8_t
 
	m›code
;

305 #i‡
RV32_HAS
(
EXT_C
)

306 
uöt8_t
 
	mshamt
;

309 #i‡
RV32_HAS
(
EXT_F
)

319 
uöt8_t
 
	mrm
;

323 
öt32_t
 
	mimm2
;

324 
›code_fu£_t
 *
	mfu£
;

326 
uöt32_t
 
	mpc
;

341 
rv_ö¢
 *
	m√xt
;

342 
boﬁ
 (*
im∂
)(
	mriscv_t
 *, c⁄° 
	mrv_ö¢
 *, 
	muöt64_t
, 
	muöt32_t
);

351 
rv_ö¢
 *
	mbønch_èkí
, *
	mbønch_u¡akí
;

352 
bønch_hi°‹y_èbÀ_t
 *
	mbønch_èbÀ
;

353 } 
	trv_ö¢_t
;

356 
boﬁ
 
rv_decode
(
rv_ö¢_t
 *
ú
, c⁄° 
uöt32_t
 
ö¢
);

	@src/elf.c

6 
	~<as£π.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

10 
	~"ñf.h
"

11 
	~"io.h
"

12 
	~"utûs.h
"

14 #i‡
HAVE_MMAP


15 
	~<f˙é.h
>

16 
	~<sys/mm™.h
>

17 
	~<sys/°©.h
>

18 
	~<uni°d.h
>

21 
	~<°dio.h
>

25 
	mEM_RISCV
 = 243,

29 
	mELFCLASS32
 = 1,

33 
	mPT_NULL
 = 0,

34 
	mPT_LOAD
 = 1,

35 
	mPT_DYNAMIC
 = 2,

36 
	mPT_INTERP
 = 3,

37 
	mPT_NOTE
 = 4,

38 
	mPT_SHLIB
 = 5,

39 
	mPT_PHDR
 = 6,

40 
	mPT_TLS
 = 7,

44 
	mSTT_NOTYPE
 = 0,

45 
	mSTT_OBJECT
 = 1,

46 
	mSTT_FUNC
 = 2,

47 
	mSTT_SECTION
 = 3,

48 
	mSTT_FILE
 = 4,

49 
	mSTT_COMMON
 = 5,

50 
	mSTT_TLS
 = 6,

53 
	#ELF_ST_TYPE
(
x
Ë(((ËxË& 0xf)

	)

55 
	sñf_öã∫Æ
 {

56 c⁄° 
Elf32_Ehdr
 *
	mhdr
;

57 
uöt32_t
 
	møw_size
;

58 
uöt8_t
 *
	møw_d©a
;

61 
m≠_t
 
	msymbﬁs
;

64 #i‚de‡
max


65 
	#max
(
a
, 
b
Ë(◊Ë> (bË? (aË: (b))

	)

67 #i‚de‡
mö


68 
	#mö
(
a
, 
b
Ë(◊Ë< (bË? (aË: (b))

	)

71 
ñf_t
 *
	$ñf_√w
()

73 
ñf_t
 *
e
 = 
	`mÆloc
((elf_t));

74 
	`as£π
(
e
);

75 
e
->
hdr
 = 
NULL
;

76 
e
->
øw_size
 = 0;

77 
e
->
symbﬁs
 = 
	`m≠_öô
(, *, 
m≠_cmp_uöt
);

78 
e
->
øw_d©a
 = 
NULL
;

79  
e
;

80 
	}
}

82 
	$ñf_dñëe
(
ñf_t
 *
e
)

84 i‡(!
e
)

87 
	`m≠_dñëe
(
e
->
symbﬁs
);

88 #i‡
HAVE_MMAP


89 i‡(
e
->
øw_d©a
)

90 
	`munm≠
(
e
->
øw_d©a
,É->
øw_size
);

92 
	`‰ì
(
e
->
øw_d©a
);

94 
	`‰ì
(
e
);

95 
	}
}

98 
	$ªÀa£
(
ñf_t
 *
e
)

100 #i‡!
HAVE_MMAP


101 
	`‰ì
(
e
->
øw_d©a
);

104 
e
->
øw_d©a
 = 
NULL
;

105 
e
->
øw_size
 = 0;

106 
e
->
hdr
 = 
NULL
;

107 
	}
}

110 
boﬁ
 
	$is_vÆid
(
ñf_t
 *
e
)

113 i‡(
	`memcmp
(
e
->
hdr
->
e_idít
, "\177ELF", 4))

114  
Ál£
;

117 i‡(
e
->
hdr
->
e_idít
[
EI_CLASS
] !
ELFCLASS32
)

118  
Ál£
;

121 i‡(
e
->
hdr
->
e_machöe
 !
EM_RISCV
)

122  
Ál£
;

124  
åue
;

125 
	}
}

128 c⁄° *
	$gë_sh_°rög
(
ñf_t
 *
e
, 
ödex
)

130 
uöt32_t
 
off£t
 =

131 
e
->
hdr
->
e_shoff
 +É->hdr->
e_sh°∫dx
 *É->hdr->
e_shítsize
;

132 c⁄° 
Elf32_Shdr
 *
shdr
 =

133 (c⁄° 
Elf32_Shdr
 *Ë(
e
->
øw_d©a
 + 
off£t
);

134  (c⁄° *Ë(
e
->
øw_d©a
 + 
shdr
->
sh_off£t
 + 
ödex
);

135 
	}
}

138 c⁄° 
Elf32_Shdr
 *
	$gë_£˘i⁄_hódî
(
ñf_t
 *
e
, c⁄° *
«me
)

140 
s
 = 0; s < 
e
->
hdr
->
e_shnum
; ++s) {

141 
uöt32_t
 
off£t
 = 
e
->
hdr
->
e_shoff
 + 
s
 *É->hdr->
e_shítsize
;

142 c⁄° 
Elf32_Shdr
 *
shdr
 =

143 (c⁄° 
Elf32_Shdr
 *Ë(
e
->
øw_d©a
 + 
off£t
);

144 c⁄° *
¢ame
 = 
	`gë_sh_°rög
(
e
, 
shdr
->
sh_«me
);

145 i‡(!
	`°rcmp
(
«me
, 
¢ame
))

146  
shdr
;

148  
NULL
;

149 
	}
}

152 c⁄° *
	$gë_°πab
(
ñf_t
 *
e
)

154 c⁄° 
Elf32_Shdr
 *
shdr
 = 
	`gë_£˘i⁄_hódî
(
e
, ".strtab");

155 i‡(!
shdr
)

156  
NULL
;

158  (c⁄° *Ë(
e
->
øw_d©a
 + 
shdr
->
sh_off£t
);

159 
	}
}

162 c⁄° 
Elf32_Sym
 *
	$ñf_gë_symbﬁ
(
ñf_t
 *
e
, c⁄° *
«me
)

164 c⁄° *
°πab
 = 
	`gë_°πab
(
e
);

165 i‡(!
°πab
)

166  
NULL
;

169 c⁄° 
Elf32_Shdr
 *
shdr
 = 
	`gë_£˘i⁄_hódî
(
e
, ".symtab");

170 i‡(!
shdr
)

171  
NULL
;

174 c⁄° 
Elf32_Sym
 *
sym
 =

175 (c⁄° 
Elf32_Sym
 *Ë(
e
->
øw_d©a
 + 
shdr
->
sh_off£t
);

176 c⁄° 
Elf32_Sym
 *
íd
 =

177 (c⁄° 
Elf32_Sym
 *Ë(
e
->
øw_d©a
 + 
shdr
->
sh_off£t
 +

178 
shdr
->
sh_size
);

180 ; 
sym
 < 
íd
; ++sym) {

181 c⁄° *
sym_«me
 = 
°πab
 + 
sym
->
°_«me
;

182 i‡(!
	`°rcmp
(
«me
, 
sym_«me
))

183  
sym
;

187  
NULL
;

188 
	}
}

190 
	$fûl_symbﬁs
(
ñf_t
 *
e
)

193 
	`m≠_˛ór
(
e
->
symbﬁs
);

194 
	`m≠_ö£π
(
e
->
symbﬁs
, &(){0}, &(*){
NULL
});

197 c⁄° *
°πab
 = 
	`gë_°πab
(
e
);

198 i‡(!
°πab
)

202 c⁄° 
Elf32_Shdr
 *
shdr
 = 
	`gë_£˘i⁄_hódî
(
e
, ".symtab");

203 i‡(!
shdr
)

207 c⁄° 
Elf32_Sym
 *
sym
 =

208 (c⁄° 
Elf32_Sym
 *Ë(
e
->
øw_d©a
 + 
shdr
->
sh_off£t
);

209 c⁄° 
Elf32_Sym
 *
íd
 =

210 (c⁄° 
Elf32_Sym
 *Ë(
e
->
øw_d©a
 + 
shdr
->
sh_off£t
 +

211 
shdr
->
sh_size
);

213 ; 
sym
 < 
íd
; ++sym) {

214 c⁄° *
sym_«me
 = 
°πab
 + 
sym
->
°_«me
;

215 
	`ELF_ST_TYPE
(
sym
->
°_öfo
)) {

216 
STT_NOTYPE
:

217 
STT_OBJECT
:

218 
STT_FUNC
:

219 
	`m≠_ö£π
(
e
->
symbﬁs
, (*Ë&(
sym
->
°_vÆue
), &
sym_«me
);

222 
	}
}

224 c⁄° *
	$ñf_föd_symbﬁ
(
ñf_t
 *
e
, 
uöt32_t
 
addr
)

226 i‡(
	`m≠_em±y
(
e
->
symbﬁs
))

227 
	`fûl_symbﬁs
(
e
);

228 
m≠_ôî_t
 
ô
;

229 
	`m≠_föd
(
e
->
symbﬁs
, &
ô
, &
addr
);

230  
	`m≠_©_íd
(
e
->
symbﬁs
, &
ô
Ë? 
NULL
 : 
	`m≠_ôî_vÆue
(&it, *);

231 
	}
}

233 
boﬁ
 
	$ñf_gë_d©a_£˘i⁄_ønge
(
ñf_t
 *
e
, 
uöt32_t
 *
°¨t
, uöt32_à*
íd
)

235 c⁄° 
Elf32_Shdr
 *
shdr
 = 
	`gë_£˘i⁄_hódî
(
e
, ".data");

236 i‡(!
shdr
 || shdr->
sh_ty≥
 =
SHT_NOBITS
)

237  
Ál£
;

239 *
°¨t
 = 
shdr
->
sh_addr
;

240 *
íd
 = *
°¨t
 + 
shdr
->
sh_size
;

241  
åue
;

242 
	}
}

262 
boﬁ
 
	$ñf_lﬂd
(
ñf_t
 *
e
, 
mem‹y_t
 *
mem
)

265 
p
 = 0;Ö < 
e
->
hdr
->
e_phnum
; ++p) {

267 
uöt32_t
 
off£t
 = 
e
->
hdr
->
e_phoff
 + (
p
 *É->hdr->
e_phítsize
);

268 c⁄° 
Elf32_Phdr
 *
phdr
 =

269 (c⁄° 
Elf32_Phdr
 *Ë(
e
->
øw_d©a
 + 
off£t
);

272 i‡(
phdr
->
p_ty≥
 !
PT_LOAD
)

276 c⁄° 
to_c›y
 = 
	`mö
(
phdr
->
p_memsz
,Öhdr->
p_fûesz
);

277 i‡(
to_c›y
)

278 
	`mem‹y_wrôe
(
mem
, 
phdr
->
p_vaddr
, 
e
->
øw_d©a
 +Öhdr->
p_off£t
,

279 
to_c›y
);

282 c⁄° 
to_zîo
 = 
	`max
(
phdr
->
p_memsz
,Öhdr->
p_fûesz
Ë- 
to_c›y
;

283 i‡(
to_zîo
)

284 
	`mem‹y_fûl
(
mem
, 
phdr
->
p_vaddr
 + 
to_c›y
, 
to_zîo
, 0);

287  
åue
;

288 
	}
}

290 
boﬁ
 
	$ñf_›í
(
ñf_t
 *
e
, c⁄° *
öput
)

293 i‡(
e
->
øw_d©a
)

294 
	`ªÀa£
(
e
);

296 *
∑th
 = 
	`ßnôize_∑th
(
öput
);

297 i‡(!
∑th
)

298  
Ál£
;

300 #i‡
HAVE_MMAP


301 
fd
 = 
	`›í
(
∑th
, 
O_RDONLY
);

302 i‡(
fd
 < 0)

303 
‰ì_∑th
;

306 
°©
 
°
;

307 
	`f°©
(
fd
, &
°
);

308 
e
->
øw_size
 = 
°
.
°_size
;

313 
e
->
øw_d©a
 = 
	`mm≠
(0, 
°
.
°_size
, 
PROT_READ
, 
MAP_PRIVATE
, 
fd
, 0);

314 i‡(
e
->
øw_d©a
 =
MAP_FAILED
)

315 
‰ì_fd
;

316 
	`˛o£
(
fd
);

319 
FILE
 *
f
 = 
	`f›í
(
∑th
, "rb");

320 i‡(!
f
)

321 
‰ì_∑th
;

324 
	`f£ek
(
f
, 0, 
SEEK_END
);

325 
e
->
øw_size
 = 
	`·ñl
(
f
);

326 
	`f£ek
(
f
, 0, 
SEEK_SET
);

327 i‡(!
e
->
øw_size
)

328 
‰ì_fd
;

331 
	`‰ì
(
e
->
øw_d©a
);

332 
e
->
øw_d©a
 = 
	`mÆloc
”->
øw_size
);

333 
	`as£π
(
e
->
øw_d©a
);

336 c⁄° 
size_t
 
r
 = 
	`‰ód
(
e
->
øw_d©a
, 1,É->
øw_size
, 
f
);

337 
	`f˛o£
(
f
);

338 i‡(
r
 !
e
->
øw_size
)

339 
‰ì_∑th
;

343 
e
->
hdr
 = (c⁄° 
Elf32_Ehdr
 *Ëe->
øw_d©a
;

346 i‡(!
	`is_vÆid
(
e
))

347 
‰ì_∑th
;

349 
	`‰ì
(
∑th
);

350  
åue
;

352 
‰ì_fd
:

353 #i‡
HAVE_MMAP


354 
	`˛o£
(
fd
);

356 
	`˛o£
(
f
);

359 
‰ì_∑th
:

360 
	`‰ì
(
∑th
);

362 
	`ªÀa£
(
e
);

363  
Ál£
;

364 
	}
}

366 
Elf32_Ehdr
 *
	$gë_ñf_hódî
(
ñf_t
 *
e
)

368  (
Elf32_Ehdr
 *Ë
e
->
hdr
;

369 
	}
}

371 
uöt8_t
 *
	$gë_ñf_fú°_byã
(
ñf_t
 *
e
)

373  (
uöt8_t
 *Ë
e
->
øw_d©a
;

374 
	}
}

	@src/elf.h

6 #¥agm®
⁄˚


10 
	~<°döt.h
>

12 
	~"io.h
"

13 
	~"m≠.h
"

14 
	~"riscv.h
"

16 
uöt32_t
 
	tElf32_Addr
;

17 
uöt32_t
 
	tElf32_Off
;

18 
uöt16_t
 
	tElf32_HÆf
;

19 
uöt32_t
 
	tElf32_W‹d
;

22 
	mEI_MAG0
 = 0,

23 
	mEI_MAG1
 = 1,

24 
	mEI_MAG2
 = 2,

25 
	mEI_MAG3
 = 3,

26 
	mEI_CLASS
 = 4,

27 
	mEI_DATA
 = 5,

28 
	mEI_VERSION
 = 6,

29 
	mEI_OSABI
 = 7,

30 
	mEI_ABIVERSION
 = 8,

31 
	mEI_PAD
 = 9,

32 
	mEI_NIDENT
 = 16,

37 
	mSHT_NULL
 = 0,

38 
	mSHT_PROGBITS
 = 1,

39 
	mSHT_SYMTAB
 = 2,

40 
	mSHT_STRTAB
 = 3,

41 
	mSHT_RELA
 = 4,

42 
	mSHT_HASH
 = 5,

43 
	mSHT_DYNAMIC
 = 6,

44 
	mSHT_NOTE
 = 7,

45 
	mSHT_NOBITS
 = 8,

46 
	mSHT_REL
 = 9,

47 
	mSHT_SHLIB
 = 10,

48 
	mSHT_DYNSYM
 = 11,

49 
	mSHT_NUM
 = 12,

50 
	mSHT_LOPROC
 = 0x70000000,

51 
	mSHT_HIPROC
 = 0x7fffffff,

52 
	mSHT_LOUSER
 = 0x80000000,

53 
	mSHT_HIUSER
 = 0xffffffff,

58 
	mSHF_WRITE
 = 0x1,

59 
	mSHF_ALLOC
 = 0x2,

60 
	mSHF_EXECINSTR
 = 0x4,

61 
	mSHF_MERGE
 = 0x10,

62 
	mSHF_STRINGS
 = 0x20,

63 
	mSHF_INFO_LINK
 = 0x40,

64 
	mSHF_LINK_ORDER
 = 0x80,

65 
	mSHF_OS_NONCONFORMING
 = 0x100,

66 
	mSHF_GROUP
 = 0x200,

67 
	mSHF_TLS
 = 0x400,

68 
	mSHF_COMPRESSED
 = 0x800,

69 
	mSHF_MASKOS
 = 0x0ff00000,

70 
	mSHF_MASKPROC
 = 0xf0000000,

74 
	sElf32_Ehdr
 {

75 
uöt8_t
 
	me_idít
[
EI_NIDENT
];

76 
Elf32_HÆf
 
	me_ty≥
;

77 
Elf32_HÆf
 
	me_machöe
;

78 
Elf32_W‹d
 
	me_vîsi⁄
;

79 
Elf32_Addr
 
	me_íåy
;

80 
Elf32_Off
 
	me_phoff
;

81 
Elf32_Off
 
	me_shoff
;

82 
Elf32_W‹d
 
	me_Êags
;

83 
Elf32_HÆf
 
	me_ehsize
;

84 
Elf32_HÆf
 
	me_phítsize
;

85 
Elf32_HÆf
 
	me_phnum
;

86 
Elf32_HÆf
 
	me_shítsize
;

87 
Elf32_HÆf
 
	me_shnum
;

88 
Elf32_HÆf
 
	me_sh°∫dx
;

92 
	sElf32_Phdr
 {

93 
Elf32_W‹d
 
	mp_ty≥
;

94 
Elf32_Off
 
	mp_off£t
;

95 
Elf32_Addr
 
	mp_vaddr
;

96 
Elf32_Addr
 
	mp_∑ddr
;

97 
Elf32_W‹d
 
	mp_fûesz
;

98 
Elf32_W‹d
 
	mp_memsz
;

99 
Elf32_W‹d
 
	mp_Êags
;

100 
Elf32_W‹d
 
	mp_Æign
;

104 
	sElf32_Shdr
 {

105 
Elf32_W‹d
 
	msh_«me
;

106 
Elf32_W‹d
 
	msh_ty≥
;

107 
Elf32_W‹d
 
	msh_Êags
;

108 
Elf32_Addr
 
	msh_addr
;

109 
Elf32_Off
 
	msh_off£t
;

110 
Elf32_W‹d
 
	msh_size
;

111 
Elf32_W‹d
 
	msh_lök
;

112 
Elf32_W‹d
 
	msh_öfo
;

113 
Elf32_W‹d
 
	msh_addølign
;

114 
Elf32_W‹d
 
	msh_ítsize
;

117 
	sElf32_Sym
 {

118 
Elf32_W‹d
 
	m°_«me
;

119 
Elf32_Addr
 
	m°_vÆue
;

120 
Elf32_W‹d
 
	m°_size
;

121 
uöt8_t
 
	m°_öfo
;

122 
uöt8_t
 
	m°_Ÿhî
;

123 
Elf32_HÆf
 
	m°_shndx
;

126 
ñf_öã∫Æ
 
	tñf_t
;

128 
ñf_t
 *
ñf_√w
();

129 
ñf_dñëe
(
ñf_t
 *
e
);

132 
boﬁ
 
ñf_›í
(
ñf_t
 *
e
, c⁄° *
∑th
);

135 c⁄° 
Elf32_Sym
 *
ñf_gë_symbﬁ
(
ñf_t
 *
e
, c⁄° *
«me
);

138 c⁄° *
ñf_föd_symbﬁ
(
ñf_t
 *
e
, 
uöt32_t
 
addr
);

141 
boﬁ
 
ñf_gë_d©a_£˘i⁄_ønge
(
ñf_t
 *
e
, 
uöt32_t
 *
°¨t
, uöt32_à*
íd
);

144 
boﬁ
 
ñf_lﬂd
(
ñf_t
 *
e
, 
mem‹y_t
 *
mem
);

147 
Elf32_Ehdr
 *
gë_ñf_hódî
(
ñf_t
 *
e
);

150 
uöt8_t
 *
gë_ñf_fú°_byã
(
ñf_t
 *
e
);

	@src/emulate.c

6 
	~<as£π.h
>

7 
	~<£tjmp.h
>

8 
	~<°dboﬁ.h
>

9 
	~<°döt.h
>

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

12 
	~<°rög.h
>

13 
	~<uni°d.h
>

15 #ifde‡
__EMSCRIPTEN__


16 
	~<ems¸ùãn.h
>

19 #i‡
RV32_HAS
(
EXT_F
)

20 
	~<m©h.h
>

21 
	~"so·Êﬂt.h
"

24 #i‡
RV32_HAS
(
GDBSTUB
)

25 
èrgë_›s
 
gdb°ub_›s
;

28 
	~"decode.h
"

29 
	~"io.h
"

30 
	~"mpoﬁ.h
"

31 
	~"riscv.h
"

32 
	~"riscv_¥iv©e.h
"

33 
	~"utûs.h
"

35 #i‡
RV32_HAS
(
JIT
)

36 
	~"ˇche.h
"

37 
	~"jô.h
"

41 
	#IF_ö¢
(
i
, 
o
Ë(i->
›code
 =
rv_ö¢_
##o)

	)

42 
	#IF_rd
(
i
, 
r
Ë(i->
rd
 =
rv_ªg_
##r)

	)

43 
	#IF_rs1
(
i
, 
r
Ë(i->
rs1
 =
rv_ªg_
##r)

	)

44 
	#IF_rs2
(
i
, 
r
Ë(i->
rs2
 =
rv_ªg_
##r)

	)

45 
	#IF_imm
(
i
, 
v
Ë(i->
imm
 =v)

	)

49 
	#RV_TRAP_LIST
 \

50 
	`IIF
(
	`RV32_HAS
(
EXT_C
))(, \

51 
	`_
(
ö¢_mißlig√d
, 0) \

53 
	`_
(
ûÀgÆ_ö¢
, 2) \

54 
	`_
(
bªakpoöt
, 3) \

55 
	`_
(
lﬂd_mißlig√d
, 4) \

56 
	`_
(
°‹e_mißlig√d
, 6) \

57 
	`_
(
eˇŒ_M
, 11) \

58 
	`IIF
(
	`RV32_HAS
(
SYSTEM
))( \

59 
	`_
(
eˇŒ_U
, 8) \

60 
	`_
(
eˇŒ_S
, 9) \

61 
	`_
(
∑geÁu…_ö¢
, 12) \

62 
	`_
(
∑geÁu…_lﬂd
, 13) \

63 
	`_
(
∑geÁu…_°‹e
, 15) \

64 
	`_
(
su≥rvis‹_sw_öå
, (1U << 31) | 1) \

65 
	`_
(
su≥rvis‹_timî_öå
, (1U << 31) | 5) \

66 
	`_
(
su≥rvis‹_exã∫Æ_öå
, (1U << 31) | 9) \

67 )

	)

71 
	#_
(
ty≥
, 
code
Ë
rv_å≠_code_
##ty≥ = code,

	)

72 
	mRV_TRAP_LIST


73 #unde‡
_


76 
uöt32_t
 
	gªloc_íabÀ_mmu_jÆr_addr
;

77 
boﬁ
 
	gªloc_íabÀ_mmu
 = 
Ál£
;

78 
boﬁ
 
	g√ed_ªå™¶©e
 = 
Ál£
;

79 
boﬁ
 
	gßç_ch™ged
 = 
Ál£
;

80 
	$rv_å≠_deÁu…_h™dÀr
(
riscv_t
 *
rv
)

82 
rv
->
c§_mïc
 +rv->
com¥es£d
 ? 2 : 4;

83 
rv
->
PC
 =Ñv->
c§_mïc
;

84 
	}
}

86 #i‡
RV32_HAS
(
SYSTEM
)

87 
å≠_h™dÀr
(
riscv_t
 *
rv
);

92 
	$å≠_h™dÀr
(
riscv_t
 *
rv
 
UNUSED
Ë{
	}
}

95 
boﬁ
 
	gˇn_å≠≥d
 = 
Ál£
;

113 
jmp_buf
 
	gív
;

114 
jmp_buf
 
	g√°ed_ív
;

115 
	#TRAP_HANDLER_IMPL
(
ty≥
, 
code
) \

116 
rv_å≠_
##
	`ty≥
(
riscv_t
 *
rv
, 
uöt32_t
 
mtvÆ
) \

122 
uöt32_t
 
ba£
; \

123 
uöt32_t
 
mode
; \

131 c⁄° 
uöt32_t
 
s°©us_sõ
 = \

132 (
rv
->
c§_s°©us
 & 
SSTATUS_SIE
Ë>> 
SSTATUS_SIE_SHIFT
; \

133 
rv
->
c§_s°©us
 |(
s°©us_sõ
 << 
SSTATUS_SPIE_SHIFT
); \

134 
rv
->
c§_s°©us
 &~(
SSTATUS_SIE
); \

135 
rv
->
c§_s°©us
 |‘v->
¥iv_mode
 << 
SSTATUS_SPP_SHIFT
); \

136 
rv
->
¥iv_mode
 = 
RV_PRIV_S_MODE
; \

137 
ba£
 = 
rv
->
c§_°vec
 & ~0x3; \

138 
mode
 = 
rv
->
c§_°vec
 & 0x3; \

139 
rv
->
c§_£pc
 =Ñv->
PC
; \

140 
rv
->
c§_°vÆ
 = 
mtvÆ
; \

141 
rv
->
c§_sˇu£
 = 
code
; \

142 
mode
) { \

145 
rv
->
PC
 = 
ba£
; \

151 
rv
->
PC
 = 
ba£
 + 4 * (
code
 & 
	`MASK
(31)); \

155 i‡(
rv
->
is_å≠≥d
) { \

156 
	`å≠_h™dÀr
(
rv
); \

158 }

	)

161 
	#_
(
ty≥
, 
code
Ë
	`TRAP_HANDLER_IMPL
—y≥, code)

	)

162 
	gRV_TRAP_LIST


163 #unde‡
_


171 
	#RV_EXC_MISALIGN_HANDLER
(
mask_‹_pc
, 
ty≥
, 
com¥ess
, 
IO
) \

172 
	`IIF
(
IO
) \

173 (i‡(!
	`PRIV
(
rv
)->
Ælow_mißlign
 && 
	`u∆ikñy
(
addr
 & (
mask_‹_pc
))), \

174 i‡(
	`u∆ikñy
(
	`ö¢_is_mißlig√d
(
PC
)))) \

176 
rv
->
com¥es£d
 = 
com¥ess
; \

177 
rv
->
c§_cy˛e
 = 
cy˛e
; \

178 
rv
->
PC
 = PC; \

179 
rv
->
is_å≠≥d
 = 
åue
; \

180 
rv_å≠_
##
ty≥
##
	`_mißlig√d
(
rv
, 
	`IIF
(
IO
)(
addr
, 
mask_‹_pc
)); \

181  
Ál£
; \

182 }

	)

186 
ölöe
 
	$upd©e_time
(
riscv_t
 *
rv
)

188 
timevÆ
 
tv
;

189 
	`rv_gëtimeofday
(&
tv
);

191 
uöt64_t
 
t
 = (uöt64_tË
tv
.
tv_£c
 * 1e6 + (
uöt32_t
Ëtv.
tv_u£c
;

192 
rv
->
c§_time
[0] = 
t
 & 0xFFFFFFFF;

193 
rv
->
c§_time
[1] = 
t
 >> 32;

194 
	}
}

196 
ölöe
 
	$gë_time_now
(
timevÆ
 *
tv
)

198 
	`rv_gëtimeofday
(
tv
);

199 
	}
}

201 #i‡
RV32_HAS
(
Zic§
)

203 
uöt32_t
 *
	$c§_gë_±r
(
riscv_t
 *
rv
, 
uöt32_t
 
c§
)

206 
c§
 & 0xFFF) {

207 
CSR_MSTATUS
:

208  (
uöt32_t
 *Ë(&
rv
->
c§_m°©us
);

209 
CSR_MTVEC
:

210  (
uöt32_t
 *Ë(&
rv
->
c§_mtvec
);

211 
CSR_MISA
:

212  (
uöt32_t
 *Ë(&
rv
->
c§_miß
);

215 
CSR_MEDELEG
:

216  (
uöt32_t
 *Ë(&
rv
->
c§_medñeg
);

217 
CSR_MIDELEG
:

218  (
uöt32_t
 *Ë(&
rv
->
c§_midñeg
);

219 
CSR_MSCRATCH
:

220  (
uöt32_t
 *Ë(&
rv
->
c§_ms¸©ch
);

221 
CSR_MEPC
:

222  (
uöt32_t
 *Ë(&
rv
->
c§_mïc
);

223 
CSR_MCAUSE
:

224  (
uöt32_t
 *Ë(&
rv
->
c§_mˇu£
);

225 
CSR_MTVAL
:

226  (
uöt32_t
 *Ë(&
rv
->
c§_mtvÆ
);

227 
CSR_MIP
:

228  (
uöt32_t
 *Ë(&
rv
->
c§_mù
);

231 
CSR_CYCLE
:

232  (
uöt32_t
 *Ë&
rv
->
c§_cy˛e
;

233 
CSR_CYCLEH
:

234  &((
uöt32_t
 *Ë&
rv
->
c§_cy˛e
)[1];

237 
CSR_TIME
:

238 
	`upd©e_time
(
rv
);

239  &
rv
->
c§_time
[0];

240 
CSR_TIMEH
:

241 
	`upd©e_time
(
rv
);

242  &
rv
->
c§_time
[1];

243 
CSR_INSTRET
:

244  (
uöt32_t
 *Ë(&
rv
->
c§_cy˛e
);

245 #i‡
	`RV32_HAS
(
EXT_F
)

246 
CSR_FFLAGS
:

247  (
uöt32_t
 *Ë(&
rv
->
c§_fc§
);

248 
CSR_FCSR
:

249  (
uöt32_t
 *Ë(&
rv
->
c§_fc§
);

251 
CSR_SSTATUS
:

252  (
uöt32_t
 *Ë(&
rv
->
c§_s°©us
);

253 
CSR_SIE
:

254  (
uöt32_t
 *Ë(&
rv
->
c§_sõ
);

255 
CSR_STVEC
:

256  (
uöt32_t
 *Ë(&
rv
->
c§_°vec
);

257 
CSR_SCOUNTEREN
:

258  (
uöt32_t
 *Ë(&
rv
->
c§_scou¡îí
);

259 
CSR_SSCRATCH
:

260  (
uöt32_t
 *Ë(&
rv
->
c§_ss¸©ch
);

261 
CSR_SEPC
:

262  (
uöt32_t
 *Ë(&
rv
->
c§_£pc
);

263 
CSR_SCAUSE
:

264  (
uöt32_t
 *Ë(&
rv
->
c§_sˇu£
);

265 
CSR_STVAL
:

266  (
uöt32_t
 *Ë(&
rv
->
c§_°vÆ
);

267 
CSR_SIP
:

268  (
uöt32_t
 *Ë(&
rv
->
c§_sù
);

269 
CSR_SATP
:

270  (
uöt32_t
 *Ë(&
rv
->
c§_ßç
);

272  
NULL
;

274 
	}
}

283 
uöt32_t
 
	$c§_c§rw
(
riscv_t
 *
rv
, 
uöt32_t
 
c§
, uöt32_à
vÆ
)

285 
uöt32_t
 *
c
 = 
	`c§_gë_±r
(
rv
, 
c§
);

286 i‡(!
c
)

289 
uöt32_t
 
out
 = *
c
;

290 #i‡
	`RV32_HAS
(
EXT_F
)

291 i‡(
c§
 =
CSR_FFLAGS
)

292 
out
 &
FFLAG_MASK
;

295 i‡(
c
 =&
rv
->
c§_ßç
) {

296 c⁄° 
uöt8_t
 
mode_sv32
 = 
vÆ
 >> 31;

297 
vÆ
 &~(
	`MASK
(9) << 22);

298 i‡(
mode_sv32
)

299 *
c
 = 
vÆ
;

301 *
c
 = 0;

304 
ßç_ch™ged
 = 
åue
;

306 *
c
 = 
vÆ
;

309  
out
;

310 
	}
}

313 
uöt32_t
 
	$c§_c§rs
(
riscv_t
 *
rv
, 
uöt32_t
 
c§
, uöt32_à
vÆ
)

315 
uöt32_t
 *
c
 = 
	`c§_gë_±r
(
rv
, 
c§
);

316 i‡(!
c
)

319 
uöt32_t
 
out
 = *
c
;

320 #i‡
	`RV32_HAS
(
EXT_F
)

321 i‡(
c§
 =
CSR_FFLAGS
)

322 
out
 &
FFLAG_MASK
;

325 *
c
 |
vÆ
;

327  
out
;

328 
	}
}

334 
uöt32_t
 
	$c§_c§rc
(
riscv_t
 *
rv
, 
uöt32_t
 
c§
, uöt32_à
vÆ
)

336 
uöt32_t
 *
c
 = 
	`c§_gë_±r
(
rv
, 
c§
);

337 i‡(!
c
)

340 
uöt32_t
 
out
 = *
c
;

341 #i‡
	`RV32_HAS
(
EXT_F
)

342 i‡(
c§
 =
CSR_FFLAGS
)

343 
out
 &
FFLAG_MASK
;

346 *
c
 &~
vÆ
;

348  
out
;

349 
	}
}

352 #i‡
RV32_HAS
(
GDBSTUB
)

353 
	$rv_debug
(
riscv_t
 *
rv
)

355 i‡(!
	`gdb°ub_öô
(&
rv
->
gdb°ub
, &
gdb°ub_›s
,

356 (
¨ch_öfo_t
){

357 .
ªg_num
 = 33,

358 .
ªg_byã
 = 4,

359 .
èrgë_desc
 = 
TARGET_RV32
,

361 
GDBSTUB_COMM
)) {

365 
rv
->
debug_mode
 = 
åue
;

366 
rv
->
bªakpoöt_m≠
 = 
	`bªakpoöt_m≠_√w
();

367 
rv
->
is_öãºu±ed
 = 
Ál£
;

369 i‡(!
	`gdb°ub_run
(&
rv
->
gdb°ub
, (*)Ñv))

372 
	`bªakpoöt_m≠_de°roy
(
rv
->
bªakpoöt_m≠
);

373 
	`gdb°ub_˛o£
(&
rv
->
gdb°ub
);

374 
	}
}

377 #i‡!
RV32_HAS
(
JIT
)

379 
HASH_FUNC_IMPL
(
m≠_hash
, 
BLOCK_MAP_CAPACITY_BITS
, 1 << BLOCK_MAP_CAPACITY_BITS)

383 
block_t
 *
	$block_Æloc
(
riscv_t
 *
rv
)

385 
block_t
 *
block
 = 
	`mpoﬁ_Æloc
(
rv
->
block_mp
);

386 
	`as£π
(
block
);

387 
block
->
n_ö¢
 = 0;

388 #i‡
	`RV32_HAS
(
JIT
)

389 
block
->
å™¶©abÀ
 = 
åue
;

390 
block
->
hŸ
 = 
Ál£
;

391 
block
->
hŸ2
 = 
Ál£
;

392 
block
->
has_lo›s
 = 
Ál£
;

393 
block
->
n_övoke
 = 0;

394 
	`INIT_LIST_HEAD
(&
block
->
li°
);

395 #i‡
	`RV32_HAS
(
T2C
)

396 
block
->
compûed
 = 
Ál£
;

399  
block
;

400 
	}
}

402 #i‡!
RV32_HAS
(
JIT
)

404 
	$block_ö£π
(
block_m≠_t
 *
m≠
, c⁄° 
block_t
 *
block
)

406 
	`as£π
(
m≠
 && 
block
);

407 c⁄° 
uöt32_t
 
mask
 = 
m≠
->
block_ˇ∑côy
 - 1;

408 
uöt32_t
 
ödex
 = 
	`m≠_hash
(
block
->
pc_°¨t
);

411 ;; 
ödex
++) {

412 i‡(!
m≠
->m≠[
ödex
 & 
mask
]) {

413 
m≠
->m≠[
ödex
 & 
mask
] = (
block_t
 *Ë
block
;

417 
m≠
->
size
++;

418 
	}
}

421 
block_t
 *
	$block_föd
(c⁄° 
block_m≠_t
 *
m≠
, c⁄° 
uöt32_t
 
addr
)

423 
	`as£π
(
m≠
);

424 
uöt32_t
 
ödex
 = 
	`m≠_hash
(
addr
);

425 c⁄° 
uöt32_t
 
mask
 = 
m≠
->
block_ˇ∑côy
 - 1;

428 ;; 
ödex
++) {

429 
block_t
 *
block
 = 
m≠
->m≠[
ödex
 & 
mask
];

430 i‡(!
block
)

431  
NULL
;

433 i‡(
block
->
pc_°¨t
 =
addr
)

434  
block
;

436  
NULL
;

437 
	}
}

440 #i‡!
RV32_HAS
(
EXT_C
)

441 
FORCE_INLINE
 
boﬁ
 
	$ö¢_is_mißlig√d
(
uöt32_t
 
pc
)

443  
pc
 & 0x3;

444 
	}
}

449 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
) \

450 
__rv_ö¢_
##
ö°
##
_Àn
 = 
ö¢_Àn
,

	)

451 
	mRV_INSN_LIST


452 #unde‡
_


457 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
) \

458 
__rv_ö¢_
##
ö°
##
_ˇnbønch
 = 
ˇn_bønch
,

	)

459 
	mRV_INSN_LIST


460 #unde‡
_


463 #i‡
RV32_HAS
(
GDBSTUB
)

464 
	#RVOP_NO_NEXT
(
ú
Ë(!ú->
√xt
 | 
rv
->
debug_mode
 |Ñv->
is_å≠≥d
)

	)

466 
	#RVOP_NO_NEXT
(
ú
Ë(!ú->
√xt
 | 
rv
->
is_å≠≥d
)

	)

470 
boﬁ
 
	gis_bønch_èkí
 = 
Ál£
;

473 
uöt32_t
 
	gœ°_pc
 = 0;

475 #i‡
RV32_HAS
(
JIT
)

476 
£t_t
 
	gpc_£t
;

477 
boﬁ
 
	ghas_lo›s
 = 
Ál£
;

480 
emu_upd©e_u¨t_öãºu±s
(
riscv_t
 *
rv
);

481 
uöt32_t
 
	g≥rùhîÆ_upd©e_˘r
 = 64;

484 
	#RVOP
(
ö°
, 
code
, 
asm
) \

485 
boﬁ
 
do_
##
	`ö°
(
riscv_t
 *
rv
, 
rv_ö¢_t
 *
ú
, 
uöt64_t
 
cy˛e
, \

486 
uöt32_t
 
PC
) \

488 
cy˛e
++; \

489 
code
; \

490 
√xt›
: \

493 
PC
 +
__rv_ö¢_
##
ö°
##
_Àn
; \

494 i‡(
	`u∆ikñy
(
	`RVOP_NO_NEXT
(
ú
))) { \

495 
íd_›
; \

497 c⁄° 
rv_ö¢_t
 *
√xt
 = 
ú
->next; \

498 
MUST_TAIL
  
√xt
->
	`im∂
(
rv
,Çext, 
cy˛e
, 
PC
); \

499 
íd_›
: \

500 
rv
->
c§_cy˛e
 = 
cy˛e
; \

501 
rv
->
PC
 = PC; \

502  
åue
; \

503 }

	)

505 
	~"rv32_ãm∂©e.c
"

506 #unde‡
RVOP


509 
boﬁ
 
	$do_fu£1
(
riscv_t
 *
rv
, 
rv_ö¢_t
 *
ú
, 
uöt64_t
 
cy˛e
, 
uöt32_t
 
PC
)

511 
cy˛e
 +
ú
->
imm2
;

512 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

513 
i
 = 0; i < 
ú
->
imm2
; i++)

514 
rv
->
X
[
fu£
[
i
].
rd
] = fu£[i].
imm
;

515 
PC
 +
ú
->
imm2
 * 4;

516 i‡((
PC
 >> 20Ë=0x957 || ((
rv
->PC >> 20) == 0x957)) {

519 i‡(
	`u∆ikñy
(
	`RVOP_NO_NEXT
(
ú
))) {

520 
rv
->
c§_cy˛e
 = 
cy˛e
;

521 
rv
->
PC
 = PC;

522  
åue
;

524 c⁄° 
rv_ö¢_t
 *
√xt
 = 
ú
->next;

525 
MUST_TAIL
  
√xt
->
	`im∂
(
rv
,Çext, 
cy˛e
, 
PC
);

526 
	}
}

529 
boﬁ
 
	$do_fu£2
(
riscv_t
 *
rv
, 
rv_ö¢_t
 *
ú
, 
uöt64_t
 
cy˛e
, 
uöt32_t
 
PC
)

531 
cy˛e
 += 2;

532 
rv
->
X
[
ú
->
rd
] = ir->
imm
;

533 
rv
->
X
[
ú
->
rs2
] =Ñv->X[ú->
rd
] +Ñv->X[ú->
rs1
];

534 
PC
 += 8;

535 i‡((
PC
 >> 20Ë=0x957 || ((
rv
->PC >> 20) == 0x957)) {

538 i‡(
	`u∆ikñy
(
	`RVOP_NO_NEXT
(
ú
))) {

539 
rv
->
c§_cy˛e
 = 
cy˛e
;

540 
rv
->
PC
 = PC;

541  
åue
;

543 c⁄° 
rv_ö¢_t
 *
√xt
 = 
ú
->next;

544 
MUST_TAIL
  
√xt
->
	`im∂
(
rv
,Çext, 
cy˛e
, 
PC
);

545 
	}
}

548 
boﬁ
 
	$do_fu£3
(
riscv_t
 *
rv
, 
rv_ö¢_t
 *
ú
, 
uöt64_t
 
cy˛e
, 
uöt32_t
 
PC
)

550 
cy˛e
 +
ú
->
imm2
;

551 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

556 
i
 = 0; i < 
ú
->
imm2
; i++) {

557 
uöt32_t
 
addr
 = 
rv
->
X
[
fu£
[
i
].
rs1
] + fu£[i].
imm
;

558 
	`RV_EXC_MISALIGN_HANDLER
(3, 
°‹e
, 
Ál£
, 1);

559 
rv
->
io
.
	`mem_wrôe_w
‘v, 
addr
,Ñv->
X
[
fu£
[
i
].
rs2
]);

561 
PC
 +
ú
->
imm2
 * 4;

562 i‡(
	`u∆ikñy
(
	`RVOP_NO_NEXT
(
ú
))) {

563 
rv
->
c§_cy˛e
 = 
cy˛e
;

564 
rv
->
PC
 = PC;

565  
åue
;

567 c⁄° 
rv_ö¢_t
 *
√xt
 = 
ú
->next;

568 
MUST_TAIL
  
√xt
->
	`im∂
(
rv
,Çext, 
cy˛e
, 
PC
);

569 
	}
}

572 
boﬁ
 
	$do_fu£4
(
riscv_t
 *
rv
, 
rv_ö¢_t
 *
ú
, 
uöt64_t
 
cy˛e
, 
uöt32_t
 
PC
)

574 
cy˛e
 +
ú
->
imm2
;

575 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

580 
i
 = 0; i < 
ú
->
imm2
; i++) {

581 
uöt32_t
 
addr
 = 
rv
->
X
[
fu£
[
i
].
rs1
] + fu£[i].
imm
;

582 
	`RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

583 
rv
->
X
[
fu£
[
i
].
rd
] =Ñv->
io
.
	`mem_ªad_w
‘v, 
addr
);

585 
PC
 +
ú
->
imm2
 * 4;

586 i‡(
	`u∆ikñy
(
	`RVOP_NO_NEXT
(
ú
))) {

587 
rv
->
c§_cy˛e
 = 
cy˛e
;

588 
rv
->
PC
 = PC;

589  
åue
;

591 c⁄° 
rv_ö¢_t
 *
√xt
 = 
ú
->next;

592 
MUST_TAIL
  
√xt
->
	`im∂
(
rv
,Çext, 
cy˛e
, 
PC
);

593 
	}
}

596 
boﬁ
 
	$do_fu£5
(
riscv_t
 *
rv
,

597 c⁄° 
rv_ö¢_t
 *
ú
,

598 
uöt64_t
 
cy˛e
,

599 
uöt32_t
 
PC
)

601 
cy˛e
 +
ú
->
imm2
;

602 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

603 
i
 = 0; i < 
ú
->
imm2
; i++)

604 
	`shi·_func
(
rv
, (c⁄° 
rv_ö¢_t
 *Ë(&
fu£
[
i
]));

605 
PC
 +
ú
->
imm2
 * 4;

606 i‡((
PC
 >> 20Ë=0x957 || ((
rv
->PC >> 20) == 0x957)) {

609 i‡(
	`u∆ikñy
(
	`RVOP_NO_NEXT
(
ú
))) {

610 
rv
->
c§_cy˛e
 = 
cy˛e
;

611 
rv
->
PC
 = PC;

612  
åue
;

614 c⁄° 
rv_ö¢_t
 *
√xt
 = 
ú
->next;

615 
MUST_TAIL
  
√xt
->
	`im∂
(
rv
,Çext, 
cy˛e
, 
PC
);

616 
	}
}

619 c⁄° *
	gdi•©ch_èbÀ
[] = {

621 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
Ë[
rv_ö¢_
##ö°] = 
do_
##ö°,

	)

622 
RV_INSN_LIST


623 #unde‡
_


625 
	#_
(
ö°
Ë[
rv_ö¢_
##ö°] = 
do_
##ö°,

	)

626 
FUSE_INSN_LIST


627 #unde‡
_


631 
FORCE_INLINE
 
boﬁ
 
	$ö¢_is_bønch
(
uöt8_t
 
›code
)

633 
›code
) {

634 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
) \

635 
	`IIF
(
ˇn_bønch
) \

636 (
rv_ö¢_
##
ö°
:, )

	)

637 
RV_INSN_LIST


638 #unde‡
_


639  
åue
;

641  
Ál£
;

642 
	}
}

644 #i‡
RV32_HAS
(
JIT
)

645 
FORCE_INLINE
 
boﬁ
 
	$ö¢_is_å™¶©abÀ
(
uöt8_t
 
›code
)

647 
›code
) {

648 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
) \

649 
	`IIF
(
å™¶©abÀ
) \

650 (
rv_ö¢_
##
ö°
:, )

	)

651 
RV_INSN_LIST


652 #unde‡
_


653  
åue
;

655  
Ál£
;

656 
	}
}

659 
FORCE_INLINE
 
boﬁ
 
	$ö¢_is_unc⁄dôi⁄Æ_bønch
(
uöt8_t
 
›code
)

661 
›code
) {

662 #i‡
	`RV32_HAS
(
EXT_C
)

663 
rv_ö¢_cj
:

664 
rv_ö¢_cjÆr
:

665 
rv_ö¢_cjÆ
:

666 
rv_ö¢_cjr
:

667 
rv_ö¢_˚bªak
:

669  
åue
;

671  
Ál£
;

672 
	}
}

673 
	gfound
 = 
Ál£
;

675 
	$block_å™¶©e
(
riscv_t
 *
rv
, 
block_t
 *
block
)

677 
ªå™¶©e
:

678 
	`mem£t
(
block
, 0, (
block_t
));

679 
block
->
¥iv_mode
 = 
rv
->priv_mode;

680 
block
->
pc_°¨t
 = block->
pc_íd
 = 
rv
->
PC
;

682 
rv_ö¢_t
 *
¥ev_ú
 = 
NULL
;

683 
rv_ö¢_t
 *
ú
 = 
	`mpoﬁ_Æloc
(
rv
->
block_ú_mp
);

684 
block
->
ú_hód
 = 
ú
;

687 
åue
) {

688 
	`mem£t
(
ú
, 0, (
rv_ö¢_t
));

690 i‡(
¥ev_ú
)

691 
¥ev_ú
->
√xt
 = 
ú
;

694 
uöt32_t
 
ö¢
 = 
rv
->
io
.
	`mem_i„tch
‘v, 
block
->
pc_íd
);

696 i‡(!
ö¢
 && 
√ed_ªå™¶©e
) {

697 
√ed_ªå™¶©e
 = 
Ál£
;

698 
ªå™¶©e
;

701 
	`as£π
(
ö¢
);

704 i‡(!
	`rv_decode
(
ú
, 
ö¢
)) {

705 
rv
->
com¥es£d
 = 
	`is_com¥es£d
(
ö¢
);

706 
	`rv_å≠_ûÀgÆ_ö¢
(
rv
, 
ö¢
);

713 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

714 
ú
->
pc
 = 
block
->
pc_íd
;

715 
block
->
pc_íd
 +
	`is_com¥es£d
(
ö¢
) ? 2 : 4;

716 
block
->
n_ö¢
++;

717 
¥ev_ú
 = 
ú
;

718 #i‡
	`RV32_HAS
(
JIT
)

719 i‡(!
	`ö¢_is_å™¶©abÀ
(
ú
->
›code
))

720 
block
->
å™¶©abÀ
 = 
Ál£
;

723 i‡(
	`ö¢_is_bønch
(
ú
->
›code
)) {

724 i‡(
ú
->
›code
 =
rv_ö¢_jÆr


725 #i‡
	`RV32_HAS
(
EXT_C
)

726 || 
ú
->
›code
 =
rv_ö¢_cjÆr
 || ir->›codê=
rv_ö¢_cjr


729 
ú
->
bønch_èbÀ
 = 
	`ˇŒoc
(1, (
bønch_hi°‹y_èbÀ_t
));

730 
	`as£π
(
ú
->
bønch_èbÀ
);

731 
	`mem£t
(
ú
->
bønch_èbÀ
->
PC
, -1,

732 (
uöt32_t
Ë* 
HISTORY_SIZE
);

737 
ú
 = 
	`mpoﬁ_Æloc
(
rv
->
block_ú_mp
);

740 
	`as£π
(
¥ev_ú
);

741 
block
->
ú_èû
 = 
¥ev_ú
;

742 
block
->
ú_èû
->
√xt
 = 
NULL
;

743 
	}
}

745 
	#COMBINE_MEM_OPS
(
RW
) \

746 
√xt_ú
 = 
ú
->
√xt
; \

747 
cou¡
 = 1; \

749 i‡(
√xt_ú
->
›code
 !
	`IIF
(
RW
)(
rv_ö¢_lw
, 
rv_ö¢_sw
)) \

751 
cou¡
++; \

752 i‡(!
√xt_ú
->
√xt
) \

754 
√xt_ú
 =Çext_ú->
√xt
; \

756 i‡(
cou¡
 > 1) { \

757 
ú
->
›code
 = 
	`IIF
(
RW
)(
rv_ö¢_fu£4
, 
rv_ö¢_fu£3
); \

758 
ú
->
fu£
 = 
	`mÆloc
(
cou¡
 * (
›code_fu£_t
)); \

759 
	`as£π
(
ú
->
fu£
); \

760 
ú
->
imm2
 = 
cou¡
; \

761 
	`mem˝y
(
ú
->
fu£
, ir, (
›code_fu£_t
)); \

762 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
]; \

763 
√xt_ú
 = 
ú
->
√xt
; \

764 
j
 = 1; j < 
cou¡
; j++, 
√xt_ú
 =Çext_ú->
√xt
) \

765 
	`mem˝y
(
ú
->
fu£
 + 
j
, 
√xt_ú
, (
›code_fu£_t
)); \

766 
	`ªmove_√xt_¡h_ú
(
rv
, 
ú
, 
block
, 
cou¡
 - 1); \

767 }

	)

769 
ölöe
 
	$ªmove_√xt_¡h_ú
(c⁄° 
riscv_t
 *
rv
,

770 
rv_ö¢_t
 *
ú
,

771 
block_t
 *
block
,

772 
uöt8_t
 
n
)

774 
uöt8_t
 
i
 = 0; i < 
n
; i++) {

775 
rv_ö¢_t
 *
√xt
 = 
ú
->next;

776 
ú
->
√xt
 = ir->next->next;

777 
	`mpoﬁ_‰ì
(
rv
->
block_ú_mp
, 
√xt
);

779 i‡(!
ú
->
√xt
)

780 
block
->
ú_èû
 = 
ú
;

781 
block
->
n_ö¢
 -
n
;

782 
	}
}

790 
	$m©ch_∑âîn
(
riscv_t
 *
rv
, 
block_t
 *
block
)

792 
uöt32_t
 
i
;

793 
rv_ö¢_t
 *
ú
;

794 
i
 = 0, 
ú
 = 
block
->
ú_hód
; i < block->
n_ö¢
 - 1;

795 
i
++, 
ú
 = ir->
√xt
) {

796 
	`as£π
(
ú
);

797 
rv_ö¢_t
 *
√xt_ú
 = 
NULL
;

798 
öt32_t
 
cou¡
 = 0;

799 
ú
->
›code
) {

800 
rv_ö¢_lui
:

801 
√xt_ú
 = 
ú
->
√xt
;

802 
√xt_ú
->
›code
) {

803 
rv_ö¢_add
:

804 i‡(
ú
->
rd
 =
√xt_ú
->
rs2
 || ir->rd =√xt_ú->
rs1
) {

805 
ú
->
›code
 = 
rv_ö¢_fu£2
;

806 
ú
->
rs2
 = 
√xt_ú
->
rd
;

807 i‡(
ú
->
rd
 =
√xt_ú
->
rs2
)

808 
ú
->
rs1
 = 
√xt_ú
->rs1;

810 
ú
->
rs1
 = 
√xt_ú
->
rs2
;

811 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

812 
	`ªmove_√xt_¡h_ú
(
rv
, 
ú
, 
block
, 1);

815 
rv_ö¢_lui
:

816 
cou¡
 = 1;

818 i‡(!
	`IF_ö¢
(
√xt_ú
, 
lui
))

820 
cou¡
++;

821 i‡(!
√xt_ú
->
√xt
)

823 
√xt_ú
 =Çext_ú->
√xt
;

825 i‡(
cou¡
 > 1) {

826 
ú
->
›code
 = 
rv_ö¢_fu£1
;

827 
ú
->
fu£
 = 
	`mÆloc
(
cou¡
 * (
›code_fu£_t
));

828 
	`as£π
(
ú
->
fu£
);

829 
ú
->
imm2
 = 
cou¡
;

830 
	`mem˝y
(
ú
->
fu£
, ir, (
›code_fu£_t
));

831 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

832 
√xt_ú
 = 
ú
->
√xt
;

833 
j
 = 1; j < 
cou¡
; j++, 
√xt_ú
 =Çext_ú->
√xt
)

834 
	`mem˝y
(
ú
->
fu£
 + 
j
, 
√xt_ú
, (
›code_fu£_t
));

835 
	`ªmove_√xt_¡h_ú
(
rv
, 
ú
, 
block
, 
cou¡
 - 1);

843 
rv_ö¢_sw
:

844 
	`COMBINE_MEM_OPS
(0);

846 
rv_ö¢_lw
:

847 
	`COMBINE_MEM_OPS
(1);

851 
rv_ö¢_¶li
:

852 
rv_ö¢_§li
:

853 
rv_ö¢_§ai
:

854 
cou¡
 = 1;

855 
√xt_ú
 = 
ú
->
√xt
;

857 i‡(!
	`IF_ö¢
(
√xt_ú
, 
¶li
Ë&& !IF_ö¢“ext_ú, 
§li
) &&

858 !
	`IF_ö¢
(
√xt_ú
, 
§ai
))

860 
cou¡
++;

861 i‡(!
√xt_ú
->
√xt
)

863 
√xt_ú
 =Çext_ú->
√xt
;

865 i‡(
cou¡
 > 1) {

866 
ú
->
fu£
 = 
	`mÆloc
(
cou¡
 * (
›code_fu£_t
));

867 
	`as£π
(
ú
->
fu£
);

868 
	`mem˝y
(
ú
->
fu£
, ir, (
›code_fu£_t
));

869 
ú
->
›code
 = 
rv_ö¢_fu£5
;

870 
ú
->
imm2
 = 
cou¡
;

871 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

872 
√xt_ú
 = 
ú
->
√xt
;

873 
j
 = 1; j < 
cou¡
; j++, 
√xt_ú
 =Çext_ú->
√xt
)

874 
	`mem˝y
(
ú
->
fu£
 + 
j
, 
√xt_ú
, (
›code_fu£_t
));

875 
	`ªmove_√xt_¡h_ú
(
rv
, 
ú
, 
block
, 
cou¡
 - 1);

880 
	}
}

883 
boﬁ
 
	mis_c⁄°™t
[
N_RV_REGS
];

884 
uöt32_t
 
	mc⁄°_vÆ
[
N_RV_REGS
];

885 } 
	tc⁄°›t_öfo_t
;

887 
	#CONSTOPT
(
ö°
, 
code
) \

888 
c⁄°›t_
##
	`ö°
(
rv_ö¢_t
 *
ú
 
UNUSED
, \

889 
c⁄°›t_öfo_t
 *
öfo
 
UNUSED
) \

891 
code
; \

892 }

	)

894 
	~"rv32_c⁄°›t.c
"

895 c⁄° *
	gc⁄°›t_èbÀ
[] = {

896 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
) \

897 [
rv_ö¢_
##
ö°
] = 
c⁄°›t_
##ö°,

	)

898 
RV_INSN_LIST


899 #unde‡
_


901 #unde‡
CONSTOPT


903 (*
	tc⁄°›t_func_t
)(
	trv_ö¢_t
 *, 
	tc⁄°›t_öfo_t
 *);

904 
	$›timize_c⁄°™t
(
riscv_t
 *
rv
 
UNUSED
, 
block_t
 *
block
)

906 
c⁄°›t_öfo_t
 
öfo
 = {.
is_c⁄°™t
[0] = 
åue
};

907 
	`as£π
(
rv
->
X
[0] == 0);

909 
uöt32_t
 
i
;

910 
rv_ö¢_t
 *
ú
;

911 
i
 = 0, 
ú
 = 
block
->
ú_hód
; i < block->
n_ö¢
; i++, i∏ú->
√xt
)

912 ((
c⁄°›t_func_t
Ë
c⁄°›t_èbÀ
[
ú
->
›code
])(ú, &
öfo
);

913 
	}
}

915 
block_t
 *
	g¥ev
 = 
NULL
;

916 
block_t
 *
	$block_föd_‹_å™¶©e
(
riscv_t
 *
rv
)

918 #i‡!
	`RV32_HAS
(
JIT
)

919 i‡(
ßç_ch™ged
) {

920 
	`block_m≠_˛ór
(
rv
);

921 
ßç_ch™ged
 = 
Ál£
;

923 
block_m≠_t
 *
m≠
 = &
rv
->
block_m≠
;

925 
block_t
 *
√xt
 = 
	`block_föd
(
m≠
, 
rv
->
PC
);

928 
block_t
 *
√xt
 = (block_à*Ë
	`ˇche_gë
(
rv
->
block_ˇche
,Ñv->
PC
, 
åue
);

931 i‡(!
√xt
) {

932 #i‡!
	`RV32_HAS
(
JIT
)

933 i‡(
m≠
->
size
 * 1.25 > m≠->
block_ˇ∑côy
) {

934 
	`block_m≠_˛ór
(
rv
);

935 
¥ev
 = 
NULL
;

939 
√xt
 = 
	`block_Æloc
(
rv
);

940 
	`block_å™¶©e
(
rv
, 
√xt
);

942 
	`›timize_c⁄°™t
(
rv
, 
√xt
);

943 #i‡
	`RV32_HAS
(
GDBSTUB
)

944 i‡(
	`likñy
(!
rv
->
debug_mode
))

947 
	`m©ch_∑âîn
(
rv
, 
√xt
);

949 #i‡!
	`RV32_HAS
(
JIT
)

951 
	`block_ö£π
(&
rv
->
block_m≠
, 
√xt
);

954 
block_t
 *
dñëe_èrgë
 = 
	`ˇche_put
(
rv
->
block_ˇche
,Ñv->
PC
, &(*
√xt
));

955 i‡(
dñëe_èrgë
) {

956 i‡(
¥ev
 =
dñëe_èrgë
)

957 
¥ev
 = 
NULL
;

958 
chaö_íåy_t
 *
íåy
, *
ß„
;

960 
rv_ö¢_t
 *
èkí
 = 
dñëe_èrgë
->
ú_èû
->
bønch_èkí
,

961 *
u¡akí
 = 
dñëe_èrgë
->
ú_èû
->
bønch_u¡akí
;

962 i‡(
èkí
 &&Åakí->
pc
 !
dñëe_èrgë
->
pc_°¨t
) {

963 
block_t
 *
èrgë
 = 
	`ˇche_gë
(
rv
->
block_ˇche
, 
èkí
->
pc
, 
Ál£
);

964 
boﬁ
 
Êag
 = 
Ál£
;

965 
	`li°_f‹_óch_íåy_ß„
 (
íåy
, 
ß„
, &
èrgë
->
li°
,Üist) {

966 i‡(
íåy
->
block
 =
dñëe_èrgë
) {

967 
	`li°_dñ_öô
(&
íåy
->
li°
);

968 
	`mpoﬁ_‰ì
(
rv
->
chaö_íåy_mp
, 
íåy
);

969 
Êag
 = 
åue
;

972 
	`as£π
(
Êag
);

974 i‡(
u¡akí
 && u¡akí->
pc
 !
dñëe_èrgë
->
pc_°¨t
) {

975 
block_t
 *
èrgë
 =

976 
	`ˇche_gë
(
rv
->
block_ˇche
, 
u¡akí
->
pc
, 
Ál£
);

977 
	`as£π
(
èrgë
);

978 
boﬁ
 
Êag
 = 
Ál£
;

979 
	`li°_f‹_óch_íåy_ß„
 (
íåy
, 
ß„
, &
èrgë
->
li°
,Üist) {

980 i‡(
íåy
->
block
 =
dñëe_èrgë
) {

981 
	`li°_dñ_öô
(&
íåy
->
li°
);

982 
	`mpoﬁ_‰ì
(
rv
->
chaö_íåy_mp
, 
íåy
);

983 
Êag
 = 
åue
;

986 
	`as£π
(
Êag
);

989 
	`li°_f‹_óch_íåy_ß„
 (
íåy
, 
ß„
, &
dñëe_èrgë
->
li°
,Üist) {

990 i‡(
íåy
->
block
 =
dñëe_èrgë
)

992 
rv_ö¢_t
 *
èrgë
 = 
íåy
->
block
->
ú_èû
;

993 i‡(
èrgë
->
bønch_èkí
 =
dñëe_èrgë
->
ú_hód
)

994 
èrgë
->
bønch_èkí
 = 
NULL
;

995 i‡(
èrgë
->
bønch_u¡akí
 =
dñëe_èrgë
->
ú_hód
)

996 
èrgë
->
bønch_u¡akí
 = 
NULL
;

997 
	`mpoﬁ_‰ì
(
rv
->
chaö_íåy_mp
, 
íåy
);

1000 
uöt32_t
 
idx
;

1001 
rv_ö¢_t
 *
ú
, *
√xt
;

1002 
idx
 = 0, 
ú
 = 
dñëe_èrgë
->
ú_hód
;

1003 
idx
 < 
dñëe_èrgë
->
n_ö¢
; idx++, 
ú
 = 
√xt
) {

1004 
	`‰ì
(
ú
->
fu£
);

1005 
√xt
 = 
ú
->next;

1006 
	`mpoﬁ_‰ì
(
rv
->
block_ú_mp
, 
ú
);

1008 
	`mpoﬁ_‰ì
(
rv
->
block_mp
, 
dñëe_èrgë
);

1013  
√xt
;

1014 
	}
}

1016 #i‡
RV32_HAS
(
JIT
)

1017 
boﬁ
 
	$ru¡ime_¥ofûî
(
riscv_t
 *
rv
, 
block_t
 *
block
)

1024 
uöt32_t
 
‰eq
 = 
	`ˇche_‰eq
(
rv
->
block_ˇche
, 
block
->
pc_°¨t
);

1026 i‡(
	`u∆ikñy
(
‰eq
 >2 && 
block
->
has_lo›s
))

1027  
åue
;

1029 i‡(
	`u∆ikñy
(
‰eq
 =
THRESHOLD
))

1030  
åue
;

1031  
Ál£
;

1032 
	}
}

1035 
	$∂ic_upd©e_öãºu±s
(
riscv_t
 *
rv
)

1037 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1038 
∂ic_t
 *
∂ic
 = 
©å
->plic;

1041 
∂ic
->
ù
 |∂ic->
a˘ive
 & ~∂ic->
masked
;

1042 
∂ic
->
masked
 |∂ic->
a˘ive
;

1044 i‡(
∂ic
->
ù
 &Ölic->
õ
) {

1045 
rv
->
c§_sù
 |
SIP_SEIP
;

1047 
rv
->
c§_sù
 &~
SIP_SEIP
;

1048 
	}
}

1050 
uöt32_t
 
	$∂ic_ªad
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
)

1052 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1053 
∂ic_t
 *
∂ic
 = 
©å
->plic;

1056 i‡(1 <
addr
 &&áddr <= 31)

1059 
uöt32_t
 
∂ic_ªad_vÆ
 = 0;

1061 
addr
) {

1063 
∂ic_ªad_vÆ
 = 
∂ic
->
ù
;

1066 
∂ic_ªad_vÆ
 = 
∂ic
->
õ
;

1070 
∂ic_ªad_vÆ
 = 0;

1075 
uöt32_t
 
öå_ˇndid©e
 = 
∂ic
->
ù
 &Ölic->
õ
;

1076 i‡(
öå_ˇndid©e
) {

1077 
∂ic_ªad_vÆ
 = 
	`ûog2
(
öå_ˇndid©e
);

1078 
∂ic
->
ù
 &~(1U << (
∂ic_ªad_vÆ
));

1086  
∂ic_ªad_vÆ
;

1087 
	}
}

1089 
	$∂ic_wrôe
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
, uöt32_à
vÆue
)

1091 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1092 
∂ic_t
 *
∂ic
 = 
©å
->plic;

1095 i‡(1 <
addr
 &&áddr <= 31)

1098 
addr
) {

1100 
∂ic
->
õ
 = (
vÆue
 & ~1);

1107 i‡(
∂ic
->
õ
 & (1U << 
vÆue
))

1108 
∂ic
->
masked
 &~(1U << 
vÆue
);

1115 
	}
}

1117 
boﬁ
 
	$rv_has_∂ic_å≠
(
riscv_t
 *
rv
)

1119  ((
rv
->
c§_s°©us
 & 
SSTATUS_SIE
 || !rv->
¥iv_mode
) &&

1120 (
rv
->
c§_sù
 &Ñv->
c§_sõ
));

1121 
	}
}

1123 
boﬁ
 
	$block_has_eˇŒ
(
block_t
 *
block
){

1124 
	`as£π
(
block
);

1125 
rv_ö¢_t
 *
ú
 = 
block
->
ú_hód
;

1127 
i
 = 0; i < 
block
->
n_ö¢
; i++){

1128 if(
	`IF_ö¢
(
ú
, 
eˇŒ
))

1129  
åue
;

1131 
ú
 = ir->
√xt
;

1134  
Ál£
;

1135 
	}
}

1137 
	$rv_°ï
(*
¨g
)

1139 
	`as£π
(
¨g
);

1140 
riscv_t
 *
rv
 = 
¨g
;

1142 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1143 
uöt32_t
 
cy˛es
 = 
©å
->
cy˛e_≥r_°ï
;

1146 c⁄° 
uöt64_t
 
cy˛es_èrgë
 = 
rv
->
c§_cy˛e
 + 
cy˛es
;

1149 
timevÆ
 
tv
;

1152 
rv
->
c§_cy˛e
 < 
cy˛es_èrgë
 && !rv->
hÆt
) {

1155 i‡(
≥rùhîÆ_upd©e_˘r
-- == 0) {

1156 
≥rùhîÆ_upd©e_˘r
 = 64;

1158 
	`u8250_check_ªady
(
	`PRIV
(
rv
)->
u¨t
);

1159 i‡(
	`PRIV
(
rv
)->
u¨t
->
ö_ªady
)

1160 
	`emu_upd©e_u¨t_öãºu±s
(
rv
);

1163 
	`gë_time_now
(&
tv
);

1164 
uöt64_t
 
t
 = (uöt64_tË(
tv
.
tv_£c
 * 1e6Ë+ (
uöt32_t
Ëtv.
tv_u£c
;

1166 i‡(
t
 > 
©å
->
timî
) {

1167 
rv
->
c§_sù
 |
RV_INT_STI
;

1169 
rv
->
c§_sù
 &~
RV_INT_STI
;

1172 i‡(
	`rv_has_∂ic_å≠
(
rv
)) {

1173 
rv
->
is_å≠≥d
 = 
åue
;

1174 
uöt32_t
 
öå_≠∂iˇbÀ
 = 
rv
->
c§_sù
 &Ñv->
c§_sõ
;

1175 
uöt8_t
 
öå_idx
 = 
	`ûog2
(
öå_≠∂iˇbÀ
);

1176 
öå_idx
) {

1178 
	`rv_å≠_su≥rvis‹_sw_öå
(
rv
, 0);

1181 
	`rv_å≠_su≥rvis‹_timî_öå
(
rv
, 0);

1184 
	`rv_å≠_su≥rvis‹_exã∫Æ_öå
(
rv
, 0);

1191 i‡(
¥ev
 &&Öªv->
pc_°¨t
 !
œ°_pc
) {

1193 #i‡!
	`RV32_HAS
(
JIT
)

1194 
¥ev
 = 
	`block_föd
(&
rv
->
block_m≠
, 
œ°_pc
);

1196 
¥ev
 = 
	`ˇche_gë
(
rv
->
block_ˇche
, 
œ°_pc
, 
Ál£
);

1216 
block_t
 *
block
 = 
	`block_föd_‹_å™¶©e
(
rv
);

1218 
	`as£π
(
block
);

1232 i‡(
¥ev
) {

1233 
rv_ö¢_t
 *
œ°_ú
 = 
¥ev
->
ú_èû
;

1235 i‡(!
	`ö¢_is_unc⁄dôi⁄Æ_bønch
(
œ°_ú
->
›code
)) {

1248 i‡(
is_bønch_èkí
 && !
œ°_ú
->
bønch_èkí
) {

1249 
œ°_ú
->
bønch_èkí
 = 
block
->
ú_hód
;

1250 #i‡
	`RV32_HAS
(
JIT
)

1251 
chaö_íåy_t
 *
√w_íåy
 = 
	`mpoﬁ_Æloc
(
rv
->
chaö_íåy_mp
);

1252 
√w_íåy
->
block
 = 
¥ev
;

1253 
	`li°_add
(&
√w_íåy
->
li°
, &
block
->list);

1255 } i‡(!
is_bønch_èkí
 && !
œ°_ú
->
bønch_u¡akí
) {

1256 
œ°_ú
->
bønch_u¡akí
 = 
block
->
ú_hód
;

1257 #i‡
	`RV32_HAS
(
JIT
)

1258 
chaö_íåy_t
 *
√w_íåy
 = 
	`mpoﬁ_Æloc
(
rv
->
chaö_íåy_mp
);

1259 
√w_íåy
->
block
 = 
¥ev
;

1260 
	`li°_add
(&
√w_íåy
->
li°
, &
block
->list);

1263 } i‡(
	`IF_ö¢
(
œ°_ú
, 
jÆ
)

1264 #i‡
	`RV32_HAS
(
EXT_C
)

1265 || 
	`IF_ö¢
(
œ°_ú
, 
cj
Ë|| IF_ö¢÷a°_ú, 
cjÆ
)

1268 i‡(!
œ°_ú
->
bønch_èkí
) {

1269 
œ°_ú
->
bønch_èkí
 = 
block
->
ú_hód
;

1270 #i‡
	`RV32_HAS
(
JIT
)

1271 
chaö_íåy_t
 *
√w_íåy
 = 
	`mpoﬁ_Æloc
(
rv
->
chaö_íåy_mp
);

1272 
√w_íåy
->
block
 = 
¥ev
;

1273 
	`li°_add
(&
√w_íåy
->
li°
, &
block
->list);

1278 
œ°_pc
 = 
rv
->
PC
;

1279 #i‡
	`RV32_HAS
(
JIT
)

1280 #i‡
	`RV32_HAS
(
T2C
)

1282 i‡(
block
->
hŸ2
) {

1283 ((
exec_t2c_func_t
Ë
block
->
func
)(
rv
);

1284 
¥ev
 = 
NULL
;

1287 i‡(!
block
->
compûed
 && block->
n_övoke
 >
THRESHOLD
) {

1288 
block
->
compûed
 = 
åue
;

1289 
queue_íåy_t
 *
íåy
 = 
	`mÆloc
((queue_entry_t));

1290 
íåy
->
block
 = block;

1291 
	`±hªad_muãx_lock
(&
rv
->
waô_queue_lock
);

1292 
	`li°_add
(&
íåy
->
li°
, &
rv
->
waô_queue
);

1293 
	`±hªad_muãx_u∆ock
(&
rv
->
waô_queue_lock
);

1297 
jô_°©e
 *
°©e
 = 
rv
->jit_state;

1298 i‡(
block
->
hŸ
) {

1299 
block
->
n_övoke
++;

1300 ((
exec_block_func_t
Ë
°©e
->
buf
)(

1301 
rv
, (
uöçå_t
Ë(
°©e
->
buf
 + 
block
->
off£t
));

1302 
¥ev
 = 
NULL
;

1305 i‡(
block
->
å™¶©abÀ
 && 
	`ru¡ime_¥ofûî
(
rv
, block)) {

1306 
	`jô_å™¶©e
(
rv
, 
block
);

1307 ((
exec_block_func_t
Ë
°©e
->
buf
)(

1308 
rv
, (
uöçå_t
Ë(
°©e
->
buf
 + 
block
->
off£t
));

1309 
¥ev
 = 
NULL
;

1312 
	`£t_ª£t
(&
pc_£t
);

1313 
has_lo›s
 = 
Ál£
;

1316 c⁄° 
rv_ö¢_t
 *
ú
 = 
block
->
ú_hód
;

1317 i‡(
	`u∆ikñy
(!
ú
->
	`im∂
(
rv
, ir,Ñv->
c§_cy˛e
,Ñv->
PC
))) {

1319 
¥ev
 = 
NULL
;

1322 #i‡
	`RV32_HAS
(
JIT
)

1323 i‡(
has_lo›s
 && !
block
->has_loops)

1324 
block
->
has_lo›s
 = 
åue
;

1326 
¥ev
 = 
block
;

1329 #ifde‡
__EMSCRIPTEN__


1330 i‡(
	`rv_has_hÆãd
(
rv
)) {

1331 
	`¥ötf
("ö„ri‹Éxô codê%d\n", 
©å
->
exô_code
);

1332 
	`ems¸ùãn_ˇn˚l_maö_lo›
();

1333 
	`rv_dñëe
(
rv
);

1336 
	}
}

1338 #i‡
RV32_HAS
(
SYSTEM
)

1339 
	$å≠_h™dÀr
(
riscv_t
 *
rv
)

1341 
rv_ö¢_t
 *
ú
 = 
	`mpoﬁ_Æloc
(
rv
->
block_ú_mp
);

1342 
	`as£π
(
ú
);

1344 
uöt32_t
 
ö¢
;

1345 
rv
->
is_å≠≥d
) {

1346 
ö¢
 = 
rv
->
io
.
	`mem_i„tch
‘v,Ñv->
PC
);

1347 
	`as£π
(
ö¢
);

1349 
	`rv_decode
(
ú
, 
ö¢
);

1350 
ªloc_íabÀ_mmu_jÆr_addr
 = 
rv
->
PC
;

1352 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

1353 
rv
->
com¥es£d
 = 
	`is_com¥es£d
(
ö¢
);

1354 
ú
->
	`im∂
(
rv
, ir,Ñv->
c§_cy˛e
,Ñv->
PC
);

1356 
	}
}

1358 
boﬁ
 
	$µn_is_vÆid
(
riscv_t
 *
rv
, 
uöt32_t
 
µn
)

1360 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1361 c⁄° 
uöt32_t
 
ƒ_pg_max
 = 
©å
->
mem_size
 / 
RV_PG_SIZE
;

1362  
µn
 < 
ƒ_pg_max
;

1363 
	}
}

1365 
	#PAGE_TABLE
(
µn
) \

1366 
	`µn_is_vÆid
(
rv
, 
µn
) \

1367 ? (
uöt32_t
 *Ë(
©å
->
mem
->
mem_ba£
 + (
µn
 << (
RV_PG_SHIFT
))) \

1368 : 
NULL


	)

1376 
uöt32_t
 *
	$mmu_wÆk
(
riscv_t
 *
rv
,

1377 c⁄° 
uöt32_t
 
addr
,

1378 
uöt32_t
 *
Àvñ
)

1380 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1381 
uöt32_t
 
µn
 = 
rv
->
c§_ßç
 & 
	`MASK
(22);

1383 
uöt32_t
 *
∑ge_èbÀ
 = 
	`PAGE_TABLE
(
µn
);

1384 i‡(!
∑ge_èbÀ
)

1385  
NULL
;

1387 
i
 = 1; i >= 0; i--) {

1388 *
Àvñ
 = 2 - 
i
;

1389 
uöt32_t
 
v≤
 =

1390 (
addr
 >> 
RV_PG_SHIFT
 >> (
i
 * (RV_PG_SHIFT - 2))Ë& 
	`MASK
(10);

1391 
uöt32_t
 *
±e
 = 
∑ge_èbÀ
 + 
v≤
;

1394 
uöt8_t
 
XWRV_bô
 = (*
±e
 & 
	`MASK
(4));

1395 
XWRV_bô
) {

1397 
µn
 = (*
±e
 >> (
RV_PG_SHIFT
 - 2));

1398 
∑ge_èbÀ
 = 
	`PAGE_TABLE
(
µn
);

1399 i‡(!
∑ge_èbÀ
)

1400  
NULL
;

1407 
µn
 = (*
±e
 >> (
RV_PG_SHIFT
 - 2));

1408 i‡(*
Àvñ
 == 1 &&

1409 
	`u∆ikñy
(
µn
 & 
	`MASK
(10)))

1410  
NULL
;

1411  
±e
;

1415  
NULL
;

1419  
NULL
;

1420 
	}
}

1431 
	#MMU_FAULT_CHECK
(
›
, 
rv
, 
±e
, 
addr
, 
ac˚ss_bôs
) \

1432 
mmu_
##
›
##
	`_Áu…_check
(
rv
, 
±e
, 
addr
, 
ac˚ss_bôs
)

	)

1433 
	#MMU_FAULT_CHECK_IMPL
(
›
, 
pgÁu…
) \

1434 
boﬁ
 
mmu_
##
›
##
	`_Áu…_check
(
riscv_t
 *
rv
, 
uöt32_t
 *
±e
, \

1435 
uöt32_t
 
addr
, uöt32_à
ac˚ss_bôs
) \

1437 i‡(
±e
 && (!(*±ê& 
PTE_V
))) { \

1438 
rv
->
is_å≠≥d
 = 
åue
; \

1439 
rv_å≠_
##
	`pgÁu…
(
rv
, 
addr
); \

1440  
Ál£
; \

1442 i‡(!(
±e
 && (*±ê& 
ac˚ss_bôs
))) { \

1443 
rv
->
is_å≠≥d
 = 
åue
; \

1444 
rv_å≠_
##
	`pgÁu…
(
rv
, 
addr
); \

1445  
Ál£
; \

1454 i‡(
±e
 && ((!(
SSTATUS_MXR
 & 
rv
->
c§_s°©us
Ë&& !(*±ê& 
PTE_R
) && \

1455 (
ac˚ss_bôs
 =
PTE_R
)) || \

1456 ((
SSTATUS_MXR
 & 
rv
->
c§_s°©us
) && \

1457 !((*
±e
 & 
PTE_R
Ë| (*±ê& 
PTE_X
)) && \

1458 (
ac˚ss_bôs
 =
PTE_R
)))) { \

1459 
rv
->
is_å≠≥d
 = 
åue
; \

1460 
rv_å≠_
##
	`pgÁu…
(
rv
, 
addr
); \

1461  
Ál£
; \

1467 i‡(
±e
 && 
rv
->
¥iv_mode
 =
RV_PRIV_S_MODE
 && \

1468 !(
SSTATUS_SUM
 & 
rv
->
c§_s°©us
Ë&& (*
±e
 & 
PTE_U
)) { \

1469 
rv
->
is_å≠≥d
 = 
åue
; \

1470 
rv_å≠_
##
	`pgÁu…
(
rv
, 
addr
); \

1471  
Ál£
; \

1474 i‡(!
±e
) { \

1475 
rv
->
is_å≠≥d
 = 
åue
; \

1476 
rv_å≠_
##
	`pgÁu…
(
rv
, 
addr
); \

1477  
Ál£
; \

1480  
åue
; \

1481 }

	)

1483 
	$MMU_FAULT_CHECK_IMPL
(
i„tch
, 
∑geÁu…_ö¢
)

1484 
	$MMU_FAULT_CHECK_IMPL
(
ªad
, 
∑geÁu…_lﬂd
)

1485 
	$MMU_FAULT_CHECK_IMPL
(
wrôe
, 
∑geÁu…_°‹e
)

1487 
	#gë_µn_™d_off£t
(
µn
, 
off£t
) \

1488 
uöt32_t
 
µn
; \

1489 
uöt32_t
 
off£t
; \

1491 
µn
 = *
±e
 >> (
RV_PG_SHIFT
 - 2) << RV_PG_SHIFT; \

1492 
off£t
 = 
Àvñ
 =1 ? 
addr
 & 
	`MASK
((
RV_PG_SHIFT
 + 10)) \

1493 : 
addr
 & 
	`MASK
(
RV_PG_SHIFT
); \

1494 
	}
} 0)

	)

1496 
uöt32_t
 
	$mmu_i„tch
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
)

1498 i‡(!
rv
->
c§_ßç
)

1499  
	`mem‹y_i„tch
(
addr
);

1501 
uöt32_t
 
Àvñ
;

1502 
uöt32_t
 *
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1504 
boﬁ
 
ok
 = 
	`MMU_FAULT_CHECK
(
i„tch
, 
rv
, 
±e
, 
addr
, 
PTE_X
);

1506 i‡(
√ed_ªå™¶©e
) {

1510 i‡(
	`u∆ikñy
(!
ok
)) {

1511 
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1514 
	`gë_µn_™d_off£t
(
µn
, 
off£t
);

1515  
	`mem‹y_i„tch
(
µn
 | 
off£t
);

1516 
	}
}

1518 
	$emu_upd©e_u¨t_öãºu±s
(
riscv_t
 *
rv
)

1520 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1521 
	`u8250_upd©e_öãºu±s
(
©å
->
u¨t
);

1522 i‡(
©å
->
u¨t
->
≥ndög_öts
) {

1523 
©å
->
∂ic
->
a˘ive
 |
IRQ_UART_BIT
;

1525 
©å
->
∂ic
->
a˘ive
 &~
IRQ_UART_BIT
;

1526 
	`∂ic_upd©e_öãºu±s
(
rv
);

1527 
	}
}

1529 
	#MMIO_PLIC
 1

	)

1530 
	#MMIO_UART
 0

	)

1531 
	#MMIO_R
 1

	)

1532 
	#MMIO_W
 0

	)

1534 
uöt8_t
 
	gªt_ch¨
;

1536 
	#MMIO_OP
(
io
, 
rw
) \

1537 
	`IIF
(
io
)( \

1538 
	`IIF
(
rw
)( \

1539 
ªad_vÆ
 = 
	`∂ic_ªad
(
rv
, (
addr
 & 0x3FFFFFF) >> 2); \

1540 
	`∂ic_upd©e_öãºu±s
(
rv
);  
ªad_vÆ
; \

1542 
	`∂ic_wrôe
(
rv
, (
addr
 & 0x3FFFFFFË>> 2, 
vÆ
); \

1543 
	`∂ic_upd©e_öãºu±s
(
rv
); ; \

1546 
	`IIF
(
rw
)( \

1548 
ªt_ch¨
 = 
	`u8250_ªad
(
	`PRIV
(
rv
)->
u¨t
, 
addr
 & 0xFFFFF);\

1549 
	`emu_upd©e_u¨t_öãºu±s
(
rv
);\

1550  
ªt_ch¨
;\

1552 
	`u8250_wrôe
(
	`PRIV
(
rv
)->
u¨t
, 
addr
 & 0xFFFFF, 
vÆ
);\

1553 
	`emu_upd©e_u¨t_öãºu±s
(
rv
);\

1556 )

	)

1559 
	#MMIO_READ
() \

1561 
uöt32_t
 
ªad_vÆ
; \

1562 i‡((
addr
 >> 28) == 0xF) { \

1564 (
addr
 >> 20Ë& 
	`MASK
(8)) { \

1567 
	`MMIO_OP
(
MMIO_PLIC
, 
MMIO_R
); \

1569 
	`MMIO_OP
(
MMIO_UART
, 
MMIO_R
); \

1572 } 0)

	)

1574 
	#MMIO_WRITE
() \

1576 i‡((
addr
 >> 28) == 0xF) { \

1578 (
addr
 >> 20Ë& 
	`MASK
(8)) { \

1581 
	`MMIO_OP
(
MMIO_PLIC
, 
MMIO_W
); \

1583 
	`MMIO_OP
(
MMIO_UART
, 
MMIO_W
); \

1586 } 0)

	)

1588 
uöt32_t
 
	$mmu_ªad_w
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
)

1590 i‡(!
rv
->
c§_ßç
)

1591  
	`mem‹y_ªad_w
(
addr
);

1593 
uöt32_t
 
Àvñ
;

1594 
uöt32_t
 *
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1595 
boﬁ
 
ok
 = 
	`MMU_FAULT_CHECK
(
ªad
, 
rv
, 
±e
, 
addr
, 
PTE_R
);

1596 i‡(
	`u∆ikñy
(!
ok
)) {

1597 
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1601 
	`gë_µn_™d_off£t
(
µn
, 
off£t
);

1602 c⁄° 
uöt32_t
 
addr
 = 
µn
 | 
off£t
;

1603 c⁄° 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1604 i‡(
addr
 < 
©å
->
mem
->
mem_size
)

1605  
	`mem‹y_ªad_w
(
addr
);

1607 
	`MMIO_READ
();

1609 
	}
}

1611 
uöt16_t
 
	$mmu_ªad_s
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
)

1613 i‡(!
rv
->
c§_ßç
)

1614  
	`mem‹y_ªad_s
(
addr
);

1616 
uöt32_t
 
Àvñ
;

1617 
uöt32_t
 *
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1618 
boﬁ
 
ok
 = 
	`MMU_FAULT_CHECK
(
ªad
, 
rv
, 
±e
, 
addr
, 
PTE_R
);

1619 i‡(
	`u∆ikñy
(!
ok
)) {

1620 
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1624 
	`gë_µn_™d_off£t
(
µn
, 
off£t
);

1625 c⁄° 
uöt32_t
 
addr
 = 
µn
 | 
off£t
;

1626 c⁄° 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1627 i‡(
addr
 < 
©å
->
mem
->
mem_size
) {

1628  
	`mem‹y_ªad_s
(
addr
);

1631 
	}
}

1633 
uöt8_t
 
	$mmu_ªad_b
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
)

1635 i‡(!
rv
->
c§_ßç
)

1636  
	`mem‹y_ªad_b
(
addr
);

1638 
uöt32_t
 
Àvñ
;

1639 
uöt32_t
 *
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1640 
boﬁ
 
ok
 = 
	`MMU_FAULT_CHECK
(
ªad
, 
rv
, 
±e
, 
addr
, 
PTE_R
);

1641 i‡(
	`u∆ikñy
(!
ok
)) {

1642 
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1646 
	`gë_µn_™d_off£t
(
µn
, 
off£t
);

1647 c⁄° 
uöt32_t
 
addr
 = 
µn
 | 
off£t
;

1648 c⁄° 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1649 i‡(
addr
 < 
©å
->
mem
->
mem_size
)

1650  
	`mem‹y_ªad_b
(
addr
);

1652 
	`MMIO_READ
();

1654 
	}
}

1656 
	$mmu_wrôe_w
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
, c⁄° uöt32_à
vÆ
)

1658 i‡(!
rv
->
c§_ßç
)

1659  
	`mem‹y_wrôe_w
(
addr
, (
uöt8_t
 *Ë&
vÆ
);

1661 
uöt32_t
 
Àvñ
;

1662 
uöt32_t
 *
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1663 
boﬁ
 
ok
 = 
	`MMU_FAULT_CHECK
(
wrôe
, 
rv
, 
±e
, 
addr
, 
PTE_W
);

1664 i‡(
	`u∆ikñy
(!
ok
)) {

1665 
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1669 
	`gë_µn_™d_off£t
(
µn
, 
off£t
);

1670 c⁄° 
uöt32_t
 
addr
 = 
µn
 | 
off£t
;

1671 c⁄° 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1672 i‡(
addr
 < 
©å
->
mem
->
mem_size
) {

1673 
	`mem‹y_wrôe_w
(
addr
, (
uöt8_t
 *Ë&
vÆ
);

1677 
	`MMIO_WRITE
();

1679 
	}
}

1681 
	$mmu_wrôe_s
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
, c⁄° 
uöt16_t
 
vÆ
)

1683 i‡(!
rv
->
c§_ßç
)

1684  
	`mem‹y_wrôe_s
(
addr
, (
uöt8_t
 *Ë&
vÆ
);

1686 
uöt32_t
 
Àvñ
;

1687 
uöt32_t
 *
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1688 
boﬁ
 
ok
 = 
	`MMU_FAULT_CHECK
(
wrôe
, 
rv
, 
±e
, 
addr
, 
PTE_W
);

1689 i‡(
	`u∆ikñy
(!
ok
)) {

1690 
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1694 
	`gë_µn_™d_off£t
(
µn
, 
off£t
);

1695 c⁄° 
uöt32_t
 
addr
 = 
µn
 | 
off£t
;

1696 c⁄° 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1697 i‡(
addr
 < 
©å
->
mem
->
mem_size
) {

1698 
	`mem‹y_wrôe_s
(
addr
, (
uöt8_t
 *Ë&
vÆ
);

1702 
	}
}

1704 
	$mmu_wrôe_b
(
riscv_t
 *
rv
, c⁄° 
uöt32_t
 
addr
, c⁄° 
uöt8_t
 
vÆ
)

1706 i‡(!
rv
->
c§_ßç
)

1707  
	`mem‹y_wrôe_b
(
addr
, (
uöt8_t
 *Ë&
vÆ
);

1709 
uöt32_t
 
Àvñ
;

1710 
uöt32_t
 *
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1711 
boﬁ
 
ok
 = 
	`MMU_FAULT_CHECK
(
wrôe
, 
rv
, 
±e
, 
addr
, 
PTE_W
);

1712 i‡(
	`u∆ikñy
(!
ok
)) {

1713 
±e
 = 
	`mmu_wÆk
(
rv
, 
addr
, &
Àvñ
);

1717 
	`gë_µn_™d_off£t
(
µn
, 
off£t
);

1718 c⁄° 
uöt32_t
 
addr
 = 
µn
 | 
off£t
;

1719 c⁄° 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

1720 i‡(
addr
 < 
©å
->
mem
->
mem_size
) {

1721 
	`mem‹y_wrôe_b
(
addr
, (
uöt8_t
 *Ë&
vÆ
);

1725 
	`MMIO_WRITE
();

1727 
	}
}

1729 
riscv_io_t
 
	gmmu_io
 = {

1731 .
mem_i„tch
 = 
mmu_i„tch
,

1732 .
	gmem_ªad_w
 = 
mmu_ªad_w
,

1733 .
	gmem_ªad_s
 = 
mmu_ªad_s
,

1734 .
	gmem_ªad_b
 = 
mmu_ªad_b
,

1737 .
	gmem_wrôe_w
 = 
mmu_wrôe_w
,

1738 .
	gmem_wrôe_s
 = 
mmu_wrôe_s
,

1739 .
	gmem_wrôe_b
 = 
mmu_wrôe_b
,

1742 .
	g⁄_eˇŒ
 = 
eˇŒ_h™dÀr
,

1743 .
	g⁄_ebªak
 = 
ebªak_h™dÀr
,

1744 .
	g⁄_mem˝y
 = 
mem˝y_h™dÀr
,

1745 .
	g⁄_mem£t
 = 
mem£t_h™dÀr
,

1749 
	$ebªak_h™dÀr
(
riscv_t
 *
rv
)

1751 
	`as£π
(
rv
);

1752 
	`rv_å≠_bªakpoöt
(
rv
,Ñv->
PC
);

1753 
	}
}

1755 
	$eˇŒ_h™dÀr
(
riscv_t
 *
rv
)

1757 
	`as£π
(
rv
);

1758 #i‡
	`RV32_HAS
(
SYSTEM
)

1759 i‡(
rv
->
¥iv_mode
 =
RV_PRIV_U_MODE
) {

1760 
	`rv_å≠_eˇŒ_U
(
rv
, 0);

1761 } i‡(
rv
->
¥iv_mode
 ==

1762 
RV_PRIV_S_MODE
) {

1763 
rv
->
PC
 += 4;

1764 
	`sysˇŒ_h™dÀr
(
rv
);

1766 
	`¥ötf
("ˇ¬Ÿ h™dÀÉˇŒ hîe,Öriv mode: %d\n", 
rv
->
¥iv_mode
);

1769 
	`rv_å≠_eˇŒ_M
(
rv
, 0);

1770 
	`sysˇŒ_h™dÀr
(
rv
);

1772 
	}
}

1774 
	$mem£t_h™dÀr
(
riscv_t
 *
rv
)

1776 
mem‹y_t
 *
m
 = 
	`PRIV
(
rv
)->
mem
;

1777 
	`mem£t
((*Ë
m
->
mem_ba£
 + 
rv
->
X
[
rv_ªg_a0
],Ñv->X[
rv_ªg_a1
],

1778 
rv
->
X
[
rv_ªg_a2
]);

1779 
rv
->
PC
 =Ñv->
X
[
rv_ªg_ø
] & ~1U;

1780 
	}
}

1782 
	$mem˝y_h™dÀr
(
riscv_t
 *
rv
)

1784 
mem‹y_t
 *
m
 = 
	`PRIV
(
rv
)->
mem
;

1785 
	`mem˝y
((*Ë
m
->
mem_ba£
 + 
rv
->
X
[
rv_ªg_a0
],

1786 (*Ë
m
->
mem_ba£
 + 
rv
->
X
[
rv_ªg_a1
],Ñv->X[
rv_ªg_a2
]);

1787 
rv
->
PC
 =Ñv->
X
[
rv_ªg_ø
] & ~1U;

1788 
	}
}

1790 
	$dump_ªgi°îs
(
riscv_t
 *
rv
, *
out_fûe_∑th
)

1792 
FILE
 *
f
 = 
out_fûe_∑th
[0] ='-' ? 
°dout
 : 
	`f›í
(out_file_path, "w");

1793 i‡(!
f
) {

1794 
	`Ârötf
(
°dîr
, "Cannot openÑegisters output file.\n");

1798 
	`Ârötf
(
f
, "{\n");

1799 
i
 = 0; i < 
N_RV_REGS
; i++) {

1800 *
comma
 = 
i
 < 
N_RV_REGS
 - 1 ? "," : "";

1801 
	`Ârötf
(
f
, " \"x%d\": %u%s\n", 
i
, 
rv
->
X
[i], 
comma
);

1803 
	`Ârötf
(
f
, "}\n");

1805 i‡(
out_fûe_∑th
[0] != '-')

1806 
	`f˛o£
(
f
);

1807 
	}
}

	@src/feature.h

6 #¥agm®
⁄˚


11 #i‚de‡
RV32_FEATURE_EXT_M


12 
	#RV32_FEATURE_EXT_M
 1

	)

16 #i‚de‡
RV32_FEATURE_EXT_A


17 
	#RV32_FEATURE_EXT_A
 1

	)

21 #i‚de‡
RV32_FEATURE_EXT_F


22 
	#RV32_FEATURE_EXT_F
 1

	)

26 #i‚de‡
RV32_FEATURE_EXT_C


27 
	#RV32_FEATURE_EXT_C
 1

	)

31 #i‚de‡
RV32_FEATURE_Zic§


32 
	#RV32_FEATURE_Zic§
 1

	)

36 #i‚de‡
RV32_FEATURE_Zi„n˚i


37 
	#RV32_FEATURE_Zi„n˚i
 1

	)

41 #i‚de‡
RV32_FEATURE_SDL


42 
	#RV32_FEATURE_SDL
 1

	)

46 #i‚de‡
RV32_FEATURE_GDBSTUB


47 
	#RV32_FEATURE_GDBSTUB
 0

	)

51 #i‚de‡
RV32_FEATURE_JIT


52 
	#RV32_FEATURE_JIT
 0

	)

56 #i‚de‡
RV32_FEATURE_T2C


57 
	#RV32_FEATURE_T2C
 0

	)

61 #i‡!
RV32_FEATURE_JIT


62 #unde‡
RV32_FEATURE_T2C


63 
	#RV32_FEATURE_T2C
 0

	)

67 #i‚de‡
RV32_FEATURE_SYSTEM


68 
	#RV32_FEATURE_SYSTEM
 0

	)

72 
	#RV32_HAS
(
x
Ë
RV32_FEATURE_
##
	)
x

	@src/gdbstub.c

6 #i‡!
RV32_HAS
(
GDBSTUB
)

10 
	~<as£π.h
>

11 
	~<î∫o.h
>

13 
	~"möi-gdb°ub/ö˛ude/gdb°ub.h
"

15 
	~"bªakpoöt.h
"

16 
	~"riscv.h
"

17 
	~"riscv_¥iv©e.h
"

19 
	$rv_ªad_ªg
(*
¨gs
, 
ªgno
, 
size_t
 *
d©a
)

21 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

23 i‡(
	`u∆ikñy
(
ªgno
 > 32))

24  
EFAULT
;

26 i‡(
ªgno
 == 32)

27 *
d©a
 = 
	`rv_gë_pc
(
rv
);

29 *
d©a
 = 
	`rv_gë_ªg
(
rv
, 
ªgno
);

32 
	}
}

34 
	$rv_wrôe_ªg
(*
¨gs
, 
ªgno
, 
size_t
 
d©a
)

36 i‡(
	`u∆ikñy
(
ªgno
 > 32))

37  
EFAULT
;

39 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

40 i‡(
ªgno
 == 32)

41 
	`rv_£t_pc
(
rv
, 
d©a
);

43 
	`rv_£t_ªg
(
rv
, 
ªgno
, 
d©a
);

46 
	}
}

48 
	$rv_ªad_mem
(*
¨gs
, 
size_t
 
addr
, size_à
Àn
, *
vÆ
)

50 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

52 
îr
 = 0;

53 
size_t
 
i
 = 0; i < 
Àn
; i++) {

58 *((
uöt8_t
 *Ë
vÆ
 + 
i
Ë
rv
->
io
.
	`mem_ªad_b
‘v, 
addr
 + i);

61  
îr
;

62 
	}
}

64 
	$rv_wrôe_mem
(*
¨gs
, 
size_t
 
addr
, size_à
Àn
, *
vÆ
)

66 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

68 
size_t
 
i
 = 0; i < 
Àn
; i++)

69 
rv
->
io
.
	`mem_wrôe_b
‘v, 
addr
 + 
i
, *((
uöt8_t
 *Ë
vÆ
 + i));

72 
	}
}

74 
ölöe
 
boﬁ
 
	$rv_is_öãºu±
(
riscv_t
 *
rv
)

76  
	`__©omic_lﬂd_n
(&
rv
->
is_öãºu±ed
, 
__ATOMIC_RELAXED
);

77 
	}
}

79 
gdb_a˘i⁄_t
 
	$rv_c⁄t
(*
¨gs
)

81 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

82 
	`as£π
(
rv
);

83 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

84 
©å
->
cy˛e_≥r_°ï
 = 1;

86 ; !
	`rv_has_hÆãd
(
rv
Ë&& !
	`rv_is_öãºu±
(rv);) {

87 i‡(
	`bªakpoöt_m≠_föd
(
rv
->
bªakpoöt_m≠
, 
	`rv_gë_pc
(rv)))

90 
	`rv_°ï
(
rv
);

94 
	`__©omic_°‹e_n
(&
rv
->
is_öãºu±ed
, 
Ál£
, 
__ATOMIC_RELAXED
);

96  
ACT_RESUME
;

97 
	}
}

99 
gdb_a˘i⁄_t
 
	$rv_°ïi
(*
¨gs
)

101 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

102 
	`as£π
(
rv
);

103 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

104 
©å
->
cy˛e_≥r_°ï
 = 1;

106 
	`rv_°ï
(
rv
);

107  
ACT_RESUME
;

108 
	}
}

110 
boﬁ
 
	$rv_£t_bp
(*
¨gs
, 
size_t
 
addr
, 
bp_ty≥_t
 
ty≥
)

112 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

113 i‡(
ty≥
 !
BP_SOFTWARE
)

114  
Ál£
;

116  
	`bªakpoöt_m≠_ö£π
(
rv
->
bªakpoöt_m≠
, 
addr
);

117 
	}
}

119 
boﬁ
 
	$rv_dñ_bp
(*
¨gs
, 
size_t
 
addr
, 
bp_ty≥_t
 
ty≥
)

121 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

122 i‡(
ty≥
 !
BP_SOFTWARE
)

123  
Ál£
;

126 
	`bªakpoöt_m≠_dñ
(
rv
->
bªakpoöt_m≠
, 
addr
);

127  
åue
;

128 
	}
}

130 
	$rv_⁄_öãºu±
(*
¨gs
)

132 
riscv_t
 *
rv
 = (riscv_à*Ë
¨gs
;

135 
	`__©omic_°‹e_n
(&
rv
->
is_öãºu±ed
, 
åue
, 
__ATOMIC_RELAXED
);

136 
	}
}

138 c⁄° 
èrgë_›s
 
	ggdb°ub_›s
 = {

139 .
ªad_ªg
 = 
rv_ªad_ªg
,

140 .
	gwrôe_ªg
 = 
rv_wrôe_ªg
,

141 .
	gªad_mem
 = 
rv_ªad_mem
,

142 .
	gwrôe_mem
 = 
rv_wrôe_mem
,

143 .
	gc⁄t
 = 
rv_c⁄t
,

144 .
	g°ïi
 = 
rv_°ïi
,

145 .
	g£t_bp
 = 
rv_£t_bp
,

146 .
	gdñ_bp
 = 
rv_dñ_bp
,

147 .
	g⁄_öãºu±
 = 
rv_⁄_öãºu±
,

	@src/io.c

6 
	~<as£π.h
>

7 
	~<°döt.h
>

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 #i‡
HAVE_MMAP


12 
	~<sys/mm™.h
>

13 
	~<uni°d.h
>

16 
	~"io.h
"

18 
u8250_°©e_t
 *
	$u8250_√w
(){

19 
u8250_°©e_t
 *
u¨t
 = 
	`ˇŒoc
(1, (u8250_state_t));

20 
	`as£π
(
u¨t
);

22  
u¨t
;

23 
	}
}

25 
∂ic_t
 *
	$∂ic_√w
(){

26 
∂ic_t
 *
∂ic
 = 
	`ˇŒoc
(1, (plic_t));

27 
	`as£π
(
∂ic
);

29  
∂ic
;

30 
	}
}

32 
uöt8_t
 *
	gd©a_mem‹y_ba£
;

34 
mem‹y_t
 *
	$mem‹y_√w
(
uöt32_t
 
size
)

36 i‡(!
size
)

37  
NULL
;

39 
mem‹y_t
 *
mem
 = 
	`mÆloc
((memory_t));

40 
	`as£π
(
mem
);

41 #i‡
HAVE_MMAP


42 
d©a_mem‹y_ba£
 = 
	`mm≠
(
NULL
, 
size
, 
PROT_READ
 | 
PROT_WRITE
,

43 
MAP_ANONYMOUS
 | 
MAP_PRIVATE
, -1, 0);

44 i‡(
d©a_mem‹y_ba£
 =
MAP_FAILED
) {

45 
	`‰ì
(
mem
);

46  
NULL
;

49 
d©a_mem‹y_ba£
 = 
	`mÆloc
(
size
);

50 i‡(!
d©a_mem‹y_ba£
) {

51 
	`‰ì
(
mem
);

52  
NULL
;

55 
mem
->
mem_ba£
 = 
d©a_mem‹y_ba£
;

56 
mem
->
mem_size
 = 
size
;

57  
mem
;

58 
	}
}

60 
	$mem‹y_dñëe
(
mem‹y_t
 *
mem
)

62 #i‡
HAVE_MMAP


63 
	`munm≠
(
mem
->
mem_ba£
, mem->
mem_size
);

65 
	`‰ì
(
mem
->
mem_ba£
);

67 
	`‰ì
(
mem
);

68 
	}
}

70 
	$mem‹y_ªad
(c⁄° 
mem‹y_t
 *
mem
,

71 
uöt8_t
 *
d°
,

72 
uöt32_t
 
addr
,

73 
uöt32_t
 
size
)

75 
	`mem˝y
(
d°
, 
mem
->
mem_ba£
 + 
addr
, 
size
);

76 
	}
}

78 
uöt32_t
 
	$mem‹y_i„tch
(
uöt32_t
 
addr
)

80  *(c⁄° 
uöt32_t
 *Ë(
d©a_mem‹y_ba£
 + 
addr
);

81 
	}
}

83 
	#MEM_READ_IMPL
(
size
, 
ty≥
) \

84 
ty≥
 
mem‹y_ªad_
##
	`size
(
uöt32_t
 
addr
) \

86  *(
ty≥
 *Ë(
d©a_mem‹y_ba£
 + 
addr
); \

87 }

	)

89 
	$MEM_READ_IMPL
(
w
, 
uöt32_t
)

90 
	$MEM_READ_IMPL
(
s
, 
uöt16_t
)

91 
	$MEM_READ_IMPL
(
b
, 
uöt8_t
)

93 
	#MEM_WRITE_IMPL
(
size
, 
ty≥
) \

94 
mem‹y_wrôe_
##
	`size
(
uöt32_t
 
addr
, c⁄° 
uöt8_t
 *
§c
) \

96 *(
ty≥
 *Ë(
d©a_mem‹y_ba£
 + 
addr
Ë*(c⁄°Åy≥ *Ë
§c
; \

97 
	}

	)
}

99 
	$MEM_WRITE_IMPL
(
w
, 
uöt32_t
)

100 
	$MEM_WRITE_IMPL
(
s
, 
uöt16_t
)

101 
	`MEM_WRITE_IMPL
(
b
, 
uöt8_t
)

	@src/io.h

6 #¥agm®
⁄˚


8 
	~<°döt.h
>

9 
	~<°rög.h
>

10 
	~<°dboﬁ.h
>

14 
	#IRQ_UART
 1

	)

15 
	#IRQ_UART_BIT
 (1 << 
IRQ_UART
)

	)

18 
uöt8_t
 
	mdŒ
, 
	mdlh
;

19 
uöt8_t
 
	ml¸
;

20 
uöt8_t
 
	mõr
;

21 
uöt8_t
 
	mcuºít_öt
, 
	m≥ndög_öts
;

23 
uöt8_t
 
	mm¸
;

25 
	mö_fd
, 
	mout_fd
;

26 
boﬁ
 
	mö_ªady
;

27 } 
	tu8250_°©e_t
;

28 
u8250_upd©e_öãºu±s
(
u8250_°©e_t
 *
u¨t
);

29 
u8250_check_ªady
(
u8250_°©e_t
 *
u¨t
);

31 
uöt32_t
 
u8250_ªad
(
u8250_°©e_t
 *
u¨t
, uöt32_à
addr
);

33 
u8250_wrôe
(
u8250_°©e_t
 *
u¨t
,

34 
uöt32_t
 
addr
,

35 
uöt32_t
 
vÆue
);

38 
u8250_°©e_t
 *
u8250_√w
();

41 
uöt32_t
 
	mmasked
;

42 
uöt32_t
 
	mù
;

43 
uöt32_t
 
	mõ
;

45 
uöt32_t
 
	ma˘ive
;

46 } 
	t∂ic_t
;

49 
∂ic_t
 *
∂ic_√w
();

52 
uöt8_t
 *
	mmem_ba£
;

53 
uöt64_t
 
	mmem_size
;

54 } 
	tmem‹y_t
;

57 
mem‹y_t
 *
mem‹y_√w
(
uöt32_t
 
size
);

60 
mem‹y_dñëe
(
mem‹y_t
 *
m
);

63 
uöt32_t
 
mem‹y_i„tch
(uöt32_à
addr
);

66 
uöt32_t
 
mem‹y_ªad_w
(uöt32_à
addr
);

69 
uöt16_t
 
mem‹y_ªad_s
(
uöt32_t
 
addr
);

72 
uöt8_t
 
mem‹y_ªad_b
(
uöt32_t
 
addr
);

75 
mem‹y_ªad
(c⁄° 
mem‹y_t
 *
m
, 
uöt8_t
 *
d°
, 
uöt32_t
 
addr
, uöt32_à
size
);

78 
ölöe
 
	$mem‹y_wrôe
(
mem‹y_t
 *
m
,

79 
uöt32_t
 
addr
,

80 c⁄° 
uöt8_t
 *
§c
,

81 
uöt32_t
 
size
)

83 
	`mem˝y
(
m
->
mem_ba£
 + 
addr
, 
§c
, 
size
);

84 
	}
}

87 
mem‹y_wrôe_w
(
uöt32_t
 
addr
, c⁄° 
uöt8_t
 *
§c
);

90 
mem‹y_wrôe_s
(
uöt32_t
 
addr
, c⁄° 
uöt8_t
 *
§c
);

93 
mem‹y_wrôe_b
(
uöt32_t
 
addr
, c⁄° 
uöt8_t
 *
§c
);

96 
ölöe
 
	$mem‹y_fûl
(
mem‹y_t
 *
m
,

97 
uöt32_t
 
addr
,

98 
uöt32_t
 
size
,

99 
uöt8_t
 
vÆ
)

101 
	`mem£t
(
m
->
mem_ba£
 + 
addr
, 
vÆ
, 
size
);

102 
	}
}

	@src/jit.c

18 #i‡!
deföed
(
__x86_64__
Ë&& !deföed(
__Ørch64__
)

22 
	~<as£π.h
>

23 
	~<°dboﬁ.h
>

24 
	~<°ddef.h
>

25 
	~<°döt.h
>

26 
	~<°dio.h
>

27 
	~<°dlib.h
>

28 
	~<sys/mm™.h
>

29 
	~<uni°d.h
>

30 #i‡
deföed
(
__APPLE__
)

31 
	~<libkîn/OSCacheC⁄åﬁ.h
>

32 #i‡
deföed
(
__Ørch64__
)

33 
	~<±hªad.h
>

37 
	~"ˇche.h
"

38 
	~"decode.h
"

39 
	~"io.h
"

40 
	~"jô.h
"

41 
	~"riscv.h
"

42 
	~"riscv_¥iv©e.h
"

43 
	~"utûs.h
"

45 
	#JIT_CLS_MASK
 0x07

	)

46 
	#JIT_ALU_OP_MASK
 0xf0

	)

47 
	#JIT_CLS_ALU
 0x04

	)

48 
	#JIT_CLS_ALU64
 0x07

	)

49 
	#JIT_SRC_IMM
 0x00

	)

50 
	#JIT_SRC_REG
 0x08

	)

51 
	#JIT_OP_MUL_IMM
 (
JIT_CLS_ALU
 | 
JIT_SRC_IMM
 | 0x20)

	)

52 
	#JIT_OP_MUL_REG
 (
JIT_CLS_ALU
 | 
JIT_SRC_REG
 | 0x20)

	)

53 
	#JIT_OP_DIV_IMM
 (
JIT_CLS_ALU
 | 
JIT_SRC_IMM
 | 0x30)

	)

54 
	#JIT_OP_DIV_REG
 (
JIT_CLS_ALU
 | 
JIT_SRC_REG
 | 0x30)

	)

55 
	#JIT_OP_MOD_IMM
 (
JIT_CLS_ALU
 | 
JIT_SRC_IMM
 | 0x90)

	)

56 
	#JIT_OP_MOD_REG
 (
JIT_CLS_ALU
 | 
JIT_SRC_REG
 | 0x90)

	)

58 
	#STACK_SIZE
 512

	)

59 
	#MAX_JUMPS
 1024

	)

60 
	#MAX_BLOCKS
 8192

	)

61 
	#IN_JUMP_THRESHOLD
 256

	)

62 #i‡
deföed
(
__x86_64__
)

63 
	#JUMP_LOC
 
jump_loc
 + 2

	)

65 
	#TARGET_PC_EXIT
 -1U

	)

66 
	#TARGET_PC_RETPOLINE
 -3U

	)

67 
	ex64_ªg
 {

68 
	mRAX
,

69 
	mRCX
,

70 
	mRDX
,

71 
	mRBX
,

72 
	mRSP
,

73 
	mRBP
,

74 
	mRIP
 = 5,

75 
	mRSI
,

76 
	mRDI
,

77 
	mR8
,

78 
	mR9
,

79 
	mR10
,

80 
	mR11
,

81 
	mR12
,

82 
	mR13
,

83 
	mR14
,

84 
	mR15
,

87 #ñi‡
deföed
(
__Ørch64__
)

88 
	#JUMP_LOC
 
jump_loc


	)

90 
	#TARGET_PC_EXIT
 ~
	`UINT32_C
(0)

	)

91 
	#TARGET_PC_ENTER
 (~
	`UINT32_C
(0Ë& 0x0101)

	)

93 
	#BAD_OPCODE
 ~
	`UINT32_C
(0)

	)

95 
	ea64_ªg
 {

96 
	mR0
,

97 
	mR1
,

98 
	mR2
,

99 
	mR3
,

100 
	mR4
,

101 
	mR5
,

102 
	mR6
,

103 
	mR7
,

104 
	mR8
,

105 
	mR9
,

106 
	mR10
,

107 
	mR11
,

108 
	mR12
,

109 
	mR13
,

110 
	mR14
,

111 
	mR15
,

112 
	mR16
,

113 
	mR17
,

114 
	mR18
,

115 
	mR19
,

116 
	mR20
,

117 
	mR21
,

118 
	mR22
,

119 
	mR23
,

120 
	mR24
,

121 
	mR25
,

122 
	mR26
,

123 
	mR27
,

124 
	mR28
,

125 
	mR29
,

126 
	mR30
,

127 
	mSP
,

128 
	mRZ
 = 31

133 
	mAS_ADD
 = 0,

134 
	mAS_SUB
 = 2,

135 
	mAS_SUBS
 = 3,

137 
	mLOG_AND
 = 0x00000000U,

138 
	mLOG_ORR
 = 0x20000000U,

139 
	mLOG_ORN
 = 0x20200000U,

140 
	mLOG_EOR
 = 0x40000000U,

142 
	mLS_STRB
 = 0x00000000U,

143 
	mLS_LDRB
 = 0x00400000U,

144 
	mLS_LDRSBW
 = 0x00c00000U,

145 
	mLS_STRH
 = 0x40000000U,

146 
	mLS_LDRH
 = 0x40400000U,

147 
	mLS_LDRSHW
 = 0x40c00000U,

148 
	mLS_STRW
 = 0x80000000U,

149 
	mLS_LDRW
 = 0x80400000U,

150 
	mLS_LDRSW
 = 0x80800000U,

151 
	mLS_STRX
 = 0xc0000000U,

152 
	mLS_LDRX
 = 0xc0400000U,

154 
	mLSP_STPX
 = 0xa9000000U,

155 
	mLSP_LDPX
 = 0xa9400000U,

157 
	mBR_BR
 = 0xd61f0000U,

158 
	mBR_BLR
 = 0xd63f0000U,

159 
	mBR_RET
 = 0xd65f0000U,

161 
	mUBR_B
 = 0x14000000U,

163 
	mBR_Bc⁄d
 = 0x54000000U,

165 
	mDP2_UDIV
 = 0x1ac00800U,

166 
	mDP2_LSLV
 = 0x1ac02000U,

167 
	mDP2_LSRV
 = 0x1ac02400U,

168 
	mDP2_ASRV
 = 0x1ac02800U,

170 
	mDP3_MADD
 = 0x1b000000U,

171 
	mDP3_MSUB
 = 0x1b008000U,

173 
	mMW_MOVN
 = 0x12800000U,

174 
	mMW_MOVZ
 = 0x52800000U,

175 
	mMW_MOVK
 = 0x72800000U,

176 } 
	ta64›code_t
;

178 
	ec⁄dôi⁄
 {

179 
	mCOND_EQ
,

180 
	mCOND_NE
,

181 
	mCOND_HS
,

182 
	mCOND_LO
,

183 
	mCOND_GE
 = 10,

184 
	mCOND_LT
 = 11,

188 
	mãmp_imm_ªg
 = 
R24
,

189 
	mãmp_div_ªg
 = 
R25
,

193 
	e›î™d_size
 {

194 
	mS8
,

195 
	mS16
,

196 
	mS32
,

199 #i‡
deföed
(
__x86_64__
)

207 #i‡
deföed
(
_WIN32
)

208 c⁄° 
	gn⁄vﬁ©ûe_ªg
[] = {
RBP
, 
RBX
, 
RDI
, 
RSI
, 
R13
, 
R14
, 
R15
};

209 c⁄° 
	g∑ømëî_ªg
[] = {
RCX
, 
RDX
, 
R8
, 
R9
};

210 
ho°_ªg
 
	gªgi°î_m≠
[] = {

211 {
RAX
, -1, 0, 0}, {
R10
, -1, 0, 0}, {
RDX
, -1, 0, 0}, {
R8
, -1, 0, 0},

212 {
R9
, -1, 0, 0}, {
R14
, -1, 0, 0}, {
R15
, -1, 0, 0}, {
RDI
, -1, 0, 0},

213 {
RSI
, -1, 0, 0}, {
RBX
, -1, 0, 0}, {
RBP
, -1, 0, 0},

215 
	gãmp_ªg
 = 
RCX
;

217 c⁄° 
	gn⁄vﬁ©ûe_ªg
[] = {
RBP
, 
RBX
, 
R13
, 
R14
, 
R15
};

218 c⁄° 
	g∑ømëî_ªg
[] = {
RDI
, 
RSI
, 
RDX
, 
RCX
, 
R8
, 
R9
};

219 
ho°_ªg
 
	gªgi°î_m≠
[] = {

220 {
RAX
, -1, 0, 0}, {
RBX
, -1, 0, 0}, {
RDX
, -1, 0, 0}, {
R8
, -1, 0, 0},

221 {
R9
, -1, 0, 0}, {
R10
, -1, 0, 0}, {
R11
, -1, 0, 0}, {
R13
, -1, 0, 0},

222 {
R14
, -1, 0, 0}, {
R15
, -1, 0, 0},

224 
	gãmp_ªg
 = 
RCX
;

226 #ñi‡
deföed
(
__Ørch64__
)

230 c⁄° 
	gˇŒì_ªg
[] = {
R19
, 
R20
, 
R21
, 
R22
, 
R23
, 
R24
, 
R25
, 
R26
};

232 c⁄° 
	g∑ømëî_ªg
[] = {
R0
, 
R1
, 
R2
, 
R3
, 
R4
};

233 
	gãmp_ªg
 = 
R8
;

243 
ho°_ªg
 
	gªgi°î_m≠
[] = {

244 {
R5
, -1, 0, 0}, {
R6
, -1, 0, 0}, {
R7
, -1, 0, 0}, {
R9
, -1, 0, 0},

245 {
R11
, -1, 0, 0}, {
R12
, -1, 0, 0}, {
R13
, -1, 0, 0}, {
R14
, -1, 0, 0},

246 {
R15
, -1, 0, 0}, {
R16
, -1, 0, 0}, {
R17
, -1, 0, 0}, {
R18
, -1, 0, 0},

247 {
R26
, -1, 0, 0},

251 c⁄° 
	gn_ho°_ªgs
 =

252 
ARRAYS_SIZE
(
ªgi°î_m≠
);

254 
ölöe
 
	$£t_dúty
(
ªg_idx
, 
boﬁ
 
is_dúty
)

256 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

258 i‡(
ªgi°î_m≠
[
i
].
ªg_idx
 !=Ñeg_idx)

261 
ªgi°î_m≠
[
i
].
dúty
 = 
is_dúty
;

264 
	}
}

266 
ölöe
 
	$off£t_m≠_ö£π
(
jô_°©e
 *
°©e
, 
öt32_t
 
èrgë_pc
)

268 
off£t_m≠
 *
m≠_íåy
 = &
°©e
->off£t_m≠[°©e->
n_blocks
++];

269 
	`as£π
(
°©e
->
n_blocks
 < 
MAX_BLOCKS
);

270 
m≠_íåy
->
pc
 = 
èrgë_pc
;

271 
m≠_íåy
->
off£t
 = 
°©e
->offset;

272 
	}
}

274 #i‡!
deföed
(
__APPLE__
)

275 
	#sys_iˇche_övÆid©e
(
addr
, 
size
) \

276 
	`__buûtö___˛ór_ˇche
((*Ë(
addr
), (*Ë◊ddrË+ (
size
));

	)

279 
boﬁ
 
	gshould_Êush
 = 
Ál£
;

280 
	$emô_byãs
(
jô_°©e
 *
°©e
, *
d©a
, 
uöt32_t
 
Àn
)

282 i‡(
	`u∆ikñy
((
°©e
->
off£t
 + 
Àn
Ë> sèã->
size
)) {

283 
should_Êush
 = 
åue
;

286 #i‡
	`deföed
(
__APPLE__
Ë&& deföed(
__Ørch64__
)

287 
	`±hªad_jô_wrôe_¥Ÿe˘_≈
(
Ál£
);

289 
	`mem˝y
(
°©e
->
buf
 + sèã->
off£t
, 
d©a
, 
Àn
);

290 
	`sys_iˇche_övÆid©e
(
°©e
->
buf
 + sèã->
off£t
, 
Àn
);

291 #i‡
	`deföed
(
__APPLE__
Ë&& deföed(
__Ørch64__
)

292 
	`±hªad_jô_wrôe_¥Ÿe˘_≈
(
åue
);

294 
°©e
->
off£t
 +
Àn
;

295 
	}
}

297 #i‡
deföed
(
__x86_64__
)

298 
ölöe
 
	$emô1
(
jô_°©e
 *
°©e
, 
uöt8_t
 
x
)

300 
	`emô_byãs
(
°©e
, &
x
, (x));

301 
	}
}

303 
ölöe
 
	$emô4
(
jô_°©e
 *
°©e
, 
uöt32_t
 
x
)

305 
	`emô_byãs
(
°©e
, &
x
, (x));

306 
	}
}

308 
ölöe
 
	$emô8
(
jô_°©e
 *
°©e
, 
uöt64_t
 
x
)

310 
	`emô_byãs
(
°©e
, &
x
, (x));

311 
	}
}

313 
ölöe
 
	$emô_modrm
(
jô_°©e
 *
°©e
, 
mod
, 
r
, 
m
)

315 
	`as£π
(!(
mod
 & ~0xc0));

316 
	`emô1
(
°©e
, (
mod
 & 0xc0Ë| ((
r
 & 7Ë<< 3Ë| (
m
 & 7));

317 
	}
}

319 
ölöe
 
	$emô_modrm_ªg2ªg
(
jô_°©e
 *
°©e
, 
r
, 
m
)

321 
	`emô_modrm
(
°©e
, 0xc0, 
r
, 
m
);

322 
	}
}

324 
ölöe
 
	$emô_modrm_™d_di•œ˚mít
(
jô_°©e
 *
°©e
,

325 
r
,

326 
m
,

327 
öt32_t
 
d
)

329 i‡(
d
 =0 && (
m
 & 7Ë!
RBP
) {

330 
	`emô_modrm
(
°©e
, 0x00, 
r
, 
m
);

331 } i‡((
öt8_t
Ë
d
 == d) {

332 
	`emô_modrm
(
°©e
, 0x40, 
r
, 
m
);

333 
	`emô1
(
°©e
, 
d
);

335 
	`emô_modrm
(
°©e
, 0x80, 
r
, 
m
);

336 
	`emô4
(
°©e
, 
d
);

338 
	}
}

340 
ölöe
 
	$emô_ªx
(
jô_°©e
 *
°©e
, 
w
, 
r
, 
x
, 
b
)

342 
	`as£π
(!(
w
 & ~1));

343 
	`as£π
(!(
r
 & ~1));

344 
	`as£π
(!(
x
 & ~1));

345 
	`as£π
(!(
b
 & ~1));

346 
	`emô1
(
°©e
, 0x40 | (
w
 << 3Ë| (
r
 << 2Ë| (
x
 << 1Ë| 
b
);

347 
	}
}

352 
ölöe
 
	$emô_basic_ªx
(
jô_°©e
 *
°©e
,

353 
w
,

354 
§c
,

355 
d°
)

357 i‡(
w
 || (
§c
 & 8Ë|| (
d°
 & 8))

358 
	`emô_ªx
(
°©e
, 
w
, !!(
§c
 & 8), 0, !!(
d°
 & 8));

359 
	}
}

361 
ölöe
 
	$emô_push
(
jô_°©e
 *
°©e
, 
r
)

363 i‡(
r
 & 8)

364 
	`emô_basic_ªx
(
°©e
, 0, 0, 
r
);

365 
	`emô1
(
°©e
, 0x50 | (
r
 & 7));

366 
	}
}

368 
ölöe
 
	$emô_p›
(
jô_°©e
 *
°©e
, 
r
)

370 i‡(
r
 & 8)

371 
	`emô_basic_ªx
(
°©e
, 0, 0, 
r
);

372 
	`emô1
(
°©e
, 0x58 | (
r
 & 7));

373 
	}
}

375 
ölöe
 
	$emô_jump_èrgë_addªss
(
jô_°©e
 *
°©e
,

376 
öt32_t
 
èrgë_pc
)

378 
jump
 *jum∞&
°©e
->
jumps
[°©e->
n_jumps
++];

379 
	`as£π
(
°©e
->
n_jumps
 < 
MAX_JUMPS
);

380 
jump
->
off£t_loc
 = 
°©e
->
off£t
;

381 
jump
->
èrgë_pc
 =Åarget_pc;

382 
	`emô4
(
°©e
, 0);

383 
	}
}

384 #ñi‡
deföed
(
__Ørch64__
)

385 
ölöe
 
emô_lﬂd_imm
(
jô_°©e
 *
°©e
, 
d°
, 
öt64_t
 
imm
);

387 
	$emô_a64
(
jô_°©e
 *
°©e
, 
uöt32_t
 
ö¢
)

389 
	`as£π
(
ö¢
 !
BAD_OPCODE
);

390 
	`emô_byãs
(
°©e
, &
ö¢
, 4);

391 
	}
}

394 
ölöe
 
uöt32_t
 
	$sz
(
boﬁ
 
is64
)

396  (
is64
 ? 
	`UINT32_C
(1) : UINT32_C(0)) << 31;

397 
	}
}

405 
	$emô_addsub_imm
(
jô_°©e
 *
°©e
,

406 
boﬁ
 
is64
,

407 
a64›code_t
 
›
,

408 
rd
,

409 
∫
,

410 
uöt32_t
 
imm12
)

412 c⁄° 
uöt32_t
 
imm_›_ba£
 = 0x11000000;

413 
	`emô_a64
(
°©e
, 
	`sz
(
is64
Ë| (
›
 << 29Ë| 
imm_›_ba£
 | (0 << 22) |

414 (
imm12
 << 10Ë| (
∫
 << 5Ë| 
rd
);

415 
	`£t_dúty
(
rd
, 
åue
);

416 
	}
}

419 
	$emô_logiˇl_ªgi°î
(
jô_°©e
 *
°©e
,

420 
boﬁ
 
is64
,

421 
a64›code_t
 
›
,

422 
rd
,

423 
∫
,

424 
rm
)

426 
	`emô_a64
(
°©e
, 
	`sz
(
is64
Ë| 
›
 | (1 << 27Ë| (1 << 25Ë| (
rm
 << 16) |

427 (
∫
 << 5Ë| 
rd
);

428 
	`£t_dúty
(
rd
, 
åue
);

429 
	}
}

432 
ölöe
 
	$emô_addsub_ªgi°î
(
jô_°©e
 *
°©e
,

433 
boﬁ
 
is64
,

434 
a64›code_t
 
›
,

435 
rd
,

436 
∫
,

437 
rm
)

439 c⁄° 
uöt32_t
 
ªg_›_ba£
 = 0x0b000000;

440 
	`emô_a64
(
°©e
,

441 
	`sz
(
is64
Ë| (
›
 << 29Ë| 
ªg_›_ba£
 | (
rm
 << 16Ë| (
∫
 << 5Ë| 
rd
);

442 
	`£t_dúty
(
rd
, 
åue
);

443 
	}
}

446 
ölöe
 
	$emô_movewide_imm
(
jô_°©e
 *
°©e
,

447 
boﬁ
 
is64
,

448 
rd
,

449 
uöt64_t
 
imm
)

456 
cou¡0000
 = 
is64
 ? 0 : 2;

457 
cou¡ffff
 = 0;

458 
i
 = 0; i < (
is64
 ? 64 : 32); i += 16) {

459 
uöt64_t
 
block
 = (
imm
 >> 
i
) & 0xffff;

460 i‡(
block
 == 0xffff) {

461 ++
cou¡ffff
;

462 } i‡(
block
 == 0) {

463 ++
cou¡0000
;

470 
boﬁ
 
övît
 = (
cou¡0000
 < 
cou¡ffff
);

471 
a64›code_t
 
›
 = 
övît
 ? 
MW_MOVN
 : 
MW_MOVZ
;

472 
uöt64_t
 
skù_∑âîn
 = 
övît
 ? 0xffff : 0;

473 
i
 = 0; i < (
is64
 ? 4 : 2); ++i) {

474 
uöt64_t
 
imm16
 = (
imm
 >> (
i
 * 16)) & 0xffff;

475 i‡(
imm16
 !
skù_∑âîn
) {

476 i‡(
övît
) {

477 
imm16
 = ~imm16;

478 
imm16
 &= 0xffff;

480 
	`emô_a64
(
°©e
, 
	`sz
(
is64
Ë| 
›
 | (
i
 << 21Ë| (
imm16
 << 5Ë| 
rd
);

481 
›
 = 
MW_MOVK
;

482 
övît
 = 
Ál£
;

487 i‡(
›
 !
MW_MOVK
)

488 
	`emô_a64
(
°©e
, 
	`sz
(
is64
Ë| 
›
 | (0 << 21Ë| (0 << 5Ë| 
rd
);

490 
	`£t_dúty
(
rd
, 
åue
);

491 
	}
}

494 
	$emô_lﬂd°‹e_imm
(
jô_°©e
 *
°©e
,

495 
a64›code_t
 
›
,

496 
π
,

497 
∫
,

498 
öt16_t
 
imm9
)

500 c⁄° 
uöt32_t
 
imm_›_ba£
 = 0x38000000U;

501 
	`as£π
(
imm9
 >= -256 && imm9 < 256);

502 
imm9
 &= 0x1ff;

503 
	`emô_a64
(
°©e
, 
imm_›_ba£
 | 
›
 | (
imm9
 << 12Ë| (
∫
 << 5Ë| 
π
);

504 
	}
}

507 
	$emô_lﬂd°‹ïaú_imm
(
jô_°©e
 *
°©e
,

508 
a64›code_t
 
›
,

509 
π
,

510 
π2
,

511 
∫
,

512 
öt32_t
 
imm7
)

514 
öt32_t
 
imm_div
 = ((
›
 =
LSP_STPX
Ë|| (› =
LSP_LDPX
)) ? 8 : 4;

515 
	`as£π
(
imm7
 % 
imm_div
 == 0);

516 
imm7
 /
imm_div
;

517 
	`emô_a64
(
°©e
, 
›
 | (
imm7
 << 15Ë| (
π2
 << 10Ë| (
∫
 << 5Ë| 
π
);

518 
	}
}

521 
	$emô_unc⁄d_bønch_ªg
(
jô_°©e
 *
°©e
,

522 
a64›code_t
 
›
,

523 
∫
)

525 
	`emô_a64
(
°©e
, 
›
 | (
∫
 << 5));

526 
	}
}

529 
	$emô_d©≠roc_2sour˚
(
jô_°©e
 *
°©e
,

530 
boﬁ
 
is64
,

531 
a64›code_t
 
›
,

532 
rd
,

533 
∫
,

534 
rm
)

536 
	`emô_a64
(
°©e
, 
	`sz
(
is64
Ë| 
›
 | (
rm
 << 16Ë| (
∫
 << 5Ë| 
rd
);

537 
	`£t_dúty
(
rd
, 
åue
);

538 
	}
}

542 
	$emô_d©≠roc_3sour˚
(
jô_°©e
 *
°©e
,

543 
boﬁ
 
is64
,

544 
a64›code_t
 
›
,

545 
rd
,

546 
∫
,

547 
rm
,

548 
ø
)

550 
	`emô_a64
(
°©e
, 
	`sz
(
is64
Ë| 
›
 | (
rm
 << 16Ë| (
ø
 << 10Ë| (
∫
 << 5Ë| 
rd
);

551 
	`£t_dúty
(
rd
, 
åue
);

552 
	}
}

554 
	$upd©e_bønch_imm
(
jô_°©e
 *
°©e
,

555 
uöt32_t
 
off£t
,

556 
öt32_t
 
imm
)

558 
	`as£π
((
imm
 & 3) == 0);

559 
uöt32_t
 
ö¢
;

560 
imm
 >>= 2;

561 
	`mem˝y
(&
ö¢
, 
°©e
->
buf
 + 
off£t
, (
uöt32_t
));

562 i‡((
ö¢
 & 0xfe000000U) == 0x54000000U

563 || (
ö¢
 & 0x7e000000U) ==

565 
	`as£π
((
imm
 >> 19Ë=
	`INT64_C
(-1) || (imm >> 19) == 0);

566 
ö¢
 |(
imm
 & 0x7ffff) << 5;

567 } i‡((
ö¢
 & 0x7c000000U) == 0x14000000U) {

569 
	`as£π
((
imm
 >> 26Ë=
	`INT64_C
(-1) || (imm >> 26) == 0);

570 
ö¢
 |(
imm
 & 0x03ffffffU) << 0;

572 
	`as£π
(
Ál£
);

573 
ö¢
 = 
BAD_OPCODE
;

575 #i‡
	`deföed
(
__APPLE__
Ë&& deföed(
__Ørch64__
)

576 
	`±hªad_jô_wrôe_¥Ÿe˘_≈
(
Ál£
);

578 
	`mem˝y
(
°©e
->
buf
 + 
off£t
, &
ö¢
, (
uöt32_t
));

579 #i‡
	`deföed
(
__APPLE__
Ë&& deföed(
__Ørch64__
)

580 
	`±hªad_jô_wrôe_¥Ÿe˘_≈
(
åue
);

582 
	}
}

585 
ölöe
 
	$emô_jump_èrgë_off£t
(
jô_°©e
 *
°©e
,

586 
uöt32_t
 
jump_loc
,

587 
uöt32_t
 
jump_°©e_off£t
)

589 
jump
 *jum∞&
°©e
->
jumps
[°©e->
n_jumps
++];

590 
	`as£π
(
°©e
->
n_jumps
 < 
MAX_JUMPS
);

591 
jump
->
off£t_loc
 = 
jump_loc
;

592 
jump
->
èrgë_off£t
 = 
jump_°©e_off£t
;

593 
	}
}

595 
ölöe
 
	$emô_Æu32
(
jô_°©e
 *
°©e
, 
›
, 
§c
, 
d°
)

597 #i‡
	`deföed
(
__x86_64__
)

602 i‡(
§c
 & 8 || 
d°
 & 8)

603 
	`emô_basic_ªx
(
°©e
, 0, 
§c
, 
d°
);

604 
	`emô1
(
°©e
, 
›
);

605 
	`emô_modrm_ªg2ªg
(
°©e
, 
§c
, 
d°
);

607 
	`£t_dúty
(
d°
, 
åue
);

608 #ñi‡
	`deföed
(
__Ørch64__
)

609 
›
) {

611 
	`emô_addsub_ªgi°î
(
°©e
, 
Ál£
, 
AS_ADD
, 
d°
, d°, 
§c
);

614 
	`emô_addsub_ªgi°î
(
°©e
, 
Ál£
, 
AS_SUB
, 
d°
, d°, 
§c
);

617 
	`emô_logiˇl_ªgi°î
(
°©e
, 
Ál£
, 
LOG_EOR
, 
d°
, d°, 
§c
);

620 
	`emô_logiˇl_ªgi°î
(
°©e
, 
Ál£
, 
LOG_ORR
, 
d°
, d°, 
§c
);

623 
	`emô_logiˇl_ªgi°î
(
°©e
, 
Ál£
, 
LOG_AND
, 
d°
, d°, 
§c
);

626 i‡(
§c
 == 4)

627 
	`emô_d©≠roc_2sour˚
(
°©e
, 
Ál£
, 
DP2_LSLV
, 
d°
, d°, 
ãmp_ªg
);

628 i‡(
§c
 == 5)

629 
	`emô_d©≠roc_2sour˚
(
°©e
, 
Ál£
, 
DP2_LSRV
, 
d°
, d°, 
ãmp_ªg
);

630 i‡(
§c
 == 7)

631 
	`emô_d©≠roc_2sour˚
(
°©e
, 
Ál£
, 
DP2_ASRV
, 
d°
, d°, 
ãmp_ªg
);

634 
__UNREACHABLE
;

638 
	}
}

640 
ölöe
 
	$emô_Æu32_imm32
(
jô_°©e
 *
°©e
,

641 
›
 
UNUSED
,

642 
§c
,

643 
d°
,

644 
öt32_t
 
imm
)

646 #i‡
	`deföed
(
__x86_64__
)

648 
	`emô_Æu32
(
°©e
, 
›
, 
§c
, 
d°
);

649 
	`emô4
(
°©e
, 
imm
);

650 #ñi‡
	`deföed
(
__Ørch64__
)

651 
§c
) {

653 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

654 
	`emô_addsub_ªgi°î
(
°©e
, 
Ál£
, 
AS_ADD
, 
d°
, d°, 
R10
);

657 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

658 
	`emô_logiˇl_ªgi°î
(
°©e
, 
Ál£
, 
LOG_ORR
, 
d°
, d°, 
R10
);

661 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

662 
	`emô_logiˇl_ªgi°î
(
°©e
, 
Ál£
, 
LOG_AND
, 
d°
, d°, 
R10
);

665 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

666 
	`emô_logiˇl_ªgi°î
(
°©e
, 
Ál£
, 
LOG_EOR
, 
d°
, d°, 
R10
);

669 
__UNREACHABLE
;

673 
	}
}

675 
ölöe
 
	$emô_Æu32_imm8
(
jô_°©e
 *
°©e
,

676 
›
 
UNUSED
,

677 
§c
,

678 
d°
,

679 
öt8_t
 
imm
)

681 #i‡
	`deföed
(
__x86_64__
)

683 
	`emô_Æu32
(
°©e
, 
›
, 
§c
, 
d°
);

684 
	`emô1
(
°©e
, 
imm
);

685 #ñi‡
	`deföed
(
__Ørch64__
)

686 
§c
) {

688 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

689 
	`emô_d©≠roc_2sour˚
(
°©e
, 
Ál£
, 
DP2_LSLV
, 
d°
, d°, 
R10
);

692 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

693 
	`emô_d©≠roc_2sour˚
(
°©e
, 
Ál£
, 
DP2_LSRV
, 
d°
, d°, 
R10
);

696 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

697 
	`emô_d©≠roc_2sour˚
(
°©e
, 
Ál£
, 
DP2_ASRV
, 
d°
, d°, 
R10
);

700 
__UNREACHABLE
;

704 
	}
}

706 
ölöe
 
	$emô_Æu64
(
jô_°©e
 *
°©e
, 
›
, 
§c
, 
d°
)

708 #i‡
	`deföed
(
__x86_64__
)

713 
	`emô_basic_ªx
(
°©e
, 1, 
§c
, 
d°
);

714 
	`emô1
(
°©e
, 
›
);

715 
	`emô_modrm_ªg2ªg
(
°©e
, 
§c
, 
d°
);

717 
	`£t_dúty
(
d°
, 
åue
);

718 #ñi‡
	`deföed
(
__Ørch64__
)

719 i‡(
›
 == 0x01)

720 
	`emô_addsub_ªgi°î
(
°©e
, 
åue
, 
AS_ADD
, 
d°
, d°, 
§c
);

722 
	}
}

724 
ölöe
 
	$emô_Æu64_imm8
(
jô_°©e
 *
°©e
,

725 
›
,

726 
§c
 
UNUSED
,

727 
d°
,

728 
öt8_t
 
imm
)

730 #i‡
	`deföed
(
__x86_64__
)

732 
	`emô_Æu64
(
°©e
, 
›
, 
§c
, 
d°
);

733 
	`emô1
(
°©e
, 
imm
);

734 #ñi‡
	`deföed
(
__Ørch64__
)

735 i‡(
›
 == 0xc1) {

736 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

737 
	`emô_d©≠roc_2sour˚
(
°©e
, 
åue
, 
DP2_LSRV
, 
d°
, d°, 
R10
);

740 
	}
}

743 
ölöe
 
	$emô_mov
(
jô_°©e
 *
°©e
, 
§c
, 
d°
)

745 #i‡
	`deföed
(
__x86_64__
)

746 
	`emô_Æu64
(
°©e
, 0x89, 
§c
, 
d°
);

747 #ñi‡
	`deföed
(
__Ørch64__
)

748 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 0);

749 
	`emô_addsub_ªgi°î
(
°©e
, 
Ál£
, 
AS_ADD
, 
d°
, 
§c
, 
R10
);

751 
	}
}

754 #i‡
deföed
(
__x86_64__
)

756 
ölöe
 
	$emô_Æu64_imm32
(
jô_°©e
 *
°©e
,

757 
›
,

758 
§c
,

759 
d°
,

760 
öt32_t
 
imm
)

762 
	`emô_Æu64
(
°©e
, 
›
, 
§c
, 
d°
);

763 
	`emô4
(
°©e
, 
imm
);

764 
	}
}

767 
ölöe
 
	$emô_cmp_imm32
(
jô_°©e
 *
°©e
, 
d°
, 
öt32_t
 
imm
)

769 #i‡
	`deföed
(
__x86_64__
)

770 
	`emô_Æu64_imm32
(
°©e
, 0x81, 7, 
d°
, 
imm
);

771 #ñi‡
	`deföed
(
__Ørch64__
)

772 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 
imm
);

773 
	`emô_addsub_ªgi°î
(
°©e
, 
Ál£
, 
AS_SUBS
, 
RZ
, 
d°
, 
R10
);

775 
	}
}

777 
ölöe
 
	$emô_cmp32
(
jô_°©e
 *
°©e
, 
§c
, 
d°
)

779 #i‡
	`deföed
(
__x86_64__
)

780 
	`emô_Æu32
(
°©e
, 0x39, 
§c
, 
d°
);

781 #ñi‡
	`deföed
(
__Ørch64__
)

782 
	`emô_addsub_ªgi°î
(
°©e
, 
Ál£
, 
AS_SUBS
, 
RZ
, 
d°
, 
§c
);

784 
	}
}

786 
ölöe
 
	$emô_jcc_off£t
(
jô_°©e
 *
°©e
, 
code
)

788 #i‡
	`deföed
(
__x86_64__
)

789 
	`emô1
(
°©e
, 0x0f);

790 
	`emô1
(
°©e
, 
code
);

791 
	`emô4
(
°©e
, 0);

792 #ñi‡
	`deföed
(
__Ørch64__
)

793 
code
) {

795 
code
 = 
COND_EQ
;

798 
code
 = 
COND_NE
;

801 
code
 = 
COND_LT
;

804 
code
 = 
COND_GE
;

807 
code
 = 
COND_LO
;

810 
code
 = 
COND_HS
;

813 
__UNREACHABLE
;

816 
	`emô_a64
(
°©e
, 
BR_Bc⁄d
 | (0 << 5Ë| 
code
);

818 
	}
}

826 
ölöe
 
	$emô_lﬂd
(
jô_°©e
 *
°©e
,

827 
›î™d_size
 
size
,

828 
§c
,

829 
d°
,

830 
öt32_t
 
off£t
)

832 #i‡
	`deföed
(
__x86_64__
)

833 i‡(
§c
 & 8 || 
d°
 & 8)

834 
	`emô_basic_ªx
(
°©e
, 0, 
d°
, 
§c
);

835 i‡(
size
 =
S8
 || sizê=
S16
) {

837 
	`emô1
(
°©e
, 0x0f);

838 
	`emô1
(
°©e
, 
size
 =
S8
 ? 0xb6 : 0xb7);

839 } i‡(
size
 =
S32
) {

841 
	`emô1
(
°©e
, 0x8b);

843 
__UNREACHABLE
;

845 
	`emô_modrm_™d_di•œ˚mít
(
°©e
, 
d°
, 
§c
, 
off£t
);

846 #ñi‡
	`deföed
(
__Ørch64__
)

847 
size
) {

848 
S8
:

849 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_LDRB
, 
d°
, 
§c
, 
off£t
);

851 
S16
:

852 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_LDRH
, 
d°
, 
§c
, 
off£t
);

854 
S32
:

855 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_LDRW
, 
d°
, 
§c
, 
off£t
);

858 
__UNREACHABLE
;

863 
	`£t_dúty
(
d°
, !
off£t
);

864 
	}
}

866 
ölöe
 
	$emô_lﬂd_£xt
(
jô_°©e
 *
°©e
,

867 
›î™d_size
 
size
,

868 
§c
,

869 
d°
,

870 
öt32_t
 
off£t
)

872 #i‡
	`deföed
(
__x86_64__
)

873 i‡(
size
 =
S8
 || sizê=
S16
) {

874 i‡(
§c
 & 8 || 
d°
 & 8)

875 
	`emô_basic_ªx
(
°©e
, 0, 
d°
, 
§c
);

877 
	`emô1
(
°©e
, 0x0f);

878 
	`emô1
(
°©e
, 
size
 =
S8
 ? 0xbe : 0xbf);

879 } i‡(
size
 =
S32
) {

880 
	`emô_basic_ªx
(
°©e
, 1, 
d°
, 
§c
);

881 
	`emô1
(
°©e
, 0x63);

884 
	`emô_modrm_™d_di•œ˚mít
(
°©e
, 
d°
, 
§c
, 
off£t
);

885 #ñi‡
	`deföed
(
__Ørch64__
)

886 
size
) {

887 
S8
:

888 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_LDRSBW
, 
d°
, 
§c
, 
off£t
);

890 
S16
:

891 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_LDRSHW
, 
d°
, 
§c
, 
off£t
);

893 
S32
:

894 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_LDRSW
, 
d°
, 
§c
, 
off£t
);

897 
__UNREACHABLE
;

902 
	`£t_dúty
(
d°
, !
off£t
);

903 
	}
}

906 
ölöe
 
	$emô_lﬂd_imm
(
jô_°©e
 *
°©e
, 
d°
, 
öt64_t
 
imm
)

908 #i‡
	`deföed
(
__x86_64__
)

909 i‡((
öt32_t
Ë
imm
 == imm)

910 
	`emô_Æu64_imm32
(
°©e
, 0xc7, 0, 
d°
, 
imm
);

913 
	`emô_basic_ªx
(
°©e
, 1, 0, 
d°
);

914 
	`emô1
(
°©e
, 0xb8 | (
d°
 & 7));

915 
	`emô8
(
°©e
, 
imm
);

918 
	`£t_dúty
(
d°
, 
åue
);

919 #ñi‡
	`deföed
(
__Ørch64__
)

920 i‡((
öt32_t
Ë
imm
 == imm)

921 
	`emô_movewide_imm
(
°©e
, 
Ál£
, 
d°
, 
imm
);

923 
	`emô_movewide_imm
(
°©e
, 
åue
, 
d°
, 
imm
);

925 
	}
}

933 
ölöe
 
	$emô_°‹e
(
jô_°©e
 *
°©e
,

934 
›î™d_size
 
size
,

935 
§c
,

936 
d°
,

937 
öt32_t
 
off£t
)

939 #i‡
	`deföed
(
__x86_64__
)

940 i‡(
size
 =
S16
)

941 
	`emô1
(
°©e
, 0x66);

942 i‡(
§c
 & 8 || 
d°
 & 8 || 
size
 =
S8
)

943 
	`emô_ªx
(
°©e
, 0, !!(
§c
 & 8), 0, !!(
d°
 & 8));

944 
	`emô1
(
°©e
, 
size
 =
S8
 ? 0x88 : 0x89);

945 
	`emô_modrm_™d_di•œ˚mít
(
°©e
, 
§c
, 
d°
, 
off£t
);

946 #ñi‡
	`deföed
(
__Ørch64__
)

947 
size
) {

948 
S8
:

949 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_STRB
, 
§c
, 
d°
, 
off£t
);

951 
S16
:

952 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_STRH
, 
§c
, 
d°
, 
off£t
);

954 
S32
:

955 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_STRW
, 
§c
, 
d°
, 
off£t
);

958 
__UNREACHABLE
;

963 i‡(
off£t
)

964 
	`£t_dúty
(
§c
, 
Ál£
);

965 
	}
}

967 
ölöe
 
	$emô_jmp
(
jô_°©e
 *
°©e
, 
uöt32_t
 
èrgë_pc
)

969 #i‡
	`deföed
(
__x86_64__
)

970 
	`emô1
(
°©e
, 0xe9);

971 
	`emô_jump_èrgë_addªss
(
°©e
, 
èrgë_pc
);

972 #ñi‡
	`deföed
(
__Ørch64__
)

973 
jump
 *jum∞&
°©e
->
jumps
[°©e->
n_jumps
++];

974 
	`as£π
(
°©e
->
n_jumps
 < 
MAX_JUMPS
);

975 
jump
->
off£t_loc
 = 
°©e
->
off£t
;

976 
jump
->
èrgë_pc
 =Åarget_pc;

977 
	`emô_a64
(
°©e
, 
UBR_B
);

979 
	}
}

981 
ölöe
 
ßve_ªg
(
jô_°©e
 *, );

982 
ölöe
 
unm≠_vm_ªg
();

984 
ölöe
 
	$emô_ˇŒ
(
jô_°©e
 *
°©e
, 
öçå_t
 
èrgë
)

986 #i‡
	`deföed
(
__x86_64__
)

987 
	`emô_lﬂd_imm
(
°©e
, 
RAX
, 
èrgë
);

989 
	`emô1
(
°©e
, 0xff);

991 
	`emô1
(
°©e
, 0xd0);

992 #ñi‡
	`deföed
(
__Ørch64__
)

993 
uöt32_t
 
°ack_movemít
 = 
	`Æign_up
(8, 16);

994 
	`emô_addsub_imm
(
°©e
, 
åue
, 
AS_SUB
, 
SP
, SP, 
°ack_movemít
);

995 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_STRX
, 
R30
, 
SP
, 0);

997 
	`emô_movewide_imm
(
°©e
, 
åue
, 
ãmp_imm_ªg
, 
èrgë
);

998 
	`emô_unc⁄d_bønch_ªg
(
°©e
, 
BR_BLR
, 
ãmp_imm_ªg
);

1000 
	`ßve_ªg
(
°©e
, 0);

1001 
	`unm≠_vm_ªg
(0);

1002 
	`emô_logiˇl_ªgi°î
(
°©e
, 
åue
, 
LOG_ORR
, 
R5
, 
RZ
, 
R0
);

1004 
	`emô_lﬂd°‹e_imm
(
°©e
, 
LS_LDRX
, 
R30
, 
SP
, 0);

1005 
	`emô_addsub_imm
(
°©e
, 
åue
, 
AS_ADD
, 
SP
, SP, 
°ack_movemít
);

1007 
	}
}

1009 
ölöe
 
	$emô_exô
(
jô_°©e
 *
°©e
)

1011 #i‡
	`deföed
(
__x86_64__
)

1012 
	`emô1
(
°©e
, 0xe9);

1013 
	`emô_jump_èrgë_off£t
(
°©e
, sèã->
off£t
, sèã->
exô_loc
);

1014 
	`emô4
(
°©e
, 0);

1015 #ñi‡
	`deföed
(
__Ørch64__
)

1016 
	`emô_jmp
(
°©e
, 
TARGET_PC_EXIT
);

1018 
	}
}

1020 #i‡
RV32_HAS
(
EXT_M
)

1021 #i‡
deföed
(
__x86_64__
)

1022 
ölöe
 
	$emô_c⁄dôi⁄Æ_move
(
jô_°©e
 *
°©e
,

1023 
§c
,

1024 
d°
)

1026 
	`emô1
(
°©e
, 0x48);

1027 
	`emô1
(
°©e
, 0x0f);

1028 
	`emô1
(
°©e
, 0x44);

1029 
	`emô_modrm_ªg2ªg
(
°©e
, 
d°
, 
§c
);

1030 
	}
}

1031 #ñi‡
deföed
(
__Ørch64__
)

1032 
ölöe
 
	$emô_c⁄dôi⁄Æ_move
(
jô_°©e
 *
°©e
,

1033 
rd
,

1034 
∫
,

1035 
rm
,

1036 
c⁄d
)

1038 
	`emô_a64
(
°©e
, 0x1a800000 | (
rm
 << 16Ë| (
c⁄d
 << 12Ë| (
∫
 << 5Ë| 
rd
);

1039 
	`£t_dúty
(
rd
, 
åue
);

1040 
	}
}

1042 
	$divmod
(
jô_°©e
 *
°©e
,

1043 
uöt8_t
 
›code
,

1044 
rd
,

1045 
∫
,

1046 
rm
,

1047 
boﬁ
 
sign
)

1049 
boﬁ
 
mod
 = (
›code
 & 
JIT_ALU_OP_MASK
Ë=(
JIT_OP_MOD_IMM
 & JIT_ALU_OP_MASK);

1050 
boﬁ
 
is64
 = (
›code
 & 
JIT_CLS_MASK
Ë=
JIT_CLS_ALU64
;

1051 
div_de°
 = 
mod
 ? 
ãmp_div_ªg
 : 
rd
;

1053 i‡(
sign
)

1054 
	`emô_cmp_imm32
(
°©e
, 
rd
, 0x80000000);

1056 
	`emô_d©≠roc_2sour˚
(
°©e
, 
is64
, 
DP2_UDIV
, 
div_de°
, 
∫
, 
rm
);

1057 i‡(
mod
)

1058 
	`emô_d©≠roc_3sour˚
(
°©e
, 
is64
, 
DP3_MSUB
, 
rd
, 
rm
, 
div_de°
, 
∫
);

1060 i‡(
sign
) {

1062 
uöt32_t
 
jump_loc
 = 
°©e
->
off£t
;

1063 
	`emô_jcc_off£t
(
°©e
, 0x85);

1064 
	`emô_cmp_imm32
(
°©e
, 
rm
, -1);

1065 i‡(
mod
)

1066 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 0);

1068 
	`emô_lﬂd_imm
(
°©e
, 
R10
, 0x80000000);

1069 
	`emô_c⁄dôi⁄Æ_move
(
°©e
, 
rd
, 
R10
,Ñd, 
COND_EQ
);

1070 
	`emô_jump_èrgë_off£t
(
°©e
, 
JUMP_LOC
, sèã->
off£t
);

1072 i‡(!
mod
) {

1074 
	`emô_cmp_imm32
(
°©e
, 
rm
, 0);

1075 
	`emô_lﬂd_imm
(
°©e
, 
ãmp_ªg
, -1);

1076 
	`emô_c⁄dôi⁄Æ_move
(
°©e
, 
rd
, 
ãmp_ªg
,Ñd, 
COND_EQ
);

1078 
	}
}

1081 
	$muldivmod
(
jô_°©e
 *
°©e
,

1082 
uöt8_t
 
›code
,

1083 
§c
,

1084 
d°
,

1085 
boﬁ
 
sign
)

1087 #i‡
	`deföed
(
__x86_64__
)

1088 
boﬁ
 
mul
 = (
›code
 & 
JIT_ALU_OP_MASK
Ë=(
JIT_OP_MUL_IMM
 & JIT_ALU_OP_MASK);

1089 
boﬁ
 
div
 = (
›code
 & 
JIT_ALU_OP_MASK
Ë=(
JIT_OP_DIV_IMM
 & JIT_ALU_OP_MASK);

1090 
boﬁ
 
mod
 = (
›code
 & 
JIT_ALU_OP_MASK
Ë=(
JIT_OP_MOD_IMM
 & JIT_ALU_OP_MASK);

1091 
boﬁ
 
is64
 = (
›code
 & 
JIT_CLS_MASK
Ë=
JIT_CLS_ALU64
;

1096 
d1
 = 
ªgi°î_m≠
[0].
dúty
, 
d2
 =Ñegister_map[2].dirty;

1097 
r1
 = 
ªgi°î_m≠
[0].
vm_ªg_idx
, 
r2
 =Ñegister_map[2].vm_reg_idx;

1099 i‡(
d°
 !
RAX
) {

1100 
	`unm≠_vm_ªg
(0);

1101 
	`emô_push
(
°©e
, 
RAX
);

1104 i‡(
d°
 !
RDX
) {

1105 
	`unm≠_vm_ªg
(2);

1106 
	`emô_push
(
°©e
, 
RDX
);

1110 
	`emô_mov
(
°©e
, 
§c
, 
RCX
);

1113 
	`emô_mov
(
°©e
, 
d°
, 
RAX
);

1124 i‡(
div
 || 
mod
) {

1125 i‡(
sign
) {

1126 
	`emô_lﬂd_imm
(
°©e
, 
RDX
, -1);

1128 
	`emô_cmp32
(
°©e
, 
RDX
, 
RCX
);

1130 
	`emô1
(
°©e
, 0x9c);

1132 i‡(
mod
 || (
div
 && 
sign
))

1133 
	`emô_push
(
°©e
, 
RAX
);

1135 
	`emô_Æu32
(
°©e
, 0x85, 
RCX
, RCX);

1137 
	`emô1
(
°©e
, 0x9c);

1140 
	`emô_lﬂd_imm
(
°©e
, 
RDX
, 1);

1141 
	`emô_c⁄dôi⁄Æ_move
(
°©e
, 
RDX
, 
RCX
);

1143 
	`emô_Æu32
(
°©e
, 0x31, 
RDX
, RDX);

1146 i‡(
is64
)

1147 
	`emô_ªx
(
°©e
, 1, 0, 0, 0);

1149 
	`emô_Æu32
(
°©e
, 0xf7, 
mul
 ? 4 : 6, 
RCX
);

1154 i‡(
div
 || 
mod
) {

1156 
	`emô1
(
°©e
, 0x9d);

1160 i‡(
div
) {

1162 
	`emô_lﬂd_imm
(
°©e
, 
RCX
, -1);

1166 
	`emô_c⁄dôi⁄Æ_move
(
°©e
, 
RCX
, 
RAX
);

1167 i‡(
sign
) {

1168 
	`emô_p›
(
°©e
, 
RCX
);

1170 
	`emô1
(
°©e
, 0x9d);

1171 
uöt32_t
 
jump_loc
 = 
°©e
->
off£t
;

1172 
	`emô_jcc_off£t
(
°©e
, 0x85);

1173 
	`emô_cmp_imm32
(
°©e
, 
RCX
, 0x80000000);

1174 
	`emô_c⁄dôi⁄Æ_move
(
°©e
, 
RCX
, 
RAX
);

1175 
	`emô_jump_èrgë_off£t
(
°©e
, 
JUMP_LOC
, sèã->
off£t
);

1179 
	`emô_p›
(
°©e
, 
RCX
);

1182 
	`emô_c⁄dôi⁄Æ_move
(
°©e
, 
RCX
, 
RDX
);

1183 i‡(
sign
) {

1185 
	`emô1
(
°©e
, 0x9d);

1186 
uöt32_t
 
jump_loc
 = 
°©e
->
off£t
;

1187 
	`emô_jcc_off£t
(
°©e
, 0x85);

1188 
	`emô_cmp_imm32
(
°©e
, 
RCX
, 0x80000000);

1189 
	`emô_lﬂd_imm
(
°©e
, 
RCX
, 0);

1190 
	`emô_c⁄dôi⁄Æ_move
(
°©e
, 
RCX
, 
RDX
);

1191 
	`emô_jump_èrgë_off£t
(
°©e
, 
JUMP_LOC
, sèã->
off£t
);

1196 i‡(
d°
 !
RDX
) {

1197 i‡(
mod
)

1198 
	`emô_mov
(
°©e
, 
RDX
, 
d°
);

1199 
	`emô_p›
(
°©e
, 
RDX
);

1200 
ªgi°î_m≠
[2].
vm_ªg_idx
 = 
r2
;

1201 
ªgi°î_m≠
[2].
dúty
 = 
d2
;

1203 i‡(
d°
 !
RAX
) {

1204 i‡(
div
 || 
mul
)

1205 
	`emô_mov
(
°©e
, 
RAX
, 
d°
);

1206 
	`emô_p›
(
°©e
, 
RAX
);

1207 
ªgi°î_m≠
[0].
vm_ªg_idx
 = 
r1
;

1208 
ªgi°î_m≠
[0].
dúty
 = 
d1
;

1210 #ñi‡
	`deföed
(
__Ørch64__
)

1211 
›code
) {

1213 
	`emô_d©≠roc_3sour˚
(
°©e
, 
Ál£
, 
DP3_MADD
, 
d°
, d°, 
§c
, 
RZ
);

1216 
	`emô_d©≠roc_3sour˚
(
°©e
, 
åue
, 
DP3_MADD
, 
d°
, d°, 
§c
, 
RZ
);

1219 
	`divmod
(
°©e
, 
JIT_OP_DIV_REG
, 
d°
, d°, 
§c
, 
sign
);

1222 
	`divmod
(
°©e
, 
JIT_OP_MOD_REG
, 
d°
, d°, 
§c
, 
sign
);

1225 
__UNREACHABLE
;

1229 
	}
}

1232 
	$¥ï¨e_å™¶©e
(
jô_°©e
 *
°©e
)

1234 #i‡
	`deföed
(
__x86_64__
)

1236 
uöt32_t
 
i
 = 0; i < 
	`ARRAYS_SIZE
(
n⁄vﬁ©ûe_ªg
); i++)

1237 
	`emô_push
(
°©e
, 
n⁄vﬁ©ûe_ªg
[
i
]);

1246 i‡(!(
	`ARRAYS_SIZE
(
n⁄vﬁ©ûe_ªg
) % 2))

1247 
	`emô_Æu64_imm32
(
°©e
, 0x81, 5, 
RSP
, 0x8);

1250 
	`emô_mov
(
°©e
, 
RSP
, 
RBP
);

1253 
	`emô_Æu64_imm32
(
°©e
, 0x81, 5, 
RSP
, 
STACK_SIZE
);

1255 #i‡
	`deföed
(
_WIN32
)

1258 
	`emô_Æu64_imm32
(
°©e
, 0x81, 5, 
RSP
, 4 * (
uöt64_t
));

1262 
	`emô1
(
°©e
, 0xff);

1263 
	`emô1
(
°©e
, 0xe6);

1266 
°©e
->
exô_loc
 = sèã->
off£t
;

1269 
	`emô_mov
(
°©e
, 
RBP
, 
RSP
);

1271 i‡(!(
	`ARRAYS_SIZE
(
n⁄vﬁ©ûe_ªg
) % 2))

1272 
	`emô_Æu64_imm32
(
°©e
, 0x81, 0, 
RSP
, 0x8);

1275 
uöt32_t
 
i
 = 0; i < 
	`ARRAYS_SIZE
(
n⁄vﬁ©ûe_ªg
); i++)

1276 
	`emô_p›
(
°©e
, 
n⁄vﬁ©ûe_ªg
[
	`ARRAYS_SIZE
“⁄vﬁ©ûe_ªgË- 
i
 - 1]);

1279 
	`emô1
(
°©e
, 0xc3);

1280 #ñi‡
	`deföed
(
__Ørch64__
)

1281 
uöt32_t
 
ªgi°î_•a˚
 = 
	`ARRAYS_SIZE
(
ˇŒì_ªg
) * 8 + 2 * 8;

1282 
°©e
->
°ack_size
 = 
	`Æign_up
(
STACK_SIZE
 + 
ªgi°î_•a˚
, 16);

1283 
	`emô_addsub_imm
(
°©e
, 
åue
, 
AS_SUB
, 
SP
, SP, sèã->
°ack_size
);

1286 
	`emô_lﬂd°‹ïaú_imm
(
°©e
, 
LSP_STPX
, 
R29
, 
R30
, 
SP
, 0);

1288 
	`emô_addsub_imm
(
°©e
, 
åue
, 
AS_ADD
, 
R29
, 
SP
, 0);

1291 
size_t
 
i
 = 0; i < 
	`ARRAYS_SIZE
(
ˇŒì_ªg
); i += 2) {

1292 
	`emô_lﬂd°‹ïaú_imm
(
°©e
, 
LSP_STPX
, 
ˇŒì_ªg
[
i
],

1293 
ˇŒì_ªg
[
i
 + 1], 
SP
, (i + 2) * 8);

1296 
	`emô_unc⁄d_bønch_ªg
(
°©e
, 
BR_BR
, 
R1
);

1298 
°©e
->
exô_loc
 = sèã->
off£t
;

1301 
size_t
 
i
 = 0; i < 
	`ARRAYS_SIZE
(
ˇŒì_ªg
); i += 2) {

1302 
	`emô_lﬂd°‹ïaú_imm
(
°©e
, 
LSP_LDPX
, 
ˇŒì_ªg
[
i
],

1303 
ˇŒì_ªg
[
i
 + 1], 
SP
, (i + 2) * 8);

1305 
	`emô_lﬂd°‹ïaú_imm
(
°©e
, 
LSP_LDPX
, 
R29
, 
R30
, 
SP
, 0);

1306 
	`emô_addsub_imm
(
°©e
, 
åue
, 
AS_ADD
, 
SP
, SP, sèã->
°ack_size
);

1307 
	`emô_unc⁄d_bønch_ªg
(
°©e
, 
BR_RET
, 
R30
);

1309 
°©e
->
‹g_size
 = sèã->
off£t
;

1310 
	}
}

1312 
	glivíess
[
N_RV_REGS
];

1316 
uöt8_t
 
	gˇndid©e_queue
[
N_RV_REGS
];

1317 
	gvm_ªg
[3];

1319 
	$ª£t_ªg
()

1321 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1322 
ªgi°î_m≠
[
i
].
vm_ªg_idx
 = -1;

1323 
ªgi°î_m≠
[
i
].
dúty
 = 
Ál£
;

1324 
ªgi°î_m≠
[
i
].
Æive
 = 
Ál£
;

1326 
	}
}

1329 
ölöe
 
	$ßve_ªg
(
jô_°©e
 *
°©e
, 
idx
)

1331 
	`as£π
(
idx
 > -1 && idx < 
n_ho°_ªgs
);

1333 i‡(!
ªgi°î_m≠
[
idx
].
dúty
)

1336 
	`emô_°‹e
(
°©e
, 
S32
, 
ªgi°î_m≠
[
idx
].
ªg_idx
, 
∑ømëî_ªg
[0],

1337 
	`off£tof
(
riscv_t
, 
X
Ë+ 4 * 
ªgi°î_m≠
[
idx
].
vm_ªg_idx
);

1338 
ªgi°î_m≠
[
idx
].
dúty
 = 0;

1339 
	}
}

1341 
	$°‹e_back
(
jô_°©e
 *
°©e
)

1343 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1344 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 == -1)

1346 
	`ßve_ªg
(
°©e
, 
i
);

1348 
	}
}

1350 
ölöe
 
	$livíess_ª£t
()

1352 
	`mem£t
(
livíess
, 0xff, (liveness));

1353 
	}
}

1355 
ölöe
 
	$ˇndid©e_queue_öô
()

1357 
i
 = 0; i < 
N_RV_REGS
; i++) {

1358 
ˇndid©e_queue
[
i
] = i;

1360 
	}
}

1362 
	$livíess_cmp
(c⁄° *
l
, c⁄° *
r
)

1364  
livíess
[*(
uöt8_t
 *Ë
l
] -Üivíess[*(uöt8_à*Ë
r
];

1365 
	}
}

1368 
ölöe
 
	$livíess_ˇlc
(
block_t
 *
block
)

1370 
uöt32_t
 
idx
;

1371 
rv_ö¢_t
 *
ú
;

1374 
idx
 = 0, 
ú
 = 
block
->
ú_hód
; idx < block->
n_ö¢
;

1375 
idx
++, 
ú
 = ir->
√xt
) {

1376 
ú
->
›code
) {

1377 
rv_ö¢_n›
:

1378 
rv_ö¢_lui
:

1379 
rv_ö¢_auùc
:

1380 
rv_ö¢_jÆ
:

1382 
rv_ö¢_jÆr
:

1383 
livíess
[
ú
->
rs1
] = 
idx
;

1385 
rv_ö¢_beq
:

1386 
rv_ö¢_b√
:

1387 
rv_ö¢_b…
:

1388 
rv_ö¢_bge
:

1389 
rv_ö¢_b…u
:

1390 
rv_ö¢_bgeu
:

1391 
livíess
[
ú
->
rs1
] = 
idx
;

1392 
livíess
[
ú
->
rs2
] = 
idx
;

1394 
rv_ö¢_lb
:

1395 
rv_ö¢_lh
:

1396 
rv_ö¢_lw
:

1397 
rv_ö¢_lbu
:

1398 
rv_ö¢_lhu
:

1399 
livíess
[
ú
->
rs1
] = 
idx
;

1401 
rv_ö¢_sb
:

1402 
rv_ö¢_sh
:

1403 
rv_ö¢_sw
:

1404 
livíess
[
ú
->
rs1
] = 
idx
;

1406 
rv_ö¢_addi
:

1407 
rv_ö¢_¶ti
:

1408 
rv_ö¢_¶tiu
:

1409 
rv_ö¢_x‹i
:

1410 
rv_ö¢_‹i
:

1411 
rv_ö¢_™di
:

1412 
rv_ö¢_¶li
:

1413 
rv_ö¢_§li
:

1414 
rv_ö¢_§ai
:

1415 
livíess
[
ú
->
rs1
] = 
idx
;

1417 
rv_ö¢_add
:

1418 
rv_ö¢_sub
:

1419 
rv_ö¢_¶l
:

1420 
rv_ö¢_¶t
:

1421 
rv_ö¢_¶tu
:

1422 
rv_ö¢_x‹
:

1423 
rv_ö¢_§l
:

1424 
rv_ö¢_§a
:

1425 
rv_ö¢_‹
:

1426 
rv_ö¢_™d
:

1427 
livíess
[
ú
->
rs1
] = 
idx
;

1428 
livíess
[
ú
->
rs2
] = 
idx
;

1430 
rv_ö¢_eˇŒ
:

1431 
rv_ö¢_ebªak
:

1433 #i‡
	`RV32_HAS
(
EXT_M
)

1434 
rv_ö¢_mul
:

1435 
rv_ö¢_mulh
:

1436 
rv_ö¢_mulhsu
:

1437 
rv_ö¢_mulhu
:

1438 
rv_ö¢_div
:

1439 
rv_ö¢_divu
:

1440 
rv_ö¢_ªm
:

1441 
rv_ö¢_ªmu
:

1442 
livíess
[
ú
->
rs1
] = 
idx
;

1443 
livíess
[
ú
->
rs2
] = 
idx
;

1446 #i‡
	`RV32_HAS
(
EXT_C
)

1447 
rv_ö¢_ˇddi4•n
:

1448 
livíess
[
rv_ªg_•
] = 
idx
;

1450 
rv_ö¢_˛w
:

1451 
livíess
[
ú
->
rs1
] = 
idx
;

1453 
rv_ö¢_csw
:

1454 
livíess
[
ú
->
rs1
] = 
idx
;

1456 
rv_ö¢_˙›
:

1458 
rv_ö¢_ˇddi
:

1459 
livíess
[
ú
->
rd
] = 
idx
;

1461 
rv_ö¢_cjÆ
:

1462 
rv_ö¢_˛i
:

1463 
rv_ö¢_˛ui
:

1465 
rv_ö¢_ˇddi16•
:

1466 
livíess
[
ú
->
rd
] = 
idx
;

1468 
rv_ö¢_c§li
:

1469 
rv_ö¢_c§ai
:

1470 
rv_ö¢_ˇndi
:

1471 
livíess
[
ú
->
rs1
] = 
idx
;

1473 
rv_ö¢_csub
:

1474 
rv_ö¢_cx‹
:

1475 
rv_ö¢_c‹
:

1476 
rv_ö¢_ˇnd
:

1477 
livíess
[
ú
->
rs1
] = 
idx
;

1478 
livíess
[
ú
->
rs2
] = 
idx
;

1480 
rv_ö¢_cj
:

1482 
rv_ö¢_cbeqz
:

1483 
rv_ö¢_cb√z
:

1484 
livíess
[
ú
->
rs1
] = 
idx
;

1486 
rv_ö¢_c¶li
:

1487 
livíess
[
ú
->
rd
] = 
idx
;

1489 
rv_ö¢_˛w•
:

1490 
livíess
[
rv_ªg_•
] = 
idx
;

1492 
rv_ö¢_cjr
:

1493 
livíess
[
ú
->
rs1
] = 
idx
;

1495 
rv_ö¢_cmv
:

1496 
livíess
[
ú
->
rs2
] = 
idx
;

1498 
rv_ö¢_˚bªak
:

1500 
rv_ö¢_cjÆr
:

1501 
livíess
[
ú
->
rs1
] = 
idx
;

1503 
rv_ö¢_ˇdd
:

1504 
livíess
[
ú
->
rs1
] = 
idx
;

1505 
livíess
[
ú
->
rs2
] = 
idx
;

1507 
rv_ö¢_csw•
:

1508 
livíess
[
rv_ªg_•
] = 
idx
;

1509 
livíess
[
ú
->
rs2
] = 
idx
;

1512 
rv_ö¢_fu£1
:

1513 
i
 = 0; i < 
ú
->
imm2
; i++) {

1514 
livíess
[
ú
->
fu£
[
i
].
rd
] = 
idx
;

1517 
rv_ö¢_fu£2
:

1518 
livíess
[
ú
->
rs1
] = 
idx
;

1520 
rv_ö¢_fu£3
:

1521 
i
 = 0; i < 
ú
->
imm2
; i++) {

1522 
livíess
[
ú
->
fu£
[
i
].
rs1
] = 
idx
;

1523 
livíess
[
ú
->
fu£
[
i
].
rs2
] = 
idx
;

1526 
rv_ö¢_fu£4
:

1527 
rv_ö¢_fu£5
:

1528 
i
 = 0; i < 
ú
->
imm2
; i++) {

1529 
livíess
[
ú
->
fu£
[
i
].
rs1
] = 
idx
;

1533 
__UNREACHABLE
;

1537 
	`ˇndid©e_queue_öô
();

1538 
	`qs‹t
(
ˇndid©e_queue
, 
N_RV_REGS
, (
uöt8_t
), 
livíess_cmp
);

1539 
	}
}

1541 
ölöe
 
	$ªgs_ª‰esh
(
idx
)

1543 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1544 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 == -1)

1546 i‡(
livíess
[
ªgi°î_m≠
[
i
].
vm_ªg_idx
] < 
idx
)

1547 
ªgi°î_m≠
[
i
].
Æive
 = 
Ál£
;

1549 
	}
}

1552 
ölöe
 
	$ªg_pick
(
ª£rved
)

1555 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1556 i‡(
ªgi°î_m≠
[
i
].
ªg_idx
 =
ª£rved
)

1558 i‡(!
ªgi°î_m≠
[
i
].
Æive
)

1559  
i
;

1563 
idx
 = -1;

1564 
i
 = 0; i < 
N_RV_REGS
; i++) {

1565 
uöt8_t
 
ˇndid©e
 = 
ˇndid©e_queue
[
i
];

1566 
j
 = 0; j < 
n_ho°_ªgs
; j++) {

1567 i‡(
ªgi°î_m≠
[
j
].
ªg_idx
 =
ª£rved
)

1569 i‡(
ªgi°î_m≠
[
j
].
vm_ªg_idx
 =
ˇndid©e
) {

1570 
idx
 = 
j
;

1571 
íd_pick_ªg
;

1575 
__UNREACHABLE
;

1577 
íd_pick_ªg
:

1578 
	`as£π
(
idx
 > -1 && idx < 
n_ho°_ªgs
);

1579  
idx
;

1580 
	}
}

1583 
ölöe
 
	$unm≠_vm_ªg
(
idx
)

1586 
	`as£π
(
idx
 > -1 && idx < 
n_ho°_ªgs
);

1587 
ªgi°î_m≠
[
idx
].
vm_ªg_idx
 = -1;

1588 
	}
}

1590 
ölöe
 
	$£t_vm_ªg
(
idx
, 
vm_ªg_idx
)

1592 
	`as£π
(
idx
 > -1 && idx < 
n_ho°_ªgs
);

1593 
ªgi°î_m≠
[
idx
].
vm_ªg_idx
 = vm_reg_idx;

1594 
ªgi°î_m≠
[
idx
].
Æive
 = 
åue
;

1595 
	}
}

1600 
ölöe
 
	$m≠_vm_ªg
(
jô_°©e
 *
°©e
, 
vm_ªg_idx
)

1602 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1603 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 != vm_reg_idx)

1605  
ªgi°î_m≠
[
i
].
ªg_idx
;

1608 
idx
 = 
	`ªg_pick
(-1);

1609 
èrgë_ªg
 = 
ªgi°î_m≠
[
idx
].
ªg_idx
;

1610 
	`ßve_ªg
(
°©e
, 
idx
);

1611 
	`unm≠_vm_ªg
(
idx
);

1612 
	`£t_vm_ªg
(
idx
, 
vm_ªg_idx
);

1613  
èrgë_ªg
;

1614 
	}
}

1616 
	$ø_lﬂd
(
jô_°©e
 *
°©e
, 
vm_ªg_idx
)

1618 
‹igö
 = -1;

1619 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1620 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 != vm_reg_idx)

1622 
‹igö
 = 
ªgi°î_m≠
[
i
].
ªg_idx
;

1625 
èrgë_ªg
 = 
	`m≠_vm_ªg
(
°©e
, 
vm_ªg_idx
);

1627 i‡(
‹igö
 !
èrgë_ªg
)

1628 
	`emô_lﬂd
(
°©e
, 
S32
, 
∑ømëî_ªg
[0], 
èrgë_ªg
,

1629 
	`off£tof
(
riscv_t
, 
X
Ë+ 4 * 
vm_ªg_idx
);

1630  
èrgë_ªg
;

1631 
	}
}

1637 
ölöe
 
	$m≠_vm_ªg_ª£rved
(
jô_°©e
 *
°©e
,

1638 
vm_ªg_idx
,

1639 
ª£rved_ªg_idx
)

1641 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1642 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 != vm_reg_idx)

1644  
ªgi°î_m≠
[
i
].
ªg_idx
;

1647 
idx
, 
èrgë_ªg
;

1649 
idx
 = 
	`ªg_pick
(
ª£rved_ªg_idx
);

1650 
èrgë_ªg
 = 
ªgi°î_m≠
[
idx
].
ªg_idx
;

1651 } 
èrgë_ªg
 =
ª£rved_ªg_idx
);

1653 
	`ßve_ªg
(
°©e
, 
idx
);

1654 
	`unm≠_vm_ªg
(
idx
);

1655 
	`£t_vm_ªg
(
idx
, 
vm_ªg_idx
);

1656  
èrgë_ªg
;

1657 
	}
}

1659 
	$ø_lﬂd2
(
jô_°©e
 *
°©e
, 
vm_ªg_idx1
, 
vm_ªg_idx2
)

1661 
‹igö1
 = -1, 
‹igö2
 = -1;

1662 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1663 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 !
vm_ªg_idx1
)

1665 
‹igö1
 = 
ªgi°î_m≠
[
i
].
ªg_idx
;

1667 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1668 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 !
vm_ªg_idx2
)

1670 
‹igö2
 = 
ªgi°î_m≠
[
i
].
ªg_idx
;

1673 i‡(
vm_ªg_idx1
 =
vm_ªg_idx2
) {

1674 
vm_ªg
[0] = vm_ªg[1] = 
	`m≠_vm_ªg
(
°©e
, 
vm_ªg_idx1
);

1676 
vm_ªg
[0] = 
	`m≠_vm_ªg
(
°©e
, 
vm_ªg_idx1
);

1677 
vm_ªg
[1] = 
	`m≠_vm_ªg_ª£rved
(
°©e
, 
vm_ªg_idx2
, vm_reg[0]);

1678 
	`as£π
(
vm_ªg
[0] != vm_reg[1]);

1681 i‡(
‹igö1
 !
vm_ªg
[0])

1682 
	`emô_lﬂd
(
°©e
, 
S32
, 
∑ømëî_ªg
[0], 
vm_ªg
[0],

1683 
	`off£tof
(
riscv_t
, 
X
Ë+ 4 * 
vm_ªg_idx1
);

1684 i‡(
‹igö2
 !
vm_ªg
[1])

1685 
	`emô_lﬂd
(
°©e
, 
S32
, 
∑ømëî_ªg
[0], 
vm_ªg
[1],

1686 
	`off£tof
(
riscv_t
, 
X
Ë+ 4 * 
vm_ªg_idx2
);

1687 
	}
}

1689 
	$ø_lﬂd2_£xt
(
jô_°©e
 *
°©e
,

1690 
vm_ªg_idx1
,

1691 
vm_ªg_idx2
,

1692 
boﬁ
 
£xt1
,

1693 
boﬁ
 
£xt2
)

1695 
‹igö1
 = -1, 
‹igö2
 = -1;

1696 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1697 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 !
vm_ªg_idx1
)

1699 
‹igö1
 = 
ªgi°î_m≠
[
i
].
ªg_idx
;

1701 
i
 = 0; i < 
n_ho°_ªgs
; i++) {

1702 i‡(
ªgi°î_m≠
[
i
].
vm_ªg_idx
 !
vm_ªg_idx2
)

1704 
‹igö2
 = 
ªgi°î_m≠
[
i
].
ªg_idx
;

1707 i‡(
vm_ªg_idx1
 =
vm_ªg_idx2
) {

1708 
vm_ªg
[0] = vm_ªg[1] = 
	`m≠_vm_ªg
(
°©e
, 
vm_ªg_idx1
);

1710 
vm_ªg
[0] = 
	`m≠_vm_ªg
(
°©e
, 
vm_ªg_idx1
);

1711 
vm_ªg
[1] = 
	`m≠_vm_ªg_ª£rved
(
°©e
, 
vm_ªg_idx2
, vm_reg[1]);

1712 
	`as£π
(
vm_ªg
[0] != vm_reg[1]);

1715 i‡(
‹igö1
 !
vm_ªg
[0]) {

1716 i‡(
£xt1
)

1717 
	`emô_lﬂd_£xt
(
°©e
, 
S32
, 
∑ømëî_ªg
[0], 
vm_ªg
[0],

1718 
	`off£tof
(
riscv_t
, 
X
Ë+ 4 * 
vm_ªg_idx1
);

1720 
	`emô_lﬂd
(
°©e
, 
S32
, 
∑ømëî_ªg
[0], 
vm_ªg
[0],

1721 
	`off£tof
(
riscv_t
, 
X
Ë+ 4 * 
vm_ªg_idx1
);

1723 i‡(
‹igö2
 !
vm_ªg
[1]) {

1724 i‡(
£xt2
)

1725 
	`emô_lﬂd_£xt
(
°©e
, 
S32
, 
∑ømëî_ªg
[0], 
vm_ªg
[1],

1726 
	`off£tof
(
riscv_t
, 
X
Ë+ 4 * 
vm_ªg_idx2
);

1728 
	`emô_lﬂd
(
°©e
, 
S32
, 
∑ømëî_ªg
[0], 
vm_ªg
[1],

1729 
	`off£tof
(
riscv_t
, 
X
Ë+ 4 * 
vm_ªg_idx2
);

1731 
	}
}

1733 
	$∑r£_bønch_hi°‹y_èbÀ
(
jô_°©e
 *
°©e
, 
rv_ö¢_t
 *
ú
)

1735 
max_idx
 = 0;

1736 
bønch_hi°‹y_èbÀ_t
 *
bt
 = 
ú
->
bønch_èbÀ
;

1737 
i
 = 0; i < 
HISTORY_SIZE
; i++) {

1738 i‡(!
bt
->
times
[
i
])

1740 i‡(
bt
->
times
[
max_idx
] < bt->times[
i
])

1741 
max_idx
 = 
i
;

1743 i‡(
bt
->
PC
[
max_idx
] && bt->
times
[max_idx] >
IN_JUMP_THRESHOLD
) {

1744 
	`ßve_ªg
(
°©e
, 0);

1745 
	`unm≠_vm_ªg
(0);

1746 
	`emô_lﬂd_imm
(
°©e
, 
ªgi°î_m≠
[0].
ªg_idx
, 
bt
->
PC
[
max_idx
]);

1747 
	`emô_cmp32
(
°©e
, 
ãmp_ªg
, 
ªgi°î_m≠
[0].
ªg_idx
);

1748 
uöt32_t
 
jump_loc
 = 
°©e
->
off£t
;

1749 
	`emô_jcc_off£t
(
°©e
, 0x85);

1750 
	`emô_jmp
(
°©e
, 
bt
->
PC
[
max_idx
]);

1751 
	`emô_jump_èrgë_off£t
(
°©e
, 
JUMP_LOC
, sèã->
off£t
);

1753 
	}
}

1755 
	#GEN
(
ö°
, 
code
) \

1756 
do_
##
	`ö°
(
jô_°©e
 *
°©e
 
UNUSED
, 
riscv_t
 *
rv
 UNUSED, \

1757 
rv_ö¢_t
 *
ú
 
UNUSED
) \

1759 
code
; \

1760 }

	)

1761 
	~"rv32_jô.c
"

1762 #unde‡
GEN


1764 
	$do_fu£1
(
jô_°©e
 *
°©e
, 
riscv_t
 *
rv
 
UNUSED
, 
rv_ö¢_t
 *
ú
)

1766 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

1767 
i
 = 0; i < 
ú
->
imm2
; i++) {

1768 
vm_ªg
[0] = 
	`m≠_vm_ªg
(
°©e
, 
fu£
[
i
].
rd
);

1769 
	`emô_lﬂd_imm
(
°©e
, 
vm_ªg
[0], 
fu£
[
i
].
imm
);

1771 
	}
}

1773 
	$do_fu£2
(
jô_°©e
 *
°©e
, 
riscv_t
 *
rv
 
UNUSED
, 
rv_ö¢_t
 *
ú
)

1775 
vm_ªg
[0] = 
	`m≠_vm_ªg
(
°©e
, 
ú
->
rd
);

1776 
	`emô_lﬂd_imm
(
°©e
, 
vm_ªg
[0], 
ú
->
imm
);

1777 
	`emô_mov
(
°©e
, 
vm_ªg
[0], 
ãmp_ªg
);

1778 
vm_ªg
[1] = 
	`ø_lﬂd
(
°©e
, 
ú
->
rs1
);

1779 
vm_ªg
[2] = 
	`m≠_vm_ªg
(
°©e
, 
ú
->
rs2
);

1780 
	`emô_mov
(
°©e
, 
vm_ªg
[1], vm_reg[2]);

1781 
	`emô_Æu32
(
°©e
, 0x01, 
ãmp_ªg
, 
vm_ªg
[2]);

1782 
	}
}

1784 
	$do_fu£3
(
jô_°©e
 *
°©e
, 
riscv_t
 *
rv
, 
rv_ö¢_t
 *
ú
)

1786 
mem‹y_t
 *
m
 = 
	`PRIV
(
rv
)->
mem
;

1787 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

1788 
i
 = 0; i < 
ú
->
imm2
; i++) {

1789 
vm_ªg
[0] = 
	`ø_lﬂd
(
°©e
, 
fu£
[
i
].
rs1
);

1790 
	`emô_lﬂd_imm
(
°©e
, 
ãmp_ªg
, (
öçå_t
Ë(
m
->
mem_ba£
 + 
fu£
[
i
].
imm
));

1791 
	`emô_Æu64
(
°©e
, 0x01, 
vm_ªg
[0], 
ãmp_ªg
);

1792 
vm_ªg
[1] = 
	`ø_lﬂd
(
°©e
, 
fu£
[
i
].
rs2
);

1793 
	`emô_°‹e
(
°©e
, 
S32
, 
vm_ªg
[1], 
ãmp_ªg
, 0);

1795 
	}
}

1797 
	$do_fu£4
(
jô_°©e
 *
°©e
, 
riscv_t
 *
rv
, 
rv_ö¢_t
 *
ú
)

1799 
mem‹y_t
 *
m
 = 
	`PRIV
(
rv
)->
mem
;

1800 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

1801 
i
 = 0; i < 
ú
->
imm2
; i++) {

1802 
vm_ªg
[0] = 
	`ø_lﬂd
(
°©e
, 
fu£
[
i
].
rs1
);

1803 
	`emô_lﬂd_imm
(
°©e
, 
ãmp_ªg
, (
öçå_t
Ë(
m
->
mem_ba£
 + 
fu£
[
i
].
imm
));

1804 
	`emô_Æu64
(
°©e
, 0x01, 
vm_ªg
[0], 
ãmp_ªg
);

1805 
vm_ªg
[1] = 
	`m≠_vm_ªg
(
°©e
, 
fu£
[
i
].
rd
);

1806 
	`emô_lﬂd
(
°©e
, 
S32
, 
ãmp_ªg
, 
vm_ªg
[1], 0);

1808 
	}
}

1810 
	$do_fu£5
(
jô_°©e
 *
°©e
, 
riscv_t
 *
rv
 
UNUSED
, 
rv_ö¢_t
 *
ú
)

1812 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

1813 
i
 = 0; i < 
ú
->
imm2
; i++) {

1814 
fu£
[
i
].
›code
) {

1815 
rv_ö¢_¶li
:

1816 
vm_ªg
[0] = 
	`ø_lﬂd
(
°©e
, 
fu£
[
i
].
rs1
);

1817 
vm_ªg
[1] = 
	`m≠_vm_ªg
(
°©e
, 
fu£
[
i
].
rd
);

1818 i‡(
vm_ªg
[0] != vm_reg[1])

1819 
	`emô_mov
(
°©e
, 
vm_ªg
[0], vm_reg[1]);

1820 
	`emô_Æu32_imm8
(
°©e
, 0xc1, 4, 
vm_ªg
[1], 
fu£
[
i
].
imm
 & 0x1f);

1822 
rv_ö¢_§li
:

1823 
vm_ªg
[0] = 
	`ø_lﬂd
(
°©e
, 
fu£
[
i
].
rs1
);

1824 
vm_ªg
[1] = 
	`m≠_vm_ªg
(
°©e
, 
fu£
[
i
].
rd
);

1825 i‡(
vm_ªg
[0] != vm_reg[1])

1826 
	`emô_mov
(
°©e
, 
vm_ªg
[0], vm_reg[1]);

1827 
	`emô_Æu32_imm8
(
°©e
, 0xc1, 5, 
vm_ªg
[1], 
fu£
[
i
].
imm
 & 0x1f);

1829 
rv_ö¢_§ai
:

1830 
vm_ªg
[0] = 
	`ø_lﬂd
(
°©e
, 
fu£
[
i
].
rs1
);

1831 
vm_ªg
[1] = 
	`m≠_vm_ªg
(
°©e
, 
fu£
[
i
].
rd
);

1832 i‡(
vm_ªg
[0] != vm_reg[1])

1833 
	`emô_mov
(
°©e
, 
vm_ªg
[0], vm_reg[1]);

1834 
	`emô_Æu32_imm8
(
°©e
, 0xc1, 7, 
vm_ªg
[1], 
fu£
[
i
].
imm
 & 0x1f);

1837 
__UNREACHABLE
;

1841 
	}
}

1844 c⁄° *
	gdi•©ch_èbÀ
[] = {

1846 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
Ë[
rv_ö¢_
##ö°] = 
do_
##ö°,

	)

1847 
RV_INSN_LIST


1848 #unde‡
_


1850 
	#_
(
ö°
Ë[
rv_ö¢_
##ö°] = 
do_
##ö°,

	)

1851 
FUSE_INSN_LIST


1852 #unde‡
_


1856 
	$˛ór_hŸ
(
block_t
 *
block
)

1858 
block
->
hŸ
 = 
Ál£
;

1859 
	}
}

1861 
	$code_ˇche_Êush
(
jô_°©e
 *
°©e
, 
riscv_t
 *
rv
)

1863 
should_Êush
 = 
Ál£
;

1864 
°©e
->
off£t
 = sèã->
‹g_size
;

1865 
°©e
->
n_blocks
 = 0;

1866 
	`£t_ª£t
(&
°©e
->
£t
);

1867 
	`˛ór_ˇche_hŸ
(
rv
->
block_ˇche
, (
˛ór_func_t
Ë
˛ór_hŸ
);

1869 
	}
}

1871 (*
	tcodegí_block_func_t
)(
	tjô_°©e
 *,

1872 
	triscv_t
 *,

1873 
	trv_ö¢_t
 *);

1875 
	$å™¶©e
(
jô_°©e
 *
°©e
, 
riscv_t
 *
rv
, 
block_t
 *
block
)

1877 
uöt32_t
 
idx
;

1878 
rv_ö¢_t
 *
ú
, *
√xt
;

1879 
	`ª£t_ªg
();

1880 
	`livíess_ª£t
();

1881 
	`livíess_ˇlc
(
block
);

1882 
idx
 = 0, 
ú
 = 
block
->
ú_hód
; idx < block->
n_ö¢
 && !
should_Êush
;

1883 
idx
++, 
ú
 = 
√xt
) {

1884 
√xt
 = 
ú
->next;

1885 
	`ªgs_ª‰esh
(
idx
);

1886 ((
codegí_block_func_t
Ë
di•©ch_èbÀ
[
ú
->
›code
])(
°©e
, 
rv
, ir);

1888 
	}
}

1890 
	$ªsﬁve_jumps
(
jô_°©e
 *
°©e
)

1892 
i
 = 0; i < 
°©e
->
n_jumps
; i++) {

1893 
jump
 jum∞
°©e
->
jumps
[
i
];

1894 
èrgë_loc
;

1895 i‡(
jump
.
èrgë_off£t
 != 0)

1896 
èrgë_loc
 = 
jump
.
èrgë_off£t
;

1897 i‡(
jump
.
èrgë_pc
 =
TARGET_PC_EXIT
)

1898 
èrgë_loc
 = 
°©e
->
exô_loc
;

1899 #i‡
	`deföed
(
__x86_64__
)

1900 i‡(
jump
.
èrgë_pc
 =
TARGET_PC_RETPOLINE
)

1901 
èrgë_loc
 = 
°©e
->
ªçﬁöe_loc
;

1902 #ñi‡
	`deföed
(
__Ørch64__
)

1903 i‡(
jump
.
èrgë_pc
 =
TARGET_PC_ENTER
)

1904 
èrgë_loc
 = 
°©e
->
íåy_loc
;

1907 
èrgë_loc
 = 
jump
.
off£t_loc
 + (
uöt32_t
);

1908 
i
 = 0; i < 
°©e
->
n_blocks
; i++) {

1909 i‡(
jump
.
èrgë_pc
 =
°©e
->
off£t_m≠
[
i
].
pc
) {

1910 
èrgë_loc
 = 
°©e
->
off£t_m≠
[
i
].
off£t
;

1915 #i‡
	`deföed
(
__x86_64__
)

1917 
uöt32_t
 
ªl
 = 
èrgë_loc
 - (
jump
.
off£t_loc
 + (uint32_t));

1919 
uöt8_t
 *
off£t_±r
 = &
°©e
->
buf
[
jump
.
off£t_loc
];

1920 
	`mem˝y
(
off£t_±r
, &
ªl
, (
uöt32_t
));

1921 #ñi‡
	`deföed
(
__Ørch64__
)

1922 
öt32_t
 
ªl
 = 
èrgë_loc
 - 
jump
.
off£t_loc
;

1923 
	`upd©e_bønch_imm
(
°©e
, 
jump
.
off£t_loc
, 
ªl
);

1926 
	}
}

1928 
	$å™¶©e_chaöed_block
(
jô_°©e
 *
°©e
,

1929 
riscv_t
 *
rv
,

1930 
block_t
 *
block
)

1932 i‡(
	`£t_has
(&
°©e
->
£t
, 
block
->
pc_°¨t
))

1935 
	`£t_add
(&
°©e
->
£t
, 
block
->
pc_°¨t
);

1936 
	`off£t_m≠_ö£π
(
°©e
, 
block
->
pc_°¨t
);

1937 
	`å™¶©e
(
°©e
, 
rv
, 
block
);

1938 i‡(
	`u∆ikñy
(
should_Êush
))

1940 
rv_ö¢_t
 *
ú
 = 
block
->
ú_èû
;

1941 i‡(
ú
->
bønch_u¡akí
 && !
	`£t_has
(&
°©e
->
£t
, ir->bønch_u¡akí->
pc
)) {

1942 
block_t
 *
block1
 =

1943 
	`ˇche_gë
(
rv
->
block_ˇche
, 
ú
->
bønch_u¡akí
->
pc
, 
Ál£
);

1944 i‡(
block1
->
å™¶©abÀ
)

1945 
	`å™¶©e_chaöed_block
(
°©e
, 
rv
, 
block1
);

1947 i‡(
ú
->
bønch_èkí
 && !
	`£t_has
(&
°©e
->
£t
, ir->bønch_èkí->
pc
)) {

1948 
block_t
 *
block1
 =

1949 
	`ˇche_gë
(
rv
->
block_ˇche
, 
ú
->
bønch_èkí
->
pc
, 
Ál£
);

1950 i‡(
block1
->
å™¶©abÀ
)

1951 
	`å™¶©e_chaöed_block
(
°©e
, 
rv
, 
block1
);

1953 
bønch_hi°‹y_èbÀ_t
 *
bt
 = 
ú
->
bønch_èbÀ
;

1954 i‡(
bt
) {

1955 
max_idx
 = 0;

1956 
i
 = 0; i < 
HISTORY_SIZE
; i++) {

1957 i‡(!
bt
->
times
[
i
])

1959 i‡(
bt
->
times
[
max_idx
] < bt->times[
i
])

1960 
max_idx
 = 
i
;

1962 i‡(
bt
->
PC
[
max_idx
] && bt->
times
[max_idx] >
IN_JUMP_THRESHOLD
 &&

1963 !
	`£t_has
(&
°©e
->
£t
, 
bt
->
PC
[
max_idx
])) {

1964 
block_t
 *
block1
 =

1965 
	`ˇche_gë
(
rv
->
block_ˇche
, 
bt
->
PC
[
max_idx
], 
Ál£
);

1966 i‡(
block1
 && block1->
å™¶©abÀ
)

1967 
	`å™¶©e_chaöed_block
(
°©e
, 
rv
, 
block1
);

1970 
	}
}

1972 
	$jô_å™¶©e
(
riscv_t
 *
rv
, 
block_t
 *
block
)

1974 
jô_°©e
 *
°©e
 = 
rv
->jit_state;

1975 i‡(
	`£t_has
(&
°©e
->
£t
, 
block
->
pc_°¨t
)) {

1976 
i
 = 0; i < 
°©e
->
n_blocks
; i++) {

1977 i‡(
block
->
pc_°¨t
 =
°©e
->
off£t_m≠
[
i
].
pc
) {

1978 
block
->
off£t
 = 
°©e
->
off£t_m≠
[
i
].offset;

1979 
block
->
hŸ
 = 
åue
;

1983 
__UNREACHABLE
;

1985 
ª°¨t
:

1986 
	`mem£t
(
°©e
->
jumps
, 0, 1024 * (
jump
));

1987 
°©e
->
n_jumps
 = 0;

1988 
block
->
off£t
 = 
°©e
->offset;

1989 
	`å™¶©e_chaöed_block
(
°©e
, 
rv
, 
block
);

1990 i‡(
	`u∆ikñy
(
should_Êush
)) {

1991 
	`code_ˇche_Êush
(
°©e
, 
rv
);

1992 
ª°¨t
;

1994 
	`ªsﬁve_jumps
(
°©e
);

1995 
block
->
hŸ
 = 
åue
;

1996 
	}
}

1998 
jô_°©e
 *
	$jô_°©e_öô
(
size_t
 
size
)

2000 
jô_°©e
 *
°©e
 = 
	`mÆloc
((jit_state));

2001 
	`as£π
(
°©e
);

2002 
°©e
->
off£t
 = 0;

2003 
°©e
->
size
 = size;

2004 
°©e
->
buf
 = 
	`mm≠
(0, 
size
, 
PROT_READ
 | 
PROT_WRITE
 | 
PROT_EXEC
,

2005 
MAP_PRIVATE
 | 
MAP_ANONYMOUS


2006 #i‡
	`deföed
(
__APPLE__
)

2007 | 
MAP_JIT


2011 
°©e
->
n_blocks
 = 0;

2012 
	`as£π
(
°©e
->
buf
 !
MAP_FAILED
);

2013 
	`£t_ª£t
(&
°©e
->
£t
);

2014 
	`ª£t_ªg
();

2015 
	`¥ï¨e_å™¶©e
(
°©e
);

2016 
°©e
->
off£t_m≠
 = 
	`ˇŒoc
(
MAX_BLOCKS
, (offset_map));

2017 
°©e
->
jumps
 = 
	`ˇŒoc
(
MAX_JUMPS
, (
jump
));

2018  
°©e
;

2019 
	}
}

2021 
	$jô_°©e_exô
(
jô_°©e
 *
°©e
)

2023 
	`munm≠
(
°©e
->
buf
, sèã->
size
);

2024 
	`‰ì
(
°©e
->
off£t_m≠
);

2025 
	`‰ì
(
°©e
->
jumps
);

2026 
	`‰ì
(
°©e
);

2027 
	}
}

	@src/jit.h

6 #¥agm®
⁄˚


8 
	~<°döt.h
>

10 
	~"riscv_¥iv©e.h
"

11 
	~"utûs.h
"

13 
	sjump
 {

14 
uöt32_t
 
	moff£t_loc
;

15 
uöt32_t
 
	mèrgë_pc
;

16 
uöt32_t
 
	mèrgë_off£t
;

19 
	soff£t_m≠
 {

20 
uöt32_t
 
	mpc
;

21 
uöt32_t
 
	moff£t
;

24 
	sjô_°©e
 {

25 
£t_t
 
	m£t
;

26 
uöt8_t
 *
	mbuf
;

27 
uöt32_t
 
	moff£t
;

28 
uöt32_t
 
	m°ack_size
;

29 
uöt32_t
 
	msize
;

30 
uöt32_t
 
	míåy_loc
;

31 
uöt32_t
 
	mexô_loc
;

32 
uöt32_t
 
	m‹g_size
;

33 
uöt32_t
 
	mªçﬁöe_loc
;

34 
off£t_m≠
 *
	moff£t_m≠
;

35 
	mn_blocks
;

36 
jump
 *
	mjumps
;

37 
	mn_jumps
;

40 
	sho°_ªg
 {

41 
uöt8_t
 
	mªg_idx
 : 5;

42 
öt8_t
 
	mvm_ªg_idx
 : 6;

43 
boﬁ
 
	mdúty
 : 1;

44 
boﬁ
 
	mÆive
 : 1;

48 
jô_°©e
 *
jô_°©e_öô
(
size_t
 
size
);

49 
jô_°©e_exô
(
jô_°©e
 *
°©e
);

50 
jô_å™¶©e
(
riscv_t
 *
rv
, 
block_t
 *
block
);

51 (*
	texec_block_func_t
)(
	triscv_t
 *
	trv
, 
	tuöçå_t
);

53 #i‡
	`RV32_HAS
(
T2C
)

54 
	`t2c_compûe
(
block_t
 *
block
, 
uöt64_t
 
mem_ba£
);

55 (*
	texec_t2c_func_t
)(
	triscv_t
 *);

	@src/main.c

6 
	~<as£π.h
>

7 
	~<libgí.h
>

8 
	~<limôs.h
>

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

12 
	~<uni°d.h
>

14 
	~"ñf.h
"

15 
	~"riscv.h
"

16 
	~"utûs.h
"

19 
boﬁ
 
	g›t_åa˚
 = 
Ál£
;

21 #i‡
RV32_HAS
(
GDBSTUB
)

23 
boﬁ
 
	g›t_gdb°ub
 = 
Ál£
;

27 
boﬁ
 
	g›t_dump_ªgs
 = 
Ál£
;

28 *
	gªgi°îs_out_fûe
;

31 
boﬁ
 
	g›t_¨ch_ã°
 = 
Ál£
;

32 *
	gsig«tuª_out_fûe
;

35 
boﬁ
 
	g›t_quõt_ouçuts
 = 
Ál£
;

38 *
	g›t_¥og_«me
;

41 
	g¥og_¨gc
;

42 **
	g¥og_¨gs
;

43 c⁄° *
	g›t°r
 = "tgqmhpd:a:";

46 
boﬁ
 
	g›t_mißlig√d
 = 
Ál£
;

49 
boﬁ
 
	g›t_¥of_d©a
 = 
Ál£
;

50 *
	g¥of_out_fûe
;

52 
	$¥öt_ußge
(c⁄° *
fûíame
)

54 
	`Ârötf
(
°dîr
,

59 #i‡
	`RV32_HAS
(
GDBSTUB
)

70 
fûíame
);

71 
	}
}

73 
boﬁ
 
	$∑r£_¨gs
(
¨gc
, **
¨gs
)

75 
›t
;

76 
emu_¨gc
 = 0;

78 (
›t
 = 
	`gë›t
(
¨gc
, 
¨gs
, 
›t°r
)) != -1) {

79 
emu_¨gc
++;

81 
›t
) {

83 
›t_åa˚
 = 
åue
;

85 #i‡
	`RV32_HAS
(
GDBSTUB
)

87 
›t_gdb°ub
 = 
åue
;

91 
›t_quõt_ouçuts
 = 
åue
;

94  
Ál£
;

96 
›t_mißlig√d
 = 
åue
;

99 
›t_¥of_d©a
 = 
åue
;

102 
›t_dump_ªgs
 = 
åue
;

103 
ªgi°îs_out_fûe
 = 
›èrg
;

104 
emu_¨gc
++;

107 
›t_¨ch_ã°
 = 
åue
;

108 
sig«tuª_out_fûe
 = 
›èrg
;

109 
emu_¨gc
++;

112  
Ál£
;

116 
¥og_¨gc
 = 
¨gc
 - 
emu_¨gc
 - 1;

120 
¥og_¨gs
 = &
¨gs
[
›töd
];

121 
›t_¥og_«me
 = 
¥og_¨gs
[0];

123 i‡(
›t_¥of_d©a
) {

124 
cwd_∑th
[
PATH_MAX
] = {0};

125 
	`as£π
(
	`gëcwd
(
cwd_∑th
, 
PATH_MAX
));

127 
ªl_∑th
[
PATH_MAX
] = {0};

128 
	`mem˝y
(
ªl_∑th
, 
¨gs
[0], 
	`°æí
(args[0]) - 7 );

130 *
¥og_ba£«me
 = 
	`ba£«me
(
›t_¥og_«me
);

131 
¥of_out_fûe
 = 
	`mÆloc
(
	`°æí
(
cwd_∑th
Ë+ 1 + såÀn(
ªl_∑th
) +

132 
	`°æí
(
¥og_ba£«me
) + 5 + 1);

133 
	`as£π
(
¥of_out_fûe
);

135 
	`•rötf
(
¥of_out_fûe
, "%s/%s%s.¥of", 
cwd_∑th
, 
ªl_∑th
,

136 
¥og_ba£«me
);

138  
åue
;

139 
	}
}

141 
	$dump_ã°_sig«tuª
(c⁄° *
¥og_«me
)

143 
ñf_t
 *
ñf
 = 
	`ñf_√w
();

144 
	`as£π
(
ñf
 && 
	`ñf_›í
”lf, 
¥og_«me
));

146 
uöt32_t
 
°¨t
 = 0, 
íd
 = 0;

147 c⁄° 
Elf32_Sym
 *
sym
;

148 
FILE
 *
f
 = 
	`f›í
(
sig«tuª_out_fûe
, "w");

149 i‡(!
f
) {

150 
	`Ârötf
(
°dîr
, "Cannot open signature output file.\n");

155 
	`ñf_gë_d©a_£˘i⁄_ønge
(
ñf
, &
°¨t
, &
íd
);

158 i‡((
sym
 = 
	`ñf_gë_symbﬁ
(
ñf
, "begin_signature")))

159 
°¨t
 = 
sym
->
°_vÆue
;

160 i‡((
sym
 = 
	`ñf_gë_symbﬁ
(
ñf
, "end_signature")))

161 
íd
 = 
sym
->
°_vÆue
;

164 
uöt32_t
 
addr
 = 
°¨t
;ádd∏< 
íd
;áddr += 4)

165 
	`Ârötf
(
f
, "%08x\n", 
	`mem‹y_ªad_w
(
addr
));

167 
	`f˛o£
(
f
);

168 
	`ñf_dñëe
(
ñf
);

169 
	}
}

172 #i‚de‡
CYCLE_PER_STEP


173 
	#CYCLE_PER_STEP
 100

	)

176 #i‚de‡
MEM_SIZE


177 
	#MEM_SIZE
 0xFFFFFFFFULL

	)

179 
	#STACK_SIZE
 0x1000

	)

180 
	#ARGS_OFFSET_SIZE
 0x1000

	)

188 
riscv_t
 *
	grv
;

189 #ifde‡
__EMSCRIPTEN__


190 
	$ödúe˘_rv_hÆt
()

192 
	`rv_hÆt
(
rv
);

193 
	}
}

196 
	$maö
(
¨gc
, **
¨gs
)

198 i‡(
¨gc
 =1 || !
	`∑r£_¨gs
◊rgc, 
¨gs
)) {

199 
	`¥öt_ußge
(
¨gs
[0]);

203 
run_Êag
 = 0;

204 
run_Êag
 |
›t_åa˚
;

205 #i‡
	`RV32_HAS
(
GDBSTUB
)

206 
run_Êag
 |
›t_gdb°ub
 << 1;

208 
run_Êag
 |
›t_¥of_d©a
 << 2;

210 
vm_©å_t
 
©å
 = {

211 .
mem_size
 = 512 * 1024 * 1024,

212 .
°ack_size
 = 
STACK_SIZE
,

213 .
¨gs_off£t_size
 = 
ARGS_OFFSET_SIZE
,

214 .
¨gc
 = 
¥og_¨gc
,

215 .
¨gv
 = 
¥og_¨gs
,

216 .
log_Àvñ
 = 0,

217 .
run_Êag
 =Ñun_flag,

218 .
¥ofûe_ouçut_fûe
 = 
¥of_out_fûe
,

219 #i‡
	`RV32_HAS
(
SYSTEM
)

220 .
d©a
.
sy°em
 = 
	`mÆloc
((
vm_sy°em_t
)),

222 .
d©a
.
u£r
 = 
	`mÆloc
((
vm_u£r_t
)),

224 .
cy˛e_≥r_°ï
 = 
CYCLE_PER_STEP
,

225 .
Ælow_mißlign
 = 
›t_mißlig√d
,

227 #i‡
	`RV32_HAS
(
SYSTEM
)

228 
	`as£π
(
©å
.
d©a
.
sy°em
);

229 
©å
.
d©a
.
sy°em
->
kî√l
 = "build/Image";

230 
©å
.
d©a
.
sy°em
->
öôrd
 = "build/rootfs.cpio";

231 
©å
.
d©a
.
sy°em
->
dtb
 = "build/minimal.dtb";

233 
	`as£π
(
©å
.
d©a
.
u£r
);

234 
©å
.
d©a
.
u£r
->
ñf_¥ogøm
 = 
›t_¥og_«me
;

238 
rv
 = 
	`rv_¸óã
(&
©å
);

239 i‡(!
rv
) {

240 
	`Ârötf
(
°dîr
, "UnableÅo createÑiscvÉmulator\n");

241 
©å
.
exô_code
 = 1;

242 
íd
;

245 
	`rv_run
(
rv
);

248 i‡(
›t_dump_ªgs
)

249 
	`dump_ªgi°îs
(
rv
, 
ªgi°îs_out_fûe
);

252 i‡(
›t_¨ch_ã°
)

253 
	`dump_ã°_sig«tuª
(
›t_¥og_«me
);

256 
	`rv_dñëe
(
rv
);

258 
	`¥ötf
("ö„ri‹Éxô codê%d\n", 
©å
.
exô_code
);

260 
íd
:

261 
	`‰ì
(
©å
.
d©a
.
u£r
);

262 
	`‰ì
(
¥of_out_fûe
);

263  
©å
.
exô_code
;

264 
	}
}

	@src/map.c

16 
	~<as£π.h
>

17 
	~<°döt.h
>

18 
	~<°dlib.h
>

19 
	~<°rög.h
>

21 
	~"m≠.h
"

24 
	sm≠_öã∫Æ
 {

25 
m≠_node_t
 *
	mroŸ
;

28 
size_t
 
	mkey_size
, 
	md©a_size
;

30 
m≠_cmp_t
 (*
com∑øt‹
)(const *, const *);

40 
	#RB_MAX_DEPTH
 ((*Ë<< 4)

	)

42 íum { 
	mRB_BLACK
 = 0, 
	mRB_RED
 } 
	tm≠_cﬁ‹_t
;

45 
ölöe
 
m≠_node_t
 *
	$rb_node_gë_À·
(c⁄° 
m≠_node_t
 *
node
)

47  
node
->
À·
;

48 
	}
}

50 
ölöe
 
	$rb_node_£t_À·
(
m≠_node_t
 *
node
, m≠_node_à*
À·
)

52 
node
->
À·
 =Üeft;

53 
	}
}

56 
ölöe
 
m≠_node_t
 *
	$rb_node_gë_right
(c⁄° 
m≠_node_t
 *
node
)

58  (
m≠_node_t
 *Ë(((
uöçå_t
Ë
node
->
right_ªd
) & ~3);

59 
	}
}

61 
ölöe
 
	$rb_node_£t_right
(
m≠_node_t
 *
node
, m≠_node_à*
right
)

63 
node
->
right_ªd
 = (
m≠_node_t
 *Ë(((
uöçå_t
Ë
right
) |

64 (((
uöçå_t
Ë
node
->
right_ªd
) & 1));

65 
	}
}

68 
ölöe
 
m≠_cﬁ‹_t
 
	$rb_node_gë_cﬁ‹
(c⁄° 
m≠_node_t
 *
node
)

70  ((
uöçå_t
Ë
node
->
right_ªd
) & 1;

71 
	}
}

73 
ölöe
 
	$rb_node_£t_cﬁ‹
(
m≠_node_t
 *
node
, 
m≠_cﬁ‹_t
 
cﬁ‹
)

75 
node
->
right_ªd
 =

76 (
m≠_node_t
 *Ë(((
uöçå_t
Ë
node
->
right_ªd
 & ~3Ë| 
cﬁ‹
);

77 
	}
}

79 
ölöe
 
	$rb_node_£t_ªd
(
m≠_node_t
 *
node
)

81 
node
->
right_ªd
 = (
m≠_node_t
 *Ë(((
uöçå_t
)Çode->right_red) | 1);

82 
	}
}

84 
ölöe
 
	$rb_node_£t_bœck
(
m≠_node_t
 *
node
)

86 
node
->
right_ªd
 = (
m≠_node_t
 *Ë(((
uöçå_t
)Çode->right_red) & ~3);

87 
	}
}

90 
ölöe
 
	$rb_node_öô
(
m≠_node_t
 *
node
)

92 
	`as£π
((((
uöçå_t
Ë
node
) & (0x1)) == 0);

93 
	`rb_node_£t_À·
(
node
, 
NULL
);

94 
	`rb_node_£t_right
(
node
, 
NULL
);

95 
	`rb_node_£t_ªd
(
node
);

96 
	}
}

99 
	#rb_node_rŸ©e_À·
(
x_node
, 
r_node
) \

101 (
r_node
Ë
	`rb_node_gë_right
((
x_node
)); \

102 
	`rb_node_£t_right
((
x_node
), 
	`rb_node_gë_À·
((
r_node
))); \

103 
	`rb_node_£t_À·
((
r_node
), (
x_node
)); \

104 } 0)

	)

106 
	#rb_node_rŸ©e_right
(
x_node
, 
r_node
) \

108 (
r_node
Ë
	`rb_node_gë_À·
((
x_node
)); \

109 
	`rb_node_£t_À·
((
x_node
), 
	`rb_node_gë_right
((
r_node
))); \

110 
	`rb_node_£t_right
((
r_node
), (
x_node
)); \

111 } 0)

	)

114 
m≠_node_t
 *
	mnode
;

115 
m≠_cmp_t
 
	mcmp
;

116 } 
	trb_∑th_íåy_t
;

118 
ölöe
 
m≠_node_t
 *
	$rb_£¨ch
(
m≠_t
 
rb
, c⁄° 
m≠_node_t
 *
node
)

120 
m≠_node_t
 *
ªt
 = 
rb
->
roŸ
;

121 
ªt
) {

122 
m≠_cmp_t
 
cmp
 = (
rb
->
com∑øt‹
)(
node
->
key
, 
ªt
->key);

123 
cmp
) {

124 
_CMP_EQUAL
:

125  
ªt
;

126 
_CMP_LESS
:

127 
ªt
 = 
	`rb_node_gë_À·
(ret);

129 
_CMP_GREATER
:

130 
ªt
 = 
	`rb_node_gë_right
(ret);

133 
__UNREACHABLE
;

137  
ªt
;

138 
	}
}

140 
	$rb_ö£π
(
m≠_t
 
rb
, 
m≠_node_t
 *
node
)

142 
rb_∑th_íåy_t
 
∑th
[
RB_MAX_DEPTH
];

143 
rb_∑th_íåy_t
 *
∑thp
;

144 
	`rb_node_öô
(
node
);

147 
∑th
->
node
 = 
rb
->
roŸ
;

148 
∑thp
 = 
∑th
;Ö©hp->
node
;Öathp++) {

149 
m≠_cmp_t
 
cmp
 = 
∑thp
->cmp =

150 (
rb
->
com∑øt‹
)(
node
->
key
, 
∑thp
->node->key);

151 
cmp
) {

152 
_CMP_LESS
:

153 
∑thp
[1].
node
 = 
	`rb_node_gë_À·
(pathp->node);

155 
_CMP_GREATER
:

156 
∑thp
[1].
node
 = 
	`rb_node_gë_right
(pathp->node);

160 
__UNREACHABLE
;

164 
∑thp
->
node
 =Çode;

166 
	`as£π
(!
	`rb_node_gë_À·
(
node
));

167 
	`as£π
(!
	`rb_node_gë_right
(
node
));

170 
∑thp
--; (
uöçå_t
Ë∑th∞>(uöçå_tË
∑th
;Öathp--) {

171 
m≠_node_t
 *
˙ode
 = 
∑thp
->
node
;

172 i‡(
∑thp
->
cmp
 =
_CMP_LESS
) {

173 
m≠_node_t
 *
À·
 = 
∑thp
[1].
node
;

174 
	`rb_node_£t_À·
(
˙ode
, 
À·
);

175 i‡(
	`rb_node_gë_cﬁ‹
(
À·
Ë=
RB_BLACK
)

177 
m≠_node_t
 *
À·À·
 = 
	`rb_node_gë_À·
(
À·
);

178 i‡(
À·À·
 && (
	`rb_node_gë_cﬁ‹
÷e·À·Ë=
RB_RED
)) {

180 
m≠_node_t
 *
äode
;

181 
	`rb_node_£t_bœck
(
À·À·
);

182 
	`rb_node_rŸ©e_right
(
˙ode
, 
äode
);

183 
˙ode
 = 
äode
;

186 
m≠_node_t
 *
right
 = 
∑thp
[1].
node
;

187 
	`rb_node_£t_right
(
˙ode
, 
right
);

188 i‡(
	`rb_node_gë_cﬁ‹
(
right
Ë=
RB_BLACK
)

190 
m≠_node_t
 *
À·
 = 
	`rb_node_gë_À·
(
˙ode
);

191 i‡(
À·
 && (
	`rb_node_gë_cﬁ‹
÷e·Ë=
RB_RED
)) {

193 
	`rb_node_£t_bœck
(
À·
);

194 
	`rb_node_£t_bœck
(
right
);

195 
	`rb_node_£t_ªd
(
˙ode
);

198 
m≠_node_t
 *
äode
;

199 
m≠_cﬁ‹_t
 
tcﬁ‹
 = 
	`rb_node_gë_cﬁ‹
(
˙ode
);

200 
	`rb_node_rŸ©e_À·
(
˙ode
, 
äode
);

201 
	`rb_node_£t_cﬁ‹
(
äode
, 
tcﬁ‹
);

202 
	`rb_node_£t_ªd
(
˙ode
);

203 
˙ode
 = 
äode
;

206 
∑thp
->
node
 = 
˙ode
;

210 
rb
->
roŸ
 = 
∑th
->
node
;

211 
	`rb_node_£t_bœck
(
rb
->
roŸ
);

212 
	}
}

214 
	$rb_ªmove
(
m≠_t
 
rb
, 
m≠_node_t
 *
node
)

216 
rb_∑th_íåy_t
 
∑th
[
RB_MAX_DEPTH
];

217 
rb_∑th_íåy_t
 *
∑thp
 = 
NULL
, *
nodï
 = NULL;

220 
∑th
->
node
 = 
rb
->
roŸ
;

221 
∑thp
 = 
∑th
;

222 
∑thp
->
node
) {

223 
m≠_cmp_t
 
cmp
 = 
∑thp
->cmp =

224 (
rb
->
com∑øt‹
)(
node
->
key
, 
∑thp
->node->key);

225 i‡(
cmp
 =
_CMP_LESS
) {

226 
∑thp
[1].
node
 = 
	`rb_node_gë_À·
(pathp->node);

228 
∑thp
[1].
node
 = 
	`rb_node_gë_right
(pathp->node);

229 i‡(
cmp
 =
_CMP_EQUAL
) {

231 
∑thp
->
cmp
 = 
_CMP_GREATER
;

232 
nodï
 = 
∑thp
;

233 
∑thp
++;Ö©hp->
node
;Öathp++) {

234 
∑thp
->
cmp
 = 
_CMP_LESS
;

235 
∑thp
[1].
node
 = 
	`rb_node_gë_À·
(pathp->node);

240 
∑thp
++;

242 
	`as£π
(
nodï
 &&Çodï->
node
 ==Çode);

244 
∑thp
--;

245 i‡(
∑thp
->
node
 !=Çode) {

247 
m≠_cﬁ‹_t
 
tcﬁ‹
 = 
	`rb_node_gë_cﬁ‹
(
∑thp
->
node
);

248 
	`rb_node_£t_cﬁ‹
(
∑thp
->
node
, 
	`rb_node_gë_cﬁ‹
(node));

249 
	`rb_node_£t_À·
(
∑thp
->
node
, 
	`rb_node_gë_À·
(node));

256 
	`rb_node_£t_right
(
∑thp
->
node
, 
	`rb_node_gë_right
(node));

257 
	`rb_node_£t_cﬁ‹
(
node
, 
tcﬁ‹
);

262 
nodï
->
node
 = 
∑thp
->node;

263 
∑thp
->
node
 =Çode;

264 i‡(
nodï
 =
∑th
) {

265 
rb
->
roŸ
 = 
nodï
->
node
;

267 i‡(
nodï
[-1].
cmp
 =
_CMP_LESS
)

268 
	`rb_node_£t_À·
(
nodï
[-1].
node
,Çodep->node);

270 
	`rb_node_£t_right
(
nodï
[-1].
node
,Çodep->node);

273 
m≠_node_t
 *
À·
 = 
	`rb_node_gë_À·
(
node
);

274 i‡(
À·
) {

278 
	`as£π
(
	`rb_node_gë_cﬁ‹
(
node
Ë=
RB_BLACK
);

279 
	`as£π
(
	`rb_node_gë_cﬁ‹
(
À·
Ë=
RB_RED
);

280 
	`rb_node_£t_bœck
(
À·
);

281 i‡(
∑thp
 =
∑th
) {

285 
rb
->
roŸ
 = 
À·
;

287 i‡(
∑thp
[-1].
cmp
 =
_CMP_LESS
)

288 
	`rb_node_£t_À·
(
∑thp
[-1].
node
, 
À·
);

290 
	`rb_node_£t_right
(
∑thp
[-1].
node
, 
À·
);

294 i‡(
∑thp
 =
∑th
) {

296 
rb
->
roŸ
 = 
NULL
;

306 i‡(
	`rb_node_gë_cﬁ‹
(
∑thp
->
node
Ë=
RB_RED
) {

308 
	`as£π
(
∑thp
[-1].
cmp
 =
_CMP_LESS
);

309 
	`rb_node_£t_À·
(
∑thp
[-1].
node
, 
NULL
);

314 
∑thp
->
node
 = 
NULL
;

315 
∑thp
--; (
uöçå_t
Ë∑th∞>(uöçå_tË
∑th
;Öathp--) {

316 
	`as£π
(
∑thp
->
cmp
 !
_CMP_EQUAL
);

317 i‡(
∑thp
->
cmp
 =
_CMP_LESS
) {

318 
	`rb_node_£t_À·
(
∑thp
->
node
,Öathp[1].node);

319 i‡(
	`rb_node_gë_cﬁ‹
(
∑thp
->
node
Ë=
RB_RED
) {

320 
m≠_node_t
 *
right
 = 
	`rb_node_gë_right
(
∑thp
->
node
);

321 
m≠_node_t
 *
righée·
 = 
	`rb_node_gë_À·
(
right
);

322 
m≠_node_t
 *
äode
;

323 i‡(
righée·
 && (
	`rb_node_gë_cﬁ‹
‘ighée·Ë=
RB_RED
)) {

334 
	`rb_node_£t_bœck
(
∑thp
->
node
);

335 
	`rb_node_rŸ©e_right
(
right
, 
äode
);

336 
	`rb_node_£t_right
(
∑thp
->
node
, 
äode
);

337 
	`rb_node_rŸ©e_À·
(
∑thp
->
node
, 
äode
);

346 
	`rb_node_rŸ©e_À·
(
∑thp
->
node
, 
äode
);

350 
	`as£π
((
uöçå_t
Ë
∑thp
 > (uöçå_tË
∑th
);

351 i‡(
∑thp
[-1].
cmp
 =
_CMP_LESS
)

352 
	`rb_node_£t_À·
(
∑thp
[-1].
node
, 
äode
);

354 
	`rb_node_£t_right
(
∑thp
[-1].
node
, 
äode
);

357 
m≠_node_t
 *
right
 = 
	`rb_node_gë_right
(
∑thp
->
node
);

358 
m≠_node_t
 *
righée·
 = 
	`rb_node_gë_À·
(
right
);

359 i‡(
righée·
 && (
	`rb_node_gë_cﬁ‹
‘ighée·Ë=
RB_RED
)) {

367 
m≠_node_t
 *
äode
;

368 
	`rb_node_£t_bœck
(
righée·
);

369 
	`rb_node_rŸ©e_right
(
right
, 
äode
);

370 
	`rb_node_£t_right
(
∑thp
->
node
, 
äode
);

371 
	`rb_node_rŸ©e_À·
(
∑thp
->
node
, 
äode
);

375 i‡(
∑thp
 =
∑th
) {

377 
rb
->
roŸ
 = 
äode
;

379 i‡(
∑thp
[-1].
cmp
 =
_CMP_LESS
)

380 
	`rb_node_£t_À·
(
∑thp
[-1].
node
, 
äode
);

382 
	`rb_node_£t_right
(
∑thp
[-1].
node
, 
äode
);

393 
m≠_node_t
 *
äode
;

394 
	`rb_node_£t_ªd
(
∑thp
->
node
);

395 
	`rb_node_rŸ©e_À·
(
∑thp
->
node
, 
äode
);

396 
∑thp
->
node
 = 
äode
;

400 
	`rb_node_£t_right
(
∑thp
->
node
,Öathp[1].node);

401 
m≠_node_t
 *
À·
 = 
	`rb_node_gë_À·
(
∑thp
->
node
);

402 i‡(
	`rb_node_gë_cﬁ‹
(
À·
Ë=
RB_RED
) {

403 
m≠_node_t
 *
äode
;

404 
m≠_node_t
 *
À·right
 = 
	`rb_node_gë_right
(
À·
);

405 
m≠_node_t
 *
À·righée·
 = 
	`rb_node_gë_À·
(
À·right
);

406 i‡(
À·righée·
 &&

407 (
	`rb_node_gë_cﬁ‹
(
À·righée·
Ë=
RB_RED
)) {

417 
m≠_node_t
 *
unode
;

418 
	`rb_node_£t_bœck
(
À·righée·
);

419 
	`rb_node_rŸ©e_right
(
∑thp
->
node
, 
unode
);

420 
	`rb_node_rŸ©e_right
(
∑thp
->
node
, 
äode
);

421 
	`rb_node_£t_right
(
unode
, 
äode
);

422 
	`rb_node_rŸ©e_À·
(
unode
, 
äode
);

433 
	`as£π
(
À·right
);

434 
	`rb_node_£t_ªd
(
À·right
);

435 
	`rb_node_rŸ©e_right
(
∑thp
->
node
, 
äode
);

436 
	`rb_node_£t_bœck
(
äode
);

442 i‡(
∑thp
 =
∑th
) {

444 
rb
->
roŸ
 = 
äode
;

446 i‡(
∑thp
[-1].
cmp
 =
_CMP_LESS
)

447 
	`rb_node_£t_À·
(
∑thp
[-1].
node
, 
äode
);

449 
	`rb_node_£t_right
(
∑thp
[-1].
node
, 
äode
);

452 } i‡(
	`rb_node_gë_cﬁ‹
(
∑thp
->
node
Ë=
RB_RED
) {

453 
m≠_node_t
 *
À·À·
 = 
	`rb_node_gë_À·
(
À·
);

454 i‡(
À·À·
 && (
	`rb_node_gë_cﬁ‹
÷e·À·Ë=
RB_RED
)) {

462 
m≠_node_t
 *
äode
;

463 
	`rb_node_£t_bœck
(
∑thp
->
node
);

464 
	`rb_node_£t_ªd
(
À·
);

465 
	`rb_node_£t_bœck
(
À·À·
);

466 
	`rb_node_rŸ©e_right
(
∑thp
->
node
, 
äode
);

468 
	`as£π
((
uöçå_t
Ë
∑thp
 > (uöçå_tË
∑th
);

469 i‡(
∑thp
[-1].
cmp
 =
_CMP_LESS
)

470 
	`rb_node_£t_À·
(
∑thp
[-1].
node
, 
äode
);

472 
	`rb_node_£t_right
(
∑thp
[-1].
node
, 
äode
);

482 
	`rb_node_£t_ªd
(
À·
);

483 
	`rb_node_£t_bœck
(
∑thp
->
node
);

488 
m≠_node_t
 *
À·À·
 = 
	`rb_node_gë_À·
(
À·
);

489 i‡(
À·À·
 && (
	`rb_node_gë_cﬁ‹
÷e·À·Ë=
RB_RED
)) {

497 
m≠_node_t
 *
äode
;

498 
	`rb_node_£t_bœck
(
À·À·
);

499 
	`rb_node_rŸ©e_right
(
∑thp
->
node
, 
äode
);

503 i‡(
∑thp
 =
∑th
) {

505 
rb
->
roŸ
 = 
äode
;

507 i‡(
∑thp
[-1].
cmp
 =
_CMP_LESS
)

508 
	`rb_node_£t_À·
(
∑thp
[-1].
node
, 
äode
);

510 
	`rb_node_£t_right
(
∑thp
[-1].
node
, 
äode
);

521 
	`rb_node_£t_ªd
(
À·
);

528 
rb
->
roŸ
 = 
∑th
->
node
;

529 
	`as£π
(
	`rb_node_gë_cﬁ‹
(
rb
->
roŸ
Ë=
RB_BLACK
);

530 
	}
}

532 
	$rb_de°roy_ªcur£
(
m≠_t
 
rb
, 
m≠_node_t
 *
node
)

534 i‡(!
node
)

537 
	`rb_de°roy_ªcur£
(
rb
, 
	`rb_node_gë_À·
(
node
));

538 
	`rb_node_£t_À·
((
node
), 
NULL
);

539 
	`rb_de°roy_ªcur£
(
rb
, 
	`rb_node_gë_right
(
node
));

540 
	`rb_node_£t_right
((
node
), 
NULL
);

541 
	`‰ì
(
node
->
key
);

542 
	`‰ì
(
node
->
d©a
);

543 
	`‰ì
(
node
);

544 
	}
}

546 
m≠_node_t
 *
	$m≠_¸óã_node
(*
key
,

547 *
vÆue
,

548 
size_t
 
ksize
,

549 
size_t
 
vsize
)

551 
m≠_node_t
 *
node
 = 
	`ˇŒoc
(1, (map_node_t));

552 
	`as£π
(
node
);

555 
node
->
key
 = 
	`mÆloc
(
ksize
),Çode->
d©a
 = mÆloc(
vsize
);

556 
	`as£π
(
node
->
key
);

557 
	`as£π
(
node
->
d©a
);

563 i‡(!
key
)

564 
	`mem£t
(
node
->
key
, 0, 
ksize
);

566 
	`mem˝y
(
node
->
key
, key, 
ksize
);

568 i‡(!
vÆue
)

569 
	`mem£t
(
node
->
d©a
, 0, 
vsize
);

571 
	`mem˝y
(
node
->
d©a
, 
vÆue
, 
vsize
);

573  
node
;

574 
	}
}

577 
m≠_t
 
m≠_√w
(
size_t
 
s1
,

578 
size_t
 
s2
,

579 
	$m≠_cmp_t
 (*
cmp
)(const *, const *))

581 
m≠_t
 
åì
 = 
	`mÆloc
((
m≠_öã∫Æ
));

582 
	`as£π
(
åì
);

584 
åì
->
key_size
 = 
s1
,Åªe->
d©a_size
 = 
s2
;

585 
åì
->
com∑øt‹
 = 
cmp
;

586 
åì
->
roŸ
 = 
NULL
;

587  
åì
;

588 
	}
}

591 
boﬁ
 
	$m≠_ö£π
(
m≠_t
 
obj
, *
key
, *
vÆ
)

593 
m≠_node_t
 *
node
 = 
	`m≠_¸óã_node
(
key
, 
vÆ
, 
obj
->
key_size
, obj->
d©a_size
);

594 
	`rb_ö£π
(
obj
, 
node
);

595  
åue
;

596 
	}
}

599 
	$m≠_föd
(
m≠_t
 
obj
, 
m≠_ôî_t
 *
ô
, *
key
)

601 
m≠_node_t
 
tmp_node
 = {.
key
 = key};

602 
ô
->
node
 = 
	`rb_£¨ch
(
obj
, &
tmp_node
);

603 
	}
}

605 
boﬁ
 
	$m≠_em±y
(
m≠_t
 
obj
)

607  !
obj
->
roŸ
;

608 
	}
}

611 
boﬁ
 
	$m≠_©_íd
(
m≠_t
 
m
 
UNUSED
, 
m≠_ôî_t
 *
ô
)

613  !(
ô
->
node
);

614 
	}
}

617 
	$m≠_îa£
(
m≠_t
 
obj
, 
m≠_ôî_t
 *
ô
)

619 i‡(!
ô
->
node
)

622 
	`rb_ªmove
(
obj
, 
ô
->
node
);

623 
	`‰ì
(
ô
->
node
->
key
);

624 
	`‰ì
(
ô
->
node
->
d©a
);

625 
	`‰ì
(
ô
->
node
);

626 
	}
}

629 
	$m≠_˛ór
(
m≠_t
 
obj
)

631 
	`rb_de°roy_ªcur£
(
obj
, obj->
roŸ
);

632 
obj
->
roŸ
 = 
NULL
;

633 
	}
}

636 
	$m≠_dñëe
(
m≠_t
 
obj
)

638 
	`m≠_˛ór
(
obj
);

639 
	`‰ì
(
obj
);

640 
	}
}

	@src/map.h

16 #¥agm®
⁄˚


18 
	~<°dboﬁ.h
>

19 
	~<°ddef.h
>

30 
	sm≠_node
 {

31 *
	mkey
, *
	md©a
;

32 
m≠_node
 *
	mÀ·
, *
	mright_ªd
;

33 } 
	tm≠_node_t
;

35 íum { 
	m_CMP_LESS
 = -1, 
	m_CMP_EQUAL
 = 0, 
	m_CMP_GREATER
 = 1 } 
	tm≠_cmp_t
;

37 
m≠_öã∫Æ
 *
	tm≠_t
;

40 
m≠_node_t
 *
	m¥ev
, *
	mnode
;

41 
size_t
 
	mcou¡
;

42 } 
	tm≠_ôî_t
;

44 
	#m≠_ôî_vÆue
(
ô
, 
ty≥
Ë(*—y≥ *Ë(ô)->
node
->
d©a
)

	)

47 
ölöe
 
m≠_cmp_t
 
	$m≠_cmp_öt
(c⁄° *
¨g0
, c⁄° *
¨g1
)

49 *
a
 = (*Ë
¨g0
;

50 *
b
 = (*Ë
¨g1
;

51  (*
a
 < *
b
Ë? 
_CMP_LESS
 : (*®> *bË? 
_CMP_GREATER
 : 
_CMP_EQUAL
;

52 
	}
}

55 
ölöe
 
m≠_cmp_t
 
	$m≠_cmp_uöt
(c⁄° *
¨g0
, c⁄° *
¨g1
)

57 *
a
 = (*Ë
¨g0
;

58 *
b
 = (*Ë
¨g1
;

59  (*
a
 < *
b
Ë? 
_CMP_LESS
 : (*®> *bË? 
_CMP_GREATER
 : 
_CMP_EQUAL
;

60 
	}
}

63 
m≠_t
 
m≠_√w
(
size_t
, size_t, 
	$m≠_cmp_t
 (*
cmp
)(const *, const *));

66 
boﬁ
 
	`m≠_ö£π
(
m≠_t
, *, *);

69 
	`m≠_föd
(
m≠_t
, 
m≠_ôî_t
 *, *);

70 
boﬁ
 
	`m≠_em±y
(
m≠_t
);

73 
boﬁ
 
	`m≠_©_íd
(
m≠_t
, 
m≠_ôî_t
 *);

76 
	`m≠_îa£
(
m≠_t
, 
m≠_ôî_t
 *);

77 
	`m≠_˛ór
(
m≠_t
);

80 
	`m≠_dñëe
(
m≠_t
);

82 
	#m≠_öô
(
key_ty≥
, 
ñemít_ty≥
, 
__func
) \

83 
	`m≠_√w
((
key_ty≥
), (
ñemít_ty≥
), 
__func
)

	)

	@src/mpool.c

5 
	~<°dlib.h
>

6 
	~<°rög.h
>

7 #i‡
HAVE_MMAP


8 
	~<sys/mm™.h
>

9 
	~<uni°d.h
>

12 
	~"mpoﬁ.h
"

14 
	smemchunk
 {

15 
memchunk
 *
	m√xt
;

16 } 
	tmemchunk_t
;

18 
	s¨ó
 {

19 *
	mm≠≥d
;

20 
¨ó
 *
	m√xt
;

21 } 
	t¨ó_t
;

23 
	smpoﬁ
 {

24 
size_t
 
	mchunk_cou¡
;

25 
size_t
 
	m∑ge_cou¡
;

26 
size_t
 
	mchunk_size
;

27 
memchunk
 *
	m‰ì_chunk_hód
;

28 
¨ó_t
 
	m¨ó
;

29 } 
	tmpoﬁ_t
;

31 *
	$mem_¨ía
(
size_t
 
sz
)

33 *
p
;

34 #i‡
HAVE_MMAP


35 
p
 = 
	`mm≠
(0, 
sz
, 
PROT_READ
 | 
PROT_WRITE
, 
MAP_PRIVATE
 | 
MAP_ANON
, -1, 0);

36 i‡(
p
 =
MAP_FAILED
)

37  
NULL
;

39 
p
 = 
	`mÆloc
(
sz
);

40 i‡(!
p
)

41  
NULL
;

43  
p
;

44 
	}
}

46 
mpoﬁ_t
 *
	$mpoﬁ_¸óã
(
size_t
 
poﬁ_size
, size_à
chunk_size
)

48 
mpoﬁ_t
 *
√w_mp
 = 
	`mÆloc
((mpool_t));

49 i‡(!
√w_mp
)

50  
NULL
;

52 
√w_mp
->
¨ó
.
√xt
 = 
NULL
;

53 
size_t
 
pgsz
 = 
	`gë∑gesize
();

54 i‡(
poﬁ_size
 < 
chunk_size
 + (
memchunk_t
))

55 
poﬁ_size
 +(
memchunk_t
);

56 
size_t
 
∑ge_cou¡
 = (
poﬁ_size
 + 
pgsz
 - 1) /Ögsz;

57 *
p
 = 
	`mem_¨ía
(
∑ge_cou¡
 * 
pgsz
);

58 i‡(!
p
) {

59 
	`‰ì
(
√w_mp
);

60  
NULL
;

63 
√w_mp
->
¨ó
.
m≠≥d
 = 
p
;

64 
√w_mp
->
∑ge_cou¡
 =Öage_count;

65 
√w_mp
->
chunk_cou¡
 = 
poﬁ_size
 / ((
memchunk_t
Ë+ 
chunk_size
);

66 
√w_mp
->
chunk_size
 = chunk_size;

67 
√w_mp
->
‰ì_chunk_hód
 = (
memchunk_t
 *Ë
p
;

68 
memchunk_t
 *
cur
 = 
√w_mp
->
‰ì_chunk_hód
;

69 
size_t
 
i
 = 0; i < 
√w_mp
->
chunk_cou¡
 - 1; i++) {

70 
cur
->
√xt
 =

71 (
memchunk_t
 *Ë((*Ë
cur
 + ((memchunk_tË+ 
chunk_size
));

72 
cur
 = cur->
√xt
;

74 
cur
->
√xt
 = 
NULL
;

75  
√w_mp
;

76 
	}
}

78 *
	$mpoﬁ_exãnd
(
mpoﬁ_t
 *
mp
)

80 
size_t
 
poﬁ_size
 = 
mp
->
∑ge_cou¡
 * 
	`gë∑gesize
();

81 *
p
 = 
	`mem_¨ía
(
poﬁ_size
);

82 i‡(!
p
)

83  
NULL
;

85 
¨ó_t
 *
√w_¨ó
 = 
	`mÆloc
((area_t));

86 i‡(!
√w_¨ó
)

87  
NULL
;

89 
√w_¨ó
->
m≠≥d
 = 
p
;

90 
√w_¨ó
->
√xt
 = 
NULL
;

91 
size_t
 
chunk_cou¡
 = 
poﬁ_size
 / ((
memchunk_t
Ë+ 
mp
->
chunk_size
);

92 
mp
->
‰ì_chunk_hód
 = (
memchunk_t
 *Ë
p
;

93 
memchunk_t
 *
cur
 = 
mp
->
‰ì_chunk_hód
;

94 
size_t
 
i
 = 0; i < 
chunk_cou¡
 - 1; i++) {

95 
cur
->
√xt
 = (
memchunk_t
 *) ((*) cur +

96 ((
memchunk_t
Ë+ 
mp
->
chunk_size
));

97 
cur
 = cur->
√xt
;

99 
mp
->
chunk_cou¡
 += chunk_count;

102 
¨ó_t
 *
cur_¨ó
 = &
mp
->
¨ó
;

103 
cur_¨ó
->
√xt
)

104 
cur_¨ó
 = cur_¨ó->
√xt
;

105 
cur_¨ó
->
√xt
 = 
√w_¨ó
;

107  
p
;

108 
	}
}

110 
FORCE_INLINE
 *
	$mpoﬁ_Æloc_hñ≥r
(
mpoﬁ_t
 *
mp
)

112 *
±r
 = (*Ë
mp
->
‰ì_chunk_hód
 + (
memchunk_t
);

113 
mp
->
‰ì_chunk_hód
 = mp->‰ì_chunk_hód->
√xt
;

114 
mp
->
chunk_cou¡
--;

115  
±r
;

116 
	}
}

118 *
	$mpoﬁ_Æloc
(
mpoﬁ_t
 *
mp
)

120 i‡(!
mp
->
chunk_cou¡
 && !(
	`mpoﬁ_exãnd
(mp)))

121  
NULL
;

122  
	`mpoﬁ_Æloc_hñ≥r
(
mp
);

123 
	}
}

125 *
	$mpoﬁ_ˇŒoc
(
mpoﬁ_t
 *
mp
)

127 i‡(!
mp
->
chunk_cou¡
 && !(
	`mpoﬁ_exãnd
(mp)))

128  
NULL
;

129 *
±r
 = 
	`mpoﬁ_Æloc_hñ≥r
(
mp
);

130 
	`mem£t
(
±r
, 0, 
mp
->
chunk_size
);

131  
±r
;

132 
	}
}

134 
	$mpoﬁ_‰ì
(
mpoﬁ_t
 *
mp
, *
èrgë
)

136 
memchunk_t
 *
±r
 = (memchunk_à*Ë((*Ë
èrgë
 - (memchunk_t));

137 
±r
->
√xt
 = 
mp
->
‰ì_chunk_hód
;

138 
mp
->
‰ì_chunk_hód
 = 
±r
;

139 
mp
->
chunk_cou¡
++;

140 
	}
}

142 
	$mpoﬁ_de°roy
(
mpoﬁ_t
 *
mp
)

144 #i‡
HAVE_MMAP


145 
size_t
 
mem_size
 = 
mp
->
∑ge_cou¡
 * 
	`gë∑gesize
();

146 
¨ó_t
 *
cur
 = &
mp
->
¨ó
, *
tmp
 = 
NULL
;

147 
cur
) {

148 
tmp
 = 
cur
;

149 
cur
 = cur->
√xt
;

150 
	`munm≠
(
tmp
->
m≠≥d
, 
mem_size
);

151 i‡(
tmp
 !&
mp
->
¨ó
)

152 
	`‰ì
(
tmp
);

155 
¨ó_t
 *
cur
 = &
mp
->
¨ó
, *
tmp
 = 
NULL
;

156 
cur
) {

157 
tmp
 = 
cur
;

158 
cur
 = cur->
√xt
;

159 
	`‰ì
(
tmp
->
m≠≥d
);

160 i‡(
tmp
 !&
mp
->
¨ó
)

161 
	`‰ì
(
tmp
);

164 
	`‰ì
(
mp
);

165 
	}
}

	@src/mpool.h

5 #¥agm®
⁄˚


7 
	~<°ddef.h
>

9 
	gmpoﬁ
;

17 
mpoﬁ
 *
mpoﬁ_¸óã
(
size_t
 
poﬁ_size
, size_à
chunk_size
);

23 *
mpoﬁ_Æloc
(
mpoﬁ
 *
mp
);

30 *
mpoﬁ_ˇŒoc
(
mpoﬁ
 *
mp
);

37 
mpoﬁ_‰ì
(
mpoﬁ
 *
mp
, *
èrgë
);

43 
mpoﬁ_de°roy
(
mpoﬁ
 *
mp
);

	@src/riscv.c

6 
	~<as£π.h
>

7 
	~<°dio.h
>

8 
	~<°dlib.h
>

9 
	~<°rög.h
>

11 #i‡!
deföed
(
_WIN32
Ë&& !deföed(
_WIN64
)

12 
	~<uni°d.h
>

13 
	#FILENO
(
x
Ë
	`fûío
(x)

	)

15 
	#FILENO
(
x
Ë
	`_fûío
(x)

	)

16 
	#STDIN_FILENO
 
	`FILENO
(
°dö
)

	)

17 
	#STDOUT_FILENO
 
	`FILENO
(
°dout
)

	)

18 
	#STDERR_FILENO
 
	`FILENO
(
°dîr
)

	)

21 #ifde‡
__EMSCRIPTEN__


22 
	~<ems¸ùãn.h
>

25 
	~"ñf.h
"

26 
	~"mpoﬁ.h
"

27 
	~"riscv.h
"

28 
	~"riscv_¥iv©e.h
"

29 
	~"utûs.h
"

30 #i‡
RV32_HAS
(
JIT
)

31 #i‡
RV32_HAS
(
T2C
)

32 
	~<±hªad.h
>

34 
	~"ˇche.h
"

35 
	~"jô.h
"

36 
	#CODE_CACHE_SIZE
 (4 * 1024 * 1024)

	)

39 
	#BLOCK_IR_MAP_CAPACITY_BITS
 10

	)

41 #i‡!
RV32_HAS
(
JIT
)

43 
	$block_m≠_öô
(
block_m≠_t
 *
m≠
, c⁄° 
uöt8_t
 
bôs
)

45 
m≠
->
block_ˇ∑côy
 = 1 << 
bôs
;

46 
m≠
->
size
 = 0;

47 
m≠
->m≠ = 
	`ˇŒoc
(m≠->
block_ˇ∑côy
, (
block
 *));

48 
	`as£π
(
m≠
->map);

49 
	}
}

52 
	$block_m≠_˛ór
(
riscv_t
 *
rv
)

54 
block_m≠_t
 *
m≠
 = &
rv
->
block_m≠
;

55 
uöt32_t
 
i
 = 0; i < 
m≠
->
block_ˇ∑côy
; i++) {

56 
block_t
 *
block
 = 
m≠
->m≠[
i
];

57 i‡(!
block
)

60 
uöt32_t
 
idx
;

61 
rv_ö¢_t
 *
ú
, *
√xt
;

62 
idx
 = 0, 
ú
 = 
block
->
ú_hód
; idx < block->
n_ö¢
;

63 
idx
++, 
ú
 = 
√xt
) {

64 
	`‰ì
(
ú
->
fu£
);

65 
	`‰ì
(
ú
->
bønch_èbÀ
);

66 
√xt
 = 
ú
->next;

67 
	`mpoﬁ_‰ì
(
rv
->
block_ú_mp
, 
ú
);

69 
	`mpoﬁ_‰ì
(
rv
->
block_mp
, 
block
);

70 
m≠
->m≠[
i
] = 
NULL
;

72 
m≠
->
size
 = 0;

73 
	}
}

75 
	$block_m≠_de°roy
(
riscv_t
 *
rv
)

77 
	`block_m≠_˛ór
(
rv
);

78 
	`‰ì
(
rv
->
block_m≠
.
m≠
);

80 
	`mpoﬁ_de°roy
(
rv
->
block_mp
);

81 
	`mpoﬁ_de°roy
(
rv
->
block_ú_mp
);

82 
	}
}

85 
boﬁ
 
	$rv_£t_pc
(
riscv_t
 *
rv
, 
riscv_w‹d_t
 
pc
)

87 
	`as£π
(
rv
);

88 #i‡
	`RV32_HAS
(
EXT_C
)

89 i‡(
pc
 & 1)

91 i‡(
pc
 & 3)

93  
Ál£
;

95 
rv
->
PC
 = 
pc
;

96  
åue
;

97 
	}
}

99 
riscv_w‹d_t
 
	$rv_gë_pc
(
riscv_t
 *
rv
)

101 
	`as£π
(
rv
);

102  
rv
->
PC
;

103 
	}
}

105 
	$rv_£t_ªg
(
riscv_t
 *
rv
, 
uöt32_t
 
ªg
, 
riscv_w‹d_t
 
ö
)

107 
	`as£π
(
rv
);

108 i‡(
ªg
 < 
N_RV_REGS
 &&Ñeg !
rv_ªg_zîo
)

109 
rv
->
X
[
ªg
] = 
ö
;

110 
	}
}

112 
riscv_w‹d_t
 
	$rv_gë_ªg
(
riscv_t
 *
rv
, 
uöt32_t
 
ªg
)

114 
	`as£π
(
rv
);

115 i‡(
ªg
 < 
N_RV_REGS
)

116  
rv
->
X
[
ªg
];

119 
	}
}

129 
	$rv_ªm≠_°d°ªam
(
riscv_t
 *
rv
, 
fd_°ªam_∑ú_t
 *
f•
, 
uöt32_t
 
f•_size
)

131 
	`as£π
(
rv
);

133 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

134 
	`as£π
(
©å
 &&áâr->
fd_m≠
);

136 
uöt32_t
 
i
 = 0; i < 
f•_size
; i++) {

137 
fd
 = 
f•
[
i
].fd;

138 
FILE
 *
fûe
 = 
f•
[
i
].file;

140 i‡(!
fûe
)

142 i‡(
fd
 !
STDIN_FILENO
 && fd !
STDOUT_FILENO
 && fd !
STDERR_FILENO
)

146 
m≠_ôî_t
 
ô
;

147 
	`m≠_föd
(
©å
->
fd_m≠
, &
ô
, &
fd
);

148 i‡(
ô
.
node
)

149 
	`m≠_îa£
(
©å
->
fd_m≠
, &
ô
);

150 
	`m≠_ö£π
(
©å
->
fd_m≠
, &
fd
, &
fûe
);

153 
√w_fd
 = 
	`FILENO
(
fûe
);

154 
	`as£π
(
√w_fd
 != -1);

156 i‡(
fd
 =
STDIN_FILENO
)

157 
©å
->
fd_°dö
 = 
√w_fd
;

158 i‡(
fd
 =
STDOUT_FILENO
)

159 
©å
->
fd_°dout
 = 
√w_fd
;

161 
©å
->
fd_°dîr
 = 
√w_fd
;

163 
	}
}

165 
	#MEMIO
(
›
Ë
⁄_mem_
##
	)
›

166 
	#IO_HANDLER_IMPL
(
ty≥
, 
›
, 
RW
) \

167 
	`IIF
(
RW
)( \

168  
	`MEMIO
(
›
)(
UNUSED
 
riscv_t
 * 
rv
, 
riscv_w‹d_t
 
addr
, \

169 
riscv_
##
ty≥
##
_t
 
d©a
), \

170  
riscv_
##
ty≥
##
_t
 
	`MEMIO
(
›
)(
UNUSED
 
riscv_t
 * 
rv
, \

171 
riscv_w‹d_t
 
addr
)) \

173 
	`IIF
(
RW
) \

174 (
mem‹y_
##
	`›
(
addr
, (
uöt8_t
 *Ë&
d©a
),  memory_##op(addr)); \

175 }

	)

177 
	#R
 0

	)

178 
	#W
 1

	)

180 
	$IO_HANDLER_IMPL
(
w‹d
, 
i„tch
, 
R
)

181 
	$IO_HANDLER_IMPL
(
w‹d
, 
ªad_w
, 
R
)

182 
	$IO_HANDLER_IMPL
(
hÆf
, 
ªad_s
, 
R
)

183 
	$IO_HANDLER_IMPL
(
byã
, 
ªad_b
, 
R
)

185 
	$IO_HANDLER_IMPL
(
w‹d
, 
wrôe_w
, 
W
)

186 
	$IO_HANDLER_IMPL
(
hÆf
, 
wrôe_s
, 
W
)

187 
	$IO_HANDLER_IMPL
(
byã
, 
wrôe_b
, 
W
)

189 #unde‡
R


190 #unde‡
W


192 #i‡
	`RV32_HAS
(
T2C
)

193 
±hªad_t
 
t2c_thªad
;

194 *
	$t2c_ru∆o›
(*
¨g
)

196 
riscv_t
 *
rv
 = (riscv_à*Ë
¨g
;

197 
rv
->
quô
) {

198 i‡(!
	`li°_em±y
(&
rv
->
waô_queue
)) {

199 
queue_íåy_t
 *
íåy
 =

200 
	`li°_œ°_íåy
(&
rv
->
waô_queue
, 
queue_íåy_t
, 
li°
);

201 
	`±hªad_muãx_lock
(&
rv
->
waô_queue_lock
);

202 
	`li°_dñ_öô
(&
íåy
->
li°
);

203 
	`±hªad_muãx_u∆ock
(&
rv
->
waô_queue_lock
);

204 
	`t2c_compûe
(
íåy
->
block
,

205 (
uöt64_t
Ë((
mem‹y_t
 *Ë
	`PRIV
(
rv
)->
mem
)->
mem_ba£
);

206 
	`‰ì
(
íåy
);

209  
NULL
;

210 
	}
}

213 
	~<sys/mm™.h
>

214 
	~<sys/°©.h
>

215 
	~<f˙é.h
>

216 
	$m≠_fûe
(**
øm_loc
, c⁄° *
«me
)

218 
fd
 = 
	`›í
(
«me
, 
O_RDONLY
);

219 i‡(
fd
 < 0) {

220 
	`Ârötf
(
°dîr
, "couldÇŸ o≥¿%s\n", 
«me
);

221 
	`exô
(2);

225 
°©
 
°
;

226 
	`f°©
(
fd
, &
°
);

229 *
øm_loc
 = 
	`mm≠
(*øm_loc, 
°
.
°_size
, 
PROT_READ
 | 
PROT_WRITE
,

230 
MAP_FIXED
 | 
MAP_PRIVATE
, 
fd
, 0);

231 i‡(*
øm_loc
 =
MAP_FAILED
) {

232 
	`≥º‹
("mmap");

233 
	`¥ötf
("«me: %s\n", 
«me
);

234 
	`˛o£
(
fd
);

235 
	`exô
(2);

246 *
øm_loc
 +
°
.
°_size
;

248 
	`˛o£
(
fd
);

249 
	}
}

251 
	~<ãrmios.h
>

253 
	$ª£t_keybﬂrd_öput
()

256 
ãrmios
 
ãrm
;

257 
	`tcgë©å
(0, &
ãrm
);

258 
ãrm
.
c_lÊag
 |
ICANON
 | 
ECHO
;

259 
	`tc£èâr
(0, 
TCSANOW
, &
ãrm
);

260 
	}
}

262 
	$ˇ±uª_keybﬂrd_öput
()

265 
	`©exô
(
ª£t_keybﬂrd_öput
);

267 
ãrmios
 
ãrm
;

268 
	`tcgë©å
(0, &
ãrm
);

269 
ãrm
.
c_lÊag
 &~(
ICANON
 | 
ECHO
 | 
ISIG
);

270 
	`tc£èâr
(0, 
TCSANOW
, &
ãrm
);

271 
	}
}

273 
riscv_t
 *
	$rv_¸óã
(
riscv_u£r_t
 
rv_©å
)

275 
	`as£π
(
rv_©å
);

277 
riscv_t
 *
rv
 = 
	`ˇŒoc
(1, (riscv_t));

278 
	`as£π
(
rv
);

281 
rv
->
d©a
 = 
rv_©å
;

283 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

284 
©å
->
mem
 = 
	`mem‹y_√w
◊âr->
mem_size
);

285 
	`as£π
(
©å
->
mem
);

286 
	`as£π
(!(((
uöçå_t
Ë
©å
->
mem
) & 0b11));

289 
rv
->
is_å≠≥d
 = 
Ál£
;

290 
rv
->
is_√°ed_å≠≥d
 = 
Ál£
;

293 
	`rv_ª£t
(
rv
, 0U);

297 i‡(
©å
->
d©a
.
u£r
) {

298 
ñf_t
 *
ñf
 = 
	`ñf_√w
();

299 
	`as£π
(
ñf
 && 
	`ñf_›í
”lf, (
©å
->
d©a
.
u£r
)->
ñf_¥ogøm
));

301 c⁄° 
Elf32_Sym
 *
íd
;

302 i‡((
íd
 = 
	`ñf_gë_symbﬁ
(
ñf
, "_end")))

303 
©å
->
bªak_addr
 = 
íd
->
°_vÆue
;

305 
	`as£π
(
	`ñf_lﬂd
(
ñf
, 
©å
->
mem
));

308 c⁄° 
Elf32_Ehdr
 *
hdr
 = 
	`gë_ñf_hódî
(
ñf
);

309 
	`as£π
(
	`rv_£t_pc
(
rv
, 
hdr
->
e_íåy
));

311 
	`ñf_dñëe
(
ñf
);

314 c⁄° 
riscv_io_t
 
io
 = {

316 .
mem_i„tch
 = 
	`MEMIO
(
i„tch
),

317 .
mem_ªad_w
 = 
	`MEMIO
(
ªad_w
),

318 .
mem_ªad_s
 = 
	`MEMIO
(
ªad_s
),

319 .
mem_ªad_b
 = 
	`MEMIO
(
ªad_b
),

322 .
mem_wrôe_w
 = 
	`MEMIO
(
wrôe_w
),

323 .
mem_wrôe_s
 = 
	`MEMIO
(
wrôe_s
),

324 .
mem_wrôe_b
 = 
	`MEMIO
(
wrôe_b
),

327 .
⁄_eˇŒ
 = 
eˇŒ_h™dÀr
,

328 .
⁄_ebªak
 = 
ebªak_h™dÀr
,

329 .
⁄_mem˝y
 = 
mem˝y_h™dÀr
,

330 .
⁄_mem£t
 = 
mem£t_h™dÀr
,

332 
	`mem˝y
(&
rv
->
io
, &io, (
riscv_io_t
));

334 #i‡
	`RV32_HAS
(
SYSTEM
)

345 *
øm_loc
 = (*Ë
©å
->
mem
->
mem_ba£
;

346 
	`m≠_fûe
(&
øm_loc
, (
©å
->
d©a
.
sy°em
)->
kî√l
);

348 
uöt32_t
 
dtb_addr
 = 
©å
->
mem
->
mem_size
 - (1 * 1024 * 1024);

349 
øm_loc
 = ((*Ë
©å
->
mem
->
mem_ba£
Ë+ 
dtb_addr
;

350 
	`m≠_fûe
(&
øm_loc
, (
©å
->
d©a
.
sy°em
)->
dtb
);

354 i‡((
©å
->
d©a
.
sy°em
)->
öôrd
) {

355 
uöt32_t
 
öôrd_addr
 = 
dtb_addr
 - (8 * 1024 * 1024);

356 
øm_loc
 = ((*Ë
©å
->
mem
->
mem_ba£
Ë+ 
öôrd_addr
;

357 
	`m≠_fûe
(&
øm_loc
, (
©å
->
d©a
.
sy°em
)->
öôrd
);

361 
riscv_io_t
 
mmu_io
;

362 
	`mem˝y
(&
rv
->
io
, &
mmu_io
, (
riscv_io_t
));

365 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 0);

366 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 
dtb_addr
);

369 
©å
->
timî
 = 0xFFFFFFFFFFFFFFF;

372 
©å
->
∂ic
 = 
	`∂ic_√w
();

373 
	`as£π
(
©å
->
∂ic
);

376 
©å
->
u¨t
 = 
	`u8250_√w
();

377 
	`as£π
(
©å
->
u¨t
);

378 
©å
->
u¨t
->
ö_fd
 = 0;

379 
©å
->
u¨t
->
out_fd
 = 1;

382 
rv
->
¥iv_mode
 = 
RV_PRIV_S_MODE
;

389 
©å
->
fd_m≠
 = 
	`m≠_öô
(, 
FILE
 *, 
m≠_cmp_öt
);

390 
	`rv_ªm≠_°d°ªam
(
rv
,

391 (
fd_°ªam_∑ú_t
[]){

392 {
STDIN_FILENO
, 
°dö
},

393 {
STDOUT_FILENO
, 
°dout
},

394 {
STDERR_FILENO
, 
°dîr
},

399 
rv
->
block_mp
 = 
	`mpoﬁ_¸óã
((
block_t
Ë<< 
BLOCK_MAP_CAPACITY_BITS
,

400 (
block_t
));

401 
rv
->
block_ú_mp
 = 
	`mpoﬁ_¸óã
(

402 (
rv_ö¢_t
Ë<< 
BLOCK_IR_MAP_CAPACITY_BITS
, (rv_insn_t));

404 #i‡!
	`RV32_HAS
(
JIT
)

406 
	`block_m≠_öô
(&
rv
->
block_m≠
, 
BLOCK_MAP_CAPACITY_BITS
);

408 
rv
->
chaö_íåy_mp
 =

409 
	`mpoﬁ_¸óã
((
chaö_íåy_t
Ë<< 
BLOCK_IR_MAP_CAPACITY_BITS
,

410 (
chaö_íåy_t
));

411 
rv
->
jô_°©e
 = 
	`jô_°©e_öô
(
CODE_CACHE_SIZE
);

412 
rv
->
block_ˇche
 = 
	`ˇche_¸óã
(
BLOCK_MAP_CAPACITY_BITS
);

413 
	`as£π
(
rv
->
block_ˇche
);

414 #i‡
	`RV32_HAS
(
T2C
)

415 
rv
->
quô
 = 
Ál£
;

417 
	`±hªad_muãx_öô
(&
rv
->
waô_queue_lock
, 
NULL
);

418 
	`INIT_LIST_HEAD
(&
rv
->
waô_queue
);

420 
	`±hªad_¸óã
(&
t2c_thªad
, 
NULL
, 
t2c_ru∆o›
, 
rv
);

424  
rv
;

425 
	}
}

427 
	$rv_run_™d_åa˚
(
riscv_t
 *
rv
)

429 
	`as£π
(
rv
);

431 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

432 
	`as£π
(
©å
 &&áâr->
d©a
.
u£r
 &&áâr->d©a.u£r->
ñf_¥ogøm
);

433 
©å
->
cy˛e_≥r_°ï
 = 100000000;

435 c⁄° *
¥og_«me
 = 
©å
->
d©a
.
u£r
->
ñf_¥ogøm
;

436 
ñf_t
 *
ñf
 = 
	`ñf_√w
();

437 
	`as£π
(
ñf
 && 
	`ñf_›í
”lf, 
¥og_«me
));

439 ; !
	`rv_has_hÆãd
(
rv
);) {

441 
uöt32_t
 
pc
 = 
	`rv_gë_pc
(
rv
);

442 c⁄° *
sym
 = 
	`ñf_föd_symbﬁ
(
ñf
, 
pc
);

443 
	`¥ötf
("%08x %s\n", 
pc
, (
sym
 ? sym : ""));

445 
	`rv_°ï
(
rv
);

448 
	`ñf_dñëe
(
ñf
);

449 
	}
}

451 #i‡
RV32_HAS
(
GDBSTUB
)

453 
rv_debug
(
riscv_t
 *
rv
);

456 
rv_¥ofûe
(
riscv_t
 *
rv
, *
out_fûe_∑th
);

458 
	$rv_run
(
riscv_t
 *
rv
)

460 
	`as£π
(
rv
);

462 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

463 #i‡
	`RV32_HAS
(
SYSTEM
)

464 
	`as£π
(
©å
 &&áâr->
d©a
.
sy°em
 &&áâr->d©a.sy°em->
kî√l
);

465 
	`as£π
(
©å
 &&áâr->
d©a
.
sy°em
 &&áâr->d©a.sy°em->
öôrd
);

466 
	`as£π
(
©å
 &&áâr->
d©a
.
sy°em
 &&áâr->d©a.sy°em->
dtb
);

468 
	`as£π
(
©å
 &&áâr->
d©a
.
u£r
 &&áâr->d©a.u£r->
ñf_¥ogøm
);

471 i‡(
©å
->
run_Êag
 & 
RV_RUN_TRACE
)

472 
	`rv_run_™d_åa˚
(
rv
);

473 #i‡
	`RV32_HAS
(
GDBSTUB
)

474 i‡(
©å
->
run_Êag
 & 
RV_RUN_GDBSTUB
)

475 
	`rv_debug
(
rv
);

478 #ifde‡
__EMSCRIPTEN__


479 
	`ems¸ùãn_£t_maö_lo›_¨g
(
rv_°ï
, (*Ë
rv
, 0, 1);

482 ; !
	`rv_has_hÆãd
(
rv
);)

483 
	`rv_°ï
(
rv
);

487 i‡(
©å
->
run_Êag
 & 
RV_RUN_PROFILE
) {

488 
	`as£π
(
©å
->
¥ofûe_ouçut_fûe
);

489 
	`rv_¥ofûe
(
rv
, 
©å
->
¥ofûe_ouçut_fûe
);

491 
	}
}

493 
	$rv_hÆt
(
riscv_t
 *
rv
)

495 
rv
->
hÆt
 = 
åue
;

496 
	}
}

498 
boﬁ
 
	$rv_has_hÆãd
(
riscv_t
 *
rv
)

500  
rv
->
hÆt
;

501 
	}
}

503 
	$rv_dñëe
(
riscv_t
 *
rv
)

505 
	`as£π
(
rv
);

506 #i‡!
	`RV32_HAS
(
JIT
)

507 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

508 
	`m≠_dñëe
(
©å
->
fd_m≠
);

509 
	`mem‹y_dñëe
(
©å
->
mem
);

510 
	`block_m≠_de°roy
(
rv
);

512 #i‡
	`RV32_HAS
(
T2C
)

513 
rv
->
quô
 = 
åue
;

514 
	`±hªad_joö
(
t2c_thªad
, 
NULL
);

515 
	`±hªad_muãx_de°roy
(&
rv
->
waô_queue_lock
);

517 
	`mpoﬁ_de°roy
(
rv
->
chaö_íåy_mp
);

518 
	`jô_°©e_exô
(
rv
->
jô_°©e
);

519 
	`ˇche_‰ì
(
rv
->
block_ˇche
);

521 
	`‰ì
(
rv
);

522 
	}
}

524 
	$rv_ª£t
(
riscv_t
 *
rv
, 
riscv_w‹d_t
 
pc
)

526 
	`as£π
(
rv
);

527 
	`mem£t
(
rv
->
X
, 0, (
uöt32_t
Ë* 
N_RV_REGS
);

529 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

530 
¨gc
 = 
©å
->argc;

531 **
¨gs
 = 
©å
->
¨gv
;

532 
mem‹y_t
 *
mem
 = 
©å
->mem;

535 
rv
->
PC
 = 
pc
;

538 
rv
->
X
[
rv_ªg_•
] =

539 
©å
->
mem_size
 -áâr->
°ack_size
 -áâr->
¨gs_off£t_size
;

574 
uöçå_t
 
¨gs_size
 = (1 + 
¨gc
 + 1Ë* (
uöt32_t
);

575 
uöçå_t
 
¨gs_bŸtom
 = 
©å
->
mem_size
 -áâr->
°ack_size
;

576 
uöçå_t
 
¨gs_t›
 = 
¨gs_bŸtom
 - 
¨gs_size
;

577 
¨gs_t›
 &= 16;

580 
uöçå_t
 *
¨gs_p
 = (uöçå_à*Ë
¨gs_t›
;

581 
	`mem‹y_wrôe
(
mem
, (
uöçå_t
Ë
¨gs_p
, (*Ë&
¨gc
, ());

582 
¨gs_p
++;

586 
size_t
 
¨gs_•a˚
[256];

587 
size_t
 
¨gs_•a˚_idx
 = 0;

588 
size_t
 
¨gs_Àn
;

589 
size_t
 
¨gs_Àn_tŸÆ
 = 0;

590 
i
 = 0; i < 
¨gc
; i++) {

591 c⁄° *
¨g
 = 
¨gs
[
i
];

592 
¨gs_Àn
 = 
	`°æí
(
¨g
);

593 
	`mem‹y_wrôe
(
mem
, (
uöçå_t
Ë
¨gs_p
, (*Ë
¨g
,

594 (
¨gs_Àn
 + 1Ë* (
uöt8_t
));

595 
¨gs_•a˚
[
¨gs_•a˚_idx
++] = 
¨gs_Àn
 + 1;

596 
¨gs_p
 = (
uöçå_t
 *Ë((uöçå_tË¨gs_∞+ 
¨gs_Àn
 + 1);

597 
¨gs_Àn_tŸÆ
 +
¨gs_Àn
 + 1;

599 
¨gs_p
 = (
uöçå_t
 *Ë((uöçå_tË¨gs_∞- 
¨gs_Àn_tŸÆ
);

600 
¨gs_p
--;

603 
°ack_size
 = (1 + 
¨gc
 + 1Ë* (
uöt32_t
);

604 
uöçå_t
 
°ack_bŸtom
 = (uöçå_tË
rv
->
X
[
rv_ªg_•
];

605 
uöçå_t
 
°ack_t›
 = 
°ack_bŸtom
 - 
°ack_size
;

606 
°ack_t›
 &= -16;

609 
uöçå_t
 *
•
 = (uöçå_à*Ë
°ack_t›
;

610 
	`mem‹y_wrôe
(
mem
, (
uöçå_t
Ë
•
,

611 (*Ë(
mem
->
mem_ba£
 + (
uöçå_t
Ë
¨gs_p
), ());

612 
¨gs_p
++;

614 
•
 = (
uöçå_t
 *Ë((
uöt32_t
 *) sp + 1);

617 
i
 = 0; i < 
¨gc
; i++) {

618 
uöçå_t
 
off£t
 = (uöçå_tË
¨gs_p
;

619 
	`mem‹y_wrôe
(
mem
, (
uöçå_t
Ë
•
, (*Ë&
off£t
, (uintptr_t));

620 
¨gs_p
 = (
uöçå_t
 *Ë((uöçå_tË¨gs_∞+ 
¨gs_•a˚
[
i
]);

621 
•
 = (
uöçå_t
 *Ë((
uöt32_t
 *) sp + 1);

623 
	`mem‹y_fûl
(
mem
, (
uöçå_t
Ë
•
, (
uöt32_t
), 0);

626 
rv
->
X
[
rv_ªg_•
] = 
°ack_t›
;

629 
rv
->
¥iv_mode
 = 
RV_PRIV_S_MODE
;

632 
rv
->
c§_mtvec
 = 0;

633 
rv
->
c§_cy˛e
 = 0;

634 
rv
->
c§_m°©us
 = 0;

635 
rv
->
c§_miß
 |
MISA_SUPER
 | 
MISA_USER
 | 
MISA_I
;

636 
rv
->
c§_mvíd‹id
 = 
RV_MVENDORID
;

637 
rv
->
c§_m¨chid
 = 
RV_MARCHID
;

638 
rv
->
c§_mimpid
 = 
RV_MIMPID
;

639 #i‡
	`RV32_HAS
(
EXT_A
)

640 
rv
->
c§_miß
 |
MISA_A
;

642 #i‡
	`RV32_HAS
(
EXT_C
)

643 
rv
->
c§_miß
 |
MISA_C
;

645 #i‡
	`RV32_HAS
(
EXT_F
)

646 
rv
->
c§_miß
 |
MISA_F
;

648 
i
 = 0; i < 
N_RV_REGS
; i++)

649 
rv
->
F
[
i
].
v
 = 0;

650 
rv
->
c§_fc§
 = 0;

652 #i‡
	`RV32_HAS
(
EXT_M
)

653 
rv
->
c§_miß
 |
MISA_M
;

656 
rv
->
hÆt
 = 
Ál£
;

657 
	}
}

659 c⁄° *
	gö¢_«me_èbÀ
[] = {

660 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
) \

661 [
rv_ö¢_
##
ö°
] = #ö°,

	)

662 
RV_INSN_LIST


663 #unde‡
_


664 
	#_
(
ö°
Ë[
rv_ö¢_
##ö°] = #ö°,

	)

665 
FUSE_INSN_LIST


666 #unde‡
_


669 #i‡
RV32_HAS
(
JIT
)

670 
	$¥ofûe
(
block_t
 *
block
, 
uöt32_t
 
‰eq
, 
FILE
 *
ouçut_fûe
)

672 
	`Ârötf
(
ouçut_fûe
, "%#-9x|", 
block
->
pc_°¨t
);

673 
	`Ârötf
(
ouçut_fûe
, "%#-8x|", 
block
->
pc_íd
);

674 
	`Ârötf
(
ouçut_fûe
, " %-10u|", 
‰eq
);

675 
	`Ârötf
(
ouçut_fûe
, " %-5†|", 
block
->
hŸ
 ? "true" : "false");

676 
	`Ârötf
(
ouçut_fûe
, " %-6†|", 
block
->
has_lo›s
 ? "true" : "false");

677 
rv_ö¢_t
 *
èkí
 = 
block
->
ú_èû
->
bønch_èkí
,

678 *
u¡akí
 = 
block
->
ú_èû
->
bønch_u¡akí
;

679 i‡(
u¡akí
)

680 
	`Ârötf
(
ouçut_fûe
, "%#-9x|", 
u¡akí
->
pc
);

682 
	`Ârötf
(
ouçut_fûe
, "%-9s|", "NULL");

683 i‡(
èkí
)

684 
	`Ârötf
(
ouçut_fûe
, "%#-8x|", 
èkí
->
pc
);

686 
	`Ârötf
(
ouçut_fûe
, "%-8s|", "NULL");

687 
rv_ö¢_t
 *
ú
 = 
block
->
ú_hód
;

689 
	`as£π
(
ú
);

690 
	`Ârötf
(
ouçut_fûe
, "%s", 
ö¢_«me_èbÀ
[
ú
->
›code
]);

691 i‡(!
ú
->
√xt
)

693 
ú
 = ir->
√xt
;

694 
	`Ârötf
(
ouçut_fûe
, " - ");

696 
	`Ârötf
(
ouçut_fûe
, "\n");

697 
	}
}

700 
	$rv_¥ofûe
(
riscv_t
 *
rv
, *
out_fûe_∑th
)

702 i‡(!
out_fûe_∑th
) {

703 
	`Ârötf
(
°dîr
, "Profiling data output file is NULL.\n");

706 
FILE
 *
f
 = 
	`f›í
(
out_fûe_∑th
, "w");

707 i‡(!
f
) {

708 
	`Ârötf
(
°dîr
, "Cannot openÖrofiling data output file.\n");

711 #i‡
	`RV32_HAS
(
JIT
)

712 
	`Ârötf
(
f
,

715 
	`ˇche_¥ofûe
(
rv
->
block_ˇche
, 
f
, (
¥of_func_t
Ë
¥ofûe
);

717 
	`Ârötf
(
f
, "PC start |PCÉnd | untaken |Åaken | IRÜist \n");

718 
block_m≠_t
 *
m≠
 = &
rv
->
block_m≠
;

719 
uöt32_t
 
i
 = 0; i < 
m≠
->
block_ˇ∑côy
; i++) {

720 
block_t
 *
block
 = 
m≠
->m≠[
i
];

721 i‡(!
block
)

723 
	`Ârötf
(
f
, "%#-9x|", 
block
->
pc_°¨t
);

724 
	`Ârötf
(
f
, "%#-8x|", 
block
->
pc_íd
);

725 
rv_ö¢_t
 *
èkí
 = 
block
->
ú_èû
->
bønch_èkí
,

726 *
u¡akí
 = 
block
->
ú_èû
->
bønch_u¡akí
;

727 i‡(
u¡akí
)

728 
	`Ârötf
(
f
, "%#-9x|", 
u¡akí
->
pc
);

730 
	`Ârötf
(
f
, "%-9s|", "NULL");

731 i‡(
èkí
)

732 
	`Ârötf
(
f
, "%#-8x|", 
èkí
->
pc
);

734 
	`Ârötf
(
f
, "%-8s|", "NULL");

735 
rv_ö¢_t
 *
ú
 = 
block
->
ú_hód
;

737 
	`as£π
(
ú
);

738 
	`Ârötf
(
f
, "%s", 
ö¢_«me_èbÀ
[
ú
->
›code
]);

739 i‡(!
ú
->
√xt
)

741 
ú
 = ir->
√xt
;

742 
	`Ârötf
(
f
, " - ");

744 
	`Ârötf
(
f
, "\n");

747 
	}
}

	@src/riscv.h

6 #¥agm®
⁄˚


8 
	~<°dboﬁ.h
>

9 
	~<°döt.h
>

10 
	~<°dio.h
>

12 
	~"io.h
"

13 
	~"m≠.h
"

15 #i‡
RV32_HAS
(
EXT_F
)

16 
	#Êﬂt16_t
 
so·Êﬂt_Êﬂt16_t


	)

17 
	#bÊﬂt16_t
 
so·Êﬂt_bÊﬂt16_t


	)

18 
	#Êﬂt32_t
 
so·Êﬂt_Êﬂt32_t


	)

19 
	#Êﬂt64_t
 
so·Êﬂt_Êﬂt64_t


	)

20 
	~"so·Êﬂt/so·Êﬂt.h
"

21 #unde‡
Êﬂt16_t


22 #unde‡
bÊﬂt16_t


23 #unde‡
Êﬂt32_t


24 #unde‡
Êﬂt64_t


27 #ifde‡
__˝lu•lus


31 
	#RV_REGS_LIST
 \

32 
	`_
(
zîo
) \

33 
	`_
(
ø
) \

34 
	`_
(
•
) \

35 
	`_
(
gp
) \

36 
	`_
(
ç
) \

37 
	`_
(
t0
) \

38 
	`_
(
t1
) \

39 
	`_
(
t2
) \

40 
	`_
(
s0
) \

41 
	`_
(
s1
) \

42 
	`_
(
a0
) \

43 
	`_
(
a1
) \

44 
	`_
(
a2
) \

45 
	`_
(
a3
) \

46 
	`_
(
a4
) \

47 
	`_
(
a5
) \

48 
	`_
(
a6
) \

49 
	`_
(
a7
) \

50 
	`_
(
s2
) \

51 
	`_
(
s3
) \

52 
	`_
(
s4
) \

53 
	`_
(
s5
) \

54 
	`_
(
s6
) \

55 
	`_
(
s7
) \

56 
	`_
(
s8
) \

57 
	`_
(
s9
) \

58 
	`_
(
s10
) \

59 
	`_
(
s11
) \

60 
	`_
(
t3
) \

61 
	`_
(
t4
) \

62 
	`_
(
t5
) \

63 
	`_
(
t6
)

	)

80 
	#_
(
r
Ë
rv_ªg_
##r,

	)

81 
RV_REGS_LIST


82 #unde‡
_


83 
N_RV_REGS


87 
	#MISA_SUPER
 (1 << ('S' - 'A'))

	)

88 
	#MISA_USER
 (1 << ('U' - 'A'))

	)

89 
	#MISA_I
 (1 << ('I' - 'A'))

	)

90 
	#MISA_M
 (1 << ('M' - 'A'))

	)

91 
	#MISA_A
 (1 << ('A' - 'A'))

	)

92 
	#MISA_F
 (1 << ('F' - 'A'))

	)

93 
	#MISA_C
 (1 << ('C' - 'A'))

	)

97 
	#MSTATUS_SIE_SHIFT
 1

	)

98 
	#MSTATUS_MIE_SHIFT
 3

	)

99 
	#MSTATUS_SPIE_SHIFT
 5

	)

100 
	#MSTATUS_UBE_SHIFT
 6

	)

101 
	#MSTATUS_MPIE_SHIFT
 7

	)

102 
	#MSTATUS_SPP_SHIFT
 8

	)

103 
	#MSTATUS_MPP_SHIFT
 11

	)

104 
	#MSTATUS_MPRV_SHIFT
 17

	)

105 
	#MSTATUS_SUM_SHIFT
 18

	)

106 
	#MSTATUS_MXR_SHIFT
 18

	)

107 
	#MSTATUS_TVM_SHIFT
 20

	)

108 
	#MSTATUS_TW_SHIFT
 21

	)

109 
	#MSTATUS_TSR_SHIFT
 22

	)

110 
	#MSTATUS_SIE
 (1 << 
MSTATUS_SIE_SHIFT
)

	)

111 
	#MSTATUS_MIE
 (1 << 
MSTATUS_MIE_SHIFT
)

	)

112 
	#MSTATUS_SPIE
 (1 << 
MSTATUS_SPIE_SHIFT
)

	)

113 
	#MSTATUS_UBE
 (1 << 
MSTATUS_UBE_SHIFT
)

	)

114 
	#MSTATUS_MPIE
 (1 << 
MSTATUS_MPIE_SHIFT
)

	)

115 
	#MSTATUS_SPP
 (1 << 
MSTATUS_SPP_SHIFT
)

	)

116 
	#MSTATUS_MPP
 (3 << 
MSTATUS_MPP_SHIFT
)

	)

117 
	#MSTATUS_MPRV
 (1 << 
MSTATUS_MPRV_SHIFT
)

	)

118 
	#MSTATUS_SUM
 (1 << 
MSTATUS_SUM_SHIFT
)

	)

119 
	#MSTATUS_MXR
 (1 << 
MSTATUS_MXR_SHIFT
)

	)

120 
	#MSTATUS_TVM
 (1 << 
MSTATUS_TVM_SHIFT
)

	)

121 
	#MSTATUS_TW
 (1 << 
MSTATUS_TW_SHIFT
)

	)

122 
	#MSTATUS_TSR
 (1 << 
MSTATUS_TSR_SHIFT
)

	)

125 
	#SSTATUS_SIE_SHIFT
 1

	)

126 
	#SSTATUS_SPIE_SHIFT
 5

	)

127 
	#SSTATUS_UBE_SHIFT
 6

	)

128 
	#SSTATUS_SPP_SHIFT
 8

	)

129 
	#SSTATUS_SUM_SHIFT
 18

	)

130 
	#SSTATUS_MXR_SHIFT
 19

	)

131 
	#SSTATUS_SIE
 (1 << 
SSTATUS_SIE_SHIFT
)

	)

132 
	#SSTATUS_SPIE
 (1 << 
SSTATUS_SPIE_SHIFT
)

	)

133 
	#SSTATUS_UBE
 (1 << 
SSTATUS_UBE_SHIFT
)

	)

134 
	#SSTATUS_SPP
 (1 << 
SSTATUS_SPP_SHIFT
)

	)

135 
	#SSTATUS_SUM
 (1 << 
SSTATUS_SUM_SHIFT
)

	)

136 
	#SSTATUS_MXR
 (1 << 
SSTATUS_MXR_SHIFT
)

	)

138 
	#SIP_SSIP_SHIFT
 1

	)

139 
	#SIP_STIP_SHIFT
 5

	)

140 
	#SIP_SEIP_SHIFT
 9

	)

141 
	#SIP_SSIP
 (1 << 
SIP_SSIP_SHIFT
)

	)

142 
	#SIP_STIP
 (1 << 
SIP_STIP_SHIFT
)

	)

143 
	#SIP_SEIP
 (1 << 
SIP_SEIP_SHIFT
)

	)

145 
	#RV_PG_SHIFT
 12

	)

146 
	#RV_PG_SIZE
 (1 << 
RV_PG_SHIFT
)

	)

148 
	#RV_PRIV_U_MODE
 0

	)

149 
	#RV_PRIV_S_MODE
 1

	)

150 
	#RV_PRIV_M_MODE
 3

	)

152 
	#PTE_V
 (1U)

	)

153 
	#PTE_R
 (1U << 1)

	)

154 
	#PTE_W
 (1U << 2)

	)

155 
	#PTE_X
 (1U << 3)

	)

156 
	#PTE_U
 (1U << 4)

	)

157 
	#PTE_G
 (1U << 5)

	)

158 
	#PTE_A
 (1U << 6)

	)

159 
	#PTE_D
 (1U << 7)

	)

161 
	#RV_INT_STI_SHIFT
 5

	)

162 
	#RV_INT_STI
 (1 << 
RV_INT_STI_SHIFT
)

	)

181 
	#SBI_SUCCESS
 0

	)

182 
	#SBI_ERR_NOT_SUPPORTED
 -2

	)

188 
	#SBI_EID_BASE
 0x10

	)

189 
	#SBI_BASE_GET_SBI_SPEC_VERSION
 0

	)

190 
	#SBI_BASE_GET_SBI_IMPL_ID
 1

	)

191 
	#SBI_BASE_GET_SBI_IMPL_VERSION
 2

	)

192 
	#SBI_BASE_PROBE_EXTENSION
 3

	)

193 
	#SBI_BASE_GET_MVENDORID
 4

	)

194 
	#SBI_BASE_GET_MARCHID
 5

	)

195 
	#SBI_BASE_GET_MIMPID
 6

	)

198 
	#SBI_EID_TIMER
 0x54494D45

	)

199 
	#SBI_TIMER_SET_TIMER
 0

	)

202 
	#SBI_EID_RST
 0x53525354

	)

203 
	#SBI_RST_SYSTEM_RESET
 0

	)

205 
	#RV_MVENDORID
 0x12345678

	)

206 
	#RV_MARCHID
 ((1ULL << 31Ë| 1)

	)

207 
	#RV_MIMPID
 1

	)

226 
	#SBI_SUCCESS
 0

	)

227 
	#SBI_ERR_NOT_SUPPORTED
 -2

	)

233 
	#SBI_EID_BASE
 0x10

	)

234 
	#SBI_BASE_GET_SBI_SPEC_VERSION
 0

	)

235 
	#SBI_BASE_GET_SBI_IMPL_ID
 1

	)

236 
	#SBI_BASE_GET_SBI_IMPL_VERSION
 2

	)

237 
	#SBI_BASE_PROBE_EXTENSION
 3

	)

238 
	#SBI_BASE_GET_MVENDORID
 4

	)

239 
	#SBI_BASE_GET_MARCHID
 5

	)

240 
	#SBI_BASE_GET_MIMPID
 6

	)

243 
	#SBI_EID_TIMER
 0x54494D45

	)

244 
	#SBI_TIMER_SET_TIMER
 0

	)

247 
	#SBI_EID_RST
 0x53525354

	)

248 
	#SBI_RST_SYSTEM_RESET
 0

	)

250 
	#RV_MVENDORID
 0x12345678

	)

251 
	#RV_MARCHID
 ((1ULL << 31Ë| 1)

	)

252 
	#RV_MIMPID
 1

	)

254 
	#BLOCK_MAP_CAPACITY_BITS
 10

	)

257 
riscv_öã∫Æ
 
	triscv_t
;

258 *
	triscv_u£r_t
;

260 
uöt32_t
 
	triscv_w‹d_t
;

261 
uöt16_t
 
	triscv_hÆf_t
;

262 
uöt8_t
 
	triscv_byã_t
;

263 
uöt32_t
 
	triscv_ex˚±i⁄_t
;

264 #i‡
RV32_HAS
(
EXT_F
)

265 
so·Êﬂt_Êﬂt32_t
 
	triscv_Êﬂt_t
;

269 
riscv_w‹d_t
 (*
	triscv_mem_i„tch
)(
	triscv_t
 *
	trv
, 
	triscv_w‹d_t
 
	taddr
);

270 
riscv_w‹d_t
 (*
	triscv_mem_ªad_w
)(
	triscv_t
 *
	trv
, 
	triscv_w‹d_t
 
	taddr
);

271 
riscv_hÆf_t
 (*
	triscv_mem_ªad_s
)(
	triscv_t
 *
	trv
, 
	triscv_w‹d_t
 
	taddr
);

272 
riscv_byã_t
 (*
	triscv_mem_ªad_b
)(
	triscv_t
 *
	trv
, 
	triscv_w‹d_t
 
	taddr
);

275 (*
riscv_mem_wrôe_w
)(
	triscv_t
 *
	trv
,

276 
	triscv_w‹d_t
 
	taddr
,

277 
	triscv_w‹d_t
 
	td©a
);

278 (*
riscv_mem_wrôe_s
)(
	triscv_t
 *
	trv
,

279 
	triscv_w‹d_t
 
	taddr
,

280 
	triscv_hÆf_t
 
	td©a
);

281 (*
riscv_mem_wrôe_b
)(
	triscv_t
 *
	trv
,

282 
	triscv_w‹d_t
 
	taddr
,

283 
	triscv_byã_t
 
	td©a
);

286 (*
riscv_⁄_eˇŒ
)(
	triscv_t
 *
	trv
);

287 (*
riscv_⁄_ebªak
)(
	triscv_t
 *
	trv
);

288 (*
riscv_⁄_mem£t
)(
	triscv_t
 *
	trv
);

289 (*
riscv_⁄_mem˝y
)(
	triscv_t
 *
	trv
);

293 
riscv_mem_i„tch
 
mem_i„tch
;

294 
riscv_mem_ªad_w
 
mem_ªad_w
;

295 
riscv_mem_ªad_s
 
mem_ªad_s
;

296 
riscv_mem_ªad_b
 
mem_ªad_b
;

299 
riscv_mem_wrôe_w
 
mem_wrôe_w
;

300 
riscv_mem_wrôe_s
 
mem_wrôe_s
;

301 
riscv_mem_wrôe_b
 
mem_wrôe_b
;

306 
riscv_⁄_eˇŒ
 
⁄_eˇŒ
;

307 
riscv_⁄_ebªak
 
⁄_ebªak
;

308 
riscv_⁄_mem£t
 
⁄_mem£t
;

309 
riscv_⁄_mem˝y
 
⁄_mem˝y
;

310 } 
	triscv_io_t
;

313 
rv_run
(
riscv_t
 *
rv
);

316 
riscv_t
 *
rv_¸óã
(
riscv_u£r_t
 
©å
);

319 
rv_dñëe
(
riscv_t
 *
rv
);

322 
rv_ª£t
(
riscv_t
 *
rv
, 
riscv_w‹d_t
 
pc
);

324 #i‡
RV32_HAS
(
GDBSTUB
)

326 
rv_debug
(
riscv_t
 *
rv
);

330 
rv_°ï
(*
¨g
);

333 
boﬁ
 
rv_£t_pc
(
riscv_t
 *
rv
, 
riscv_w‹d_t
 
pc
);

336 
riscv_w‹d_t
 
rv_gë_pc
(
riscv_t
 *
rv
);

339 
rv_£t_ªg
(
riscv_t
 *
rv
, 
uöt32_t
 
ªg
, 
riscv_w‹d_t
 
ö
);

342 
fd
;

343 
FILE
 *
fûe
;

344 } 
	tfd_°ªam_∑ú_t
;

347 
rv_ªm≠_°d°ªam
(
riscv_t
 *
rv
, 
fd_°ªam_∑ú_t
 *
f•
, 
uöt32_t
 
f•_size
);

350 
riscv_w‹d_t
 
rv_gë_ªg
(
riscv_t
 *
rv
, 
uöt32_t
 
ªg
);

353 
sysˇŒ_h™dÀr
(
riscv_t
 *
rv
);

356 
eˇŒ_h™dÀr
(
riscv_t
 *
rv
);

359 
mem£t_h™dÀr
(
riscv_t
 *
rv
);

362 
mem˝y_h™dÀr
(
riscv_t
 *
rv
);

365 
dump_ªgi°îs
(
riscv_t
 *
rv
, *
out_fûe_∑th
);

368 
ebªak_h™dÀr
(
riscv_t
 *
rv
);

371 
rv_hÆt
(
riscv_t
 *
rv
);

374 
boﬁ
 
rv_has_hÆãd
(
riscv_t
 *
rv
);

378 
RV_RUN_TRACE
 = 1,

381 
RV_RUN_GDBSTUB
 = 2,

385 
RV_RUN_PROFILE
 = 4,

389 *
ñf_¥ogøm
;

390 } 
	tvm_u£r_t
;

393 #i‡
RV32_HAS
(
SYSTEM
)

395 *
kî√l
;

396 *
öôrd
;

397 *
dtb
;

398 } 
	tvm_sy°em_t
;

402 
vm_u£r_t
 *
u£r
;

404 #i‡
RV32_HAS
(
SYSTEM
)

405 
vm_sy°em_t
 *
sy°em
;

408 } 
	tvm_d©a_t
;

412 
u8250_°©e_t
 *
u¨t
;

415 
∂ic_t
 *
∂ic
;

418 
mem‹y_t
 *
mem
;

424 
uöt32_t
 
mem_size
;

427 
uöt32_t
 
°ack_size
;

434 
uöt32_t
 
¨gs_off£t_size
;

437 
¨gc
;

438 **
¨gv
;

442 
exô_code
;

445 
îr‹
;

448 
log_Àvñ
;

451 
vm_d©a_t
 
d©a
;

454 
cy˛e_≥r_°ï
;

457 
boﬁ
 
Ælow_mißlign
;

462 
uöt8_t
 
run_Êag
;

465 *
¥ofûe_ouçut_fûe
;

470 
fd_°dö
, 
fd_°dout
, 
fd_°dîr
;

473 
m≠_t
 
fd_m≠
;

476 
riscv_w‹d_t
 
bªak_addr
;

479 
uöt64_t
 
timî
;

480 } 
	tvm_©å_t
;

482 #ifde‡
__˝lu•lus


	@src/riscv_private.h

6 #¥agm®
⁄˚


7 
	~<°dboﬁ.h
>

9 #i‡
RV32_HAS
(
GDBSTUB
)

10 
	~"bªakpoöt.h
"

11 
	~"möi-gdb°ub/ö˛ude/gdb°ub.h
"

13 
	~"decode.h
"

14 
	~"riscv.h
"

15 
	~"utûs.h
"

16 #i‡
RV32_HAS
(
JIT
)

17 #i‡
RV32_HAS
(
T2C
)

18 
	~<±hªad.h
>

20 
	~"ˇche.h
"

23 
	#PRIV
(
x
Ë((
vm_©å_t
 *Ëx->
d©a
)

	)

28 
	mCSR_FFLAGS
 = 0x001,

29 
	mCSR_FRM
 = 0x002,

30 
	mCSR_FCSR
 = 0x003,

33 
	mCSR_SSTATUS
 = 0x100,

34 
	mCSR_SIE
 = 0x104,

35 
	mCSR_STVEC
 = 0x105,

36 
	mCSR_SCOUNTEREN
 = 0x106,

39 
	mCSR_SSCRATCH
 = 0x140,

40 
	mCSR_SEPC
 = 0x141,

41 
	mCSR_SCAUSE
 = 0x142,

42 
	mCSR_STVAL
 = 0x143,

43 
	mCSR_SIP
 = 0x144,

46 
	mCSR_SATP
 = 0x180,

49 
	mCSR_MVENDORID
 = 0xF11,

50 
	mCSR_MARCHID
 = 0xF12,

51 
	mCSR_MIMPID
 = 0xF13,

52 
	mCSR_MHARTID
 = 0xF14,

55 
	mCSR_MSTATUS
 = 0x300,

56 
	mCSR_MISA
 = 0x301,

57 
	mCSR_MEDELEG
 = 0x302,

58 
	mCSR_MIDELEG
 = 0x303,

59 
	mCSR_MIE
 = 0x304,

60 
	mCSR_MTVEC
 = 0x305,

61 
	mCSR_MCOUNTEREN
 = 0x306,

64 
	mCSR_MSCRATCH
 = 0x340,

65 
	mCSR_MEPC
 = 0x341,

66 
	mCSR_MCAUSE
 = 0x342,

67 
	mCSR_MTVAL
 = 0x343,

68 
	mCSR_MIP
 = 0x344,

71 
	mCSR_CYCLE
 = 0xC00,

72 
	mCSR_TIME
 = 0xC01,

73 
	mCSR_INSTRET
 = 0xC02,

76 
	mCSR_CYCLEH
 = 0xC80,

77 
	mCSR_TIMEH
 = 0xC81,

78 
	mCSR_INSTRETH
 = 0xC82,

82 
	sblock
 {

83 
uöt32_t
 
	mn_ö¢
;

84 
uöt32_t
 
	mpc_°¨t
, 
	mpc_íd
;

86 
rv_ö¢_t
 *
	mú_hód
, *
	mú_èû
;

87 #i‡
RV32_HAS
(
JIT
)

88 
boﬁ
 
	mhŸ
;

89 
boﬁ
 
	mhŸ2
;

90 
boﬁ


91 
	må™¶©abÀ
;

92 
boﬁ
 
	mhas_lo›s
;

93 #i‡
RV32_HAS
(
T2C
)

94 
boﬁ
 
	mcompûed
;

96 
uöt32_t
 
	moff£t
;

97 
uöt32_t
 
	mn_övoke
;

98 *
	mfunc
;

99 
li°_hód
 
	mli°
;

102 
uöt8_t
 
	m¥iv_mode
;

103 } 
	tblock_t
;

105 #i‡
RV32_HAS
(
JIT
)

107 
block_t
 *
	mblock
;

108 
li°_hód
 
	mli°
;

109 } 
	tchaö_íåy_t
;

110 #i‡
RV32_HAS
(
T2C
)

112 
block_t
 *
	mblock
;

113 
li°_hód
 
	mli°
;

114 } 
	tqueue_íåy_t
;

119 
uöt32_t
 
	mblock_ˇ∑côy
;

120 
uöt32_t
 
	msize
;

121 
block_t
 **
	mm≠
;

122 } 
	tblock_m≠_t
;

125 
block_m≠_˛ór
(
riscv_t
 *
rv
);

127 
	sriscv_öã∫Æ
 {

128 
boﬁ
 
	mhÆt
;

131 
riscv_io_t
 
	mio
;

134 
riscv_w‹d_t
 
	mX
[
N_RV_REGS
];

135 
riscv_w‹d_t
 
	mPC
;

138 
riscv_u£r_t
 
	md©a
;

140 #i‡
RV32_HAS
(
EXT_F
)

142 
riscv_Êﬂt_t
 
	mF
[
N_RV_REGS
];

143 
uöt32_t
 
	mc§_fc§
;

147 
uöt64_t
 
	mc§_cy˛e
;

148 
uöt32_t
 
	mc§_time
[2];

149 
uöt32_t
 
	mc§_m°©us
;

150 
uöt32_t
 
	mc§_mtvec
;

151 
uöt32_t
 
	mc§_miß
;

152 
uöt32_t
 
	mc§_mtvÆ
;

153 
uöt32_t
 
	mc§_mˇu£
;

154 
uöt32_t
 
	mc§_ms¸©ch
;

155 
uöt32_t
 
	mc§_mïc
;

156 
uöt32_t
 
	mc§_mù
;

157 
uöt32_t
 
	mc§_mõ
;

158 
uöt32_t
 
	mc§_midñeg
;

159 
uöt32_t
 
	mc§_medñeg
;

160 
uöt32_t
 
	mc§_mvíd‹id
;

161 
uöt32_t
 
	mc§_m¨chid
;

162 
uöt32_t
 
	mc§_mimpid
;

163 
uöt32_t
 
	mc§_mbadaddr
;

165 
uöt32_t
 
	mc§_s°©us
;

166 
uöt32_t
 
	mc§_°vec
;

167 
uöt32_t
 
	mc§_sù
;

168 
uöt32_t
 
	mc§_sõ
;

169 
uöt32_t
 
	mc§_scou¡îí
;

170 
uöt32_t
 
	mc§_ss¸©ch
;

171 
uöt32_t
 
	mc§_£pc
;

172 
uöt32_t
 
	mc§_sˇu£
;

173 
uöt32_t
 
	mc§_°vÆ
;

174 
uöt32_t
 
	mc§_ßç
;

176 
uöt32_t
 
	m¥iv_mode
;

178 
boﬁ
 
	mcom¥es£d
;

179 #i‡!
RV32_HAS
(
JIT
)

180 
block_m≠_t
 
	mblock_m≠
;

182 
ˇche
 *
	mblock_ˇche
;

183 
mpoﬁ
 *
	mchaö_íåy_mp
;

184 #i‡
RV32_HAS
(
T2C
)

185 
li°_hód
 
	mwaô_queue
;

186 
±hªad_muãx_t
 
	mwaô_queue_lock
;

187 vﬁ©ûê
boﬁ
 
	mquô
;

190 
mpoﬁ
 *
	mblock_mp
, *
	mblock_ú_mp
;

192 *
	mjô_°©e
;

193 #i‡
RV32_HAS
(
GDBSTUB
)

195 
gdb°ub_t
 
	mgdb°ub
;

197 
boﬁ
 
	mdebug_mode
;

200 
bªakpoöt_m≠_t
 
	mbªakpoöt_m≠
;

205 
boﬁ
 
	mis_öãºu±ed
;

209 
boﬁ
 
	mis_å≠≥d
;

210 
boﬁ
 
	mis_√°ed_å≠≥d
;

211 
uöt32_t
 
	m√°ed_£pc
;

212 
uöt32_t
 
	m√°ed_sˇu£
;

213 
uöt32_t
 
	m√°ed_°vÆ
;

215 
uöt32_t
 
	mã°
;

219 
FORCE_INLINE
 
uöt32_t
 
	$sign_exãnd_h
(c⁄° 
uöt32_t
 
x
)

221  (
öt32_t
Ë((
öt16_t
Ë
x
);

222 
	}
}

225 
FORCE_INLINE
 
uöt32_t
 
	$sign_exãnd_b
(c⁄° 
uöt32_t
 
x
)

227  (
öt32_t
Ë((
öt8_t
Ë
x
);

228 
	}
}

231 
FORCE_INLINE
 
boﬁ
 
	$is_com¥es£d
(
uöt32_t
 
ö¢
)

233  (
ö¢
 & 
FC_OPCODE
) != 3;

234 
	}
}

	@src/rv32_constopt.c

4 
CONSTOPT
(
n›
, {})

11 
CONSTOPT
(
lui
, {

12 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

13 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

21 
CONSTOPT
(
auùc
, {

22 
ú
->
imm
 +ú->
pc
;

23 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

24 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

25 
ú
->
›code
 = 
rv_ö¢_lui
;

26 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

33 
CONSTOPT
(
jÆ
, {

34 i‡(
ú
->
rd
) {

35 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

36 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
pc
 + 4;

47 
CONSTOPT
(
jÆr
, {

48 i‡(
ú
->
rd
) {

49 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

50 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
pc
 + 4;

55 
	#OPT_BRANCH_FUNC
(
ty≥
, 
c⁄d
) \

56 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) { \

57 i‡((
ty≥
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs1
] 
c⁄d
 \

58 (
ty≥
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs2
]) \

59 
ú
->
imm
 = 4; \

60 
ú
->
›code
 = 
rv_ö¢_jÆ
; \

61 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
]; \

62 }

	)

66 
CONSTOPT
(
beq
, { 
OPT_BRANCH_FUNC
(
uöt32_t
, !=); })

69 
CONSTOPT
(
b√
, { 
OPT_BRANCH_FUNC
(
uöt32_t
, ==); })

72 
CONSTOPT
(
b…
, { 
OPT_BRANCH_FUNC
(
öt32_t
, >=); })

75 
CONSTOPT
(
bge
, { 
OPT_BRANCH_FUNC
(
öt32_t
, <); })

78 
CONSTOPT
(
b…u
, { 
OPT_BRANCH_FUNC
(
uöt32_t
, >=); })

81 
CONSTOPT
(
bgeu
, { 
OPT_BRANCH_FUNC
(
uöt32_t
, <); })

84 
CONSTOPT
(
lb
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

87 
CONSTOPT
(
lh
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

90 
CONSTOPT
(
lw
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

93 
CONSTOPT
(
lbu
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

96 
CONSTOPT
(
lhu
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

99 
CONSTOPT
(
sb
, {})

102 
CONSTOPT
(
sh
, {})

105 
CONSTOPT
(
sw
, {})

112 
CONSTOPT
(
addi
, {

113 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

114 
ú
->
imm
 +
öfo
->
c⁄°_vÆ
[ú->
rs1
];

115 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

116 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

117 
ú
->
›code
 = 
rv_ö¢_lui
;

118 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

120 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

127 
CONSTOPT
(
¶ti
, {

128 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

129 
ú
->
imm
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[ú->
rs1
] < ir->imm ? 1 : 0;

130 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

131 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

132 
ú
->
›code
 = 
rv_ö¢_lui
;

133 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

135 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

141 
CONSTOPT
(
¶tiu
, {

142 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

143 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] < (
uöt32_t
) ir->imm ? 1 : 0;

144 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

145 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

146 
ú
->
›code
 = 
rv_ö¢_lui
;

147 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

149 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

153 
CONSTOPT
(
x‹i
, {

154 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

155 
ú
->
imm
 ^
öfo
->
c⁄°_vÆ
[ú->
rs1
];

156 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

157 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

158 
ú
->
›code
 = 
rv_ö¢_lui
;

159 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

161 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

165 
CONSTOPT
(
‹i
, {

166 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

167 
ú
->
imm
 |
öfo
->
c⁄°_vÆ
[ú->
rs1
];

168 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

169 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

170 
ú
->
›code
 = 
rv_ö¢_lui
;

171 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

173 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

179 
CONSTOPT
(
™di
, {

180 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

181 
ú
->
imm
 &
öfo
->
c⁄°_vÆ
[ú->
rs1
];

182 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

183 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

184 
ú
->
›code
 = 
rv_ö¢_lui
;

185 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

187 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

193 
CONSTOPT
(
¶li
, {

194 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

195 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] << (ir->imm & 0x1f);

196 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

197 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

198 
ú
->
›code
 = 
rv_ö¢_lui
;

199 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

201 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

207 
CONSTOPT
(
§li
, {

208 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

209 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] >> (ir->imm & 0x1f);

210 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

211 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

212 
ú
->
›code
 = 
rv_ö¢_lui
;

213 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

215 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

221 
CONSTOPT
(
§ai
, {

222 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

223 
ú
->
imm
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[ú->
rs1
] >> (ir->imm & 0x1f);

224 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

225 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

226 
ú
->
›code
 = 
rv_ö¢_lui
;

227 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

229 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

233 
CONSTOPT
(
add
, {

234 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

235 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

236 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] + info->c⁄°_vÆ[ú->
rs2
];

237 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

238 
ú
->
›code
 = 
rv_ö¢_lui
;

239 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

241 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

245 
CONSTOPT
(
sub
, {

246 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

247 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

248 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] - info->c⁄°_vÆ[ú->
rs2
];

249 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

250 
ú
->
›code
 = 
rv_ö¢_lui
;

251 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

253 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

257 
CONSTOPT
(
¶l
, {

258 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

259 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

260 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] << (öfo->c⁄°_vÆ[ú->
rs2
] & 0x1f);

261 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

262 
ú
->
›code
 = 
rv_ö¢_lui
;

263 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

265 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

269 
CONSTOPT
(
¶t
, {

270 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

271 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

272 
ú
->
imm
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[ú->
rs1
] <

273 (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs2
]

276 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

277 
ú
->
›code
 = 
rv_ö¢_lui
;

278 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

280 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

284 
CONSTOPT
(
¶tu
, {

285 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

286 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

287 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] < info->c⁄°_vÆ[ú->
rs2
] ? 1 : 0;

288 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

289 
ú
->
›code
 = 
rv_ö¢_lui
;

290 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

292 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

296 
CONSTOPT
(
x‹
, {

297 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

298 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

299 
ú
->
imm
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[ú->
rs1
] ^

300 (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

301 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

302 
ú
->
›code
 = 
rv_ö¢_lui
;

303 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

305 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

309 
CONSTOPT
(
§l
, {

310 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

311 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

312 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] >> (öfo->c⁄°_vÆ[ú->
rs2
] & 0x1f);

313 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

314 
ú
->
›code
 = 
rv_ö¢_lui
;

315 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

317 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

321 
CONSTOPT
(
§a
, {

322 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

323 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

324 
ú
->
imm
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[ú->
rs1
] >>

325 (
öfo
->
c⁄°_vÆ
[
ú
->
rs2
] & 0x1f);

326 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

327 
ú
->
›code
 = 
rv_ö¢_lui
;

328 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

330 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

334 
CONSTOPT
(
‹
, {

335 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

336 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

337 
ú
->
imm
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[ú->
rs1
] |

338 (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

339 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

340 
ú
->
›code
 = 
rv_ö¢_lui
;

341 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

343 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

347 
CONSTOPT
(
™d
, {

348 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

349 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

350 
ú
->
imm
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[ú->
rs1
] &

351 (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

352 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

353 
ú
->
›code
 = 
rv_ö¢_lui
;

354 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

356 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

360 
CONSTOPT
(
eˇŒ
, {})

363 
CONSTOPT
(
ebªak
, {})

366 
CONSTOPT
(
wfi
, {})

369 
CONSTOPT
(
uªt
, {})

372 
CONSTOPT
(
§ë
, {})

375 
CONSTOPT
(
hªt
, {})

378 
CONSTOPT
(
mªt
, {})

383 
CONSTOPT
(
s„n˚vma
, {})

385 #i‡
RV32_HAS
(
Zi„n˚i
)

386 
CONSTOPT
(
„n˚i
, {})

387 
CONSTOPT
(
„n˚
, {})

390 #i‡
RV32_HAS
(
Zic§
)

392 
CONSTOPT
(
c§rw
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

395 
CONSTOPT
(
c§rs
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

398 
CONSTOPT
(
c§rc
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

401 
CONSTOPT
(
c§rwi
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

404 
CONSTOPT
(
c§rsi
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

407 
CONSTOPT
(
c§rci
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

412 #i‡
RV32_HAS
(
EXT_M
)

414 
CONSTOPT
(
mul
, {

415 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

416 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

417 c⁄° 
öt64_t
 
mu…ùliˇnd
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs1
];

418 c⁄° 
öt64_t
 
mu…ùlõr
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

419 
ú
->
imm
 = ((
uöt64_t
Ë(
mu…ùliˇnd
 * 
mu…ùlõr
)) & ((1ULL << 32) - 1);

420 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

421 
ú
->
›code
 = 
rv_ö¢_lui
;

422 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

424 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

428 
CONSTOPT
(
mulh
, {

429 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

430 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

431 c⁄° 
öt64_t
 
a
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs1
];

432 c⁄° 
öt64_t
 
b
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

433 
ú
->
imm
 = ((
uöt64_t
Ë(
a
 * 
b
)) >> 32;

434 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

435 
ú
->
›code
 = 
rv_ö¢_lui
;

436 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

438 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

442 
CONSTOPT
(
mulhsu
, {

443 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

444 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

445 c⁄° 
öt64_t
 
a
 = (
öt32_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs1
];

446 c⁄° 
öt64_t
 
b
 = 
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

447 
ú
->
imm
 = ((
uöt64_t
Ë(
a
 * 
b
)) >> 32;

448 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

449 
ú
->
›code
 = 
rv_ö¢_lui
;

450 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

452 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

456 
CONSTOPT
(
mulhu
, {

457 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

458 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

459 
ú
->
imm
 = ((
öt64_t
Ë
öfo
->
c⁄°_vÆ
[ú->
rs1
] *

460 (
öt64_t
Ë
öfo
->
c⁄°_vÆ
[
ú
->
rs2
]) >>

462 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

463 
ú
->
›code
 = 
rv_ö¢_lui
;

464 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

466 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

477 
CONSTOPT
(
div
, {

478 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

479 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

480 c⁄° 
öt32_t
 
dividíd
 = (öt32_tË
öfo
->
c⁄°_vÆ
[
ú
->
rs1
];

481 c⁄° 
öt32_t
 
divis‹
 = (öt32_tË
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

482 
ú
->
imm
 = !
divis‹
 ? ~0U

483 : (
divis‹
 =-1 && 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
] == 0x80000000U)

484 ? 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
]

485 : (Ë(
dividíd
 / 
divis‹
);

486 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

487 
ú
->
›code
 = 
rv_ö¢_lui
;

488 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

490 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

500 
CONSTOPT
(
divu
, {

501 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

502 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

503 c⁄° 
uöt32_t
 
dividíd
 = 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
];

504 c⁄° 
uöt32_t
 
divis‹
 = 
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

505 
ú
->
imm
 = !
divis‹
 ? ~0U : 
dividíd
 / divisor;

506 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

507 
ú
->
›code
 = 
rv_ö¢_lui
;

508 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

510 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

521 
CONSTOPT
(
ªm
, {

522 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

523 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

524 c⁄° 
öt32_t
 
dividíd
 = 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
];

525 c⁄° 
öt32_t
 
divis‹
 = 
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

526 
ú
->
imm
 = !
divis‹
 ? 
dividíd


527 : (
divis‹
 =-1 && 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
] == 0x80000000U)

529 : (
dividíd
 % 
divis‹
);

530 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

531 
ú
->
›code
 = 
rv_ö¢_lui
;

532 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

534 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

544 
CONSTOPT
(
ªmu
, {

545 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

546 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

547 c⁄° 
uöt32_t
 
dividíd
 = 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
];

548 c⁄° 
uöt32_t
 
divis‹
 = 
öfo
->
c⁄°_vÆ
[
ú
->
rs2
];

549 
ú
->
imm
 = !
divis‹
 ? 
dividíd
 : dividend % divisor;

550 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

551 
ú
->
›code
 = 
rv_ö¢_lui
;

552 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

554 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

560 #i‡
RV32_HAS
(
EXT_A
)

563 
CONSTOPT
(
Ãw
, {

564 i‡(
ú
->
rd
)

565 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

569 
CONSTOPT
(
scw
, {})

572 
CONSTOPT
(
amosw≠w
, {

573 i‡(
ú
->
rd
)

574 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

578 
CONSTOPT
(
amﬂddw
, {

579 i‡(
ú
->
rd
)

580 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

584 
CONSTOPT
(
amox‹w
, {

585 i‡(
ú
->
rd
)

586 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

590 
CONSTOPT
(
amﬂndw
, {

591 i‡(
ú
->
rd
)

592 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

596 
CONSTOPT
(
amo‹w
, {

597 i‡(
ú
->
rd
)

598 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

602 
CONSTOPT
(
amomöw
, {

603 i‡(
ú
->
rd
)

604 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

608 
CONSTOPT
(
amomaxw
, {

609 i‡(
ú
->
rd
)

610 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

614 
CONSTOPT
(
amomöuw
, {

615 i‡(
ú
->
rd
)

616 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

620 
CONSTOPT
(
amomaxuw
, {

621 i‡(
ú
->
rd
)

622 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

628 #i‡
RV32_HAS
(
EXT_F
)

630 
CONSTOPT
(
Êw
, {})

633 
CONSTOPT
(
fsw
, {})

636 
CONSTOPT
(
fmadds
, {})

639 
CONSTOPT
(
fmsubs
, {})

642 
CONSTOPT
(
‚msubs
, {})

645 
CONSTOPT
(
‚madds
, {})

648 
CONSTOPT
(
Ádds
, {})

651 
CONSTOPT
(
fsubs
, {})

654 
CONSTOPT
(
fmuls
, {})

657 
CONSTOPT
(
fdivs
, {})

660 
CONSTOPT
(
fsqπs
, {})

663 
CONSTOPT
(
fsgnjs
, {})

666 
CONSTOPT
(
fsgnjns
, {})

669 
CONSTOPT
(
fsgnjxs
, {})

678 
CONSTOPT
(
fmös
, {})

681 
CONSTOPT
(
fmaxs
, {})

688 
CONSTOPT
(
fcvtws
, {

689 i‡(
ú
->
rd
)

690 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

694 
CONSTOPT
(
fcvtwus
, {

695 i‡(
ú
->
rd
)

696 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

700 
CONSTOPT
(
fmvxw
, {

701 i‡(
ú
->
rd
)

702 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

708 
CONSTOPT
(
„qs
, {

709 i‡(
ú
->
rd
)

710 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

717 
CONSTOPT
(
Êts
, {

718 i‡(
ú
->
rd
)

719 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

722 
CONSTOPT
(
Êes
, {

723 i‡(
ú
->
rd
)

724 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

728 
CONSTOPT
(
f˛asss
, {

729 i‡(
ú
->
rd
)

730 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

734 
CONSTOPT
(
fcvtsw
, {})

737 
CONSTOPT
(
fcvtswu
, {})

740 
CONSTOPT
(
fmvwx
, {})

745 #i‡
RV32_HAS
(
EXT_C
)

752 
CONSTOPT
(
ˇddi4•n
, {

753 i‡(
öfo
->
is_c⁄°™t
[
rv_ªg_•
]) {

754 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

755 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[
rv_ªg_•
] + (
uöt16_t
) ir->imm;

756 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

757 
ú
->
›code
 = 
rv_ö¢_˛ui
;

758 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

760 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

767 
CONSTOPT
(
˛w
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

774 
CONSTOPT
(
csw
, {})

777 
CONSTOPT
(
˙›
, {})

785 
CONSTOPT
(
ˇddi
, {

786 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rd
]) {

787 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rd
] + (
öt16_t
) ir->imm;

788 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

789 
ú
->
›code
 = 
rv_ö¢_˛ui
;

790 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

795 
CONSTOPT
(
cjÆ
, {

796 
öfo
->
is_c⁄°™t
[
rv_ªg_ø
] = 
åue
;

797 
öfo
->
c⁄°_vÆ
[
rv_ªg_ø
] = 
ú
->
pc
 + 2;

804 
CONSTOPT
(
˛i
, {

805 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

806 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

814 
CONSTOPT
(
ˇddi16•
, {

815 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rd
]) {

816 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rd
] + ir->imm;

817 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

818 
ú
->
›code
 = 
rv_ö¢_˛ui
;

819 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

830 
CONSTOPT
(
˛ui
, {

831 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

832 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

840 
CONSTOPT
(
c§li
, {

841 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

842 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] >> ir->
shamt
;

843 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
] = ir->
imm
;

844 
ú
->
rd
 = ir->
rs1
;

845 
ú
->
›code
 = 
rv_ö¢_˛ui
;

846 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

853 
CONSTOPT
(
c§ai
, {

854 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

855 c⁄° 
uöt32_t
 
mask
 = 0x80000000 & 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
];

856 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] >> ir->
shamt
;

857 
i
 = 0; i < 
ú
->
shamt
; ++i)

858 
ú
->
imm
 |
mask
 >> 
i
;

859 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
] = ir->
imm
;

860 
ú
->
rd
 = ir->
rs1
;

861 
ú
->
›code
 = 
rv_ö¢_˛ui
;

862 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

870 
CONSTOPT
(
ˇndi
, {

871 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

872 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] & ir->imm;

873 
öfo
->
c⁄°_vÆ
[
ú
->
rs1
] = ir->
imm
;

874 
ú
->
rd
 = ir->
rs1
;

875 
ú
->
›code
 = 
rv_ö¢_˛ui
;

876 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

881 
CONSTOPT
(
csub
, {

882 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

883 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

884 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] - info->c⁄°_vÆ[ú->
rs2
];

885 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

886 
ú
->
›code
 = 
rv_ö¢_˛ui
;

887 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

889 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

893 
CONSTOPT
(
cx‹
, {

894 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

895 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

896 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] ^ info->c⁄°_vÆ[ú->
rs2
];

897 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

898 
ú
->
›code
 = 
rv_ö¢_˛ui
;

899 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

901 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

904 
CONSTOPT
(
c‹
, {

905 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

906 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

907 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] | info->c⁄°_vÆ[ú->
rs2
];

908 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

909 
ú
->
›code
 = 
rv_ö¢_˛ui
;

910 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

912 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

915 
CONSTOPT
(
ˇnd
, {

916 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

917 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

918 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] & info->c⁄°_vÆ[ú->
rs2
];

919 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

920 
ú
->
›code
 = 
rv_ö¢_˛ui
;

921 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

923 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

931 
CONSTOPT
(
cj
, {})

938 
CONSTOPT
(
cbeqz
, {

939 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

940 i‡(
öfo
->
c⁄°_vÆ
[
ú
->
rs1
])

941 
ú
->
imm
 = 2;

942 
ú
->
›code
 = 
rv_ö¢_cj
;

943 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

948 
CONSTOPT
(
cb√z
, {

949 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
]) {

950 i‡(!
öfo
->
c⁄°_vÆ
[
ú
->
rs1
])

951 
ú
->
imm
 = 2;

952 
ú
->
›code
 = 
rv_ö¢_cj
;

953 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

961 
CONSTOPT
(
c¶li
, {

962 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rd
]) {

963 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rd
] << (
uöt8_t
) ir->imm;

964 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

965 
ú
->
›code
 = 
rv_ö¢_˛ui
;

966 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

971 
CONSTOPT
(
˛w•
, { 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
; })

974 
CONSTOPT
(
cjr
, {})

977 
CONSTOPT
(
cmv
, {

978 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs2
]) {

979 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

980 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs2
];

981 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

982 
ú
->
›code
 = 
rv_ö¢_˛ui
;

983 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

985 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

990 
CONSTOPT
(
˚bªak
, {})

993 
CONSTOPT
(
cjÆr
, {

994 
öfo
->
is_c⁄°™t
[
rv_ªg_ø
] = 
åue
;

995 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
pc
 + 2;

1005 
CONSTOPT
(
ˇdd
, {

1006 i‡(
öfo
->
is_c⁄°™t
[
ú
->
rs1
] && info->is_c⁄°™t[ú->
rs2
]) {

1007 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
åue
;

1008 
ú
->
imm
 = 
öfo
->
c⁄°_vÆ
[ú->
rs1
] + info->c⁄°_vÆ[ú->
rs2
];

1009 
öfo
->
c⁄°_vÆ
[
ú
->
rd
] = ir->
imm
;

1010 
ú
->
›code
 = 
rv_ö¢_˛ui
;

1011 
ú
->
im∂
 = 
di•©ch_èbÀ
[ú->
›code
];

1013 
öfo
->
is_c⁄°™t
[
ú
->
rd
] = 
Ál£
;

1017 
CONSTOPT
(
csw•
, {})

1022 #i‡
RV32_HAS
(
EXT_F
Ë&& RV32_HAS(
EXT_C
)

1024 
CONSTOPT
(
cÊw•
, {})

1027 
CONSTOPT
(
cfsw•
, {})

1030 
CONSTOPT
(
cÊw
, {})

1033 
CONSTOPT
(
cfsw
, {})

	@src/rv32_template.c

122 
	~<wch¨.h
>

123 
	~"decode.h
"

124 
RVOP
(

125 
n›
,

126 { 
rv
->
X
[
rv_ªg_zîo
] = 0; },

127 
GEN
({ }))

134 
RVOP
(

135 
lui
,

136 { 
rv
->
X
[
ú
->
rd
] = ir->
imm
; },

137 
GEN
({

138 
m≠
, 
VR0
, 
rd
;

139 
ldimm
, 
VR0
, 
imm
;

147 
RVOP
(

148 
auùc
,

150 
rv
->
X
[
ú
->
rd
] = ir->
imm
 + 
PC
;

152 
GEN
({

153 
m≠
, 
VR0
, 
rd
;

154 
ldimm
, 
VR0
, 
pc
, 
imm
;

161 
RVOP
(

162 
jÆ
,

164 c⁄° 
uöt32_t
 
pc
 = 
PC
;

167 
PC
 +
ú
->
imm
;

170 i‡(
ú
->
rd
)

171 
rv
->
X
[
ú
->
rd
] = 
pc
 + 4;

173 #i‡!
RV32_HAS
(
EXT_C
)

174 
RV_EXC_MISALIGN_HANDLER
(
pc
, 
ö¢
, 
Ál£
, 0);

176 
rv_ö¢
 *
èkí
 = 
ú
->
bønch_èkí
;

177 i‡(
èkí
) {

178 #i‡
RV32_HAS
(
JIT
)

179 
ˇche_gë
(
rv
->
block_ˇche
, 
PC
, 
åue
);

180 i‡(!
£t_add
(&
pc_£t
, 
PC
))

181 
has_lo›s
 = 
åue
;

182 i‡(
ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
))

183 
íd_›
;

185 
œ°_pc
 = 
PC
;

186 if(!
rv
->
is_å≠≥d
){

187 
MUST_TAIL
  
èkí
->
im∂
(
rv
,Åakí, 
cy˛e
, 
PC
);

190 
íd_›
;

192 
GEN
({

193 
c⁄d
, 
rd
;

194 
m≠
, 
VR0
, 
rd
;

195 
ldimm
, 
VR0
, 
pc
, 4;

196 
íd
;

198 
jmp
, 
pc
, 
imm
;

199 
ldimm
, 
TMP
, 
pc
, 
imm
;

200 
°
, 
S32
, 
TMP
, 
PC
;

201 
exô
;

210 #i‡!
RV32_HAS
(
JIT
)

211 
	#LOOKUP_OR_UPDATE_BRANCH_HISTORY_TABLE
() \

221 if(!
rv
->
is_å≠≥d
 && !
ªloc_íabÀ_mmu
){ \

222 
i
 = 0; i < 
HISTORY_SIZE
; i++) { \

223 i‡(
ú
->
bønch_èbÀ
->
PC
[
i
] == PC) { \

224 
MUST_TAIL
  
ú
->
bønch_èbÀ
->
èrgë
[
i
]->
	`im∂
( \

225 
rv
, 
ú
->
bønch_èbÀ
->
èrgë
[
i
], 
cy˛e
, 
PC
); \

228 
block_t
 *
block
 = 
	`block_föd
(&
rv
->
block_m≠
, 
PC
); \

229 i‡(
block
) { \

231 
ú
->
bønch_èbÀ
->
PC
[ú->bønch_èbÀ->
idx
] = PC; \

232 
ú
->
bønch_èbÀ
->
èrgë
[ú->bønch_èbÀ->
idx
] = 
block
->
ú_hód
; \

233 
ú
->
bønch_èbÀ
->
idx
 = \

234 (
ú
->
bønch_èbÀ
->
idx
 + 1Ë% 
HISTORY_SIZE
; \

235 
MUST_TAIL
  
block
->
ú_hód
->
	`im∂
(
rv
, block->ú_hód, 
cy˛e
, \

236 
PC
); \

238 }

	)

240 
	#LOOKUP_OR_UPDATE_BRANCH_HISTORY_TABLE
() \

241 
block_t
 *
block
 = 
	`ˇche_gë
(
rv
->
block_ˇche
, 
PC
, 
åue
); \

242 i‡(
block
) { \

243 
i
 = 0; i < 
HISTORY_SIZE
; i++) { \

244 i‡(
ú
->
bønch_èbÀ
->
PC
[
i
] == PC) { \

245 
ú
->
bønch_èbÀ
->
times
[
i
]++; \

246 i‡(
	`ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
)) \

247 
íd_›
; \

251 
mö_idx
 = 0; \

252 
i
 = 0; i < 
HISTORY_SIZE
; i++) { \

253 i‡(!
ú
->
bønch_èbÀ
->
times
[
i
]) { \

254 
mö_idx
 = 
i
; \

256 } i‡(
ú
->
bønch_èbÀ
->
times
[
mö_idx
] > \

257 
ú
->
bønch_èbÀ
->
times
[
i
]) { \

258 
mö_idx
 = 
i
; \

261 
ú
->
bønch_èbÀ
->
times
[
mö_idx
] = 1; \

262 
ú
->
bønch_èbÀ
->
PC
[
mö_idx
] = PC; \

263 i‡(
	`ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
)) \

264 
íd_›
; \

265 
MUST_TAIL
  
block
->
ú_hód
->
	`im∂
(
rv
, block->ú_hód, 
cy˛e
, 
PC
); \

266 }

	)

276 
RVOP
(

277 
jÆr
,

282 c⁄° 
uöt32_t
 
pc
 = 
PC
;

286 
PC
 = (
rv
->
X
[
ú
->
rs1
] + ir->
imm
) & ~1U;

289 i‡(
ú
->
rd
)

290 
rv
->
X
[
ú
->
rd
] = 
pc
 + 4;

293 #i‡!
RV32_HAS
(
EXT_C
)

294 
RV_EXC_MISALIGN_HANDLER
(
pc
, 
ö¢
, 
Ál£
, 0);

296 
LOOKUP_OR_UPDATE_BRANCH_HISTORY_TABLE
();

311 if(!
ªloc_íabÀ_mmu
 && 
ªloc_íabÀ_mmu_jÆr_addr
 == 0xc00000b4){

312 
ªloc_íabÀ_mmu
 = 
åue
;

313 
√ed_ªå™¶©e
 = 
åue
;

314 
rv
->
is_å≠≥d
 = 
Ál£
;

317 
íd_›
;

319 
GEN
({

320 
c⁄d
, 
rd
;

321 
m≠
, 
VR0
, 
rd
;

322 
ldimm
, 
VR0
, 
pc
, 4;

323 
íd
;

324 
øld
, 
VR1
, 
rs1
;

325 
mov
, 
VR1
, 
TMP
;

326 
Æu32imm
, 32, 0x81, 0, 
TMP
, 
imm
;

327 
Æu32imm
, 32, 0x81, 4, 
TMP
, ~1U;

329 
¥edi˘
;

330 
°
, 
S32
, 
TMP
, 
PC
;

331 
exô
;

335 
	#BRANCH_COND
(
ty≥
, 
x
, 
y
, 
c⁄d
) \

336 (
ty≥
Ë
x
 
	`c⁄d
 (ty≥Ë
y


	)

339 
	#BRANCH_FUNC
(
ty≥
, 
c⁄d
) \

340 
	`IIF
(
	`RV32_HAS
(
EXT_C
))(, c⁄° 
uöt32_t
 
pc
 = 
PC
;); \

341 i‡(
	`BRANCH_COND
(
ty≥
, 
rv
->
X
[
ú
->
rs1
],Ñv->X[ú->
rs2
], 
c⁄d
)) { \

342 
is_bønch_èkí
 = 
Ál£
; \

343 
rv_ö¢
 *
u¡akí
 = 
ú
->
bønch_u¡akí
; \

344 i‡(!
u¡akí
) \

345 
√xt›
; \

346 
	`IIF
(
	`RV32_HAS
(
JIT
)) \

348 
	`ˇche_gë
(
rv
->
block_ˇche
, 
PC
 + 4, 
åue
); \

349 i‡(!
	`£t_add
(&
pc_£t
, 
PC
 + 4)) \

350 
has_lo›s
 = 
åue
; \

351 i‡(
	`ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
 + 4)) \

352 
√xt›
; \

354 
PC
 += 4; \

355 
œ°_pc
 = 
PC
; \

356 if(!
rv
->
is_å≠≥d
) {\

357 
MUST_TAIL
  
u¡akí
->
	`im∂
(
rv
, u¡akí, 
cy˛e
, 
PC
); \

359 
íd_›
;\

361 
is_bønch_èkí
 = 
åue
; \

362 
PC
 +
ú
->
imm
; \

364 
	`IIF
(
	`RV32_HAS
(
EXT_C
)) \

365 (, 
	`RV_EXC_MISALIGN_HANDLER
(
pc
, 
ö¢
, 
Ál£
, 0);); \

366 
rv_ö¢
 *
èkí
 = 
ú
->
bønch_èkí
; \

367 i‡(
èkí
) { \

368 
	`IIF
(
	`RV32_HAS
(
JIT
)) \

370 
	`ˇche_gë
(
rv
->
block_ˇche
, 
PC
, 
åue
); \

371 i‡(!
	`£t_add
(&
pc_£t
, 
PC
)) \

372 
has_lo›s
 = 
åue
; \

373 i‡(
	`ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
)) \

374 
íd_›
; \

376 if(
rv
->
PC
 == 0xc0002388){\

378 
œ°_pc
 = 
PC
; \

379 if(!
rv
->
is_å≠≥d
) {\

380 
MUST_TAIL
  
èkí
->
	`im∂
(
rv
,Åakí, 
cy˛e
, 
PC
); \

383 
íd_›
;

	)

402 
RVOP
(

403 
beq
,

404 { 
BRANCH_FUNC
(
uöt32_t
, !=); },

405 
GEN
({

406 
øld2
, 
rs1
, 
rs2
;

407 
cmp
, 
VR1
, 
VR0
;

409 
£tjmpoff
;

410 
jcc
, 0x84;

411 
c⁄d
, 
bønch_u¡akí
;

412 
jmp
, 
pc
, 4;

413 
íd
;

414 
ldimm
, 
TMP
, 
pc
, 4;

415 
°
, 
S32
, 
TMP
, 
PC
;

416 
exô
;

417 
jmpoff
;

418 
c⁄d
, 
bønch_èkí
;

419 
jmp
, 
pc
, 
imm
;

420 
íd
;

421 
ldimm
, 
TMP
, 
pc
, 
imm
;

422 
°
, 
S32
, 
TMP
, 
PC
;

423 
exô
;

427 
RVOP
(

428 
b√
,

429 { 
BRANCH_FUNC
(
uöt32_t
, ==); },

430 
GEN
({

431 
øld2
, 
rs1
, 
rs2
;

432 
cmp
, 
VR1
, 
VR0
;

434 
£tjmpoff
;

435 
jcc
, 0x85;

436 
c⁄d
, 
bønch_u¡akí
;

437 
jmp
, 
pc
, 4;

438 
íd
;

439 
ldimm
, 
TMP
, 
pc
, 4;

440 
°
, 
S32
, 
TMP
, 
PC
;

441 
exô
;

442 
jmpoff
;

443 
c⁄d
, 
bønch_èkí
;

444 
jmp
, 
pc
, 
imm
;

445 
íd
;

446 
ldimm
, 
TMP
, 
pc
, 
imm
;

447 
°
, 
S32
, 
TMP
, 
PC
;

448 
exô
;

452 
RVOP
(

453 
b…
,

454 { 
BRANCH_FUNC
(
öt32_t
, >=); },

455 
GEN
({

456 
øld2
, 
rs1
, 
rs2
;

457 
cmp
, 
VR1
, 
VR0
;

459 
£tjmpoff
;

460 
jcc
, 0x8c;

461 
c⁄d
, 
bønch_u¡akí
;

462 
jmp
, 
pc
, 4;

463 
íd
;

464 
ldimm
, 
TMP
, 
pc
, 4;

465 
°
, 
S32
, 
TMP
, 
PC
;

466 
exô
;

467 
jmpoff
;

468 
c⁄d
, 
bønch_èkí
;

469 
jmp
, 
pc
, 
imm
;

470 
íd
;

471 
ldimm
, 
TMP
, 
pc
, 
imm
;

472 
°
, 
S32
, 
TMP
, 
PC
;

473 
exô
;

477 
RVOP
(

478 
bge
,

479 { 
BRANCH_FUNC
(
öt32_t
, <); },

480 
GEN
({

481 
øld2
, 
rs1
, 
rs2
;

482 
cmp
, 
VR1
, 
VR0
;

484 
£tjmpoff
;

485 
jcc
, 0x8d;

486 
c⁄d
, 
bønch_u¡akí
;

487 
jmp
, 
pc
, 4;

488 
íd
;

489 
ldimm
, 
TMP
, 
pc
, 4;

490 
°
, 
S32
, 
TMP
, 
PC
;

491 
exô
;

492 
jmpoff
;

493 
c⁄d
, 
bønch_èkí
;

494 
jmp
, 
pc
, 
imm
;

495 
íd
;

496 
ldimm
, 
TMP
, 
pc
, 
imm
;

497 
°
, 
S32
, 
TMP
, 
PC
;

498 
exô
;

502 
RVOP
(

503 
b…u
,

504 { 
BRANCH_FUNC
(
uöt32_t
, >=); },

505 
GEN
({

506 
øld2
, 
rs1
, 
rs2
;

507 
cmp
, 
VR1
, 
VR0
;

509 
£tjmpoff
;

510 
jcc
, 0x82;

511 
c⁄d
, 
bønch_u¡akí
;

512 
jmp
, 
pc
, 4;

513 
íd
;

514 
ldimm
, 
TMP
, 
pc
, 4;

515 
°
, 
S32
, 
TMP
, 
PC
;

516 
exô
;

517 
jmpoff
;

518 
c⁄d
, 
bønch_èkí
;

519 
jmp
, 
pc
, 
imm
;

520 
íd
;

521 
ldimm
, 
TMP
, 
pc
, 
imm
;

522 
°
, 
S32
, 
TMP
, 
PC
;

523 
exô
;

527 
RVOP
(

528 
bgeu
,

529 { 
BRANCH_FUNC
(
uöt32_t
, <); },

530 
GEN
({

531 
øld2
, 
rs1
, 
rs2
;

532 
cmp
, 
VR1
, 
VR0
;

534 
£tjmpoff
;

535 
jcc
, 0x83;

536 
c⁄d
, 
bønch_u¡akí
;

537 
jmp
, 
pc
, 4;

538 
íd
;

539 
ldimm
, 
TMP
, 
pc
, 4;

540 
°
, 
S32
, 
TMP
, 
PC
;

541 
exô
;

542 
jmpoff
;

543 
c⁄d
, 
bønch_èkí
;

544 
jmp
, 
pc
, 
imm
;

545 
íd
;

546 
ldimm
, 
TMP
, 
pc
, 
imm
;

547 
°
, 
S32
, 
TMP
, 
PC
;

548 
exô
;

559 
RVOP
(

560 
lb
,

562 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

563 
rv
->
X
[
ú
->
rd
] = 
sign_exãnd_b
‘v->
io
.
mem_ªad_b
‘v, 
addr
));

565 
GEN
({

566 
mem
;

567 
øld
, 
VR0
, 
rs1
;

568 
ldimm
, 
TMP
, 
mem
;

569 
Æu64
, 0x01, 
VR0
, 
TMP
;

570 
m≠
, 
VR1
, 
rd
;

571 
lds
, 
S8
, 
TMP
, 
VR1
, 0;

575 
RVOP
(

576 
lh
,

578 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

579 
RV_EXC_MISALIGN_HANDLER
(1, 
lﬂd
, 
Ál£
, 1);

580 
rv
->
X
[
ú
->
rd
] = 
sign_exãnd_h
‘v->
io
.
mem_ªad_s
‘v, 
addr
));

582 
GEN
({

583 
mem
;

584 
øld
, 
VR0
, 
rs1
;

585 
ldimm
, 
TMP
, 
mem
;

586 
Æu64
, 0x01, 
VR0
, 
TMP
;

587 
m≠
, 
VR1
, 
rd
;

588 
lds
, 
S16
, 
TMP
, 
VR1
, 0;

592 
RVOP
(

593 
lw
,

596 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

597 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

598 
rv
->
X
[
ú
->
rd
] =Ñv->
io
.
mem_ªad_w
‘v, 
addr
);

600 
GEN
({

601 
mem
;

602 
øld
, 
VR0
, 
rs1
;

603 
ldimm
, 
TMP
, 
mem
;

604 
Æu64
, 0x01, 
VR0
, 
TMP
;

605 
m≠
, 
VR1
, 
rd
;

606 
ld
, 
S32
, 
TMP
, 
VR1
, 0;

610 
RVOP
(

611 
lbu
,

613 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

614 
rv
->
X
[
ú
->
rd
] =Ñv->
io
.
mem_ªad_b
‘v, 
addr
);

616 
GEN
({

617 
mem
;

618 
øld
, 
VR0
, 
rs1
;

619 
ldimm
, 
TMP
, 
mem
;

620 
Æu64
, 0x01, 
VR0
, 
TMP
;

621 
m≠
, 
VR1
, 
rd
;

622 
ld
, 
S8
, 
TMP
, 
VR1
, 0;

626 
RVOP
(

627 
lhu
,

629 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

630 
RV_EXC_MISALIGN_HANDLER
(1, 
lﬂd
, 
Ál£
, 1);

631 
rv
->
X
[
ú
->
rd
] =Ñv->
io
.
mem_ªad_s
‘v, 
addr
);

633 
GEN
({

634 
mem
;

635 
øld
, 
VR0
, 
rs1
;

636 
ldimm
, 
TMP
, 
mem
;

637 
Æu64
, 0x01, 
VR0
, 
TMP
;

638 
m≠
, 
VR1
, 
rd
;

639 
ld
, 
S16
, 
TMP
, 
VR1
, 0;

649 
RVOP
(

650 
sb
,

652 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

653 
rv
->
io
.
mem_wrôe_b
‘v, 
addr
,Ñv->
X
[
ú
->
rs2
]);

655 
GEN
({

656 
mem
;

657 
øld
, 
VR0
, 
rs1
;

658 
ldimm
, 
TMP
, 
mem
;

659 
Æu64
, 0x01, 
VR0
, 
TMP
;

660 
øld
, 
VR1
, 
rs2
;

661 
°
, 
S8
, 
VR1
, 
TMP
, 0;

665 
RVOP
(

666 
sh
,

668 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

669 
RV_EXC_MISALIGN_HANDLER
(1, 
°‹e
, 
Ál£
, 1);

670 
rv
->
io
.
mem_wrôe_s
‘v, 
addr
,Ñv->
X
[
ú
->
rs2
]);

672 
GEN
({

673 
mem
;

674 
øld
, 
VR0
, 
rs1
;

675 
ldimm
, 
TMP
, 
mem
;

676 
Æu64
, 0x01, 
VR0
, 
TMP
;

677 
øld
, 
VR1
, 
rs2
;

678 
°
, 
S16
, 
VR1
, 
TMP
, 0;

682 
RVOP
(

683 
sw
,

685 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

686 
RV_EXC_MISALIGN_HANDLER
(3, 
°‹e
, 
Ál£
, 1);

687 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
,Ñv->
X
[
ú
->
rs2
]);

689 
GEN
({

690 
mem
;

691 
øld
, 
VR0
, 
rs1
;

692 
ldimm
, 
TMP
, 
mem
;

693 
Æu64
, 0x01, 
VR0
, 
TMP
;

694 
øld
, 
VR1
, 
rs2
;

695 
°
, 
S32
, 
VR1
, 
TMP
, 0;

703 
RVOP
(

704 
addi
,

705 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] + ir->
imm
; },

706 
GEN
({

707 
øld
, 
VR0
, 
rs1
;

708 
m≠
, 
VR1
, 
rd
;

709 
c⁄d
, 
ªg√q
;

710 
mov
, 
VR0
, 
VR1
;

711 
íd
;

712 
Æu32imm
, 32, 0x81, 0, 
VR1
, 
imm
;

719 
RVOP
(

720 
¶ti
,

721 { 
rv
->
X
[
ú
->
rd
] = ((
öt32_t
Ë‘v->X[ú->
rs1
]Ë< ir->
imm
) ? 1 : 0; },

722 
GEN
({

723 
øld
, 
VR0
, 
rs1
;

724 
cmpimm
, 
VR0
, 
imm
;

725 
m≠
, 
VR1
, 
rd
;

726 
ldimm
, 
VR1
, 1;

727 
£tjmpoff
;

728 
jcc
, 0x8c;

729 
ldimm
, 
VR1
, 0;

730 
jmpoff
;

736 
RVOP
(

737 
¶tiu
,

738 { 
rv
->
X
[
ú
->
rd
] = (rv->X[ú->
rs1
] < (
uöt32_t
Ëú->
imm
) ? 1 : 0; },

739 
GEN
({

740 
øld
, 
VR0
, 
rs1
;

741 
cmpimm
, 
VR0
, 
imm
;

742 
m≠
, 
VR1
, 
rd
;

743 
ldimm
, 
VR1
, 1;

744 
£tjmpoff
;

745 
jcc
, 0x82;

746 
ldimm
, 
VR1
, 0;

747 
jmpoff
;

751 
RVOP
(

752 
x‹i
,

753 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] ^ ir->
imm
; },

754 
GEN
({

755 
øld
, 
VR0
, 
rs1
;

756 
m≠
, 
VR1
, 
rd
;

757 
c⁄d
, 
ªg√q
;

758 
mov
, 
VR0
, 
VR1
;

759 
íd
;

760 
Æu32imm
, 32, 0x81, 6, 
VR1
, 
imm
;

764 
RVOP
(

765 
‹i
,

766 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] | ir->
imm
; },

767 
GEN
({

768 
øld
, 
VR0
, 
rs1
;

769 
m≠
, 
VR1
, 
rd
;

770 
c⁄d
, 
ªg√q
;

771 
mov
, 
VR0
, 
VR1
;

772 
íd
;

773 
Æu32imm
, 32, 0x81, 1, 
VR1
, 
imm
;

779 
RVOP
(

780 
™di
,

782 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] & ir->
imm
;

784 
GEN
({

785 
øld
, 
VR0
, 
rs1
;

786 
m≠
, 
VR1
, 
rd
;

787 
c⁄d
, 
ªg√q
;

788 
mov
, 
VR0
, 
VR1
;

789 
íd
;

790 
Æu32imm
, 32, 0x81, 4, 
VR1
, 
imm
;

793 
FORCE_INLINE
 
	$shi·_func
(
riscv_t
 *
rv
, c⁄° 
rv_ö¢_t
 *
ú
)

795 
ú
->
›code
) {

796 
rv_ö¢_¶li
:

797 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] << (ú->
imm
 & 0x1f);

799 
rv_ö¢_§li
:

800 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] >> (ú->
imm
 & 0x1f);

802 
rv_ö¢_§ai
:

803 
rv
->
X
[
ú
->
rd
] = ((
öt32_t
Ërv->X[ú->
rs1
]Ë>> (ú->
imm
 & 0x1f);

806 
__UNREACHABLE
;

809 
	}
};

814 
RVOP
(

815 
¶li
,

816 { 
shi·_func
(
rv
, 
ú
); },

817 
GEN
({

818 
øld
, 
VR0
, 
rs1
;

819 
m≠
, 
VR1
, 
rd
;

820 
c⁄d
, 
ªg√q
;

821 
mov
, 
VR0
, 
VR1
;

822 
íd
;

823 
Æu32imm
, 8, 0xc1, 4, 
VR1
, 
imm
, 0x1f;

829 
RVOP
(

830 
§li
,

831 { 
shi·_func
(
rv
, 
ú
); },

832 
GEN
({

833 
øld
, 
VR0
, 
rs1
;

834 
m≠
, 
VR1
, 
rd
;

835 
c⁄d
, 
ªg√q
;

836 
mov
, 
VR0
, 
VR1
;

837 
íd
;

838 
Æu32imm
, 8, 0xc1, 5, 
VR1
, 
imm
, 0x1f;

844 
RVOP
(

845 
§ai
,

846 { 
shi·_func
(
rv
, 
ú
); },

847 
GEN
({

848 
øld
, 
VR0
, 
rs1
;

849 
m≠
, 
VR1
, 
rd
;

850 
c⁄d
, 
ªg√q
;

851 
mov
, 
VR0
, 
VR1
;

852 
íd
;

853 
Æu32imm
, 8, 0xc1, 7, 
VR1
, 
imm
, 0x1f;

857 
RVOP
(

858 
add
,

859 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] +Ñv->X[ú->
rs2
]; },

860 
GEN
({

861 
øld2
, 
rs1
, 
rs2
;

862 
m≠
, 
VR2
, 
rd
;

863 
mov
, 
VR1
, 
TMP
;

864 
mov
, 
VR0
, 
VR2
;

865 
Æu32
, 0x01, 
TMP
, 
VR2
;

869 
RVOP
(

870 
sub
,

871 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] -Ñv->X[ú->
rs2
]; },

872 
GEN
({

873 
øld2
, 
rs1
, 
rs2
;

874 
m≠
, 
VR2
, 
rd
;

875 
mov
, 
VR1
, 
TMP
;

876 
mov
, 
VR0
, 
VR2
;

877 
Æu32
, 0x29, 
TMP
, 
VR2
;

881 
RVOP
(

882 
¶l
,

883 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] << (rv->X[ú->
rs2
] & 0x1f); },

884 
GEN
({

885 
øld2
, 
rs1
, 
rs2
;

886 
m≠
, 
VR2
, 
rd
;

887 
mov
, 
VR1
, 
TMP
;

888 
mov
, 
VR0
, 
VR2
;

889 
Æu32imm
, 32, 0x81, 4, 
TMP
, 0x1f;

890 
Æu32
, 0xd3, 4, 
VR2
;

894 
RVOP
(

895 
¶t
,

897 
rv
->
X
[
ú
->
rd
] =

898 ((
öt32_t
Ë(
rv
->
X
[
ú
->
rs1
]Ë< (öt32_tË‘v->X[ú->
rs2
])) ? 1 : 0;

900 
GEN
({

901 
øld2
, 
rs1
, 
rs2
;

902 
m≠
, 
VR2
, 
rd
;

903 
cmp
, 
VR1
, 
VR0
;

904 
ldimm
, 
VR2
, 1;

905 
£tjmpoff
;

906 
jcc
, 0x8c;

907 
ldimm
, 
VR2
, 0;

908 
jmpoff
;

912 
RVOP
(

913 
¶tu
,

914 { 
rv
->
X
[
ú
->
rd
] = (rv->X[ú->
rs1
] <Ñv->X[ú->
rs2
]) ? 1 : 0; },

915 
GEN
({

916 
øld2
, 
rs1
, 
rs2
;

917 
m≠
, 
VR2
, 
rd
;

918 
cmp
, 
VR1
, 
VR0
;

919 
ldimm
, 
VR2
, 1;

920 
£tjmpoff
;

921 
jcc
, 0x82;

922 
ldimm
, 
VR2
, 0;

923 
jmpoff
;

927 
RVOP
(

928 
x‹
,

930 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] ^Ñv->X[ú->
rs2
];

932 
GEN
({

933 
øld2
, 
rs1
, 
rs2
;

934 
m≠
, 
VR2
, 
rd
;

935 
mov
, 
VR1
, 
TMP
;

936 
mov
, 
VR0
, 
VR2
;

937 
Æu32
, 0x31, 
TMP
, 
VR2
;

941 
RVOP
(

942 
§l
,

943 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] >> (rv->X[ú->
rs2
] & 0x1f); },

944 
GEN
({

945 
øld2
, 
rs1
, 
rs2
;

946 
m≠
, 
VR2
, 
rd
;

947 
mov
, 
VR1
, 
TMP
;

948 
mov
, 
VR0
, 
VR2
;

949 
Æu32imm
, 32, 0x81, 4, 
TMP
, 0x1f;

950 
Æu32
, 0xd3, 5, 
VR2
;

954 
RVOP
(

955 
§a
,

956 { 
rv
->
X
[
ú
->
rd
] = ((
öt32_t
Ërv->X[ú->
rs1
]Ë>> (rv->X[ú->
rs2
] & 0x1f); },

957 
GEN
({

958 
øld2
, 
rs1
, 
rs2
;

959 
m≠
, 
VR2
, 
rd
;

960 
mov
, 
VR1
, 
TMP
;

961 
mov
, 
VR0
, 
VR2
;

962 
Æu32imm
, 32, 0x81, 4, 
TMP
, 0x1f;

963 
Æu32
, 0xd3, 7, 
VR2
;

967 
RVOP
(

968 
‹


970 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] |Ñv->X[ú->
rs2
]; },

971 
GEN
({

972 
øld2
, 
rs1
, 
rs2
;

973 
m≠
, 
VR2
, 
rd
;

974 
mov
, 
VR1
, 
TMP
;

975 
mov
, 
VR0
, 
VR2
;

976 
Æu32
, 0x09, 
TMP
, 
VR2
;

981 
RVOP
(

982 
™d
,

983 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] &Ñv->X[ú->
rs2
]; },

984 
GEN
({

985 
øld2
, 
rs1
, 
rs2
;

986 
m≠
, 
VR2
, 
rd
;

987 
mov
, 
VR1
, 
TMP
;

988 
mov
, 
VR0
, 
VR2
;

989 
Æu32
, 0x21, 
TMP
, 
VR2
;

994 
RVOP
(

995 
eˇŒ
,

997 
rv
->
com¥es£d
 = 
Ál£
;

998 
rv
->
c§_cy˛e
 = 
cy˛e
;

999 
rv
->
PC
 = PC;

1000 if((
PC
 >> 20) == 0x957){

1003 
rv
->
io
.
⁄_eˇŒ
(rv);

1004  
åue
;

1006 
GEN
({

1008 
ldimm
, 
TMP
, 
pc
;

1009 
°
, 
S32
, 
TMP
, 
PC
;

1010 
ˇŒ
, 
eˇŒ
;

1011 
exô
;

1015 
RVOP
(

1016 
ebªak
,

1018 
rv
->
com¥es£d
 = 
Ál£
;

1019 
rv
->
c§_cy˛e
 = 
cy˛e
;

1020 
rv
->
PC
 = PC;

1021 if((
PC
 >> 20) == 0x957){

1024 
rv
->
io
.
⁄_ebªak
(rv);

1025  
åue
;

1027 
GEN
({

1029 
ldimm
, 
TMP
, 
pc
;

1030 
°
, 
S32
, 
TMP
, 
PC
;

1031 
ˇŒ
, 
ebªak
;

1032 
exô
;

1036 
RVOP
(

1037 
wfi
,

1039 
PC
 += 4;

1041 
íd_›
;

1044 
GEN
({

1045 
as£π
;

1049 
RVOP
(

1050 
uªt
,

1053  
Ál£
;

1055 
GEN
({

1056 
as£π
;

1060 
RVOP
(

1061 
§ë
,

1063 
rv
->
is_å≠≥d
 = 
Ál£
;

1064 
rv
->
¥iv_mode
 = (rv->
c§_s°©us
 & 
SSTATUS_SPP
Ë>> 
SSTATUS_SPP_SHIFT
;

1065 
rv
->
c§_s°©us
 &~(
SSTATUS_SPP
);

1067 c⁄° 
uöt32_t
 
s°©us_•õ
 =

1068 (
rv
->
c§_s°©us
 & 
SSTATUS_SPIE
Ë>> 
SSTATUS_SPIE_SHIFT
;

1069 
rv
->
c§_s°©us
 |(
s°©us_•õ
 << 
SSTATUS_SIE_SHIFT
);

1070 
rv
->
c§_s°©us
 |
SSTATUS_SPIE
;

1072 
rv
->
PC
 =Ñv->
c§_£pc
;

1074  
åue
;

1076 
GEN
({

1077 
as£π
;

1081 
RVOP
(

1082 
hªt
,

1085  
Ál£
;

1087 
GEN
({

1088 
as£π
;

1092 
RVOP
(

1093 
mªt
,

1095 
rv
->
is_å≠≥d
 = 
Ál£
;

1096 
rv
->
¥iv_mode
 = (rv->
c§_m°©us
 & 
MSTATUS_MPP
Ë>> 
MSTATUS_MPP_SHIFT
;

1097 
rv
->
c§_m°©us
 &~(
MSTATUS_MPP
);

1099 c⁄° 
uöt32_t
 
m°©us_mpõ
 =

1100 (
rv
->
c§_m°©us
 & 
MSTATUS_MPIE
Ë>> 
MSTATUS_MPIE_SHIFT
;

1101 
rv
->
c§_m°©us
 |(
m°©us_mpõ
 << 
MSTATUS_MIE_SHIFT
);

1102 
rv
->
c§_m°©us
 |
MSTATUS_MPIE
;

1104 
rv
->
PC
 =Ñv->
c§_mïc
;

1105  
åue
;

1107 
GEN
({

1108 
as£π
;

1114 
RVOP
(

1115 
s„n˚vma
,

1117 
PC
 += 4;

1118 if((
PC
 >> 20) == 0x957){

1122 
íd_›
;

1124 
GEN
({

1125 
as£π
;

1128 #i‡
RV32_HAS
(
Zi„n˚i
)

1129 
RVOP
(

1130 
„n˚i
,

1132 
PC
 += 4;

1133 if((
PC
 >> 20) == 0x957){

1137 
rv
->
c§_cy˛e
 = 
cy˛e
;

1138 
rv
->
PC
 = PC;

1139  
åue
;

1141 
GEN
({

1142 
as£π
;

1145 
RVOP
(

1146 
„n˚
,

1148 
PC
 += 4;

1150 
rv
->
c§_cy˛e
 = 
cy˛e
;

1151 
rv
->
PC
 = PC;

1152  
åue
;

1154 
GEN
({

1155 
as£π
;

1159 #i‡
RV32_HAS
(
Zic§
)

1161 
RVOP
(

1162 
c§rw
,

1164 
uöt32_t
 
tmp
 = 
c§_c§rw
(
rv
, 
ú
->
imm
,Ñv->
X
[ú->
rs1
]);

1165 
rv
->
X
[
ú
->
rd
] = ir->rd ? 
tmp
 :Ñv->X[ir->rd];

1167 
GEN
({

1168 
as£π
;

1180 
RVOP
(

1181 
c§rs
,

1183 
uöt32_t
 
tmp
 = 
c§_c§rs
(

1184 
rv
, 
ú
->
imm
, (ú->
rs1
 =
rv_ªg_zîo
Ë? 0U :Ñv->
X
[ir->rs1]);

1185 
rv
->
X
[
ú
->
rd
] = ir->rd ? 
tmp
 :Ñv->X[ir->rd];

1187 
GEN
({

1188 
as£π
;

1192 
RVOP
(

1193 
c§rc
,

1195 
uöt32_t
 
tmp
 = 
c§_c§rc
(

1196 
rv
, 
ú
->
imm
, (ú->
rs1
 =
rv_ªg_zîo
Ë? 0U :Ñv->
X
[ir->rs1]);

1197 
rv
->
X
[
ú
->
rd
] = ir->rd ? 
tmp
 :Ñv->X[ir->rd];

1199 
GEN
({

1200 
as£π
;

1204 
RVOP
(

1205 
c§rwi
,

1207 
uöt32_t
 
tmp
 = 
c§_c§rw
(
rv
, 
ú
->
imm
, ir->
rs1
);

1208 
rv
->
X
[
ú
->
rd
] = ir->rd ? 
tmp
 :Ñv->X[ir->rd];

1210 
GEN
({

1211 
as£π
;

1215 
RVOP
(

1216 
c§rsi
,

1218 
uöt32_t
 
tmp
 = 
c§_c§rs
(
rv
, 
ú
->
imm
, ir->
rs1
);

1219 
rv
->
X
[
ú
->
rd
] = ir->rd ? 
tmp
 :Ñv->X[ir->rd];

1221 
GEN
({

1222 
as£π
;

1226 
RVOP
(

1227 
c§rci
,

1229 
uöt32_t
 
tmp
 = 
c§_c§rc
(
rv
, 
ú
->
imm
, ir->
rs1
);

1230 
rv
->
X
[
ú
->
rd
] = ir->rd ? 
tmp
 :Ñv->X[ir->rd];

1232 
GEN
({

1233 
as£π
;

1239 #i‡
RV32_HAS
(
EXT_M
)

1241 
RVOP
(

1242 
mul
,

1244 c⁄° 
öt64_t
 
mu…ùliˇnd
 = (
öt32_t
Ë
rv
->
X
[
ú
->
rs1
];

1245 c⁄° 
öt64_t
 
mu…ùlõr
 = (
öt32_t
Ë
rv
->
X
[
ú
->
rs2
];

1246 
rv
->
X
[
ú
->
rd
] =

1247 ((
uöt64_t
Ë(
mu…ùliˇnd
 * 
mu…ùlõr
)) & ((1ULL << 32) - 1);

1249 
GEN
({

1250 
øld2
, 
rs1
, 
rs2
;

1251 
m≠
, 
VR2
, 
rd
;

1252 
mov
, 
VR1
, 
TMP
;

1253 
mov
, 
VR0
, 
VR2
;

1254 
mul
, 0x28, 
TMP
, 
VR2
, 0;

1261 
RVOP
(

1262 
mulh
,

1264 c⁄° 
öt64_t
 
mu…ùliˇnd
 = (
öt32_t
Ë
rv
->
X
[
ú
->
rs1
];

1265 c⁄° 
öt64_t
 
mu…ùlõr
 = (
öt32_t
Ë
rv
->
X
[
ú
->
rs2
];

1266 
rv
->
X
[
ú
->
rd
] = ((
uöt64_t
Ë(
mu…ùliˇnd
 * 
mu…ùlõr
)) >> 32;

1268 
GEN
({

1269 
øld2s
, 
rs1
, 
rs2
, 
åue
,Årue;

1270 
m≠
, 
VR2
, 
rd
;

1271 
mov
, 
VR1
, 
TMP
;

1272 
mov
, 
VR0
, 
VR2
;

1273 
mul
, 0x2f, 
TMP
, 
VR2
, 0;

1274 
Æu64imm
, 8, 0xc1, 5, 
VR2
, 32;

1282 
RVOP
(

1283 
mulhsu
,

1285 c⁄° 
öt64_t
 
mu…ùliˇnd
 = (
öt32_t
Ë
rv
->
X
[
ú
->
rs1
];

1286 c⁄° 
uöt64_t
 
umu…ùlõr
 = 
rv
->
X
[
ú
->
rs2
];

1287 
rv
->
X
[
ú
->
rd
] = ((
uöt64_t
Ë(
mu…ùliˇnd
 * 
umu…ùlõr
)) >> 32;

1289 
GEN
({

1290 
øld2s
, 
rs1
, 
rs2
, 
åue
, 
Ál£
;

1291 
m≠
, 
VR2
, 
rd
;

1292 
mov
, 
VR1
, 
TMP
;

1293 
mov
, 
VR0
, 
VR2
;

1294 
mul
, 0x2f, 
TMP
, 
VR2
, 0;

1295 
Æu64imm
, 8, 0xc1, 5, 
VR2
, 32;

1299 
RVOP
(

1300 
mulhu
,

1302 
rv
->
X
[
ú
->
rd
] =

1303 ((
uöt64_t
Ë
rv
->
X
[
ú
->
rs1
] * (uöt64_tËrv->X[ú->
rs2
]) >> 32;

1305 
GEN
({

1306 
øld2
, 
rs1
, 
rs2
;

1307 
m≠
, 
VR2
, 
rd
;

1308 
mov
, 
VR1
, 
TMP
;

1309 
mov
, 
VR0
, 
VR2
;

1310 
mul
, 0x2f, 
TMP
, 
VR2
, 0;

1311 
Æu64imm
, 8, 0xc1, 5, 
VR2
, 32;

1322 
RVOP
(

1323 
div
,

1325 c⁄° 
öt32_t
 
dividíd
 = (öt32_tË
rv
->
X
[
ú
->
rs1
];

1326 c⁄° 
öt32_t
 
divis‹
 = (öt32_tË
rv
->
X
[
ú
->
rs2
];

1327 
rv
->
X
[
ú
->
rd
] = !
divis‹
 ? ~0U

1328 : (
divis‹
 =-1 && 
rv
->
X
[
ú
->
rs1
] == 0x80000000U)

1329 ? 
rv
->
X
[
ú
->
rs1
]

1330 : (Ë(
dividíd
 / 
divis‹
);

1332 
GEN
({

1333 
øld2s
, 
rs1
, 
rs2
, 
åue
,Årue;

1334 
m≠
, 
VR2
, 
rd
;

1335 
mov
, 
VR1
, 
TMP
;

1336 
mov
, 
VR0
, 
VR2
;

1337 
div
, 0x38, 
TMP
, 
VR2
, 1;

1348 
RVOP
(

1349 
divu
,

1351 c⁄° 
uöt32_t
 
udividíd
 = 
rv
->
X
[
ú
->
rs1
];

1352 c⁄° 
uöt32_t
 
udivis‹
 = 
rv
->
X
[
ú
->
rs2
];

1353 
rv
->
X
[
ú
->
rd
] = !
udivis‹
 ? ~0U : 
udividíd
 / udivisor;

1355 
GEN
({

1356 
øld2
, 
rs1
, 
rs2
;

1357 
m≠
, 
VR2
, 
rd
;

1358 
mov
, 
VR1
, 
TMP
;

1359 
mov
, 
VR0
, 
VR2
;

1360 
div
, 0x38, 
TMP
, 
VR2
, 0;

1372 
RVOP
(
ªm
, {

1373 c⁄° 
öt32_t
 
dividíd
 = 
rv
->
X
[
ú
->
rs1
];

1374 c⁄° 
öt32_t
 
divis‹
 = 
rv
->
X
[
ú
->
rs2
];

1375 
rv
->
X
[
ú
->
rd
] = !
divis‹
 ? 
dividíd


1376 : (
divis‹
 =-1 && 
rv
->
X
[
ú
->
rs1
] == 0x80000000U)

1377 ? 0 : (
dividíd


1378 % 
divis‹
);

1380 
GEN
({

1381 
øld2s
, 
rs1
, 
rs2
, 
åue
,Årue;

1382 
m≠
, 
VR2
, 
rd
;

1383 
mov
, 
VR1
, 
TMP
;

1384 
mov
, 
VR0
, 
VR2
;

1385 
mod
, 0x98, 
TMP
, 
VR2
, 1;

1396 
RVOP
(
ªmu
, {

1397 c⁄° 
uöt32_t
 
udividíd
 = 
rv
->
X
[
ú
->
rs1
];

1398 c⁄° 
uöt32_t
 
udivis‹
 = 
rv
->
X
[
ú
->
rs2
];

1399 
rv
->
X
[
ú
->
rd
] = !
udivis‹
 ? 
udividíd
 : udividend

1400 % 
udivis‹
;

1402 
GEN
({

1403 
øld2
, 
rs1
, 
rs2
;

1404 
m≠
, 
VR2
, 
rd
;

1405 
mov
, 
VR1
, 
TMP
;

1406 
mov
, 
VR0
, 
VR2
;

1407 
mod
, 0x98, 
TMP
, 
VR2
, 0;

1414 #i‡
RV32_HAS
(
EXT_A
)

1437 
RVOP
(

1438 
Ãw
,

1440 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1441 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1442 i‡(
ú
->
rd
)

1443 
rv
->
X
[
ú
->
rd
] =Ñv->
io
.
mem_ªad_w
‘v, 
addr
);

1448 
GEN
({

1449 
as£π
;

1453 
RVOP
(

1454 
scw
,

1459 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1460 
RV_EXC_MISALIGN_HANDLER
(3, 
°‹e
, 
Ál£
, 1);

1461 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
,Ñv->
X
[
ú
->
rs2
]);

1462 
rv
->
X
[
ú
->
rd
] = 0;

1464 
GEN
({

1465 
as£π
;

1469 
RVOP
(

1470 
amosw≠w
,

1472 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1473 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1474 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1475 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1476 i‡(
ú
->
rd
)

1477 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1478 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
vÆue2
);

1480 
GEN
({

1481 
as£π
;

1485 
RVOP
(

1486 
amﬂddw
,

1488 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1489 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1490 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1491 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1492 i‡(
ú
->
rd
)

1493 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1494 c⁄° 
uöt32_t
 
ªs
 = 
vÆue1
 + 
vÆue2
;

1495 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
ªs
);

1497 
GEN
({

1498 
as£π
;

1502 
RVOP
(

1503 
amox‹w
,

1505 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1506 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1507 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1508 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1509 i‡(
ú
->
rd
)

1510 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1511 c⁄° 
uöt32_t
 
ªs
 = 
vÆue1
 ^ 
vÆue2
;

1512 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
ªs
);

1514 
GEN
({

1515 
as£π
;

1519 
RVOP
(

1520 
amﬂndw
,

1522 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1523 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1524 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1525 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1526 i‡(
ú
->
rd
)

1527 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1528 c⁄° 
uöt32_t
 
ªs
 = 
vÆue1
 & 
vÆue2
;

1529 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
ªs
);

1531 
GEN
({

1532 
as£π
;

1536 
RVOP
(

1537 
amo‹w
,

1539 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1540 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1541 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1542 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1543 i‡(
ú
->
rd
)

1544 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1545 c⁄° 
uöt32_t
 
ªs
 = 
vÆue1
 | 
vÆue2
;

1546 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
ªs
);

1548 
GEN
({

1549 
as£π
;

1553 
RVOP
(

1554 
amomöw
,

1556 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1557 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1558 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1559 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1560 i‡(
ú
->
rd
)

1561 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1562 c⁄° 
öt32_t
 
a
 = 
vÆue1
;

1563 c⁄° 
öt32_t
 
b
 = 
vÆue2
;

1564 c⁄° 
uöt32_t
 
ªs
 = 
a
 < 
b
 ? 
vÆue1
 : 
vÆue2
;

1565 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
ªs
);

1567 
GEN
({

1568 
as£π
;

1572 
RVOP
(

1573 
amomaxw
,

1575 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1576 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1577 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1578 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1579 i‡(
ú
->
rd
)

1580 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1581 c⁄° 
öt32_t
 
a
 = 
vÆue1
;

1582 c⁄° 
öt32_t
 
b
 = 
vÆue2
;

1583 c⁄° 
uöt32_t
 
ªs
 = 
a
 > 
b
 ? 
vÆue1
 : 
vÆue2
;

1584 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
ªs
);

1586 
GEN
({

1587 
as£π
;

1591 
RVOP
(

1592 
amomöuw
,

1594 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1595 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1596 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1597 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1598 i‡(
ú
->
rd
)

1599 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1600 c⁄° 
uöt32_t
 
uªs
 = 
vÆue1
 < 
vÆue2
 ? value1 : value2;

1601 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
uªs
);

1603 
GEN
({

1604 
as£π
;

1608 
RVOP
(

1609 
amomaxuw
,

1611 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
];

1612 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1613 c⁄° 
uöt32_t
 
vÆue1
 = 
rv
->
io
.
mem_ªad_w
‘v, 
addr
);

1614 c⁄° 
uöt32_t
 
vÆue2
 = 
rv
->
X
[
ú
->
rs2
];

1615 i‡(
ú
->
rd
)

1616 
rv
->
X
[
ú
->
rd
] = 
vÆue1
;

1617 c⁄° 
uöt32_t
 
uªs
 = 
vÆue1
 > 
vÆue2
 ? value1 : value2;

1618 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
, 
uªs
);

1620 
GEN
({

1621 
as£π
;

1627 #i‡
RV32_HAS
(
EXT_F
)

1629 
RVOP
(

1630 
Êw
,

1633 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

1634 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

1635 
rv
->
F
[
ú
->
rd
].
v
 =Ñv->
io
.
mem_ªad_w
‘v, 
addr
);

1637 
GEN
({

1638 
as£π
;

1642 
RVOP
(

1643 
fsw
,

1646 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + ir->
imm
;

1647 
RV_EXC_MISALIGN_HANDLER
(3, 
°‹e
, 
Ál£
, 1);

1648 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
,Ñv->
F
[
ú
->
rs2
].
v
);

1650 
GEN
({

1651 
as£π
;

1655 
RVOP
(

1656 
fmadds
,

1658 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1659 
rv
->
F
[
ú
->
rd
] =

1660 
f32_mulAdd
(
rv
->
F
[
ú
->
rs1
],Ñv->F[ú->
rs2
],Ñv->F[ú->
rs3
]);

1661 
£t_fÊag
(
rv
);

1663 
GEN
({

1664 
as£π
;

1668 
RVOP
(

1669 
fmsubs
,

1671 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1672 
riscv_Êﬂt_t
 
tmp
 = 
rv
->
F
[
ú
->
rs3
];

1673 
tmp
.
v
 ^
FMASK_SIGN
;

1674 
rv
->
F
[
ú
->
rd
] = 
f32_mulAdd
‘v->F[ú->
rs1
],Ñv->F[ú->
rs2
], 
tmp
);

1675 
£t_fÊag
(
rv
);

1677 
GEN
({

1678 
as£π
;

1682 
RVOP
(

1683 
‚msubs
,

1685 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1686 
riscv_Êﬂt_t
 
tmp
 = 
rv
->
F
[
ú
->
rs1
];

1687 
tmp
.
v
 ^
FMASK_SIGN
;

1688 
rv
->
F
[
ú
->
rd
] = 
f32_mulAdd
(
tmp
,Ñv->F[ú->
rs2
],Ñv->F[ú->
rs3
]);

1689 
£t_fÊag
(
rv
);

1691 
GEN
({

1692 
as£π
;

1696 
RVOP
(

1697 
‚madds
,

1699 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1700 
riscv_Êﬂt_t
 
tmp1
 = 
rv
->
F
[
ú
->
rs1
];

1701 
riscv_Êﬂt_t
 
tmp2
 = 
rv
->
F
[
ú
->
rs3
];

1702 
tmp1
.
v
 ^
FMASK_SIGN
;

1703 
tmp2
.
v
 ^
FMASK_SIGN
;

1704 
rv
->
F
[
ú
->
rd
] = 
f32_mulAdd
(
tmp1
,Ñv->F[ú->
rs2
], 
tmp2
);

1705 
£t_fÊag
(
rv
);

1707 
GEN
({

1708 
as£π
;

1712 
RVOP
(

1713 
Ádds
,

1715 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1716 
rv
->
F
[
ú
->
rd
] = 
f32_add
‘v->F[ú->
rs1
],Ñv->F[ú->
rs2
]);

1717 
£t_fÊag
(
rv
);

1719 
GEN
({

1720 
as£π
;

1724 
RVOP
(

1725 
fsubs
,

1727 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1728 
rv
->
F
[
ú
->
rd
] = 
f32_sub
‘v->F[ú->
rs1
],Ñv->F[ú->
rs2
]);

1729 
£t_fÊag
(
rv
);

1731 
GEN
({

1732 
as£π
;

1736 
RVOP
(

1737 
fmuls
,

1739 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1740 
rv
->
F
[
ú
->
rd
] = 
f32_mul
‘v->F[ú->
rs1
],Ñv->F[ú->
rs2
]);

1741 
£t_fÊag
(
rv
);

1743 
GEN
({

1744 
as£π
;

1748 
RVOP
(

1749 
fdivs
,

1751 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1752 
rv
->
F
[
ú
->
rd
] = 
f32_div
‘v->F[ú->
rs1
],Ñv->F[ú->
rs2
]);

1753 
£t_fÊag
(
rv
);

1755 
GEN
({

1756 
as£π
;

1760 
RVOP
(

1761 
fsqπs
,

1763 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1764 
rv
->
F
[
ú
->
rd
] = 
f32_sqπ
‘v->F[ú->
rs1
]);

1765 
£t_fÊag
(
rv
);

1767 
GEN
({

1768 
as£π
;

1772 
RVOP
(

1773 
fsgnjs
,

1775 
rv
->
F
[
ú
->
rd
].
v
 =

1776 (
rv
->
F
[
ú
->
rs1
].
v
 & ~
FMASK_SIGN
Ë| (rv->F[ú->
rs2
].v & FMASK_SIGN);

1778 
GEN
({

1779 
as£π
;

1783 
RVOP
(

1784 
fsgnjns
,

1786 
rv
->
F
[
ú
->
rd
].
v
 =

1787 (
rv
->
F
[
ú
->
rs1
].
v
 & ~
FMASK_SIGN
Ë| (~rv->F[ú->
rs2
].v & FMASK_SIGN);

1789 
GEN
({

1790 
as£π
;

1794 
RVOP
(

1795 
fsgnjxs
,

1796 { 
rv
->
F
[
ú
->
rd
].
v
 =Ñv->F[ú->
rs1
].v ^ (rv->F[ú->
rs2
].v & 
FMASK_SIGN
); },

1797 
GEN
({

1798 
as£π
;

1808 
RVOP
(

1809 
fmös
,

1811 i‡(
f32_isSig«lögNaN
(
rv
->
F
[
ú
->
rs1
]) ||

1812 
f32_isSig«lögNaN
(
rv
->
F
[
ú
->
rs2
]))

1813 
rv
->
c§_fc§
 |
FFLAG_INVALID_OP
;

1814 
boﬁ
 
Àss
 = 
f32_…_quõt
(
rv
->
F
[
ú
->
rs1
],Ñv->F[ú->
rs2
]) ||

1815 (
f32_eq
(
rv
->
F
[
ú
->
rs1
],Ñv->F[ú->
rs2
]) &&

1816 (
rv
->
F
[
ú
->
rs1
].
v
 & 
FMASK_SIGN
));

1817 i‡(
is_«n
(
rv
->
F
[
ú
->
rs1
].
v
Ë&& is_«n‘v->F[ú->
rs2
].v))

1818 
rv
->
F
[
ú
->
rd
].
v
 = 
RV_NAN
;

1820 
rv
->
F
[
ú
->
rd
] = (
Àss
 || 
is_«n
‘v->F[ú->
rs2
].
v
Ë?Ñv->F[ú->
rs1
]

1821 : 
rv
->
F
[
ú
->
rs2
]);

1823 
GEN
({

1824 
as£π
;

1828 
RVOP
(

1829 
fmaxs
,

1831 i‡(
f32_isSig«lögNaN
(
rv
->
F
[
ú
->
rs1
]) ||

1832 
f32_isSig«lögNaN
(
rv
->
F
[
ú
->
rs2
]))

1833 
rv
->
c§_fc§
 |
FFLAG_INVALID_OP
;

1834 
boﬁ
 
gª©î
 = 
f32_…_quõt
(
rv
->
F
[
ú
->
rs2
],Ñv->F[ú->
rs1
]) ||

1835 (
f32_eq
(
rv
->
F
[
ú
->
rs1
],Ñv->F[ú->
rs2
]) &&

1836 (
rv
->
F
[
ú
->
rs2
].
v
 & 
FMASK_SIGN
));

1837 i‡(
is_«n
(
rv
->
F
[
ú
->
rs1
].
v
Ë&& is_«n‘v->F[ú->
rs2
].v))

1838 
rv
->
F
[
ú
->
rd
].
v
 = 
RV_NAN
;

1840 
rv
->
F
[
ú
->
rd
] =

1841 (
gª©î
 || 
is_«n
(
rv
->
F
[
ú
->
rs2
].
v
Ë?Ñv->F[ú->
rs1
]

1842 : 
rv
->
F
[
ú
->
rs2
]);

1844 
GEN
({

1845 
as£π
;

1853 
RVOP
(

1854 
fcvtws
,

1856 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1857 
uöt32_t
 
ªt
 = 
f32_to_i32
(
rv
->
F
[
ú
->
rs1
], 
so·Êﬂt_roundögMode
, 
åue
);

1858 i‡(
ú
->
rd
)

1859 
rv
->
X
[
ú
->
rd
] = 
ªt
;

1860 
£t_fÊag
(
rv
);

1862 
GEN
({

1863 
as£π
;

1867 
RVOP
(

1868 
fcvtwus
,

1870 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1871 
uöt32_t
 
ªt
 =

1872 
f32_to_ui32
(
rv
->
F
[
ú
->
rs1
], 
so·Êﬂt_roundögMode
, 
åue
);

1873 i‡(
ú
->
rd
)

1874 
rv
->
X
[
ú
->
rd
] = 
ªt
;

1875 
£t_fÊag
(
rv
);

1877 
GEN
({

1878 
as£π
;

1882 
RVOP
(

1883 
fmvxw
,

1885 i‡(
ú
->
rd
)

1886 
rv
->
X
[
ú
->
rd
] =Ñv->
F
[ú->
rs1
].
v
;

1888 
GEN
({

1889 
as£π
;

1895 
RVOP
(

1896 
„qs
,

1898 
uöt32_t
 
ªt
 = 
f32_eq
(
rv
->
F
[
ú
->
rs1
],Ñv->F[ú->
rs2
]);

1899 i‡(
ú
->
rd
)

1900 
rv
->
X
[
ú
->
rd
] = 
ªt
;

1901 
£t_fÊag
(
rv
);

1903 
GEN
({

1904 
as£π
;

1911 
RVOP
(

1912 
Êts
,

1914 
uöt32_t
 
ªt
 = 
f32_…
(
rv
->
F
[
ú
->
rs1
],Ñv->F[ú->
rs2
]);

1915 i‡(
ú
->
rd
)

1916 
rv
->
X
[
ú
->
rd
] = 
ªt
;

1917 
£t_fÊag
(
rv
);

1919 
GEN
({

1920 
as£π
;

1923 
RVOP
(

1924 
Êes
,

1926 
uöt32_t
 
ªt
 = 
f32_À
(
rv
->
F
[
ú
->
rs1
],Ñv->F[ú->
rs2
]);

1927 i‡(
ú
->
rd
)

1928 
rv
->
X
[
ú
->
rd
] = 
ªt
;

1929 
£t_fÊag
(
rv
);

1931 
GEN
({

1932 
as£π
;

1936 
RVOP
(

1937 
f˛asss
,

1939 i‡(
ú
->
rd
)

1940 
rv
->
X
[
ú
->
rd
] = 
ˇlc_f˛ass
‘v->
F
[ú->
rs1
].
v
);

1942 
GEN
({

1943 
as£π
;

1947 
RVOP
(

1948 
fcvtsw
,

1950 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1951 
rv
->
F
[
ú
->
rd
] = 
i32_to_f32
‘v->
X
[ú->
rs1
]);

1952 
£t_fÊag
(
rv
);

1954 
GEN
({

1955 
as£π
;

1959 
RVOP
(

1960 
fcvtswu
,

1962 
£t_roundög_mode
(
rv
, 
ú
->
rm
);

1963 
rv
->
F
[
ú
->
rd
] = 
ui32_to_f32
‘v->
X
[ú->
rs1
]);

1964 
£t_fÊag
(
rv
);

1966 
GEN
({

1967 
as£π
;

1971 
RVOP
(

1972 
fmvwx
,

1973 { 
rv
->
F
[
ú
->
rd
].
v
 =Ñv->
X
[ú->
rs1
]; },

1974 
GEN
({

1975 
as£π
;

1981 #i‡
RV32_HAS
(
EXT_C
)

1988 
RVOP
(

1989 
ˇddi4•n
,

1990 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[
rv_ªg_•
] + (
uöt16_t
Ëú->
imm
; },

1991 
GEN
({

1992 
øld
, 
VR0
, 
rv_ªg_•
;

1993 
m≠
, 
VR1
, 
rd
;

1994 
c⁄d
, 
ªg√q
;

1995 
mov
, 
VR0
, 
VR1
;

1996 
íd
;

1997 
Æu32imm
, 32, 0x81, 0, 
VR1
, 
uöt
, 16, 
imm
;

2004 
RVOP
(

2005 
˛w
,

2007 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + (uöt32_tËú->
imm
;

2008 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
åue
, 1);

2009 
rv
->
X
[
ú
->
rd
] =Ñv->
io
.
mem_ªad_w
‘v, 
addr
);

2011 
GEN
({

2012 
mem
;

2013 
øld
, 
VR0
, 
rs1
;

2014 
ldimm
, 
TMP
, 
mem
;

2015 
Æu64
, 0x01, 
VR0
, 
TMP
;

2016 
m≠
, 
VR1
, 
rd
;

2017 
ld
, 
S32
, 
TMP
, 
VR1
, 0;

2025 
RVOP
(

2026 
csw
,

2028 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + (uöt32_tËú->
imm
;

2029 
RV_EXC_MISALIGN_HANDLER
(3, 
°‹e
, 
åue
, 1);

2030 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
,Ñv->
X
[
ú
->
rs2
]);

2032 
GEN
({

2033 
mem
;

2034 
øld
, 
VR0
, 
rs1
;

2035 
ldimm
, 
TMP
, 
mem
;

2036 
Æu64
, 0x01, 
VR0
, 
TMP
;

2037 
øld
, 
VR1
, 
rs2
;

2038 
°
, 
S32
, 
VR1
, 
TMP
, 0;

2042 
RVOP
(
˙›
, { }, 
GEN
({ }))

2050 
RVOP
(

2051 
ˇddi
,

2052 { 
rv
->
X
[
ú
->
rd
] +(
öt16_t
Ëú->
imm
; },

2053 
GEN
({

2054 
øld
, 
VR0
, 
rd
;

2055 
Æu32imm
, 32, 0x81, 0, 
VR0
, , 16, 
imm
;

2059 
RVOP
(

2060 
cjÆ
,

2062 
rv
->
X
[
rv_ªg_ø
] = 
PC
 + 2;

2063 
PC
 +
ú
->
imm
;

2064 
rv_ö¢
 *
èkí
 = 
ú
->
bønch_èkí
;

2065 i‡(
èkí
) {

2066 #i‡
RV32_HAS
(
JIT
)

2067 
ˇche_gë
(
rv
->
block_ˇche
, 
PC
, 
åue
);

2068 i‡(!
£t_add
(&
pc_£t
, 
PC
))

2069 
has_lo›s
 = 
åue
;

2070 i‡(
ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
))

2071 
íd_›
;

2073 
œ°_pc
 = 
PC
;

2074 if(!
rv
->
is_å≠≥d
){

2075 
MUST_TAIL
  
èkí
->
im∂
(
rv
,Åakí, 
cy˛e
, 
PC
);

2078 
íd_›
;

2080 
GEN
({

2081 
m≠
, 
VR0
, 
rv_ªg_ø
;

2082 
ldimm
, 
VR0
, 
pc
, 2;

2084 
jmp
, 
pc
, 
imm
;

2085 
ldimm
, 
TMP
, 
pc
, 
imm
;

2086 
°
, 
S32
, 
TMP
, 
PC
;

2087 
exô
;

2094 
RVOP
(

2095 
˛i
,

2096 { 
rv
->
X
[
ú
->
rd
] = ir->
imm
; },

2097 
GEN
({

2098 
m≠
, 
VR0
, 
rd
;

2099 
ldimm
, 
VR0
, 
imm
;

2107 
RVOP
(

2108 
ˇddi16•
,

2109 { 
rv
->
X
[
ú
->
rd
] +ú->
imm
; },

2110 
GEN
({

2111 
øld
, 
VR0
, 
rd
;

2112 
Æu32imm
, 32, 0x81, 0, 
VR0
, 
imm
;

2122 
RVOP
(

2123 
˛ui
,

2124 { 
rv
->
X
[
ú
->
rd
] = ir->
imm
; },

2125 
GEN
({

2126 
m≠
, 
VR0
, 
rd
;

2127 
ldimm
, 
VR0
, 
imm
;

2135 
RVOP
(

2136 
c§li
,

2137 { 
rv
->
X
[
ú
->
rs1
] >>ú->
shamt
; },

2138 
GEN
({

2139 
øld
, 
VR0
, 
rs1
;

2140 
Æu32imm
, 8, 0xc1, 5, 
VR0
, 
shamt
;

2146 
RVOP
(

2147 
c§ai
,

2149 c⁄° 
uöt32_t
 
mask
 = 0x80000000 & 
rv
->
X
[
ú
->
rs1
];

2150 
rv
->
X
[
ú
->
rs1
] >>ú->
shamt
;

2151 
i
 = 0; i < 
ú
->
shamt
; ++i)

2152 
rv
->
X
[
ú
->
rs1
] |
mask
 >> 
i
;

2154 
GEN
({

2155 
øld
, 
VR0
, 
rs1
;

2156 
Æu32imm
, 8, 0xc1, 7, 
VR0
, 
shamt
;

2164 
RVOP
(

2165 
ˇndi
,

2166 { 
rv
->
X
[
ú
->
rs1
] &ú->
imm
; },

2167 
GEN
({

2168 
øld
, 
VR0
, 
rs1
;

2169 
Æu32imm
, 32, 0x81, 4, 
VR0
, 
imm
;

2173 
RVOP
(

2174 
csub
,

2175 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] -Ñv->X[ú->
rs2
]; },

2176 
GEN
({

2177 
øld2
, 
rs1
, 
rs2
;

2178 
m≠
, 
VR2
, 
rd
;

2179 
mov
, 
VR1
, 
TMP
;

2180 
mov
, 
VR0
, 
VR2
;

2181 
Æu32
, 0x29, 
TMP
, 
VR2
;

2185 
RVOP
(

2186 
cx‹
,

2187 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] ^Ñv->X[ú->
rs2
]; },

2188 
GEN
({

2189 
øld2
, 
rs1
, 
rs2
;

2190 
m≠
, 
VR2
, 
rd
;

2191 
mov
, 
VR1
, 
TMP
;

2192 
mov
, 
VR0
, 
VR2
;

2193 
Æu32
, 0x31, 
TMP
, 
VR2
;

2196 
RVOP
(

2197 
c‹
,

2198 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] |Ñv->X[ú->
rs2
]; },

2199 
GEN
({

2200 
øld2
, 
rs1
, 
rs2
;

2201 
m≠
, 
VR2
, 
rd
;

2202 
mov
, 
VR1
, 
TMP
;

2203 
mov
, 
VR0
, 
VR2
;

2204 
Æu32
, 0x09, 
TMP
, 
VR2
;

2207 
RVOP
(

2208 
ˇnd
,

2209 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] &Ñv->X[ú->
rs2
]; },

2210 
GEN
({

2211 
øld2
, 
rs1
, 
rs2
;

2212 
m≠
, 
VR2
, 
rd
;

2213 
mov
, 
VR1
, 
TMP
;

2214 
mov
, 
VR0
, 
VR2
;

2215 
Æu32
, 0x21, 
TMP
, 
VR2
;

2223 
RVOP
(

2224 
cj
,

2226 
PC
 +
ú
->
imm
;

2227 
rv_ö¢
 *
èkí
 = 
ú
->
bønch_èkí
;

2228 i‡(
èkí
) {

2229 #i‡
RV32_HAS
(
JIT
)

2230 
ˇche_gë
(
rv
->
block_ˇche
, 
PC
, 
åue
);

2231 i‡(!
£t_add
(&
pc_£t
, 
PC
))

2232 
has_lo›s
 = 
åue
;

2233 i‡(
ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
))

2234 
íd_›
;

2236 
œ°_pc
 = 
PC
;

2237 if(!
rv
->
is_å≠≥d
){

2238 
MUST_TAIL
  
èkí
->
im∂
(
rv
,Åakí, 
cy˛e
, 
PC
);

2241 
íd_›
;

2243 
GEN
({

2245 
jmp
, 
pc
, 
imm
;

2246 
ldimm
, 
TMP
, 
pc
, 
imm
;

2247 
°
, 
S32
, 
TMP
, 
PC
;

2248 
exô
;

2256 
RVOP
(

2257 
cbeqz
,

2259 i‡(
rv
->
X
[
ú
->
rs1
]) {

2260 
is_bønch_èkí
 = 
Ál£
;

2261 
rv_ö¢
 *
u¡akí
 = 
ú
->
bønch_u¡akí
;

2262 i‡(!
u¡akí
)

2263 
√xt›
;

2264 #i‡
RV32_HAS
(
JIT
)

2265 
ˇche_gë
(
rv
->
block_ˇche
, 
PC
 + 2, 
åue
);

2266 i‡(!
£t_add
(&
pc_£t
, 
PC
 + 2))

2267 
has_lo›s
 = 
åue
;

2268 i‡(
ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
 + 2))

2269 
√xt›
;

2271 
PC
 += 2;

2272 
œ°_pc
 = 
PC
;

2273 if(!
rv
->
is_å≠≥d
){

2274 
MUST_TAIL
  
u¡akí
->
im∂
(
rv
, u¡akí, 
cy˛e
, 
PC
);

2277 
íd_›
;

2279 
is_bønch_èkí
 = 
åue
;

2280 
PC
 +
ú
->
imm
;

2281 
rv_ö¢
 *
èkí
 = 
ú
->
bønch_èkí
;

2282 i‡(
èkí
) {

2283 #i‡
RV32_HAS
(
JIT
)

2284 
ˇche_gë
(
rv
->
block_ˇche
, 
PC
, 
åue
);

2285 i‡(!
£t_add
(&
pc_£t
, 
PC
))

2286 
has_lo›s
 = 
åue
;

2287 i‡(
ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
))

2288 
íd_›
;

2290 
œ°_pc
 = 
PC
;

2291 if(!
rv
->
is_å≠≥d
){

2292 
MUST_TAIL
  
èkí
->
im∂
(
rv
,Åakí, 
cy˛e
, 
PC
);

2295 
íd_›
;

2297 
GEN
({

2298 
øld
, 
VR0
, 
rs1
;

2299 
cmpimm
, 
VR0
, 0;

2301 
£tjmpoff
;

2302 
jcc
, 0x84;

2303 
c⁄d
, 
bønch_u¡akí
;

2304 
jmp
, 
pc
, 2;

2305 
íd
;

2306 
ldimm
, 
TMP
, 
pc
, 2;

2307 
°
, 
S32
, 
TMP
, 
PC
;

2308 
exô
;

2309 
jmpoff
;

2310 
c⁄d
, 
bønch_èkí
;

2311 
jmp
, 
pc
, 
imm
;

2312 
íd
;

2313 
ldimm
, 
TMP
, 
pc
, 
imm
;

2314 
°
, 
S32
, 
TMP
, 
PC
;

2315 
exô
;

2319 
RVOP
(

2320 
cb√z
,

2322 i‡(!
rv
->
X
[
ú
->
rs1
]) {

2323 
is_bønch_èkí
 = 
Ál£
;

2324 
rv_ö¢
 *
u¡akí
 = 
ú
->
bønch_u¡akí
;

2325 i‡(!
u¡akí
)

2326 
√xt›
;

2327 #i‡
RV32_HAS
(
JIT
)

2328 
ˇche_gë
(
rv
->
block_ˇche
, 
PC
 + 2, 
åue
);

2329 i‡(!
£t_add
(&
pc_£t
, 
PC
 + 2))

2330 
has_lo›s
 = 
åue
;

2331 i‡(
ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
 + 2))

2332 
√xt›
;

2334 
PC
 += 2;

2335 
œ°_pc
 = 
PC
;

2336 if(!
rv
->
is_å≠≥d
){

2337 
MUST_TAIL
  
u¡akí
->
im∂
(
rv
, u¡akí, 
cy˛e
, 
PC
);

2340 
íd_›
;

2342 
is_bønch_èkí
 = 
åue
;

2343 
PC
 +
ú
->
imm
;

2344 
rv_ö¢
 *
èkí
 = 
ú
->
bønch_èkí
;

2345 i‡(
èkí
) {

2346 #i‡
RV32_HAS
(
JIT
)

2347 
ˇche_gë
(
rv
->
block_ˇche
, 
PC
, 
åue
);

2348 i‡(!
£t_add
(&
pc_£t
, 
PC
))

2349 
has_lo›s
 = 
åue
;

2350 i‡(
ˇche_hŸ
(
rv
->
block_ˇche
, 
PC
))

2351 
íd_›
;

2353 
œ°_pc
 = 
PC
;

2354 if(!
rv
->
is_å≠≥d
){

2355 
MUST_TAIL
  
èkí
->
im∂
(
rv
,Åakí, 
cy˛e
, 
PC
);

2358 
íd_›
;

2360 
GEN
({

2361 
øld
, 
VR0
, 
rs1
;

2362 
cmpimm
, 
VR0
, 0;

2364 
£tjmpoff
;

2365 
jcc
, 0x85;

2366 
c⁄d
, 
bønch_u¡akí
;

2367 
jmp
, 
pc
, 2;

2368 
íd
;

2369 
ldimm
, 
TMP
, 
pc
, 2;

2370 
°
, 
S32
, 
TMP
, 
PC
;

2371 
exô
;

2372 
jmpoff
;

2373 
c⁄d
, 
bønch_èkí
;

2374 
jmp
, 
pc
, 
imm
;

2375 
íd
;

2376 
ldimm
, 
TMP
, 
pc
, 
imm
;

2377 
°
, 
S32
, 
TMP
, 
PC
;

2378 
exô
;

2385 
RVOP
(

2386 
c¶li
,

2387 { 
rv
->
X
[
ú
->
rd
] <<(
uöt8_t
Ëú->
imm
; },

2388 
GEN
({

2389 
øld
, 
VR0
, 
rd
;

2390 
Æu32imm
, 8, 0xc1, 4, 
VR0
, 
uöt
, 8, 
imm
;

2394 
RVOP
(

2395 
˛w•
,

2397 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
rv_ªg_•
] + 
ú
->
imm
;

2398 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
åue
, 1);

2399 
rv
->
X
[
ú
->
rd
] =Ñv->
io
.
mem_ªad_w
‘v, 
addr
);

2401 
GEN
({

2402 
mem
;

2403 
øld
, 
VR0
, 
rv_ªg_•
;

2404 
ldimm
, 
TMP
, 
mem
;

2405 
Æu64
, 0x01, 
VR0
, 
TMP
;

2406 
m≠
, 
VR1
, 
rd
;

2407 
ld
, 
S32
, 
TMP
, 
VR1
, 0;

2411 
RVOP
(

2412 
cjr
,

2414 
PC
 = 
rv
->
X
[
ú
->
rs1
];

2415 
LOOKUP_OR_UPDATE_BRANCH_HISTORY_TABLE
();

2416 
íd_›
;

2418 
GEN
({

2419 
øld
, 
VR0
, 
rs1
;

2420 
mov
, 
VR0
, 
TMP
;

2422 
¥edi˘
;

2423 
°
, 
S32
, 
TMP
, 
PC
;

2424 
exô
;

2428 
RVOP
(

2429 
cmv
,

2430 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs2
]; },

2431 
GEN
({

2432 
øld
, 
VR0
, 
rs2
;

2433 
m≠
, 
VR1
, 
rd
;

2434 
c⁄d
, 
ªg√q
;

2435 
mov
, 
VR0
, 
VR1
;

2437 
pﬁluã
, 
VR1
;

2438 
íd
;

2442 
RVOP
(

2443 
˚bªak
,

2445 
rv
->
com¥es£d
 = 
åue
;

2446 
rv
->
c§_cy˛e
 = 
cy˛e
;

2447 
rv
->
PC
 = PC;

2448 
rv
->
io
.
⁄_ebªak
(rv);

2449  
åue
;

2451 
GEN
({

2453 
ldimm
, 
TMP
, 
pc
;

2454 
°
, 
S32
, 
TMP
, 
PC
;

2455 
ˇŒ
, 
ebªak
;

2456 
exô
;

2460 
RVOP
(

2461 
cjÆr
,

2464 c⁄° 
öt32_t
 
jump_to
 = 
rv
->
X
[
ú
->
rs1
];

2465 
rv
->
X
[
rv_ªg_ø
] = 
PC
 + 2;

2466 
PC
 = 
jump_to
;

2467 
LOOKUP_OR_UPDATE_BRANCH_HISTORY_TABLE
();

2468 
íd_›
;

2470 
GEN
({

2471 
m≠
, 
VR0
, 
rv_ªg_ø
;

2472 
ldimm
, 
VR0
, 
pc
, 2;

2473 
øld
, 
VR1
, 
rs1
;

2474 
mov
, 
VR1
, 
TMP
;

2476 
¥edi˘
;

2477 
°
, 
S32
, 
TMP
, 
PC
;

2478 
exô
;

2488 
RVOP
(

2489 
ˇdd
,

2490 { 
rv
->
X
[
ú
->
rd
] =Ñv->X[ú->
rs1
] +Ñv->X[ú->
rs2
]; },

2491 
GEN
({

2492 
øld2
, 
rs1
, 
rs2
;

2493 
m≠
, 
VR2
, 
rd
;

2494 
mov
, 
VR1
, 
TMP
;

2495 
mov
, 
VR0
, 
VR2
;

2496 
Æu32
, 0x01, 
TMP
, 
VR2
;

2500 
RVOP
(

2501 
csw•
,

2503 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
rv_ªg_•
] + 
ú
->
imm
;

2504 
RV_EXC_MISALIGN_HANDLER
(3, 
°‹e
, 
åue
, 1);

2505 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
,Ñv->
X
[
ú
->
rs2
]);

2507 
GEN
({

2508 
mem
;

2509 
øld
, 
VR0
, 
rv_ªg_•
;

2510 
ldimm
, 
TMP
, 
mem
;

2511 
Æu64
, 0x01, 
VR0
, 
TMP
;

2512 
øld
, 
VR1
, 
rs2
;

2513 
°
, 
S32
, 
VR1
, 
TMP
, 0;

2517 #i‡
RV32_HAS
(
EXT_C
Ë&& RV32_HAS(
EXT_F
)

2519 
RVOP
(

2520 
cÊw•
,

2522 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
rv_ªg_•
] + 
ú
->
imm
;

2523 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

2524 
rv
->
F
[
ú
->
rd
].
v
 =Ñv->
io
.
mem_ªad_w
‘v, 
addr
);

2526 
GEN
({

2527 
as£π
;

2531 
RVOP
(

2532 
cfsw•
,

2534 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
rv_ªg_•
] + 
ú
->
imm
;

2535 
RV_EXC_MISALIGN_HANDLER
(3, 
°‹e
, 
Ál£
, 1);

2536 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
,Ñv->
F
[
ú
->
rs2
].
v
);

2538 
GEN
({

2539 
as£π
;

2543 
RVOP
(

2544 
cÊw
,

2546 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + (uöt32_tËú->
imm
;

2547 
RV_EXC_MISALIGN_HANDLER
(3, 
lﬂd
, 
Ál£
, 1);

2548 
rv
->
F
[
ú
->
rd
].
v
 =Ñv->
io
.
mem_ªad_w
‘v, 
addr
);

2550 
GEN
({

2551 
as£π
;

2555 
RVOP
(

2556 
cfsw
,

2558 c⁄° 
uöt32_t
 
addr
 = 
rv
->
X
[
ú
->
rs1
] + (uöt32_tËú->
imm
;

2559 
RV_EXC_MISALIGN_HANDLER
(3, 
°‹e
, 
Ál£
, 1);

2560 
rv
->
io
.
mem_wrôe_w
‘v, 
addr
,Ñv->
F
[
ú
->
rs2
].
v
);

2562 
GEN
({

2563 
as£π
;

	@src/softfloat.h

6 #¥agm®
⁄˚


8 
	~<°döt.h
>

10 
	~"riscv.h
"

11 
	~"riscv_¥iv©e.h
"

16 
	mFMASK_SIGN
 = 0b10000000000000000000000000000000,

17 
	mFMASK_EXPN
 = 0b01111111100000000000000000000000,

18 
	mFMASK_FRAC
 = 0b00000000011111111111111111111111,

19 
	mFMASK_QNAN
 = 0b00000000010000000000000000000000,

21 
	mFFLAG_MASK
 = 0b00000000000000000000000000011111,

22 
	mFFLAG_INVALID_OP
 = 0b00000000000000000000000000010000,

23 
	mFFLAG_DIV_BY_ZERO
 = 0b00000000000000000000000000001000,

24 
	mFFLAG_OVERFLOW
 = 0b00000000000000000000000000000100,

25 
	mFFLAG_UNDERFLOW
 = 0b00000000000000000000000000000010,

26 
	mFFLAG_INEXACT
 = 0b00000000000000000000000000000001,

28 
	mRV_NAN
 = 0b01111111110000000000000000000000

33 
ölöe
 
uöt32_t
 
	$ˇlc_f˛ass
(
uöt32_t
 
f
)

35 c⁄° 
uöt32_t
 
sign
 = 
f
 & 
FMASK_SIGN
;

36 c⁄° 
uöt32_t
 
ex≤
 = 
f
 & 
FMASK_EXPN
;

37 c⁄° 
uöt32_t
 
‰ac
 = 
f
 & 
FMASK_FRAC
;

39 
uöt32_t
 
out
 = 0;

55 i‡(
ex≤
) {

56 i‡(
ex≤
 !
FMASK_EXPN
) {

58 
out
 = 
sign
 ? 0x002 : 0x040;

61 i‡(
‰ac
) {

62 
out
 = 
‰ac
 & 
FMASK_QNAN
 ? 0x200 : 0x100;

63 } i‡(!
sign
) {

65 
out
 = 0x080;

68 
out
 = 0x001;

71 } i‡(
‰ac
) {

73 
out
 = 
sign
 ? 0x004 : 0x020;

76 
out
 = 
sign
 ? 0x008 : 0x010;

79  
out
;

80 
	}
}

82 
ölöe
 
boﬁ
 
	$is_«n
(
uöt32_t
 
f
)

84 c⁄° 
uöt32_t
 
ex≤
 = 
f
 & 
FMASK_EXPN
;

85 c⁄° 
uöt32_t
 
‰ac
 = 
f
 & 
FMASK_FRAC
;

86  (
ex≤
 =
FMASK_EXPN
 && 
‰ac
);

87 
	}
}

89 
ölöe
 
	$£t_fÊag
(
riscv_t
 *
rv
)

91 i‡(
so·Êﬂt_ex˚±i⁄Fœgs
 & 
so·Êﬂt_Êag_övÆid
)

92 
rv
->
c§_fc§
 |
FFLAG_INVALID_OP
;

93 i‡(
so·Êﬂt_ex˚±i⁄Fœgs
 & 
so·Êﬂt_Êag_öföôe
)

94 
rv
->
c§_fc§
 |
FFLAG_DIV_BY_ZERO
;

95 i‡(
so·Êﬂt_ex˚±i⁄Fœgs
 & 
so·Êﬂt_Êag_ovîÊow
)

96 
rv
->
c§_fc§
 |
FFLAG_OVERFLOW
;

97 i‡(
so·Êﬂt_ex˚±i⁄Fœgs
 & 
so·Êﬂt_Êag_undîÊow
)

98 
rv
->
c§_fc§
 |
FFLAG_UNDERFLOW
;

99 i‡(
so·Êﬂt_ex˚±i⁄Fœgs
 & 
so·Êﬂt_Êag_öexa˘
)

100 
rv
->
c§_fc§
 |
FFLAG_INEXACT
;

101 
so·Êﬂt_ex˚±i⁄Fœgs
 = 0;

102 
	}
}

104 
ölöe
 
	$£t_roundög_mode
(
riscv_t
 *
rv
, 
uöt8_t
 
rm
)

106 c⁄° 
uöt32_t
 
‰m
 = (
rv
->
c§_fc§
 >> 5) & (~(1 << 3));

108 i‡(
	`likñy
(
rm
 == 0b111))

109 
rm
 = 
‰m
;

111 
rm
) {

113 
so·Êﬂt_roundögMode
 = 
so·Êﬂt_round_√¨_eví
;

116 
so·Êﬂt_roundögMode
 = 
so·Êﬂt_round_möMag
;

119 
so·Êﬂt_roundögMode
 = 
so·Êﬂt_round_mö
;

122 
so·Êﬂt_roundögMode
 = 
so·Êﬂt_round_max
;

125 
so·Êﬂt_roundögMode
 = 
so·Êﬂt_round_√¨_maxMag
;

128 
__UNREACHABLE
;

131 
	}
}

	@src/softfloat/build/Linux-386-GCC/platform.h

39 
	#LITTLEENDIAN
 1

	)

43 #ifde‡
__GNUC_STDC_INLINE__


44 
	#INLINE
 
ölöe


	)

46 
	#INLINE
 
ölöe


	)

51 
	#SOFTFLOAT_BUILTIN_CLZ
 1

	)

52 
	~"›ts-GCC.h
"

	@src/softfloat/build/Linux-386-SSE2-GCC/platform.h

39 
	#LITTLEENDIAN
 1

	)

43 #ifde‡
__GNUC_STDC_INLINE__


44 
	#INLINE
 
ölöe


	)

46 
	#INLINE
 
ölöe


	)

51 
	#SOFTFLOAT_BUILTIN_CLZ
 1

	)

52 
	~"›ts-GCC.h
"

	@src/softfloat/build/Linux-ARM-VFPv2-GCC/platform.h

39 
	#LITTLEENDIAN
 1

	)

43 #ifde‡
__GNUC_STDC_INLINE__


44 
	#INLINE
 
ölöe


	)

46 
	#INLINE
 
ölöe


	)

51 
	#SOFTFLOAT_BUILTIN_CLZ
 1

	)

52 
	~"›ts-GCC.h
"

	@src/softfloat/build/Linux-RISCV-GCC/platform.h

39 
	#LITTLEENDIAN
 1

	)

41 
	#INLINE_LEVEL
 5

	)

42 
	#SOFTFLOAT_FAST_INT64


	)

43 
	#SOFTFLOAT_FAST_DIV64TO32


	)

47 
	#INLINE
 
ölöe


	)

	@src/softfloat/build/Linux-x86_64-GCC/platform.h

39 
	#LITTLEENDIAN
 1

	)

43 #ifde‡
__GNUC_STDC_INLINE__


44 
	#INLINE
 
ölöe


	)

46 
	#INLINE
 
ölöe


	)

51 
	#SOFTFLOAT_BUILTIN_CLZ
 1

	)

52 
	#SOFTFLOAT_INTRINSIC_INT128
 1

	)

53 
	~"›ts-GCC.h
"

	@src/softfloat/build/Win32-MinGW/platform.h

39 
	#LITTLEENDIAN
 1

	)

43 #ifde‡
__GNUC_STDC_INLINE__


44 
	#INLINE
 
ölöe


	)

46 
	#INLINE
 
ölöe


	)

51 
	#SOFTFLOAT_BUILTIN_CLZ
 1

	)

52 
	~"›ts-GCC.h
"

	@src/softfloat/build/Win32-SSE2-MinGW/platform.h

39 
	#LITTLEENDIAN
 1

	)

43 #ifde‡
__GNUC_STDC_INLINE__


44 
	#INLINE
 
ölöe


	)

46 
	#INLINE
 
ölöe


	)

51 
	#SOFTFLOAT_BUILTIN_CLZ
 1

	)

52 
	~"›ts-GCC.h
"

	@src/softfloat/build/Win64-MinGW-w64/platform.h

39 
	#LITTLEENDIAN
 1

	)

43 #ifde‡
__GNUC_STDC_INLINE__


44 
	#INLINE
 
ölöe


	)

46 
	#INLINE
 
ölöe


	)

51 
	#SOFTFLOAT_BUILTIN_CLZ
 1

	)

52 
	#SOFTFLOAT_INTRINSIC_INT128
 1

	)

53 
	~"›ts-GCC.h
"

	@src/softfloat/build/template-FAST_INT64/platform.h

41 => #deföê
	#LITTLEENDIAN
 1

	)

45 => #deföê
	#INLINE
 
ölöe


	)

49 => #deföê
	#THREAD_LOCAL
 
_Thªad_loˇl


	)

	@src/softfloat/build/template-not-FAST_INT64/platform.h

41 => #deföê
	#LITTLEENDIAN
 1

	)

45 => #deföê
	#INLINE
 
ölöe


	)

49 => #deföê
	#THREAD_LOCAL
 
_Thªad_loˇl


	)

	@src/softfloat/source/8086-SSE/extF80M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80M_isSig«lögNaN
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

46 c⁄° 
extFlﬂt80M
 *
aSPå
;

47 
uöt64_t
 
uiA0
;

49 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

50 i‡–(
aSPå
->
signExp
 & 0x7FFFË!0x7FFF )  
Ál£
;

51 
uiA0
 = 
aSPå
->
signif
;

53 ! (
uiA0
 & 
	`UINT64_C
( 0x4000000000000000 ))

54 && (
uiA0
 & 
	`UINT64_C
( 0x3FFFFFFFFFFFFFFF));

56 
	}
}

	@src/softfloat/source/8086-SSE/f128M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"¥imôives.h
"

41 
	~"so·Êﬂt.h
"

45 
boﬁ
 
	$f128M_isSig«lögNaN
–c⁄° 
Êﬂt128_t
 *
aPå
 )

47 c⁄° 
uöt32_t
 *
aWPå
;

48 
uöt32_t
 
uiA96
;

50 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

51 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

52 i‡–(
uiA96
 & 0x7FFF8000Ë!0x7FFF0000 )  
Ál£
;

54 ((
uiA96
 & 0x00007FFF) != 0)

55 || ((
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

56 | 
aWPå
[
	`ödexW‹d
( 4, 0 )])

59 
	}
}

	@src/softfloat/source/8086-SSE/s_bf16UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_bf16UIToComm⁄NaN
–
uöt_Á°16_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNBF16UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>15;

55 
zPå
->
v64
 = (
uöt_Á°64_t
Ë
uiA
<<56;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/8086-SSE/s_commonNaNToBF16UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°16_t
 
	$so·Êﬂt_comm⁄NaNToBF16UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48  (
uöt_Á°16_t
Ë
aPå
->
sign
<<15 | 0x7FC0 |áPå->
v64
>>56;

50 
	}
}

	@src/softfloat/source/8086-SSE/s_commonNaNToExtF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

48 
	$so·Êﬂt_comm⁄NaNToExtF80M
(

49 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 )

52 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
aPå
->
sign
, 0x7FFF );

53 
zSPå
->
signif
 = 
	`UINT64_C
–0xC000000000000000 ) | 
aPå
->
v64
>>1;

55 
	}
}

	@src/softfloat/source/8086-SSE/s_commonNaNToExtF80UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

47 
uöt128
 
	$so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

49 
uöt128
 
uiZ
;

51 
uiZ
.
v64
 = (
uöt_Á°16_t
Ë
aPå
->
sign
<<15 | 0x7FFF;

52 
uiZ
.
v0
 = 
	`UINT64_C
–0xC000000000000000 ) | 
aPå
->
v64
>>1;

53  
uiZ
;

55 
	}
}

	@src/softfloat/source/8086-SSE/s_commonNaNToF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

49 
	$so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 )

52 
	`so·Êﬂt_sh‹tShi·Right128M
–(c⁄° 
uöt32_t
 *Ë&
aPå
->
v0
, 16, 
zWPå
 );

53 
zWPå
[
	`ödexW‹dHi
–4 )] |(
uöt32_t
Ë
aPå
->
sign
<<31 | 0x7FFF8000;

55 
	}
}

	@src/softfloat/source/8086-SSE/s_commonNaNToF128UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

46 
uöt128
 
	$so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48 
uöt128
 
uiZ
;

50 
uiZ
 = 
	`so·Êﬂt_sh‹tShi·Right128
–
aPå
->
v64
,áPå->
v0
, 16 );

51 
uiZ
.
v64
 |(
uöt_Á°64_t
Ë
aPå
->
sign
<<63 | 
	`UINT64_C
( 0x7FFF800000000000 );

52  
uiZ
;

54 
	}
}

	@src/softfloat/source/8086-SSE/s_commonNaNToF16UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°16_t
 
	$so·Êﬂt_comm⁄NaNToF16UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48  (
uöt_Á°16_t
Ë
aPå
->
sign
<<15 | 0x7E00 |áPå->
v64
>>54;

50 
	}
}

	@src/softfloat/source/8086-SSE/s_commonNaNToF32UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°32_t
 
	$so·Êﬂt_comm⁄NaNToF32UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48  (
uöt_Á°32_t
Ë
aPå
->
sign
<<31 | 0x7FC00000 |áPå->
v64
>>41;

50 
	}
}

	@src/softfloat/source/8086-SSE/s_commonNaNToF64UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°64_t
 
	$so·Êﬂt_comm⁄NaNToF64UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

49 (
uöt_Á°64_t
Ë
aPå
->
sign
<<63 | 
	`UINT64_C
( 0x7FF8000000000000 )

50 | 
aPå
->
v64
>>12;

52 
	}
}

	@src/softfloat/source/8086-SSE/s_extF80MToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

50 
	$so·Êﬂt_extF80MToComm⁄NaN
(

51 c⁄° 
extFlﬂt80M
 *
aSPå
, 
comm⁄NaN
 *
zPå
 )

54 i‡–
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
aSPå
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57 
zPå
->
sign
 = 
	`signExtF80UI64
–
aSPå
->
signExp
 );

58 
zPå
->
v64
 = 
aSPå
->
signif
<<1;

59 
zPå
->
v0
 = 0;

61 
	}
}

	@src/softfloat/source/8086-SSE/s_extF80UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

50 
	$so·Êﬂt_extF80UIToComm⁄NaN
(

51 
uöt_Á°16_t
 
uiA64
, 
uöt_Á°64_t
 
uiA0
, 
comm⁄NaN
 *
zPå
 )

54 i‡–
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57 
zPå
->
sign
 = 
uiA64
>>15;

58 
zPå
->
v64
 = 
uiA0
<<1;

59 
zPå
->
v0
 = 0;

61 
	}
}

	@src/softfloat/source/8086-SSE/s_f128MToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
	$so·Êﬂt_f128MToComm⁄NaN
–c⁄° 
uöt32_t
 *
aWPå
, 
comm⁄NaN
 *
zPå
 )

55 i‡–
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58 
zPå
->
sign
 = 
aWPå
[
	`ödexW‹dHi
( 4 )]>>31;

59 
	`so·Êﬂt_sh‹tShi·Le·128M
–
aWPå
, 16, (
uöt32_t
 *Ë&
zPå
->
v0
 );

61 
	}
}

	@src/softfloat/source/8086-SSE/s_f128UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

51 
	$so·Êﬂt_f128UIToComm⁄NaN
(

52 
uöt_Á°64_t
 
uiA64
, uöt_Á°64_à
uiA0
, 
comm⁄NaN
 *
zPå
 )

54 
uöt128
 
NaNSig
;

56 i‡–
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

59 
NaNSig
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
uiA64
, 
uiA0
, 16 );

60 
zPå
->
sign
 = 
uiA64
>>63;

61 
zPå
->
v64
 = 
NaNSig
.v64;

62 
zPå
->
v0
 = 
NaNSig
.v0;

64 
	}
}

	@src/softfloat/source/8086-SSE/s_f16UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f16UIToComm⁄NaN
–
uöt_Á°16_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>15;

55 
zPå
->
v64
 = (
uöt_Á°64_t
Ë
uiA
<<54;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/8086-SSE/s_f32UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f32UIToComm⁄NaN
–
uöt_Á°32_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>31;

55 
zPå
->
v64
 = (
uöt_Á°64_t
Ë
uiA
<<41;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/8086-SSE/s_f64UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f64UIToComm⁄NaN
–
uöt_Á°64_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>63;

55 
zPå
->
v64
 = 
uiA
<<12;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/8086-SSE/s_propagateNaNExtF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

51 
	$so·Êﬂt_¥›ag©eNaNExtF80M
(

52 c⁄° 
extFlﬂt80M
 *
aSPå
,

53 c⁄° 
extFlﬂt80M
 *
bSPå
,

54 
extFlﬂt80M
 *
zSPå


57 
boﬁ
 
isSigNaNA
;

58 c⁄° 
extFlﬂt80M
 *
sPå
;

59 
boﬁ
 
isSigNaNB
;

60 
uöt_Á°16_t
 
uiB64
;

61 
uöt64_t
 
uiB0
;

62 
uöt_Á°16_t
 
uiA64
;

63 
uöt64_t
 
uiA0
;

64 
uöt_Á°16_t
 
uiMagA64
, 
uiMagB64
;

66 
isSigNaNA
 = 
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
aSPå
 );

67 
sPå
 = 
aSPå
;

68 i‡–! 
bSPå
 ) {

69 i‡–
isSigNaNA
 ) 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

70 
c›y
;

72 
isSigNaNB
 = 
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
bSPå
 );

73 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

74 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 i‡–
isSigNaNA
 ) {

76 
uiB64
 = 
bSPå
->
signExp
;

77 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîUIMag
;

78 
uiB0
 = 
bSPå
->
signif
;

79 i‡–
	`isNaNExtF80UI
–
uiB64
, 
uiB0
 ) ) 
c›yB
;

80 
c›y
;

82 
uiA64
 = 
aSPå
->
signExp
;

83 
uiA0
 = 
aSPå
->
signif
;

84 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) ) 
c›y
;

85 
c›yB
;

88 
uiB64
 = 
bSPå
->
signExp
;

89 
ªtu∫L¨gîUIMag
:

90 
uiA64
 = 
aSPå
->
signExp
;

91 
uiMagA64
 = 
uiA64
 & 0x7FFF;

92 
uiMagB64
 = 
uiB64
 & 0x7FFF;

93 i‡–
uiMagA64
 < 
uiMagB64
 ) 
c›yB
;

94 i‡–
uiMagB64
 < 
uiMagA64
 ) 
c›y
;

95 
uiA0
 = 
aSPå
->
signif
;

96 
uiB0
 = 
bSPå
->
signif
;

97 i‡–
uiA0
 < 
uiB0
 ) 
c›yB
;

98 i‡–
uiB0
 < 
uiA0
 ) 
c›y
;

99 i‡–
uiA64
 < 
uiB64
 ) 
c›y
;

100 
c›yB
:

101 
sPå
 = 
bSPå
;

102 
c›y
:

103 
zSPå
->
signExp
 = 
sPå
->signExp;

104 
zSPå
->
signif
 = 
sPå
->signi‡| 
	`UINT64_C
( 0xC000000000000000 );

106 
	}
}

	@src/softfloat/source/8086-SSE/s_propagateNaNExtF80UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
uöt128


54 
	$so·Êﬂt_¥›ag©eNaNExtF80UI
(

55 
uöt_Á°16_t
 
uiA64
,

56 
uöt_Á°64_t
 
uiA0
,

57 
uöt_Á°16_t
 
uiB64
,

58 
uöt_Á°64_t
 
uiB0


61 
boﬁ
 
isSigNaNA
, 
isSigNaNB
;

62 
uöt_Á°64_t
 
uiN⁄sigA0
, 
uiN⁄sigB0
;

63 
uöt_Á°16_t
 
uiMagA64
, 
uiMagB64
;

64 
uöt128
 
uiZ
;

68 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 );

69 
isSigNaNB
 = 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 );

73 
uiN⁄sigA0
 = 
uiA0
 | 
	`UINT64_C
( 0xC000000000000000 );

74 
uiN⁄sigB0
 = 
uiB0
 | 
	`UINT64_C
( 0xC000000000000000 );

77 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

78 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

79 i‡–
isSigNaNA
 ) {

80 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîMag
;

81 i‡–
	`isNaNExtF80UI
–
uiB64
, 
uiB0
 ) ) 
ªtu∫B
;

82 
ªtu∫A
;

84 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) ) 
ªtu∫A
;

85 
ªtu∫B
;

88 
ªtu∫L¨gîMag
:

89 
uiMagA64
 = 
uiA64
 & 0x7FFF;

90 
uiMagB64
 = 
uiB64
 & 0x7FFF;

91 i‡–
uiMagA64
 < 
uiMagB64
 ) 
ªtu∫B
;

92 i‡–
uiMagB64
 < 
uiMagA64
 ) 
ªtu∫A
;

93 i‡–
uiA0
 < 
uiB0
 ) 
ªtu∫B
;

94 i‡–
uiB0
 < 
uiA0
 ) 
ªtu∫A
;

95 i‡–
uiA64
 < 
uiB64
 ) 
ªtu∫A
;

96 
ªtu∫B
:

97 
uiZ
.
v64
 = 
uiB64
;

98 
uiZ
.
v0
 = 
uiN⁄sigB0
;

99  
uiZ
;

100 
ªtu∫A
:

101 
uiZ
.
v64
 = 
uiA64
;

102 
uiZ
.
v0
 = 
uiN⁄sigA0
;

103  
uiZ
;

105 
	}
}

	@src/softfloat/source/8086-SSE/s_propagateNaNF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
	$so·Êﬂt_¥›ag©eNaNF128M
(

54 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 )

56 
boﬁ
 
isSigNaNA
;

57 c⁄° 
uöt32_t
 *
±r
;

59 
±r
 = 
aWPå
;

60 
isSigNaNA
 = 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 );

62 
isSigNaNA


63 || (
bWPå
 && 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *) bWPtr ))

65 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

66 i‡–
isSigNaNA
 ) 
c›y
;

68 i‡–! 
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) ) 
±r
 = 
bWPå
;

69 
c›y
:

70 
zWPå
[
	`ödexW‹dHi
–4 )] = 
±r
[indexWordHi( 4 )] | 0x00008000;

71 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
±r
[indexWord( 4, 2 )];

72 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
±r
[indexWord( 4, 1 )];

73 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
±r
[indexWord( 4, 0 )];

75 
	}
}

	@src/softfloat/source/8086-SSE/s_propagateNaNF128UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
uöt128


54 
	$so·Êﬂt_¥›ag©eNaNF128UI
(

55 
uöt_Á°64_t
 
uiA64
,

56 
uöt_Á°64_t
 
uiA0
,

57 
uöt_Á°64_t
 
uiB64
,

58 
uöt_Á°64_t
 
uiB0


61 
boﬁ
 
isSigNaNA
;

62 
uöt128
 
uiZ
;

64 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 );

65 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNF128UI
–
uiB64
, 
uiB0
 ) ) {

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

67 i‡–
isSigNaNA
 ) 
ªtu∫N⁄sigA
;

69 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) ) {

70 
ªtu∫N⁄sigA
:

71 
uiZ
.
v64
 = 
uiA64
;

72 
uiZ
.
v0
 = 
uiA0
;

74 
uiZ
.
v64
 = 
uiB64
;

75 
uiZ
.
v0
 = 
uiB0
;

77 
uiZ
.
v64
 |
	`UINT64_C
( 0x0000800000000000 );

78  
uiZ
;

80 
	}
}

	@src/softfloat/source/8086-SSE/s_propagateNaNF16UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°16_t


51 
	$so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 )

53 
boﬁ
 
isSigNaNA
;

55 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 );

56 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNF16UI
–
uiB
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58 i‡–
isSigNaNA
 )  
uiA
 | 0x0200;

60  (
	`isNaNF16UI
–
uiA
 ) ? uiA : 
uiB
) | 0x0200;

62 
	}
}

	@src/softfloat/source/8086-SSE/s_propagateNaNF32UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°32_t


51 
	$so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 )

53 
boﬁ
 
isSigNaNA
;

55 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 );

56 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNF32UI
–
uiB
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58 i‡–
isSigNaNA
 )  
uiA
 | 0x00400000;

60  (
	`isNaNF32UI
–
uiA
 ) ? uiA : 
uiB
) | 0x00400000;

62 
	}
}

	@src/softfloat/source/8086-SSE/s_propagateNaNF64UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°64_t


51 
	$so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 )

53 
boﬁ
 
isSigNaNA
;

55 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 );

56 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNF64UI
–
uiB
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58 i‡–
isSigNaNA
 )  
uiA
 | 
	`UINT64_C
( 0x0008000000000000 );

60  (
	`isNaNF64UI
–
uiA
 ) ? uiA : 
uiB
Ë| 
	`UINT64_C
( 0x0008000000000000 );

62 
	}
}

	@src/softfloat/source/8086-SSE/softfloat_raiseFlags.c

37 
	~"∂©f‹m.h
"

38 
	~"so·Êﬂt.h
"

46 
	$so·Êﬂt_øi£Fœgs
–
uöt_Á°8_t
 
Êags
 )

49 
so·Êﬂt_ex˚±i⁄Fœgs
 |
Êags
;

51 
	}
}

	@src/softfloat/source/8086-SSE/specialize.h

37 #i‚de‡
•ecülize_h


38 
	#•ecülize_h
 1

	)

40 
	~<°dboﬁ.h
>

41 
	~<°döt.h
>

42 
	~"¥imôiveTy≥s.h
"

43 
	~"so·Êﬂt.h
"

48 
	#öô_dëe˘Tööess
 
so·Êﬂt_tööess_a·îRoundög


	)

54 
	#ui32_‰omPosOvîÊow
 0xFFFFFFFF

	)

55 
	#ui32_‰omNegOvîÊow
 0xFFFFFFFF

	)

56 
	#ui32_‰omNaN
 0xFFFFFFFF

	)

57 
	#i32_‰omPosOvîÊow
 (-0x7FFFFFFF - 1)

	)

58 
	#i32_‰omNegOvîÊow
 (-0x7FFFFFFF - 1)

	)

59 
	#i32_‰omNaN
 (-0x7FFFFFFF - 1)

	)

65 
	#ui64_‰omPosOvîÊow
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

66 
	#ui64_‰omNegOvîÊow
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

67 
	#ui64_‰omNaN
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

68 
	#i64_‰omPosOvîÊow
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

69 
	#i64_‰omNegOvîÊow
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

70 
	#i64_‰omNaN
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

76 
	scomm⁄NaN
 {

77 
boﬁ
 
	msign
;

78 #ifde‡
LITTLEENDIAN


79 
uöt64_t
 
	mv0
, 
	mv64
;

81 
uöt64_t
 
	mv64
, 
	mv0
;

88 
	#deÁu…NaNF16UI
 0xFE00

	)

95 
	#so·Êﬂt_isSigNaNF16UI
–
uiA
 ) ((((uiAË& 0x7E00Ë=0x7C00Ë&& ((uiAË& 0x01FF))

	)

103 
so·Êﬂt_f16UIToComm⁄NaN
–
uöt_Á°16_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

109 
uöt_Á°16_t
 
so·Êﬂt_comm⁄NaNToF16UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

117 
uöt_Á°16_t


118 
so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 );

125 
	#so·Êﬂt_isSigNaNBF16UI
–
uiA
 ) ((((uiAË& 0x7FC0Ë=0x7F80Ë&& ((uiAË& 0x003F))

	)

133 
so·Êﬂt_bf16UIToComm⁄NaN
–
uöt_Á°16_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

139 
uöt_Á°16_t
 
so·Êﬂt_comm⁄NaNToBF16UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

144 
	#deÁu…NaNF32UI
 0xFFC00000

	)

151 
	#so·Êﬂt_isSigNaNF32UI
–
uiA
 ) ((((uiAË& 0x7FC00000Ë=0x7F800000Ë&& ((uiAË& 0x003FFFFF))

	)

159 
so·Êﬂt_f32UIToComm⁄NaN
–
uöt_Á°32_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

165 
uöt_Á°32_t
 
so·Êﬂt_comm⁄NaNToF32UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

173 
uöt_Á°32_t


174 
so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 );

179 
	#deÁu…NaNF64UI
 
	`UINT64_C
–0xFFF8000000000000 )

	)

186 
	#so·Êﬂt_isSigNaNF64UI
–
uiA
 ) ((((uiAË& 
	`UINT64_C
–0x7FF8000000000000 )Ë=UINT64_C–0x7FF0000000000000 )Ë&& ((uiAË& UINT64_C–0x0007FFFFFFFFFFFF )))

	)

194 
so·Êﬂt_f64UIToComm⁄NaN
–
uöt_Á°64_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

200 
uöt_Á°64_t
 
so·Êﬂt_comm⁄NaNToF64UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

208 
uöt_Á°64_t


209 
so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 );

214 
	#deÁu…NaNExtF80UI64
 0xFFFF

	)

215 
	#deÁu…NaNExtF80UI0
 
	`UINT64_C
–0xC000000000000000 )

	)

223 
	#so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 0x7FFFË=0x7FFFË&& ! ((uiA0Ë& 
	`UINT64_C
–0x4000000000000000 )Ë&& ((uiA0Ë& UINT64_C–0x3FFFFFFFFFFFFFFF )))

	)

225 #ifde‡
SOFTFLOAT_FAST_INT64


240 
so·Êﬂt_extF80UIToComm⁄NaN
(

241 
uöt_Á°16_t
 
uiA64
, 
uöt_Á°64_t
 
uiA0
, 
comm⁄NaN
 *
zPå
 );

248 
uöt128
 
so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

259 
uöt128


260 
so·Êﬂt_¥›ag©eNaNExtF80UI
(

261 
uöt_Á°16_t
 
uiA64
,

262 
uöt_Á°64_t
 
uiA0
,

263 
uöt_Á°16_t
 
uiB64
,

264 
uöt_Á°64_t
 
uiB0


270 
	#deÁu…NaNF128UI64
 
	`UINT64_C
–0xFFFF800000000000 )

	)

271 
	#deÁu…NaNF128UI0
 
	`UINT64_C
–0 )

	)

279 
	#so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 
	`UINT64_C
–0x7FFF800000000000 )Ë=UINT64_C–0x7FFF000000000000 )Ë&& ((uiA0Ë|| ((uiA64Ë& UINT64_C–0x00007FFFFFFFFFFF ))))

	)

289 
so·Êﬂt_f128UIToComm⁄NaN
(

290 
uöt_Á°64_t
 
uiA64
, uöt_Á°64_à
uiA0
, 
comm⁄NaN
 *
zPå
 );

296 
uöt128
 
so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 * );

307 
uöt128


308 
so·Êﬂt_¥›ag©eNaNF128UI
(

309 
uöt_Á°64_t
 
uiA64
,

310 
uöt_Á°64_t
 
uiA0
,

311 
uöt_Á°64_t
 
uiB64
,

312 
uöt_Á°64_t
 
uiB0


329 
so·Êﬂt_extF80MToComm⁄NaN
(

330 c⁄° 
extFlﬂt80M
 *
aSPå
, 
comm⁄NaN
 *
zPå
 );

338 
so·Êﬂt_comm⁄NaNToExtF80M
(

339 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 );

348 
so·Êﬂt_¥›ag©eNaNExtF80M
(

349 c⁄° 
extFlﬂt80M
 *
aSPå
,

350 c⁄° 
extFlﬂt80M
 *
bSPå
,

351 
extFlﬂt80M
 *
zSPå


357 
	#deÁu…NaNF128UI96
 0xFFFF8000

	)

358 
	#deÁu…NaNF128UI64
 0

	)

359 
	#deÁu…NaNF128UI32
 0

	)

360 
	#deÁu…NaNF128UI0
 0

	)

371 
so·Êﬂt_f128MToComm⁄NaN
–c⁄° 
uöt32_t
 *
aWPå
, 
comm⁄NaN
 *
zPå
 );

380 
so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 );

391 
so·Êﬂt_¥›ag©eNaNF128M
(

392 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 );

	@src/softfloat/source/8086/extF80M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80M_isSig«lögNaN
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

46 c⁄° 
extFlﬂt80M
 *
aSPå
;

47 
uöt64_t
 
uiA0
;

49 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

50 i‡–(
aSPå
->
signExp
 & 0x7FFFË!0x7FFF )  
Ál£
;

51 
uiA0
 = 
aSPå
->
signif
;

53 ! (
uiA0
 & 
	`UINT64_C
( 0x4000000000000000 ))

54 && (
uiA0
 & 
	`UINT64_C
( 0x3FFFFFFFFFFFFFFF));

56 
	}
}

	@src/softfloat/source/8086/f128M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"¥imôives.h
"

41 
	~"so·Êﬂt.h
"

45 
boﬁ
 
	$f128M_isSig«lögNaN
–c⁄° 
Êﬂt128_t
 *
aPå
 )

47 c⁄° 
uöt32_t
 *
aWPå
;

48 
uöt32_t
 
uiA96
;

50 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

51 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

52 i‡–(
uiA96
 & 0x7FFF8000Ë!0x7FFF0000 )  
Ál£
;

54 ((
uiA96
 & 0x00007FFF) != 0)

55 || ((
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

56 | 
aWPå
[
	`ödexW‹d
( 4, 0 )])

59 
	}
}

	@src/softfloat/source/8086/s_commonNaNToExtF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

48 
	$so·Êﬂt_comm⁄NaNToExtF80M
(

49 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 )

52 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
aPå
->
sign
, 0x7FFF );

53 
zSPå
->
signif
 = 
	`UINT64_C
–0xC000000000000000 ) | 
aPå
->
v64
>>1;

55 
	}
}

	@src/softfloat/source/8086/s_commonNaNToExtF80UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

47 
uöt128
 
	$so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

49 
uöt128
 
uiZ
;

51 
uiZ
.
v64
 = (
uöt_Á°16_t
Ë
aPå
->
sign
<<15 | 0x7FFF;

52 
uiZ
.
v0
 = 
	`UINT64_C
–0xC000000000000000 ) | 
aPå
->
v64
>>1;

53  
uiZ
;

55 
	}
}

	@src/softfloat/source/8086/s_commonNaNToF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

49 
	$so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 )

52 
	`so·Êﬂt_sh‹tShi·Right128M
–(c⁄° 
uöt32_t
 *Ë&
aPå
->
v0
, 16, 
zWPå
 );

53 
zWPå
[
	`ödexW‹dHi
–4 )] |(
uöt32_t
Ë
aPå
->
sign
<<31 | 0x7FFF8000;

55 
	}
}

	@src/softfloat/source/8086/s_commonNaNToF128UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

46 
uöt128
 
	$so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48 
uöt128
 
uiZ
;

50 
uiZ
 = 
	`so·Êﬂt_sh‹tShi·Right128
–
aPå
->
v64
,áPå->
v0
, 16 );

51 
uiZ
.
v64
 |(
uöt_Á°64_t
Ë
aPå
->
sign
<<63 | 
	`UINT64_C
( 0x7FFF800000000000 );

52  
uiZ
;

54 
	}
}

	@src/softfloat/source/8086/s_commonNaNToF16UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°16_t
 
	$so·Êﬂt_comm⁄NaNToF16UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48  (
uöt_Á°16_t
Ë
aPå
->
sign
<<15 | 0x7E00 |áPå->
v64
>>54;

50 
	}
}

	@src/softfloat/source/8086/s_commonNaNToF32UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°32_t
 
	$so·Êﬂt_comm⁄NaNToF32UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48  (
uöt_Á°32_t
Ë
aPå
->
sign
<<31 | 0x7FC00000 |áPå->
v64
>>41;

50 
	}
}

	@src/softfloat/source/8086/s_commonNaNToF64UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°64_t
 
	$so·Êﬂt_comm⁄NaNToF64UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

49 (
uöt_Á°64_t
Ë
aPå
->
sign
<<63 | 
	`UINT64_C
( 0x7FF8000000000000 )

50 | 
aPå
->
v64
>>12;

52 
	}
}

	@src/softfloat/source/8086/s_extF80MToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

50 
	$so·Êﬂt_extF80MToComm⁄NaN
(

51 c⁄° 
extFlﬂt80M
 *
aSPå
, 
comm⁄NaN
 *
zPå
 )

54 i‡–
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
aSPå
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57 
zPå
->
sign
 = 
	`signExtF80UI64
–
aSPå
->
signExp
 );

58 
zPå
->
v64
 = 
aSPå
->
signif
<<1;

59 
zPå
->
v0
 = 0;

61 
	}
}

	@src/softfloat/source/8086/s_extF80UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

50 
	$so·Êﬂt_extF80UIToComm⁄NaN
(

51 
uöt_Á°16_t
 
uiA64
, 
uöt_Á°64_t
 
uiA0
, 
comm⁄NaN
 *
zPå
 )

54 i‡–
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57 
zPå
->
sign
 = 
uiA64
>>15;

58 
zPå
->
v64
 = 
uiA0
<<1;

59 
zPå
->
v0
 = 0;

61 
	}
}

	@src/softfloat/source/8086/s_f128MToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
	$so·Êﬂt_f128MToComm⁄NaN
–c⁄° 
uöt32_t
 *
aWPå
, 
comm⁄NaN
 *
zPå
 )

55 i‡–
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58 
zPå
->
sign
 = 
aWPå
[
	`ödexW‹dHi
( 4 )]>>31;

59 
	`so·Êﬂt_sh‹tShi·Le·128M
–
aWPå
, 16, (
uöt32_t
 *Ë&
zPå
->
v0
 );

61 
	}
}

	@src/softfloat/source/8086/s_f128UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

51 
	$so·Êﬂt_f128UIToComm⁄NaN
(

52 
uöt_Á°64_t
 
uiA64
, uöt_Á°64_à
uiA0
, 
comm⁄NaN
 *
zPå
 )

54 
uöt128
 
NaNSig
;

56 i‡–
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

59 
NaNSig
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
uiA64
, 
uiA0
, 16 );

60 
zPå
->
sign
 = 
uiA64
>>63;

61 
zPå
->
v64
 = 
NaNSig
.v64;

62 
zPå
->
v0
 = 
NaNSig
.v0;

64 
	}
}

	@src/softfloat/source/8086/s_f16UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f16UIToComm⁄NaN
–
uöt_Á°16_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>15;

55 
zPå
->
v64
 = (
uöt_Á°64_t
Ë
uiA
<<54;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/8086/s_f32UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f32UIToComm⁄NaN
–
uöt_Á°32_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>31;

55 
zPå
->
v64
 = (
uöt_Á°64_t
Ë
uiA
<<41;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/8086/s_f64UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f64UIToComm⁄NaN
–
uöt_Á°64_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>63;

55 
zPå
->
v64
 = 
uiA
<<12;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/8086/s_propagateNaNExtF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

51 
	$so·Êﬂt_¥›ag©eNaNExtF80M
(

52 c⁄° 
extFlﬂt80M
 *
aSPå
,

53 c⁄° 
extFlﬂt80M
 *
bSPå
,

54 
extFlﬂt80M
 *
zSPå


57 
boﬁ
 
isSigNaNA
;

58 c⁄° 
extFlﬂt80M
 *
sPå
;

59 
boﬁ
 
isSigNaNB
;

60 
uöt_Á°16_t
 
uiB64
;

61 
uöt64_t
 
uiB0
;

62 
uöt_Á°16_t
 
uiA64
;

63 
uöt64_t
 
uiA0
;

64 
uöt_Á°16_t
 
uiMagA64
, 
uiMagB64
;

66 
isSigNaNA
 = 
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
aSPå
 );

67 
sPå
 = 
aSPå
;

68 i‡–! 
bSPå
 ) {

69 i‡–
isSigNaNA
 ) 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

70 
c›y
;

72 
isSigNaNB
 = 
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
bSPå
 );

73 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

74 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 i‡–
isSigNaNA
 ) {

76 
uiB64
 = 
bSPå
->
signExp
;

77 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîUIMag
;

78 
uiB0
 = 
bSPå
->
signif
;

79 i‡–
	`isNaNExtF80UI
–
uiB64
, 
uiB0
 ) ) 
c›yB
;

80 
c›y
;

82 
uiA64
 = 
aSPå
->
signExp
;

83 
uiA0
 = 
aSPå
->
signif
;

84 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) ) 
c›y
;

85 
c›yB
;

88 
uiB64
 = 
bSPå
->
signExp
;

89 
ªtu∫L¨gîUIMag
:

90 
uiA64
 = 
aSPå
->
signExp
;

91 
uiMagA64
 = 
uiA64
 & 0x7FFF;

92 
uiMagB64
 = 
uiB64
 & 0x7FFF;

93 i‡–
uiMagA64
 < 
uiMagB64
 ) 
c›yB
;

94 i‡–
uiMagB64
 < 
uiMagA64
 ) 
c›y
;

95 
uiA0
 = 
aSPå
->
signif
;

96 
uiB0
 = 
bSPå
->
signif
;

97 i‡–
uiA0
 < 
uiB0
 ) 
c›yB
;

98 i‡–
uiB0
 < 
uiA0
 ) 
c›y
;

99 i‡–
uiA64
 < 
uiB64
 ) 
c›y
;

100 
c›yB
:

101 
sPå
 = 
bSPå
;

102 
c›y
:

103 
zSPå
->
signExp
 = 
sPå
->signExp;

104 
zSPå
->
signif
 = 
sPå
->signi‡| 
	`UINT64_C
( 0xC000000000000000 );

106 
	}
}

	@src/softfloat/source/8086/s_propagateNaNExtF80UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
uöt128


54 
	$so·Êﬂt_¥›ag©eNaNExtF80UI
(

55 
uöt_Á°16_t
 
uiA64
,

56 
uöt_Á°64_t
 
uiA0
,

57 
uöt_Á°16_t
 
uiB64
,

58 
uöt_Á°64_t
 
uiB0


61 
boﬁ
 
isSigNaNA
, 
isSigNaNB
;

62 
uöt_Á°64_t
 
uiN⁄sigA0
, 
uiN⁄sigB0
;

63 
uöt_Á°16_t
 
uiMagA64
, 
uiMagB64
;

64 
uöt128
 
uiZ
;

68 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 );

69 
isSigNaNB
 = 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 );

73 
uiN⁄sigA0
 = 
uiA0
 | 
	`UINT64_C
( 0xC000000000000000 );

74 
uiN⁄sigB0
 = 
uiB0
 | 
	`UINT64_C
( 0xC000000000000000 );

77 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

78 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

79 i‡–
isSigNaNA
 ) {

80 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîMag
;

81 i‡–
	`isNaNExtF80UI
–
uiB64
, 
uiB0
 ) ) 
ªtu∫B
;

82 
ªtu∫A
;

84 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) ) 
ªtu∫A
;

85 
ªtu∫B
;

88 
ªtu∫L¨gîMag
:

89 
uiMagA64
 = 
uiA64
 & 0x7FFF;

90 
uiMagB64
 = 
uiB64
 & 0x7FFF;

91 i‡–
uiMagA64
 < 
uiMagB64
 ) 
ªtu∫B
;

92 i‡–
uiMagB64
 < 
uiMagA64
 ) 
ªtu∫A
;

93 i‡–
uiA0
 < 
uiB0
 ) 
ªtu∫B
;

94 i‡–
uiB0
 < 
uiA0
 ) 
ªtu∫A
;

95 i‡–
uiA64
 < 
uiB64
 ) 
ªtu∫A
;

96 
ªtu∫B
:

97 
uiZ
.
v64
 = 
uiB64
;

98 
uiZ
.
v0
 = 
uiN⁄sigB0
;

99  
uiZ
;

100 
ªtu∫A
:

101 
uiZ
.
v64
 = 
uiA64
;

102 
uiZ
.
v0
 = 
uiN⁄sigA0
;

103  
uiZ
;

105 
	}
}

	@src/softfloat/source/8086/s_propagateNaNF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
	$so·Êﬂt_¥›ag©eNaNF128M
(

54 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 )

56 
boﬁ
 
isSigNaNA
;

57 c⁄° 
uöt32_t
 *
±r
;

58 
boﬁ
 
isSigNaNB
;

59 
uöt32_t
 
uiA96
, 
uiB96
, 
w‹dMagA
, 
w‹dMagB
;

61 
isSigNaNA
 = 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 );

62 
±r
 = 
aWPå
;

63 i‡–! 
bWPå
 ) {

64 i‡–
isSigNaNA
 ) 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

65 
c›y
;

67 
isSigNaNB
 = 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
bWPå
 );

68 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

69 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

70 i‡–
isSigNaNA
 ) {

71 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîUIMag
;

72 i‡–
	`so·Êﬂt_isNaNF128M
–
bWPå
 ) ) 
c›yB
;

73 
c›y
;

75 i‡–
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) ) 
c›y
;

76 
c›yB
;

79 
ªtu∫L¨gîUIMag
:

80 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

81 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

82 
w‹dMagA
 = 
uiA96
 & 0x7FFFFFFF;

83 
w‹dMagB
 = 
uiB96
 & 0x7FFFFFFF;

84 i‡–
w‹dMagA
 < 
w‹dMagB
 ) 
c›yB
;

85 i‡–
w‹dMagB
 < 
w‹dMagA
 ) 
c›y
;

86 
w‹dMagA
 = 
aWPå
[
	`ödexW‹d
( 4, 2 )];

87 
w‹dMagB
 = 
bWPå
[
	`ödexW‹d
( 4, 2 )];

88 i‡–
w‹dMagA
 < 
w‹dMagB
 ) 
c›yB
;

89 i‡–
w‹dMagB
 < 
w‹dMagA
 ) 
c›y
;

90 
w‹dMagA
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )];

91 
w‹dMagB
 = 
bWPå
[
	`ödexW‹d
( 4, 1 )];

92 i‡–
w‹dMagA
 < 
w‹dMagB
 ) 
c›yB
;

93 i‡–
w‹dMagB
 < 
w‹dMagA
 ) 
c›y
;

94 
w‹dMagA
 = 
aWPå
[
	`ödexW‹d
( 4, 0 )];

95 
w‹dMagB
 = 
bWPå
[
	`ödexW‹d
( 4, 0 )];

96 i‡–
w‹dMagA
 < 
w‹dMagB
 ) 
c›yB
;

97 i‡–
w‹dMagB
 < 
w‹dMagA
 ) 
c›y
;

98 i‡–
uiA96
 < 
uiB96
 ) 
c›y
;

99 
c›yB
:

100 
±r
 = 
bWPå
;

101 
c›y
:

102 
zWPå
[
	`ödexW‹dHi
–4 )] = 
±r
[indexWordHi( 4 )] | 0x00008000;

103 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
±r
[indexWord( 4, 2 )];

104 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
±r
[indexWord( 4, 1 )];

105 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
±r
[indexWord( 4, 0 )];

107 
	}
}

	@src/softfloat/source/8086/s_propagateNaNF128UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
uöt128


54 
	$so·Êﬂt_¥›ag©eNaNF128UI
(

55 
uöt_Á°64_t
 
uiA64
,

56 
uöt_Á°64_t
 
uiA0
,

57 
uöt_Á°64_t
 
uiB64
,

58 
uöt_Á°64_t
 
uiB0


61 
boﬁ
 
isSigNaNA
, 
isSigNaNB
;

62 
uöt_Á°64_t
 
uiN⁄sigA64
, 
uiN⁄sigB64
, 
uiMagA64
, 
uiMagB64
;

63 
uöt128
 
uiZ
;

67 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 );

68 
isSigNaNB
 = 
	`so·Êﬂt_isSigNaNF128UI
–
uiB64
, 
uiB0
 );

72 
uiN⁄sigA64
 = 
uiA64
 | 
	`UINT64_C
( 0x0000800000000000 );

73 
uiN⁄sigB64
 = 
uiB64
 | 
	`UINT64_C
( 0x0000800000000000 );

76 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

77 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

78 i‡–
isSigNaNA
 ) {

79 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîMag
;

80 i‡–
	`isNaNF128UI
–
uiB64
, 
uiB0
 ) ) 
ªtu∫B
;

81 
ªtu∫A
;

83 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) ) 
ªtu∫A
;

84 
ªtu∫B
;

87 
ªtu∫L¨gîMag
:

88 
uiMagA64
 = 
uiA64
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF );

89 
uiMagB64
 = 
uiB64
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF );

90 i‡–
uiMagA64
 < 
uiMagB64
 ) 
ªtu∫B
;

91 i‡–
uiMagB64
 < 
uiMagA64
 ) 
ªtu∫A
;

92 i‡–
uiA0
 < 
uiB0
 ) 
ªtu∫B
;

93 i‡–
uiB0
 < 
uiA0
 ) 
ªtu∫A
;

94 i‡–
uiN⁄sigA64
 < 
uiN⁄sigB64
 ) 
ªtu∫A
;

95 
ªtu∫B
:

96 
uiZ
.
v64
 = 
uiN⁄sigB64
;

97 
uiZ
.
v0
 = 
uiB0
;

98  
uiZ
;

99 
ªtu∫A
:

100 
uiZ
.
v64
 = 
uiN⁄sigA64
;

101 
uiZ
.
v0
 = 
uiA0
;

102  
uiZ
;

104 
	}
}

	@src/softfloat/source/8086/s_propagateNaNF16UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°16_t


51 
	$so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 )

53 
boﬁ
 
isSigNaNA
, 
isSigNaNB
;

54 
uöt_Á°16_t
 
uiN⁄sigA
, 
uiN⁄sigB
, 
uiMagA
, 
uiMagB
;

58 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 );

59 
isSigNaNB
 = 
	`so·Êﬂt_isSigNaNF16UI
–
uiB
 );

63 
uiN⁄sigA
 = 
uiA
 | 0x0200;

64 
uiN⁄sigB
 = 
uiB
 | 0x0200;

67 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

68 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

69 i‡–
isSigNaNA
 ) {

70 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîMag
;

71  
	`isNaNF16UI
–
uiB
 ) ? 
uiN⁄sigB
 : 
uiN⁄sigA
;

73  
	`isNaNF16UI
–
uiA
 ) ? 
uiN⁄sigA
 : 
uiN⁄sigB
;

76 
ªtu∫L¨gîMag
:

77 
uiMagA
 = 
uiA
 & 0x7FFF;

78 
uiMagB
 = 
uiB
 & 0x7FFF;

79 i‡–
uiMagA
 < 
uiMagB
 )  
uiN⁄sigB
;

80 i‡–
uiMagB
 < 
uiMagA
 )  
uiN⁄sigA
;

81  (
uiN⁄sigA
 < 
uiN⁄sigB
) ? uiNonsigA : uiNonsigB;

83 
	}
}

	@src/softfloat/source/8086/s_propagateNaNF32UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°32_t


51 
	$so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 )

53 
boﬁ
 
isSigNaNA
, 
isSigNaNB
;

54 
uöt_Á°32_t
 
uiN⁄sigA
, 
uiN⁄sigB
, 
uiMagA
, 
uiMagB
;

58 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 );

59 
isSigNaNB
 = 
	`so·Êﬂt_isSigNaNF32UI
–
uiB
 );

63 
uiN⁄sigA
 = 
uiA
 | 0x00400000;

64 
uiN⁄sigB
 = 
uiB
 | 0x00400000;

67 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

68 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

69 i‡–
isSigNaNA
 ) {

70 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîMag
;

71  
	`isNaNF32UI
–
uiB
 ) ? 
uiN⁄sigB
 : 
uiN⁄sigA
;

73  
	`isNaNF32UI
–
uiA
 ) ? 
uiN⁄sigA
 : 
uiN⁄sigB
;

76 
ªtu∫L¨gîMag
:

77 
uiMagA
 = 
uiA
 & 0x7FFFFFFF;

78 
uiMagB
 = 
uiB
 & 0x7FFFFFFF;

79 i‡–
uiMagA
 < 
uiMagB
 )  
uiN⁄sigB
;

80 i‡–
uiMagB
 < 
uiMagA
 )  
uiN⁄sigA
;

81  (
uiN⁄sigA
 < 
uiN⁄sigB
) ? uiNonsigA : uiNonsigB;

83 
	}
}

	@src/softfloat/source/8086/s_propagateNaNF64UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°64_t


51 
	$so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 )

53 
boﬁ
 
isSigNaNA
, 
isSigNaNB
;

54 
uöt_Á°64_t
 
uiN⁄sigA
, 
uiN⁄sigB
, 
uiMagA
, 
uiMagB
;

58 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 );

59 
isSigNaNB
 = 
	`so·Êﬂt_isSigNaNF64UI
–
uiB
 );

63 
uiN⁄sigA
 = 
uiA
 | 
	`UINT64_C
( 0x0008000000000000 );

64 
uiN⁄sigB
 = 
uiB
 | 
	`UINT64_C
( 0x0008000000000000 );

67 i‡–
isSigNaNA
 | 
isSigNaNB
 ) {

68 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

69 i‡–
isSigNaNA
 ) {

70 i‡–
isSigNaNB
 ) 
ªtu∫L¨gîMag
;

71  
	`isNaNF64UI
–
uiB
 ) ? 
uiN⁄sigB
 : 
uiN⁄sigA
;

73  
	`isNaNF64UI
–
uiA
 ) ? 
uiN⁄sigA
 : 
uiN⁄sigB
;

76 
ªtu∫L¨gîMag
:

77 
uiMagA
 = 
uiA
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF );

78 
uiMagB
 = 
uiB
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF );

79 i‡–
uiMagA
 < 
uiMagB
 )  
uiN⁄sigB
;

80 i‡–
uiMagB
 < 
uiMagA
 )  
uiN⁄sigA
;

81  (
uiN⁄sigA
 < 
uiN⁄sigB
) ? uiNonsigA : uiNonsigB;

83 
	}
}

	@src/softfloat/source/8086/softfloat_raiseFlags.c

37 
	~"∂©f‹m.h
"

38 
	~"so·Êﬂt.h
"

46 
	$so·Êﬂt_øi£Fœgs
–
uöt_Á°8_t
 
Êags
 )

49 
so·Êﬂt_ex˚±i⁄Fœgs
 |
Êags
;

51 
	}
}

	@src/softfloat/source/8086/specialize.h

37 #i‚de‡
•ecülize_h


38 
	#•ecülize_h
 1

	)

40 
	~<°dboﬁ.h
>

41 
	~<°döt.h
>

42 
	~"¥imôiveTy≥s.h
"

43 
	~"so·Êﬂt.h
"

48 
	#öô_dëe˘Tööess
 
so·Êﬂt_tööess_a·îRoundög


	)

54 
	#ui32_‰omPosOvîÊow
 0xFFFFFFFF

	)

55 
	#ui32_‰omNegOvîÊow
 0xFFFFFFFF

	)

56 
	#ui32_‰omNaN
 0xFFFFFFFF

	)

57 
	#i32_‰omPosOvîÊow
 (-0x7FFFFFFF - 1)

	)

58 
	#i32_‰omNegOvîÊow
 (-0x7FFFFFFF - 1)

	)

59 
	#i32_‰omNaN
 (-0x7FFFFFFF - 1)

	)

65 
	#ui64_‰omPosOvîÊow
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

66 
	#ui64_‰omNegOvîÊow
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

67 
	#ui64_‰omNaN
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

68 
	#i64_‰omPosOvîÊow
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

69 
	#i64_‰omNegOvîÊow
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

70 
	#i64_‰omNaN
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

76 
	scomm⁄NaN
 {

77 
boﬁ
 
	msign
;

78 #ifde‡
LITTLEENDIAN


79 
uöt64_t
 
	mv0
, 
	mv64
;

81 
uöt64_t
 
	mv64
, 
	mv0
;

88 
	#deÁu…NaNF16UI
 0xFE00

	)

95 
	#so·Êﬂt_isSigNaNF16UI
–
uiA
 ) ((((uiAË& 0x7E00Ë=0x7C00Ë&& ((uiAË& 0x01FF))

	)

103 
so·Êﬂt_f16UIToComm⁄NaN
–
uöt_Á°16_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

109 
uöt_Á°16_t
 
so·Êﬂt_comm⁄NaNToF16UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

117 
uöt_Á°16_t


118 
so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 );

123 
	#deÁu…NaNF32UI
 0xFFC00000

	)

130 
	#so·Êﬂt_isSigNaNF32UI
–
uiA
 ) ((((uiAË& 0x7FC00000Ë=0x7F800000Ë&& ((uiAË& 0x003FFFFF))

	)

138 
so·Êﬂt_f32UIToComm⁄NaN
–
uöt_Á°32_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

144 
uöt_Á°32_t
 
so·Êﬂt_comm⁄NaNToF32UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

152 
uöt_Á°32_t


153 
so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 );

158 
	#deÁu…NaNF64UI
 
	`UINT64_C
–0xFFF8000000000000 )

	)

165 
	#so·Êﬂt_isSigNaNF64UI
–
uiA
 ) ((((uiAË& 
	`UINT64_C
–0x7FF8000000000000 )Ë=UINT64_C–0x7FF0000000000000 )Ë&& ((uiAË& UINT64_C–0x0007FFFFFFFFFFFF )))

	)

173 
so·Êﬂt_f64UIToComm⁄NaN
–
uöt_Á°64_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

179 
uöt_Á°64_t
 
so·Êﬂt_comm⁄NaNToF64UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

187 
uöt_Á°64_t


188 
so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 );

193 
	#deÁu…NaNExtF80UI64
 0xFFFF

	)

194 
	#deÁu…NaNExtF80UI0
 
	`UINT64_C
–0xC000000000000000 )

	)

202 
	#so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 0x7FFFË=0x7FFFË&& ! ((uiA0Ë& 
	`UINT64_C
–0x4000000000000000 )Ë&& ((uiA0Ë& UINT64_C–0x3FFFFFFFFFFFFFFF )))

	)

204 #ifde‡
SOFTFLOAT_FAST_INT64


219 
so·Êﬂt_extF80UIToComm⁄NaN
(

220 
uöt_Á°16_t
 
uiA64
, 
uöt_Á°64_t
 
uiA0
, 
comm⁄NaN
 *
zPå
 );

227 
uöt128
 
so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

238 
uöt128


239 
so·Êﬂt_¥›ag©eNaNExtF80UI
(

240 
uöt_Á°16_t
 
uiA64
,

241 
uöt_Á°64_t
 
uiA0
,

242 
uöt_Á°16_t
 
uiB64
,

243 
uöt_Á°64_t
 
uiB0


249 
	#deÁu…NaNF128UI64
 
	`UINT64_C
–0xFFFF800000000000 )

	)

250 
	#deÁu…NaNF128UI0
 
	`UINT64_C
–0 )

	)

258 
	#so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 
	`UINT64_C
–0x7FFF800000000000 )Ë=UINT64_C–0x7FFF000000000000 )Ë&& ((uiA0Ë|| ((uiA64Ë& UINT64_C–0x00007FFFFFFFFFFF ))))

	)

268 
so·Êﬂt_f128UIToComm⁄NaN
(

269 
uöt_Á°64_t
 
uiA64
, uöt_Á°64_à
uiA0
, 
comm⁄NaN
 *
zPå
 );

275 
uöt128
 
so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 * );

286 
uöt128


287 
so·Êﬂt_¥›ag©eNaNF128UI
(

288 
uöt_Á°64_t
 
uiA64
,

289 
uöt_Á°64_t
 
uiA0
,

290 
uöt_Á°64_t
 
uiB64
,

291 
uöt_Á°64_t
 
uiB0


308 
so·Êﬂt_extF80MToComm⁄NaN
(

309 c⁄° 
extFlﬂt80M
 *
aSPå
, 
comm⁄NaN
 *
zPå
 );

317 
so·Êﬂt_comm⁄NaNToExtF80M
(

318 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 );

327 
so·Êﬂt_¥›ag©eNaNExtF80M
(

328 c⁄° 
extFlﬂt80M
 *
aSPå
,

329 c⁄° 
extFlﬂt80M
 *
bSPå
,

330 
extFlﬂt80M
 *
zSPå


336 
	#deÁu…NaNF128UI96
 0xFFFF8000

	)

337 
	#deÁu…NaNF128UI64
 0

	)

338 
	#deÁu…NaNF128UI32
 0

	)

339 
	#deÁu…NaNF128UI0
 0

	)

350 
so·Êﬂt_f128MToComm⁄NaN
–c⁄° 
uöt32_t
 *
aWPå
, 
comm⁄NaN
 *
zPå
 );

359 
so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 );

370 
so·Êﬂt_¥›ag©eNaNF128M
(

371 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 );

	@src/softfloat/source/ARM-VFPv2-defaultNaN/extF80M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80M_isSig«lögNaN
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

46 c⁄° 
extFlﬂt80M
 *
aSPå
;

47 
uöt64_t
 
uiA0
;

49 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

50 i‡–(
aSPå
->
signExp
 & 0x7FFFË!0x7FFF )  
Ál£
;

51 
uiA0
 = 
aSPå
->
signif
;

53 ! (
uiA0
 & 
	`UINT64_C
( 0x4000000000000000 ))

54 && (
uiA0
 & 
	`UINT64_C
( 0x3FFFFFFFFFFFFFFF));

56 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/f128M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"¥imôives.h
"

41 
	~"so·Êﬂt.h
"

45 
boﬁ
 
	$f128M_isSig«lögNaN
–c⁄° 
Êﬂt128_t
 *
aPå
 )

47 c⁄° 
uöt32_t
 *
aWPå
;

48 
uöt32_t
 
uiA96
;

50 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

51 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

52 i‡–(
uiA96
 & 0x7FFF8000Ë!0x7FFF0000 )  
Ál£
;

54 ((
uiA96
 & 0x00007FFF) != 0)

55 || ((
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

56 | 
aWPå
[
	`ödexW‹d
( 4, 0 )])

59 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToExtF80M.c

37 
	~"∂©f‹m.h
"

38 
	~"so·Êﬂt_ty≥s.h
"

40 
	#so·Êﬂt_comm⁄NaNToExtF80M
 
so·Êﬂt_comm⁄NaNToExtF80M


	)

41 
	~"•ecülize.h
"

49 
	$so·Êﬂt_comm⁄NaNToExtF80M
(

50 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 )

53 
zSPå
->
signExp
 = 
deÁu…NaNExtF80UI64
;

54 
zSPå
->
signif
 = 
deÁu…NaNExtF80UI0
;

56 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToExtF80UI.c

37 
	~"∂©f‹m.h
"

38 
	~"¥imôiveTy≥s.h
"

40 
	#so·Êﬂt_comm⁄NaNToExtF80UI
 
so·Êﬂt_comm⁄NaNToExtF80UI


	)

41 
	~"•ecülize.h
"

48 
uöt128
 
	$so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

50 
uöt128
 
uiZ
;

52 
uiZ
.
v64
 = 
deÁu…NaNExtF80UI64
;

53 
uiZ
.
v0
 = 
deÁu…NaNExtF80UI0
;

54  
uiZ
;

56 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 
	#so·Êﬂt_comm⁄NaNToF128M
 
so·Êﬂt_comm⁄NaNToF128M


	)

42 
	~"•ecülize.h
"

51 
	$so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 )

54 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
deÁu…NaNF128UI96
;

55 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
deÁu…NaNF128UI64
;

56 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
deÁu…NaNF128UI32
;

57 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
deÁu…NaNF128UI0
;

59 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF128UI.c

37 
	~"∂©f‹m.h
"

38 
	~"¥imôiveTy≥s.h
"

40 
	#so·Êﬂt_comm⁄NaNToF128UI
 
so·Êﬂt_comm⁄NaNToF128UI


	)

41 
	~"•ecülize.h
"

47 
uöt128
 
	$so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

49 
uöt128
 
uiZ
;

51 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

52 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

53  
uiZ
;

55 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF16UI.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF32UI.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF64UI.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_extF80MToCommonNaN.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_extF80UIToCommonNaN.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_f128MToCommonNaN.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_f128UIToCommonNaN.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_f16UIToCommonNaN.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_f32UIToCommonNaN.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_f64UIToCommonNaN.c

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNExtF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

50 
	$so·Êﬂt_¥›ag©eNaNExtF80M
(

51 c⁄° 
extFlﬂt80M
 *
aSPå
,

52 c⁄° 
extFlﬂt80M
 *
bSPå
,

53 
extFlﬂt80M
 *
zSPå


56 
uöt_Á°16_t
 
ui64
;

57 
uöt_Á°64_t
 
ui0
;

59 
ui64
 = 
aSPå
->
signExp
;

60 
ui0
 = 
aSPå
->
signif
;

62 
	`so·Êﬂt_isSigNaNExtF80UI
–
ui64
, 
ui0
 )

63 || (
bSPå


64 && (
ui64
 = 
bSPå
->
signExp
,

65 
ui0
 = 
bSPå
->
signif
,

66 
	`so·Êﬂt_isSigNaNExtF80UI
–
ui64
, 
ui0
 )))

68 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

70 
zSPå
->
signExp
 = 
deÁu…NaNExtF80UI64
;

71 
zSPå
->
signif
 = 
deÁu…NaNExtF80UI0
;

73 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNExtF80UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
uöt128


53 
	$so·Êﬂt_¥›ag©eNaNExtF80UI
(

54 
uöt_Á°16_t
 
uiA64
,

55 
uöt_Á°64_t
 
uiA0
,

56 
uöt_Á°16_t
 
uiB64
,

57 
uöt_Á°64_t
 
uiB0


60 
uöt128
 
uiZ
;

63 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 )

64 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 )

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

68 
uiZ
.
v64
 = 
deÁu…NaNExtF80UI64
;

69 
uiZ
.
v0
 = 
deÁu…NaNExtF80UI0
;

70  
uiZ
;

72 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
	$so·Êﬂt_¥›ag©eNaNF128M
(

53 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 )

57 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 );

58 || (
bWPå
 && 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *) bWPtr ))

60 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
deÁu…NaNF128UI96
;

63 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
deÁu…NaNF128UI64
;

64 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
deÁu…NaNF128UI32
;

65 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
deÁu…NaNF128UI0
;

67 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF128UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
uöt128


53 
	$so·Êﬂt_¥›ag©eNaNF128UI
(

54 
uöt_Á°64_t
 
uiA64
,

55 
uöt_Á°64_t
 
uiA0
,

56 
uöt_Á°64_t
 
uiB64
,

57 
uöt_Á°64_t
 
uiB0


60 
uöt128
 
uiZ
;

63 
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 )

64 || 
	`so·Êﬂt_isSigNaNF128UI
–
uiB64
, 
uiB0
 )

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

68 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

69 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

70  
uiZ
;

72 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF16UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
uöt_Á°16_t


49 
	$so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 )

52 i‡–
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 ) || so·Êﬂt_isSigNaNF16UI–
uiB
 ) ) {

53 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

55  
deÁu…NaNF16UI
;

57 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF32UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
uöt_Á°32_t


49 
	$so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 )

52 i‡–
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 ) || so·Êﬂt_isSigNaNF32UI–
uiB
 ) ) {

53 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

55  
deÁu…NaNF32UI
;

57 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF64UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
uöt_Á°64_t


49 
	$so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 )

52 i‡–
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 ) || so·Êﬂt_isSigNaNF64UI–
uiB
 ) ) {

53 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

55  
deÁu…NaNF64UI
;

57 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/softfloat_raiseFlags.c

37 
	~"∂©f‹m.h
"

38 
	~"so·Êﬂt.h
"

46 
	$so·Êﬂt_øi£Fœgs
–
uöt_Á°8_t
 
Êags
 )

49 
so·Êﬂt_ex˚±i⁄Fœgs
 |
Êags
;

51 
	}
}

	@src/softfloat/source/ARM-VFPv2-defaultNaN/specialize.h

37 #i‚de‡
•ecülize_h


38 
	#•ecülize_h
 1

	)

40 
	~<°dboﬁ.h
>

41 
	~<°döt.h
>

42 
	~"¥imôiveTy≥s.h
"

43 
	~"so·Êﬂt.h
"

48 
	#öô_dëe˘Tööess
 
so·Êﬂt_tööess_bef‹eRoundög


	)

54 
	#ui32_‰omPosOvîÊow
 0xFFFFFFFF

	)

55 
	#ui32_‰omNegOvîÊow
 0

	)

56 
	#ui32_‰omNaN
 0

	)

57 
	#i32_‰omPosOvîÊow
 0x7FFFFFFF

	)

58 
	#i32_‰omNegOvîÊow
 (-0x7FFFFFFF - 1)

	)

59 
	#i32_‰omNaN
 0

	)

65 
	#ui64_‰omPosOvîÊow
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

66 
	#ui64_‰omNegOvîÊow
 0

	)

67 
	#ui64_‰omNaN
 0

	)

68 
	#i64_‰omPosOvîÊow
 
	`INT64_C
–0x7FFFFFFFFFFFFFFF )

	)

69 
	#i64_‰omNegOvîÊow
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

70 
	#i64_‰omNaN
 0

	)

76 
	scomm⁄NaN
 { 
	m_unu£d
; };

81 
	#deÁu…NaNF16UI
 0x7E00

	)

88 
	#so·Êﬂt_isSigNaNF16UI
–
uiA
 ) ((((uiAË& 0x7E00Ë=0x7C00Ë&& ((uiAË& 0x01FF))

	)

96 
	#so·Êﬂt_f16UIToComm⁄NaN
–
uiA
, 
zPå
 ) i‡–! ((uiAË& 0x0200ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

102 
	#so·Êﬂt_comm⁄NaNToF16UI
–
aPå
 ) ((
uöt_Á°16_t
Ë
deÁu…NaNF16UI
)

	)

110 
uöt_Á°16_t


111 
so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 );

116 
	#deÁu…NaNF32UI
 0x7FC00000

	)

123 
	#so·Êﬂt_isSigNaNF32UI
–
uiA
 ) ((((uiAË& 0x7FC00000Ë=0x7F800000Ë&& ((uiAË& 0x003FFFFF))

	)

131 
	#so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, 
zPå
 ) i‡–! ((uiAË& 0x00400000ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

137 
	#so·Êﬂt_comm⁄NaNToF32UI
–
aPå
 ) ((
uöt_Á°32_t
Ë
deÁu…NaNF32UI
)

	)

145 
uöt_Á°32_t


146 
so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 );

151 
	#deÁu…NaNF64UI
 
	`UINT64_C
–0x7FF8000000000000 )

	)

158 
	#so·Êﬂt_isSigNaNF64UI
–
uiA
 ) ((((uiAË& 
	`UINT64_C
–0x7FF8000000000000 )Ë=UINT64_C–0x7FF0000000000000 )Ë&& ((uiAË& UINT64_C–0x0007FFFFFFFFFFFF )))

	)

166 
	#so·Êﬂt_f64UIToComm⁄NaN
–
uiA
, 
zPå
 ) i‡–! ((uiAË& 
	`UINT64_C
–0x0008000000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

172 
	#so·Êﬂt_comm⁄NaNToF64UI
–
aPå
 ) ((
uöt_Á°64_t
Ë
deÁu…NaNF64UI
)

	)

180 
uöt_Á°64_t


181 
so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 );

186 
	#deÁu…NaNExtF80UI64
 0x7FFF

	)

187 
	#deÁu…NaNExtF80UI0
 
	`UINT64_C
–0xC000000000000000 )

	)

195 
	#so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 0x7FFFË=0x7FFFË&& ! ((uiA0Ë& 
	`UINT64_C
–0x4000000000000000 )Ë&& ((uiA0Ë& UINT64_C–0x3FFFFFFFFFFFFFFF )))

	)

197 #ifde‡
SOFTFLOAT_FAST_INT64


211 
	#so·Êﬂt_extF80UIToComm⁄NaN
–
uiA64
, 
uiA0
, 
zPå
 ) i‡–! ((uiA0Ë& 
	`UINT64_C
–0x4000000000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

218 #i‡
deföed
 
INLINE
 && ! deföed 
so·Êﬂt_comm⁄NaNToExtF80UI


219 
INLINE


220 
uöt128
 
	$so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

222 
uöt128
 
uiZ
;

223 
uiZ
.
v64
 = 
deÁu…NaNExtF80UI64
;

224 
uiZ
.
v0
 = 
deÁu…NaNExtF80UI0
;

225  
uiZ
;

226 
	}
}

228 
uöt128
 
so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

240 
uöt128


241 
so·Êﬂt_¥›ag©eNaNExtF80UI
(

242 
uöt_Á°16_t
 
uiA64
,

243 
uöt_Á°64_t
 
uiA0
,

244 
uöt_Á°16_t
 
uiB64
,

245 
uöt_Á°64_t
 
uiB0


251 
	#deÁu…NaNF128UI64
 
	`UINT64_C
–0x7FFF800000000000 )

	)

252 
	#deÁu…NaNF128UI0
 
	`UINT64_C
–0 )

	)

260 
	#so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 
	`UINT64_C
–0x7FFF800000000000 )Ë=UINT64_C–0x7FFF000000000000 )Ë&& ((uiA0Ë|| ((uiA64Ë& UINT64_C–0x00007FFFFFFFFFFF ))))

	)

269 
	#so·Êﬂt_f128UIToComm⁄NaN
–
uiA64
, 
uiA0
, 
zPå
 ) i‡–! ((uiA64Ë& 
	`UINT64_C
–0x0000800000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

275 #i‡
deföed
 
INLINE
 && ! deföed 
so·Êﬂt_comm⁄NaNToF128UI


276 
INLINE


277 
uöt128
 
	$so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

279 
uöt128
 
uiZ
;

280 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

281 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

282  
uiZ
;

283 
	}
}

285 
uöt128
 
so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 * );

297 
uöt128


298 
so·Êﬂt_¥›ag©eNaNF128UI
(

299 
uöt_Á°64_t
 
uiA64
,

300 
uöt_Á°64_t
 
uiA0
,

301 
uöt_Á°64_t
 
uiB64
,

302 
uöt_Á°64_t
 
uiB0


318 
	#so·Êﬂt_extF80MToComm⁄NaN
–
aSPå
, 
zPå
 ) i‡–! (◊SPå)->
signif
 & 
	`UINT64_C
–0x4000000000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

325 #i‡
deföed
 
INLINE
 && ! deföed 
so·Êﬂt_comm⁄NaNToExtF80M


326 
INLINE


328 
	$so·Êﬂt_comm⁄NaNToExtF80M
(

329 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 )

331 
zSPå
->
signExp
 = 
deÁu…NaNExtF80UI64
;

332 
zSPå
->
signif
 = 
deÁu…NaNExtF80UI0
;

333 
	}
}

336 
so·Êﬂt_comm⁄NaNToExtF80M
(

337 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 );

347 
so·Êﬂt_¥›ag©eNaNExtF80M
(

348 c⁄° 
extFlﬂt80M
 *
aSPå
,

349 c⁄° 
extFlﬂt80M
 *
bSPå
,

350 
extFlﬂt80M
 *
zSPå


356 
	#deÁu…NaNF128UI96
 0x7FFF8000

	)

357 
	#deÁu…NaNF128UI64
 0

	)

358 
	#deÁu…NaNF128UI32
 0

	)

359 
	#deÁu…NaNF128UI0
 0

	)

369 
	#so·Êﬂt_f128MToComm⁄NaN
–
aWPå
, 
zPå
 ) i‡–! (◊WPå)[
	`ödexW‹dHi
–4 )] & 
	`UINT64_C
–0x0000800000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

377 #i‡
deföed
 
INLINE
 && ! deföed 
so·Êﬂt_comm⁄NaNToF128M


378 
INLINE


380 
	$so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 )

382 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
deÁu…NaNF128UI96
;

383 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
deÁu…NaNF128UI64
;

384 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
deÁu…NaNF128UI32
;

385 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
deÁu…NaNF128UI0
;

386 
	}
}

389 
so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 );

401 
so·Êﬂt_¥›ag©eNaNF128M
(

402 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 );

	@src/softfloat/source/ARM-VFPv2/extF80M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80M_isSig«lögNaN
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

46 c⁄° 
extFlﬂt80M
 *
aSPå
;

47 
uöt64_t
 
uiA0
;

49 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

50 i‡–(
aSPå
->
signExp
 & 0x7FFFË!0x7FFF )  
Ál£
;

51 
uiA0
 = 
aSPå
->
signif
;

53 ! (
uiA0
 & 
	`UINT64_C
( 0x4000000000000000 ))

54 && (
uiA0
 & 
	`UINT64_C
( 0x3FFFFFFFFFFFFFFF));

56 
	}
}

	@src/softfloat/source/ARM-VFPv2/f128M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"¥imôives.h
"

41 
	~"so·Êﬂt.h
"

45 
boﬁ
 
	$f128M_isSig«lögNaN
–c⁄° 
Êﬂt128_t
 *
aPå
 )

47 c⁄° 
uöt32_t
 *
aWPå
;

48 
uöt32_t
 
uiA96
;

50 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

51 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

52 i‡–(
uiA96
 & 0x7FFF8000Ë!0x7FFF0000 )  
Ál£
;

54 ((
uiA96
 & 0x00007FFF) != 0)

55 || ((
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

56 | 
aWPå
[
	`ödexW‹d
( 4, 0 )])

59 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_commonNaNToExtF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

48 
	$so·Êﬂt_comm⁄NaNToExtF80M
(

49 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 )

52 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
aPå
->
sign
, 0x7FFF );

53 
zSPå
->
signif
 = 
	`UINT64_C
–0xC000000000000000 ) | 
aPå
->
v64
>>1;

55 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_commonNaNToExtF80UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

47 
uöt128
 
	$so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

49 
uöt128
 
uiZ
;

51 
uiZ
.
v64
 = (
uöt_Á°16_t
Ë
aPå
->
sign
<<15 | 0x7FFF;

52 
uiZ
.
v0
 = 
	`UINT64_C
–0xC000000000000000 ) | 
aPå
->
v64
>>1;

53  
uiZ
;

55 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_commonNaNToF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

49 
	$so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 )

52 
	`so·Êﬂt_sh‹tShi·Right128M
–(c⁄° 
uöt32_t
 *Ë&
aPå
->
v0
, 16, 
zWPå
 );

53 
zWPå
[
	`ödexW‹dHi
–4 )] |(
uöt32_t
Ë
aPå
->
sign
<<31 | 0x7FFF8000;

55 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_commonNaNToF128UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

46 
uöt128
 
	$so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48 
uöt128
 
uiZ
;

50 
uiZ
 = 
	`so·Êﬂt_sh‹tShi·Right128
–
aPå
->
v64
,áPå->
v0
, 16 );

51 
uiZ
.
v64
 |(
uöt_Á°64_t
Ë
aPå
->
sign
<<63 | 
	`UINT64_C
( 0x7FFF800000000000 );

52  
uiZ
;

54 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_commonNaNToF16UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°16_t
 
	$so·Êﬂt_comm⁄NaNToF16UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48  (
uöt_Á°16_t
Ë
aPå
->
sign
<<15 | 0x7E00 |áPå->
v64
>>54;

50 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_commonNaNToF32UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°32_t
 
	$so·Êﬂt_comm⁄NaNToF32UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

48  (
uöt_Á°32_t
Ë
aPå
->
sign
<<31 | 0x7FC00000 |áPå->
v64
>>41;

50 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_commonNaNToF64UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

45 
uöt_Á°64_t
 
	$so·Êﬂt_comm⁄NaNToF64UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

49 (
uöt_Á°64_t
Ë
aPå
->
sign
<<63 | 
	`UINT64_C
( 0x7FF8000000000000 )

50 | 
aPå
->
v64
>>12;

52 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_extF80MToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

50 
	$so·Êﬂt_extF80MToComm⁄NaN
(

51 c⁄° 
extFlﬂt80M
 *
aSPå
, 
comm⁄NaN
 *
zPå
 )

54 i‡–
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
aSPå
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57 
zPå
->
sign
 = 
	`signExtF80UI64
–
aSPå
->
signExp
 );

58 
zPå
->
v64
 = 
aSPå
->
signif
<<1;

59 
zPå
->
v0
 = 0;

61 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_extF80UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

50 
	$so·Êﬂt_extF80UIToComm⁄NaN
(

51 
uöt_Á°16_t
 
uiA64
, 
uöt_Á°64_t
 
uiA0
, 
comm⁄NaN
 *
zPå
 )

54 i‡–
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57 
zPå
->
sign
 = 
uiA64
>>15;

58 
zPå
->
v64
 = 
uiA0
<<1;

59 
zPå
->
v0
 = 0;

61 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_f128MToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
	$so·Êﬂt_f128MToComm⁄NaN
–c⁄° 
uöt32_t
 *
aWPå
, 
comm⁄NaN
 *
zPå
 )

55 i‡–
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58 
zPå
->
sign
 = 
aWPå
[
	`ödexW‹dHi
( 4 )]>>31;

59 
	`so·Êﬂt_sh‹tShi·Le·128M
–
aWPå
, 16, (
uöt32_t
 *Ë&
zPå
->
v0
 );

61 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_f128UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

51 
	$so·Êﬂt_f128UIToComm⁄NaN
(

52 
uöt_Á°64_t
 
uiA64
, uöt_Á°64_à
uiA0
, 
comm⁄NaN
 *
zPå
 )

54 
uöt128
 
NaNSig
;

56 i‡–
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

59 
NaNSig
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
uiA64
, 
uiA0
, 16 );

60 
zPå
->
sign
 = 
uiA64
>>63;

61 
zPå
->
v64
 = 
NaNSig
.v64;

62 
zPå
->
v0
 = 
NaNSig
.v0;

64 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_f16UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f16UIToComm⁄NaN
–
uöt_Á°16_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>15;

55 
zPå
->
v64
 = (
uöt_Á°64_t
Ë
uiA
<<54;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_f32UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f32UIToComm⁄NaN
–
uöt_Á°32_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>31;

55 
zPå
->
v64
 = (
uöt_Á°64_t
Ë
uiA
<<41;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_f64UIToCommonNaN.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
	$so·Êﬂt_f64UIToComm⁄NaN
–
uöt_Á°64_t
 
uiA
, 
comm⁄NaN
 *
zPå
 )

51 i‡–
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 ) ) {

52 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

54 
zPå
->
sign
 = 
uiA
>>63;

55 
zPå
->
v64
 = 
uiA
<<12;

56 
zPå
->
v0
 = 0;

58 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_propagateNaNExtF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

51 
	$so·Êﬂt_¥›ag©eNaNExtF80M
(

52 c⁄° 
extFlﬂt80M
 *
aSPå
,

53 c⁄° 
extFlﬂt80M
 *
bSPå
,

54 
extFlﬂt80M
 *
zSPå


57 c⁄° 
extFlﬂt80M
 *
sPå
;

58 
boﬁ
 
isSigNaNA
;

59 
uöt_Á°16_t
 
uiZ64
;

60 
uöt_Á°64_t
 
uiZ0
;

62 
sPå
 = 
aSPå
;

63 
isSigNaNA
 = 
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
aSPå
 );

65 
isSigNaNA


66 || (
bSPå


67 && 
	`extF80M_isSig«lögNaN
–(c⁄° 
extFlﬂt80_t
 *Ë
bSPå
 ))

69 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

70 i‡–
isSigNaNA
 ) 
c›yN⁄sig
;

71 
c›yN⁄sigB
;

73 
uiZ64
 = 
sPå
->
signExp
;

74 
uiZ0
 = 
sPå
->
signif
;

75 i‡–
	`isNaNExtF80UI
–
uiZ64
, 
uiZ0
 ) ) 
ªtu∫N⁄sig
;

76 
c›yN⁄sigB
:

77 
sPå
 = 
bSPå
;

78 
c›yN⁄sig
:

79 
uiZ64
 = 
sPå
->
signExp
;

80 
uiZ0
 = 
sPå
->
signif
;

81 
ªtu∫N⁄sig
:

82 
zSPå
->
signExp
 = 
uiZ64
;

83 
zSPå
->
signif
 = 
uiZ0
 | 
	`UINT64_C
( 0xC000000000000000 );

85 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_propagateNaNExtF80UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
uöt128


54 
	$so·Êﬂt_¥›ag©eNaNExtF80UI
(

55 
uöt_Á°16_t
 
uiA64
,

56 
uöt_Á°64_t
 
uiA0
,

57 
uöt_Á°16_t
 
uiB64
,

58 
uöt_Á°64_t
 
uiB0


61 
boﬁ
 
isSigNaNA
;

62 
uöt128
 
uiZ
;

64 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 );

65 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 ) ) {

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

67 i‡–
isSigNaNA
 ) 
ªtu∫N⁄sigA
;

68 
ªtu∫N⁄sigB
;

70 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) ) {

71 
ªtu∫N⁄sigA
:

72 
uiZ
.
v64
 = 
uiA64
;

73 
uiZ
.
v0
 = 
uiA0
;

75 
ªtu∫N⁄sigB
:

76 
uiZ
.
v64
 = 
uiB64
;

77 
uiZ
.
v0
 = 
uiB0
;

79 
uiZ
.
v0
 | 
	`UINT64_C
( 0xC000000000000000 );

80  
uiZ
;

82 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_propagateNaNF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
	$so·Êﬂt_¥›ag©eNaNF128M
(

54 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 )

56 c⁄° 
uöt32_t
 *
±r
;

57 
boﬁ
 
isSigNaNA
;

59 
±r
 = 
aWPå
;

60 
isSigNaNA
 = 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 );

62 
isSigNaNA


63 || (
bWPå
 && 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *) bWPtr ))

65 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

66 i‡–! 
isSigNaNA
 ) 
±r
 = 
bWPå
;

67 
c›yN⁄sig
;

69 i‡–! 
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) ) 
±r
 = 
bWPå
;

70 
c›yN⁄sig
:

71 
zWPå
[
	`ödexW‹dHi
–4 )] = 
±r
[indexWordHi( 4 )] | 0x00008000;

72 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
±r
[indexWord( 4, 2 )];

73 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
±r
[indexWord( 4, 1 )];

74 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
±r
[indexWord( 4, 0 )];

76 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_propagateNaNF128UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

53 
uöt128


54 
	$so·Êﬂt_¥›ag©eNaNF128UI
(

55 
uöt_Á°64_t
 
uiA64
,

56 
uöt_Á°64_t
 
uiA0
,

57 
uöt_Á°64_t
 
uiB64
,

58 
uöt_Á°64_t
 
uiB0


61 
boﬁ
 
isSigNaNA
;

62 
uöt128
 
uiZ
;

64 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 );

65 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNF128UI
–
uiB64
, 
uiB0
 ) ) {

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

67 i‡–
isSigNaNA
 ) 
ªtu∫N⁄sigA
;

68 
ªtu∫N⁄sigB
;

70 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) ) {

71 
ªtu∫N⁄sigA
:

72 
uiZ
.
v64
 = 
uiA64
;

73 
uiZ
.
v0
 = 
uiA0
;

75 
ªtu∫N⁄sigB
:

76 
uiZ
.
v64
 = 
uiB64
;

77 
uiZ
.
v0
 = 
uiB0
;

79 
uiZ
.
v64
 |
	`UINT64_C
( 0x0000800000000000 );

80  
uiZ
;

82 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_propagateNaNF16UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°16_t


51 
	$so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 )

53 
boﬁ
 
isSigNaNA
;

55 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 );

56 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNF16UI
–
uiB
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58  (
isSigNaNA
 ? 
uiA
 : 
uiB
) | 0x0200;

60  
	`isNaNF16UI
–
uiA
 ) ? uiA : 
uiB
;

62 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_propagateNaNF32UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°32_t


51 
	$so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 )

53 
boﬁ
 
isSigNaNA
;

55 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 );

56 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNF32UI
–
uiB
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58  (
isSigNaNA
 ? 
uiA
 : 
uiB
) | 0x00400000;

60  
	`isNaNF32UI
–
uiA
 ) ? uiA : 
uiB
;

62 
	}
}

	@src/softfloat/source/ARM-VFPv2/s_propagateNaNF64UI.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

50 
uöt_Á°64_t


51 
	$so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 )

53 
boﬁ
 
isSigNaNA
;

55 
isSigNaNA
 = 
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 );

56 i‡–
isSigNaNA
 || 
	`so·Êﬂt_isSigNaNF64UI
–
uiB
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58  (
isSigNaNA
 ? 
uiA
 : 
uiB
Ë| 
	`UINT64_C
( 0x0008000000000000 );

60  
	`isNaNF64UI
–
uiA
 ) ? uiA : 
uiB
;

62 
	}
}

	@src/softfloat/source/ARM-VFPv2/softfloat_raiseFlags.c

37 
	~"∂©f‹m.h
"

38 
	~"so·Êﬂt.h
"

46 
	$so·Êﬂt_øi£Fœgs
–
uöt_Á°8_t
 
Êags
 )

49 
so·Êﬂt_ex˚±i⁄Fœgs
 |
Êags
;

51 
	}
}

	@src/softfloat/source/ARM-VFPv2/specialize.h

37 #i‚de‡
•ecülize_h


38 
	#•ecülize_h
 1

	)

40 
	~<°dboﬁ.h
>

41 
	~<°döt.h
>

42 
	~"¥imôiveTy≥s.h
"

43 
	~"so·Êﬂt.h
"

48 
	#öô_dëe˘Tööess
 
so·Êﬂt_tööess_bef‹eRoundög


	)

54 
	#ui32_‰omPosOvîÊow
 0xFFFFFFFF

	)

55 
	#ui32_‰omNegOvîÊow
 0

	)

56 
	#ui32_‰omNaN
 0

	)

57 
	#i32_‰omPosOvîÊow
 0x7FFFFFFF

	)

58 
	#i32_‰omNegOvîÊow
 (-0x7FFFFFFF - 1)

	)

59 
	#i32_‰omNaN
 0

	)

65 
	#ui64_‰omPosOvîÊow
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

66 
	#ui64_‰omNegOvîÊow
 0

	)

67 
	#ui64_‰omNaN
 0

	)

68 
	#i64_‰omPosOvîÊow
 
	`INT64_C
–0x7FFFFFFFFFFFFFFF )

	)

69 
	#i64_‰omNegOvîÊow
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

70 
	#i64_‰omNaN
 0

	)

76 
	scomm⁄NaN
 {

77 
boﬁ
 
	msign
;

78 #ifde‡
LITTLEENDIAN


79 
uöt64_t
 
	mv0
, 
	mv64
;

81 
uöt64_t
 
	mv64
, 
	mv0
;

88 
	#deÁu…NaNF16UI
 0x7E00

	)

95 
	#so·Êﬂt_isSigNaNF16UI
–
uiA
 ) ((((uiAË& 0x7E00Ë=0x7C00Ë&& ((uiAË& 0x01FF))

	)

103 
so·Êﬂt_f16UIToComm⁄NaN
–
uöt_Á°16_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

109 
uöt_Á°16_t
 
so·Êﬂt_comm⁄NaNToF16UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

117 
uöt_Á°16_t


118 
so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 );

123 
	#deÁu…NaNF32UI
 0x7FC00000

	)

130 
	#so·Êﬂt_isSigNaNF32UI
–
uiA
 ) ((((uiAË& 0x7FC00000Ë=0x7F800000Ë&& ((uiAË& 0x003FFFFF))

	)

138 
so·Êﬂt_f32UIToComm⁄NaN
–
uöt_Á°32_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

144 
uöt_Á°32_t
 
so·Êﬂt_comm⁄NaNToF32UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

152 
uöt_Á°32_t


153 
so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 );

158 
	#deÁu…NaNF64UI
 
	`UINT64_C
–0x7FF8000000000000 )

	)

165 
	#so·Êﬂt_isSigNaNF64UI
–
uiA
 ) ((((uiAË& 
	`UINT64_C
–0x7FF8000000000000 )Ë=UINT64_C–0x7FF0000000000000 )Ë&& ((uiAË& UINT64_C–0x0007FFFFFFFFFFFF )))

	)

173 
so·Êﬂt_f64UIToComm⁄NaN
–
uöt_Á°64_t
 
uiA
, 
comm⁄NaN
 *
zPå
 );

179 
uöt_Á°64_t
 
so·Êﬂt_comm⁄NaNToF64UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

187 
uöt_Á°64_t


188 
so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 );

193 
	#deÁu…NaNExtF80UI64
 0x7FFF

	)

194 
	#deÁu…NaNExtF80UI0
 
	`UINT64_C
–0xC000000000000000 )

	)

202 
	#so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 0x7FFFË=0x7FFFË&& ! ((uiA0Ë& 
	`UINT64_C
–0x4000000000000000 )Ë&& ((uiA0Ë& UINT64_C–0x3FFFFFFFFFFFFFFF )))

	)

204 #ifde‡
SOFTFLOAT_FAST_INT64


219 
so·Êﬂt_extF80UIToComm⁄NaN
(

220 
uöt_Á°16_t
 
uiA64
, 
uöt_Á°64_t
 
uiA0
, 
comm⁄NaN
 *
zPå
 );

227 
uöt128
 
so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

238 
uöt128


239 
so·Êﬂt_¥›ag©eNaNExtF80UI
(

240 
uöt_Á°16_t
 
uiA64
,

241 
uöt_Á°64_t
 
uiA0
,

242 
uöt_Á°16_t
 
uiB64
,

243 
uöt_Á°64_t
 
uiB0


249 
	#deÁu…NaNF128UI64
 
	`UINT64_C
–0x7FFF800000000000 )

	)

250 
	#deÁu…NaNF128UI0
 
	`UINT64_C
–0 )

	)

258 
	#so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 
	`UINT64_C
–0x7FFF800000000000 )Ë=UINT64_C–0x7FFF000000000000 )Ë&& ((uiA0Ë|| ((uiA64Ë& UINT64_C–0x00007FFFFFFFFFFF ))))

	)

268 
so·Êﬂt_f128UIToComm⁄NaN
(

269 
uöt_Á°64_t
 
uiA64
, uöt_Á°64_à
uiA0
, 
comm⁄NaN
 *
zPå
 );

275 
uöt128
 
so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 * );

286 
uöt128


287 
so·Êﬂt_¥›ag©eNaNF128UI
(

288 
uöt_Á°64_t
 
uiA64
,

289 
uöt_Á°64_t
 
uiA0
,

290 
uöt_Á°64_t
 
uiB64
,

291 
uöt_Á°64_t
 
uiB0


308 
so·Êﬂt_extF80MToComm⁄NaN
(

309 c⁄° 
extFlﬂt80M
 *
aSPå
, 
comm⁄NaN
 *
zPå
 );

317 
so·Êﬂt_comm⁄NaNToExtF80M
(

318 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 );

327 
so·Êﬂt_¥›ag©eNaNExtF80M
(

328 c⁄° 
extFlﬂt80M
 *
aSPå
,

329 c⁄° 
extFlﬂt80M
 *
bSPå
,

330 
extFlﬂt80M
 *
zSPå


336 
	#deÁu…NaNF128UI96
 0x7FFF8000

	)

337 
	#deÁu…NaNF128UI64
 0

	)

338 
	#deÁu…NaNF128UI32
 0

	)

339 
	#deÁu…NaNF128UI0
 0

	)

350 
so·Êﬂt_f128MToComm⁄NaN
–c⁄° 
uöt32_t
 *
aWPå
, 
comm⁄NaN
 *
zPå
 );

359 
so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 );

370 
so·Êﬂt_¥›ag©eNaNF128M
(

371 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 );

	@src/softfloat/source/RISCV/extF80M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80M_isSig«lögNaN
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

46 c⁄° 
extFlﬂt80M
 *
aSPå
;

47 
uöt64_t
 
uiA0
;

49 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

50 i‡–(
aSPå
->
signExp
 & 0x7FFFË!0x7FFF )  
Ál£
;

51 
uiA0
 = 
aSPå
->
signif
;

53 ! (
uiA0
 & 
	`UINT64_C
( 0x4000000000000000 ))

54 && (
uiA0
 & 
	`UINT64_C
( 0x3FFFFFFFFFFFFFFF));

56 
	}
}

	@src/softfloat/source/RISCV/f128M_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"¥imôives.h
"

41 
	~"so·Êﬂt.h
"

45 
boﬁ
 
	$f128M_isSig«lögNaN
–c⁄° 
Êﬂt128_t
 *
aPå
 )

47 c⁄° 
uöt32_t
 *
aWPå
;

48 
uöt32_t
 
uiA96
;

50 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

51 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

52 i‡–(
uiA96
 & 0x7FFF8000Ë!0x7FFF0000 )  
Ál£
;

54 ((
uiA96
 & 0x00007FFF) != 0)

55 || ((
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

56 | 
aWPå
[
	`ödexW‹d
( 4, 0 )])

59 
	}
}

	@src/softfloat/source/RISCV/s_bf16UIToCommonNaN.c

	@src/softfloat/source/RISCV/s_commonNaNToBF16UI.c

	@src/softfloat/source/RISCV/s_commonNaNToExtF80M.c

37 
	~"∂©f‹m.h
"

38 
	~"so·Êﬂt_ty≥s.h
"

40 
	#so·Êﬂt_comm⁄NaNToExtF80M
 
so·Êﬂt_comm⁄NaNToExtF80M


	)

41 
	~"•ecülize.h
"

49 
	$so·Êﬂt_comm⁄NaNToExtF80M
(

50 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 )

53 
zSPå
->
signExp
 = 
deÁu…NaNExtF80UI64
;

54 
zSPå
->
signif
 = 
deÁu…NaNExtF80UI0
;

56 
	}
}

	@src/softfloat/source/RISCV/s_commonNaNToExtF80UI.c

37 
	~"∂©f‹m.h
"

38 
	~"¥imôiveTy≥s.h
"

40 
	#so·Êﬂt_comm⁄NaNToExtF80UI
 
so·Êﬂt_comm⁄NaNToExtF80UI


	)

41 
	~"•ecülize.h
"

48 
uöt128
 
	$so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

50 
uöt128
 
uiZ
;

52 
uiZ
.
v64
 = 
deÁu…NaNExtF80UI64
;

53 
uiZ
.
v0
 = 
deÁu…NaNExtF80UI0
;

54  
uiZ
;

56 
	}
}

	@src/softfloat/source/RISCV/s_commonNaNToF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 
	#so·Êﬂt_comm⁄NaNToF128M
 
so·Êﬂt_comm⁄NaNToF128M


	)

42 
	~"•ecülize.h
"

51 
	$so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 )

54 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
deÁu…NaNF128UI96
;

55 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
deÁu…NaNF128UI64
;

56 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
deÁu…NaNF128UI32
;

57 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
deÁu…NaNF128UI0
;

59 
	}
}

	@src/softfloat/source/RISCV/s_commonNaNToF128UI.c

37 
	~"∂©f‹m.h
"

38 
	~"¥imôiveTy≥s.h
"

40 
	#so·Êﬂt_comm⁄NaNToF128UI
 
so·Êﬂt_comm⁄NaNToF128UI


	)

41 
	~"•ecülize.h
"

47 
uöt128
 
	$so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

49 
uöt128
 
uiZ
;

51 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

52 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

53  
uiZ
;

55 
	}
}

	@src/softfloat/source/RISCV/s_commonNaNToF16UI.c

	@src/softfloat/source/RISCV/s_commonNaNToF32UI.c

	@src/softfloat/source/RISCV/s_commonNaNToF64UI.c

	@src/softfloat/source/RISCV/s_extF80MToCommonNaN.c

	@src/softfloat/source/RISCV/s_extF80UIToCommonNaN.c

	@src/softfloat/source/RISCV/s_f128MToCommonNaN.c

	@src/softfloat/source/RISCV/s_f128UIToCommonNaN.c

	@src/softfloat/source/RISCV/s_f16UIToCommonNaN.c

	@src/softfloat/source/RISCV/s_f32UIToCommonNaN.c

	@src/softfloat/source/RISCV/s_f64UIToCommonNaN.c

	@src/softfloat/source/RISCV/s_propagateNaNExtF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

50 
	$so·Êﬂt_¥›ag©eNaNExtF80M
(

51 c⁄° 
extFlﬂt80M
 *
aSPå
,

52 c⁄° 
extFlﬂt80M
 *
bSPå
,

53 
extFlﬂt80M
 *
zSPå


56 
uöt_Á°16_t
 
ui64
;

57 
uöt_Á°64_t
 
ui0
;

59 
ui64
 = 
aSPå
->
signExp
;

60 
ui0
 = 
aSPå
->
signif
;

62 
	`so·Êﬂt_isSigNaNExtF80UI
–
ui64
, 
ui0
 )

63 || (
bSPå


64 && (
ui64
 = 
bSPå
->
signExp
,

65 
ui0
 = 
bSPå
->
signif
,

66 
	`so·Êﬂt_isSigNaNExtF80UI
–
ui64
, 
ui0
 )))

68 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

70 
zSPå
->
signExp
 = 
deÁu…NaNExtF80UI64
;

71 
zSPå
->
signif
 = 
deÁu…NaNExtF80UI0
;

73 
	}
}

	@src/softfloat/source/RISCV/s_propagateNaNExtF80UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
uöt128


53 
	$so·Êﬂt_¥›ag©eNaNExtF80UI
(

54 
uöt_Á°16_t
 
uiA64
,

55 
uöt_Á°64_t
 
uiA0
,

56 
uöt_Á°16_t
 
uiB64
,

57 
uöt_Á°64_t
 
uiB0


60 
uöt128
 
uiZ
;

63 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 )

64 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 )

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

68 
uiZ
.
v64
 = 
deÁu…NaNExtF80UI64
;

69 
uiZ
.
v0
 = 
deÁu…NaNExtF80UI0
;

70  
uiZ
;

72 
	}
}

	@src/softfloat/source/RISCV/s_propagateNaNF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
	$so·Êﬂt_¥›ag©eNaNF128M
(

53 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 )

57 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 )

58 || (
bWPå
 && 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *) bWPtr ))

60 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
deÁu…NaNF128UI96
;

63 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
deÁu…NaNF128UI64
;

64 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
deÁu…NaNF128UI32
;

65 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
deÁu…NaNF128UI0
;

67 
	}
}

	@src/softfloat/source/RISCV/s_propagateNaNF128UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

52 
uöt128


53 
	$so·Êﬂt_¥›ag©eNaNF128UI
(

54 
uöt_Á°64_t
 
uiA64
,

55 
uöt_Á°64_t
 
uiA0
,

56 
uöt_Á°64_t
 
uiB64
,

57 
uöt_Á°64_t
 
uiB0


60 
uöt128
 
uiZ
;

63 
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 )

64 || 
	`so·Êﬂt_isSigNaNF128UI
–
uiB64
, 
uiB0
 )

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

68 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

69 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

70  
uiZ
;

72 
	}
}

	@src/softfloat/source/RISCV/s_propagateNaNF16UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
uöt_Á°16_t


49 
	$so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 )

52 i‡–
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 ) || so·Êﬂt_isSigNaNF16UI–
uiB
 ) ) {

53 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

55  
deÁu…NaNF16UI
;

57 
	}
}

	@src/softfloat/source/RISCV/s_propagateNaNF32UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
uöt_Á°32_t


49 
	$so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 )

52 i‡–
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 ) || so·Êﬂt_isSigNaNF32UI–
uiB
 ) ) {

53 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

55  
deÁu…NaNF32UI
;

57 
	}
}

	@src/softfloat/source/RISCV/s_propagateNaNF64UI.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"•ecülize.h
"

40 
	~"so·Êﬂt.h
"

48 
uöt_Á°64_t


49 
	$so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 )

52 i‡–
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 ) || so·Êﬂt_isSigNaNF64UI–
uiB
 ) ) {

53 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

55  
deÁu…NaNF64UI
;

57 
	}
}

	@src/softfloat/source/RISCV/softfloat_raiseFlags.c

37 
	~"∂©f‹m.h
"

38 
	~"so·Êﬂt.h
"

46 
	$so·Êﬂt_øi£Fœgs
–
uöt_Á°8_t
 
Êags
 )

49 
so·Êﬂt_ex˚±i⁄Fœgs
 |
Êags
;

51 
	}
}

	@src/softfloat/source/RISCV/specialize.h

37 #i‚de‡
•ecülize_h


38 
	#•ecülize_h
 1

	)

40 
	~<°dboﬁ.h
>

41 
	~<°döt.h
>

42 
	~"¥imôiveTy≥s.h
"

43 
	~"so·Êﬂt.h
"

48 
	#öô_dëe˘Tööess
 
so·Êﬂt_tööess_a·îRoundög


	)

54 
	#ui32_‰omPosOvîÊow
 0xFFFFFFFF

	)

55 
	#ui32_‰omNegOvîÊow
 0

	)

56 
	#ui32_‰omNaN
 0xFFFFFFFF

	)

57 
	#i32_‰omPosOvîÊow
 0x7FFFFFFF

	)

58 
	#i32_‰omNegOvîÊow
 (-0x7FFFFFFF - 1)

	)

59 
	#i32_‰omNaN
 0x7FFFFFFF

	)

65 
	#ui64_‰omPosOvîÊow
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

66 
	#ui64_‰omNegOvîÊow
 0

	)

67 
	#ui64_‰omNaN
 
	`UINT64_C
–0xFFFFFFFFFFFFFFFF )

	)

68 
	#i64_‰omPosOvîÊow
 
	`INT64_C
–0x7FFFFFFFFFFFFFFF )

	)

69 
	#i64_‰omNegOvîÊow
 (-
	`INT64_C
–0x7FFFFFFFFFFFFFFF ) - 1)

	)

70 
	#i64_‰omNaN
 
	`INT64_C
–0x7FFFFFFFFFFFFFFF )

	)

76 
	scomm⁄NaN
 { 
	m_unu£d
; };

81 
	#deÁu…NaNF16UI
 0x7E00

	)

88 
	#so·Êﬂt_isSigNaNF16UI
–
uiA
 ) ((((uiAË& 0x7E00Ë=0x7C00Ë&& ((uiAË& 0x01FF))

	)

95 
	#so·Êﬂt_isSigNaNBF16UI
–
uiA
 ) ((((uiAË& 0x7FC0Ë=0x7F80Ë&& ((uiAË& 0x003F))

	)

103 
	#so·Êﬂt_f16UIToComm⁄NaN
–
uiA
, 
zPå
 ) i‡–! ((uiAË& 0x0200ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

111 
	#so·Êﬂt_bf16UIToComm⁄NaN
–
uiA
, 
zPå
 ) i‡–! ((uiAË& 0x0040ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

117 
	#so·Êﬂt_comm⁄NaNToF16UI
–
aPå
 ) ((
uöt_Á°16_t
Ë
deÁu…NaNF16UI
)

	)

125 
uöt_Á°16_t


126 
so·Êﬂt_¥›ag©eNaNF16UI
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 );

131 
	#deÁu…NaNBF16UI
 0x7FC0

	)

137 
	#so·Êﬂt_comm⁄NaNToBF16UI
–
aPå
 ) ((
uöt_Á°16_t
Ë
deÁu…NaNBF16UI
)

	)

142 
	#deÁu…NaNF32UI
 0x7FC00000

	)

149 
	#so·Êﬂt_isSigNaNF32UI
–
uiA
 ) ((((uiAË& 0x7FC00000Ë=0x7F800000Ë&& ((uiAË& 0x003FFFFF))

	)

157 
	#so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, 
zPå
 ) i‡–! ((uiAË& 0x00400000ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

163 
	#so·Êﬂt_comm⁄NaNToF32UI
–
aPå
 ) ((
uöt_Á°32_t
Ë
deÁu…NaNF32UI
)

	)

171 
uöt_Á°32_t


172 
so·Êﬂt_¥›ag©eNaNF32UI
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 );

177 
	#deÁu…NaNF64UI
 
	`UINT64_C
–0x7FF8000000000000 )

	)

184 
	#so·Êﬂt_isSigNaNF64UI
–
uiA
 ) ((((uiAË& 
	`UINT64_C
–0x7FF8000000000000 )Ë=UINT64_C–0x7FF0000000000000 )Ë&& ((uiAË& UINT64_C–0x0007FFFFFFFFFFFF )))

	)

192 
	#so·Êﬂt_f64UIToComm⁄NaN
–
uiA
, 
zPå
 ) i‡–! ((uiAË& 
	`UINT64_C
–0x0008000000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

198 
	#so·Êﬂt_comm⁄NaNToF64UI
–
aPå
 ) ((
uöt_Á°64_t
Ë
deÁu…NaNF64UI
)

	)

206 
uöt_Á°64_t


207 
so·Êﬂt_¥›ag©eNaNF64UI
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
 );

212 
	#deÁu…NaNExtF80UI64
 0x7FFF

	)

213 
	#deÁu…NaNExtF80UI0
 
	`UINT64_C
–0xC000000000000000 )

	)

221 
	#so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 0x7FFFË=0x7FFFË&& ! ((uiA0Ë& 
	`UINT64_C
–0x4000000000000000 )Ë&& ((uiA0Ë& UINT64_C–0x3FFFFFFFFFFFFFFF )))

	)

223 #ifde‡
SOFTFLOAT_FAST_INT64


237 
	#so·Êﬂt_extF80UIToComm⁄NaN
–
uiA64
, 
uiA0
, 
zPå
 ) i‡–! ((uiA0Ë& 
	`UINT64_C
–0x4000000000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

244 #i‡
deföed
 
INLINE
 && ! deföed 
so·Êﬂt_comm⁄NaNToExtF80UI


245 
INLINE


246 
uöt128
 
	$so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

248 
uöt128
 
uiZ
;

249 
uiZ
.
v64
 = 
deÁu…NaNExtF80UI64
;

250 
uiZ
.
v0
 = 
deÁu…NaNExtF80UI0
;

251  
uiZ
;

252 
	}
}

254 
uöt128
 
so·Êﬂt_comm⁄NaNToExtF80UI
–c⁄° 
comm⁄NaN
 *
aPå
 );

266 
uöt128


267 
so·Êﬂt_¥›ag©eNaNExtF80UI
(

268 
uöt_Á°16_t
 
uiA64
,

269 
uöt_Á°64_t
 
uiA0
,

270 
uöt_Á°16_t
 
uiB64
,

271 
uöt_Á°64_t
 
uiB0


277 
	#deÁu…NaNF128UI64
 
	`UINT64_C
–0x7FFF800000000000 )

	)

278 
	#deÁu…NaNF128UI0
 
	`UINT64_C
–0 )

	)

286 
	#so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 ) ((((uiA64Ë& 
	`UINT64_C
–0x7FFF800000000000 )Ë=UINT64_C–0x7FFF000000000000 )Ë&& ((uiA0Ë|| ((uiA64Ë& UINT64_C–0x00007FFFFFFFFFFF ))))

	)

295 
	#so·Êﬂt_f128UIToComm⁄NaN
–
uiA64
, 
uiA0
, 
zPå
 ) i‡–! ((uiA64Ë& 
	`UINT64_C
–0x0000800000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

301 #i‡
deföed
 
INLINE
 && ! deföed 
so·Êﬂt_comm⁄NaNToF128UI


302 
INLINE


303 
uöt128
 
	$so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 *
aPå
 )

305 
uöt128
 
uiZ
;

306 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

307 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

308  
uiZ
;

309 
	}
}

311 
uöt128
 
so·Êﬂt_comm⁄NaNToF128UI
–c⁄° 
comm⁄NaN
 * );

323 
uöt128


324 
so·Êﬂt_¥›ag©eNaNF128UI
(

325 
uöt_Á°64_t
 
uiA64
,

326 
uöt_Á°64_t
 
uiA0
,

327 
uöt_Á°64_t
 
uiB64
,

328 
uöt_Á°64_t
 
uiB0


344 
	#so·Êﬂt_extF80MToComm⁄NaN
–
aSPå
, 
zPå
 ) i‡–! (◊SPå)->
signif
 & 
	`UINT64_C
–0x4000000000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

351 #i‡
deföed
 
INLINE
 && ! deföed 
so·Êﬂt_comm⁄NaNToExtF80M


352 
INLINE


354 
	$so·Êﬂt_comm⁄NaNToExtF80M
(

355 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 )

357 
zSPå
->
signExp
 = 
deÁu…NaNExtF80UI64
;

358 
zSPå
->
signif
 = 
deÁu…NaNExtF80UI0
;

359 
	}
}

362 
so·Êﬂt_comm⁄NaNToExtF80M
(

363 c⁄° 
comm⁄NaN
 *
aPå
, 
extFlﬂt80M
 *
zSPå
 );

373 
so·Êﬂt_¥›ag©eNaNExtF80M
(

374 c⁄° 
extFlﬂt80M
 *
aSPå
,

375 c⁄° 
extFlﬂt80M
 *
bSPå
,

376 
extFlﬂt80M
 *
zSPå


382 
	#deÁu…NaNF128UI96
 0x7FFF8000

	)

383 
	#deÁu…NaNF128UI64
 0

	)

384 
	#deÁu…NaNF128UI32
 0

	)

385 
	#deÁu…NaNF128UI0
 0

	)

395 
	#so·Êﬂt_f128MToComm⁄NaN
–
aWPå
, 
zPå
 ) i‡–! (◊WPå)[
	`ödexW‹dHi
–4 )] & 
	`UINT64_C
–0x0000800000000000 )ËË
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 )

	)

403 #i‡
deföed
 
INLINE
 && ! deföed 
so·Êﬂt_comm⁄NaNToF128M


404 
INLINE


406 
	$so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 )

408 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
deÁu…NaNF128UI96
;

409 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
deÁu…NaNF128UI64
;

410 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
deÁu…NaNF128UI32
;

411 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
deÁu…NaNF128UI0
;

412 
	}
}

415 
so·Êﬂt_comm⁄NaNToF128M
–c⁄° 
comm⁄NaN
 *
aPå
, 
uöt32_t
 *
zWPå
 );

427 
so·Êﬂt_¥›ag©eNaNF128M
(

428 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 );

	@src/softfloat/source/bf16_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$bf16_isSig«lögNaN
–
bÊﬂt16_t
 
a
 )

45 
ui16_bf16
 
uA
;

47 
uA
.
f
 = 
a
;

48  
	`so·Êﬂt_isSigNaNBF16UI
–
uA
.
ui
 );

50 
	}
}

	@src/softfloat/source/bf16_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$bf16_to_f32
–
bÊﬂt16_t
 
a
 )

46 
ui16_bf16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°32_t
 
uiZ
;

53 
exp8_sig16
 
n‹mExpSig
;

54 
ui32_f32
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA
 = 
uA
.
ui
;

60 
sign
 = 
	`signBF16UI
–
uiA
 );

61 
exp
 = 
	`expBF16UI
–
uiA
 );

62 
‰ac
 = 
	`‰acBF16UI
–
uiA
 );

66 i‡–
exp
 == 0xFF ) {

67 i‡–
‰ac
 ) {

68 
	`so·Êﬂt_bf16UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

69 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF32UI
–&
comm⁄NaN
 );

71 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0xFF, 0 );

73 
uiZ
;

82 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 
exp
, ((
uöt_Á°32_t
Ë
‰ac
) <<16 );

83 
uiZ
:

84 
uZ
.
ui
 = 
uiZ
;

85  
uZ
.
f
;

87 
	}
}

	@src/softfloat/source/extF80M_add.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


45 
	$extF80M_add
(

46 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

48 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

49 
uöt_Á°16_t
 
uiA64
;

50 
uöt_Á°64_t
 
uiA0
;

51 
boﬁ
 
signA
;

52 
uöt_Á°16_t
 
uiB64
;

53 
uöt_Á°64_t
 
uiB0
;

54 
boﬁ
 
signB
;

55 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

56 
extFlﬂt80_t


57 (*
magsFuncPå
)(

58 
uöt_Á°16_t
, 
uöt_Á°64_t
, uöt_Á°16_t, uöt_Á°64_t, 
boﬁ
 );

61 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

62 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

63 
uiA64
 = 
aSPå
->
signExp
;

64 
uiA0
 = 
aSPå
->
signif
;

65 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

66 
uiB64
 = 
bSPå
->
signExp
;

67 
uiB0
 = 
bSPå
->
signif
;

68 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

69 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

70 i‡–
signA
 =
signB
 ) {

71 *
zPå
 = 
	`so·Êﬂt_addMagsExtF80
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

73 *
zPå
 = 
	`so·Êﬂt_subMagsExtF80
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

76 
magsFuncPå
 =

77 (
signA
 =
signB
Ë? 
so·Êﬂt_addMagsExtF80
 : 
so·Êﬂt_subMagsExtF80
;

78 *
zPå
 = (*
magsFuncPå
)–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

81 
	}
}

86 
	$extF80M_add
(

87 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

90 
	`so·Êﬂt_addExtF80M
(

91 (c⁄° 
extFlﬂt80M
 *Ë
aPå
,

92 (c⁄° 
extFlﬂt80M
 *Ë
bPå
,

93 (
extFlﬂt80M
 *Ë
zPå
,

94 
Ál£


97 
	}
}

	@src/softfloat/source/extF80M_div.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


47 
	$extF80M_div
(

48 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

51 *
zPå
 = 
	`extF80_div
–*
aPå
, *
bPå
 );

53 
	}
}

58 
	$extF80M_div
(

59 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

61 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

62 
extFlﬂt80M
 *
zSPå
;

63 
uöt_Á°16_t
 
uiA64
;

64 
öt32_t
 
expA
;

65 
uöt_Á°16_t
 
uiB64
;

66 
öt32_t
 
expB
;

67 
boﬁ
 
signZ
;

68 
uöt64_t
 
sigA
, 
x64
;

69 
öt32_t
 
expZ
;

70 
shi·Di°
;

71 
uöt32_t
 
y
[3], 
ªcù32
, 
sigB
[3];

72 
ix
;

73 
uöt32_t
 
q
, 
qs
[2];

74 
uöt_Á°16_t
 
uiZ64
;

75 
uöt64_t
 
uiZ0
;

79 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

80 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

81 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

84 
uiA64
 = 
aSPå
->
signExp
;

85 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

86 
uiB64
 = 
bSPå
->
signExp
;

87 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

88 
signZ
 = 
	`signExtF80UI64
–
uiA64
 ) ^ signExtF80UI64–
uiB64
 );

91 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

92 i‡–
	`so·Êﬂt_åyPr›ag©eNaNExtF80M
–
aSPå
, 
bSPå
, 
zSPå
 ) ) ;

93 i‡–
expA
 == 0x7FFF ) {

94 i‡–
expB
 =0x7FFF ) 
övÆid
;

95 
öföôy
;

97 
zîo
;

101 
sigA
 = 
aSPå
->
signif
;

102 
x64
 = 
bSPå
->
signif
;

103 i‡–! 
expB
 )ÉxpB = 1;

104 i‡–! (
x64
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

105 i‡–! 
x64
 ) {

106 i‡–! 
sigA
 ) 
övÆid
;

107 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_öföôe
 );

108 
öföôy
;

110 
expB
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
x64
 );

112 i‡–! 
expA
 )ÉxpA = 1;

113 i‡–! (
sigA
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

114 i‡–! 
sigA
 ) 
zîo
;

115 
expA
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sigA
 );

119 
expZ
 = 
expA
 - 
expB
 + 0x3FFF;

120 
shi·Di°
 = 29;

121 i‡–
sigA
 < 
x64
 ) {

122 --
expZ
;

123 
shi·Di°
 = 30;

125 
	`so·Êﬂt_sh‹tShi·Le·64To96M
–
sigA
, 
shi·Di°
, 
y
 );

126 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
x64
>>32 );

127 
sigB
[
	`ödexW‹d
–3, 0 )] = (
uöt32_t
Ë
x64
<<30;

128 
x64
 >>= 2;

129 
sigB
[
	`ödexW‹d
–3, 2 )] = 
x64
>>32;

130 
sigB
[
	`ödexW‹d
–3, 1 )] = 
x64
;

131 
ix
 = 2;

133 
x64
 = (
uöt64_t
Ë
y
[
	`ödexW‹dHi
–3 )] * 
ªcù32
;

134 
q
 = (
x64
 + 0x80000000)>>32;

135 --
ix
;

136 i‡–
ix
 < 0 ) ;

137 
	`so·Êﬂt_ªmSãp96MBy32
–
y
, 29, 
sigB
, 
q
, y );

138 i‡–
y
[
	`ödexW‹dHi
( 3 )] & 0x80000000 ) {

139 --
q
;

140 
	`so·Êﬂt_add96M
–
y
, 
sigB
, y );

142 
qs
[
ix
] = 
q
;

146 i‡–((
q
 + 1) & 0x3FFFFF) < 2 ) {

147 
	`so·Êﬂt_ªmSãp96MBy32
–
y
, 29, 
sigB
, 
q
, y );

148 i‡–
y
[
	`ödexW‹dHi
( 3 )] & 0x80000000 ) {

149 --
q
;

150 
	`so·Êﬂt_add96M
–
y
, 
sigB
, y );

151 } i‡–
	`so·Êﬂt_com∑ª96M
–
sigB
, 
y
 ) <= 0 ) {

152 ++
q
;

153 
	`so·Êﬂt_sub96M
–
y
, 
sigB
, y );

156 
y
[
	`ödexW‹dLo
–3 )] || y[
	`ödexW‹d
( 3, 1 )] || y[indexWord( 3, 2 )]

158 
q
 |= 1;

163 
x64
 = (
uöt64_t
Ë
q
<<9;

164 
y
[
	`ödexW‹d
–3, 0 )] = 
x64
;

165 
x64
 = ((
uöt64_t
Ë
qs
[0]<<6) + (x64>>32);

166 
y
[
	`ödexW‹d
–3, 1 )] = 
x64
;

167 
y
[
	`ödexW‹d
–3, 2 )] = (
qs
[1]<<3Ë+ (
x64
>>32);

168 
	`so·Êﬂt_roundPackMToExtF80M
(

169 
signZ
, 
expZ
, 
y
, 
extF80_roundögPªcisi⁄
, 
zSPå
 );

173 
övÆid
:

174 
	`so·Êﬂt_övÆidExtF80M
–
zSPå
 );

178 
öföôy
:

179 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0x7FFF );

180 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

181 
uiZ
;

184 
zîo
:

185 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0 );

186 
uiZ0
 = 0;

187 
uiZ
:

188 
zSPå
->
signExp
 = 
uiZ64
;

189 
zSPå
->
signif
 = 
uiZ0
;

191 
	}
}

	@src/softfloat/source/extF80M_eq.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
boﬁ
 
	$extF80M_eq
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

49  
	`extF80_eq
–*
aPå
, *
bPå
 );

51 
	}
}

55 
boﬁ
 
	$extF80M_eq
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
uöt64_t
 
uiA0
;

60 
uöt_Á°16_t
 
uiB64
;

61 
uöt64_t
 
uiB0
;

65 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

66 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

69 
uiA64
 = 
aSPå
->
signExp
;

70 
uiA0
 = 
aSPå
->
signif
;

71 
uiB64
 = 
bSPå
->
signExp
;

72 
uiB0
 = 
bSPå
->
signif
;

75 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

77 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 )

78 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 )

80 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

82  
Ál£
;

86 i‡–
uiA0
 =
uiB0
 ) {

87  (
uiA64
 =
uiB64
Ë|| ! 
uiA0
;

89 i‡–! ((
uiA0
 & 
uiB0
Ë& 
	`UINT64_C
( 0x8000000000000000 )) ) {

90  ! 
	`so·Êﬂt_com∑ªN⁄n‹mExtF80M
–
aSPå
, 
bSPå
 );

92  
Ál£
;

95 
	}
}

	@src/softfloat/source/extF80M_eq_signaling.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 #ifde‡
SOFTFLOAT_FAST_INT64


45 
boﬁ
 
	$extF80M_eq_sig«lög
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

48  
	`extF80_eq_sig«lög
–*
aPå
, *
bPå
 );

50 
	}
}

54 
boﬁ
 
	$extF80M_eq_sig«lög
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

56 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

57 
uöt_Á°16_t
 
uiA64
;

58 
uöt64_t
 
uiA0
;

59 
uöt_Á°16_t
 
uiB64
;

60 
uöt64_t
 
uiB0
;

64 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

65 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

68 
uiA64
 = 
aSPå
->
signExp
;

69 
uiA0
 = 
aSPå
->
signif
;

70 
uiB64
 = 
bSPå
->
signExp
;

71 
uiB0
 = 
bSPå
->
signif
;

74 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

75 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

76  
Ál£
;

80 i‡–
uiA0
 =
uiB0
 ) {

81  (
uiA64
 =
uiB64
Ë|| ! 
uiA0
;

83 i‡–! ((
uiA0
 & 
uiB0
Ë& 
	`UINT64_C
( 0x8000000000000000 )) ) {

84  ! 
	`so·Êﬂt_com∑ªN⁄n‹mExtF80M
–
aSPå
, 
bSPå
 );

86  
Ál£
;

89 
	}
}

	@src/softfloat/source/extF80M_le.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 #ifde‡
SOFTFLOAT_FAST_INT64


45 
boﬁ
 
	$extF80M_À
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

48  
	`extF80_À
–*
aPå
, *
bPå
 );

50 
	}
}

54 
boﬁ
 
	$extF80M_À
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

56 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

57 
uöt_Á°16_t
 
uiA64
;

58 
uöt64_t
 
uiA0
;

59 
uöt_Á°16_t
 
uiB64
;

60 
uöt64_t
 
uiB0
;

61 
boﬁ
 
signA
, 
…Mags
;

65 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

66 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

69 
uiA64
 = 
aSPå
->
signExp
;

70 
uiA0
 = 
aSPå
->
signif
;

71 
uiB64
 = 
bSPå
->
signExp
;

72 
uiB0
 = 
bSPå
->
signif
;

75 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

76 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

77  
Ál£
;

81 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

82 i‡–(
uiA64
 ^ 
uiB64
) & 0x8000 ) {

86  
signA
 || ! (
uiA0
 | 
uiB0
);

91 i‡–! ((
uiA0
 & 
uiB0
Ë& 
	`UINT64_C
( 0x8000000000000000 )) ) {

92  (
	`so·Êﬂt_com∑ªN⁄n‹mExtF80M
–
aSPå
, 
bSPå
 ) <= 0);

94 i‡–
uiA64
 =
uiB64
 ) {

95 i‡–
uiA0
 =
uiB0
 )  
åue
;

96 
…Mags
 = (
uiA0
 < 
uiB0
);

98 
…Mags
 = (
uiA64
 < 
uiB64
);

100  
signA
 ^ 
…Mags
;

103 
	}
}

	@src/softfloat/source/extF80M_le_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
boﬁ
 
	$extF80M_À_quõt
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

49  
	`extF80_À_quõt
–*
aPå
, *
bPå
 );

51 
	}
}

55 
boﬁ
 
	$extF80M_À_quõt
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
uöt64_t
 
uiA0
;

60 
uöt_Á°16_t
 
uiB64
;

61 
uöt64_t
 
uiB0
;

62 
boﬁ
 
signA
, 
…Mags
;

66 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

67 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

70 
uiA64
 = 
aSPå
->
signExp
;

71 
uiA0
 = 
aSPå
->
signif
;

72 
uiB64
 = 
bSPå
->
signExp
;

73 
uiB0
 = 
bSPå
->
signif
;

76 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

78 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 )

79 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 )

81 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

83  
Ál£
;

87 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

88 i‡–(
uiA64
 ^ 
uiB64
) & 0x8000 ) {

92  
signA
 || ! (
uiA0
 | 
uiB0
);

97 i‡–! ((
uiA0
 & 
uiB0
Ë& 
	`UINT64_C
( 0x8000000000000000 )) ) {

98  (
	`so·Êﬂt_com∑ªN⁄n‹mExtF80M
–
aSPå
, 
bSPå
 ) <= 0);

100 i‡–
uiA64
 =
uiB64
 ) {

101 i‡–
uiA0
 =
uiB0
 )  
åue
;

102 
…Mags
 = (
uiA0
 < 
uiB0
);

104 
…Mags
 = (
uiA64
 < 
uiB64
);

106  
signA
 ^ 
…Mags
;

109 
	}
}

	@src/softfloat/source/extF80M_lt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 #ifde‡
SOFTFLOAT_FAST_INT64


45 
boﬁ
 
	$extF80M_…
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

48  
	`extF80_…
–*
aPå
, *
bPå
 );

50 
	}
}

54 
boﬁ
 
	$extF80M_…
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

56 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

57 
uöt_Á°16_t
 
uiA64
;

58 
uöt64_t
 
uiA0
;

59 
uöt_Á°16_t
 
uiB64
;

60 
uöt64_t
 
uiB0
;

61 
boﬁ
 
signA
, 
…Mags
;

65 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

66 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

69 
uiA64
 = 
aSPå
->
signExp
;

70 
uiA0
 = 
aSPå
->
signif
;

71 
uiB64
 = 
bSPå
->
signExp
;

72 
uiB0
 = 
bSPå
->
signif
;

75 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

76 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

77  
Ál£
;

81 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

82 i‡–(
uiA64
 ^ 
uiB64
) & 0x8000 ) {

86  
signA
 && ((
uiA0
 | 
uiB0
) != 0);

91 i‡–! ((
uiA0
 & 
uiB0
Ë& 
	`UINT64_C
( 0x8000000000000000 )) ) {

92  (
	`so·Êﬂt_com∑ªN⁄n‹mExtF80M
–
aSPå
, 
bSPå
 ) < 0);

94 i‡–
uiA64
 =
uiB64
 ) {

95 i‡–
uiA0
 =
uiB0
 )  
Ál£
;

96 
…Mags
 = (
uiA0
 < 
uiB0
);

98 
…Mags
 = (
uiA64
 < 
uiB64
);

100  
signA
 ^ 
…Mags
;

103 
	}
}

	@src/softfloat/source/extF80M_lt_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
boﬁ
 
	$extF80M_…_quõt
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

49  
	`extF80_…_quõt
–*
aPå
, *
bPå
 );

51 
	}
}

55 
boﬁ
 
	$extF80M_…_quõt
–c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
uöt64_t
 
uiA0
;

60 
uöt_Á°16_t
 
uiB64
;

61 
uöt64_t
 
uiB0
;

62 
boﬁ
 
signA
, 
…Mags
;

66 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

67 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

70 
uiA64
 = 
aSPå
->
signExp
;

71 
uiA0
 = 
aSPå
->
signif
;

72 
uiB64
 = 
bSPå
->
signExp
;

73 
uiB0
 = 
bSPå
->
signif
;

76 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

78 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 )

79 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 )

81 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

83  
Ál£
;

87 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

88 i‡–(
uiA64
 ^ 
uiB64
) & 0x8000 ) {

92  
signA
 && ((
uiA0
 | 
uiB0
) != 0);

97 i‡–! ((
uiA0
 & 
uiB0
Ë& 
	`UINT64_C
( 0x8000000000000000 )) ) {

98  (
	`so·Êﬂt_com∑ªN⁄n‹mExtF80M
–
aSPå
, 
bSPå
 ) < 0);

100 i‡–
uiA64
 =
uiB64
 ) {

101 i‡–
uiA0
 =
uiB0
 )  
Ál£
;

102 
…Mags
 = (
uiA0
 < 
uiB0
);

104 
…Mags
 = (
uiA64
 < 
uiB64
);

106  
signA
 ^ 
…Mags
;

109 
	}
}

	@src/softfloat/source/extF80M_mul.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


47 
	$extF80M_mul
(

48 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

51 *
zPå
 = 
	`extF80_mul
–*
aPå
, *
bPå
 );

53 
	}
}

58 
	$extF80M_mul
(

59 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

61 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

62 
extFlﬂt80M
 *
zSPå
;

63 
uöt_Á°16_t
 
uiA64
;

64 
öt32_t
 
expA
;

65 
uöt_Á°16_t
 
uiB64
;

66 
öt32_t
 
expB
;

67 
boﬁ
 
signZ
;

68 
uöt_Á°16_t
 
exp
, 
uiZ64
;

69 
uöt64_t
 
uiZ0
, 
sigA
, 
sigB
;

70 
öt32_t
 
expZ
;

71 
uöt32_t
 
sigProd
[4], *
extSigZPå
;

75 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

76 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

77 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

80 
uiA64
 = 
aSPå
->
signExp
;

81 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

82 
uiB64
 = 
bSPå
->
signExp
;

83 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

84 
signZ
 = 
	`signExtF80UI64
–
uiA64
 ) ^ signExtF80UI64–
uiB64
 );

87 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

88 i‡–
	`so·Êﬂt_åyPr›ag©eNaNExtF80M
–
aSPå
, 
bSPå
, 
zSPå
 ) ) ;

90 (! 
aSPå
->
signif
 && (
expA
 != 0x7FFF))

91 || (! 
bSPå
->
signif
 && (
expB
 != 0x7FFF))

93 
	`so·Êﬂt_övÆidExtF80M
–
zSPå
 );

96 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0x7FFF );

97 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

98 
uiZ
;

102 i‡–! 
expA
 )ÉxpA = 1;

103 
sigA
 = 
aSPå
->
signif
;

104 i‡–! (
sigA
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

105 i‡–! 
sigA
 ) 
zîo
;

106 
expA
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sigA
 );

108 i‡–! 
expB
 )ÉxpB = 1;

109 
sigB
 = 
bSPå
->
signif
;

110 i‡–! (
sigB
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

111 i‡–! 
sigB
 ) 
zîo
;

112 
expB
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sigB
 );

116 
expZ
 = 
expA
 + 
expB
 - 0x3FFE;

117 
	`so·Êﬂt_mul64To128M
–
sigA
, 
sigB
, 
sigProd
 );

118 i‡–
sigProd
[
	`ödexW‹dLo
–4 )] ) sigProd[
	`ödexW‹d
( 4, 1 )] |= 1;

119 
extSigZPå
 = &
sigProd
[
	`ödexMu…iw‹dHi
( 4, 3 )];

120 i‡–
sigProd
[
	`ödexW‹dHi
( 4 )] < 0x80000000 ) {

121 --
expZ
;

122 
	`so·Êﬂt_add96M
–
extSigZPå
,ÉxtSigZPtr,ÉxtSigZPtr );

124 
	`so·Êﬂt_roundPackMToExtF80M
(

125 
signZ
, 
expZ
, 
extSigZPå
, 
extF80_roundögPªcisi⁄
, 
zSPå
 );

129 
zîo
:

130 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0 );

131 
uiZ0
 = 0;

132 
uiZ
:

133 
zSPå
->
signExp
 = 
uiZ64
;

134 
zSPå
->
signif
 = 
uiZ0
;

136 
	}
}

	@src/softfloat/source/extF80M_rem.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


47 
	$extF80M_ªm
(

48 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

51 *
zPå
 = 
	`extF80_ªm
–*
aPå
, *
bPå
 );

53 
	}
}

58 
	$extF80M_ªm
(

59 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

61 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

62 
extFlﬂt80M
 *
zSPå
;

63 
uöt_Á°16_t
 
uiA64
;

64 
öt32_t
 
expA
, 
expB
;

65 
uöt64_t
 
x64
;

66 
boﬁ
 
signRem
;

67 
uöt64_t
 
sigA
;

68 
öt32_t
 
expDiff
;

69 
uöt32_t
 
ªm
[3], 
x
[3], 
sig32B
, 
q
, 
ªcù32
, 
ªm2
[3], *
ªmPå
, *
ÆtRemPå
;

70 
uöt32_t
 *
√wRemPå
, 
w‹dMónRem
;

74 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

75 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

76 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

79 
uiA64
 = 
aSPå
->
signExp
;

80 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

81 
expB
 = 
	`expExtF80UI64
–
bSPå
->
signExp
 );

84 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

85 i‡–
	`so·Êﬂt_åyPr›ag©eNaNExtF80M
–
aSPå
, 
bSPå
, 
zSPå
 ) ) ;

86 i‡–
expA
 =0x7FFF ) 
övÆid
;

93 
expB
 +=ÉxpB;

97 i‡–! 
expB
 )ÉxpB = 1;

98 
x64
 = 
bSPå
->
signif
;

99 i‡–! (
x64
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

100 i‡–! 
x64
 ) 
övÆid
;

101 
expB
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
x64
 );

103 
signRem
 = 
	`signExtF80UI64
–
uiA64
 );

104 i‡–! 
expA
 )ÉxpA = 1;

105 
sigA
 = 
aSPå
->
signif
;

106 i‡–! (
sigA
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

107 i‡–! 
sigA
 ) {

108 
expA
 = 0;

109 
c›yA
;

111 
expA
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sigA
 );

115 
expDiff
 = 
expA
 - 
expB
;

116 i‡–
expDiff
 < -1 ) 
c›yA
;

117 
ªm
[
	`ödexW‹d
–3, 2 )] = 
sigA
>>34;

118 
ªm
[
	`ödexW‹d
–3, 1 )] = 
sigA
>>2;

119 
ªm
[
	`ödexW‹d
–3, 0 )] = (
uöt32_t
Ë
sigA
<<30;

120 
x
[
	`ödexW‹d
–3, 0 )] = (
uöt32_t
Ë
x64
<<30;

121 
sig32B
 = 
x64
>>32;

122 
x64
 >>= 2;

123 
x
[
	`ödexW‹d
–3, 2 )] = 
x64
>>32;

124 
x
[
	`ödexW‹d
–3, 1 )] = 
x64
;

125 i‡–
expDiff
 < 1 ) {

126 i‡–
expDiff
 ) {

127 --
expB
;

128 
	`so·Êﬂt_add96M
–
x
, x, x );

129 
q
 = 0;

131 
q
 = (
	`so·Êﬂt_com∑ª96M
–
x
, 
ªm
 ) <= 0);

132 i‡–
q
 ) 
	`so·Êﬂt_sub96M
–
ªm
, 
x
,Ñem );

135 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
sig32B
 );

136 
expDiff
 -= 30;

138 
x64
 = (
uöt64_t
Ë
ªm
[
	`ödexW‹dHi
–3 )] * 
ªcù32
;

139 i‡–
expDiff
 < 0 ) ;

140 
q
 = (
x64
 + 0x80000000)>>32;

141 
	`so·Êﬂt_ªmSãp96MBy32
–
ªm
, 29, 
x
, 
q
,Ñem );

142 i‡–
ªm
[
	`ödexW‹dHi
( 3 )] & 0x80000000 ) {

143 
	`so·Êﬂt_add96M
–
ªm
, 
x
,Ñem );

145 
expDiff
 -= 29;

150 
q
 = (
uöt32_t
Ë(
x64
>>32)>>(~
expDiff
 & 31);

151 
	`so·Êﬂt_ªmSãp96MBy32
–
ªm
, 
expDiff
 + 30, 
x
, 
q
,Ñem );

152 i‡–
ªm
[
	`ödexW‹dHi
( 3 )] & 0x80000000 ) {

153 
ªmPå
 = 
ªm
;

154 
ÆtRemPå
 = 
ªm2
;

155 
	`so·Êﬂt_add96M
–
ªmPå
, 
x
, 
ÆtRemPå
 );

156 
£À˘Rem
;

161 
ªmPå
 = 
ªm
;

162 
ÆtRemPå
 = 
ªm2
;

164 ++
q
;

165 
√wRemPå
 = 
ÆtRemPå
;

166 
	`so·Êﬂt_sub96M
–
ªmPå
, 
x
, 
√wRemPå
 );

167 
ÆtRemPå
 = 
ªmPå
;

168 
ªmPå
 = 
√wRemPå
;

169 }  ! (
ªmPå
[
	`ödexW‹dHi
( 3 )] & 0x80000000) );

170 
£À˘Rem
:

171 
	`so·Êﬂt_add96M
–
ªmPå
, 
ÆtRemPå
, 
x
 );

172 
w‹dMónRem
 = 
x
[
	`ödexW‹dHi
( 3 )];

174 (
w‹dMónRem
 & 0x80000000)

175 || (! 
w‹dMónRem
 && (
q
 & 1Ë&& ! 
x
[
	`ödexW‹d
( 3, 0 )]

176 && ! 
x
[
	`ödexW‹d
( 3, 1 )])

178 
ªmPå
 = 
ÆtRemPå
;

180 i‡–
ªmPå
[
	`ödexW‹dHi
( 3 )] & 0x80000000 ) {

181 
signRem
 = ! signRem;

182 
	`so·Êﬂt_√gX96M
–
ªmPå
 );

184 
	`so·Êﬂt_n‹mRoundPackMToExtF80M
–
signRem
, 
expB
 + 2, 
ªmPå
, 80, 
zSPå
 );

188 
övÆid
:

189 
	`so·Êﬂt_övÆidExtF80M
–
zSPå
 );

193 
c›yA
:

194 i‡–
expA
 < 1 ) {

195 
sigA
 >>1 - 
expA
;

196 
expA
 = 0;

198 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
signRem
, 
expA
 );

199 
zSPå
->
signif
 = 
sigA
;

201 
	}
}

	@src/softfloat/source/extF80M_roundToInt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


47 
	$extF80M_roundToI¡
(

48 c⁄° 
extFlﬂt80_t
 *
aPå
,

49 
uöt_Á°8_t
 
roundögMode
,

50 
boﬁ
 
exa˘
,

51 
extFlﬂt80_t
 *
zPå


55 *
zPå
 = 
	`extF80_roundToI¡
–*
aPå
, 
roundögMode
, 
exa˘
 );

57 
	}
}

62 
	$extF80M_roundToI¡
(

63 c⁄° 
extFlﬂt80_t
 *
aPå
,

64 
uöt_Á°8_t
 
roundögMode
,

65 
boﬁ
 
exa˘
,

66 
extFlﬂt80_t
 *
zPå


69 c⁄° 
extFlﬂt80M
 *
aSPå
;

70 
extFlﬂt80M
 *
zSPå
;

71 
uöt_Á°16_t
 
uiA64
, 
signUI64
;

72 
öt32_t
 
exp
;

73 
uöt64_t
 
sigA
;

74 
uöt_Á°16_t
 
uiZ64
;

75 
uöt64_t
 
sigZ
, 
œ°BôMask
, 
roundBôsMask
;

79 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

80 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

83 
uiA64
 = 
aSPå
->
signExp
;

84 
signUI64
 = 
uiA64
 & 
	`∑ckToExtF80UI64
( 1, 0 );

85 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

86 
sigA
 = 
aSPå
->
signif
;

89 i‡–!(
sigA
 & 
	`UINT64_C
–0x8000000000000000 )Ë&& (
exp
 != 0x7FFF) ) {

90 i‡–!
sigA
 ) {

91 
uiZ64
 = 
signUI64
;

92 
sigZ
 = 0;

93 
uiZ
;

95 
exp
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sigA
 );

99 i‡–
exp
 <= 0x3FFE ) {

100 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

101  
roundögMode
 ) {

102 
so·Êﬂt_round_√¨_eví
:

103 i‡–!(
sigA
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )) ) ;

104 
so·Êﬂt_round_√¨_maxMag
:

105 i‡–
exp
 =0x3FFE ) 
mag1
;

107 
so·Êﬂt_round_mö
:

108 i‡–
signUI64
 ) 
mag1
;

110 
so·Êﬂt_round_max
:

111 i‡–!
signUI64
 ) 
mag1
;

113 #ifde‡
SOFTFLOAT_ROUND_ODD


114 
so·Êﬂt_round_odd
:

115 
mag1
;

118 
uiZ64
 = 
signUI64
;

119 
sigZ
 = 0;

120 
uiZ
;

121 
mag1
:

122 
uiZ64
 = 
signUI64
 | 0x3FFF;

123 
sigZ
 = 
	`UINT64_C
( 0x8000000000000000 );

124 
uiZ
;

128 i‡–0x403E <
exp
 ) {

129 i‡–
exp
 == 0x7FFF ) {

130 i‡–
sigA
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

131 
	`so·Êﬂt_¥›ag©eNaNExtF80M
–
aSPå
, 0, 
zSPå
 );

134 
sigZ
 = 
	`UINT64_C
( 0x8000000000000000 );

136 
sigZ
 = 
sigA
;

138 
uiZ64
 = 
signUI64
 | 
exp
;

139 
uiZ
;

143 
uiZ64
 = 
signUI64
 | 
exp
;

144 
œ°BôMask
 = (
uöt64_t
Ë1<<(0x403E - 
exp
);

145 
roundBôsMask
 = 
œ°BôMask
 - 1;

146 
sigZ
 = 
sigA
;

147 i‡–
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
 ) {

148 
sigZ
 +
œ°BôMask
>>1;

149 } i‡–
roundögMode
 =
so·Êﬂt_round_√¨_eví
 ) {

150 
sigZ
 +
œ°BôMask
>>1;

151 i‡–!(
sigZ
 & 
roundBôsMask
ËËsigZ &~
œ°BôMask
;

153 
roundögMode
 =(
signUI64
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
)

155 
sigZ
 +
roundBôsMask
;

157 
sigZ
 &~
roundBôsMask
;

158 i‡–!
sigZ
 ) {

159 ++
uiZ64
;

160 
sigZ
 = 
	`UINT64_C
( 0x8000000000000000 );

162 i‡–
sigZ
 !
sigA
 ) {

163 #ifde‡
SOFTFLOAT_ROUND_ODD


164 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
sigZ
 |
œ°BôMask
;

166 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

168 
uiZ
:

169 
zSPå
->
signExp
 = 
uiZ64
;

170 
zSPå
->
signif
 = 
sigZ
;

173 
	}
}

	@src/softfloat/source/extF80M_sqrt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$extF80M_sqπ
–c⁄° 
extFlﬂt80_t
 *
aPå
,ÉxtFlﬂt80_à*
zPå
 )

49 *
zPå
 = 
	`extF80_sqπ
–*
aPå
 );

51 
	}
}

55 
	$extF80M_sqπ
–c⁄° 
extFlﬂt80_t
 *
aPå
,ÉxtFlﬂt80_à*
zPå
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
extFlﬂt80M
 *
zSPå
;

59 
uöt_Á°16_t
 
uiA64
, 
signUI64
;

60 
öt32_t
 
expA
;

61 
uöt64_t
 
ªm64
;

62 
öt32_t
 
expZ
;

63 
uöt32_t
 
ªm96
[3], 
sig32A
, 
ªcùSqπ32
, 
sig32Z
, 
q
;

64 
uöt64_t
 
sig64Z
, 
x64
;

65 
uöt32_t
 
ªm32
, 
ãrm
[4], 
ªm
[4], 
extSigZ
[3];

69 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

70 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

73 
uiA64
 = 
aSPå
->
signExp
;

74 
signUI64
 = 
uiA64
 & 
	`∑ckToExtF80UI64
( 1, 0 );

75 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

76 
ªm64
 = 
aSPå
->
signif
;

79 i‡–
expA
 == 0x7FFF ) {

80 i‡–
ªm64
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

81 
	`so·Êﬂt_¥›ag©eNaNExtF80M
–
aSPå
, 0, 
zSPå
 );

84 i‡–
signUI64
 ) 
övÆid
;

85 
ªm64
 = 
	`UINT64_C
( 0x8000000000000000 );

86 
c›yA
;

90 i‡–! 
expA
 )ÉxpA = 1;

91 i‡–! (
ªm64
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

92 i‡–! 
ªm64
 ) {

93 
uiA64
 = 
signUI64
;

94 
c›yA
;

96 
expA
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
ªm64
 );

98 i‡–
signUI64
 ) 
övÆid
;

101 
expZ
 = ((
expA
 - 0x3FFF)>>1) + 0x3FFF;

102 
expA
 &= 1;

103 
	`so·Êﬂt_sh‹tShi·Le·64To96M
–
ªm64
, 30 - 
expA
, 
ªm96
 );

104 
sig32A
 = 
ªm64
>>32;

105 
ªcùSqπ32
 = 
	`so·Êﬂt_≠¥oxRecùSqπ32_1
–
expA
, 
sig32A
 );

106 
sig32Z
 = ((
uöt64_t
Ë
sig32A
 * 
ªcùSqπ32
)>>32;

107 i‡–
expA
 ) 
sig32Z
 >>= 1;

108 
ªm64
 =

109 ((
uöt64_t
Ë
ªm96
[
	`ödexW‹d
( 3, 2 )]<<32 |Ñem96[indexWord( 3, 1 )])

110 - (
uöt64_t
Ë
sig32Z
 * sig32Z;

111 
ªm96
[
	`ödexW‹d
–3, 2 )] = 
ªm64
>>32;

112 
ªm96
[
	`ödexW‹d
–3, 1 )] = 
ªm64
;

115 
q
 = ((
uöt32_t
Ë(
ªm64
>>2Ë* (
uöt64_t
Ë
ªcùSqπ32
)>>32;

116 
sig64Z
 = ((
uöt64_t
Ë
sig32Z
<<32Ë+ ((uöt64_tË
q
<<3);

117 
ãrm
[
	`ödexW‹d
( 3, 2 )] = 0;

122 
x64
 = ((
uöt64_t
Ë
sig32Z
<<32Ë+ 
sig64Z
;

123 
ãrm
[
	`ödexW‹d
–3, 1 )] = 
x64
>>32;

124 
ãrm
[
	`ödexW‹d
–3, 0 )] = 
x64
;

125 
	`so·Êﬂt_ªmSãp96MBy32
(

126 
ªm96
, 29, 
ãrm
, 
q
, &
ªm
[
	`ödexMu…iw‹dHi
( 4, 3 )] );

127 
ªm32
 = 
ªm
[
	`ödexW‹d
( 4, 3 )];

128 i‡–! (
ªm32
 & 0x80000000) ) ;

129 --
q
;

130 
sig64Z
 -= 1<<3;

132 
ªm64
 = (
uöt64_t
Ë
ªm32
<<32 | 
ªm
[
	`ödexW‹d
( 4, 2 )];

135 
q
 = (((
uöt32_t
Ë(
ªm64
>>2Ë* (
uöt64_t
Ë
ªcùSqπ32
)>>32) + 2;

136 i‡–
ªm64
>>34 ) 
q
 +
ªcùSqπ32
;

137 
x64
 = (
uöt64_t
Ë
q
<<7;

138 
extSigZ
[
	`ödexW‹d
–3, 0 )] = 
x64
;

139 
x64
 = (
sig64Z
<<1) + (x64>>32);

140 
extSigZ
[
	`ödexW‹d
–3, 2 )] = 
x64
>>32;

141 
extSigZ
[
	`ödexW‹d
–3, 1 )] = 
x64
;

144 i‡–(
q
 & 0xFFFFFF) <= 2 ) {

145 
q
 &~(
uöt32_t
) 0xFFFF;

146 
extSigZ
[
	`ödexW‹dLo
–3 )] = 
q
<<7;

147 
x64
 = 
sig64Z
 + (
q
>>27);

148 
ãrm
[
	`ödexW‹d
( 4, 3 )] = 0;

149 
ãrm
[
	`ödexW‹d
–4, 2 )] = 
x64
>>32;

150 
ãrm
[
	`ödexW‹d
–4, 1 )] = 
x64
;

151 
ãrm
[
	`ödexW‹d
–4, 0 )] = 
q
<<5;

152 
ªm
[
	`ödexW‹d
( 4, 0 )] = 0;

153 
	`so·Êﬂt_ªmSãp128MBy32
–
ªm
, 28, 
ãrm
, 
q
,Ñem );

154 
q
 = 
ªm
[
	`ödexW‹dHi
( 4 )];

155 i‡–
q
 & 0x80000000 ) {

156 
	`so·Êﬂt_sub1X96M
–
extSigZ
 );

158 i‡–
q
 || 
ªm
[
	`ödexW‹d
( 4, 1 )] ||Ñem[indexWord( 4, 2 )] ) {

159 
extSigZ
[
	`ödexW‹dLo
( 3 )] |= 1;

163 
	`so·Êﬂt_roundPackMToExtF80M
(

164 0, 
expZ
, 
extSigZ
, 
extF80_roundögPªcisi⁄
, 
zSPå
 );

168 
övÆid
:

169 
	`so·Êﬂt_övÆidExtF80M
–
zSPå
 );

173 
c›yA
:

174 
zSPå
->
signExp
 = 
uiA64
;

175 
zSPå
->
signif
 = 
ªm64
;

177 
	}
}

	@src/softfloat/source/extF80M_sub.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


45 
	$extF80M_sub
(

46 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

48 c⁄° 
extFlﬂt80M
 *
aSPå
, *
bSPå
;

49 
uöt_Á°16_t
 
uiA64
;

50 
uöt_Á°64_t
 
uiA0
;

51 
boﬁ
 
signA
;

52 
uöt_Á°16_t
 
uiB64
;

53 
uöt_Á°64_t
 
uiB0
;

54 
boﬁ
 
signB
;

55 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

56 
extFlﬂt80_t


57 (*
magsFuncPå
)(

58 
uöt_Á°16_t
, 
uöt_Á°64_t
, uöt_Á°16_t, uöt_Á°64_t, 
boﬁ
 );

61 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

62 
bSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
bPå
;

63 
uiA64
 = 
aSPå
->
signExp
;

64 
uiA0
 = 
aSPå
->
signif
;

65 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

66 
uiB64
 = 
bSPå
->
signExp
;

67 
uiB0
 = 
bSPå
->
signif
;

68 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

69 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

70 i‡–
signA
 =
signB
 ) {

71 *
zPå
 = 
	`so·Êﬂt_subMagsExtF80
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

73 *
zPå
 = 
	`so·Êﬂt_addMagsExtF80
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

76 
magsFuncPå
 =

77 (
signA
 =
signB
Ë? 
so·Êﬂt_subMagsExtF80
 : 
so·Êﬂt_addMagsExtF80
;

78 *
zPå
 = (*
magsFuncPå
)–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

81 
	}
}

86 
	$extF80M_sub
(

87 c⁄° 
extFlﬂt80_t
 *
aPå
, c⁄°ÉxtFlﬂt80_à*
bPå
,ÉxtFlﬂt80_à*
zPå
 )

90 
	`so·Êﬂt_addExtF80M
(

91 (c⁄° 
extFlﬂt80M
 *Ë
aPå
,

92 (c⁄° 
extFlﬂt80M
 *Ë
bPå
,

93 (
extFlﬂt80M
 *Ë
zPå
,

94 
åue


97 
	}
}

	@src/softfloat/source/extF80M_to_f128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$extF80M_to_f128M
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
Êﬂt128_t
 *
zPå
 )

49 *
zPå
 = 
	`extF80_to_f128
–*
aPå
 );

51 
	}
}

55 
	$extF80M_to_f128M
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
Êﬂt128_t
 *
zPå
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
uöt32_t
 *
zWPå
;

59 
uöt_Á°16_t
 
uiA64
;

60 
boﬁ
 
sign
;

61 
öt32_t
 
exp
;

62 
uöt64_t
 
sig
;

63 
comm⁄NaN
 commonNaN;

64 
uöt32_t
 
uiZ96
;

68 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

69 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

72 
uiA64
 = 
aSPå
->
signExp
;

73 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

74 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

75 
sig
 = 
aSPå
->
signif
;

78 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

79 i‡–
exp
 == 0x7FFF ) {

80 i‡–
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

81 
	`so·Êﬂt_extF80MToComm⁄NaN
–
aSPå
, &
comm⁄NaN
 );

82 
	`so·Êﬂt_comm⁄NaNToF128M
–&
comm⁄NaN
, 
zWPå
 );

85 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0x7FFF, 0 );

86 
uiZ
;

90 i‡–
exp
 ) --exp;

91 i‡–! (
sig
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

92 i‡–! 
sig
 ) {

93 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0, 0 );

94 
uiZ
;

96 
exp
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sig
 );

100 
zWPå
[
	`ödexW‹d
–4, 1 )] = (
uöt32_t
Ë
sig
<<17;

101 
sig
 >>= 15;

102 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
sig
;

103 i‡–
exp
 < 0 ) {

104 
zWPå
[
	`ödexW‹dHi
–4 )] = 
sig
>>32;

105 
	`so·Êﬂt_shi·Right96M
(

106 &
zWPå
[
	`ödexMu…iw‹dHi
( 4, 3 )],

107 -
exp
,

108 &
zWPå
[
	`ödexMu…iw‹dHi
( 4, 3 )]

110 
exp
 = 0;

111 
sig
 = (
uöt64_t
Ë
zWPå
[
	`ödexW‹dHi
( 4 )]<<32;

113 
zWPå
[
	`ödexW‹dHi
–4 )] = 
	`∑ckToF128UI96
–
sign
, 
exp
, 
sig
>>32 );

117 
uiZ
:

118 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
uiZ96
;

119 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

120 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

122 
	}
}

	@src/softfloat/source/extF80M_to_f16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
Êﬂt16_t
 
	$extF80M_to_f16
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

49  
	`extF80_to_f16
–*
aPå
 );

51 
	}
}

55 
Êﬂt16_t
 
	$extF80M_to_f16
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt64_t
 
sig
;

62 
comm⁄NaN
 commonNaN;

63 
uöt16_t
 
uiZ
, 
sig16
;

64 
ui16_f16
 
uZ
;

68 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

71 
uiA64
 = 
aSPå
->
signExp
;

72 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

73 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

74 
sig
 = 
aSPå
->
signif
;

77 i‡–
exp
 == 0x7FFF ) {

78 i‡–
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

79 
	`so·Êﬂt_extF80MToComm⁄NaN
–
aSPå
, &
comm⁄NaN
 );

80 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF16UI
–&
comm⁄NaN
 );

82 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0x1F, 0 );

84 
uiZ
;

88 i‡–! (
sig
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

89 i‡–! 
sig
 ) {

90 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0, 0 );

91 
uiZ
;

93 
exp
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sig
 );

97 
sig16
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
sig
, 49 );

98 
exp
 -= 0x3FF1;

99 i‡– (
öt_Á°16_t
Ë<  (
öt32_t
) ) {

100 i‡–
exp
 < -0x40 )Éxp = -0x40;

102  
	`so·Êﬂt_roundPackToF16
–
sign
, 
exp
, 
sig16
 );

105 
uiZ
:

106 
uZ
.
ui
 = 
uiZ
;

107  
uZ
.
f
;

109 
	}
}

	@src/softfloat/source/extF80M_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
Êﬂt32_t
 
	$extF80M_to_f32
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

49  
	`extF80_to_f32
–*
aPå
 );

51 
	}
}

55 
Êﬂt32_t
 
	$extF80M_to_f32
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt64_t
 
sig
;

62 
comm⁄NaN
 commonNaN;

63 
uöt32_t
 
uiZ
, 
sig32
;

64 
ui32_f32
 
uZ
;

68 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

71 
uiA64
 = 
aSPå
->
signExp
;

72 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

73 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

74 
sig
 = 
aSPå
->
signif
;

77 i‡–
exp
 == 0x7FFF ) {

78 i‡–
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

79 
	`so·Êﬂt_extF80MToComm⁄NaN
–
aSPå
, &
comm⁄NaN
 );

80 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF32UI
–&
comm⁄NaN
 );

82 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0xFF, 0 );

84 
uiZ
;

88 i‡–! (
sig
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

89 i‡–! 
sig
 ) {

90 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0, 0 );

91 
uiZ
;

93 
exp
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sig
 );

97 
sig32
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
sig
, 33 );

98 
exp
 -= 0x3F81;

99 i‡– (
öt_Á°16_t
Ë<  (
öt32_t
) ) {

100 i‡–
exp
 < -0x1000 )Éxp = -0x1000;

102  
	`so·Êﬂt_roundPackToF32
–
sign
, 
exp
, 
sig32
 );

105 
uiZ
:

106 
uZ
.
ui
 = 
uiZ
;

107  
uZ
.
f
;

109 
	}
}

	@src/softfloat/source/extF80M_to_f64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
Êﬂt64_t
 
	$extF80M_to_f64
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

49  
	`extF80_to_f64
–*
aPå
 );

51 
	}
}

55 
Êﬂt64_t
 
	$extF80M_to_f64
–c⁄° 
extFlﬂt80_t
 *
aPå
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt64_t
 
sig
;

62 
comm⁄NaN
 commonNaN;

63 
uöt64_t
 
uiZ
;

64 
ui64_f64
 
uZ
;

68 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

71 
uiA64
 = 
aSPå
->
signExp
;

72 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

73 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

74 
sig
 = 
aSPå
->
signif
;

77 i‡–
exp
 == 0x7FFF ) {

78 i‡–
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

79 
	`so·Êﬂt_extF80MToComm⁄NaN
–
aSPå
, &
comm⁄NaN
 );

80 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF64UI
–&
comm⁄NaN
 );

82 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0x7FF, 0 );

84 
uiZ
;

88 i‡–! (
sig
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

89 i‡–! 
sig
 ) {

90 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0, 0 );

91 
uiZ
;

93 
exp
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sig
 );

97 
sig
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
( sig, 1 );

98 
exp
 -= 0x3C01;

99 i‡– (
öt_Á°16_t
Ë<  (
öt32_t
) ) {

100 i‡–
exp
 < -0x1000 )Éxp = -0x1000;

102  
	`so·Êﬂt_roundPackToF64
–
sign
, 
exp
, 
sig
 );

105 
uiZ
:

106 
uZ
.
ui
 = 
uiZ
;

107  
uZ
.
f
;

109 
	}
}

	@src/softfloat/source/extF80M_to_i32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
öt_Á°32_t


47 
	$extF80M_to_i32
(

48 c⁄° 
extFlﬂt80_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

51  
	`extF80_to_i32
–*
aPå
, 
roundögMode
, 
exa˘
 );

53 
	}
}

57 
öt_Á°32_t


58 
	$extF80M_to_i32
(

59 c⁄° 
extFlﬂt80_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

61 c⁄° 
extFlﬂt80M
 *
aSPå
;

62 
uöt_Á°16_t
 
uiA64
;

63 
boﬁ
 
sign
;

64 
öt32_t
 
exp
;

65 
uöt64_t
 
sig
;

66 
öt32_t
 
shi·Di°
;

70 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

71 
uiA64
 = 
aSPå
->
signExp
;

72 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

73 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

74 
sig
 = 
aSPå
->
signif
;

77 
shi·Di°
 = 0x4032 - 
exp
;

78 i‡–
shi·Di°
 <= 0 ) {

79 i‡–
sig
>>32 ) 
övÆid
;

80 i‡–-32 < 
shi·Di°
 ) {

81 
sig
 <<-
shi·Di°
;

83 i‡–(
uöt32_t
Ë
sig
 ) 
övÆid
;

86 
sig
 = 
	`so·Êﬂt_shi·RightJam64
–sig, 
shi·Di°
 );

88  
	`so·Êﬂt_roundToI32
–
sign
, 
sig
, 
roundögMode
, 
exa˘
 );

91 
övÆid
:

92 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

94 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF )Ë? 
i32_‰omNaN


95 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

97 
	}
}

	@src/softfloat/source/extF80M_to_i32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
öt_Á°32_t
 
	$extF80M_to_i32_r_möMag
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
boﬁ
 
exa˘
 )

49  
	`extF80_to_i32_r_möMag
–*
aPå
, 
exa˘
 );

51 
	}
}

55 
öt_Á°32_t
 
	$extF80M_to_i32_r_möMag
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
boﬁ
 
exa˘
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
öt32_t
 
exp
;

60 
uöt64_t
 
sig
;

61 
öt32_t
 
shi·Di°
;

62 
boﬁ
 
sign
, 
øi£I√xa˘
;

63 
öt32_t
 
z
;

64 
uöt64_t
 
shi·edSig
;

65 
uöt32_t
 
absZ
;

66 uni⁄ { 
uöt32_t
 
ui
; 
öt32_t
 
i
; } 
u
;

70 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

71 
uiA64
 = 
aSPå
->
signExp
;

72 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

73 
sig
 = 
aSPå
->
signif
;

76 i‡–! 
sig
 && (
exp
 != 0x7FFF) )  0;

77 
shi·Di°
 = 0x403E - 
exp
;

78 i‡–64 <
shi·Di°
 ) {

79 
øi£I√xa˘
 = 
exa˘
;

80 
z
 = 0;

82 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

83 
øi£I√xa˘
 = 
Ál£
;

84 i‡–
shi·Di°
 < 0 ) {

85 i‡–
sig
>>32 || (
shi·Di°
 <-31ËË
övÆid
;

86 
shi·edSig
 = (
uöt64_t
Ë(
uöt32_t
Ë
sig
<<-
shi·Di°
;

87 i‡–
shi·edSig
>>32 ) 
övÆid
;

88 
absZ
 = 
shi·edSig
;

90 
shi·edSig
 = 
sig
;

91 i‡–
shi·Di°
 ) 
shi·edSig
 >>= shiftDist;

92 i‡–
shi·edSig
>>32 ) 
övÆid
;

93 
absZ
 = 
shi·edSig
;

94 i‡–
exa˘
 && 
shi·Di°
 ) {

95 
øi£I√xa˘
 = ((
uöt64_t
Ë
absZ
<<
shi·Di°
 !
sig
);

98 i‡–
sign
 ) {

99 i‡–0x80000000 < 
absZ
 ) 
övÆid
;

100 
u
.
ui
 = -
absZ
;

101 
z
 = 
u
.
i
;

103 i‡–0x80000000 <
absZ
 ) 
övÆid
;

104 
z
 = 
absZ
;

107 i‡–
øi£I√xa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

108  
z
;

111 
övÆid
:

112 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

114 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF )Ë? 
i32_‰omNaN


115 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

117 
	}
}

	@src/softfloat/source/extF80M_to_i64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
öt_Á°64_t


47 
	$extF80M_to_i64
(

48 c⁄° 
extFlﬂt80_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

51  
	`extF80_to_i64
–*
aPå
, 
roundögMode
, 
exa˘
 );

53 
	}
}

57 
öt_Á°64_t


58 
	$extF80M_to_i64
(

59 c⁄° 
extFlﬂt80_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

61 c⁄° 
extFlﬂt80M
 *
aSPå
;

62 
uöt_Á°16_t
 
uiA64
;

63 
boﬁ
 
sign
;

64 
öt32_t
 
exp
;

65 
uöt64_t
 
sig
;

66 
öt32_t
 
shi·Di°
;

67 
uöt32_t
 
extSig
[3];

71 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

72 
uiA64
 = 
aSPå
->
signExp
;

73 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

74 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

75 
sig
 = 
aSPå
->
signif
;

78 
shi·Di°
 = 0x403E - 
exp
;

79 i‡–
shi·Di°
 < 0 ) {

80 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

82 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

83 ? 
i64_‰omNaN


84 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

88 
extSig
[
	`ödexW‹d
–3, 2 )] = 
sig
>>32;

89 
extSig
[
	`ödexW‹d
–3, 1 )] = 
sig
;

90 
extSig
[
	`ödexW‹d
( 3, 0 )] = 0;

91 i‡–
shi·Di°
 ) 
	`so·Êﬂt_shi·RightJam96M
–
extSig
, shiftDist,ÉxtSig );

92  
	`so·Êﬂt_roundMToI64
–
sign
, 
extSig
, 
roundögMode
, 
exa˘
 );

94 
	}
}

	@src/softfloat/source/extF80M_to_i64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
öt_Á°64_t
 
	$extF80M_to_i64_r_möMag
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
boﬁ
 
exa˘
 )

49  
	`extF80_to_i64_r_möMag
–*
aPå
, 
exa˘
 );

51 
	}
}

55 
öt_Á°64_t
 
	$extF80M_to_i64_r_möMag
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
boﬁ
 
exa˘
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
öt32_t
 
exp
;

60 
uöt64_t
 
sig
;

61 
öt32_t
 
shi·Di°
;

62 
boﬁ
 
sign
, 
øi£I√xa˘
;

63 
öt64_t
 
z
;

64 
uöt64_t
 
absZ
;

65 uni⁄ { 
uöt64_t
 
ui
; 
öt64_t
 
i
; } 
u
;

69 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

70 
uiA64
 = 
aSPå
->
signExp
;

71 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

72 
sig
 = 
aSPå
->
signif
;

75 i‡–! 
sig
 && (
exp
 != 0x7FFF) )  0;

76 
shi·Di°
 = 0x403E - 
exp
;

77 i‡–64 <
shi·Di°
 ) {

78 
øi£I√xa˘
 = 
exa˘
;

79 
z
 = 0;

81 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

82 
øi£I√xa˘
 = 
Ál£
;

83 i‡–
shi·Di°
 < 0 ) {

84 i‡–
shi·Di°
 <-63 ) 
övÆid
;

85 
shi·Di°
 = -shiftDist;

86 
absZ
 = 
sig
<<
shi·Di°
;

87 i‡–
absZ
>>
shi·Di°
 !
sig
 ) 
övÆid
;

89 
absZ
 = 
sig
;

90 i‡–
shi·Di°
 ) 
absZ
 >>= shiftDist;

91 i‡–
exa˘
 && 
shi·Di°
 ) 
øi£I√xa˘
 = (
absZ
<<shi·Di° !
sig
);

93 i‡–
sign
 ) {

94 i‡–
	`UINT64_C
–0x8000000000000000 ) < 
absZ
 ) 
övÆid
;

95 
u
.
ui
 = -
absZ
;

96 
z
 = 
u
.
i
;

98 i‡–
	`UINT64_C
–0x8000000000000000 ) <
absZ
 ) 
övÆid
;

99 
z
 = 
absZ
;

102 i‡–
øi£I√xa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

103  
z
;

106 
övÆid
:

107 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

109 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF )Ë? 
i64_‰omNaN


110 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

112 
	}
}

	@src/softfloat/source/extF80M_to_ui32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
uöt_Á°32_t


47 
	$extF80M_to_ui32
(

48 c⁄° 
extFlﬂt80_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

51  
	`extF80_to_ui32
–*
aPå
, 
roundögMode
, 
exa˘
 );

53 
	}
}

57 
uöt_Á°32_t


58 
	$extF80M_to_ui32
(

59 c⁄° 
extFlﬂt80_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

61 c⁄° 
extFlﬂt80M
 *
aSPå
;

62 
uöt_Á°16_t
 
uiA64
;

63 
boﬁ
 
sign
;

64 
öt32_t
 
exp
;

65 
uöt64_t
 
sig
;

66 
öt32_t
 
shi·Di°
;

70 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

71 
uiA64
 = 
aSPå
->
signExp
;

72 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

73 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

74 
sig
 = 
aSPå
->
signif
;

77 
shi·Di°
 = 0x4032 - 
exp
;

78 i‡–
shi·Di°
 <= 0 ) {

79 i‡–
sig
>>32 ) 
övÆid
;

80 i‡–-32 < 
shi·Di°
 ) {

81 
sig
 <<-
shi·Di°
;

83 i‡–(
uöt32_t
Ë
sig
 ) 
övÆid
;

86 
sig
 = 
	`so·Êﬂt_shi·RightJam64
–sig, 
shi·Di°
 );

88  
	`so·Êﬂt_roundToUI32
–
sign
, 
sig
, 
roundögMode
, 
exa˘
 );

91 
övÆid
:

92 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

94 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

95 ? 
ui32_‰omNaN


96 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

98 
	}
}

	@src/softfloat/source/extF80M_to_ui32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
uöt_Á°32_t
 
	$extF80M_to_ui32_r_möMag
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
boﬁ
 
exa˘
 )

49  
	`extF80_to_ui32_r_möMag
–*
aPå
, 
exa˘
 );

51 
	}
}

55 
uöt_Á°32_t
 
	$extF80M_to_ui32_r_möMag
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
boﬁ
 
exa˘
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
öt32_t
 
exp
;

60 
uöt64_t
 
sig
;

61 
öt32_t
 
shi·Di°
;

62 
boﬁ
 
sign
;

63 
uöt64_t
 
shi·edSig
;

64 
uöt32_t
 
z
;

68 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

69 
uiA64
 = 
aSPå
->
signExp
;

70 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

71 
sig
 = 
aSPå
->
signif
;

74 i‡–! 
sig
 && (
exp
 != 0x7FFF) )  0;

75 
shi·Di°
 = 0x403E - 
exp
;

76 i‡–64 <
shi·Di°
 ) {

77 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

82 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

83 i‡–
shi·Di°
 < 0 ) {

84 i‡–
sign
 || 
sig
>>32 || (
shi·Di°
 <-31ËË
övÆid
;

85 
shi·edSig
 = (
uöt64_t
Ë(
uöt32_t
Ë
sig
<<-
shi·Di°
;

86 i‡–
shi·edSig
>>32 ) 
övÆid
;

87 
z
 = 
shi·edSig
;

89 
shi·edSig
 = 
sig
;

90 i‡–
shi·Di°
 ) 
shi·edSig
 >>= shiftDist;

91 i‡–
shi·edSig
>>32 ) 
övÆid
;

92 
z
 = 
shi·edSig
;

93 i‡–
sign
 && 
z
 ) 
övÆid
;

94 i‡–
exa˘
 && 
shi·Di°
 && ((
uöt64_t
Ë
z
<<shi·Di° !
sig
) ) {

95 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

98  
z
;

101 
övÆid
:

102 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

104 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

105 ? 
ui32_‰omNaN


106 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

108 
	}
}

	@src/softfloat/source/extF80M_to_ui64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
uöt_Á°64_t


47 
	$extF80M_to_ui64
(

48 c⁄° 
extFlﬂt80_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

51  
	`extF80_to_ui64
–*
aPå
, 
roundögMode
, 
exa˘
 );

53 
	}
}

57 
uöt_Á°64_t


58 
	$extF80M_to_ui64
(

59 c⁄° 
extFlﬂt80_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

61 c⁄° 
extFlﬂt80M
 *
aSPå
;

62 
uöt_Á°16_t
 
uiA64
;

63 
boﬁ
 
sign
;

64 
öt32_t
 
exp
;

65 
uöt64_t
 
sig
;

66 
öt32_t
 
shi·Di°
;

67 
uöt32_t
 
extSig
[3];

71 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

72 
uiA64
 = 
aSPå
->
signExp
;

73 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

74 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

75 
sig
 = 
aSPå
->
signif
;

78 
shi·Di°
 = 0x403E - 
exp
;

79 i‡–
shi·Di°
 < 0 ) {

80 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

82 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

83 ? 
ui64_‰omNaN


84 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

88 
extSig
[
	`ödexW‹d
–3, 2 )] = 
sig
>>32;

89 
extSig
[
	`ödexW‹d
–3, 1 )] = 
sig
;

90 
extSig
[
	`ödexW‹d
( 3, 0 )] = 0;

91 i‡–
shi·Di°
 ) 
	`so·Êﬂt_shi·RightJam96M
–
extSig
, shiftDist,ÉxtSig );

92  
	`so·Êﬂt_roundMToUI64
–
sign
, 
extSig
, 
roundögMode
, 
exa˘
 );

94 
	}
}

	@src/softfloat/source/extF80M_to_ui64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
uöt_Á°64_t
 
	$extF80M_to_ui64_r_möMag
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
boﬁ
 
exa˘
 )

49  
	`extF80_to_ui64_r_möMag
–*
aPå
, 
exa˘
 );

51 
	}
}

55 
uöt_Á°64_t
 
	$extF80M_to_ui64_r_möMag
–c⁄° 
extFlﬂt80_t
 *
aPå
, 
boﬁ
 
exa˘
 )

57 c⁄° 
extFlﬂt80M
 *
aSPå
;

58 
uöt_Á°16_t
 
uiA64
;

59 
öt32_t
 
exp
;

60 
uöt64_t
 
sig
;

61 
öt32_t
 
shi·Di°
;

62 
boﬁ
 
sign
;

63 
uöt64_t
 
z
;

67 
aSPå
 = (c⁄° 
extFlﬂt80M
 *Ë
aPå
;

68 
uiA64
 = 
aSPå
->
signExp
;

69 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

70 
sig
 = 
aSPå
->
signif
;

73 i‡–! 
sig
 && (
exp
 != 0x7FFF) )  0;

74 
shi·Di°
 = 0x403E - 
exp
;

75 i‡–64 <
shi·Di°
 ) {

76 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

81 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

82 i‡–
shi·Di°
 < 0 ) {

83 i‡–
sign
 || (
shi·Di°
 <-63ËË
övÆid
;

84 
shi·Di°
 = -shiftDist;

85 
z
 = 
sig
<<
shi·Di°
;

86 i‡–
z
>>
shi·Di°
 !
sig
 ) 
övÆid
;

88 
z
 = 
sig
;

89 i‡–
shi·Di°
 ) 
z
 >>= shiftDist;

90 i‡–
sign
 && 
z
 ) 
övÆid
;

91 i‡–
exa˘
 && 
shi·Di°
 && (
z
<<shi·Di° !
sig
) ) {

92 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

95  
z
;

98 
övÆid
:

99 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

101 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

102 ? 
ui64_‰omNaN


103 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

105 
	}
}

	@src/softfloat/source/extF80_add.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
extFlﬂt80_t
 
	$extF80_add
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

45 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

46 
uöt_Á°16_t
 
uiA64
;

47 
uöt_Á°64_t
 
uiA0
;

48 
boﬁ
 
signA
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

50 
uöt_Á°16_t
 
uiB64
;

51 
uöt_Á°64_t
 
uiB0
;

52 
boﬁ
 
signB
;

53 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

54 
extFlﬂt80_t


55 (*
magsFuncPå
)(

56 
uöt_Á°16_t
, 
uöt_Á°64_t
, uöt_Á°16_t, uöt_Á°64_t, 
boﬁ
 );

59 
uA
.
f
 = 
a
;

60 
uiA64
 = 
uA
.
s
.
signExp
;

61 
uiA0
 = 
uA
.
s
.
signif
;

62 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

63 
uB
.
f
 = 
b
;

64 
uiB64
 = 
uB
.
s
.
signExp
;

65 
uiB0
 = 
uB
.
s
.
signif
;

66 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

67 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

68 i‡–
signA
 =
signB
 ) {

69  
	`so·Êﬂt_addMagsExtF80
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

71  
	`so·Êﬂt_subMagsExtF80
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

74 
magsFuncPå
 =

75 (
signA
 =
signB
Ë? 
so·Êﬂt_addMagsExtF80
 : 
so·Êﬂt_subMagsExtF80
;

76  (*
magsFuncPå
)–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

79 
	}
}

	@src/softfloat/source/extF80_div.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t
 
	$extF80_div
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 
boﬁ
 
signA
;

50 
öt_Á°32_t
 
expA
;

51 
uöt_Á°64_t
 
sigA
;

52 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

53 
uöt_Á°16_t
 
uiB64
;

54 
uöt_Á°64_t
 
uiB0
;

55 
boﬁ
 
signB
;

56 
öt_Á°32_t
 
expB
;

57 
uöt_Á°64_t
 
sigB
;

58 
boﬁ
 
signZ
;

59 
exp32_sig64
 
n‹mExpSig
;

60 
öt_Á°32_t
 
expZ
;

61 
uöt128
 
ªm
;

62 
uöt_Á°32_t
 
ªcù32
;

63 
uöt_Á°64_t
 
sigZ
;

64 
ix
;

65 
uöt_Á°64_t
 
q64
;

66 
uöt_Á°32_t
 
q
;

67 
uöt128
 
ãrm
;

68 
uöt_Á°64_t
 
sigZExåa
;

69 
uöt128
 
uiZ
;

70 
uöt_Á°16_t
 
uiZ64
;

71 
uöt_Á°64_t
 
uiZ0
;

72 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

76 
uA
.
f
 = 
a
;

77 
uiA64
 = 
uA
.
s
.
signExp
;

78 
uiA0
 = 
uA
.
s
.
signif
;

79 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

80 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

81 
sigA
 = 
uiA0
;

82 
uB
.
f
 = 
b
;

83 
uiB64
 = 
uB
.
s
.
signExp
;

84 
uiB0
 = 
uB
.
s
.
signif
;

85 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

86 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

87 
sigB
 = 
uiB0
;

88 
signZ
 = 
signA
 ^ 
signB
;

91 i‡–
expA
 == 0x7FFF ) {

92 i‡–
sigA
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

93 i‡–
expB
 == 0x7FFF ) {

94 i‡–
sigB
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

95 
övÆid
;

97 
öföôy
;

99 i‡–
expB
 == 0x7FFF ) {

100 i‡–
sigB
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

101 
zîo
;

105 i‡–! 
expB
 )ÉxpB = 1;

106 i‡–! (
sigB
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

107 i‡–! 
sigB
 ) {

108 i‡–! 
sigA
 ) 
övÆid
;

109 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_öföôe
 );

110 
öföôy
;

112 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigB
 );

113 
expB
 +
n‹mExpSig
.
exp
;

114 
sigB
 = 
n‹mExpSig
.
sig
;

116 i‡–! 
expA
 )ÉxpA = 1;

117 i‡–! (
sigA
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

118 i‡–! 
sigA
 ) 
zîo
;

119 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigA
 );

120 
expA
 +
n‹mExpSig
.
exp
;

121 
sigA
 = 
n‹mExpSig
.
sig
;

125 
expZ
 = 
expA
 - 
expB
 + 0x3FFF;

126 i‡–
sigA
 < 
sigB
 ) {

127 --
expZ
;

128 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigA
, 32 );

130 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigA
, 31 );

132 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
sigB
>>32 );

133 
sigZ
 = 0;

134 
ix
 = 2;

136 
q64
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë(
ªm
.
v64
>>2Ë* 
ªcù32
;

137 
q
 = (
q64
 + 0x80000000)>>32;

138 --
ix
;

139 i‡–
ix
 < 0 ) ;

140 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 29 );

141 
ãrm
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–
sigB
, 
q
 );

142 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

143 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

144 --
q
;

145 
ªm
 = 
	`so·Êﬂt_add128
–ªm.
v64
,Ñem.
v0
, 
sigB
>>32, sigB<<32 );

147 
sigZ
 = (sigZ<<29Ë+ 
q
;

151 i‡–((
q
 + 1) & 0x3FFFFF) < 2 ) {

152 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 29 );

153 
ãrm
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–
sigB
, 
q
 );

154 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

155 
ãrm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigB
, 32 );

156 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

157 --
q
;

158 
ªm
 = 
	`so·Êﬂt_add128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

159 } i‡–
	`so·Êﬂt_À128
–
ãrm
.
v64
,Åîm.
v0
, 
ªm
.v64,Ñem.v0 ) ) {

160 ++
q
;

161 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

163 i‡–
ªm
.
v64
 |Ñem.
v0
 ) 
q
 |= 1;

167 
sigZ
 = (sigZ<<6Ë+ (
q
>>23);

168 
sigZExåa
 = (
uöt64_t
Ë((
uöt_Á°64_t
Ë
q
<<41);

170 
	`so·Êﬂt_roundPackToExtF80
(

171 
signZ
, 
expZ
, 
sigZ
, 
sigZExåa
, 
extF80_roundögPªcisi⁄
 );

174 
¥›ag©eNaN
:

175 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNExtF80UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

176 
uiZ64
 = 
uiZ
.
v64
;

177 
uiZ0
 = 
uiZ
.
v0
;

178 
uiZ
;

181 
övÆid
:

182 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

183 
uiZ64
 = 
deÁu…NaNExtF80UI64
;

184 
uiZ0
 = 
deÁu…NaNExtF80UI0
;

185 
uiZ
;

188 
öföôy
:

189 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0x7FFF );

190 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

191 
uiZ
;

194 
zîo
:

195 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0 );

196 
uiZ0
 = 0;

197 
uiZ
:

198 
uZ
.
s
.
signExp
 = 
uiZ64
;

199 
uZ
.
s
.
signif
 = 
uiZ0
;

200  
uZ
.
f
;

202 
	}
}

	@src/softfloat/source/extF80_eq.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80_eq
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

50 
uöt_Á°16_t
 
uiB64
;

51 
uöt_Á°64_t
 
uiB0
;

53 
uA
.
f
 = 
a
;

54 
uiA64
 = 
uA
.
s
.
signExp
;

55 
uiA0
 = 
uA
.
s
.
signif
;

56 
uB
.
f
 = 
b
;

57 
uiB64
 = 
uB
.
s
.
signExp
;

58 
uiB0
 = 
uB
.
s
.
signif
;

59 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

61 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 )

62 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 )

64 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

66  
Ál£
;

69 (
uiA0
 =
uiB0
)

70 && ((
uiA64
 =
uiB64
Ë|| (! 
uiA0
 && ! ((uiA64 | uiB64) & 0x7FFF)));

72 
	}
}

	@src/softfloat/source/extF80_eq_signaling.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$extF80_eq_sig«lög
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

45 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

46 
uöt_Á°16_t
 
uiA64
;

47 
uöt_Á°64_t
 
uiA0
;

48 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

49 
uöt_Á°16_t
 
uiB64
;

50 
uöt_Á°64_t
 
uiB0
;

52 
uA
.
f
 = 
a
;

53 
uiA64
 = 
uA
.
s
.
signExp
;

54 
uiA0
 = 
uA
.
s
.
signif
;

55 
uB
.
f
 = 
b
;

56 
uiB64
 = 
uB
.
s
.
signExp
;

57 
uiB0
 = 
uB
.
s
.
signif
;

58 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

59 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

60  
Ál£
;

63 (
uiA0
 =
uiB0
)

64 && ((
uiA64
 =
uiB64
Ë|| (! 
uiA0
 && ! ((uiA64 | uiB64) & 0x7FFF)));

66 
	}
}

	@src/softfloat/source/extF80_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$extF80_isSig«lögNaN
–
extFlﬂt80_t
 
a
 )

45 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uA
.
f
 = 
a
;

48  
	`so·Êﬂt_isSigNaNExtF80UI
–
uA
.
s
.
signExp
, uA.s.
signif
 );

50 
	}
}

	@src/softfloat/source/extF80_le.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80_À
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

50 
uöt_Á°16_t
 
uiB64
;

51 
uöt_Á°64_t
 
uiB0
;

52 
boﬁ
 
signA
, 
signB
;

54 
uA
.
f
 = 
a
;

55 
uiA64
 = 
uA
.
s
.
signExp
;

56 
uiA0
 = 
uA
.
s
.
signif
;

57 
uB
.
f
 = 
b
;

58 
uiB64
 = 
uB
.
s
.
signExp
;

59 
uiB0
 = 
uB
.
s
.
signif
;

60 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

61 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62  
Ál£
;

64 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

65 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

67 (
signA
 !
signB
)

68 ? 
signA
 || ! (((
uiA64
 | 
uiB64
Ë& 0x7FFFË| 
uiA0
 | 
uiB0
)

69 : ((
uiA64
 =
uiB64
Ë&& (
uiA0
 =
uiB0
))

70 || (
signA
 ^ 
	`so·Êﬂt_…128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 ));

72 
	}
}

	@src/softfloat/source/extF80_le_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80_À_quõt
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

50 
uöt_Á°16_t
 
uiB64
;

51 
uöt_Á°64_t
 
uiB0
;

52 
boﬁ
 
signA
, 
signB
;

54 
uA
.
f
 = 
a
;

55 
uiA64
 = 
uA
.
s
.
signExp
;

56 
uiA0
 = 
uA
.
s
.
signif
;

57 
uB
.
f
 = 
b
;

58 
uiB64
 = 
uB
.
s
.
signExp
;

59 
uiB0
 = 
uB
.
s
.
signif
;

60 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

62 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 )

63 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 )

65 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

67  
Ál£
;

69 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

70 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

72 (
signA
 !
signB
)

73 ? 
signA
 || ! (((
uiA64
 | 
uiB64
Ë& 0x7FFFË| 
uiA0
 | 
uiB0
)

74 : ((
uiA64
 =
uiB64
Ë&& (
uiA0
 =
uiB0
))

75 || (
signA
 ^ 
	`so·Êﬂt_…128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 ));

77 
	}
}

	@src/softfloat/source/extF80_lt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80_…
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

50 
uöt_Á°16_t
 
uiB64
;

51 
uöt_Á°64_t
 
uiB0
;

52 
boﬁ
 
signA
, 
signB
;

54 
uA
.
f
 = 
a
;

55 
uiA64
 = 
uA
.
s
.
signExp
;

56 
uiA0
 = 
uA
.
s
.
signif
;

57 
uB
.
f
 = 
b
;

58 
uiB64
 = 
uB
.
s
.
signExp
;

59 
uiB0
 = 
uB
.
s
.
signif
;

60 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

61 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62  
Ál£
;

64 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

65 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

67 (
signA
 !
signB
)

68 ? 
signA
 && (((
uiA64
 | 
uiB64
Ë& 0x7FFFË| 
uiA0
 | 
uiB0
)

69 : ((
uiA64
 !
uiB64
Ë|| (
uiA0
 !
uiB0
))

70 && (
signA
 ^ 
	`so·Êﬂt_…128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 ));

72 
	}
}

	@src/softfloat/source/extF80_lt_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$extF80_…_quõt
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

50 
uöt_Á°16_t
 
uiB64
;

51 
uöt_Á°64_t
 
uiB0
;

52 
boﬁ
 
signA
, 
signB
;

54 
uA
.
f
 = 
a
;

55 
uiA64
 = 
uA
.
s
.
signExp
;

56 
uiA0
 = 
uA
.
s
.
signif
;

57 
uB
.
f
 = 
b
;

58 
uiB64
 = 
uB
.
s
.
signExp
;

59 
uiB0
 = 
uB
.
s
.
signif
;

60 i‡–
	`isNaNExtF80UI
–
uiA64
, 
uiA0
 ) || isNaNExtF80UI–
uiB64
, 
uiB0
 ) ) {

62 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiA64
, 
uiA0
 )

63 || 
	`so·Êﬂt_isSigNaNExtF80UI
–
uiB64
, 
uiB0
 )

65 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

67  
Ál£
;

69 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

70 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

72 (
signA
 !
signB
)

73 ? 
signA
 && (((
uiA64
 | 
uiB64
Ë& 0x7FFFË| 
uiA0
 | 
uiB0
)

74 : ((
uiA64
 !
uiB64
Ë|| (
uiA0
 !
uiB0
))

75 && (
signA
 ^ 
	`so·Êﬂt_…128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 ));

77 
	}
}

	@src/softfloat/source/extF80_mul.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t
 
	$extF80_mul
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 
boﬁ
 
signA
;

50 
öt_Á°32_t
 
expA
;

51 
uöt_Á°64_t
 
sigA
;

52 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

53 
uöt_Á°16_t
 
uiB64
;

54 
uöt_Á°64_t
 
uiB0
;

55 
boﬁ
 
signB
;

56 
öt_Á°32_t
 
expB
;

57 
uöt_Á°64_t
 
sigB
;

58 
boﬁ
 
signZ
;

59 
uöt_Á°64_t
 
magBôs
;

60 
exp32_sig64
 
n‹mExpSig
;

61 
öt_Á°32_t
 
expZ
;

62 
uöt128
 
sig128Z
, 
uiZ
;

63 
uöt_Á°16_t
 
uiZ64
;

64 
uöt_Á°64_t
 
uiZ0
;

65 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

69 
uA
.
f
 = 
a
;

70 
uiA64
 = 
uA
.
s
.
signExp
;

71 
uiA0
 = 
uA
.
s
.
signif
;

72 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

73 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

74 
sigA
 = 
uiA0
;

75 
uB
.
f
 = 
b
;

76 
uiB64
 = 
uB
.
s
.
signExp
;

77 
uiB0
 = 
uB
.
s
.
signif
;

78 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

79 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

80 
sigB
 = 
uiB0
;

81 
signZ
 = 
signA
 ^ 
signB
;

84 i‡–
expA
 == 0x7FFF ) {

86 (
sigA
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

87 || ((
expB
 =0x7FFFË&& (
sigB
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )))

89 
¥›ag©eNaN
;

91 
magBôs
 = 
expB
 | 
sigB
;

92 
öfArg
;

94 i‡–
expB
 == 0x7FFF ) {

95 i‡–
sigB
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

96 
magBôs
 = 
expA
 | 
sigA
;

97 
öfArg
;

101 i‡–! 
expA
 )ÉxpA = 1;

102 i‡–! (
sigA
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

103 i‡–! 
sigA
 ) 
zîo
;

104 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigA
 );

105 
expA
 +
n‹mExpSig
.
exp
;

106 
sigA
 = 
n‹mExpSig
.
sig
;

108 i‡–! 
expB
 )ÉxpB = 1;

109 i‡–! (
sigB
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

110 i‡–! 
sigB
 ) 
zîo
;

111 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigB
 );

112 
expB
 +
n‹mExpSig
.
exp
;

113 
sigB
 = 
n‹mExpSig
.
sig
;

117 
expZ
 = 
expA
 + 
expB
 - 0x3FFE;

118 
sig128Z
 = 
	`so·Êﬂt_mul64To128
–
sigA
, 
sigB
 );

119 i‡–
sig128Z
.
v64
 < 
	`UINT64_C
( 0x8000000000000000 ) ) {

120 --
expZ
;

121 
sig128Z
 =

122 
	`so·Êﬂt_add128
(

123 
sig128Z
.
v64
, sig128Z.
v0
, sig128Z.v64, sig128Z.v0 );

126 
	`so·Êﬂt_roundPackToExtF80
(

127 
signZ
, 
expZ
, 
sig128Z
.
v64
, sig128Z.
v0
, 
extF80_roundögPªcisi⁄
 );

130 
¥›ag©eNaN
:

131 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNExtF80UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

132 
uiZ64
 = 
uiZ
.
v64
;

133 
uiZ0
 = 
uiZ
.
v0
;

134 
uiZ
;

137 
öfArg
:

138 i‡–! 
magBôs
 ) {

139 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

140 
uiZ64
 = 
deÁu…NaNExtF80UI64
;

141 
uiZ0
 = 
deÁu…NaNExtF80UI0
;

143 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0x7FFF );

144 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

146 
uiZ
;

149 
zîo
:

150 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0 );

151 
uiZ0
 = 0;

152 
uiZ
:

153 
uZ
.
s
.
signExp
 = 
uiZ64
;

154 
uZ
.
s
.
signif
 = 
uiZ0
;

155  
uZ
.
f
;

157 
	}
}

	@src/softfloat/source/extF80_rem.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t
 
	$extF80_ªm
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 
boﬁ
 
signA
;

50 
öt_Á°32_t
 
expA
;

51 
uöt_Á°64_t
 
sigA
;

52 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

53 
uöt_Á°16_t
 
uiB64
;

54 
uöt_Á°64_t
 
uiB0
;

55 
öt_Á°32_t
 
expB
;

56 
uöt_Á°64_t
 
sigB
;

57 
exp32_sig64
 
n‹mExpSig
;

58 
öt_Á°32_t
 
expDiff
;

59 
uöt128
 
ªm
, 
shi·edSigB
;

60 
uöt_Á°32_t
 
q
, 
ªcù32
;

61 
uöt_Á°64_t
 
q64
;

62 
uöt128
 
ãrm
, 
ÆtRem
, 
mónRem
;

63 
boﬁ
 
signRem
;

64 
uöt128
 
uiZ
;

65 
uöt_Á°16_t
 
uiZ64
;

66 
uöt_Á°64_t
 
uiZ0
;

67 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

71 
uA
.
f
 = 
a
;

72 
uiA64
 = 
uA
.
s
.
signExp
;

73 
uiA0
 = 
uA
.
s
.
signif
;

74 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

75 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

76 
sigA
 = 
uiA0
;

77 
uB
.
f
 = 
b
;

78 
uiB64
 = 
uB
.
s
.
signExp
;

79 
uiB0
 = 
uB
.
s
.
signif
;

80 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

81 
sigB
 = 
uiB0
;

84 i‡–
expA
 == 0x7FFF ) {

86 (
sigA
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

87 || ((
expB
 =0x7FFFË&& (
sigB
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )))

89 
¥›ag©eNaN
;

91 
övÆid
;

93 i‡–
expB
 == 0x7FFF ) {

94 i‡–
sigB
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

100 
expB
 +=ÉxpB;

104 i‡–! 
expB
 )ÉxpB = 1;

105 i‡–! (
sigB
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

106 i‡–! 
sigB
 ) 
övÆid
;

107 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigB
 );

108 
expB
 +
n‹mExpSig
.
exp
;

109 
sigB
 = 
n‹mExpSig
.
sig
;

111 i‡–! 
expA
 )ÉxpA = 1;

112 i‡–! (
sigA
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

113 i‡–! 
sigA
 ) {

114 
expA
 = 0;

115 
c›yA
;

117 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigA
 );

118 
expA
 +
n‹mExpSig
.
exp
;

119 
sigA
 = 
n‹mExpSig
.
sig
;

123 
expDiff
 = 
expA
 - 
expB
;

124 i‡–
expDiff
 < -1 ) 
c›yA
;

125 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigA
, 32 );

126 
shi·edSigB
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigB
, 32 );

127 i‡–
expDiff
 < 1 ) {

128 i‡–
expDiff
 ) {

129 --
expB
;

130 
shi·edSigB
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigB
, 33 );

131 
q
 = 0;

133 
q
 = (
sigB
 <
sigA
);

134 i‡–
q
 ) {

135 
ªm
 =

136 
	`so·Êﬂt_sub128
(

137 
ªm
.
v64
,Ñem.
v0
, 
shi·edSigB
.v64, shiftedSigB.v0 );

141 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
sigB
>>32 );

142 
expDiff
 -= 30;

144 
q64
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë(
ªm
.
v64
>>2Ë* 
ªcù32
;

145 i‡–
expDiff
 < 0 ) ;

146 
q
 = (
q64
 + 0x80000000)>>32;

147 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 29 );

148 
ãrm
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–
sigB
, 
q
 );

149 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

150 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

151 
ªm
 =

152 
	`so·Êﬂt_add128
(

153 
ªm
.
v64
,Ñem.
v0
, 
shi·edSigB
.v64, shiftedSigB.v0 );

155 
expDiff
 -= 29;

160 
q
 = (
uöt32_t
Ë(
q64
>>32)>>(~
expDiff
 & 31);

161 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 
expDiff
 + 30 );

162 
ãrm
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–
sigB
, 
q
 );

163 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

164 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

165 
ÆtRem
 =

166 
	`so·Êﬂt_add128
(

167 
ªm
.
v64
,Ñem.
v0
, 
shi·edSigB
.v64, shiftedSigB.v0 );

168 
£À˘Rem
;

174 
ÆtRem
 = 
ªm
;

175 ++
q
;

176 
ªm
 =

177 
	`so·Êﬂt_sub128
(

178 
ªm
.
v64
,Ñem.
v0
, 
shi·edSigB
.v64, shiftedSigB.v0 );

179 }  ! (
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 )) );

180 
£À˘Rem
:

181 
mónRem
 = 
	`so·Êﬂt_add128
–
ªm
.
v64
,Ñem.
v0
, 
ÆtRem
.v64,áltRem.v0 );

183 (
mónRem
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ))

184 || (! (
mónRem
.
v64
 | mónRem.
v0
Ë&& (
q
 & 1))

186 
ªm
 = 
ÆtRem
;

188 
signRem
 = 
signA
;

189 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

190 
signRem
 = ! signRem;

191 
ªm
 = 
	`so·Êﬂt_sub128
–0, 0,Ñem.
v64
,Ñem.
v0
 );

194 
	`so·Êﬂt_n‹mRoundPackToExtF80
(

195 
signRem
, 
ªm
.
v64
 |Ñem.
v0
 ? 
expB
 + 32 : 0,Ñem.v64,Ñem.v0, 80 );

198 
¥›ag©eNaN
:

199 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNExtF80UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

200 
uiZ64
 = 
uiZ
.
v64
;

201 
uiZ0
 = 
uiZ
.
v0
;

202 
uiZ
;

205 
övÆid
:

206 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

207 
uiZ64
 = 
deÁu…NaNExtF80UI64
;

208 
uiZ0
 = 
deÁu…NaNExtF80UI0
;

209 
uiZ
;

212 
c›yA
:

213 i‡–
expA
 < 1 ) {

214 
sigA
 >>1 - 
expA
;

215 
expA
 = 0;

217 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signA
, 
expA
 );

218 
uiZ0
 = 
sigA
;

219 
uiZ
:

220 
uZ
.
s
.
signExp
 = 
uiZ64
;

221 
uZ
.
s
.
signif
 = 
uiZ0
;

222  
uZ
.
f
;

224 
	}
}

	@src/softfloat/source/extF80_roundToInt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t


45 
	$extF80_roundToI¡
–
extFlﬂt80_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

47 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

48 
uöt_Á°16_t
 
uiA64
, 
signUI64
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
sigA
;

51 
uöt_Á°16_t
 
uiZ64
;

52 
uöt_Á°64_t
 
sigZ
;

53 
exp32_sig64
 
n‹mExpSig
;

54 
uöt128
 
uiZ
;

55 
uöt_Á°64_t
 
œ°BôMask
, 
roundBôsMask
;

56 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

60 
uA
.
f
 = 
a
;

61 
uiA64
 = 
uA
.
s
.
signExp
;

62 
signUI64
 = 
uiA64
 & 
	`∑ckToExtF80UI64
( 1, 0 );

63 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

64 
sigA
 = 
uA
.
s
.
signif
;

67 i‡–!(
sigA
 & 
	`UINT64_C
–0x8000000000000000 )Ë&& (
exp
 != 0x7FFF) ) {

68 i‡–!
sigA
 ) {

69 
uiZ64
 = 
signUI64
;

70 
sigZ
 = 0;

71 
uiZ
;

73 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigA
 );

74 
exp
 +
n‹mExpSig
.exp;

75 
sigA
 = 
n‹mExpSig
.
sig
;

79 i‡–0x403E <
exp
 ) {

80 i‡–
exp
 == 0x7FFF ) {

81 i‡–
sigA
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

82 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNExtF80UI
–
uiA64
, 
sigA
, 0, 0 );

83 
uiZ64
 = 
uiZ
.
v64
;

84 
sigZ
 = 
uiZ
.
v0
;

85 
uiZ
;

87 
sigZ
 = 
	`UINT64_C
( 0x8000000000000000 );

89 
sigZ
 = 
sigA
;

91 
uiZ64
 = 
signUI64
 | 
exp
;

92 
uiZ
;

94 i‡–
exp
 <= 0x3FFE ) {

95 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

96  
roundögMode
 ) {

97 
so·Êﬂt_round_√¨_eví
:

98 i‡–!(
sigA
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )) ) ;

99 
so·Êﬂt_round_√¨_maxMag
:

100 i‡–
exp
 =0x3FFE ) 
mag1
;

102 
so·Êﬂt_round_mö
:

103 i‡–
signUI64
 ) 
mag1
;

105 
so·Êﬂt_round_max
:

106 i‡–!
signUI64
 ) 
mag1
;

108 #ifde‡
SOFTFLOAT_ROUND_ODD


109 
so·Êﬂt_round_odd
:

110 
mag1
;

113 
uiZ64
 = 
signUI64
;

114 
sigZ
 = 0;

115 
uiZ
;

116 
mag1
:

117 
uiZ64
 = 
signUI64
 | 0x3FFF;

118 
sigZ
 = 
	`UINT64_C
( 0x8000000000000000 );

119 
uiZ
;

123 
uiZ64
 = 
signUI64
 | 
exp
;

124 
œ°BôMask
 = (
uöt_Á°64_t
Ë1<<(0x403E - 
exp
);

125 
roundBôsMask
 = 
œ°BôMask
 - 1;

126 
sigZ
 = 
sigA
;

127 i‡–
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
 ) {

128 
sigZ
 +
œ°BôMask
>>1;

129 } i‡–
roundögMode
 =
so·Êﬂt_round_√¨_eví
 ) {

130 
sigZ
 +
œ°BôMask
>>1;

131 i‡–!(
sigZ
 & 
roundBôsMask
ËËsigZ &~
œ°BôMask
;

133 
roundögMode
 =(
signUI64
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
)

135 
sigZ
 +
roundBôsMask
;

137 
sigZ
 &~
roundBôsMask
;

138 i‡–!
sigZ
 ) {

139 ++
uiZ64
;

140 
sigZ
 = 
	`UINT64_C
( 0x8000000000000000 );

142 i‡–
sigZ
 !
sigA
 ) {

143 #ifde‡
SOFTFLOAT_ROUND_ODD


144 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
sigZ
 |
œ°BôMask
;

146 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

148 
uiZ
:

149 
uZ
.
s
.
signExp
 = 
uiZ64
;

150 
uZ
.
s
.
signif
 = 
sigZ
;

151  
uZ
.
f
;

153 
	}
}

	@src/softfloat/source/extF80_sqrt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t
 
	$extF80_sqπ
–
extFlﬂt80_t
 
a
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 
boﬁ
 
signA
;

50 
öt_Á°32_t
 
expA
;

51 
uöt_Á°64_t
 
sigA
;

52 
uöt128
 
uiZ
;

53 
uöt_Á°16_t
 
uiZ64
;

54 
uöt_Á°64_t
 
uiZ0
;

55 
exp32_sig64
 
n‹mExpSig
;

56 
öt_Á°32_t
 
expZ
;

57 
uöt_Á°32_t
 
sig32A
, 
ªcùSqπ32
, 
sig32Z
;

58 
uöt128
 
ªm
;

59 
uöt_Á°64_t
 
q
, 
x64
, 
sigZ
;

60 
uöt128
 
y
, 
ãrm
;

61 
uöt_Á°64_t
 
sigZExåa
;

62 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

66 
uA
.
f
 = 
a
;

67 
uiA64
 = 
uA
.
s
.
signExp
;

68 
uiA0
 = 
uA
.
s
.
signif
;

69 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

70 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

71 
sigA
 = 
uiA0
;

74 i‡–
expA
 == 0x7FFF ) {

75 i‡–
sigA
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

76 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNExtF80UI
–
uiA64
, 
uiA0
, 0, 0 );

77 
uiZ64
 = 
uiZ
.
v64
;

78 
uiZ0
 = 
uiZ
.
v0
;

79 
uiZ
;

81 i‡–! 
signA
 )  
a
;

82 
övÆid
;

86 i‡–
signA
 ) {

87 i‡–! 
sigA
 ) 
zîo
;

88 
övÆid
;

92 i‡–! 
expA
 )ÉxpA = 1;

93 i‡–! (
sigA
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

94 i‡–! 
sigA
 ) 
zîo
;

95 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigA
 );

96 
expA
 +
n‹mExpSig
.
exp
;

97 
sigA
 = 
n‹mExpSig
.
sig
;

104 
expZ
 = ((
expA
 - 0x3FFF)>>1) + 0x3FFF;

105 
expA
 &= 1;

106 
sig32A
 = 
sigA
>>32;

107 
ªcùSqπ32
 = 
	`so·Êﬂt_≠¥oxRecùSqπ32_1
–
expA
, 
sig32A
 );

108 
sig32Z
 = ((
uöt_Á°64_t
Ë
sig32A
 * 
ªcùSqπ32
)>>32;

109 i‡–
expA
 ) {

110 
sig32Z
 >>= 1;

111 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigA
, 61 );

113 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigA
, 62 );

115 
ªm
.
v64
 -(
uöt_Á°64_t
Ë
sig32Z
 * sig32Z;

118 
q
 = ((
uöt32_t
Ë(
ªm
.
v64
>>2Ë* (
uöt_Á°64_t
Ë
ªcùSqπ32
)>>32;

119 
x64
 = (
uöt_Á°64_t
Ë
sig32Z
<<32;

120 
sigZ
 = 
x64
 + (
q
<<3);

121 
y
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
ªm
.
v64
,Ñem.
v0
, 29 );

126 
ãrm
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–
x64
 + 
sigZ
, 
q
 );

127 
ªm
 = 
	`so·Êﬂt_sub128
–
y
.
v64
, y.
v0
, 
ãrm
.v64,Åerm.v0 );

128 i‡–! (
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 )) ) ;

129 --
q
;

130 
sigZ
 -= 1<<3;

134 
q
 = (((
ªm
.
v64
>>2Ë* 
ªcùSqπ32
)>>32) + 2;

135 
x64
 = 
sigZ
;

136 
sigZ
 = (sigZ<<1Ë+ (
q
>>25);

137 
sigZExåa
 = (
uöt64_t
Ë(
q
<<39);

140 i‡–(
q
 & 0xFFFFFF) <= 2 ) {

141 
q
 &~(
uöt_Á°64_t
) 0xFFFF;

142 
sigZExåa
 = (
uöt64_t
Ë(
q
<<39);

143 
ãrm
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–
x64
 + (
q
>>27), q );

144 
x64
 = (
uöt32_t
Ë(
q
<<5Ë* (
uöt_Á°64_t
) (uint32_t) q;

145 
ãrm
 = 
	`so·Êﬂt_add128
–ãrm.
v64
,Åîm.
v0
, 0, 
x64
 );

146 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 28 );

147 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

148 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

149 i‡–! 
sigZExåa
 ) --
sigZ
;

150 --
sigZExåa
;

152 i‡–
ªm
.
v64
 |Ñem.
v0
 ) 
sigZExåa
 |= 1;

156 
	`so·Êﬂt_roundPackToExtF80
(

157 0, 
expZ
, 
sigZ
, 
sigZExåa
, 
extF80_roundögPªcisi⁄
 );

160 
övÆid
:

161 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

162 
uiZ64
 = 
deÁu…NaNExtF80UI64
;

163 
uiZ0
 = 
deÁu…NaNExtF80UI0
;

164 
uiZ
;

167 
zîo
:

168 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signA
, 0 );

169 
uiZ0
 = 0;

170 
uiZ
:

171 
uZ
.
s
.
signExp
 = 
uiZ64
;

172 
uZ
.
s
.
signif
 = 
uiZ0
;

173  
uZ
.
f
;

175 
	}
}

	@src/softfloat/source/extF80_sub.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
extFlﬂt80_t
 
	$extF80_sub
–
extFlﬂt80_t
 
a
,ÉxtFlﬂt80_à
b
 )

45 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

46 
uöt_Á°16_t
 
uiA64
;

47 
uöt_Á°64_t
 
uiA0
;

48 
boﬁ
 
signA
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uB
;

50 
uöt_Á°16_t
 
uiB64
;

51 
uöt_Á°64_t
 
uiB0
;

52 
boﬁ
 
signB
;

53 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

54 
extFlﬂt80_t


55 (*
magsFuncPå
)(

56 
uöt_Á°16_t
, 
uöt_Á°64_t
, uöt_Á°16_t, uöt_Á°64_t, 
boﬁ
 );

59 
uA
.
f
 = 
a
;

60 
uiA64
 = 
uA
.
s
.
signExp
;

61 
uiA0
 = 
uA
.
s
.
signif
;

62 
signA
 = 
	`signExtF80UI64
–
uiA64
 );

63 
uB
.
f
 = 
b
;

64 
uiB64
 = 
uB
.
s
.
signExp
;

65 
uiB0
 = 
uB
.
s
.
signif
;

66 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

67 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

68 i‡–
signA
 =
signB
 ) {

69  
	`so·Êﬂt_subMagsExtF80
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

71  
	`so·Êﬂt_addMagsExtF80
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

74 
magsFuncPå
 =

75 (
signA
 =
signB
Ë? 
so·Êﬂt_subMagsExtF80
 : 
so·Êﬂt_addMagsExtF80
;

76  (*
magsFuncPå
)–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

79 
	}
}

	@src/softfloat/source/extF80_to_f128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t
 
	$extF80_to_f128
–
extFlﬂt80_t
 
a
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 
uöt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt128
 
uiZ
;

53 
boﬁ
 
sign
;

54 
uöt128
 
‰ac128
;

55 
ui128_f128
 
uZ
;

57 
uA
.
f
 = 
a
;

58 
uiA64
 = 
uA
.
s
.
signExp
;

59 
uiA0
 = 
uA
.
s
.
signif
;

60 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

61 
‰ac
 = 
uiA0
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF );

62 i‡–(
exp
 =0x7FFFË&& 
‰ac
 ) {

63 
	`so·Êﬂt_extF80UIToComm⁄NaN
–
uiA64
, 
uiA0
, &
comm⁄NaN
 );

64 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF128UI
–&
comm⁄NaN
 );

66 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

67 
‰ac128
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
‰ac
, 49 );

68 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 
exp
, 
‰ac128
.v64 );

69 
uiZ
.
v0
 = 
‰ac128
.v0;

71 
uZ
.
ui
 = 
uiZ
;

72  
uZ
.
f
;

74 
	}
}

	@src/softfloat/source/extF80_to_f16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$extF80_to_f16
–
extFlﬂt80_t
 
a
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig
;

52 
comm⁄NaN
 commonNaN;

53 
uöt_Á°16_t
 
uiZ
, 
sig16
;

54 
ui16_f16
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA64
 = 
uA
.
s
.
signExp
;

60 
uiA0
 = 
uA
.
s
.
signif
;

61 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

62 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

63 
sig
 = 
uiA0
;

66 i‡–
exp
 == 0x7FFF ) {

67 i‡–
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

68 
	`so·Êﬂt_extF80UIToComm⁄NaN
–
uiA64
, 
uiA0
, &
comm⁄NaN
 );

69 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF16UI
–&
comm⁄NaN
 );

71 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0x1F, 0 );

73 
uiZ
;

77 
sig16
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
sig
, 49 );

78 i‡–! (
exp
 | 
sig16
) ) {

79 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0, 0 );

80 
uiZ
;

84 
exp
 -= 0x3FF1;

85 i‡– (
öt_Á°16_t
Ë<  (
öt_Á°32_t
) ) {

86 i‡–
exp
 < -0x40 )Éxp = -0x40;

88  
	`so·Êﬂt_roundPackToF16
–
sign
, 
exp
, 
sig16
 );

91 
uiZ
:

92 
uZ
.
ui
 = 
uiZ
;

93  
uZ
.
f
;

95 
	}
}

	@src/softfloat/source/extF80_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$extF80_to_f32
–
extFlﬂt80_t
 
a
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig
;

52 
comm⁄NaN
 commonNaN;

53 
uöt_Á°32_t
 
uiZ
, 
sig32
;

54 
ui32_f32
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA64
 = 
uA
.
s
.
signExp
;

60 
uiA0
 = 
uA
.
s
.
signif
;

61 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

62 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

63 
sig
 = 
uiA0
;

66 i‡–
exp
 == 0x7FFF ) {

67 i‡–
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

68 
	`so·Êﬂt_extF80UIToComm⁄NaN
–
uiA64
, 
uiA0
, &
comm⁄NaN
 );

69 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF32UI
–&
comm⁄NaN
 );

71 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0xFF, 0 );

73 
uiZ
;

77 
sig32
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
sig
, 33 );

78 i‡–! (
exp
 | 
sig32
) ) {

79 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0, 0 );

80 
uiZ
;

84 
exp
 -= 0x3F81;

85 i‡– (
öt_Á°16_t
Ë<  (
öt_Á°32_t
) ) {

86 i‡–
exp
 < -0x1000 )Éxp = -0x1000;

88  
	`so·Êﬂt_roundPackToF32
–
sign
, 
exp
, 
sig32
 );

91 
uiZ
:

92 
uZ
.
ui
 = 
uiZ
;

93  
uZ
.
f
;

95 
	}
}

	@src/softfloat/source/extF80_to_f64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$extF80_to_f64
–
extFlﬂt80_t
 
a
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
uöt_Á°64_t
 
uiA0
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig
;

52 
comm⁄NaN
 commonNaN;

53 
uöt_Á°64_t
 
uiZ
;

54 
ui64_f64
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA64
 = 
uA
.
s
.
signExp
;

60 
uiA0
 = 
uA
.
s
.
signif
;

61 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

62 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

63 
sig
 = 
uiA0
;

66 i‡–! (
exp
 | 
sig
) ) {

67 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0, 0 );

68 
uiZ
;

72 i‡–
exp
 == 0x7FFF ) {

73 i‡–
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

74 
	`so·Êﬂt_extF80UIToComm⁄NaN
–
uiA64
, 
uiA0
, &
comm⁄NaN
 );

75 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF64UI
–&
comm⁄NaN
 );

77 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0x7FF, 0 );

79 
uiZ
;

83 
sig
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
( sig, 1 );

84 
exp
 -= 0x3C01;

85 i‡– (
öt_Á°16_t
Ë<  (
öt_Á°32_t
) ) {

86 i‡–
exp
 < -0x1000 )Éxp = -0x1000;

88  
	`so·Êﬂt_roundPackToF64
–
sign
, 
exp
, 
sig
 );

91 
uiZ
:

92 
uZ
.
ui
 = 
uiZ
;

93  
uZ
.
f
;

95 
	}
}

	@src/softfloat/source/extF80_to_i32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t


45 
	$extF80_to_i32
–
extFlﬂt80_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

47 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

48 
uöt_Á°16_t
 
uiA64
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig
;

52 
öt_Á°32_t
 
shi·Di°
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
s
.
signExp
;

58 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

59 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

60 
sig
 = 
uA
.
s
.
signif
;

63 #i‡(
i32_‰omNaN
 !
i32_‰omPosOvîÊow
Ë|| (i32_‰omNaN !
i32_‰omNegOvîÊow
)

64 i‡–(
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )) ) {

65 #i‡(
i32_‰omNaN
 =
i32_‰omPosOvîÊow
)

66 
sign
 = 0;

67 #ñi‡(
i32_‰omNaN
 =
i32_‰omNegOvîÊow
)

68 
sign
 = 1;

70 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

71  
i32_‰omNaN
;

77 
shi·Di°
 = 0x4032 - 
exp
;

78 i‡–
shi·Di°
 <= 0 ) shiftDist = 1;

79 
sig
 = 
	`so·Êﬂt_shi·RightJam64
–sig, 
shi·Di°
 );

80  
	`so·Êﬂt_roundToI32
–
sign
, 
sig
, 
roundögMode
, 
exa˘
 );

82 
	}
}

	@src/softfloat/source/extF80_to_i32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$extF80_to_i32_r_möMag
–
extFlﬂt80_t
 
a
, 
boﬁ
 
exa˘
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
öt_Á°32_t
 
exp
;

49 
uöt_Á°64_t
 
sig
;

50 
öt_Á°32_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
öt_Á°32_t
 
absZ
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
s
.
signExp
;

58 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

59 
sig
 = 
uA
.
s
.
signif
;

62 
shi·Di°
 = 0x403E - 
exp
;

63 i‡–64 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

72 i‡–
shi·Di°
 < 33 ) {

74 (
uiA64
 =
	`∑ckToExtF80UI64
( 1, 0x401E ))

75 && (
sig
 < 
	`UINT64_C
( 0x8000000100000000 ))

77 i‡–
exa˘
 && (
sig
 & 
	`UINT64_C
( 0x00000000FFFFFFFF )) ) {

78 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

82 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

84 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

85 ? 
i32_‰omNaN


86 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

90 
absZ
 = 
sig
>>
shi·Di°
;

91 i‡–
exa˘
 && ((
uöt_Á°64_t
Ë(
uöt_Á°32_t
Ë
absZ
<<
shi·Di°
 !
sig
) ) {

92 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

94  
sign
 ? -
absZ
 :ábsZ;

96 
	}
}

	@src/softfloat/source/extF80_to_i64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t


45 
	$extF80_to_i64
–
extFlﬂt80_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

47 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

48 
uöt_Á°16_t
 
uiA64
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig
;

52 
öt_Á°32_t
 
shi·Di°
;

53 
uöt_Á°64_t
 
sigExåa
;

54 
uöt64_exåa
 
sig64Exåa
;

58 
uA
.
f
 = 
a
;

59 
uiA64
 = 
uA
.
s
.
signExp
;

60 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

61 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

62 
sig
 = 
uA
.
s
.
signif
;

65 
shi·Di°
 = 0x403E - 
exp
;

66 i‡–
shi·Di°
 <= 0 ) {

69 i‡–
shi·Di°
 ) {

70 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

72 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

73 ? 
i64_‰omNaN


74 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

78 
sigExåa
 = 0;

82 
sig64Exåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig
, 0, 
shi·Di°
 );

83 
sig
 = 
sig64Exåa
.
v
;

84 
sigExåa
 = 
sig64Exåa
.
exåa
;

86  
	`so·Êﬂt_roundToI64
–
sign
, 
sig
, 
sigExåa
, 
roundögMode
, 
exa˘
 );

88 
	}
}

	@src/softfloat/source/extF80_to_i64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$extF80_to_i64_r_möMag
–
extFlﬂt80_t
 
a
, 
boﬁ
 
exa˘
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
öt_Á°32_t
 
exp
;

49 
uöt_Á°64_t
 
sig
;

50 
öt_Á°32_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
öt_Á°64_t
 
absZ
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
s
.
signExp
;

58 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

59 
sig
 = 
uA
.
s
.
signif
;

62 
shi·Di°
 = 0x403E - 
exp
;

63 i‡–64 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

72 i‡–
shi·Di°
 <= 0 ) {

74 (
uiA64
 =
	`∑ckToExtF80UI64
( 1, 0x403E ))

75 && (
sig
 =
	`UINT64_C
( 0x8000000000000000 ))

77  -
	`INT64_C
( 0x7FFFFFFFFFFFFFFF ) - 1;

79 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

81 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

82 ? 
i64_‰omNaN


83 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

87 
absZ
 = 
sig
>>
shi·Di°
;

88 i‡–
exa˘
 && (
uöt64_t
Ë(
sig
<<(-
shi·Di°
 & 63)) ) {

89 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

91  
sign
 ? -
absZ
 :ábsZ;

93 
	}
}

	@src/softfloat/source/extF80_to_ui32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t


45 
	$extF80_to_ui32
–
extFlﬂt80_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

47 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

48 
uöt_Á°16_t
 
uiA64
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig
;

52 
öt_Á°32_t
 
shi·Di°
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
s
.
signExp
;

58 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

59 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

60 
sig
 = 
uA
.
s
.
signif
;

63 #i‡(
ui32_‰omNaN
 !
ui32_‰omPosOvîÊow
Ë|| (ui32_‰omNaN !
ui32_‰omNegOvîÊow
)

64 i‡–(
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )) ) {

65 #i‡(
ui32_‰omNaN
 =
ui32_‰omPosOvîÊow
)

66 
sign
 = 0;

67 #ñi‡(
ui32_‰omNaN
 =
ui32_‰omNegOvîÊow
)

68 
sign
 = 1;

70 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

71  
ui32_‰omNaN
;

77 
shi·Di°
 = 0x4032 - 
exp
;

78 i‡–
shi·Di°
 <= 0 ) shiftDist = 1;

79 
sig
 = 
	`so·Êﬂt_shi·RightJam64
–sig, 
shi·Di°
 );

80  
	`so·Êﬂt_roundToUI32
–
sign
, 
sig
, 
roundögMode
, 
exa˘
 );

82 
	}
}

	@src/softfloat/source/extF80_to_ui32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t
 
	$extF80_to_ui32_r_möMag
–
extFlﬂt80_t
 
a
, 
boﬁ
 
exa˘
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
öt_Á°32_t
 
exp
;

49 
uöt_Á°64_t
 
sig
;

50 
öt_Á°32_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°32_t
 
z
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
s
.
signExp
;

58 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

59 
sig
 = 
uA
.
s
.
signif
;

62 
shi·Di°
 = 0x403E - 
exp
;

63 i‡–64 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

72 i‡–
sign
 || (
shi·Di°
 < 32) ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

76 ? 
ui32_‰omNaN


77 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

81 
z
 = 
sig
>>
shi·Di°
;

82 i‡–
exa˘
 && ((
uöt_Á°64_t
Ë
z
<<
shi·Di°
 !
sig
) ) {

83 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

85  
z
;

87 
	}
}

	@src/softfloat/source/extF80_to_ui64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t


45 
	$extF80_to_ui64
–
extFlﬂt80_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

47 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

48 
uöt_Á°16_t
 
uiA64
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig
;

52 
öt_Á°32_t
 
shi·Di°
;

53 
uöt_Á°64_t
 
sigExåa
;

54 
uöt64_exåa
 
sig64Exåa
;

58 
uA
.
f
 = 
a
;

59 
uiA64
 = 
uA
.
s
.
signExp
;

60 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

61 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

62 
sig
 = 
uA
.
s
.
signif
;

65 
shi·Di°
 = 0x403E - 
exp
;

66 i‡–
shi·Di°
 < 0 ) {

67 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

69 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

70 ? 
ui64_‰omNaN


71 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

75 
sigExåa
 = 0;

76 i‡–
shi·Di°
 ) {

77 
sig64Exåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig
, 0, 
shi·Di°
 );

78 
sig
 = 
sig64Exåa
.
v
;

79 
sigExåa
 = 
sig64Exåa
.
exåa
;

81  
	`so·Êﬂt_roundToUI64
–
sign
, 
sig
, 
sigExåa
, 
roundögMode
, 
exa˘
 );

83 
	}
}

	@src/softfloat/source/extF80_to_ui64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t
 
	$extF80_to_ui64_r_möMag
–
extFlﬂt80_t
 
a
, 
boﬁ
 
exa˘
 )

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uA
;

47 
uöt_Á°16_t
 
uiA64
;

48 
öt_Á°32_t
 
exp
;

49 
uöt_Á°64_t
 
sig
;

50 
öt_Á°32_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°64_t
 
z
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
s
.
signExp
;

58 
exp
 = 
	`expExtF80UI64
–
uiA64
 );

59 
sig
 = 
uA
.
s
.
signif
;

62 
shi·Di°
 = 0x403E - 
exp
;

63 i‡–64 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signExtF80UI64
–
uiA64
 );

72 i‡–
sign
 || (
shi·Di°
 < 0) ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0x7FFFË&& (
sig
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

76 ? 
ui64_‰omNaN


77 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

81 
z
 = 
sig
>>
shi·Di°
;

82 i‡–
exa˘
 && (
z
<<
shi·Di°
 !
sig
) ) {

83 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

85  
z
;

87 
	}
}

	@src/softfloat/source/f128M_add.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f128M_add
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

48 c⁄° 
uöt64_t
 *
aWPå
, *
bWPå
;

49 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

50 
boﬁ
 
signA
;

51 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

52 
boﬁ
 
signB
;

53 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

54 
Êﬂt128_t


55 (*
magsFuncPå
)(

56 
uöt_Á°64_t
, uöt_Á°64_t, uöt_Á°64_t, uöt_Á°64_t, 
boﬁ
 );

59 
aWPå
 = (c⁄° 
uöt64_t
 *Ë
aPå
;

60 
bWPå
 = (c⁄° 
uöt64_t
 *Ë
bPå
;

61 
uiA64
 = 
aWPå
[
	`ödexW‹d
( 2, 1 )];

62 
uiA0
 = 
aWPå
[
	`ödexW‹d
( 2, 0 )];

63 
signA
 = 
	`signF128UI64
–
uiA64
 );

64 
uiB64
 = 
bWPå
[
	`ödexW‹d
( 2, 1 )];

65 
uiB0
 = 
bWPå
[
	`ödexW‹d
( 2, 0 )];

66 
signB
 = 
	`signF128UI64
–
uiB64
 );

67 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

68 i‡–
signA
 =
signB
 ) {

69 *
zPå
 = 
	`so·Êﬂt_addMagsF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

71 *
zPå
 = 
	`so·Êﬂt_subMagsF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

74 
magsFuncPå
 =

75 (
signA
 =
signB
Ë? 
so·Êﬂt_addMagsF128
 : 
so·Êﬂt_subMagsF128
;

76 *
zPå
 = (*
magsFuncPå
)–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

79 
	}
}

84 
	$f128M_add
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

87 
	`so·Êﬂt_addF128M
(

88 (c⁄° 
uöt32_t
 *Ë
aPå
,

89 (c⁄° 
uöt32_t
 *Ë
bPå
,

90 (
uöt32_t
 *Ë
zPå
,

91 
Ál£


94 
	}
}

	@src/softfloat/source/f128M_div.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


47 
	$f128M_div
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

50 *
zPå
 = 
	`f128_div
–*
aPå
, *
bPå
 );

52 
	}
}

57 
	$f128M_div
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

59 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

60 
uöt32_t
 *
zWPå
, 
uiA96
;

61 
boﬁ
 
signA
;

62 
öt32_t
 
expA
;

63 
uöt32_t
 
uiB96
;

64 
boﬁ
 
signB
;

65 
öt32_t
 
expB
;

66 
boﬁ
 
signZ
;

67 
uöt32_t
 
y
[5], 
sigB
[4];

68 
öt32_t
 
expZ
;

69 
uöt32_t
 
ªcù32
;

70 
ix
;

71 
uöt64_t
 
q64
;

72 
uöt32_t
 
q
, 
qs
[3], 
uiZ96
;

76 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

77 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

78 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

81 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

82 
signA
 = 
	`signF128UI96
–
uiA96
 );

83 
expA
 = 
	`expF128UI96
–
uiA96
 );

84 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

85 
signB
 = 
	`signF128UI96
–
uiB96
 );

86 
expB
 = 
	`expF128UI96
–
uiB96
 );

87 
signZ
 = 
signA
 ^ 
signB
;

90 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

91 i‡–
	`so·Êﬂt_åyPr›ag©eNaNF128M
–
aWPå
, 
bWPå
, 
zWPå
 ) ) ;

92 i‡–
expA
 == 0x7FFF ) {

93 i‡–
expB
 =0x7FFF ) 
övÆid
;

94 
öföôy
;

96 
zîo
;

100 
expA
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
aWPå
, 13, 
y
 );

101 
expB
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
bWPå
, 13, 
sigB
 );

102 i‡–
expA
 == -128 ) {

103 i‡–
expB
 =-128 ) 
övÆid
;

104 
zîo
;

106 i‡–
expB
 == -128 ) {

107 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_öföôe
 );

108 
öföôy
;

112 
expZ
 = 
expA
 - 
expB
 + 0x3FFE;

113 i‡–
	`so·Êﬂt_com∑ª128M
–
y
, 
sigB
 ) < 0 ) {

114 --
expZ
;

115 
	`so·Êﬂt_add128M
–
y
, y, y );

117 
ªcù32
 =

118 
	`so·Êﬂt_≠¥oxRecù32_1
(

119 ((
uöt64_t
Ë
sigB
[
	`ödexW‹d
( 4, 3 )]<<32 | sigB[indexWord( 4, 2 )])

122 
ix
 = 3;

124 
q64
 = (
uöt64_t
Ë
y
[
	`ödexW‹dHi
–4 )] * 
ªcù32
;

125 
q
 = (
q64
 + 0x80000000)>>32;

126 --
ix
;

127 i‡–
ix
 < 0 ) ;

128 
	`so·Êﬂt_ªmSãp128MBy32
–
y
, 29, 
sigB
, 
q
, y );

129 i‡–
y
[
	`ödexW‹dHi
( 4 )] & 0x80000000 ) {

130 --
q
;

131 
	`so·Êﬂt_add128M
–
y
, 
sigB
, y );

133 
qs
[
ix
] = 
q
;

137 i‡–((
q
 + 1) & 7) < 2 ) {

138 
	`so·Êﬂt_ªmSãp128MBy32
–
y
, 29, 
sigB
, 
q
, y );

139 i‡–
y
[
	`ödexW‹dHi
( 4 )] & 0x80000000 ) {

140 --
q
;

141 
	`so·Êﬂt_add128M
–
y
, 
sigB
, y );

142 } i‡–
	`so·Êﬂt_com∑ª128M
–
sigB
, 
y
 ) <= 0 ) {

143 ++
q
;

144 
	`so·Êﬂt_sub128M
–
y
, 
sigB
, y );

147 
y
[
	`ödexW‹dLo
–4 )] || y[
	`ödexW‹d
( 4, 1 )]

148 || (
y
[
	`ödexW‹d
( 4, 2 )] | y[indexWord( 4, 3 )])

150 
q
 |= 1;

155 
q64
 = (
uöt64_t
Ë
q
<<28;

156 
y
[
	`ödexW‹d
–5, 0 )] = 
q64
;

157 
q64
 = ((
uöt64_t
Ë
qs
[0]<<25) + (q64>>32);

158 
y
[
	`ödexW‹d
–5, 1 )] = 
q64
;

159 
q64
 = ((
uöt64_t
Ë
qs
[1]<<22) + (q64>>32);

160 
y
[
	`ödexW‹d
–5, 2 )] = 
q64
;

161 
q64
 = ((
uöt64_t
Ë
qs
[2]<<19) + (q64>>32);

162 
y
[
	`ödexW‹d
–5, 3 )] = 
q64
;

163 
y
[
	`ödexW‹d
–5, 4 )] = 
q64
>>32;

164 
	`so·Êﬂt_roundPackMToF128M
–
signZ
, 
expZ
, 
y
, 
zWPå
 );

168 
övÆid
:

169 
	`so·Êﬂt_övÆidF128M
–
zWPå
 );

173 
öföôy
:

174 
uiZ96
 = 
	`∑ckToF128UI96
–
signZ
, 0x7FFF, 0 );

175 
uiZ96
;

176 
zîo
:

177 
uiZ96
 = 
	`∑ckToF128UI96
–
signZ
, 0, 0 );

178 
uiZ96
:

179 
zWPå
[
	`ödexW‹dHi
–4 )] = 
uiZ96
;

180 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

181 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

182 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

184 
	}
}

	@src/softfloat/source/f128M_eq.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
boﬁ
 
	$f128M_eq
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

49  
	`f128_eq
–*
aPå
, *
bPå
 );

51 
	}
}

55 
boﬁ
 
	$f128M_eq
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

58 
uöt32_t
 
w‹dA
, 
w‹dB
, 
uiA96
, 
uiB96
;

59 
boﬁ
 
possibÀOµosôeZîos
;

60 
uöt32_t
 
mashW‹d
;

62 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

63 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

64 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 2 )];

65 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 2 )];

66 i‡–
w‹dA
 !
w‹dB
 ) 
Ál£_checkSigNaNs
;

67 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

68 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

69 
possibÀOµosôeZîos
 = 
Ál£
;

70 i‡–
uiA96
 !
uiB96
 ) {

71 
possibÀOµosôeZîos
 = (((
uiA96
 | 
uiB96
) & 0x7FFFFFFF) == 0);

72 i‡–! 
possibÀOµosôeZîos
 ) 
Ál£_checkSigNaNs
;

74 
mashW‹d
 = 
w‹dA
 | 
w‹dB
;

75 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )];

76 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 1 )];

77 i‡–
w‹dA
 !
w‹dB
 ) 
Ál£_checkSigNaNs
;

78 
mashW‹d
 |
w‹dA
 | 
w‹dB
;

79 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 0 )];

80 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 0 )];

81 i‡–
w‹dA
 !
w‹dB
 ) 
Ál£_checkSigNaNs
;

82 i‡–
possibÀOµosôeZîos
 && ((
mashW‹d
 | 
w‹dA
 | 
w‹dB
) != 0) ) {

83 
Ál£_checkSigNaNs
;

85 i‡–! 
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) && ! so·Êﬂt_isNaNF128M–
bWPå
 ) ) {

86  
åue
;

88 
Ál£_checkSigNaNs
:

90 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
aWPå
 )

91 || 
	`f128M_isSig«lögNaN
–(c⁄° 
Êﬂt128_t
 *Ë
bWPå
 )

93 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

95  
Ál£
;

97 
	}
}

	@src/softfloat/source/f128M_eq_signaling.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
boﬁ
 
	$f128M_eq_sig«lög
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

49  
	`f128_eq_sig«lög
–*
aPå
, *
bPå
 );

51 
	}
}

55 
boﬁ
 
	$f128M_eq_sig«lög
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

58 
uöt32_t
 
w‹dA
, 
w‹dB
, 
uiA96
, 
uiB96
;

59 
boﬁ
 
possibÀOµosôeZîos
;

60 
uöt32_t
 
mashW‹d
;

62 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

63 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

64 i‡–
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) || so·Êﬂt_isNaNF128M–
bWPå
 ) ) {

65 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

66  
Ál£
;

68 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 2 )];

69 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 2 )];

70 i‡–
w‹dA
 !
w‹dB
 )  
Ál£
;

71 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

72 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

73 
possibÀOµosôeZîos
 = 
Ál£
;

74 i‡–
uiA96
 !
uiB96
 ) {

75 
possibÀOµosôeZîos
 = (((
uiA96
 | 
uiB96
) & 0x7FFFFFFF) == 0);

76 i‡–! 
possibÀOµosôeZîos
 )  
Ál£
;

78 
mashW‹d
 = 
w‹dA
 | 
w‹dB
;

79 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )];

80 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 1 )];

81 i‡–
w‹dA
 !
w‹dB
 )  
Ál£
;

82 
mashW‹d
 |
w‹dA
 | 
w‹dB
;

83 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 0 )];

84 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 0 )];

86 (
w‹dA
 =
w‹dB
)

87 && (! 
possibÀOµosôeZîos
 || ((
mashW‹d
 | 
w‹dA
 | 
w‹dB
) == 0));

89 
	}
}

	@src/softfloat/source/f128M_le.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 #ifde‡
SOFTFLOAT_FAST_INT64


45 
boﬁ
 
	$f128M_À
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

48  
	`f128_À
–*
aPå
, *
bPå
 );

50 
	}
}

54 
boﬁ
 
	$f128M_À
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

56 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

57 
uöt32_t
 
uiA96
, 
uiB96
;

58 
boﬁ
 
signA
, 
signB
;

59 
uöt32_t
 
w‹dA
, 
w‹dB
;

61 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

62 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

63 i‡–
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) || so·Êﬂt_isNaNF128M–
bWPå
 ) ) {

64 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

65  
Ál£
;

67 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

68 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

69 
signA
 = 
	`signF128UI96
–
uiA96
 );

70 
signB
 = 
	`signF128UI96
–
uiB96
 );

71 i‡–
signA
 !
signB
 ) {

72 i‡–
signA
 )  
åue
;

73 i‡–(
uiA96
 | 
uiB96
Ë& 0x7FFFFFFF )  
Ál£
;

74 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 2 )];

75 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 2 )];

76 i‡–
w‹dA
 | 
w‹dB
 )  
Ál£
;

77 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )];

78 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 1 )];

79 i‡–
w‹dA
 | 
w‹dB
 )  
Ál£
;

80 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 0 )];

81 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 0 )];

82  ((
w‹dA
 | 
w‹dB
) == 0);

84 i‡–
signA
 ) {

85 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

86 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

88  (
	`so·Êﬂt_com∑ª128M
–
aWPå
, 
bWPå
 ) <= 0);

90 
	}
}

	@src/softfloat/source/f128M_le_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
boﬁ
 
	$f128M_À_quõt
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

49  
	`f128_À_quõt
–*
aPå
, *
bPå
 );

51 
	}
}

55 
boﬁ
 
	$f128M_À_quõt
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

58 
uöt32_t
 
uiA96
, 
uiB96
;

59 
boﬁ
 
signA
, 
signB
;

60 
uöt32_t
 
w‹dA
, 
w‹dB
;

62 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

63 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

64 i‡–
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) || so·Êﬂt_isNaNF128M–
bWPå
 ) ) {

65 i‡–
	`f128M_isSig«lögNaN
–
aPå
 ) || f128M_isSig«lögNaN–
bPå
 ) ) {

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

68  
Ál£
;

70 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

71 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

72 
signA
 = 
	`signF128UI96
–
uiA96
 );

73 
signB
 = 
	`signF128UI96
–
uiB96
 );

74 i‡–
signA
 !
signB
 ) {

75 i‡–
signA
 )  
åue
;

76 i‡–(
uiA96
 | 
uiB96
Ë& 0x7FFFFFFF )  
Ál£
;

77 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 2 )];

78 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 2 )];

79 i‡–
w‹dA
 | 
w‹dB
 )  
Ál£
;

80 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )];

81 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 1 )];

82 i‡–
w‹dA
 | 
w‹dB
 )  
Ál£
;

83 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 0 )];

84 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 0 )];

85  ((
w‹dA
 | 
w‹dB
) == 0);

87 i‡–
signA
 ) {

88 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

89 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

91  (
	`so·Êﬂt_com∑ª128M
–
aWPå
, 
bWPå
 ) <= 0);

93 
	}
}

	@src/softfloat/source/f128M_lt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 #ifde‡
SOFTFLOAT_FAST_INT64


45 
boﬁ
 
	$f128M_…
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

48  
	`f128_…
–*
aPå
, *
bPå
 );

50 
	}
}

54 
boﬁ
 
	$f128M_…
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

56 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

57 
uöt32_t
 
uiA96
, 
uiB96
;

58 
boﬁ
 
signA
, 
signB
;

59 
uöt32_t
 
w‹dA
, 
w‹dB
;

61 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

62 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

63 i‡–
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) || so·Êﬂt_isNaNF128M–
bWPå
 ) ) {

64 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

65  
Ál£
;

67 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

68 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

69 
signA
 = 
	`signF128UI96
–
uiA96
 );

70 
signB
 = 
	`signF128UI96
–
uiB96
 );

71 i‡–
signA
 !
signB
 ) {

72 i‡–
signB
 )  
Ál£
;

73 i‡–(
uiA96
 | 
uiB96
Ë& 0x7FFFFFFF )  
åue
;

74 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 2 )];

75 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 2 )];

76 i‡–
w‹dA
 | 
w‹dB
 )  
åue
;

77 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )];

78 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 1 )];

79 i‡–
w‹dA
 | 
w‹dB
 )  
åue
;

80 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 0 )];

81 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 0 )];

82  ((
w‹dA
 | 
w‹dB
) != 0);

84 i‡–
signA
 ) {

85 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

86 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

88  (
	`so·Êﬂt_com∑ª128M
–
aWPå
, 
bWPå
 ) < 0);

90 
	}
}

	@src/softfloat/source/f128M_lt_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
boﬁ
 
	$f128M_…_quõt
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

49  
	`f128_…_quõt
–*
aPå
, *
bPå
 );

51 
	}
}

55 
boﬁ
 
	$f128M_…_quõt
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

58 
uöt32_t
 
uiA96
, 
uiB96
;

59 
boﬁ
 
signA
, 
signB
;

60 
uöt32_t
 
w‹dA
, 
w‹dB
;

62 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

63 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

64 i‡–
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) || so·Êﬂt_isNaNF128M–
bWPå
 ) ) {

65 i‡–
	`f128M_isSig«lögNaN
–
aPå
 ) || f128M_isSig«lögNaN–
bPå
 ) ) {

66 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

68  
Ál£
;

70 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

71 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

72 
signA
 = 
	`signF128UI96
–
uiA96
 );

73 
signB
 = 
	`signF128UI96
–
uiB96
 );

74 i‡–
signA
 !
signB
 ) {

75 i‡–
signB
 )  
Ál£
;

76 i‡–(
uiA96
 | 
uiB96
Ë& 0x7FFFFFFF )  
åue
;

77 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 2 )];

78 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 2 )];

79 i‡–
w‹dA
 | 
w‹dB
 )  
åue
;

80 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )];

81 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 1 )];

82 i‡–
w‹dA
 | 
w‹dB
 )  
åue
;

83 
w‹dA
 = 
aWPå
[
	`ödexW‹d
( 4, 0 )];

84 
w‹dB
 = 
bWPå
[
	`ödexW‹d
( 4, 0 )];

85  ((
w‹dA
 | 
w‹dB
) != 0);

87 i‡–
signA
 ) {

88 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

89 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

91  (
	`so·Êﬂt_com∑ª128M
–
aWPå
, 
bWPå
 ) < 0);

93 
	}
}

	@src/softfloat/source/f128M_mul.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


47 
	$f128M_mul
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

50 *
zPå
 = 
	`f128_mul
–*
aPå
, *
bPå
 );

52 
	}
}

57 
	$f128M_mul
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

59 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

60 
uöt32_t
 *
zWPå
;

61 
uöt32_t
 
uiA96
;

62 
öt32_t
 
expA
;

63 
uöt32_t
 
uiB96
;

64 
öt32_t
 
expB
;

65 
boﬁ
 
signZ
;

66 c⁄° 
uöt32_t
 *
±r
;

67 
uöt32_t
 
uiZ96
, 
sigA
[4];

68 
uöt_Á°8_t
 
shi·Di°
;

69 
uöt32_t
 
sigB
[4];

70 
öt32_t
 
expZ
;

71 
uöt32_t
 
sigProd
[8], *
extSigZPå
;

75 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

76 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

77 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

80 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

81 
expA
 = 
	`expF128UI96
–
uiA96
 );

82 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

83 
expB
 = 
	`expF128UI96
–
uiB96
 );

84 
signZ
 = 
	`signF128UI96
–
uiA96
 ) ^ signF128UI96–
uiB96
 );

87 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

88 i‡–
	`so·Êﬂt_åyPr›ag©eNaNF128M
–
aWPå
, 
bWPå
, 
zWPå
 ) ) ;

89 
±r
 = 
aWPå
;

90 i‡–! 
expA
 ) 
possiblyInvÆid
;

91 i‡–! 
expB
 ) {

92 
±r
 = 
bWPå
;

93 
possiblyInvÆid
:

95 ! 
	`‰acF128UI96
–
±r
[
	`ödexW‹dHi
( 4 )] )

96 && ! (
±r
[
	`ödexW‹d
( 4, 2 )] |Ötr[indexWord( 4, 1 )]

97 | 
±r
[
	`ödexW‹d
( 4, 0 )])

99 
	`so·Êﬂt_övÆidF128M
–
zWPå
 );

103 
uiZ96
 = 
	`∑ckToF128UI96
–
signZ
, 0x7FFF, 0 );

104 
uiZ96
;

108 i‡–
expA
 ) {

109 
sigA
[
	`ödexW‹dHi
–4 )] = 
	`‰acF128UI96
–
uiA96
 ) | 0x00010000;

110 
sigA
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

111 
sigA
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

112 
sigA
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

114 
expA
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
aWPå
, 0, 
sigA
 );

115 i‡–
expA
 =-128 ) 
zîo
;

117 i‡–
expB
 ) {

118 
sigB
[
	`ödexW‹dHi
–4 )] = 
	`‰acF128UI96
–
uiB96
 ) | 0x00010000;

119 
sigB
[
	`ödexW‹d
–4, 2 )] = 
bWPå
[indexWord( 4, 2 )];

120 
sigB
[
	`ödexW‹d
–4, 1 )] = 
bWPå
[indexWord( 4, 1 )];

121 
sigB
[
	`ödexW‹d
–4, 0 )] = 
bWPå
[indexWord( 4, 0 )];

123 
expB
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
bWPå
, 0, 
sigB
 );

124 i‡–
expB
 =-128 ) 
zîo
;

128 
expZ
 = 
expA
 + 
expB
 - 0x4000;

129 
	`so·Êﬂt_mul128MTo256M
–
sigA
, 
sigB
, 
sigProd
 );

131 
sigProd
[
	`ödexW‹d
( 8, 2 )]

132 || (
sigProd
[
	`ödexW‹d
( 8, 1 )] | sigProd[indexWord( 8, 0 )])

134 
sigProd
[
	`ödexW‹d
( 8, 3 )] |= 1;

136 
extSigZPå
 = &
sigProd
[
	`ödexMu…iw‹dHi
( 8, 5 )];

137 
shi·Di°
 = 16;

138 i‡–
extSigZPå
[
	`ödexW‹dHi
( 5 )] & 2 ) {

139 ++
expZ
;

140 
shi·Di°
 = 15;

142 
	`so·Êﬂt_sh‹tShi·Le·160M
–
extSigZPå
, 
shi·Di°
,ÉxtSigZPtr );

143 
	`so·Êﬂt_roundPackMToF128M
–
signZ
, 
expZ
, 
extSigZPå
, 
zWPå
 );

147 
zîo
:

148 
uiZ96
 = 
	`∑ckToF128UI96
–
signZ
, 0, 0 );

149 
uiZ96
:

150 
zWPå
[
	`ödexW‹dHi
–4 )] = 
uiZ96
;

151 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

152 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

153 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

155 
	}
}

	@src/softfloat/source/f128M_mulAdd.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


45 
	$f128M_mulAdd
(

46 c⁄° 
Êﬂt128_t
 *
aPå
,

47 c⁄° 
Êﬂt128_t
 *
bPå
,

48 c⁄° 
Êﬂt128_t
 *
cPå
,

49 
Êﬂt128_t
 *
zPå


52 c⁄° 
uöt64_t
 *
aWPå
, *
bWPå
, *
cWPå
;

53 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

54 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

55 
uöt_Á°64_t
 
uiC64
, 
uiC0
;

57 
aWPå
 = (c⁄° 
uöt64_t
 *Ë
aPå
;

58 
bWPå
 = (c⁄° 
uöt64_t
 *Ë
bPå
;

59 
cWPå
 = (c⁄° 
uöt64_t
 *Ë
cPå
;

60 
uiA64
 = 
aWPå
[
	`ödexW‹d
( 2, 1 )];

61 
uiA0
 = 
aWPå
[
	`ödexW‹d
( 2, 0 )];

62 
uiB64
 = 
bWPå
[
	`ödexW‹d
( 2, 1 )];

63 
uiB0
 = 
bWPå
[
	`ödexW‹d
( 2, 0 )];

64 
uiC64
 = 
cWPå
[
	`ödexW‹d
( 2, 1 )];

65 
uiC0
 = 
cWPå
[
	`ödexW‹d
( 2, 0 )];

66 *
zPå
 = 
	`so·Êﬂt_mulAddF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
uiC64
, 
uiC0
, 0 );

68 
	}
}

73 
	$f128M_mulAdd
(

74 c⁄° 
Êﬂt128_t
 *
aPå
,

75 c⁄° 
Êﬂt128_t
 *
bPå
,

76 c⁄° 
Êﬂt128_t
 *
cPå
,

77 
Êﬂt128_t
 *
zPå


81 
	`so·Êﬂt_mulAddF128M
(

82 (c⁄° 
uöt32_t
 *Ë
aPå
,

83 (c⁄° 
uöt32_t
 *Ë
bPå
,

84 (c⁄° 
uöt32_t
 *Ë
cPå
,

85 (
uöt32_t
 *Ë
zPå
,

89 
	}
}

	@src/softfloat/source/f128M_rem.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


47 
	$f128M_ªm
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

50 *
zPå
 = 
	`f128_ªm
–*
aPå
, *
bPå
 );

52 
	}
}

57 
	$f128M_ªm
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

59 c⁄° 
uöt32_t
 *
aWPå
, *
bWPå
;

60 
uöt32_t
 *
zWPå
, 
uiA96
;

61 
öt32_t
 
expA
, 
expB
;

62 
uöt32_t
 
x
[4], 
ªm1
[5], *
ªmPå
;

63 
boﬁ
 
signRem
;

64 
öt32_t
 
expDiff
;

65 
uöt32_t
 
q
, 
ªcù32
;

66 
uöt64_t
 
q64
;

67 
uöt32_t
 
ªm2
[5], *
ÆtRemPå
, *
√wRemPå
, 
w‹dMónRem
;

71 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

72 
bWPå
 = (c⁄° 
uöt32_t
 *Ë
bPå
;

73 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

76 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

77 
expA
 = 
	`expF128UI96
–
uiA96
 );

78 
expB
 = 
	`expF128UI96
–
bWPå
[
	`ödexW‹dHi
( 4 )] );

81 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

82 i‡–
	`so·Êﬂt_åyPr›ag©eNaNF128M
–
aWPå
, 
bWPå
, 
zWPå
 ) ) ;

83 i‡–
expA
 =0x7FFF ) 
övÆid
;

84 
c›yA
;

88 i‡–
expA
 < 
expB
 - 1 ) 
c›yA
;

91 
expB
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
bWPå
, 13, 
x
 );

92 i‡–
expB
 =-128 ) 
övÆid
;

93 
ªmPå
 = &
ªm1
[
	`ödexMu…iw‹dLo
( 5, 4 )];

94 
expA
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
aWPå
, 13, 
ªmPå
 );

95 i‡–
expA
 =-128 ) 
c›yA
;

96 
signRem
 = 
	`signF128UI96
–
uiA96
 );

99 
expDiff
 = 
expA
 - 
expB
;

100 i‡–
expDiff
 < 1 ) {

101 i‡–
expDiff
 < -1 ) 
c›yA
;

102 i‡–
expDiff
 ) {

103 --
expB
;

104 
	`so·Êﬂt_add128M
–
x
, x, x );

105 
q
 = 0;

107 
q
 = (
	`so·Êﬂt_com∑ª128M
–
x
, 
ªmPå
 ) <= 0);

108 i‡–
q
 ) 
	`so·Êﬂt_sub128M
–
ªmPå
, 
x
,ÑemPtr );

111 
ªcù32
 =

112 
	`so·Êﬂt_≠¥oxRecù32_1
(

113 ((
uöt64_t
Ë
x
[
	`ödexW‹d
( 4, 3 )]<<32 | x[indexWord( 4, 2 )])

116 
expDiff
 -= 30;

118 
q64
 = (
uöt64_t
Ë
ªmPå
[
	`ödexW‹dHi
–4 )] * 
ªcù32
;

119 i‡–
expDiff
 < 0 ) ;

120 
q
 = (
q64
 + 0x80000000)>>32;

121 
	`so·Êﬂt_ªmSãp128MBy32
–
ªmPå
, 29, 
x
, 
q
,ÑemPtr );

122 i‡–
ªmPå
[
	`ödexW‹dHi
( 4 )] & 0x80000000 ) {

123 
	`so·Êﬂt_add128M
–
ªmPå
, 
x
,ÑemPtr );

125 
expDiff
 -= 29;

130 
q
 = (
uöt32_t
Ë(
q64
>>32)>>(~
expDiff
 & 31);

131 
	`so·Êﬂt_ªmSãp128MBy32
–
ªmPå
, 
expDiff
 + 30, 
x
, 
q
,ÑemPtr );

132 i‡–
ªmPå
[
	`ödexW‹dHi
( 4 )] & 0x80000000 ) {

133 
ÆtRemPå
 = &
ªm2
[
	`ödexMu…iw‹dLo
( 5, 4 )];

134 
	`so·Êﬂt_add128M
–
ªmPå
, 
x
, 
ÆtRemPå
 );

135 
£À˘Rem
;

140 
ÆtRemPå
 = &
ªm2
[
	`ödexMu…iw‹dLo
( 5, 4 )];

142 ++
q
;

143 
√wRemPå
 = 
ÆtRemPå
;

144 
	`so·Êﬂt_sub128M
–
ªmPå
, 
x
, 
√wRemPå
 );

145 
ÆtRemPå
 = 
ªmPå
;

146 
ªmPå
 = 
√wRemPå
;

147 }  ! (
ªmPå
[
	`ödexW‹dHi
( 4 )] & 0x80000000) );

148 
£À˘Rem
:

149 
	`so·Êﬂt_add128M
–
ªmPå
, 
ÆtRemPå
, 
x
 );

150 
w‹dMónRem
 = 
x
[
	`ödexW‹dHi
( 4 )];

152 (
w‹dMónRem
 & 0x80000000)

153 || (! 
w‹dMónRem
 && (
q
 & 1Ë&& ! 
x
[
	`ödexW‹d
( 4, 0 )]

154 && ! (
x
[
	`ödexW‹d
( 4, 2 )] | x[indexWord( 4, 1 )]))

156 
ªmPå
 = 
ÆtRemPå
;

158 i‡–
ªmPå
[
	`ödexW‹dHi
( 4 )] & 0x80000000 ) {

159 
signRem
 = ! signRem;

160 
	`so·Êﬂt_√gX128M
–
ªmPå
 );

162 
ªmPå
 -
	`ödexMu…iw‹dLo
( 5, 4 );

163 
ªmPå
[
	`ödexW‹dHi
( 5 )] = 0;

164 
	`so·Êﬂt_n‹mRoundPackMToF128M
–
signRem
, 
expB
 + 18, 
ªmPå
, 
zWPå
 );

168 
övÆid
:

169 
	`so·Êﬂt_övÆidF128M
–
zWPå
 );

173 
c›yA
:

174 
zWPå
[
	`ödexW‹dHi
–4 )] = 
uiA96
;

175 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

176 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

177 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

179 
	}
}

	@src/softfloat/source/f128M_roundToInt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


47 
	$f128M_roundToI¡
(

48 c⁄° 
Êﬂt128_t
 *
aPå
,

49 
uöt_Á°8_t
 
roundögMode
,

50 
boﬁ
 
exa˘
,

51 
Êﬂt128_t
 *
zPå


55 *
zPå
 = 
	`f128_roundToI¡
–*
aPå
, 
roundögMode
, 
exa˘
 );

57 
	}
}

62 
	$f128M_roundToI¡
(

63 c⁄° 
Êﬂt128_t
 *
aPå
,

64 
uöt_Á°8_t
 
roundögMode
,

65 
boﬁ
 
exa˘
,

66 
Êﬂt128_t
 *
zPå


69 c⁄° 
uöt32_t
 *
aWPå
;

70 
uöt32_t
 *
zWPå
;

71 
uöt32_t
 
ui96
;

72 
öt32_t
 
exp
;

73 
uöt32_t
 
sigExåa
;

74 
boﬁ
 
sign
;

75 
uöt_Á°8_t
 
bôPos
;

76 
boﬁ
 
roundNór
;

77 
ödex
, 
œ°Index
;

78 
boﬁ
 
exåa
;

79 
uöt32_t
 
w‹dA
, 
bô
, 
w‹dZ
;

80 
uöt_Á°8_t
 
ˇºy
;

81 
uöt32_t
 
exåasMask
;

85 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

86 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

89 
ui96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

90 
exp
 = 
	`expF128UI96
–
ui96
 );

93 i‡–
exp
 < 0x3FFF ) {

94 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

95 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

96 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

97 
sigExåa
 = 
aWPå
[
	`ödexW‹d
( 4, 2 )];

98 i‡–!
sigExåa
 ) {

99 
sigExåa
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )] |áWPtr[indexWord( 4, 0 )];

101 i‡–!
sigExåa
 && !(
ui96
 & 0x7FFFFFFF) ) ui96;

102 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

103 
sign
 = 
	`signF128UI96
–
ui96
 );

104  
roundögMode
 ) {

105 
so·Êﬂt_round_√¨_eví
:

106 i‡–!
	`‰acF128UI96
–
ui96
 ) && !
sigExåa
 ) ;

107 
so·Êﬂt_round_√¨_maxMag
:

108 i‡–
exp
 =0x3FFE ) 
mag1
;

110 
so·Êﬂt_round_mö
:

111 i‡–
sign
 ) 
mag1
;

113 
so·Êﬂt_round_max
:

114 i‡–!
sign
 ) 
mag1
;

116 #ifde‡
SOFTFLOAT_ROUND_ODD


117 
so·Êﬂt_round_odd
:

118 
mag1
;

121 
ui96
 = 
	`∑ckToF128UI96
–
sign
, 0, 0 );

122 
ui96
;

123 
mag1
:

124 
ui96
 = 
	`∑ckToF128UI96
–
sign
, 0x3FFF, 0 );

125 
ui96
;

129 i‡–0x406F <
exp
 ) {

131 (
exp
 == 0x7FFF)

132 && (
	`‰acF128UI96
–
ui96
 )

133 || (
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

134 | 
aWPå
[
	`ödexW‹d
( 4, 0 )]))

136 
	`so·Êﬂt_¥›ag©eNaNF128M
–
aWPå
, 0, 
zWPå
 );

139 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

140 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

141 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

142 
ui96
;

146 
bôPos
 = 0x406F - 
exp
;

147 
roundNór
 =

148 (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

149 || (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

150 
bôPos
 -
roundNór
;

151 
ödex
 = 
	`ödexW‹dLo
( 4 );

152 
œ°Index
 = 
	`ödexW‹dHi
( 4 );

153 
exåa
 = 0;

155 
w‹dA
 = 
aWPå
[
ödex
];

156 i‡–
bôPos
 < 32 ) ;

157 i‡–
w‹dA
 ) 
exåa
 = 1;

158 
zWPå
[
ödex
] = 0;

159 
ödex
 +
w‹dIn¸
;

160 
bôPos
 -= 32;

162 
bô
 = (
uöt32_t
Ë1<<
bôPos
;

163 i‡–
roundNór
 ) {

164 
w‹dZ
 = 
w‹dA
 + 
bô
;

165 
ˇºy
 = (
w‹dZ
 < 
w‹dA
);

166 
bô
 <<= 1;

167 
exåasMask
 = 
bô
 - 1;

168 i‡–
exa˘
 && (
exåa
 || (
w‹dA
 & 
exåasMask
)) ) {

169 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

172 (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

173 && !
exåa
 && !(
w‹dZ
 & 
exåasMask
)

175 i‡–!
bô
 ) {

176 
zWPå
[
ödex
] = 
w‹dZ
;

177 
ödex
 +
w‹dIn¸
;

178 
w‹dZ
 = 
aWPå
[
ödex
] + 
ˇºy
;

179 
ˇºy
 &!
w‹dZ
;

180 
zWPå
[
ödex
] = 
w‹dZ
 & ~1;

181 
¥›ag©eC¨ry
;

183 
w‹dZ
 &~
bô
;

186 
w‹dZ
 = 
w‹dA
;

187 
ˇºy
 = 0;

188 
exåasMask
 = 
bô
 - 1;

189 i‡–
exåa
 || (
w‹dA
 & 
exåasMask
) ) {

190 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

192 
roundögMode


193 =(
	`signF128UI96
–
ui96
 ) ? 
so·Êﬂt_round_mö


194 : 
so·Êﬂt_round_max
)

196 
w‹dZ
 +
bô
;

197 
ˇºy
 = (
w‹dZ
 < 
w‹dA
);

198 #ifde‡
SOFTFLOAT_ROUND_ODD


199 } i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

200 
w‹dZ
 |
bô
;

205 
w‹dZ
 &~
exåasMask
;

206 
zWPå
[
ödex
] = 
w‹dZ
;

207 
¥›ag©eC¨ry
:

208  
ödex
 !
œ°Index
 ) {

209 
ödex
 +
w‹dIn¸
;

210 
w‹dZ
 = 
aWPå
[
ödex
] + 
ˇºy
;

211 
zWPå
[
ödex
] = 
w‹dZ
;

212 
ˇºy
 &!
w‹dZ
;

217 
ui96
:

218 
zWPå
[
	`ödexW‹dHi
–4 )] = 
ui96
;

220 
	}
}

	@src/softfloat/source/f128M_sqrt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f128M_sqπ
–c⁄° 
Êﬂt128_t
 *
aPå
, flﬂt128_à*
zPå
 )

49 *
zPå
 = 
	`f128_sqπ
–*
aPå
 );

51 
	}
}

55 
	$f128M_sqπ
–c⁄° 
Êﬂt128_t
 *
aPå
, flﬂt128_à*
zPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
uöt32_t
 *
zWPå
;

59 
uöt32_t
 
uiA96
;

60 
boﬁ
 
signA
;

61 
öt32_t
 
øwExpA
;

62 
uöt32_t
 
ªm
[6];

63 
öt32_t
 
expA
, 
expZ
;

64 
uöt64_t
 
ªm64
;

65 
uöt32_t
 
sig32A
, 
ªcùSqπ32
, 
sig32Z
, 
qs
[3], 
q
;

66 
uöt64_t
 
sig64Z
;

67 
uöt32_t
 
ãrm
[5];

68 
uöt64_t
 
x64
;

69 
uöt32_t
 
y
[5], 
ªm32
;

73 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

74 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

77 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

78 
signA
 = 
	`signF128UI96
–
uiA96
 );

79 
øwExpA
 = 
	`expF128UI96
–
uiA96
 );

82 i‡–
øwExpA
 == 0x7FFF ) {

84 
	`‰acF128UI96
–
uiA96
 )

85 || (
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

86 | 
aWPå
[
	`ödexW‹d
( 4, 0 )])

88 
	`so·Êﬂt_¥›ag©eNaNF128M
–
aWPå
, 0, 
zWPå
 );

91 i‡–! 
signA
 ) 
c›yA
;

92 
övÆid
;

96 
expA
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
aWPå
, 13 - (
øwExpA
 & 1), 
ªm
 );

97 i‡–
expA
 =-128 ) 
c›yA
;

98 i‡–
signA
 ) 
övÆid
;

104 
expZ
 = ((
expA
 - 0x3FFF)>>1) + 0x3FFE;

105 
expA
 &= 1;

106 
ªm64
 = (
uöt64_t
Ë
ªm
[
	`ödexW‹d
( 4, 3 )]<<32 |Ñem[indexWord( 4, 2 )];

107 i‡–
expA
 ) {

108 i‡–! 
øwExpA
 ) {

109 
	`so·Êﬂt_sh‹tShi·Right128M
–
ªm
, 1,Ñem );

110 
ªm64
 >>= 1;

112 
sig32A
 = 
ªm64
>>29;

114 
sig32A
 = 
ªm64
>>30;

116 
ªcùSqπ32
 = 
	`so·Êﬂt_≠¥oxRecùSqπ32_1
–
expA
, 
sig32A
 );

117 
sig32Z
 = ((
uöt64_t
Ë
sig32A
 * 
ªcùSqπ32
)>>32;

118 i‡–
expA
 ) 
sig32Z
 >>= 1;

119 
qs
[2] = 
sig32Z
;

120 
ªm64
 -(
uöt64_t
Ë
sig32Z
 * sig32Z;

121 
ªm
[
	`ödexW‹d
–4, 3 )] = 
ªm64
>>32;

122 
ªm
[
	`ödexW‹d
–4, 2 )] = 
ªm64
;

125 
q
 = ((
uöt32_t
Ë(
ªm64
>>2Ë* (
uöt64_t
Ë
ªcùSqπ32
)>>32;

126 
sig64Z
 = ((
uöt64_t
Ë
sig32Z
<<32Ë+ ((uöt64_tË
q
<<3);

127 
ãrm
[
	`ödexW‹d
( 4, 3 )] = 0;

128 
ãrm
[
	`ödexW‹d
( 4, 0 )] = 0;

133 
x64
 = ((
uöt64_t
Ë
sig32Z
<<32Ë+ 
sig64Z
;

134 
ãrm
[
	`ödexW‹d
–4, 2 )] = 
x64
>>32;

135 
ãrm
[
	`ödexW‹d
–4, 1 )] = 
x64
;

136 
	`so·Êﬂt_ªmSãp128MBy32
–
ªm
, 29, 
ãrm
, 
q
, 
y
 );

137 
ªm32
 = 
y
[
	`ödexW‹d
( 4, 3 )];

138 i‡–! (
ªm32
 & 0x80000000) ) ;

139 --
q
;

140 
sig64Z
 -= 1<<3;

142 
qs
[1] = 
q
;

143 
ªm64
 = (
uöt64_t
Ë
ªm32
<<32 | 
y
[
	`ödexW‹d
( 4, 2 )];

146 
q
 = ((
uöt32_t
Ë(
ªm64
>>2Ë* (
uöt64_t
Ë
ªcùSqπ32
)>>32;

147 i‡–
ªm64
>>34 ) 
q
 +
ªcùSqπ32
;

148 
sig64Z
 <<= 1;

153 
x64
 = 
sig64Z
 + (
q
>>26);

154 
ãrm
[
	`ödexW‹d
–4, 2 )] = 
x64
>>32;

155 
ãrm
[
	`ödexW‹d
–4, 1 )] = 
x64
;

156 
ãrm
[
	`ödexW‹d
–4, 0 )] = 
q
<<6;

157 
	`so·Êﬂt_ªmSãp128MBy32
(

158 
y
, 29, 
ãrm
, 
q
, &
ªm
[
	`ödexMu…iw‹dHi
( 6, 4 )] );

159 
ªm32
 = 
ªm
[
	`ödexW‹dHi
( 6 )];

160 i‡–! (
ªm32
 & 0x80000000) ) ;

161 --
q
;

163 
qs
[0] = 
q
;

164 
ªm64
 = (
uöt64_t
Ë
ªm32
<<32 | 
ªm
[
	`ödexW‹d
( 6, 4 )];

167 
q
 = (((
uöt32_t
Ë(
ªm64
>>2Ë* (
uöt64_t
Ë
ªcùSqπ32
)>>32) + 2;

168 i‡–
ªm64
>>34 ) 
q
 +
ªcùSqπ32
;

169 
x64
 = (
uöt64_t
Ë
q
<<27;

170 
y
[
	`ödexW‹d
–5, 0 )] = 
x64
;

171 
x64
 = ((
uöt64_t
Ë
qs
[0]<<24) + (x64>>32);

172 
y
[
	`ödexW‹d
–5, 1 )] = 
x64
;

173 
x64
 = ((
uöt64_t
Ë
qs
[1]<<21) + (x64>>32);

174 
y
[
	`ödexW‹d
–5, 2 )] = 
x64
;

175 
x64
 = ((
uöt64_t
Ë
qs
[2]<<18) + (x64>>32);

176 
y
[
	`ödexW‹d
–5, 3 )] = 
x64
;

177 
y
[
	`ödexW‹d
–5, 4 )] = 
x64
>>32;

180 i‡–(
q
 & 0xF) <= 2 ) {

181 
q
 &= ~3;

182 
y
[
	`ödexW‹dLo
–5 )] = 
q
<<27;

183 
ãrm
[
	`ödexW‹d
( 5, 4 )] = 0;

184 
ãrm
[
	`ödexW‹d
( 5, 3 )] = 0;

185 
ãrm
[
	`ödexW‹d
( 5, 2 )] = 0;

186 
ãrm
[
	`ödexW‹d
–5, 1 )] = 
q
>>6;

187 
ãrm
[
	`ödexW‹d
–5, 0 )] = 
q
<<26;

188 
	`so·Êﬂt_sub160M
–
y
, 
ãrm
,Åerm );

189 
ªm
[
	`ödexW‹d
( 6, 1 )] = 0;

190 
ªm
[
	`ödexW‹d
( 6, 0 )] = 0;

191 
	`so·Êﬂt_ªmSãp160MBy32
(

192 &
ªm
[
	`ödexMu…iw‹dLo
( 6, 5 )],

194 
ãrm
,

195 
q
,

196 &
ªm
[
	`ödexMu…iw‹dLo
( 6, 5 )]

198 
ªm32
 = 
ªm
[
	`ödexW‹d
( 6, 4 )];

199 i‡–
ªm32
 & 0x80000000 ) {

200 
	`so·Êﬂt_sub1X160M
–
y
 );

203 
ªm32
 || 
ªm
[
	`ödexW‹d
( 6, 0 )] ||Ñem[indexWord( 6, 1 )]

204 || (
ªm
[
	`ödexW‹d
( 6, 3 )] |Ñem[indexWord( 6, 2 )])

206 
y
[
	`ödexW‹dLo
( 5 )] |= 1;

210 
	`so·Êﬂt_roundPackMToF128M
–0, 
expZ
, 
y
, 
zWPå
 );

214 
övÆid
:

215 
	`so·Êﬂt_övÆidF128M
–
zWPå
 );

219 
c›yA
:

220 
zWPå
[
	`ödexW‹dHi
–4 )] = 
uiA96
;

221 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

222 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

223 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

225 
	}
}

	@src/softfloat/source/f128M_sub.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f128M_sub
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

48 c⁄° 
uöt64_t
 *
aWPå
, *
bWPå
;

49 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

50 
boﬁ
 
signA
;

51 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

52 
boﬁ
 
signB
;

53 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

54 
Êﬂt128_t


55 (*
magsFuncPå
)(

56 
uöt_Á°64_t
, uöt_Á°64_t, uöt_Á°64_t, uöt_Á°64_t, 
boﬁ
 );

59 
aWPå
 = (c⁄° 
uöt64_t
 *Ë
aPå
;

60 
bWPå
 = (c⁄° 
uöt64_t
 *Ë
bPå
;

61 
uiA64
 = 
aWPå
[
	`ödexW‹d
( 2, 1 )];

62 
uiA0
 = 
aWPå
[
	`ödexW‹d
( 2, 0 )];

63 
signA
 = 
	`signF128UI64
–
uiA64
 );

64 
uiB64
 = 
bWPå
[
	`ödexW‹d
( 2, 1 )];

65 
uiB0
 = 
bWPå
[
	`ödexW‹d
( 2, 0 )];

66 
signB
 = 
	`signF128UI64
–
uiB64
 );

67 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

68 i‡–
signA
 =
signB
 ) {

69 *
zPå
 = 
	`so·Êﬂt_subMagsF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

71 *
zPå
 = 
	`so·Êﬂt_addMagsF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

74 
magsFuncPå
 =

75 (
signA
 =
signB
Ë? 
so·Êﬂt_subMagsF128
 : 
so·Êﬂt_addMagsF128
;

76 *
zPå
 = (*
magsFuncPå
)–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

79 
	}
}

84 
	$f128M_sub
–c⁄° 
Êﬂt128_t
 *
aPå
, c⁄° flﬂt128_à*
bPå
, flﬂt128_à*
zPå
 )

87 
	`so·Êﬂt_addF128M
(

88 (c⁄° 
uöt32_t
 *Ë
aPå
,

89 (c⁄° 
uöt32_t
 *Ë
bPå
,

90 (
uöt32_t
 *Ë
zPå
,

91 
åue


94 
	}
}

	@src/softfloat/source/f128M_to_extF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f128M_to_extF80M
–c⁄° 
Êﬂt128_t
 *
aPå
, 
extFlﬂt80_t
 *
zPå
 )

49 *
zPå
 = 
	`f128_to_extF80
–*
aPå
 );

51 
	}
}

55 
	$f128M_to_extF80M
–c⁄° 
Êﬂt128_t
 *
aPå
, 
extFlﬂt80_t
 *
zPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
extFlﬂt80M
 *
zSPå
;

59 
uöt32_t
 
uiA96
;

60 
boﬁ
 
sign
;

61 
öt32_t
 
exp
;

62 
comm⁄NaN
 commonNaN;

63 
uöt32_t
 
sig
[4];

67 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

68 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

71 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

72 
sign
 = 
	`signF128UI96
–
uiA96
 );

73 
exp
 = 
	`expF128UI96
–
uiA96
 );

76 i‡–
exp
 == 0x7FFF ) {

77 i‡–
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) ) {

78 
	`so·Êﬂt_f128MToComm⁄NaN
–
aWPå
, &
comm⁄NaN
 );

79 
	`so·Êﬂt_comm⁄NaNToExtF80M
–&
comm⁄NaN
, 
zSPå
 );

82 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
sign
, 0x7FFF );

83 
zSPå
->
signif
 = 
	`UINT64_C
( 0x8000000000000000 );

88 
exp
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
aWPå
, 15, 
sig
 );

89 i‡–
exp
 == -128 ) {

90 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

91 
zSPå
->
signif
 = 0;

94 i‡–
sig
[
	`ödexW‹d
( 4, 0 )] ) sig[indexWord( 4, 1 )] |= 1;

95 
	`so·Êﬂt_roundPackMToExtF80M
(

96 
sign
, 
exp
, &
sig
[
	`ödexMu…iw‹dHi
–4, 3 )], 80, 
zSPå
 );

98 
	}
}

	@src/softfloat/source/f128M_to_f16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
Êﬂt16_t
 
	$f128M_to_f16
–c⁄° 
Êﬂt128_t
 *
aPå
 )

49  
	`f128_to_f16
–*
aPå
 );

51 
	}
}

55 
Êﬂt16_t
 
	$f128M_to_f16
–c⁄° 
Êﬂt128_t
 *
aPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
uöt32_t
 
uiA96
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt32_t
 
‰ac32
;

62 
comm⁄NaN
 commonNaN;

63 
uöt16_t
 
uiZ
, 
‰ac16
;

64 
ui16_f16
 
uZ
;

68 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

71 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

72 
sign
 = 
	`signF128UI96
–
uiA96
 );

73 
exp
 = 
	`expF128UI96
–
uiA96
 );

74 
‰ac32
 =

75 
	`‰acF128UI96
–
uiA96
 )

76 | ((
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

77 | 
aWPå
[
	`ödexW‹d
( 4, 0 )])

81 i‡–
exp
 == 0x7FFF ) {

82 i‡–
‰ac32
 ) {

83 
	`so·Êﬂt_f128MToComm⁄NaN
–
aWPå
, &
comm⁄NaN
 );

84 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF16UI
–&
comm⁄NaN
 );

86 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0x1F, 0 );

88 
uiZ
;

92 
‰ac16
 = 
‰ac32
>>2 | (frac32 & 3);

93 i‡–! (
exp
 | 
‰ac16
) ) {

94 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0, 0 );

95 
uiZ
;

99 
exp
 -= 0x3FF1;

100 i‡– (
öt_Á°16_t
Ë<  (
öt32_t
) ) {

101 i‡–
exp
 < -0x40 )Éxp = -0x40;

103  
	`so·Êﬂt_roundPackToF16
–
sign
, 
exp
, 
‰ac16
 | 0x4000 );

106 
uiZ
:

107 
uZ
.
ui
 = 
uiZ
;

108  
uZ
.
f
;

110 
	}
}

	@src/softfloat/source/f128M_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
Êﬂt32_t
 
	$f128M_to_f32
–c⁄° 
Êﬂt128_t
 *
aPå
 )

49  
	`f128_to_f32
–*
aPå
 );

51 
	}
}

55 
Êﬂt32_t
 
	$f128M_to_f32
–c⁄° 
Êﬂt128_t
 *
aPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
uöt32_t
 
uiA96
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt64_t
 
‰ac64
;

62 
comm⁄NaN
 commonNaN;

63 
uöt32_t
 
uiZ
, 
‰ac32
;

64 
ui32_f32
 
uZ
;

68 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

69 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

70 
sign
 = 
	`signF128UI96
–
uiA96
 );

71 
exp
 = 
	`expF128UI96
–
uiA96
 );

72 
‰ac64
 =

73 (
uöt64_t
Ë
	`‰acF128UI96
–
uiA96
 )<<32 | 
aWPå
[
	`ödexW‹d
( 4, 2 )]

74 | ((
aWPå
[
	`ödexW‹d
( 4, 1 )] |áWPtr[indexWord( 4, 0 )]) != 0);

77 i‡–
exp
 == 0x7FFF ) {

78 i‡–
‰ac64
 ) {

79 
	`so·Êﬂt_f128MToComm⁄NaN
–
aWPå
, &
comm⁄NaN
 );

80 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF32UI
–&
comm⁄NaN
 );

82 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0xFF, 0 );

84 
uiZ
;

88 
‰ac32
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
‰ac64
, 18 );

89 i‡–! (
exp
 | 
‰ac32
) ) {

90 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0, 0 );

91 
uiZ
;

95 
exp
 -= 0x3F81;

96 i‡– (
öt_Á°16_t
Ë<  (
öt32_t
) ) {

97 i‡–
exp
 < -0x1000 )Éxp = -0x1000;

99  
	`so·Êﬂt_roundPackToF32
–
sign
, 
exp
, 
‰ac32
 | 0x40000000 );

102 
uiZ
:

103 
uZ
.
ui
 = 
uiZ
;

104  
uZ
.
f
;

106 
	}
}

	@src/softfloat/source/f128M_to_f64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
Êﬂt64_t
 
	$f128M_to_f64
–c⁄° 
Êﬂt128_t
 *
aPå
 )

49  
	`f128_to_f64
–*
aPå
 );

51 
	}
}

55 
Êﬂt64_t
 
	$f128M_to_f64
–c⁄° 
Êﬂt128_t
 *
aPå
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
uöt32_t
 
uiA96
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt64_t
 
‰ac64
;

62 
comm⁄NaN
 commonNaN;

63 
uöt64_t
 
uiZ
;

64 
uöt32_t
 
‰ac32
;

65 
ui64_f64
 
uZ
;

69 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

70 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

71 
sign
 = 
	`signF128UI96
–
uiA96
 );

72 
exp
 = 
	`expF128UI96
–
uiA96
 );

73 
‰ac64
 = (
uöt64_t
Ë
	`‰acF128UI96
–
uiA96
 )<<32 | 
aWPå
[
	`ödexW‹d
( 4, 2 )];

76 i‡–
exp
 == 0x7FFF ) {

77 i‡–
‰ac64
 || 
aWPå
[
	`ödexW‹d
( 4, 1 )] |áWPtr[indexWord( 4, 0 )] ) {

78 
	`so·Êﬂt_f128MToComm⁄NaN
–
aWPå
, &
comm⁄NaN
 );

79 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF64UI
–&
comm⁄NaN
 );

81 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0x7FF, 0 );

83 
uiZ
;

87 
‰ac32
 = 
aWPå
[
	`ödexW‹d
( 4, 1 )];

88 
‰ac64
 = føc64<<14 | 
‰ac32
>>18;

89 i‡–(
‰ac32
 & 0x0003FFFFË|| 
aWPå
[
	`ödexW‹d
–4, 0 )] ) 
‰ac64
 |= 1;

90 i‡–! (
exp
 | 
‰ac64
) ) {

91 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0, 0 );

92 
uiZ
;

96 
exp
 -= 0x3C01;

97 i‡– (
öt_Á°16_t
Ë<  (
öt32_t
) ) {

98 i‡–
exp
 < -0x1000 )Éxp = -0x1000;

101 
	`so·Êﬂt_roundPackToF64
(

102 
sign
, 
exp
, 
‰ac64
 | 
	`UINT64_C
( 0x4000000000000000 ) );

105 
uiZ
:

106 
uZ
.
ui
 = 
uiZ
;

107  
uZ
.
f
;

109 
	}
}

	@src/softfloat/source/f128M_to_i32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
öt_Á°32_t


47 
	$f128M_to_i32
–c⁄° 
Êﬂt128_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

50  
	`f128_to_i32
–*
aPå
, 
roundögMode
, 
exa˘
 );

52 
	}
}

56 
öt_Á°32_t


57 
	$f128M_to_i32
–c⁄° 
Êﬂt128_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

59 c⁄° 
uöt32_t
 *
aWPå
;

60 
uöt32_t
 
uiA96
;

61 
boﬁ
 
sign
;

62 
öt32_t
 
exp
;

63 
uöt64_t
 
sig64
;

64 
öt32_t
 
shi·Di°
;

68 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

69 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

70 
sign
 = 
	`signF128UI96
–
uiA96
 );

71 
exp
 = 
	`expF128UI96
–
uiA96
 );

72 
sig64
 = (
uöt64_t
Ë
	`‰acF128UI96
–
uiA96
 )<<32 | 
aWPå
[
	`ödexW‹d
( 4, 2 )];

73 i‡–
aWPå
[
	`ödexW‹d
–4, 1 )] |áWPå[ödexW‹d–4, 0 )] ) 
sig64
 |= 1;

76 #i‡(
i32_‰omNaN
 !
i32_‰omPosOvîÊow
Ë|| (i32_‰omNaN !
i32_‰omNegOvîÊow
)

77 i‡–(
exp
 =0x7FFFË&& 
sig64
 ) {

78 #i‡(
i32_‰omNaN
 =
i32_‰omPosOvîÊow
)

79 
sign
 = 0;

80 #ñi‡(
i32_‰omNaN
 =
i32_‰omNegOvîÊow
)

81 
sign
 = 1;

83 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

84  
i32_‰omNaN
;

90 i‡–
exp
 ) 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

91 
shi·Di°
 = 0x4023 - 
exp
;

92 i‡–0 < 
shi·Di°
 ) 
sig64
 = 
	`so·Êﬂt_shi·RightJam64
( sig64, shiftDist );

93  
	`so·Êﬂt_roundToI32
–
sign
, 
sig64
, 
roundögMode
, 
exa˘
 );

95 
	}
}

	@src/softfloat/source/f128M_to_i32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
öt_Á°32_t
 
	$f128M_to_i32_r_möMag
–c⁄° 
Êﬂt128_t
 *
aPå
, 
boﬁ
 
exa˘
 )

49  
	`f128_to_i32_r_möMag
–*
aPå
, 
exa˘
 );

51 
	}
}

55 
öt_Á°32_t
 
	$f128M_to_i32_r_möMag
–c⁄° 
Êﬂt128_t
 *
aPå
, 
boﬁ
 
exa˘
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
uöt32_t
 
uiA96
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt64_t
 
sig64
;

62 
öt32_t
 
shi·Di°
;

63 
uöt32_t
 
absZ
, 
uiZ
;

64 uni⁄ { 
uöt32_t
 
ui
; 
öt32_t
 
i
; } 
uZ
;

68 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

69 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

70 
sign
 = 
	`signF128UI96
–
uiA96
 );

71 
exp
 = 
	`expF128UI96
–
uiA96
 );

72 
sig64
 = (
uöt64_t
Ë
	`‰acF128UI96
–
uiA96
 )<<32 | 
aWPå
[
	`ödexW‹d
( 4, 2 )];

73 i‡–
aWPå
[
	`ödexW‹d
–4, 1 )] |áWPå[ödexW‹d–4, 0 )] ) 
sig64
 |= 1;

76 i‡–
exp
 < 0x3FFF ) {

77 i‡–
exa˘
 && (
exp
 | 
sig64
) ) {

78 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

84 i‡–0x401F <
exp
 ) 
övÆid
;

85 
shi·Di°
 = 0x402F - 
exp
;

86 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

87 
absZ
 = 
sig64
>>
shi·Di°
;

88 
uiZ
 = 
sign
 ? -
absZ
 :ábsZ;

89 i‡–
uiZ
>>31 !
sign
 ) 
övÆid
;

90 i‡–
exa˘
 && ((
uöt64_t
Ë
absZ
<<
shi·Di°
 !
sig64
) ) {

91 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

93 
uZ
.
ui
 = 
uiZ
;

94  
uZ
.
i
;

97 
övÆid
:

98 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

100 (
exp
 =0x7FFFË&& 
sig64
 ? 
i32_‰omNaN


101 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

103 
	}
}

	@src/softfloat/source/f128M_to_i64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
öt_Á°64_t


47 
	$f128M_to_i64
–c⁄° 
Êﬂt128_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

50  
	`f128_to_i64
–*
aPå
, 
roundögMode
, 
exa˘
 );

52 
	}
}

56 
öt_Á°64_t


57 
	$f128M_to_i64
–c⁄° 
Êﬂt128_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

59 c⁄° 
uöt32_t
 *
aWPå
;

60 
uöt32_t
 
uiA96
;

61 
boﬁ
 
sign
;

62 
öt32_t
 
exp
;

63 
uöt32_t
 
sig96
;

64 
öt32_t
 
shi·Di°
;

65 
uöt32_t
 
sig
[4];

69 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

70 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

71 
sign
 = 
	`signF128UI96
–
uiA96
 );

72 
exp
 = 
	`expF128UI96
–
uiA96
 );

73 
sig96
 = 
	`‰acF128UI96
–
uiA96
 );

76 
shi·Di°
 = 0x404F - 
exp
;

77 i‡–
shi·Di°
 < 17 ) {

78 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

80 (
exp
 == 0x7FFF)

81 && (
sig96


82 || (
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

83 | 
aWPå
[
	`ödexW‹d
( 4, 0 )]))

84 ? 
i64_‰omNaN


85 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

89 i‡–
exp
 ) 
sig96
 |= 0x00010000;

90 
sig
[
	`ödexW‹d
–4, 3 )] = 
sig96
;

91 
sig
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

92 
sig
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

93 
sig
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

94 
	`so·Êﬂt_shi·RightJam128M
–
sig
, 
shi·Di°
, sig );

96 
	`so·Êﬂt_roundMToI64
(

97 
sign
, 
sig
 + 
	`ödexMu…iw‹dLo
–4, 3 ), 
roundögMode
, 
exa˘
 );

99 
	}
}

	@src/softfloat/source/f128M_to_i64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
öt_Á°64_t
 
	$f128M_to_i64_r_möMag
–c⁄° 
Êﬂt128_t
 *
aPå
, 
boﬁ
 
exa˘
 )

49  
	`f128_to_i64_r_möMag
–*
aPå
, 
exa˘
 );

51 
	}
}

55 
öt_Á°64_t
 
	$f128M_to_i64_r_möMag
–c⁄° 
Êﬂt128_t
 *
aPå
, 
boﬁ
 
exa˘
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
uöt32_t
 
uiA96
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt32_t
 
sig96
;

62 
öt32_t
 
shi·Di°
;

63 
uöt32_t
 
sig
[4];

64 
uöt64_t
 
uiZ
;

65 uni⁄ { 
uöt64_t
 
ui
; 
öt64_t
 
i
; } 
uZ
;

69 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

70 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

71 
sign
 = 
	`signF128UI96
–
uiA96
 );

72 
exp
 = 
	`expF128UI96
–
uiA96
 );

73 
sig96
 = 
	`‰acF128UI96
–
uiA96
 );

76 
shi·Di°
 = 0x403E - 
exp
;

77 i‡–
shi·Di°
 < 0 ) 
övÆid
;

78 i‡–
exa˘
 ) {

79 i‡–
exp
 ) 
sig96
 |= 0x00010000;

80 
sig
[
	`ödexW‹d
–4, 3 )] = 
sig96
;

81 
sig
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

82 
sig
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

83 
sig
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

84 
	`so·Êﬂt_shi·RightJam128M
–
sig
, 
shi·Di°
 + 17, sig );

85 
uiZ
 = (
uöt64_t
Ë
sig
[
	`ödexW‹d
( 4, 2 )]<<32 | sig[indexWord( 4, 1 )];

86 i‡–
uiZ
>>63 && (! 
sign
 || (uiZ !
	`UINT64_C
( 0x8000000000000000 ))) ) {

87 
övÆid
;

89 i‡–
sig
[
	`ödexW‹dLo
( 4 )] ) {

90 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

93 i‡–64 <
shi·Di°
 )  0;

94 
uiZ
 =

95 (
uöt64_t
Ë
sig96
<<47

96 | (
uöt64_t
Ë
aWPå
[
	`ödexW‹d
( 4, 2 )]<<15

97 | 
aWPå
[
	`ödexW‹d
( 4, 1 )]>>17;

98 i‡–
shi·Di°
 ) {

99 
uiZ
 |
	`UINT64_C
( 0x8000000000000000 );

100 
uiZ
 >>
shi·Di°
;

102 i‡–
uiZ
 || ! 
sign
 ) 
övÆid
;

103 
uiZ
 |
	`UINT64_C
( 0x8000000000000000 );

106 i‡–
sign
 ) 
uiZ
 = -uiZ;

107 
uZ
.
ui
 = 
uiZ
;

108  
uZ
.
i
;

111 
övÆid
:

112 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

114 (
exp
 == 0x7FFF)

115 && (
sig96


116 || (
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

117 | 
aWPå
[
	`ödexW‹d
( 4, 0 )]))

118 ? 
i64_‰omNaN


119 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

121 
	}
}

	@src/softfloat/source/f128M_to_ui32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
uöt_Á°32_t


47 
	$f128M_to_ui32
–c⁄° 
Êﬂt128_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

50  
	`f128_to_ui32
–*
aPå
, 
roundögMode
, 
exa˘
 );

52 
	}
}

56 
uöt_Á°32_t


57 
	$f128M_to_ui32
–c⁄° 
Êﬂt128_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

59 c⁄° 
uöt32_t
 *
aWPå
;

60 
uöt32_t
 
uiA96
;

61 
boﬁ
 
sign
;

62 
öt32_t
 
exp
;

63 
uöt64_t
 
sig64
;

64 
öt32_t
 
shi·Di°
;

68 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

69 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

70 
sign
 = 
	`signF128UI96
–
uiA96
 );

71 
exp
 = 
	`expF128UI96
–
uiA96
 );

72 
sig64
 = (
uöt64_t
Ë
	`‰acF128UI96
–
uiA96
 )<<32 | 
aWPå
[
	`ödexW‹d
( 4, 2 )];

73 i‡–
aWPå
[
	`ödexW‹d
–4, 1 )] |áWPå[ödexW‹d–4, 0 )] ) 
sig64
 |= 1;

76 #i‡(
ui32_‰omNaN
 !
ui32_‰omPosOvîÊow
Ë|| (ui32_‰omNaN !
ui32_‰omNegOvîÊow
)

77 i‡–(
exp
 =0x7FFFË&& 
sig64
 ) {

78 #i‡(
ui32_‰omNaN
 =
ui32_‰omPosOvîÊow
)

79 
sign
 = 0;

80 #ñi‡(
ui32_‰omNaN
 =
ui32_‰omNegOvîÊow
)

81 
sign
 = 1;

83 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

84  
ui32_‰omNaN
;

90 i‡–
exp
 ) 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

91 
shi·Di°
 = 0x4023 - 
exp
;

92 i‡–0 < 
shi·Di°
 ) 
sig64
 = 
	`so·Êﬂt_shi·RightJam64
( sig64, shiftDist );

93  
	`so·Êﬂt_roundToUI32
–
sign
, 
sig64
, 
roundögMode
, 
exa˘
 );

95 
	}
}

	@src/softfloat/source/f128M_to_ui32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
uöt_Á°32_t
 
	$f128M_to_ui32_r_möMag
–c⁄° 
Êﬂt128_t
 *
aPå
, 
boﬁ
 
exa˘
 )

49  
	`f128_to_ui32_r_möMag
–*
aPå
, 
exa˘
 );

51 
	}
}

55 
uöt_Á°32_t
 
	$f128M_to_ui32_r_möMag
–c⁄° 
Êﬂt128_t
 *
aPå
, 
boﬁ
 
exa˘
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
uöt32_t
 
uiA96
;

59 
öt32_t
 
exp
;

60 
uöt64_t
 
sig64
;

61 
öt32_t
 
shi·Di°
;

62 
boﬁ
 
sign
;

63 
uöt32_t
 
z
;

67 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

68 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

69 
exp
 = 
	`expF128UI96
–
uiA96
 );

70 
sig64
 = (
uöt64_t
Ë
	`‰acF128UI96
–
uiA96
 )<<32 | 
aWPå
[
	`ödexW‹d
( 4, 2 )];

71 i‡–
aWPå
[
	`ödexW‹d
–4, 1 )] |áWPå[ödexW‹d–4, 0 )] ) 
sig64
 |= 1;

74 
shi·Di°
 = 0x402F - 
exp
;

75 i‡–49 <
shi·Di°
 ) {

76 i‡–
exa˘
 && (
exp
 | 
sig64
) ) {

77 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

83 
sign
 = 
	`signF128UI96
–
uiA96
 );

84 i‡–
sign
 || (
shi·Di°
 < 17) ) {

85 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

87 (
exp
 =0x7FFFË&& 
sig64
 ? 
ui32_‰omNaN


88 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

92 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

93 
z
 = 
sig64
>>
shi·Di°
;

94 i‡–
exa˘
 && ((
uöt64_t
Ë
z
<<
shi·Di°
 !
sig64
) ) {

95 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

97  
z
;

99 
	}
}

	@src/softfloat/source/f128M_to_ui64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
uöt_Á°64_t


47 
	$f128M_to_ui64
–c⁄° 
Êﬂt128_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

50  
	`f128_to_ui64
–*
aPå
, 
roundögMode
, 
exa˘
 );

52 
	}
}

56 
uöt_Á°64_t


57 
	$f128M_to_ui64
–c⁄° 
Êﬂt128_t
 *
aPå
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

59 c⁄° 
uöt32_t
 *
aWPå
;

60 
uöt32_t
 
uiA96
;

61 
boﬁ
 
sign
;

62 
öt32_t
 
exp
;

63 
uöt32_t
 
sig96
;

64 
öt32_t
 
shi·Di°
;

65 
uöt32_t
 
sig
[4];

69 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

70 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

71 
sign
 = 
	`signF128UI96
–
uiA96
 );

72 
exp
 = 
	`expF128UI96
–
uiA96
 );

73 
sig96
 = 
	`‰acF128UI96
–
uiA96
 );

76 
shi·Di°
 = 0x404F - 
exp
;

77 i‡–
shi·Di°
 < 17 ) {

78 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

80 (
exp
 == 0x7FFF)

81 && (
sig96


82 || (
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

83 | 
aWPå
[
	`ödexW‹d
( 4, 0 )]))

84 ? 
ui64_‰omNaN


85 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

89 i‡–
exp
 ) 
sig96
 |= 0x00010000;

90 
sig
[
	`ödexW‹d
–4, 3 )] = 
sig96
;

91 
sig
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

92 
sig
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

93 
sig
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

94 
	`so·Êﬂt_shi·RightJam128M
–
sig
, 
shi·Di°
, sig );

96 
	`so·Êﬂt_roundMToUI64
(

97 
sign
, 
sig
 + 
	`ödexMu…iw‹dLo
–4, 3 ), 
roundögMode
, 
exa˘
 );

99 
	}
}

	@src/softfloat/source/f128M_to_ui64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
uöt_Á°64_t
 
	$f128M_to_ui64_r_möMag
–c⁄° 
Êﬂt128_t
 *
aPå
, 
boﬁ
 
exa˘
 )

49  
	`f128_to_ui64_r_möMag
–*
aPå
, 
exa˘
 );

51 
	}
}

55 
uöt_Á°64_t
 
	$f128M_to_ui64_r_möMag
–c⁄° 
Êﬂt128_t
 *
aPå
, 
boﬁ
 
exa˘
 )

57 c⁄° 
uöt32_t
 *
aWPå
;

58 
uöt32_t
 
uiA96
;

59 
boﬁ
 
sign
;

60 
öt32_t
 
exp
;

61 
uöt32_t
 
sig96
;

62 
öt32_t
 
shi·Di°
;

63 
uöt32_t
 
sig
[4];

64 
uöt64_t
 
z
;

68 
aWPå
 = (c⁄° 
uöt32_t
 *Ë
aPå
;

69 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

70 
sign
 = 
	`signF128UI96
–
uiA96
 );

71 
exp
 = 
	`expF128UI96
–
uiA96
 );

72 
sig96
 = 
	`‰acF128UI96
–
uiA96
 );

75 
shi·Di°
 = 0x403E - 
exp
;

76 i‡–
shi·Di°
 < 0 ) 
övÆid
;

77 i‡–
exa˘
 ) {

78 i‡–
exp
 ) 
sig96
 |= 0x00010000;

79 
sig
[
	`ödexW‹d
–4, 3 )] = 
sig96
;

80 
sig
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

81 
sig
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

82 
sig
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

83 
	`so·Êﬂt_shi·RightJam128M
–
sig
, 
shi·Di°
 + 17, sig );

84 
z
 = (
uöt64_t
Ë
sig
[
	`ödexW‹d
( 4, 2 )]<<32 | sig[indexWord( 4, 1 )];

85 i‡–
sign
 && 
z
 ) 
övÆid
;

86 i‡–
sig
[
	`ödexW‹dLo
( 4 )] ) {

87 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

90 i‡–64 <
shi·Di°
 )  0;

91 i‡–
sign
 ) 
övÆid
;

92 
z
 = 
	`UINT64_C
( 0x8000000000000000 )

93 | (
uöt64_t
Ë
sig96
<<47

94 | (
uöt64_t
Ë
aWPå
[
	`ödexW‹d
( 4, 2 )]<<15

95 | 
aWPå
[
	`ödexW‹d
( 4, 1 )]>>17;

96 
z
 >>
shi·Di°
;

98  
z
;

101 
övÆid
:

102 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

104 (
exp
 == 0x7FFF)

105 && (
sig96


106 || (
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

107 | 
aWPå
[
	`ödexW‹d
( 4, 0 )]))

108 ? 
ui64_‰omNaN


109 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

111 
	}
}

	@src/softfloat/source/f128_add.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt128_t
 
	$f128_add
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

45 
ui128_f128
 
uA
;

46 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

47 
boﬁ
 
signA
;

48 
ui128_f128
 
uB
;

49 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

50 
boﬁ
 
signB
;

51 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

52 
Êﬂt128_t


53 (*
magsFuncPå
)(

54 
uöt_Á°64_t
, uöt_Á°64_t, uöt_Á°64_t, uöt_Á°64_t, 
boﬁ
 );

57 
uA
.
f
 = 
a
;

58 
uiA64
 = 
uA
.
ui
.
v64
;

59 
uiA0
 = 
uA
.
ui
.
v0
;

60 
signA
 = 
	`signF128UI64
–
uiA64
 );

61 
uB
.
f
 = 
b
;

62 
uiB64
 = 
uB
.
ui
.
v64
;

63 
uiB0
 = 
uB
.
ui
.
v0
;

64 
signB
 = 
	`signF128UI64
–
uiB64
 );

65 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

66 i‡–
signA
 =
signB
 ) {

67  
	`so·Êﬂt_addMagsF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

69  
	`so·Êﬂt_subMagsF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

72 
magsFuncPå
 =

73 (
signA
 =
signB
Ë? 
so·Êﬂt_addMagsF128
 : 
so·Êﬂt_subMagsF128
;

74  (*
magsFuncPå
)–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

77 
	}
}

	@src/softfloat/source/f128_div.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t
 
	$f128_div
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
signA
;

49 
öt_Á°32_t
 
expA
;

50 
uöt128
 
sigA
;

51 
ui128_f128
 
uB
;

52 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

53 
boﬁ
 
signB
;

54 
öt_Á°32_t
 
expB
;

55 
uöt128
 
sigB
;

56 
boﬁ
 
signZ
;

57 
exp32_sig128
 
n‹mExpSig
;

58 
öt_Á°32_t
 
expZ
;

59 
uöt128
 
ªm
;

60 
uöt_Á°32_t
 
ªcù32
;

61 
ix
;

62 
uöt_Á°64_t
 
q64
;

63 
uöt_Á°32_t
 
q
;

64 
uöt128
 
ãrm
;

65 
uöt_Á°32_t
 
qs
[3];

66 
uöt_Á°64_t
 
sigZExåa
;

67 
uöt128
 
sigZ
, 
uiZ
;

68 
ui128_f128
 
uZ
;

72 
uA
.
f
 = 
a
;

73 
uiA64
 = 
uA
.
ui
.
v64
;

74 
uiA0
 = 
uA
.
ui
.
v0
;

75 
signA
 = 
	`signF128UI64
–
uiA64
 );

76 
expA
 = 
	`expF128UI64
–
uiA64
 );

77 
sigA
.
v64
 = 
	`‰acF128UI64
–
uiA64
 );

78 
sigA
.
v0
 = 
uiA0
;

79 
uB
.
f
 = 
b
;

80 
uiB64
 = 
uB
.
ui
.
v64
;

81 
uiB0
 = 
uB
.
ui
.
v0
;

82 
signB
 = 
	`signF128UI64
–
uiB64
 );

83 
expB
 = 
	`expF128UI64
–
uiB64
 );

84 
sigB
.
v64
 = 
	`‰acF128UI64
–
uiB64
 );

85 
sigB
.
v0
 = 
uiB0
;

86 
signZ
 = 
signA
 ^ 
signB
;

89 i‡–
expA
 == 0x7FFF ) {

90 i‡–
sigA
.
v64
 | sigA.
v0
 ) 
¥›ag©eNaN
;

91 i‡–
expB
 == 0x7FFF ) {

92 i‡–
sigB
.
v64
 | sigB.
v0
 ) 
¥›ag©eNaN
;

93 
övÆid
;

95 
öföôy
;

97 i‡–
expB
 == 0x7FFF ) {

98 i‡–
sigB
.
v64
 | sigB.
v0
 ) 
¥›ag©eNaN
;

99 
zîo
;

103 i‡–! 
expB
 ) {

104 i‡–! (
sigB
.
v64
 | sigB.
v0
) ) {

105 i‡–! (
expA
 | 
sigA
.
v64
 | sigA.
v0
ËË
övÆid
;

106 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_öföôe
 );

107 
öföôy
;

109 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigB
.
v64
, sigB.
v0
 );

110 
expB
 = 
n‹mExpSig
.
exp
;

111 
sigB
 = 
n‹mExpSig
.
sig
;

113 i‡–! 
expA
 ) {

114 i‡–! (
sigA
.
v64
 | sigA.
v0
ËË
zîo
;

115 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigA
.
v64
, sigA.
v0
 );

116 
expA
 = 
n‹mExpSig
.
exp
;

117 
sigA
 = 
n‹mExpSig
.
sig
;

121 
expZ
 = 
expA
 - 
expB
 + 0x3FFE;

122 
sigA
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

123 
sigB
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

124 
ªm
 = 
sigA
;

125 i‡–
	`so·Êﬂt_…128
–
sigA
.
v64
, sigA.
v0
, 
sigB
.v64, sigB.v0 ) ) {

126 --
expZ
;

127 
ªm
 = 
	`so·Êﬂt_add128
–
sigA
.
v64
, sigA.
v0
, sigA.v64, sigA.v0 );

129 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
sigB
.
v64
>>17 );

130 
ix
 = 3;

132 
q64
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë(
ªm
.
v64
>>19Ë* 
ªcù32
;

133 
q
 = (
q64
 + 0x80000000)>>32;

134 --
ix
;

135 i‡–
ix
 < 0 ) ;

136 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 29 );

137 
ãrm
 = 
	`so·Êﬂt_mul128By32
–
sigB
.
v64
, sigB.
v0
, 
q
 );

138 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

139 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

140 --
q
;

141 
ªm
 = 
	`so·Êﬂt_add128
–ªm.
v64
,Ñem.
v0
, 
sigB
.v64, sigB.v0 );

143 
qs
[
ix
] = 
q
;

147 i‡–((
q
 + 1) & 7) < 2 ) {

148 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 29 );

149 
ãrm
 = 
	`so·Êﬂt_mul128By32
–
sigB
.
v64
, sigB.
v0
, 
q
 );

150 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

151 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

152 --
q
;

153 
ªm
 = 
	`so·Êﬂt_add128
–ªm.
v64
,Ñem.
v0
, 
sigB
.v64, sigB.v0 );

154 } i‡–
	`so·Êﬂt_À128
–
sigB
.
v64
, sigB.
v0
, 
ªm
.v64,Ñem.v0 ) ) {

155 ++
q
;

156 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
sigB
.v64, sigB.v0 );

158 i‡–
ªm
.
v64
 |Ñem.
v0
 ) 
q
 |= 1;

162 
sigZExåa
 = (
uöt64_t
Ë((
uöt_Á°64_t
Ë
q
<<60);

163 
ãrm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
qs
[1], 54 );

164 
sigZ
 =

165 
	`so·Êﬂt_add128
(

166 (
uöt_Á°64_t
Ë
qs
[2]<<19, ((uöt_Á°64_tËqs[0]<<25Ë+ (
q
>>4),

167 
ãrm
.
v64
,Åîm.
v0


170 
	`so·Êﬂt_roundPackToF128
–
signZ
, 
expZ
, 
sigZ
.
v64
, sigZ.
v0
, 
sigZExåa
 );

173 
¥›ag©eNaN
:

174 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

175 
uiZ
;

178 
övÆid
:

179 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

180 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

181 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

182 
uiZ
;

185 
öföôy
:

186 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
signZ
, 0x7FFF, 0 );

187 
uiZ0
;

190 
zîo
:

191 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
signZ
, 0, 0 );

192 
uiZ0
:

193 
uiZ
.
v0
 = 0;

194 
uiZ
:

195 
uZ
.
ui
 = 
uiZ
;

196  
uZ
.
f
;

198 
	}
}

	@src/softfloat/source/f128_eq.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f128_eq
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
ui128_f128
 
uB
;

49 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

51 
uA
.
f
 = 
a
;

52 
uiA64
 = 
uA
.
ui
.
v64
;

53 
uiA0
 = 
uA
.
ui
.
v0
;

54 
uB
.
f
 = 
b
;

55 
uiB64
 = 
uB
.
ui
.
v64
;

56 
uiB0
 = 
uB
.
ui
.
v0
;

57 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) || isNaNF128UI–
uiB64
, 
uiB0
 ) ) {

59 
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 )

60 || 
	`so·Êﬂt_isSigNaNF128UI
–
uiB64
, 
uiB0
 )

62 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

64  
Ál£
;

67 (
uiA0
 =
uiB0
)

68 && ( (
uiA64
 =
uiB64
)

69 || (! 
uiA0
 && ! ((
uiA64
 | 
uiB64
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )))

72 
	}
}

	@src/softfloat/source/f128_eq_signaling.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f128_eq_sig«lög
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

45 
ui128_f128
 
uA
;

46 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

47 
ui128_f128
 
uB
;

48 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

50 
uA
.
f
 = 
a
;

51 
uiA64
 = 
uA
.
ui
.
v64
;

52 
uiA0
 = 
uA
.
ui
.
v0
;

53 
uB
.
f
 = 
b
;

54 
uiB64
 = 
uB
.
ui
.
v64
;

55 
uiB0
 = 
uB
.
ui
.
v0
;

56 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) || isNaNF128UI–
uiB64
, 
uiB0
 ) ) {

57 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

58  
Ál£
;

61 (
uiA0
 =
uiB0
)

62 && ( (
uiA64
 =
uiB64
)

63 || (! 
uiA0
 && ! ((
uiA64
 | 
uiB64
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )))

66 
	}
}

	@src/softfloat/source/f128_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f128_isSig«lögNaN
–
Êﬂt128_t
 
a
 )

45 
ui128_f128
 
uA
;

47 
uA
.
f
 = 
a
;

48  
	`so·Êﬂt_isSigNaNF128UI
–
uA
.
ui
.
v64
, uA.ui.
v0
 );

50 
	}
}

	@src/softfloat/source/f128_le.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f128_À
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

45 
ui128_f128
 
uA
;

46 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

47 
ui128_f128
 
uB
;

48 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

49 
boﬁ
 
signA
, 
signB
;

51 
uA
.
f
 = 
a
;

52 
uiA64
 = 
uA
.
ui
.
v64
;

53 
uiA0
 = 
uA
.
ui
.
v0
;

54 
uB
.
f
 = 
b
;

55 
uiB64
 = 
uB
.
ui
.
v64
;

56 
uiB0
 = 
uB
.
ui
.
v0
;

57 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) || isNaNF128UI–
uiB64
, 
uiB0
 ) ) {

58 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

59  
Ál£
;

61 
signA
 = 
	`signF128UI64
–
uiA64
 );

62 
signB
 = 
	`signF128UI64
–
uiB64
 );

64 (
signA
 !
signB
)

65 ? 
signA


66 || ! (((
uiA64
 | 
uiB64
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

67 | 
uiA0
 | 
uiB0
)

68 : ((
uiA64
 =
uiB64
Ë&& (
uiA0
 =
uiB0
))

69 || (
signA
 ^ 
	`so·Êﬂt_…128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 ));

71 
	}
}

	@src/softfloat/source/f128_le_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f128_À_quõt
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
ui128_f128
 
uB
;

49 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

50 
boﬁ
 
signA
, 
signB
;

52 
uA
.
f
 = 
a
;

53 
uiA64
 = 
uA
.
ui
.
v64
;

54 
uiA0
 = 
uA
.
ui
.
v0
;

55 
uB
.
f
 = 
b
;

56 
uiB64
 = 
uB
.
ui
.
v64
;

57 
uiB0
 = 
uB
.
ui
.
v0
;

58 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) || isNaNF128UI–
uiB64
, 
uiB0
 ) ) {

60 
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 )

61 || 
	`so·Êﬂt_isSigNaNF128UI
–
uiB64
, 
uiB0
 )

63 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

65  
Ál£
;

67 
signA
 = 
	`signF128UI64
–
uiA64
 );

68 
signB
 = 
	`signF128UI64
–
uiB64
 );

70 (
signA
 !
signB
)

71 ? 
signA


72 || ! (((
uiA64
 | 
uiB64
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

73 | 
uiA0
 | 
uiB0
)

74 : ((
uiA64
 =
uiB64
Ë&& (
uiA0
 =
uiB0
))

75 || (
signA
 ^ 
	`so·Êﬂt_…128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 ));

77 
	}
}

	@src/softfloat/source/f128_lt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f128_…
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

45 
ui128_f128
 
uA
;

46 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

47 
ui128_f128
 
uB
;

48 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

49 
boﬁ
 
signA
, 
signB
;

51 
uA
.
f
 = 
a
;

52 
uiA64
 = 
uA
.
ui
.
v64
;

53 
uiA0
 = 
uA
.
ui
.
v0
;

54 
uB
.
f
 = 
b
;

55 
uiB64
 = 
uB
.
ui
.
v64
;

56 
uiB0
 = 
uB
.
ui
.
v0
;

57 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) || isNaNF128UI–
uiB64
, 
uiB0
 ) ) {

58 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

59  
Ál£
;

61 
signA
 = 
	`signF128UI64
–
uiA64
 );

62 
signB
 = 
	`signF128UI64
–
uiB64
 );

64 (
signA
 !
signB
)

65 ? 
signA


66 && (((
uiA64
 | 
uiB64
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

67 | 
uiA0
 | 
uiB0
)

68 : ((
uiA64
 !
uiB64
Ë|| (
uiA0
 !
uiB0
))

69 && (
signA
 ^ 
	`so·Êﬂt_…128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 ));

71 
	}
}

	@src/softfloat/source/f128_lt_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f128_…_quõt
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
ui128_f128
 
uB
;

49 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

50 
boﬁ
 
signA
, 
signB
;

52 
uA
.
f
 = 
a
;

53 
uiA64
 = 
uA
.
ui
.
v64
;

54 
uiA0
 = 
uA
.
ui
.
v0
;

55 
uB
.
f
 = 
b
;

56 
uiB64
 = 
uB
.
ui
.
v64
;

57 
uiB0
 = 
uB
.
ui
.
v0
;

58 i‡–
	`isNaNF128UI
–
uiA64
, 
uiA0
 ) || isNaNF128UI–
uiB64
, 
uiB0
 ) ) {

60 
	`so·Êﬂt_isSigNaNF128UI
–
uiA64
, 
uiA0
 )

61 || 
	`so·Êﬂt_isSigNaNF128UI
–
uiB64
, 
uiB0
 )

63 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

65  
Ál£
;

67 
signA
 = 
	`signF128UI64
–
uiA64
 );

68 
signB
 = 
	`signF128UI64
–
uiB64
 );

70 (
signA
 !
signB
)

71 ? 
signA


72 && (((
uiA64
 | 
uiB64
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

73 | 
uiA0
 | 
uiB0
)

74 : ((
uiA64
 !
uiB64
Ë|| (
uiA0
 !
uiB0
))

75 && (
signA
 ^ 
	`so·Êﬂt_…128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 ));

77 
	}
}

	@src/softfloat/source/f128_mul.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t
 
	$f128_mul
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
signA
;

49 
öt_Á°32_t
 
expA
;

50 
uöt128
 
sigA
;

51 
ui128_f128
 
uB
;

52 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

53 
boﬁ
 
signB
;

54 
öt_Á°32_t
 
expB
;

55 
uöt128
 
sigB
;

56 
boﬁ
 
signZ
;

57 
uöt_Á°64_t
 
magBôs
;

58 
exp32_sig128
 
n‹mExpSig
;

59 
öt_Á°32_t
 
expZ
;

60 
uöt64_t
 
sig256Z
[4];

61 
uöt_Á°64_t
 
sigZExåa
;

62 
uöt128
 
sigZ
;

63 
uöt128_exåa
 
sig128Exåa
;

64 
uöt128
 
uiZ
;

65 
ui128_f128
 
uZ
;

69 
uA
.
f
 = 
a
;

70 
uiA64
 = 
uA
.
ui
.
v64
;

71 
uiA0
 = 
uA
.
ui
.
v0
;

72 
signA
 = 
	`signF128UI64
–
uiA64
 );

73 
expA
 = 
	`expF128UI64
–
uiA64
 );

74 
sigA
.
v64
 = 
	`‰acF128UI64
–
uiA64
 );

75 
sigA
.
v0
 = 
uiA0
;

76 
uB
.
f
 = 
b
;

77 
uiB64
 = 
uB
.
ui
.
v64
;

78 
uiB0
 = 
uB
.
ui
.
v0
;

79 
signB
 = 
	`signF128UI64
–
uiB64
 );

80 
expB
 = 
	`expF128UI64
–
uiB64
 );

81 
sigB
.
v64
 = 
	`‰acF128UI64
–
uiB64
 );

82 
sigB
.
v0
 = 
uiB0
;

83 
signZ
 = 
signA
 ^ 
signB
;

86 i‡–
expA
 == 0x7FFF ) {

88 (
sigA
.
v64
 | sigA.
v0
Ë|| ((
expB
 =0x7FFFË&& (
sigB
.v64 | sigB.v0))

90 
¥›ag©eNaN
;

92 
magBôs
 = 
expB
 | 
sigB
.
v64
 | sigB.
v0
;

93 
öfArg
;

95 i‡–
expB
 == 0x7FFF ) {

96 i‡–
sigB
.
v64
 | sigB.
v0
 ) 
¥›ag©eNaN
;

97 
magBôs
 = 
expA
 | 
sigA
.
v64
 | sigA.
v0
;

98 
öfArg
;

102 i‡–! 
expA
 ) {

103 i‡–! (
sigA
.
v64
 | sigA.
v0
ËË
zîo
;

104 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigA
.
v64
, sigA.
v0
 );

105 
expA
 = 
n‹mExpSig
.
exp
;

106 
sigA
 = 
n‹mExpSig
.
sig
;

108 i‡–! 
expB
 ) {

109 i‡–! (
sigB
.
v64
 | sigB.
v0
ËË
zîo
;

110 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigB
.
v64
, sigB.
v0
 );

111 
expB
 = 
n‹mExpSig
.
exp
;

112 
sigB
 = 
n‹mExpSig
.
sig
;

116 
expZ
 = 
expA
 + 
expB
 - 0x4000;

117 
sigA
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

118 
sigB
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–sigB.
v64
, sigB.
v0
, 16 );

119 
	`so·Êﬂt_mul128To256M
–
sigA
.
v64
, sigA.
v0
, 
sigB
.v64, sigB.v0, 
sig256Z
 );

120 
sigZExåa
 = 
sig256Z
[
	`ödexW‹d
( 4, 1 )] | (sig256Z[indexWord( 4, 0 )] != 0);

121 
sigZ
 =

122 
	`so·Êﬂt_add128
(

123 
sig256Z
[
	`ödexW‹d
( 4, 3 )], sig256Z[indexWord( 4, 2 )],

124 
sigA
.
v64
, sigA.
v0


126 i‡–
	`UINT64_C
–0x0002000000000000 ) <
sigZ
.
v64
 ) {

127 ++
expZ
;

128 
sig128Exåa
 =

129 
	`so·Êﬂt_sh‹tShi·RightJam128Exåa
(

130 
sigZ
.
v64
, sigZ.
v0
, 
sigZExåa
, 1 );

131 
sigZ
 = 
sig128Exåa
.
v
;

132 
sigZExåa
 = 
sig128Exåa
.
exåa
;

135 
	`so·Êﬂt_roundPackToF128
–
signZ
, 
expZ
, 
sigZ
.
v64
, sigZ.
v0
, 
sigZExåa
 );

138 
¥›ag©eNaN
:

139 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

140 
uiZ
;

143 
öfArg
:

144 i‡–! 
magBôs
 ) {

145 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

146 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

147 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

148 
uiZ
;

150 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
signZ
, 0x7FFF, 0 );

151 
uiZ0
;

154 
zîo
:

155 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
signZ
, 0, 0 );

156 
uiZ0
:

157 
uiZ
.
v0
 = 0;

158 
uiZ
:

159 
uZ
.
ui
 = 
uiZ
;

160  
uZ
.
f
;

162 
	}
}

	@src/softfloat/source/f128_mulAdd.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt128_t
 
	$f128_mulAdd
–
Êﬂt128_t
 
a
, flﬂt128_à
b
, flﬂt128_à
c
 )

44 
ui128_f128
 
uA
;

45 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

46 
ui128_f128
 
uB
;

47 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

48 
ui128_f128
 
uC
;

49 
uöt_Á°64_t
 
uiC64
, 
uiC0
;

51 
uA
.
f
 = 
a
;

52 
uiA64
 = 
uA
.
ui
.
v64
;

53 
uiA0
 = 
uA
.
ui
.
v0
;

54 
uB
.
f
 = 
b
;

55 
uiB64
 = 
uB
.
ui
.
v64
;

56 
uiB0
 = 
uB
.
ui
.
v0
;

57 
uC
.
f
 = 
c
;

58 
uiC64
 = 
uC
.
ui
.
v64
;

59 
uiC0
 = 
uC
.
ui
.
v0
;

60  
	`so·Êﬂt_mulAddF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
uiC64
, 
uiC0
, 0 );

62 
	}
}

	@src/softfloat/source/f128_rem.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t
 
	$f128_ªm
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
signA
;

49 
öt_Á°32_t
 
expA
;

50 
uöt128
 
sigA
;

51 
ui128_f128
 
uB
;

52 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

53 
öt_Á°32_t
 
expB
;

54 
uöt128
 
sigB
;

55 
exp32_sig128
 
n‹mExpSig
;

56 
uöt128
 
ªm
;

57 
öt_Á°32_t
 
expDiff
;

58 
uöt_Á°32_t
 
q
, 
ªcù32
;

59 
uöt_Á°64_t
 
q64
;

60 
uöt128
 
ãrm
, 
ÆtRem
, 
mónRem
;

61 
boﬁ
 
signRem
;

62 
uöt128
 
uiZ
;

63 
ui128_f128
 
uZ
;

67 
uA
.
f
 = 
a
;

68 
uiA64
 = 
uA
.
ui
.
v64
;

69 
uiA0
 = 
uA
.
ui
.
v0
;

70 
signA
 = 
	`signF128UI64
–
uiA64
 );

71 
expA
 = 
	`expF128UI64
–
uiA64
 );

72 
sigA
.
v64
 = 
	`‰acF128UI64
–
uiA64
 );

73 
sigA
.
v0
 = 
uiA0
;

74 
uB
.
f
 = 
b
;

75 
uiB64
 = 
uB
.
ui
.
v64
;

76 
uiB0
 = 
uB
.
ui
.
v0
;

77 
expB
 = 
	`expF128UI64
–
uiB64
 );

78 
sigB
.
v64
 = 
	`‰acF128UI64
–
uiB64
 );

79 
sigB
.
v0
 = 
uiB0
;

82 i‡–
expA
 == 0x7FFF ) {

84 (
sigA
.
v64
 | sigA.
v0
Ë|| ((
expB
 =0x7FFFË&& (
sigB
.v64 | sigB.v0))

86 
¥›ag©eNaN
;

88 
övÆid
;

90 i‡–
expB
 == 0x7FFF ) {

91 i‡–
sigB
.
v64
 | sigB.
v0
 ) 
¥›ag©eNaN
;

92  
a
;

96 i‡–! 
expB
 ) {

97 i‡–! (
sigB
.
v64
 | sigB.
v0
ËË
övÆid
;

98 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigB
.
v64
, sigB.
v0
 );

99 
expB
 = 
n‹mExpSig
.
exp
;

100 
sigB
 = 
n‹mExpSig
.
sig
;

102 i‡–! 
expA
 ) {

103 i‡–! (
sigA
.
v64
 | sigA.
v0
ËË 
a
;

104 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigA
.
v64
, sigA.
v0
 );

105 
expA
 = 
n‹mExpSig
.
exp
;

106 
sigA
 = 
n‹mExpSig
.
sig
;

110 
sigA
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

111 
sigB
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

112 
ªm
 = 
sigA
;

113 
expDiff
 = 
expA
 - 
expB
;

114 i‡–
expDiff
 < 1 ) {

115 i‡–
expDiff
 < -1 )  
a
;

116 i‡–
expDiff
 ) {

117 --
expB
;

118 
sigB
 = 
	`so·Êﬂt_add128
–sigB.
v64
, sigB.
v0
, sigB.v64, sigB.v0 );

119 
q
 = 0;

121 
q
 = 
	`so·Êﬂt_À128
–
sigB
.
v64
, sigB.
v0
, 
ªm
.v64,Ñem.v0 );

122 i‡–
q
 ) {

123 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
sigB
.v64, sigB.v0 );

127 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
sigB
.
v64
>>17 );

128 
expDiff
 -= 30;

130 
q64
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë(
ªm
.
v64
>>19Ë* 
ªcù32
;

131 i‡–
expDiff
 < 0 ) ;

132 
q
 = (
q64
 + 0x80000000)>>32;

133 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 29 );

134 
ãrm
 = 
	`so·Êﬂt_mul128By32
–
sigB
.
v64
, sigB.
v0
, 
q
 );

135 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

136 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

137 
ªm
 = 
	`so·Êﬂt_add128
–ªm.
v64
,Ñem.
v0
, 
sigB
.v64, sigB.v0 );

139 
expDiff
 -= 29;

144 
q
 = (
uöt32_t
Ë(
q64
>>32)>>(~
expDiff
 & 31);

145 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 
expDiff
 + 30 );

146 
ãrm
 = 
	`so·Êﬂt_mul128By32
–
sigB
.
v64
, sigB.
v0
, 
q
 );

147 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
ãrm
.v64,Åerm.v0 );

148 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

149 
ÆtRem
 = 
	`so·Êﬂt_add128
–
ªm
.
v64
,Ñem.
v0
, 
sigB
.v64, sigB.v0 );

150 
£À˘Rem
;

156 
ÆtRem
 = 
ªm
;

157 ++
q
;

158 
ªm
 = 
	`so·Êﬂt_sub128
–ªm.
v64
,Ñem.
v0
, 
sigB
.v64, sigB.v0 );

159 }  ! (
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 )) );

160 
£À˘Rem
:

161 
mónRem
 = 
	`so·Êﬂt_add128
–
ªm
.
v64
,Ñem.
v0
, 
ÆtRem
.v64,áltRem.v0 );

163 (
mónRem
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ))

164 || (! (
mónRem
.
v64
 | mónRem.
v0
Ë&& (
q
 & 1))

166 
ªm
 = 
ÆtRem
;

168 
signRem
 = 
signA
;

169 i‡–
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

170 
signRem
 = ! signRem;

171 
ªm
 = 
	`so·Êﬂt_sub128
–0, 0,Ñem.
v64
,Ñem.
v0
 );

173  
	`so·Êﬂt_n‹mRoundPackToF128
–
signRem
, 
expB
 - 1, 
ªm
.
v64
,Ñem.
v0
 );

176 
¥›ag©eNaN
:

177 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

178 
uiZ
;

181 
övÆid
:

182 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

183 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

184 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

185 
uiZ
:

186 
uZ
.
ui
 = 
uiZ
;

187  
uZ
.
f
;

189 
	}
}

	@src/softfloat/source/f128_roundToInt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t


45 
	$f128_roundToI¡
–
Êﬂt128_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

47 
ui128_f128
 
uA
;

48 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

49 
öt_Á°32_t
 
exp
;

50 
uöt128
 
uiZ
;

51 
uöt_Á°64_t
 
œ°BôMask0
, 
roundBôsMask
;

52 
boﬁ
 
roundNórEví
;

53 
uöt_Á°64_t
 
œ°BôMask64
;

54 
ui128_f128
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA64
 = 
uA
.
ui
.
v64
;

60 
uiA0
 = 
uA
.
ui
.
v0
;

61 
exp
 = 
	`expF128UI64
–
uiA64
 );

64 i‡–0x402F <
exp
 ) {

67 i‡–0x406F <
exp
 ) {

68 i‡–(
exp
 =0x7FFFË&& (
	`‰acF128UI64
–
uiA64
 ) | 
uiA0
) ) {

69 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–
uiA64
, 
uiA0
, 0, 0 );

70 
uiZ
;

72  
a
;

76 
œ°BôMask0
 = (
uöt_Á°64_t
Ë2<<(0x406E - 
exp
);

77 
roundBôsMask
 = 
œ°BôMask0
 - 1;

78 
uiZ
.
v64
 = 
uiA64
;

79 
uiZ
.
v0
 = 
uiA0
;

80 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

81 i‡–
roundNórEví
 || (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
) ) {

82 i‡–
exp
 == 0x402F ) {

83 i‡–
	`UINT64_C
–0x8000000000000000 ) <
uiZ
.
v0
 ) {

84 ++
uiZ
.
v64
;

86 
roundNórEví


87 && (
uiZ
.
v0
 =
	`UINT64_C
( 0x8000000000000000 ))

89 
uiZ
.
v64
 &= ~1;

93 
uiZ
 = 
	`so·Êﬂt_add128
–uiZ.
v64
, uiZ.
v0
, 0, 
œ°BôMask0
>>1 );

94 i‡–
roundNórEví
 && !(
uiZ
.
v0
 & 
roundBôsMask
) ) {

95 
uiZ
.
v0
 &~
œ°BôMask0
;

99 
roundögMode


100 =(
	`signF128UI64
–
uiZ
.
v64
 ) ? 
so·Êﬂt_round_mö


101 : 
so·Êﬂt_round_max
)

103 
uiZ
 = 
	`so·Êﬂt_add128
–uiZ.
v64
, uiZ.
v0
, 0, 
roundBôsMask
 );

105 
uiZ
.
v0
 &~
roundBôsMask
;

106 
œ°BôMask64
 = !
œ°BôMask0
;

110 i‡–
exp
 < 0x3FFF ) {

111 i‡–!((
uiA64
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF )Ë| 
uiA0
ËË 
a
;

112 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

113 
uiZ
.
v64
 = 
uiA64
 & 
	`∑ckToF128UI64
( 1, 0, 0 );

114 
uiZ
.
v0
 = 0;

115  
roundögMode
 ) {

116 
so·Êﬂt_round_√¨_eví
:

117 i‡–!(
	`‰acF128UI64
–
uiA64
 ) | 
uiA0
) ) ;

118 
so·Êﬂt_round_√¨_maxMag
:

119 i‡–
exp
 =0x3FFE ) 
uiZ
.
v64
 |
	`∑ckToF128UI64
( 0, 0x3FFF, 0 );

121 
so·Êﬂt_round_mö
:

122 i‡–
uiZ
.
v64
 ) uiZ.v64 = 
	`∑ckToF128UI64
( 1, 0x3FFF, 0 );

124 
so·Êﬂt_round_max
:

125 i‡–!
uiZ
.
v64
 ) uiZ.v64 = 
	`∑ckToF128UI64
( 0, 0x3FFF, 0 );

127 #ifde‡
SOFTFLOAT_ROUND_ODD


128 
so·Êﬂt_round_odd
:

129 
uiZ
.
v64
 |
	`∑ckToF128UI64
( 0, 0x3FFF, 0 );

133 
uiZ
;

137 
uiZ
.
v64
 = 
uiA64
;

138 
uiZ
.
v0
 = 0;

139 
œ°BôMask64
 = (
uöt_Á°64_t
Ë1<<(0x402F - 
exp
);

140 
roundBôsMask
 = 
œ°BôMask64
 - 1;

141 i‡–
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
 ) {

142 
uiZ
.
v64
 +
œ°BôMask64
>>1;

143 } i‡–
roundögMode
 =
so·Êﬂt_round_√¨_eví
 ) {

144 
uiZ
.
v64
 +
œ°BôMask64
>>1;

145 i‡–!((
uiZ
.
v64
 & 
roundBôsMask
Ë| 
uiA0
) ) {

146 
uiZ
.
v64
 &~
œ°BôMask64
;

149 
roundögMode


150 =(
	`signF128UI64
–
uiZ
.
v64
 ) ? 
so·Êﬂt_round_mö


151 : 
so·Êﬂt_round_max
)

153 
uiZ
.
v64
 = (uiZ.v64 | (
uiA0
 !0)Ë+ 
roundBôsMask
;

155 
uiZ
.
v64
 &~
roundBôsMask
;

156 
œ°BôMask0
 = 0;

158 i‡–(
uiZ
.
v64
 !
uiA64
Ë|| (uiZ.
v0
 !
uiA0
) ) {

159 #ifde‡
SOFTFLOAT_ROUND_ODD


160 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

161 
uiZ
.
v64
 |
œ°BôMask64
;

162 
uiZ
.
v0
 |
œ°BôMask0
;

165 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

167 
uiZ
:

168 
uZ
.
ui
 = 
uiZ
;

169  
uZ
.
f
;

171 
	}
}

	@src/softfloat/source/f128_sqrt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t
 
	$f128_sqπ
–
Êﬂt128_t
 
a
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
signA
;

49 
öt_Á°32_t
 
expA
;

50 
uöt128
 
sigA
, 
uiZ
;

51 
exp32_sig128
 
n‹mExpSig
;

52 
öt_Á°32_t
 
expZ
;

53 
uöt_Á°32_t
 
sig32A
, 
ªcùSqπ32
, 
sig32Z
;

54 
uöt128
 
ªm
;

55 
uöt32_t
 
qs
[3];

56 
uöt_Á°32_t
 
q
;

57 
uöt_Á°64_t
 
x64
, 
sig64Z
;

58 
uöt128
 
y
, 
ãrm
;

59 
uöt_Á°64_t
 
sigZExåa
;

60 
uöt128
 
sigZ
;

61 
ui128_f128
 
uZ
;

65 
uA
.
f
 = 
a
;

66 
uiA64
 = 
uA
.
ui
.
v64
;

67 
uiA0
 = 
uA
.
ui
.
v0
;

68 
signA
 = 
	`signF128UI64
–
uiA64
 );

69 
expA
 = 
	`expF128UI64
–
uiA64
 );

70 
sigA
.
v64
 = 
	`‰acF128UI64
–
uiA64
 );

71 
sigA
.
v0
 = 
uiA0
;

74 i‡–
expA
 == 0x7FFF ) {

75 i‡–
sigA
.
v64
 | sigA.
v0
 ) {

76 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–
uiA64
, 
uiA0
, 0, 0 );

77 
uiZ
;

79 i‡–! 
signA
 )  
a
;

80 
övÆid
;

84 i‡–
signA
 ) {

85 i‡–! (
expA
 | 
sigA
.
v64
 | sigA.
v0
ËË 
a
;

86 
övÆid
;

90 i‡–! 
expA
 ) {

91 i‡–! (
sigA
.
v64
 | sigA.
v0
ËË 
a
;

92 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigA
.
v64
, sigA.
v0
 );

93 
expA
 = 
n‹mExpSig
.
exp
;

94 
sigA
 = 
n‹mExpSig
.
sig
;

101 
expZ
 = ((
expA
 - 0x3FFF)>>1) + 0x3FFE;

102 
expA
 &= 1;

103 
sigA
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

104 
sig32A
 = 
sigA
.
v64
>>17;

105 
ªcùSqπ32
 = 
	`so·Êﬂt_≠¥oxRecùSqπ32_1
–
expA
, 
sig32A
 );

106 
sig32Z
 = ((
uöt_Á°64_t
Ë
sig32A
 * 
ªcùSqπ32
)>>32;

107 i‡–
expA
 ) {

108 
sig32Z
 >>= 1;

109 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
sigA
.
v64
, sigA.
v0
, 12 );

111 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
sigA
.
v64
, sigA.
v0
, 13 );

113 
qs
[2] = 
sig32Z
;

114 
ªm
.
v64
 -(
uöt_Á°64_t
Ë
sig32Z
 * sig32Z;

117 
q
 = ((
uöt32_t
Ë(
ªm
.
v64
>>2Ë* (
uöt_Á°64_t
Ë
ªcùSqπ32
)>>32;

118 
x64
 = (
uöt_Á°64_t
Ë
sig32Z
<<32;

119 
sig64Z
 = 
x64
 + ((
uöt_Á°64_t
Ë
q
<<3);

120 
y
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
ªm
.
v64
,Ñem.
v0
, 29 );

125 
ãrm
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–
x64
 + 
sig64Z
, 
q
 );

126 
ªm
 = 
	`so·Êﬂt_sub128
–
y
.
v64
, y.
v0
, 
ãrm
.v64,Åerm.v0 );

127 i‡–! (
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 )) ) ;

128 --
q
;

129 
sig64Z
 -= 1<<3;

131 
qs
[1] = 
q
;

134 
q
 = ((
ªm
.
v64
>>2Ë* 
ªcùSqπ32
)>>32;

135 
y
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
ªm
.
v64
,Ñem.
v0
, 29 );

136 
sig64Z
 <<= 1;

141 
ãrm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sig64Z
, 32 );

142 
ãrm
 = 
	`so·Êﬂt_add128
–ãrm.
v64
,Åîm.
v0
, 0, (
uöt_Á°64_t
Ë
q
<<6 );

143 
ãrm
 = 
	`so·Êﬂt_mul128By32
–ãrm.
v64
,Åîm.
v0
, 
q
 );

144 
ªm
 = 
	`so·Êﬂt_sub128
–
y
.
v64
, y.
v0
, 
ãrm
.v64,Åerm.v0 );

145 i‡–! (
ªm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 )) ) ;

146 --
q
;

148 
qs
[0] = 
q
;

151 
q
 = (((
ªm
.
v64
>>2Ë* 
ªcùSqπ32
)>>32) + 2;

152 
sigZExåa
 = (
uöt64_t
Ë((
uöt_Á°64_t
Ë
q
<<59);

153 
ãrm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
qs
[1], 53 );

154 
sigZ
 =

155 
	`so·Êﬂt_add128
(

156 (
uöt_Á°64_t
Ë
qs
[2]<<18, ((uöt_Á°64_tËqs[0]<<24Ë+ (
q
>>5),

157 
ãrm
.
v64
,Åîm.
v0


161 i‡–(
q
 & 0xF) <= 2 ) {

162 
q
 &= ~3;

163 
sigZExåa
 = (
uöt64_t
Ë((
uöt_Á°64_t
Ë
q
<<59);

164 
y
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
sigZ
.
v64
, sigZ.
v0
, 6 );

165 
y
.
v0
 |
sigZExåa
>>58;

166 
ãrm
 = 
	`so·Êﬂt_sub128
–
y
.
v64
, y.
v0
, 0, 
q
 );

167 
y
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–
ãrm
.
v0
, 
q
 );

168 
ãrm
 = 
	`so·Êﬂt_mul64ByShi·ed32To128
–ãrm.
v64
, 
q
 );

169 
ãrm
 = 
	`so·Êﬂt_add128
–ãrm.
v64
,Åîm.
v0
, 0, 
y
.v64 );

170 
ªm
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–ªm.
v64
,Ñem.
v0
, 20 );

171 
ãrm
 = 
	`so·Êﬂt_sub128
–ãrm.
v64
,Åîm.
v0
, 
ªm
.v64,Ñem.v0 );

176 i‡–
ãrm
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

177 
sigZExåa
 |= 1;

179 i‡–
ãrm
.
v64
 |Åîm.
v0
 | 
y
.v0 ) {

180 i‡–
sigZExåa
 ) {

181 --
sigZExåa
;

183 
sigZ
 = 
	`so·Êﬂt_sub128
–sigZ.
v64
, sigZ.
v0
, 0, 1 );

184 
sigZExåa
 = ~0;

189  
	`so·Êﬂt_roundPackToF128
–0, 
expZ
, 
sigZ
.
v64
, sigZ.
v0
, 
sigZExåa
 );

192 
övÆid
:

193 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

194 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

195 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

196 
uiZ
:

197 
uZ
.
ui
 = 
uiZ
;

198  
uZ
.
f
;

200 
	}
}

	@src/softfloat/source/f128_sub.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt128_t
 
	$f128_sub
–
Êﬂt128_t
 
a
, flﬂt128_à
b
 )

45 
ui128_f128
 
uA
;

46 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

47 
boﬁ
 
signA
;

48 
ui128_f128
 
uB
;

49 
uöt_Á°64_t
 
uiB64
, 
uiB0
;

50 
boﬁ
 
signB
;

51 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

52 
Êﬂt128_t


53 (*
magsFuncPå
)(

54 
uöt_Á°64_t
, uöt_Á°64_t, uöt_Á°64_t, uöt_Á°64_t, 
boﬁ
 );

57 
uA
.
f
 = 
a
;

58 
uiA64
 = 
uA
.
ui
.
v64
;

59 
uiA0
 = 
uA
.
ui
.
v0
;

60 
signA
 = 
	`signF128UI64
–
uiA64
 );

61 
uB
.
f
 = 
b
;

62 
uiB64
 = 
uB
.
ui
.
v64
;

63 
uiB0
 = 
uB
.
ui
.
v0
;

64 
signB
 = 
	`signF128UI64
–
uiB64
 );

65 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

66 i‡–
signA
 =
signB
 ) {

67  
	`so·Êﬂt_subMagsF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

69  
	`so·Êﬂt_addMagsF128
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

72 
magsFuncPå
 =

73 (
signA
 =
signB
Ë? 
so·Êﬂt_subMagsF128
 : 
so·Êﬂt_addMagsF128
;

74  (*
magsFuncPå
)–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
, 
signA
 );

77 
	}
}

	@src/softfloat/source/f128_to_extF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t
 
	$f128_to_extF80
–
Êﬂt128_t
 
a
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
sign
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac64
, 
‰ac0
;

51 
comm⁄NaN
 commonNaN;

52 
uöt128
 
uiZ
;

53 
uöt_Á°16_t
 
uiZ64
;

54 
uöt_Á°64_t
 
uiZ0
;

55 
exp32_sig128
 
n‹mExpSig
;

56 
uöt128
 
sig128
;

57 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

61 
uA
.
f
 = 
a
;

62 
uiA64
 = 
uA
.
ui
.
v64
;

63 
uiA0
 = 
uA
.
ui
.
v0
;

64 
sign
 = 
	`signF128UI64
–
uiA64
 );

65 
exp
 = 
	`expF128UI64
–
uiA64
 );

66 
‰ac64
 = 
	`‰acF128UI64
–
uiA64
 );

67 
‰ac0
 = 
uiA0
;

70 i‡–
exp
 == 0x7FFF ) {

71 i‡–
‰ac64
 | 
‰ac0
 ) {

72 
	`so·Êﬂt_f128UIToComm⁄NaN
–
uiA64
, 
uiA0
, &
comm⁄NaN
 );

73 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToExtF80UI
–&
comm⁄NaN
 );

74 
uiZ64
 = 
uiZ
.
v64
;

75 
uiZ0
 = 
uiZ
.
v0
;

77 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x7FFF );

78 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

80 
uiZ
;

84 i‡–! 
exp
 ) {

85 i‡–! (
‰ac64
 | 
‰ac0
) ) {

86 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

87 
uiZ0
 = 0;

88 
uiZ
;

90 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
‰ac64
, 
‰ac0
 );

91 
exp
 = 
n‹mExpSig
.exp;

92 
‰ac64
 = 
n‹mExpSig
.
sig
.
v64
;

93 
‰ac0
 = 
n‹mExpSig
.
sig
.
v0
;

97 
sig128
 =

98 
	`so·Êﬂt_sh‹tShi·Le·128
(

99 
‰ac64
 | 
	`UINT64_C
–0x0001000000000000 ), 
‰ac0
, 15 );

100  
	`so·Êﬂt_roundPackToExtF80
–
sign
, 
exp
, 
sig128
.
v64
, sig128.
v0
, 80 );

103 
uiZ
:

104 
uZ
.
s
.
signExp
 = 
uiZ64
;

105 
uZ
.
s
.
signif
 = 
uiZ0
;

106  
uZ
.
f
;

108 
	}
}

	@src/softfloat/source/f128_to_f16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$f128_to_f16
–
Êﬂt128_t
 
a
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
sign
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac64
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°16_t
 
uiZ
, 
‰ac16
;

53 
ui16_f16
 
uZ
;

57 
uA
.
f
 = 
a
;

58 
uiA64
 = 
uA
.
ui
.
v64
;

59 
uiA0
 = 
uA
.
ui
.
v0
;

60 
sign
 = 
	`signF128UI64
–
uiA64
 );

61 
exp
 = 
	`expF128UI64
–
uiA64
 );

62 
‰ac64
 = 
	`‰acF128UI64
–
uiA64
 ) | (
uiA0
 != 0);

65 i‡–
exp
 == 0x7FFF ) {

66 i‡–
‰ac64
 ) {

67 
	`so·Êﬂt_f128UIToComm⁄NaN
–
uiA64
, 
uiA0
, &
comm⁄NaN
 );

68 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF16UI
–&
comm⁄NaN
 );

70 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0x1F, 0 );

72 
uiZ
;

76 
‰ac16
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
‰ac64
, 34 );

77 i‡–! (
exp
 | 
‰ac16
) ) {

78 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0, 0 );

79 
uiZ
;

83 
exp
 -= 0x3FF1;

84 i‡– (
öt_Á°16_t
Ë<  (
öt_Á°32_t
) ) {

85 i‡–
exp
 < -0x40 )Éxp = -0x40;

87  
	`so·Êﬂt_roundPackToF16
–
sign
, 
exp
, 
‰ac16
 | 0x4000 );

90 
uiZ
:

91 
uZ
.
ui
 = 
uiZ
;

92  
uZ
.
f
;

94 
	}
}

	@src/softfloat/source/f128_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$f128_to_f32
–
Êﬂt128_t
 
a
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
sign
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac64
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°32_t
 
uiZ
, 
‰ac32
;

53 
ui32_f32
 
uZ
;

57 
uA
.
f
 = 
a
;

58 
uiA64
 = 
uA
.
ui
.
v64
;

59 
uiA0
 = 
uA
.
ui
.
v0
;

60 
sign
 = 
	`signF128UI64
–
uiA64
 );

61 
exp
 = 
	`expF128UI64
–
uiA64
 );

62 
‰ac64
 = 
	`‰acF128UI64
–
uiA64
 ) | (
uiA0
 != 0);

65 i‡–
exp
 == 0x7FFF ) {

66 i‡–
‰ac64
 ) {

67 
	`so·Êﬂt_f128UIToComm⁄NaN
–
uiA64
, 
uiA0
, &
comm⁄NaN
 );

68 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF32UI
–&
comm⁄NaN
 );

70 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0xFF, 0 );

72 
uiZ
;

76 
‰ac32
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
‰ac64
, 18 );

77 i‡–! (
exp
 | 
‰ac32
) ) {

78 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0, 0 );

79 
uiZ
;

83 
exp
 -= 0x3F81;

84 i‡– (
öt_Á°16_t
Ë<  (
öt_Á°32_t
) ) {

85 i‡–
exp
 < -0x1000 )Éxp = -0x1000;

87  
	`so·Êﬂt_roundPackToF32
–
sign
, 
exp
, 
‰ac32
 | 0x40000000 );

90 
uiZ
:

91 
uZ
.
ui
 = 
uiZ
;

92  
uZ
.
f
;

94 
	}
}

	@src/softfloat/source/f128_to_f64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$f128_to_f64
–
Êﬂt128_t
 
a
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
sign
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac64
, 
‰ac0
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°64_t
 
uiZ
;

53 
uöt128
 
‰ac128
;

54 
ui64_f64
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA64
 = 
uA
.
ui
.
v64
;

60 
uiA0
 = 
uA
.
ui
.
v0
;

61 
sign
 = 
	`signF128UI64
–
uiA64
 );

62 
exp
 = 
	`expF128UI64
–
uiA64
 );

63 
‰ac64
 = 
	`‰acF128UI64
–
uiA64
 );

64 
‰ac0
 = 
uiA0
;

67 i‡–
exp
 == 0x7FFF ) {

68 i‡–
‰ac64
 | 
‰ac0
 ) {

69 
	`so·Êﬂt_f128UIToComm⁄NaN
–
uiA64
, 
uiA0
, &
comm⁄NaN
 );

70 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF64UI
–&
comm⁄NaN
 );

72 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0x7FF, 0 );

74 
uiZ
;

78 
‰ac128
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
‰ac64
, 
‰ac0
, 14 );

79 
‰ac64
 = 
‰ac128
.
v64
 | (‰ac128.
v0
 != 0);

80 i‡–! (
exp
 | 
‰ac64
) ) {

81 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0, 0 );

82 
uiZ
;

86 
exp
 -= 0x3C01;

87 i‡– (
öt_Á°16_t
Ë<  (
öt_Á°32_t
) ) {

88 i‡–
exp
 < -0x1000 )Éxp = -0x1000;

91 
	`so·Êﬂt_roundPackToF64
(

92 
sign
, 
exp
, 
‰ac64
 | 
	`UINT64_C
( 0x4000000000000000 ) );

95 
uiZ
:

96 
uZ
.
ui
 = 
uiZ
;

97  
uZ
.
f
;

99 
	}
}

	@src/softfloat/source/f128_to_i32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$f128_to_i32
–
Êﬂt128_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
sign
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
sig64
, 
sig0
;

51 
öt_Á°32_t
 
shi·Di°
;

55 
uA
.
f
 = 
a
;

56 
uiA64
 = 
uA
.
ui
.
v64
;

57 
uiA0
 = 
uA
.
ui
.
v0
;

58 
sign
 = 
	`signF128UI64
–
uiA64
 );

59 
exp
 = 
	`expF128UI64
–
uiA64
 );

60 
sig64
 = 
	`‰acF128UI64
–
uiA64
 );

61 
sig0
 = 
uiA0
;

64 #i‡(
i32_‰omNaN
 !
i32_‰omPosOvîÊow
Ë|| (i32_‰omNaN !
i32_‰omNegOvîÊow
)

65 i‡–(
exp
 =0x7FFFË&& (
sig64
 | 
sig0
) ) {

66 #i‡(
i32_‰omNaN
 =
i32_‰omPosOvîÊow
)

67 
sign
 = 0;

68 #ñi‡(
i32_‰omNaN
 =
i32_‰omNegOvîÊow
)

69 
sign
 = 1;

71 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

72  
i32_‰omNaN
;

78 i‡–
exp
 ) 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

79 
sig64
 |(
sig0
 != 0);

80 
shi·Di°
 = 0x4023 - 
exp
;

81 i‡–0 < 
shi·Di°
 ) 
sig64
 = 
	`so·Êﬂt_shi·RightJam64
( sig64, shiftDist );

82  
	`so·Êﬂt_roundToI32
–
sign
, 
sig64
, 
roundögMode
, 
exa˘
 );

84 
	}
}

	@src/softfloat/source/f128_to_i32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$f128_to_i32_r_möMag
–
Êﬂt128_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
öt_Á°32_t
 
exp
;

49 
uöt_Á°64_t
 
sig64
;

50 
öt_Á°32_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
öt_Á°32_t
 
absZ
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
ui
.
v64
;

58 
uiA0
 = 
uA
.
ui
.
v0
;

59 
exp
 = 
	`expF128UI64
–
uiA64
 );

60 
sig64
 = 
	`‰acF128UI64
–
uiA64
 ) | (
uiA0
 != 0);

63 
shi·Di°
 = 0x402F - 
exp
;

64 i‡–49 <
shi·Di°
 ) {

65 i‡–
exa˘
 && (
exp
 | 
sig64
) ) {

66 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

72 
sign
 = 
	`signF128UI64
–
uiA64
 );

73 i‡–
shi·Di°
 < 18 ) {

75 
sign
 && (
shi·Di°
 == 17)

76 && (
sig64
 < 
	`UINT64_C
( 0x0000000000020000 ))

78 i‡–
exa˘
 && 
sig64
 ) {

79 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

83 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

85 (
exp
 =0x7FFFË&& 
sig64
 ? 
i32_‰omNaN


86 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

90 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

91 
absZ
 = 
sig64
>>
shi·Di°
;

93 
exa˘
 && ((
uöt_Á°64_t
Ë(
uöt_Á°32_t
Ë
absZ
<<
shi·Di°
 !
sig64
)

95 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

97  
sign
 ? -
absZ
 :ábsZ;

99 
	}
}

	@src/softfloat/source/f128_to_i64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$f128_to_i64
–
Êﬂt128_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
sign
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
sig64
, 
sig0
;

51 
öt_Á°32_t
 
shi·Di°
;

52 
uöt128
 
sig128
;

53 
uöt64_exåa
 
sigExåa
;

57 
uA
.
f
 = 
a
;

58 
uiA64
 = 
uA
.
ui
.
v64
;

59 
uiA0
 = 
uA
.
ui
.
v0
;

60 
sign
 = 
	`signF128UI64
–
uiA64
 );

61 
exp
 = 
	`expF128UI64
–
uiA64
 );

62 
sig64
 = 
	`‰acF128UI64
–
uiA64
 );

63 
sig0
 = 
uiA0
;

66 
shi·Di°
 = 0x402F - 
exp
;

67 i‡–
shi·Di°
 <= 0 ) {

70 i‡–
shi·Di°
 < -15 ) {

71 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

73 (
exp
 =0x7FFFË&& (
sig64
 | 
sig0
Ë? 
i64_‰omNaN


74 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

78 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

79 i‡–
shi·Di°
 ) {

80 
sig128
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
sig64
, 
sig0
, -
shi·Di°
 );

81 
sig64
 = 
sig128
.
v64
;

82 
sig0
 = 
sig128
.
v0
;

87 i‡–
exp
 ) 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

88 
sigExåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig64
, 
sig0
, 
shi·Di°
 );

89 
sig64
 = 
sigExåa
.
v
;

90 
sig0
 = 
sigExåa
.
exåa
;

92  
	`so·Êﬂt_roundToI64
–
sign
, 
sig64
, 
sig0
, 
roundögMode
, 
exa˘
 );

94 
	}
}

	@src/softfloat/source/f128_to_i64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$f128_to_i64_r_möMag
–
Êﬂt128_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
sign
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
sig64
, 
sig0
;

51 
öt_Á°32_t
 
shi·Di°
;

52 
öt_Á°8_t
 
√gShi·Di°
;

53 
öt_Á°64_t
 
absZ
;

57 
uA
.
f
 = 
a
;

58 
uiA64
 = 
uA
.
ui
.
v64
;

59 
uiA0
 = 
uA
.
ui
.
v0
;

60 
sign
 = 
	`signF128UI64
–
uiA64
 );

61 
exp
 = 
	`expF128UI64
–
uiA64
 );

62 
sig64
 = 
	`‰acF128UI64
–
uiA64
 );

63 
sig0
 = 
uiA0
;

66 
shi·Di°
 = 0x402F - 
exp
;

67 i‡–
shi·Di°
 < 0 ) {

70 i‡–
shi·Di°
 < -14 ) {

72 (
uiA64
 =
	`UINT64_C
( 0xC03E000000000000 ))

73 && (
sig0
 < 
	`UINT64_C
( 0x0002000000000000 ))

75 i‡–
exa˘
 && 
sig0
 ) {

76 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

78  -
	`INT64_C
( 0x7FFFFFFFFFFFFFFF ) - 1;

80 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

82 (
exp
 =0x7FFFË&& (
sig64
 | 
sig0
Ë? 
i64_‰omNaN


83 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

87 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

88 
√gShi·Di°
 = -
shi·Di°
;

89 
absZ
 = 
sig64
<<
√gShi·Di°
 | 
sig0
>>(
shi·Di°
 & 63);

90 i‡–
exa˘
 && (
uöt64_t
Ë(
sig0
<<
√gShi·Di°
) ) {

91 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

96 i‡–49 <
shi·Di°
 ) {

97 i‡–
exa˘
 && (
exp
 | 
sig64
 | 
sig0
) ) {

98 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

104 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

105 
absZ
 = 
sig64
>>
shi·Di°
;

106 i‡–
exa˘
 && (
sig0
 || (
absZ
<<
shi·Di°
 !
sig64
)) ) {

107 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

110  
sign
 ? -
absZ
 :ábsZ;

112 
	}
}

	@src/softfloat/source/f128_to_ui32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t


45 
	$f128_to_ui32
–
Êﬂt128_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

47 
ui128_f128
 
uA
;

48 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig64
;

52 
öt_Á°32_t
 
shi·Di°
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
ui
.
v64
;

58 
uiA0
 = 
uA
.
ui
.
v0
;

59 
sign
 = 
	`signF128UI64
–
uiA64
 );

60 
exp
 = 
	`expF128UI64
–
uiA64
 );

61 
sig64
 = 
	`‰acF128UI64
–
uiA64
 ) | (
uiA0
 != 0);

64 #i‡(
ui32_‰omNaN
 !
ui32_‰omPosOvîÊow
Ë|| (ui32_‰omNaN !
ui32_‰omNegOvîÊow
)

65 i‡–(
exp
 =0x7FFFË&& 
sig64
 ) {

66 #i‡(
ui32_‰omNaN
 =
ui32_‰omPosOvîÊow
)

67 
sign
 = 0;

68 #ñi‡(
ui32_‰omNaN
 =
ui32_‰omNegOvîÊow
)

69 
sign
 = 1;

71 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

72  
ui32_‰omNaN
;

78 i‡–
exp
 ) 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

79 
shi·Di°
 = 0x4023 - 
exp
;

80 i‡–0 < 
shi·Di°
 ) {

81 
sig64
 = 
	`so·Êﬂt_shi·RightJam64
–sig64, 
shi·Di°
 );

83  
	`so·Êﬂt_roundToUI32
–
sign
, 
sig64
, 
roundögMode
, 
exa˘
 );

85 
	}
}

	@src/softfloat/source/f128_to_ui32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t
 
	$f128_to_ui32_r_möMag
–
Êﬂt128_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
öt_Á°32_t
 
exp
;

49 
uöt_Á°64_t
 
sig64
;

50 
öt_Á°32_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°32_t
 
z
;

56 
uA
.
f
 = 
a
;

57 
uiA64
 = 
uA
.
ui
.
v64
;

58 
uiA0
 = 
uA
.
ui
.
v0
;

59 
exp
 = 
	`expF128UI64
–
uiA64
 );

60 
sig64
 = 
	`‰acF128UI64
–
uiA64
 ) | (
uiA0
 != 0);

63 
shi·Di°
 = 0x402F - 
exp
;

64 i‡–49 <
shi·Di°
 ) {

65 i‡–
exa˘
 && (
exp
 | 
sig64
) ) {

66 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

72 
sign
 = 
	`signF128UI64
–
uiA64
 );

73 i‡–
sign
 || (
shi·Di°
 < 17) ) {

74 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

76 (
exp
 =0x7FFFË&& 
sig64
 ? 
ui32_‰omNaN


77 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

81 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

82 
z
 = 
sig64
>>
shi·Di°
;

83 i‡–
exa˘
 && ((
uöt_Á°64_t
Ë
z
<<
shi·Di°
 !
sig64
) ) {

84 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

86  
z
;

88 
	}
}

	@src/softfloat/source/f128_to_ui64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t


45 
	$f128_to_ui64
–
Êﬂt128_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

47 
ui128_f128
 
uA
;

48 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

49 
boﬁ
 
sign
;

50 
öt_Á°32_t
 
exp
;

51 
uöt_Á°64_t
 
sig64
, 
sig0
;

52 
öt_Á°32_t
 
shi·Di°
;

53 
uöt128
 
sig128
;

54 
uöt64_exåa
 
sigExåa
;

58 
uA
.
f
 = 
a
;

59 
uiA64
 = 
uA
.
ui
.
v64
;

60 
uiA0
 = 
uA
.
ui
.
v0
;

61 
sign
 = 
	`signF128UI64
–
uiA64
 );

62 
exp
 = 
	`expF128UI64
–
uiA64
 );

63 
sig64
 = 
	`‰acF128UI64
–
uiA64
 );

64 
sig0
 = 
uiA0
;

67 
shi·Di°
 = 0x402F - 
exp
;

68 i‡–
shi·Di°
 <= 0 ) {

71 i‡–
shi·Di°
 < -15 ) {

72 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

74 (
exp
 =0x7FFFË&& (
sig64
 | 
sig0
Ë? 
ui64_‰omNaN


75 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

79 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

80 i‡–
shi·Di°
 ) {

81 
sig128
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
sig64
, 
sig0
, -
shi·Di°
 );

82 
sig64
 = 
sig128
.
v64
;

83 
sig0
 = 
sig128
.
v0
;

88 i‡–
exp
 ) 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

89 
sigExåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig64
, 
sig0
, 
shi·Di°
 );

90 
sig64
 = 
sigExåa
.
v
;

91 
sig0
 = 
sigExåa
.
exåa
;

93  
	`so·Êﬂt_roundToUI64
–
sign
, 
sig64
, 
sig0
, 
roundögMode
, 
exa˘
 );

95 
	}
}

	@src/softfloat/source/f128_to_ui64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t
 
	$f128_to_ui64_r_möMag
–
Êﬂt128_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui128_f128
 
uA
;

47 
uöt_Á°64_t
 
uiA64
, 
uiA0
;

48 
boﬁ
 
sign
;

49 
öt_Á°32_t
 
exp
;

50 
uöt_Á°64_t
 
sig64
, 
sig0
;

51 
öt_Á°32_t
 
shi·Di°
;

52 
öt_Á°8_t
 
√gShi·Di°
;

53 
uöt_Á°64_t
 
z
;

57 
uA
.
f
 = 
a
;

58 
uiA64
 = 
uA
.
ui
.
v64
;

59 
uiA0
 = 
uA
.
ui
.
v0
;

60 
sign
 = 
	`signF128UI64
–
uiA64
 );

61 
exp
 = 
	`expF128UI64
–
uiA64
 );

62 
sig64
 = 
	`‰acF128UI64
–
uiA64
 );

63 
sig0
 = 
uiA0
;

66 
shi·Di°
 = 0x402F - 
exp
;

67 i‡–
shi·Di°
 < 0 ) {

70 i‡–
sign
 || (
shi·Di°
 < -15ËË
övÆid
;

71 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

72 
√gShi·Di°
 = -
shi·Di°
;

73 
z
 = 
sig64
<<
√gShi·Di°
 | 
sig0
>>(
shi·Di°
 & 63);

74 i‡–
exa˘
 && (
uöt64_t
Ë(
sig0
<<
√gShi·Di°
) ) {

75 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

80 i‡–49 <
shi·Di°
 ) {

81 i‡–
exa˘
 && (
exp
 | 
sig64
 | 
sig0
) ) {

82 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

88 i‡–
sign
 ) 
övÆid
;

89 
sig64
 |
	`UINT64_C
( 0x0001000000000000 );

90 
z
 = 
sig64
>>
shi·Di°
;

91 i‡–
exa˘
 && (
sig0
 || (
z
<<
shi·Di°
 !
sig64
)) ) {

92 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

95  
z
;

98 
övÆid
:

99 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

101 (
exp
 =0x7FFFË&& (
sig64
 | 
sig0
Ë? 
ui64_‰omNaN


102 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

104 
	}
}

	@src/softfloat/source/f16_add.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt16_t
 
	$f16_add
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

45 
ui16_f16
 
uA
;

46 
uöt_Á°16_t
 
uiA
;

47 
ui16_f16
 
uB
;

48 
uöt_Á°16_t
 
uiB
;

49 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 1)

50 
	`Êﬂt16_t
 (*
magsFuncPå
)–
uöt_Á°16_t
, uint_fast16_t );

53 
uA
.
f
 = 
a
;

54 
uiA
 = 
uA
.
ui
;

55 
uB
.
f
 = 
b
;

56 
uiB
 = 
uB
.
ui
;

57 #i‡
deföed
 
INLINE_LEVEL
 && (1 <= INLINE_LEVEL)

58 i‡–
	`signF16UI
–
uiA
 ^ 
uiB
 ) ) {

59  
	`so·Êﬂt_subMagsF16
–
uiA
, 
uiB
 );

61  
	`so·Êﬂt_addMagsF16
–
uiA
, 
uiB
 );

64 
magsFuncPå
 =

65 
	`signF16UI
–
uiA
 ^ 
uiB
 ) ? 
so·Êﬂt_subMagsF16
 : 
so·Êﬂt_addMagsF16
;

66  (*
magsFuncPå
)–
uiA
, 
uiB
 );

69 
	}
}

	@src/softfloat/source/f16_div.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecù_1k0s
[];

45 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecù_1k1s
[];

47 
Êﬂt16_t
 
	$f16_div
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

49 
ui16_f16
 
uA
;

50 
uöt_Á°16_t
 
uiA
;

51 
boﬁ
 
signA
;

52 
öt_Á°8_t
 
expA
;

53 
uöt_Á°16_t
 
sigA
;

54 
ui16_f16
 
uB
;

55 
uöt_Á°16_t
 
uiB
;

56 
boﬁ
 
signB
;

57 
öt_Á°8_t
 
expB
;

58 
uöt_Á°16_t
 
sigB
;

59 
boﬁ
 
signZ
;

60 
exp8_sig16
 
n‹mExpSig
;

61 
öt_Á°8_t
 
expZ
;

62 #ifde‡
SOFTFLOAT_FAST_DIV32TO16


63 
uöt_Á°32_t
 
sig32A
;

64 
uöt_Á°16_t
 
sigZ
;

66 
ödex
;

67 
uöt16_t
 
r0
;

68 
uöt_Á°16_t
 
sigZ
, 
ªm
;

70 
uöt_Á°16_t
 
uiZ
;

71 
ui16_f16
 
uZ
;

75 
uA
.
f
 = 
a
;

76 
uiA
 = 
uA
.
ui
;

77 
signA
 = 
	`signF16UI
–
uiA
 );

78 
expA
 = 
	`expF16UI
–
uiA
 );

79 
sigA
 = 
	`‰acF16UI
–
uiA
 );

80 
uB
.
f
 = 
b
;

81 
uiB
 = 
uB
.
ui
;

82 
signB
 = 
	`signF16UI
–
uiB
 );

83 
expB
 = 
	`expF16UI
–
uiB
 );

84 
sigB
 = 
	`‰acF16UI
–
uiB
 );

85 
signZ
 = 
signA
 ^ 
signB
;

88 i‡–
expA
 == 0x1F ) {

89 i‡–
sigA
 ) 
¥›ag©eNaN
;

90 i‡–
expB
 == 0x1F ) {

91 i‡–
sigB
 ) 
¥›ag©eNaN
;

92 
övÆid
;

94 
öföôy
;

96 i‡–
expB
 == 0x1F ) {

97 i‡–
sigB
 ) 
¥›ag©eNaN
;

98 
zîo
;

102 i‡–! 
expB
 ) {

103 i‡–! 
sigB
 ) {

104 i‡–! (
expA
 | 
sigA
ËË
övÆid
;

105 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_öföôe
 );

106 
öföôy
;

108 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigB
 );

109 
expB
 = 
n‹mExpSig
.
exp
;

110 
sigB
 = 
n‹mExpSig
.
sig
;

112 i‡–! 
expA
 ) {

113 i‡–! 
sigA
 ) 
zîo
;

114 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigA
 );

115 
expA
 = 
n‹mExpSig
.
exp
;

116 
sigA
 = 
n‹mExpSig
.
sig
;

120 
expZ
 = 
expA
 - 
expB
 + 0xE;

121 
sigA
 |= 0x0400;

122 
sigB
 |= 0x0400;

123 #ifde‡
SOFTFLOAT_FAST_DIV32TO16


124 i‡–
sigA
 < 
sigB
 ) {

125 --
expZ
;

126 
sig32A
 = (
uöt_Á°32_t
Ë
sigA
<<15;

128 
sig32A
 = (
uöt_Á°32_t
Ë
sigA
<<14;

130 
sigZ
 = 
sig32A
 / 
sigB
;

131 i‡–! (
sigZ
 & 7ËËsigZ |((
uöt_Á°32_t
Ë
sigB
 * sigZ !
sig32A
);

133 i‡–
sigA
 < 
sigB
 ) {

134 --
expZ
;

135 
sigA
 <<= 5;

137 
sigA
 <<= 4;

139 
ödex
 = 
sigB
>>6 & 0xF;

140 
r0
 = 
so·Êﬂt_≠¥oxRecù_1k0s
[
ödex
]

141 - (((
uöt_Á°32_t
Ë
so·Êﬂt_≠¥oxRecù_1k1s
[
ödex
]

142 * (
sigB
 & 0x3F))

144 
sigZ
 = ((
uöt_Á°32_t
Ë
sigA
 * 
r0
)>>16;

145 
ªm
 = (
sigA
<<10Ë- 
sigZ
 * 
sigB
;

146 
sigZ
 +(
ªm
 * (
uöt_Á°32_t
Ë
r0
)>>26;

149 ++
sigZ
;

150 i‡–! (
sigZ
 & 7) ) {

151 
sigZ
 &= ~1;

152 
ªm
 = (
sigA
<<10Ë- 
sigZ
 * 
sigB
;

153 i‡–
ªm
 & 0x8000 ) {

154 
sigZ
 -= 2;

156 i‡–
ªm
 ) 
sigZ
 |= 1;

160  
	`so·Êﬂt_roundPackToF16
–
signZ
, 
expZ
, 
sigZ
 );

163 
¥›ag©eNaN
:

164 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–
uiA
, 
uiB
 );

165 
uiZ
;

168 
övÆid
:

169 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

170 
uiZ
 = 
deÁu…NaNF16UI
;

171 
uiZ
;

174 
öföôy
:

175 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 0x1F, 0 );

176 
uiZ
;

179 
zîo
:

180 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 0, 0 );

181 
uiZ
:

182 
uZ
.
ui
 = 
uiZ
;

183  
uZ
.
f
;

185 
	}
}

	@src/softfloat/source/f16_eq.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f16_eq
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
ui16_f16
 
uB
;

49 
uöt_Á°16_t
 
uiB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF16UI
–
uiA
 ) || isNaNF16UI–
uiB
 ) ) {

57 
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 ) || so·Êﬂt_isSigNaNF16UI–
uiB
 )

59 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

61  
Ál£
;

63  (
uiA
 =
uiB
Ë|| ! (
uöt16_t
) ((uiA | uiB)<<1);

65 
	}
}

	@src/softfloat/source/f16_eq_signaling.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f16_eq_sig«lög
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

45 
ui16_f16
 
uA
;

46 
uöt_Á°16_t
 
uiA
;

47 
ui16_f16
 
uB
;

48 
uöt_Á°16_t
 
uiB
;

50 
uA
.
f
 = 
a
;

51 
uiA
 = 
uA
.
ui
;

52 
uB
.
f
 = 
b
;

53 
uiB
 = 
uB
.
ui
;

54 i‡–
	`isNaNF16UI
–
uiA
 ) || isNaNF16UI–
uiB
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

56  
Ál£
;

58  (
uiA
 =
uiB
Ë|| ! (
uöt16_t
) ((uiA | uiB)<<1);

60 
	}
}

	@src/softfloat/source/f16_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f16_isSig«lögNaN
–
Êﬂt16_t
 
a
 )

45 
ui16_f16
 
uA
;

47 
uA
.
f
 = 
a
;

48  
	`so·Êﬂt_isSigNaNF16UI
–
uA
.
ui
 );

50 
	}
}

	@src/softfloat/source/f16_le.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f16_À
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

45 
ui16_f16
 
uA
;

46 
uöt_Á°16_t
 
uiA
;

47 
ui16_f16
 
uB
;

48 
uöt_Á°16_t
 
uiB
;

49 
boﬁ
 
signA
, 
signB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF16UI
–
uiA
 ) || isNaNF16UI–
uiB
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57  
Ál£
;

59 
signA
 = 
	`signF16UI
–
uiA
 );

60 
signB
 = 
	`signF16UI
–
uiB
 );

62 (
signA
 !
signB
Ë? signA || ! (
uöt16_t
Ë((
uiA
 | 
uiB
)<<1)

63 : (
uiA
 =
uiB
Ë|| (
signA
 ^ (uiA < uiB));

65 
	}
}

	@src/softfloat/source/f16_le_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f16_À_quõt
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
ui16_f16
 
uB
;

49 
uöt_Á°16_t
 
uiB
;

50 
boﬁ
 
signA
, 
signB
;

52 
uA
.
f
 = 
a
;

53 
uiA
 = 
uA
.
ui
;

54 
uB
.
f
 = 
b
;

55 
uiB
 = 
uB
.
ui
;

56 i‡–
	`isNaNF16UI
–
uiA
 ) || isNaNF16UI–
uiB
 ) ) {

58 
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 ) || so·Êﬂt_isSigNaNF16UI–
uiB
 )

60 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62  
Ál£
;

64 
signA
 = 
	`signF16UI
–
uiA
 );

65 
signB
 = 
	`signF16UI
–
uiB
 );

67 (
signA
 !
signB
Ë? signA || ! (
uöt16_t
Ë((
uiA
 | 
uiB
)<<1)

68 : (
uiA
 =
uiB
Ë|| (
signA
 ^ (uiA < uiB));

70 
	}
}

	@src/softfloat/source/f16_lt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f16_…
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

45 
ui16_f16
 
uA
;

46 
uöt_Á°16_t
 
uiA
;

47 
ui16_f16
 
uB
;

48 
uöt_Á°16_t
 
uiB
;

49 
boﬁ
 
signA
, 
signB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF16UI
–
uiA
 ) || isNaNF16UI–
uiB
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57  
Ál£
;

59 
signA
 = 
	`signF16UI
–
uiA
 );

60 
signB
 = 
	`signF16UI
–
uiB
 );

62 (
signA
 !
signB
Ë? signA && ((
uöt16_t
Ë((
uiA
 | 
uiB
)<<1) != 0)

63 : (
uiA
 !
uiB
Ë&& (
signA
 ^ (uiA < uiB));

65 
	}
}

	@src/softfloat/source/f16_lt_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f16_…_quõt
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
ui16_f16
 
uB
;

49 
uöt_Á°16_t
 
uiB
;

50 
boﬁ
 
signA
, 
signB
;

52 
uA
.
f
 = 
a
;

53 
uiA
 = 
uA
.
ui
;

54 
uB
.
f
 = 
b
;

55 
uiB
 = 
uB
.
ui
;

56 i‡–
	`isNaNF16UI
–
uiA
 ) || isNaNF16UI–
uiB
 ) ) {

58 
	`so·Êﬂt_isSigNaNF16UI
–
uiA
 ) || so·Êﬂt_isSigNaNF16UI–
uiB
 )

60 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62  
Ál£
;

64 
signA
 = 
	`signF16UI
–
uiA
 );

65 
signB
 = 
	`signF16UI
–
uiB
 );

67 (
signA
 !
signB
Ë? signA && ((
uöt16_t
Ë((
uiA
 | 
uiB
)<<1) != 0)

68 : (
uiA
 !
uiB
Ë&& (
signA
 ^ (uiA < uiB));

70 
	}
}

	@src/softfloat/source/f16_mul.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$f16_mul
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°8_t
 
expA
;

50 
uöt_Á°16_t
 
sigA
;

51 
ui16_f16
 
uB
;

52 
uöt_Á°16_t
 
uiB
;

53 
boﬁ
 
signB
;

54 
öt_Á°8_t
 
expB
;

55 
uöt_Á°16_t
 
sigB
;

56 
boﬁ
 
signZ
;

57 
uöt_Á°16_t
 
magBôs
;

58 
exp8_sig16
 
n‹mExpSig
;

59 
öt_Á°8_t
 
expZ
;

60 
uöt_Á°32_t
 
sig32Z
;

61 
uöt_Á°16_t
 
sigZ
, 
uiZ
;

62 
ui16_f16
 
uZ
;

66 
uA
.
f
 = 
a
;

67 
uiA
 = 
uA
.
ui
;

68 
signA
 = 
	`signF16UI
–
uiA
 );

69 
expA
 = 
	`expF16UI
–
uiA
 );

70 
sigA
 = 
	`‰acF16UI
–
uiA
 );

71 
uB
.
f
 = 
b
;

72 
uiB
 = 
uB
.
ui
;

73 
signB
 = 
	`signF16UI
–
uiB
 );

74 
expB
 = 
	`expF16UI
–
uiB
 );

75 
sigB
 = 
	`‰acF16UI
–
uiB
 );

76 
signZ
 = 
signA
 ^ 
signB
;

79 i‡–
expA
 == 0x1F ) {

80 i‡–
sigA
 || ((
expB
 =0x1FË&& 
sigB
ËË
¥›ag©eNaN
;

81 
magBôs
 = 
expB
 | 
sigB
;

82 
öfArg
;

84 i‡–
expB
 == 0x1F ) {

85 i‡–
sigB
 ) 
¥›ag©eNaN
;

86 
magBôs
 = 
expA
 | 
sigA
;

87 
öfArg
;

91 i‡–! 
expA
 ) {

92 i‡–! 
sigA
 ) 
zîo
;

93 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigA
 );

94 
expA
 = 
n‹mExpSig
.
exp
;

95 
sigA
 = 
n‹mExpSig
.
sig
;

97 i‡–! 
expB
 ) {

98 i‡–! 
sigB
 ) 
zîo
;

99 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigB
 );

100 
expB
 = 
n‹mExpSig
.
exp
;

101 
sigB
 = 
n‹mExpSig
.
sig
;

105 
expZ
 = 
expA
 + 
expB
 - 0xF;

106 
sigA
 = (sigA | 0x0400)<<4;

107 
sigB
 = (sigB | 0x0400)<<5;

108 
sig32Z
 = (
uöt_Á°32_t
Ë
sigA
 * 
sigB
;

109 
sigZ
 = 
sig32Z
>>16;

110 i‡–
sig32Z
 & 0xFFFF ) 
sigZ
 |= 1;

111 i‡–
sigZ
 < 0x4000 ) {

112 --
expZ
;

113 
sigZ
 <<= 1;

115  
	`so·Êﬂt_roundPackToF16
–
signZ
, 
expZ
, 
sigZ
 );

118 
¥›ag©eNaN
:

119 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–
uiA
, 
uiB
 );

120 
uiZ
;

123 
öfArg
:

124 i‡–! 
magBôs
 ) {

125 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

126 
uiZ
 = 
deÁu…NaNF16UI
;

128 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 0x1F, 0 );

130 
uiZ
;

133 
zîo
:

134 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 0, 0 );

135 
uiZ
:

136 
uZ
.
ui
 = 
uiZ
;

137  
uZ
.
f
;

139 
	}
}

	@src/softfloat/source/f16_mulAdd.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt16_t
 
	$f16_mulAdd
–
Êﬂt16_t
 
a
, flﬂt16_à
b
, flﬂt16_à
c
 )

44 
ui16_f16
 
uA
;

45 
uöt_Á°16_t
 
uiA
;

46 
ui16_f16
 
uB
;

47 
uöt_Á°16_t
 
uiB
;

48 
ui16_f16
 
uC
;

49 
uöt_Á°16_t
 
uiC
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 
uC
.
f
 = 
c
;

56 
uiC
 = 
uC
.
ui
;

57  
	`so·Êﬂt_mulAddF16
–
uiA
, 
uiB
, 
uiC
, 0 );

59 
	}
}

	@src/softfloat/source/f16_rem.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$f16_ªm
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°8_t
 
expA
;

50 
uöt_Á°16_t
 
sigA
;

51 
ui16_f16
 
uB
;

52 
uöt_Á°16_t
 
uiB
;

53 
öt_Á°8_t
 
expB
;

54 
uöt_Á°16_t
 
sigB
;

55 
exp8_sig16
 
n‹mExpSig
;

56 
uöt16_t
 
ªm
;

57 
öt_Á°8_t
 
expDiff
;

58 
uöt_Á°16_t
 
q
;

59 
uöt32_t
 
ªcù32
, 
q32
;

60 
uöt16_t
 
ÆtRem
, 
mónRem
;

61 
boﬁ
 
signRem
;

62 
uöt_Á°16_t
 
uiZ
;

63 
ui16_f16
 
uZ
;

67 
uA
.
f
 = 
a
;

68 
uiA
 = 
uA
.
ui
;

69 
signA
 = 
	`signF16UI
–
uiA
 );

70 
expA
 = 
	`expF16UI
–
uiA
 );

71 
sigA
 = 
	`‰acF16UI
–
uiA
 );

72 
uB
.
f
 = 
b
;

73 
uiB
 = 
uB
.
ui
;

74 
expB
 = 
	`expF16UI
–
uiB
 );

75 
sigB
 = 
	`‰acF16UI
–
uiB
 );

78 i‡–
expA
 == 0x1F ) {

79 i‡–
sigA
 || ((
expB
 =0x1FË&& 
sigB
ËË
¥›ag©eNaN
;

80 
övÆid
;

82 i‡–
expB
 == 0x1F ) {

83 i‡–
sigB
 ) 
¥›ag©eNaN
;

84  
a
;

88 i‡–! 
expB
 ) {

89 i‡–! 
sigB
 ) 
övÆid
;

90 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigB
 );

91 
expB
 = 
n‹mExpSig
.
exp
;

92 
sigB
 = 
n‹mExpSig
.
sig
;

94 i‡–! 
expA
 ) {

95 i‡–! 
sigA
 )  
a
;

96 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigA
 );

97 
expA
 = 
n‹mExpSig
.
exp
;

98 
sigA
 = 
n‹mExpSig
.
sig
;

102 
ªm
 = 
sigA
 | 0x0400;

103 
sigB
 |= 0x0400;

104 
expDiff
 = 
expA
 - 
expB
;

105 i‡–
expDiff
 < 1 ) {

106 i‡–
expDiff
 < -1 )  
a
;

107 
sigB
 <<= 3;

108 i‡–
expDiff
 ) {

109 
ªm
 <<= 2;

110 
q
 = 0;

112 
ªm
 <<= 3;

113 
q
 = (
sigB
 <
ªm
);

114 i‡–
q
 ) 
ªm
 -
sigB
;

117 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–(
uöt_Á°32_t
Ë
sigB
<<21 );

122 
ªm
 <<= 4;

123 
expDiff
 -= 31;

129 
sigB
 <<= 3;

131 
q32
 = (
ªm
 * (
uöt_Á°64_t
Ë
ªcù32
)>>16;

132 i‡–
expDiff
 < 0 ) ;

133 
ªm
 = -((
uöt_Á°16_t
Ë
q32
 * 
sigB
);

134 
expDiff
 -= 29;

139 
q32
 >>~
expDiff
 & 31;

140 
q
 = 
q32
;

141 
ªm
 = (ªm<<(
expDiff
 + 30)Ë- 
q
 * 
sigB
;

146 
ÆtRem
 = 
ªm
;

147 ++
q
;

148 
ªm
 -
sigB
;

149 }  ! (
ªm
 & 0x8000) );

150 
mónRem
 = 
ªm
 + 
ÆtRem
;

151 i‡–(
mónRem
 & 0x8000Ë|| (! mónRem && (
q
 & 1)ËË
ªm
 = 
ÆtRem
;

152 
signRem
 = 
signA
;

153 i‡–0x8000 <
ªm
 ) {

154 
signRem
 = ! signRem;

155 
ªm
 = -rem;

157  
	`so·Êﬂt_n‹mRoundPackToF16
–
signRem
, 
expB
, 
ªm
 );

160 
¥›ag©eNaN
:

161 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–
uiA
, 
uiB
 );

162 
uiZ
;

163 
övÆid
:

164 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

165 
uiZ
 = 
deÁu…NaNF16UI
;

166 
uiZ
:

167 
uZ
.
ui
 = 
uiZ
;

168  
uZ
.
f
;

170 
	}
}

	@src/softfloat/source/f16_roundToInt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$f16_roundToI¡
–
Êﬂt16_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
öt_Á°8_t
 
exp
;

49 
uöt_Á°16_t
 
uiZ
, 
œ°BôMask
, 
roundBôsMask
;

50 
ui16_f16
 
uZ
;

54 
uA
.
f
 = 
a
;

55 
uiA
 = 
uA
.
ui
;

56 
exp
 = 
	`expF16UI
–
uiA
 );

59 i‡–
exp
 <= 0xE ) {

60 i‡–!(
uöt16_t
Ë(
uiA
<<1ËË 
a
;

61 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

62 
uiZ
 = 
uiA
 & 
	`∑ckToF16UI
( 1, 0, 0 );

63  
roundögMode
 ) {

64 
so·Êﬂt_round_√¨_eví
:

65 i‡–!
	`‰acF16UI
–
uiA
 ) ) ;

66 
so·Êﬂt_round_√¨_maxMag
:

67 i‡–
exp
 =0xE ) 
uiZ
 |
	`∑ckToF16UI
( 0, 0xF, 0 );

69 
so·Êﬂt_round_mö
:

70 i‡–
uiZ
 ) uiZ = 
	`∑ckToF16UI
( 1, 0xF, 0 );

72 
so·Êﬂt_round_max
:

73 i‡–!
uiZ
 ) uiZ = 
	`∑ckToF16UI
( 0, 0xF, 0 );

75 #ifde‡
SOFTFLOAT_ROUND_ODD


76 
so·Êﬂt_round_odd
:

77 
uiZ
 |
	`∑ckToF16UI
( 0, 0xF, 0 );

81 
uiZ
;

85 i‡–0x19 <
exp
 ) {

86 i‡–(
exp
 =0x1FË&& 
	`‰acF16UI
–
uiA
 ) ) {

87 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–
uiA
, 0 );

88 
uiZ
;

90  
a
;

94 
uiZ
 = 
uiA
;

95 
œ°BôMask
 = (
uöt_Á°16_t
Ë1<<(0x19 - 
exp
);

96 
roundBôsMask
 = 
œ°BôMask
 - 1;

97 i‡–
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
 ) {

98 
uiZ
 +
œ°BôMask
>>1;

99 } i‡–
roundögMode
 =
so·Êﬂt_round_√¨_eví
 ) {

100 
uiZ
 +
œ°BôMask
>>1;

101 i‡–!(
uiZ
 & 
roundBôsMask
ËËuiZ &~
œ°BôMask
;

103 
roundögMode


104 =(
	`signF16UI
–
uiZ
 ) ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
)

106 
uiZ
 +
roundBôsMask
;

108 
uiZ
 &~
roundBôsMask
;

109 i‡–
uiZ
 !
uiA
 ) {

110 #ifde‡
SOFTFLOAT_ROUND_ODD


111 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
uiZ
 |
œ°BôMask
;

113 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

115 
uiZ
:

116 
uZ
.
ui
 = 
uiZ
;

117  
uZ
.
f
;

119 
	}
}

	@src/softfloat/source/f16_sqrt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecùSqπ_1k0s
[];

45 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecùSqπ_1k1s
[];

47 
Êﬂt16_t
 
	$f16_sqπ
–
Êﬂt16_t
 
a
 )

49 
ui16_f16
 
uA
;

50 
uöt_Á°16_t
 
uiA
;

51 
boﬁ
 
signA
;

52 
öt_Á°8_t
 
expA
;

53 
uöt_Á°16_t
 
sigA
, 
uiZ
;

54 
exp8_sig16
 
n‹mExpSig
;

55 
öt_Á°8_t
 
expZ
;

56 
ödex
;

57 
uöt_Á°16_t
 
r0
;

58 
uöt_Á°32_t
 
ESqrR0
;

59 
uöt16_t
 
sigma0
;

60 
uöt_Á°16_t
 
ªcùSqπ16
, 
sigZ
, 
shi·edSigZ
;

61 
uöt16_t
 
√gRem
;

62 
ui16_f16
 
uZ
;

66 
uA
.
f
 = 
a
;

67 
uiA
 = 
uA
.
ui
;

68 
signA
 = 
	`signF16UI
–
uiA
 );

69 
expA
 = 
	`expF16UI
–
uiA
 );

70 
sigA
 = 
	`‰acF16UI
–
uiA
 );

73 i‡–
expA
 == 0x1F ) {

74 i‡–
sigA
 ) {

75 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–
uiA
, 0 );

76 
uiZ
;

78 i‡–! 
signA
 )  
a
;

79 
övÆid
;

83 i‡–
signA
 ) {

84 i‡–! (
expA
 | 
sigA
ËË 
a
;

85 
övÆid
;

89 i‡–! 
expA
 ) {

90 i‡–! 
sigA
 )  
a
;

91 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigA
 );

92 
expA
 = 
n‹mExpSig
.
exp
;

93 
sigA
 = 
n‹mExpSig
.
sig
;

97 
expZ
 = ((
expA
 - 0xF)>>1) + 0xE;

98 
expA
 &= 1;

99 
sigA
 |= 0x0400;

100 
ödex
 = (
sigA
>>6 & 0xEË+ 
expA
;

101 
r0
 = 
so·Êﬂt_≠¥oxRecùSqπ_1k0s
[
ödex
]

102 - (((
uöt_Á°32_t
Ë
so·Êﬂt_≠¥oxRecùSqπ_1k1s
[
ödex
]

103 * (
sigA
 & 0x7F))

105 
ESqrR0
 = ((
uöt_Á°32_t
Ë
r0
 *Ñ0)>>1;

106 i‡–
expA
 ) 
ESqrR0
 >>= 1;

107 
sigma0
 = ~(
uöt_Á°16_t
Ë((
ESqrR0
 * 
sigA
)>>16);

108 
ªcùSqπ16
 = 
r0
 + (((
uöt_Á°32_t
Ër0 * 
sigma0
)>>25);

109 i‡–! (
ªcùSqπ16
 & 0x8000) )ÑecipSqrt16 = 0x8000;

110 
sigZ
 = ((
uöt_Á°32_t
Ë(
sigA
<<5Ë* 
ªcùSqπ16
)>>16;

111 i‡–
expA
 ) 
sigZ
 >>= 1;

114 ++
sigZ
;

115 i‡–! (
sigZ
 & 7) ) {

116 
shi·edSigZ
 = 
sigZ
>>1;

117 
√gRem
 = 
shi·edSigZ
 * shiftedSigZ;

118 
sigZ
 &= ~1;

119 i‡–
√gRem
 & 0x8000 ) {

120 
sigZ
 |= 1;

122 i‡–
√gRem
 ) --
sigZ
;

125  
	`so·Êﬂt_roundPackToF16
–0, 
expZ
, 
sigZ
 );

128 
övÆid
:

129 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

130 
uiZ
 = 
deÁu…NaNF16UI
;

131 
uiZ
:

132 
uZ
.
ui
 = 
uiZ
;

133  
uZ
.
f
;

135 
	}
}

	@src/softfloat/source/f16_sub.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt16_t
 
	$f16_sub
–
Êﬂt16_t
 
a
, flﬂt16_à
b
 )

45 
ui16_f16
 
uA
;

46 
uöt_Á°16_t
 
uiA
;

47 
ui16_f16
 
uB
;

48 
uöt_Á°16_t
 
uiB
;

49 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 1)

50 
	`Êﬂt16_t
 (*
magsFuncPå
)–
uöt_Á°16_t
, uint_fast16_t );

53 
uA
.
f
 = 
a
;

54 
uiA
 = 
uA
.
ui
;

55 
uB
.
f
 = 
b
;

56 
uiB
 = 
uB
.
ui
;

57 #i‡
deföed
 
INLINE_LEVEL
 && (1 <= INLINE_LEVEL)

58 i‡–
	`signF16UI
–
uiA
 ^ 
uiB
 ) ) {

59  
	`so·Êﬂt_addMagsF16
–
uiA
, 
uiB
 );

61  
	`so·Êﬂt_subMagsF16
–
uiA
, 
uiB
 );

64 
magsFuncPå
 =

65 
	`signF16UI
–
uiA
 ^ 
uiB
 ) ? 
so·Êﬂt_addMagsF16
 : 
so·Êﬂt_subMagsF16
;

66  (*
magsFuncPå
)–
uiA
, 
uiB
 );

69 
	}
}

	@src/softfloat/source/f16_to_extF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t
 
	$f16_to_extF80
–
Êﬂt16_t
 
a
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°8_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt128
 
uiZ
;

53 
uöt_Á°16_t
 
uiZ64
;

54 
uöt_Á°64_t
 
uiZ0
;

55 
exp8_sig16
 
n‹mExpSig
;

56 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

60 
uA
.
f
 = 
a
;

61 
uiA
 = 
uA
.
ui
;

62 
sign
 = 
	`signF16UI
–
uiA
 );

63 
exp
 = 
	`expF16UI
–
uiA
 );

64 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

67 i‡–
exp
 == 0x1F ) {

68 i‡–
‰ac
 ) {

69 
	`so·Êﬂt_f16UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

70 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToExtF80UI
–&
comm⁄NaN
 );

71 
uiZ64
 = 
uiZ
.
v64
;

72 
uiZ0
 = 
uiZ
.
v0
;

74 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x7FFF );

75 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

77 
uiZ
;

81 i‡–! 
exp
 ) {

82 i‡–! 
‰ac
 ) {

83 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

84 
uiZ0
 = 0;

85 
uiZ
;

87 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
‰ac
 );

88 
exp
 = 
n‹mExpSig
.exp;

89 
‰ac
 = 
n‹mExpSig
.
sig
;

93 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 
exp
 + 0x3FF0 );

94 
uiZ0
 = (
uöt_Á°64_t
Ë(
‰ac
 | 0x0400)<<53;

95 
uiZ
:

96 
uZ
.
s
.
signExp
 = 
uiZ64
;

97 
uZ
.
s
.
signif
 = 
uiZ0
;

98  
uZ
.
f
;

100 
	}
}

	@src/softfloat/source/f16_to_extF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f16_to_extF80M
–
Êﬂt16_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

49 *
zPå
 = 
	`f16_to_extF80
–
a
 );

51 
	}
}

55 
	$f16_to_extF80M
–
Êﬂt16_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

57 
extFlﬂt80M
 *
zSPå
;

58 
ui16_f16
 
uA
;

59 
uöt16_t
 
uiA
;

60 
boﬁ
 
sign
;

61 
öt_Á°8_t
 
exp
;

62 
uöt16_t
 
‰ac
;

63 
comm⁄NaN
 commonNaN;

64 
uöt_Á°16_t
 
uiZ64
;

65 
uöt32_t
 
uiZ32
;

66 
exp8_sig16
 
n‹mExpSig
;

70 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

71 
uA
.
f
 = 
a
;

72 
uiA
 = 
uA
.
ui
;

73 
sign
 = 
	`signF16UI
–
uiA
 );

74 
exp
 = 
	`expF16UI
–
uiA
 );

75 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

78 i‡–
exp
 == 0x1F ) {

79 i‡–
‰ac
 ) {

80 
	`so·Êﬂt_f16UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

81 
	`so·Êﬂt_comm⁄NaNToExtF80M
–&
comm⁄NaN
, 
zSPå
 );

84 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x7FFF );

85 
uiZ32
 = 0x80000000;

86 
uiZ
;

90 i‡–! 
exp
 ) {

91 i‡–! 
‰ac
 ) {

92 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

93 
uiZ32
 = 0;

94 
uiZ
;

96 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
‰ac
 );

97 
exp
 = 
n‹mExpSig
.exp;

98 
‰ac
 = 
n‹mExpSig
.
sig
;

102 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 
exp
 + 0x3FF0 );

103 
uiZ32
 = 0x80000000 | (
uöt32_t
Ë
‰ac
<<21;

104 
uiZ
:

105 
zSPå
->
signExp
 = 
uiZ64
;

106 
zSPå
->
signif
 = (
uöt64_t
Ë
uiZ32
<<32;

108 
	}
}

	@src/softfloat/source/f16_to_f128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t
 
	$f16_to_f128
–
Êﬂt16_t
 
a
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°8_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt128
 
uiZ
;

53 
exp8_sig16
 
n‹mExpSig
;

54 
ui128_f128
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA
 = 
uA
.
ui
;

60 
sign
 = 
	`signF16UI
–
uiA
 );

61 
exp
 = 
	`expF16UI
–
uiA
 );

62 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

65 i‡–
exp
 == 0x1F ) {

66 i‡–
‰ac
 ) {

67 
	`so·Êﬂt_f16UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

68 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF128UI
–&
comm⁄NaN
 );

70 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 0x7FFF, 0 );

71 
uiZ
.
v0
 = 0;

73 
uiZ
;

77 i‡–! 
exp
 ) {

78 i‡–! 
‰ac
 ) {

79 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 0, 0 );

80 
uiZ
.
v0
 = 0;

81 
uiZ
;

83 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
‰ac
 );

84 
exp
 = 
n‹mExpSig
.exp - 1;

85 
‰ac
 = 
n‹mExpSig
.
sig
;

89 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 
exp
 + 0x3FF0, (
uöt_Á°64_t
Ë
‰ac
<<38 );

90 
uiZ
.
v0
 = 0;

91 
uiZ
:

92 
uZ
.
ui
 = 
uiZ
;

93  
uZ
.
f
;

95 
	}
}

	@src/softfloat/source/f16_to_f128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f16_to_f128M
–
Êﬂt16_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

49 *
zPå
 = 
	`f16_to_f128
–
a
 );

51 
	}
}

55 
	$f16_to_f128M
–
Êﬂt16_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

57 
uöt32_t
 *
zWPå
;

58 
ui16_f16
 
uA
;

59 
uöt16_t
 
uiA
;

60 
boﬁ
 
sign
;

61 
öt_Á°8_t
 
exp
;

62 
uöt16_t
 
‰ac
;

63 
comm⁄NaN
 commonNaN;

64 
uöt32_t
 
uiZ96
;

65 
exp8_sig16
 
n‹mExpSig
;

69 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

72 
uA
.
f
 = 
a
;

73 
uiA
 = 
uA
.
ui
;

74 
sign
 = 
	`signF16UI
–
uiA
 );

75 
exp
 = 
	`expF16UI
–
uiA
 );

76 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

79 i‡–
exp
 == 0x1F ) {

80 i‡–
‰ac
 ) {

81 
	`so·Êﬂt_f16UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

82 
	`so·Êﬂt_comm⁄NaNToF128M
–&
comm⁄NaN
, 
zWPå
 );

85 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0x7FFF, 0 );

86 
uiZ
;

90 i‡–! 
exp
 ) {

91 i‡–! 
‰ac
 ) {

92 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0, 0 );

93 
uiZ
;

95 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
‰ac
 );

96 
exp
 = 
n‹mExpSig
.exp - 1;

97 
‰ac
 = 
n‹mExpSig
.
sig
;

101 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 
exp
 + 0x3FF0, (
uöt32_t
Ë
‰ac
<<6 );

102 
uiZ
:

103 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
uiZ96
;

104 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

105 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

106 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

108 
	}
}

	@src/softfloat/source/f16_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$f16_to_f32
–
Êﬂt16_t
 
a
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°8_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°32_t
 
uiZ
;

53 
exp8_sig16
 
n‹mExpSig
;

54 
ui32_f32
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA
 = 
uA
.
ui
;

60 
sign
 = 
	`signF16UI
–
uiA
 );

61 
exp
 = 
	`expF16UI
–
uiA
 );

62 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

65 i‡–
exp
 == 0x1F ) {

66 i‡–
‰ac
 ) {

67 
	`so·Êﬂt_f16UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

68 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF32UI
–&
comm⁄NaN
 );

70 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0xFF, 0 );

72 
uiZ
;

76 i‡–! 
exp
 ) {

77 i‡–! 
‰ac
 ) {

78 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0, 0 );

79 
uiZ
;

81 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
‰ac
 );

82 
exp
 = 
n‹mExpSig
.exp - 1;

83 
‰ac
 = 
n‹mExpSig
.
sig
;

87 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 
exp
 + 0x70, (
uöt_Á°32_t
Ë
‰ac
<<13 );

88 
uiZ
:

89 
uZ
.
ui
 = 
uiZ
;

90  
uZ
.
f
;

92 
	}
}

	@src/softfloat/source/f16_to_f64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$f16_to_f64
–
Êﬂt16_t
 
a
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°8_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°64_t
 
uiZ
;

53 
exp8_sig16
 
n‹mExpSig
;

54 
ui64_f64
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA
 = 
uA
.
ui
;

60 
sign
 = 
	`signF16UI
–
uiA
 );

61 
exp
 = 
	`expF16UI
–
uiA
 );

62 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

65 i‡–
exp
 == 0x1F ) {

66 i‡–
‰ac
 ) {

67 
	`so·Êﬂt_f16UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

68 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF64UI
–&
comm⁄NaN
 );

70 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0x7FF, 0 );

72 
uiZ
;

76 i‡–! 
exp
 ) {

77 i‡–! 
‰ac
 ) {

78 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0, 0 );

79 
uiZ
;

81 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
‰ac
 );

82 
exp
 = 
n‹mExpSig
.exp - 1;

83 
‰ac
 = 
n‹mExpSig
.
sig
;

87 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 
exp
 + 0x3F0, (
uöt_Á°64_t
Ë
‰ac
<<42 );

88 
uiZ
:

89 
uZ
.
ui
 = 
uiZ
;

90  
uZ
.
f
;

92 
	}
}

	@src/softfloat/source/f16_to_i32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$f16_to_i32
–
Êﬂt16_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°8_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
öt_Á°32_t
 
sig32
;

52 
öt_Á°8_t
 
shi·Di°
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
sign
 = 
	`signF16UI
–
uiA
 );

59 
exp
 = 
	`expF16UI
–
uiA
 );

60 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

63 i‡–
exp
 == 0x1F ) {

64 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

66 
‰ac
 ? 
i32_‰omNaN


67 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

71 
sig32
 = 
‰ac
;

72 i‡–
exp
 ) {

73 
sig32
 |= 0x0400;

74 
shi·Di°
 = 
exp
 - 0x19;

75 i‡–0 <
shi·Di°
 ) {

76 
sig32
 <<
shi·Di°
;

77  
sign
 ? -
sig32
 : sig32;

79 
shi·Di°
 = 
exp
 - 0x0D;

80 i‡–0 < 
shi·Di°
 ) 
sig32
 <<= shiftDist;

83 
	`so·Êﬂt_roundToI32
(

84 
sign
, (
uöt_Á°32_t
Ë
sig32
, 
roundögMode
, 
exa˘
 );

86 
	}
}

	@src/softfloat/source/f16_to_i32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$f16_to_i32_r_möMag
–
Êﬂt16_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
öt_Á°8_t
 
exp
;

49 
uöt_Á°16_t
 
‰ac
;

50 
öt_Á°8_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
öt_Á°32_t
 
Æig√dSig
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF16UI
–
uiA
 );

59 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

62 
shi·Di°
 = 
exp
 - 0x0F;

63 i‡–
shi·Di°
 < 0 ) {

64 i‡–
exa˘
 && (
exp
 | 
‰ac
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF16UI
–
uiA
 );

72 i‡–
exp
 == 0x1F ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0x1FË&& 
‰ac
 ? 
i32_‰omNaN


76 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

80 
Æig√dSig
 = (
öt_Á°32_t
Ë(
‰ac
 | 0x0400)<<
shi·Di°
;

81 i‡–
exa˘
 && (
Æig√dSig
 & 0x3FF) ) {

82 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

84 
Æig√dSig
 >>= 10;

85  
sign
 ? -
Æig√dSig
 :álignedSig;

87 
	}
}

	@src/softfloat/source/f16_to_i64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$f16_to_i64
–
Êﬂt16_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°8_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
öt_Á°32_t
 
sig32
;

52 
öt_Á°8_t
 
shi·Di°
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
sign
 = 
	`signF16UI
–
uiA
 );

59 
exp
 = 
	`expF16UI
–
uiA
 );

60 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

63 i‡–
exp
 == 0x1F ) {

64 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

66 
‰ac
 ? 
i64_‰omNaN


67 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

71 
sig32
 = 
‰ac
;

72 i‡–
exp
 ) {

73 
sig32
 |= 0x0400;

74 
shi·Di°
 = 
exp
 - 0x19;

75 i‡–0 <
shi·Di°
 ) {

76 
sig32
 <<
shi·Di°
;

77  
sign
 ? -
sig32
 : sig32;

79 
shi·Di°
 = 
exp
 - 0x0D;

80 i‡–0 < 
shi·Di°
 ) 
sig32
 <<= shiftDist;

83 
	`so·Êﬂt_roundToI32
(

84 
sign
, (
uöt_Á°32_t
Ë
sig32
, 
roundögMode
, 
exa˘
 );

86 
	}
}

	@src/softfloat/source/f16_to_i64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$f16_to_i64_r_möMag
–
Êﬂt16_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
öt_Á°8_t
 
exp
;

49 
uöt_Á°16_t
 
‰ac
;

50 
öt_Á°8_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
öt_Á°32_t
 
Æig√dSig
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF16UI
–
uiA
 );

59 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

62 
shi·Di°
 = 
exp
 - 0x0F;

63 i‡–
shi·Di°
 < 0 ) {

64 i‡–
exa˘
 && (
exp
 | 
‰ac
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF16UI
–
uiA
 );

72 i‡–
exp
 == 0x1F ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0x1FË&& 
‰ac
 ? 
i64_‰omNaN


76 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

80 
Æig√dSig
 = (
öt_Á°32_t
Ë(
‰ac
 | 0x0400)<<
shi·Di°
;

81 i‡–
exa˘
 && (
Æig√dSig
 & 0x3FF) ) {

82 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

84 
Æig√dSig
 >>= 10;

85  
sign
 ? -
Æig√dSig
 :álignedSig;

87 
	}
}

	@src/softfloat/source/f16_to_ui32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t
 
	$f16_to_ui32
–
Êﬂt16_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°8_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
uöt_Á°32_t
 
sig32
;

52 
öt_Á°8_t
 
shi·Di°
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
sign
 = 
	`signF16UI
–
uiA
 );

59 
exp
 = 
	`expF16UI
–
uiA
 );

60 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

63 i‡–
exp
 == 0x1F ) {

64 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

66 
‰ac
 ? 
ui32_‰omNaN


67 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

71 
sig32
 = 
‰ac
;

72 i‡–
exp
 ) {

73 
sig32
 |= 0x0400;

74 
shi·Di°
 = 
exp
 - 0x19;

75 i‡–(0 <
shi·Di°
Ë&& ! 
sign
 ) {

76  
sig32
<<
shi·Di°
;

78 
shi·Di°
 = 
exp
 - 0x0D;

79 i‡–0 < 
shi·Di°
 ) 
sig32
 <<= shiftDist;

81  
	`so·Êﬂt_roundToUI32
–
sign
, 
sig32
, 
roundögMode
, 
exa˘
 );

83 
	}
}

	@src/softfloat/source/f16_to_ui32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t
 
	$f16_to_ui32_r_möMag
–
Êﬂt16_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
öt_Á°8_t
 
exp
;

49 
uöt_Á°16_t
 
‰ac
;

50 
öt_Á°8_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°32_t
 
Æig√dSig
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF16UI
–
uiA
 );

59 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

62 
shi·Di°
 = 
exp
 - 0x0F;

63 i‡–
shi·Di°
 < 0 ) {

64 i‡–
exa˘
 && (
exp
 | 
‰ac
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF16UI
–
uiA
 );

72 i‡–
sign
 || (
exp
 == 0x1F) ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0x1FË&& 
‰ac
 ? 
ui32_‰omNaN


76 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

80 
Æig√dSig
 = (
uöt_Á°32_t
Ë(
‰ac
 | 0x0400)<<
shi·Di°
;

81 i‡–
exa˘
 && (
Æig√dSig
 & 0x3FF) ) {

82 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

84  
Æig√dSig
>>10;

86 
	}
}

	@src/softfloat/source/f16_to_ui64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t
 
	$f16_to_ui64
–
Êﬂt16_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°8_t
 
exp
;

50 
uöt_Á°16_t
 
‰ac
;

51 
uöt_Á°32_t
 
sig32
;

52 
öt_Á°8_t
 
shi·Di°
;

53 #i‚de‡
SOFTFLOAT_FAST_INT64


54 
uöt32_t
 
extSig
[3];

59 
uA
.
f
 = 
a
;

60 
uiA
 = 
uA
.
ui
;

61 
sign
 = 
	`signF16UI
–
uiA
 );

62 
exp
 = 
	`expF16UI
–
uiA
 );

63 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

66 i‡–
exp
 == 0x1F ) {

67 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

69 
‰ac
 ? 
ui64_‰omNaN


70 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

74 
sig32
 = 
‰ac
;

75 i‡–
exp
 ) {

76 
sig32
 |= 0x0400;

77 
shi·Di°
 = 
exp
 - 0x19;

78 i‡–(0 <
shi·Di°
Ë&& ! 
sign
 ) {

79  
sig32
<<
shi·Di°
;

81 
shi·Di°
 = 
exp
 - 0x0D;

82 i‡–0 < 
shi·Di°
 ) 
sig32
 <<= shiftDist;

84 #ifde‡
SOFTFLOAT_FAST_INT64


86 
	`so·Êﬂt_roundToUI64
(

87 
sign
, 
sig32
>>12, (
uöt_Á°64_t
Ësig32<<52, 
roundögMode
, 
exa˘
 );

89 
extSig
[
	`ödexW‹d
( 3, 2 )] = 0;

90 
extSig
[
	`ödexW‹d
–3, 1 )] = 
sig32
>>12;

91 
extSig
[
	`ödexW‹d
–3, 0 )] = 
sig32
<<20;

92  
	`so·Êﬂt_roundMToUI64
–
sign
, 
extSig
, 
roundögMode
, 
exa˘
 );

95 
	}
}

	@src/softfloat/source/f16_to_ui64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t
 
	$f16_to_ui64_r_möMag
–
Êﬂt16_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui16_f16
 
uA
;

47 
uöt_Á°16_t
 
uiA
;

48 
öt_Á°8_t
 
exp
;

49 
uöt_Á°16_t
 
‰ac
;

50 
öt_Á°8_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°32_t
 
Æig√dSig
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF16UI
–
uiA
 );

59 
‰ac
 = 
	`‰acF16UI
–
uiA
 );

62 
shi·Di°
 = 
exp
 - 0x0F;

63 i‡–
shi·Di°
 < 0 ) {

64 i‡–
exa˘
 && (
exp
 | 
‰ac
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF16UI
–
uiA
 );

72 i‡–
sign
 || (
exp
 == 0x1F) ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0x1FË&& 
‰ac
 ? 
ui64_‰omNaN


76 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

80 
Æig√dSig
 = (
uöt_Á°32_t
Ë(
‰ac
 | 0x0400)<<
shi·Di°
;

81 i‡–
exa˘
 && (
Æig√dSig
 & 0x3FF) ) {

82 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

84  
Æig√dSig
>>10;

86 
	}
}

	@src/softfloat/source/f32_add.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt32_t
 
	$f32_add
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

45 
ui32_f32
 
uA
;

46 
uöt_Á°32_t
 
uiA
;

47 
ui32_f32
 
uB
;

48 
uöt_Á°32_t
 
uiB
;

49 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 1)

50 
	`Êﬂt32_t
 (*
magsFuncPå
)–
uöt_Á°32_t
, uint_fast32_t );

53 
uA
.
f
 = 
a
;

54 
uiA
 = 
uA
.
ui
;

55 
uB
.
f
 = 
b
;

56 
uiB
 = 
uB
.
ui
;

57 #i‡
deföed
 
INLINE_LEVEL
 && (1 <= INLINE_LEVEL)

58 i‡–
	`signF32UI
–
uiA
 ^ 
uiB
 ) ) {

59  
	`so·Êﬂt_subMagsF32
–
uiA
, 
uiB
 );

61  
	`so·Êﬂt_addMagsF32
–
uiA
, 
uiB
 );

64 
magsFuncPå
 =

65 
	`signF32UI
–
uiA
 ^ 
uiB
 ) ? 
so·Êﬂt_subMagsF32
 : 
so·Êﬂt_addMagsF32
;

66  (*
magsFuncPå
)–
uiA
, 
uiB
 );

69 
	}
}

	@src/softfloat/source/f32_div.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$f32_div
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°32_t
 
sigA
;

51 
ui32_f32
 
uB
;

52 
uöt_Á°32_t
 
uiB
;

53 
boﬁ
 
signB
;

54 
öt_Á°16_t
 
expB
;

55 
uöt_Á°32_t
 
sigB
;

56 
boﬁ
 
signZ
;

57 
exp16_sig32
 
n‹mExpSig
;

58 
öt_Á°16_t
 
expZ
;

59 #ifde‡
SOFTFLOAT_FAST_DIV64TO32


60 
uöt_Á°64_t
 
sig64A
;

61 
uöt_Á°32_t
 
sigZ
;

63 
uöt_Á°32_t
 
sigZ
;

64 
uöt_Á°64_t
 
ªm
;

66 
uöt_Á°32_t
 
uiZ
;

67 
ui32_f32
 
uZ
;

71 
uA
.
f
 = 
a
;

72 
uiA
 = 
uA
.
ui
;

73 
signA
 = 
	`signF32UI
–
uiA
 );

74 
expA
 = 
	`expF32UI
–
uiA
 );

75 
sigA
 = 
	`‰acF32UI
–
uiA
 );

76 
uB
.
f
 = 
b
;

77 
uiB
 = 
uB
.
ui
;

78 
signB
 = 
	`signF32UI
–
uiB
 );

79 
expB
 = 
	`expF32UI
–
uiB
 );

80 
sigB
 = 
	`‰acF32UI
–
uiB
 );

81 
signZ
 = 
signA
 ^ 
signB
;

84 i‡–
expA
 == 0xFF ) {

85 i‡–
sigA
 ) 
¥›ag©eNaN
;

86 i‡–
expB
 == 0xFF ) {

87 i‡–
sigB
 ) 
¥›ag©eNaN
;

88 
övÆid
;

90 
öföôy
;

92 i‡–
expB
 == 0xFF ) {

93 i‡–
sigB
 ) 
¥›ag©eNaN
;

94 
zîo
;

98 i‡–! 
expB
 ) {

99 i‡–! 
sigB
 ) {

100 i‡–! (
expA
 | 
sigA
ËË
övÆid
;

101 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_öföôe
 );

102 
öföôy
;

104 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigB
 );

105 
expB
 = 
n‹mExpSig
.
exp
;

106 
sigB
 = 
n‹mExpSig
.
sig
;

108 i‡–! 
expA
 ) {

109 i‡–! 
sigA
 ) 
zîo
;

110 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigA
 );

111 
expA
 = 
n‹mExpSig
.
exp
;

112 
sigA
 = 
n‹mExpSig
.
sig
;

116 
expZ
 = 
expA
 - 
expB
 + 0x7E;

117 
sigA
 |= 0x00800000;

118 
sigB
 |= 0x00800000;

119 #ifde‡
SOFTFLOAT_FAST_DIV64TO32


120 i‡–
sigA
 < 
sigB
 ) {

121 --
expZ
;

122 
sig64A
 = (
uöt_Á°64_t
Ë
sigA
<<31;

124 
sig64A
 = (
uöt_Á°64_t
Ë
sigA
<<30;

126 
sigZ
 = 
sig64A
 / 
sigB
;

127 i‡–! (
sigZ
 & 0x3FËËsigZ |((
uöt_Á°64_t
Ë
sigB
 * sigZ !
sig64A
);

129 i‡–
sigA
 < 
sigB
 ) {

130 --
expZ
;

131 
sigA
 <<= 8;

133 
sigA
 <<= 7;

135 
sigB
 <<= 8;

136 
sigZ
 = ((
uöt_Á°64_t
Ë
sigA
 * 
	`so·Êﬂt_≠¥oxRecù32_1
–
sigB
 ))>>32;

139 
sigZ
 += 2;

140 i‡–(
sigZ
 & 0x3F) < 2 ) {

141 
sigZ
 &= ~3;

142 #ifde‡
SOFTFLOAT_FAST_INT64


143 
ªm
 = ((
uöt_Á°64_t
Ë
sigA
<<31Ë- (uöt_Á°64_tË
sigZ
 * 
sigB
;

145 
ªm
 = ((
uöt_Á°64_t
Ë
sigA
<<32Ë- (uöt_Á°64_tË(
sigZ
<<1Ë* 
sigB
;

147 i‡–
ªm
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

148 
sigZ
 -= 4;

150 i‡–
ªm
 ) 
sigZ
 |= 1;

154  
	`so·Êﬂt_roundPackToF32
–
signZ
, 
expZ
, 
sigZ
 );

157 
¥›ag©eNaN
:

158 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–
uiA
, 
uiB
 );

159 
uiZ
;

162 
övÆid
:

163 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

164 
uiZ
 = 
deÁu…NaNF32UI
;

165 
uiZ
;

168 
öföôy
:

169 
uiZ
 = 
	`∑ckToF32UI
–
signZ
, 0xFF, 0 );

170 
uiZ
;

173 
zîo
:

174 
uiZ
 = 
	`∑ckToF32UI
–
signZ
, 0, 0 );

175 
uiZ
:

176 
uZ
.
ui
 = 
uiZ
;

177  
uZ
.
f
;

179 
	}
}

	@src/softfloat/source/f32_eq.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f32_eq
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
ui32_f32
 
uB
;

49 
uöt_Á°32_t
 
uiB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF32UI
–
uiA
 ) || isNaNF32UI–
uiB
 ) ) {

57 
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 ) || so·Êﬂt_isSigNaNF32UI–
uiB
 )

59 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

61  
Ál£
;

63  (
uiA
 =
uiB
Ë|| ! (
uöt32_t
) ((uiA | uiB)<<1);

65 
	}
}

	@src/softfloat/source/f32_eq_signaling.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f32_eq_sig«lög
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

45 
ui32_f32
 
uA
;

46 
uöt_Á°32_t
 
uiA
;

47 
ui32_f32
 
uB
;

48 
uöt_Á°32_t
 
uiB
;

50 
uA
.
f
 = 
a
;

51 
uiA
 = 
uA
.
ui
;

52 
uB
.
f
 = 
b
;

53 
uiB
 = 
uB
.
ui
;

54 i‡–
	`isNaNF32UI
–
uiA
 ) || isNaNF32UI–
uiB
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

56  
Ál£
;

58  (
uiA
 =
uiB
Ë|| ! (
uöt32_t
) ((uiA | uiB)<<1);

60 
	}
}

	@src/softfloat/source/f32_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f32_isSig«lögNaN
–
Êﬂt32_t
 
a
 )

45 
ui32_f32
 
uA
;

47 
uA
.
f
 = 
a
;

48  
	`so·Êﬂt_isSigNaNF32UI
–
uA
.
ui
 );

50 
	}
}

	@src/softfloat/source/f32_le.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f32_À
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

45 
ui32_f32
 
uA
;

46 
uöt_Á°32_t
 
uiA
;

47 
ui32_f32
 
uB
;

48 
uöt_Á°32_t
 
uiB
;

49 
boﬁ
 
signA
, 
signB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF32UI
–
uiA
 ) || isNaNF32UI–
uiB
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57  
Ál£
;

59 
signA
 = 
	`signF32UI
–
uiA
 );

60 
signB
 = 
	`signF32UI
–
uiB
 );

62 (
signA
 !
signB
Ë? signA || ! (
uöt32_t
Ë((
uiA
 | 
uiB
)<<1)

63 : (
uiA
 =
uiB
Ë|| (
signA
 ^ (uiA < uiB));

65 
	}
}

	@src/softfloat/source/f32_le_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f32_À_quõt
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
ui32_f32
 
uB
;

49 
uöt_Á°32_t
 
uiB
;

50 
boﬁ
 
signA
, 
signB
;

52 
uA
.
f
 = 
a
;

53 
uiA
 = 
uA
.
ui
;

54 
uB
.
f
 = 
b
;

55 
uiB
 = 
uB
.
ui
;

56 i‡–
	`isNaNF32UI
–
uiA
 ) || isNaNF32UI–
uiB
 ) ) {

58 
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 ) || so·Êﬂt_isSigNaNF32UI–
uiB
 )

60 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62  
Ál£
;

64 
signA
 = 
	`signF32UI
–
uiA
 );

65 
signB
 = 
	`signF32UI
–
uiB
 );

67 (
signA
 !
signB
Ë? signA || ! (
uöt32_t
Ë((
uiA
 | 
uiB
)<<1)

68 : (
uiA
 =
uiB
Ë|| (
signA
 ^ (uiA < uiB));

70 
	}
}

	@src/softfloat/source/f32_lt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f32_…
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

45 
ui32_f32
 
uA
;

46 
uöt_Á°32_t
 
uiA
;

47 
ui32_f32
 
uB
;

48 
uöt_Á°32_t
 
uiB
;

49 
boﬁ
 
signA
, 
signB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF32UI
–
uiA
 ) || isNaNF32UI–
uiB
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57  
Ál£
;

59 
signA
 = 
	`signF32UI
–
uiA
 );

60 
signB
 = 
	`signF32UI
–
uiB
 );

62 (
signA
 !
signB
Ë? signA && ((
uöt32_t
Ë((
uiA
 | 
uiB
)<<1) != 0)

63 : (
uiA
 !
uiB
Ë&& (
signA
 ^ (uiA < uiB));

65 
	}
}

	@src/softfloat/source/f32_lt_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f32_…_quõt
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
ui32_f32
 
uB
;

49 
uöt_Á°32_t
 
uiB
;

50 
boﬁ
 
signA
, 
signB
;

52 
uA
.
f
 = 
a
;

53 
uiA
 = 
uA
.
ui
;

54 
uB
.
f
 = 
b
;

55 
uiB
 = 
uB
.
ui
;

56 i‡–
	`isNaNF32UI
–
uiA
 ) || isNaNF32UI–
uiB
 ) ) {

58 
	`so·Êﬂt_isSigNaNF32UI
–
uiA
 ) || so·Êﬂt_isSigNaNF32UI–
uiB
 )

60 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62  
Ál£
;

64 
signA
 = 
	`signF32UI
–
uiA
 );

65 
signB
 = 
	`signF32UI
–
uiB
 );

67 (
signA
 !
signB
Ë? signA && ((
uöt32_t
Ë((
uiA
 | 
uiB
)<<1) != 0)

68 : (
uiA
 !
uiB
Ë&& (
signA
 ^ (uiA < uiB));

70 
	}
}

	@src/softfloat/source/f32_mul.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$f32_mul
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°32_t
 
sigA
;

51 
ui32_f32
 
uB
;

52 
uöt_Á°32_t
 
uiB
;

53 
boﬁ
 
signB
;

54 
öt_Á°16_t
 
expB
;

55 
uöt_Á°32_t
 
sigB
;

56 
boﬁ
 
signZ
;

57 
uöt_Á°32_t
 
magBôs
;

58 
exp16_sig32
 
n‹mExpSig
;

59 
öt_Á°16_t
 
expZ
;

60 
uöt_Á°32_t
 
sigZ
, 
uiZ
;

61 
ui32_f32
 
uZ
;

65 
uA
.
f
 = 
a
;

66 
uiA
 = 
uA
.
ui
;

67 
signA
 = 
	`signF32UI
–
uiA
 );

68 
expA
 = 
	`expF32UI
–
uiA
 );

69 
sigA
 = 
	`‰acF32UI
–
uiA
 );

70 
uB
.
f
 = 
b
;

71 
uiB
 = 
uB
.
ui
;

72 
signB
 = 
	`signF32UI
–
uiB
 );

73 
expB
 = 
	`expF32UI
–
uiB
 );

74 
sigB
 = 
	`‰acF32UI
–
uiB
 );

75 
signZ
 = 
signA
 ^ 
signB
;

78 i‡–
expA
 == 0xFF ) {

79 i‡–
sigA
 || ((
expB
 =0xFFË&& 
sigB
ËË
¥›ag©eNaN
;

80 
magBôs
 = 
expB
 | 
sigB
;

81 
öfArg
;

83 i‡–
expB
 == 0xFF ) {

84 i‡–
sigB
 ) 
¥›ag©eNaN
;

85 
magBôs
 = 
expA
 | 
sigA
;

86 
öfArg
;

90 i‡–! 
expA
 ) {

91 i‡–! 
sigA
 ) 
zîo
;

92 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigA
 );

93 
expA
 = 
n‹mExpSig
.
exp
;

94 
sigA
 = 
n‹mExpSig
.
sig
;

96 i‡–! 
expB
 ) {

97 i‡–! 
sigB
 ) 
zîo
;

98 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigB
 );

99 
expB
 = 
n‹mExpSig
.
exp
;

100 
sigB
 = 
n‹mExpSig
.
sig
;

104 
expZ
 = 
expA
 + 
expB
 - 0x7F;

105 
sigA
 = (sigA | 0x00800000)<<7;

106 
sigB
 = (sigB | 0x00800000)<<8;

107 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–(
uöt_Á°64_t
Ë
sigA
 * 
sigB
, 32 );

108 i‡–
sigZ
 < 0x40000000 ) {

109 --
expZ
;

110 
sigZ
 <<= 1;

112  
	`so·Êﬂt_roundPackToF32
–
signZ
, 
expZ
, 
sigZ
 );

115 
¥›ag©eNaN
:

116 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–
uiA
, 
uiB
 );

117 
uiZ
;

120 
öfArg
:

121 i‡–! 
magBôs
 ) {

122 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

123 
uiZ
 = 
deÁu…NaNF32UI
;

125 
uiZ
 = 
	`∑ckToF32UI
–
signZ
, 0xFF, 0 );

127 
uiZ
;

130 
zîo
:

131 
uiZ
 = 
	`∑ckToF32UI
–
signZ
, 0, 0 );

132 
uiZ
:

133 
uZ
.
ui
 = 
uiZ
;

134  
uZ
.
f
;

136 
	}
}

	@src/softfloat/source/f32_mulAdd.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt32_t
 
	$f32_mulAdd
–
Êﬂt32_t
 
a
, flﬂt32_à
b
, flﬂt32_à
c
 )

44 
ui32_f32
 
uA
;

45 
uöt_Á°32_t
 
uiA
;

46 
ui32_f32
 
uB
;

47 
uöt_Á°32_t
 
uiB
;

48 
ui32_f32
 
uC
;

49 
uöt_Á°32_t
 
uiC
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 
uC
.
f
 = 
c
;

56 
uiC
 = 
uC
.
ui
;

57  
	`so·Êﬂt_mulAddF32
–
uiA
, 
uiB
, 
uiC
, 0 );

59 
	}
}

	@src/softfloat/source/f32_rem.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$f32_ªm
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°32_t
 
sigA
;

51 
ui32_f32
 
uB
;

52 
uöt_Á°32_t
 
uiB
;

53 
öt_Á°16_t
 
expB
;

54 
uöt_Á°32_t
 
sigB
;

55 
exp16_sig32
 
n‹mExpSig
;

56 
uöt32_t
 
ªm
;

57 
öt_Á°16_t
 
expDiff
;

58 
uöt32_t
 
q
, 
ªcù32
, 
ÆtRem
, 
mónRem
;

59 
boﬁ
 
signRem
;

60 
uöt_Á°32_t
 
uiZ
;

61 
ui32_f32
 
uZ
;

65 
uA
.
f
 = 
a
;

66 
uiA
 = 
uA
.
ui
;

67 
signA
 = 
	`signF32UI
–
uiA
 );

68 
expA
 = 
	`expF32UI
–
uiA
 );

69 
sigA
 = 
	`‰acF32UI
–
uiA
 );

70 
uB
.
f
 = 
b
;

71 
uiB
 = 
uB
.
ui
;

72 
expB
 = 
	`expF32UI
–
uiB
 );

73 
sigB
 = 
	`‰acF32UI
–
uiB
 );

76 i‡–
expA
 == 0xFF ) {

77 i‡–
sigA
 || ((
expB
 =0xFFË&& 
sigB
ËË
¥›ag©eNaN
;

78 
övÆid
;

80 i‡–
expB
 == 0xFF ) {

81 i‡–
sigB
 ) 
¥›ag©eNaN
;

82  
a
;

86 i‡–! 
expB
 ) {

87 i‡–! 
sigB
 ) 
övÆid
;

88 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigB
 );

89 
expB
 = 
n‹mExpSig
.
exp
;

90 
sigB
 = 
n‹mExpSig
.
sig
;

92 i‡–! 
expA
 ) {

93 i‡–! 
sigA
 )  
a
;

94 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigA
 );

95 
expA
 = 
n‹mExpSig
.
exp
;

96 
sigA
 = 
n‹mExpSig
.
sig
;

100 
ªm
 = 
sigA
 | 0x00800000;

101 
sigB
 |= 0x00800000;

102 
expDiff
 = 
expA
 - 
expB
;

103 i‡–
expDiff
 < 1 ) {

104 i‡–
expDiff
 < -1 )  
a
;

105 
sigB
 <<= 6;

106 i‡–
expDiff
 ) {

107 
ªm
 <<= 5;

108 
q
 = 0;

110 
ªm
 <<= 6;

111 
q
 = (
sigB
 <
ªm
);

112 i‡–
q
 ) 
ªm
 -
sigB
;

115 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
sigB
<<8 );

120 
ªm
 <<= 7;

121 
expDiff
 -= 31;

127 
sigB
 <<= 6;

129 
q
 = (
ªm
 * (
uöt_Á°64_t
Ë
ªcù32
)>>32;

130 i‡–
expDiff
 < 0 ) ;

131 
ªm
 = -(
q
 * (
uöt32_t
Ë
sigB
);

132 
expDiff
 -= 29;

137 
q
 >>~
expDiff
 & 31;

138 
ªm
 = (ªm<<(
expDiff
 + 30)Ë- 
q
 * (
uöt32_t
Ë
sigB
;

143 
ÆtRem
 = 
ªm
;

144 ++
q
;

145 
ªm
 -
sigB
;

146 }  ! (
ªm
 & 0x80000000) );

147 
mónRem
 = 
ªm
 + 
ÆtRem
;

148 i‡–(
mónRem
 & 0x80000000Ë|| (! mónRem && (
q
 & 1)ËË
ªm
 = 
ÆtRem
;

149 
signRem
 = 
signA
;

150 i‡–0x80000000 <
ªm
 ) {

151 
signRem
 = ! signRem;

152 
ªm
 = -rem;

154  
	`so·Êﬂt_n‹mRoundPackToF32
–
signRem
, 
expB
, 
ªm
 );

157 
¥›ag©eNaN
:

158 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–
uiA
, 
uiB
 );

159 
uiZ
;

160 
övÆid
:

161 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

162 
uiZ
 = 
deÁu…NaNF32UI
;

163 
uiZ
:

164 
uZ
.
ui
 = 
uiZ
;

165  
uZ
.
f
;

167 
	}
}

	@src/softfloat/source/f32_roundToInt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$f32_roundToI¡
–
Êﬂt32_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°32_t
 
uiZ
, 
œ°BôMask
, 
roundBôsMask
;

50 
ui32_f32
 
uZ
;

54 
uA
.
f
 = 
a
;

55 
uiA
 = 
uA
.
ui
;

56 
exp
 = 
	`expF32UI
–
uiA
 );

59 i‡–
exp
 <= 0x7E ) {

60 i‡–!(
uöt32_t
Ë(
uiA
<<1ËË 
a
;

61 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

62 
uiZ
 = 
uiA
 & 
	`∑ckToF32UI
( 1, 0, 0 );

63  
roundögMode
 ) {

64 
so·Êﬂt_round_√¨_eví
:

65 i‡–!
	`‰acF32UI
–
uiA
 ) ) ;

66 
so·Êﬂt_round_√¨_maxMag
:

67 i‡–
exp
 =0x7E ) 
uiZ
 |
	`∑ckToF32UI
( 0, 0x7F, 0 );

69 
so·Êﬂt_round_mö
:

70 i‡–
uiZ
 ) uiZ = 
	`∑ckToF32UI
( 1, 0x7F, 0 );

72 
so·Êﬂt_round_max
:

73 i‡–!
uiZ
 ) uiZ = 
	`∑ckToF32UI
( 0, 0x7F, 0 );

75 #ifde‡
SOFTFLOAT_ROUND_ODD


76 
so·Êﬂt_round_odd
:

77 
uiZ
 |
	`∑ckToF32UI
( 0, 0x7F, 0 );

81 
uiZ
;

85 i‡–0x96 <
exp
 ) {

86 i‡–(
exp
 =0xFFË&& 
	`‰acF32UI
–
uiA
 ) ) {

87 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–
uiA
, 0 );

88 
uiZ
;

90  
a
;

94 
uiZ
 = 
uiA
;

95 
œ°BôMask
 = (
uöt_Á°32_t
Ë1<<(0x96 - 
exp
);

96 
roundBôsMask
 = 
œ°BôMask
 - 1;

97 i‡–
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
 ) {

98 
uiZ
 +
œ°BôMask
>>1;

99 } i‡–
roundögMode
 =
so·Êﬂt_round_√¨_eví
 ) {

100 
uiZ
 +
œ°BôMask
>>1;

101 i‡–!(
uiZ
 & 
roundBôsMask
ËËuiZ &~
œ°BôMask
;

103 
roundögMode


104 =(
	`signF32UI
–
uiZ
 ) ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
)

106 
uiZ
 +
roundBôsMask
;

108 
uiZ
 &~
roundBôsMask
;

109 i‡–
uiZ
 !
uiA
 ) {

110 #ifde‡
SOFTFLOAT_ROUND_ODD


111 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
uiZ
 |
œ°BôMask
;

113 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

115 
uiZ
:

116 
uZ
.
ui
 = 
uiZ
;

117  
uZ
.
f
;

119 
	}
}

	@src/softfloat/source/f32_sqrt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$f32_sqπ
–
Êﬂt32_t
 
a
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°32_t
 
sigA
, 
uiZ
;

51 
exp16_sig32
 
n‹mExpSig
;

52 
öt_Á°16_t
 
expZ
;

53 
uöt_Á°32_t
 
sigZ
, 
shi·edSigZ
;

54 
uöt32_t
 
√gRem
;

55 
ui32_f32
 
uZ
;

59 
uA
.
f
 = 
a
;

60 
uiA
 = 
uA
.
ui
;

61 
signA
 = 
	`signF32UI
–
uiA
 );

62 
expA
 = 
	`expF32UI
–
uiA
 );

63 
sigA
 = 
	`‰acF32UI
–
uiA
 );

66 i‡–
expA
 == 0xFF ) {

67 i‡–
sigA
 ) {

68 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–
uiA
, 0 );

69 
uiZ
;

71 i‡–! 
signA
 )  
a
;

72 
övÆid
;

76 i‡–
signA
 ) {

77 i‡–! (
expA
 | 
sigA
ËË 
a
;

78 
övÆid
;

82 i‡–! 
expA
 ) {

83 i‡–! 
sigA
 )  
a
;

84 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigA
 );

85 
expA
 = 
n‹mExpSig
.
exp
;

86 
sigA
 = 
n‹mExpSig
.
sig
;

90 
expZ
 = ((
expA
 - 0x7F)>>1) + 0x7E;

91 
expA
 &= 1;

92 
sigA
 = (sigA | 0x00800000)<<8;

93 
sigZ
 =

94 ((
uöt_Á°64_t
Ë
sigA
 * 
	`so·Êﬂt_≠¥oxRecùSqπ32_1
–
expA
, sigA ))

96 i‡–
expA
 ) 
sigZ
 >>= 1;

99 
sigZ
 += 2;

100 i‡–(
sigZ
 & 0x3F) < 2 ) {

101 
shi·edSigZ
 = 
sigZ
>>2;

102 
√gRem
 = 
shi·edSigZ
 * shiftedSigZ;

103 
sigZ
 &= ~3;

104 i‡–
√gRem
 & 0x80000000 ) {

105 
sigZ
 |= 1;

107 i‡–
√gRem
 ) --
sigZ
;

110  
	`so·Êﬂt_roundPackToF32
–0, 
expZ
, 
sigZ
 );

113 
övÆid
:

114 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

115 
uiZ
 = 
deÁu…NaNF32UI
;

116 
uiZ
:

117 
uZ
.
ui
 = 
uiZ
;

118  
uZ
.
f
;

120 
	}
}

	@src/softfloat/source/f32_sub.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt32_t
 
	$f32_sub
–
Êﬂt32_t
 
a
, flﬂt32_à
b
 )

45 
ui32_f32
 
uA
;

46 
uöt_Á°32_t
 
uiA
;

47 
ui32_f32
 
uB
;

48 
uöt_Á°32_t
 
uiB
;

49 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 1)

50 
	`Êﬂt32_t
 (*
magsFuncPå
)–
uöt_Á°32_t
, uint_fast32_t );

53 
uA
.
f
 = 
a
;

54 
uiA
 = 
uA
.
ui
;

55 
uB
.
f
 = 
b
;

56 
uiB
 = 
uB
.
ui
;

57 #i‡
deföed
 
INLINE_LEVEL
 && (1 <= INLINE_LEVEL)

58 i‡–
	`signF32UI
–
uiA
 ^ 
uiB
 ) ) {

59  
	`so·Êﬂt_addMagsF32
–
uiA
, 
uiB
 );

61  
	`so·Êﬂt_subMagsF32
–
uiA
, 
uiB
 );

64 
magsFuncPå
 =

65 
	`signF32UI
–
uiA
 ^ 
uiB
 ) ? 
so·Êﬂt_addMagsF32
 : 
so·Êﬂt_subMagsF32
;

66  (*
magsFuncPå
)–
uiA
, 
uiB
 );

69 
	}
}

	@src/softfloat/source/f32_to_bf16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
	~<öây≥s.h
>

45 
	~<°dio.h
>

47 
bÊﬂt16_t
 
	$f32_to_bf16
–
Êﬂt32_t
 
a
 )

49 
ui32_f32
 
uA
;

50 
uöt_Á°32_t
 
uiA
;

51 
boﬁ
 
sign
;

52 
öt_Á°16_t
 
exp
;

53 
uöt_Á°32_t
 
‰ac
;

54 
comm⁄NaN
 commonNaN;

55 
uöt_Á°16_t
 
uiZ
, 
‰ac16
;

56 
ui16_bf16
 
uZ
;

60 
uA
.
f
 = 
a
;

61 
uiA
 = 
uA
.
ui
;

62 
sign
 = 
	`signF32UI
–
uiA
 );

63 
exp
 = 
	`expF32UI
–
uiA
 );

64 
‰ac
 = 
	`‰acF32UI
–
uiA
 );

68 i‡–
exp
 == 0xFF ) {

69 i‡–
‰ac
 ) {

71 
	`so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

72 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToBF16UI
–&
comm⁄NaN
 );

75 
uiZ
 = 
	`∑ckToBF16UI
–
sign
, 0xFF, 0 );

77 
uiZ
;

83 
‰ac16
 = 
‰ac
>>9 | ((frac & 0x1FF) != 0);

84 i‡–! (
exp
 | 
‰ac16
) ) {

85 
uiZ
 = 
	`∑ckToBF16UI
–
sign
, 0, 0 );

86 
uiZ
;

93 
uöt_Á°32_t
 
mask
 = 
exp
 ? 0x4000 : 0x0;

98 
‰ac16
 = føc16 << (
exp
 ? 0 : 1);

99  
	`so·Êﬂt_roundPackToBF16
–
sign
, 
exp
 - 1, 
‰ac16
 | 
mask
 );

100 
uiZ
:

101 
uZ
.
ui
 = 
uiZ
;

102  
uZ
.
f
;

104 
	}
}

	@src/softfloat/source/f32_to_extF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t
 
	$f32_to_extF80
–
Êﬂt32_t
 
a
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°32_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt128
 
uiZ
;

53 
uöt_Á°16_t
 
uiZ64
;

54 
uöt_Á°64_t
 
uiZ0
;

55 
exp16_sig32
 
n‹mExpSig
;

56 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

60 
uA
.
f
 = 
a
;

61 
uiA
 = 
uA
.
ui
;

62 
sign
 = 
	`signF32UI
–
uiA
 );

63 
exp
 = 
	`expF32UI
–
uiA
 );

64 
‰ac
 = 
	`‰acF32UI
–
uiA
 );

67 i‡–
exp
 == 0xFF ) {

68 i‡–
‰ac
 ) {

69 
	`so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

70 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToExtF80UI
–&
comm⁄NaN
 );

71 
uiZ64
 = 
uiZ
.
v64
;

72 
uiZ0
 = 
uiZ
.
v0
;

74 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x7FFF );

75 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

77 
uiZ
;

81 i‡–! 
exp
 ) {

82 i‡–! 
‰ac
 ) {

83 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

84 
uiZ0
 = 0;

85 
uiZ
;

87 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
‰ac
 );

88 
exp
 = 
n‹mExpSig
.exp;

89 
‰ac
 = 
n‹mExpSig
.
sig
;

93 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 
exp
 + 0x3F80 );

94 
uiZ0
 = (
uöt_Á°64_t
Ë(
‰ac
 | 0x00800000)<<40;

95 
uiZ
:

96 
uZ
.
s
.
signExp
 = 
uiZ64
;

97 
uZ
.
s
.
signif
 = 
uiZ0
;

98  
uZ
.
f
;

100 
	}
}

	@src/softfloat/source/f32_to_extF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f32_to_extF80M
–
Êﬂt32_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

49 *
zPå
 = 
	`f32_to_extF80
–
a
 );

51 
	}
}

55 
	$f32_to_extF80M
–
Êﬂt32_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

57 
extFlﬂt80M
 *
zSPå
;

58 
ui32_f32
 
uA
;

59 
uöt32_t
 
uiA
;

60 
boﬁ
 
sign
;

61 
öt_Á°16_t
 
exp
;

62 
uöt32_t
 
‰ac
;

63 
comm⁄NaN
 commonNaN;

64 
uöt_Á°16_t
 
uiZ64
;

65 
uöt32_t
 
uiZ32
;

66 
exp16_sig32
 
n‹mExpSig
;

70 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

71 
uA
.
f
 = 
a
;

72 
uiA
 = 
uA
.
ui
;

73 
sign
 = 
	`signF32UI
–
uiA
 );

74 
exp
 = 
	`expF32UI
–
uiA
 );

75 
‰ac
 = 
	`‰acF32UI
–
uiA
 );

78 i‡–
exp
 == 0xFF ) {

79 i‡–
‰ac
 ) {

80 
	`so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

81 
	`so·Êﬂt_comm⁄NaNToExtF80M
–&
comm⁄NaN
, 
zSPå
 );

84 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x7FFF );

85 
uiZ32
 = 0x80000000;

86 
uiZ
;

90 i‡–! 
exp
 ) {

91 i‡–! 
‰ac
 ) {

92 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

93 
uiZ32
 = 0;

94 
uiZ
;

96 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
‰ac
 );

97 
exp
 = 
n‹mExpSig
.exp;

98 
‰ac
 = 
n‹mExpSig
.
sig
;

102 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 
exp
 + 0x3F80 );

103 
uiZ32
 = 0x80000000 | (
uöt32_t
Ë
‰ac
<<8;

104 
uiZ
:

105 
zSPå
->
signExp
 = 
uiZ64
;

106 
zSPå
->
signif
 = (
uöt64_t
Ë
uiZ32
<<32;

108 
	}
}

	@src/softfloat/source/f32_to_f128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t
 
	$f32_to_f128
–
Êﬂt32_t
 
a
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°32_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt128
 
uiZ
;

53 
exp16_sig32
 
n‹mExpSig
;

54 
ui128_f128
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA
 = 
uA
.
ui
;

60 
sign
 = 
	`signF32UI
–
uiA
 );

61 
exp
 = 
	`expF32UI
–
uiA
 );

62 
‰ac
 = 
	`‰acF32UI
–
uiA
 );

65 i‡–
exp
 == 0xFF ) {

66 i‡–
‰ac
 ) {

67 
	`so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

68 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF128UI
–&
comm⁄NaN
 );

70 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 0x7FFF, 0 );

71 
uiZ
.
v0
 = 0;

73 
uiZ
;

77 i‡–! 
exp
 ) {

78 i‡–! 
‰ac
 ) {

79 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 0, 0 );

80 
uiZ
.
v0
 = 0;

81 
uiZ
;

83 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
‰ac
 );

84 
exp
 = 
n‹mExpSig
.exp - 1;

85 
‰ac
 = 
n‹mExpSig
.
sig
;

89 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 
exp
 + 0x3F80, (
uöt_Á°64_t
Ë
‰ac
<<25 );

90 
uiZ
.
v0
 = 0;

91 
uiZ
:

92 
uZ
.
ui
 = 
uiZ
;

93  
uZ
.
f
;

95 
	}
}

	@src/softfloat/source/f32_to_f128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f32_to_f128M
–
Êﬂt32_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

49 *
zPå
 = 
	`f32_to_f128
–
a
 );

51 
	}
}

55 
	$f32_to_f128M
–
Êﬂt32_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

57 
uöt32_t
 *
zWPå
;

58 
ui32_f32
 
uA
;

59 
uöt32_t
 
uiA
;

60 
boﬁ
 
sign
;

61 
öt_Á°16_t
 
exp
;

62 
uöt32_t
 
‰ac
, 
uiZ64
;

63 
comm⁄NaN
 commonNaN;

64 
uöt32_t
 
uiZ96
;

65 
exp16_sig32
 
n‹mExpSig
;

66 
uöt64_t
 
‰ac64
;

70 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

73 
uA
.
f
 = 
a
;

74 
uiA
 = 
uA
.
ui
;

75 
sign
 = 
	`signF32UI
–
uiA
 );

76 
exp
 = 
	`expF32UI
–
uiA
 );

77 
‰ac
 = 
	`‰acF32UI
–
uiA
 );

80 
uiZ64
 = 0;

81 i‡–
exp
 == 0xFF ) {

82 i‡–
‰ac
 ) {

83 
	`so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

84 
	`so·Êﬂt_comm⁄NaNToF128M
–&
comm⁄NaN
, 
zWPå
 );

87 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0x7FFF, 0 );

88 
uiZ
;

92 i‡–! 
exp
 ) {

93 i‡–! 
‰ac
 ) {

94 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0, 0 );

95 
uiZ
;

97 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
‰ac
 );

98 
exp
 = 
n‹mExpSig
.exp - 1;

99 
‰ac
 = 
n‹mExpSig
.
sig
;

103 
‰ac64
 = (
uöt64_t
Ë
‰ac
<<25;

104 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 
exp
 + 0x3F80, 
‰ac64
>>32 );

105 
uiZ64
 = 
‰ac64
;

106 
uiZ
:

107 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
uiZ96
;

108 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
uiZ64
;

109 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

110 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

112 
	}
}

	@src/softfloat/source/f32_to_f16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$f32_to_f16
–
Êﬂt32_t
 
a
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°32_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°16_t
 
uiZ
, 
‰ac16
;

53 
ui16_f16
 
uZ
;

57 
uA
.
f
 = 
a
;

58 
uiA
 = 
uA
.
ui
;

59 
sign
 = 
	`signF32UI
–
uiA
 );

60 
exp
 = 
	`expF32UI
–
uiA
 );

61 
‰ac
 = 
	`‰acF32UI
–
uiA
 );

64 i‡–
exp
 == 0xFF ) {

65 i‡–
‰ac
 ) {

66 
	`so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

67 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF16UI
–&
comm⁄NaN
 );

69 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0x1F, 0 );

71 
uiZ
;

78 
‰ac16
 = 
‰ac
>>9 | ((frac & 0x1FF) != 0);

79 i‡–! (
exp
 | 
‰ac16
) ) {

80 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0, 0 );

81 
uiZ
;

85  
	`so·Êﬂt_roundPackToF16
–
sign
, 
exp
 - 0x71, 
‰ac16
 | 0x4000 );

86 
uiZ
:

87 
uZ
.
ui
 = 
uiZ
;

88  
uZ
.
f
;

90 
	}
}

	@src/softfloat/source/f32_to_f64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$f32_to_f64
–
Êﬂt32_t
 
a
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°32_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°64_t
 
uiZ
;

53 
exp16_sig32
 
n‹mExpSig
;

54 
ui64_f64
 
uZ
;

58 
uA
.
f
 = 
a
;

59 
uiA
 = 
uA
.
ui
;

60 
sign
 = 
	`signF32UI
–
uiA
 );

61 
exp
 = 
	`expF32UI
–
uiA
 );

62 
‰ac
 = 
	`‰acF32UI
–
uiA
 );

65 i‡–
exp
 == 0xFF ) {

66 i‡–
‰ac
 ) {

67 
	`so·Êﬂt_f32UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

68 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF64UI
–&
comm⁄NaN
 );

70 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0x7FF, 0 );

72 
uiZ
;

76 i‡–! 
exp
 ) {

77 i‡–! 
‰ac
 ) {

78 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0, 0 );

79 
uiZ
;

81 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
‰ac
 );

82 
exp
 = 
n‹mExpSig
.exp - 1;

83 
‰ac
 = 
n‹mExpSig
.
sig
;

87 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 
exp
 + 0x380, (
uöt_Á°64_t
Ë
‰ac
<<29 );

88 
uiZ
:

89 
uZ
.
ui
 = 
uiZ
;

90  
uZ
.
f
;

92 
	}
}

	@src/softfloat/source/f32_to_i32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$f32_to_i32
–
Êﬂt32_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°32_t
 
sig
;

51 
uöt_Á°64_t
 
sig64
;

52 
öt_Á°16_t
 
shi·Di°
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
sign
 = 
	`signF32UI
–
uiA
 );

59 
exp
 = 
	`expF32UI
–
uiA
 );

60 
sig
 = 
	`‰acF32UI
–
uiA
 );

63 #i‡(
i32_‰omNaN
 !
i32_‰omPosOvîÊow
Ë|| (i32_‰omNaN !
i32_‰omNegOvîÊow
)

64 i‡–(
exp
 =0xFFË&& 
sig
 ) {

65 #i‡(
i32_‰omNaN
 =
i32_‰omPosOvîÊow
)

66 
sign
 = 0;

67 #ñi‡(
i32_‰omNaN
 =
i32_‰omNegOvîÊow
)

68 
sign
 = 1;

70 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

71  
i32_‰omNaN
;

77 i‡–
exp
 ) 
sig
 |= 0x00800000;

78 
sig64
 = (
uöt_Á°64_t
Ë
sig
<<32;

79 
shi·Di°
 = 0xAA - 
exp
;

80 i‡–0 < 
shi·Di°
 ) 
sig64
 = 
	`so·Êﬂt_shi·RightJam64
( sig64, shiftDist );

81  
	`so·Êﬂt_roundToI32
–
sign
, 
sig64
, 
roundögMode
, 
exa˘
 );

83 
	}
}

	@src/softfloat/source/f32_to_i32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$f32_to_i32_r_möMag
–
Êﬂt32_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°32_t
 
sig
;

50 
öt_Á°16_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
öt_Á°32_t
 
absZ
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF32UI
–
uiA
 );

59 
sig
 = 
	`‰acF32UI
–
uiA
 );

62 
shi·Di°
 = 0x9E - 
exp
;

63 i‡–32 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF32UI
–
uiA
 );

72 i‡–
shi·Di°
 <= 0 ) {

73 i‡–
uiA
 =
	`∑ckToF32UI
( 1, 0x9E, 0 ) )  -0x7FFFFFFF - 1;

74 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

76 (
exp
 =0xFFË&& 
sig
 ? 
i32_‰omNaN


77 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

81 
sig
 = (sig | 0x00800000)<<8;

82 
absZ
 = 
sig
>>
shi·Di°
;

83 i‡–
exa˘
 && ((
uöt_Á°32_t
Ë
absZ
<<
shi·Di°
 !
sig
) ) {

84 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

86  
sign
 ? -
absZ
 :ábsZ;

88 
	}
}

	@src/softfloat/source/f32_to_i64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$f32_to_i64
–
Êﬂt32_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°32_t
 
sig
;

51 
öt_Á°16_t
 
shi·Di°
;

52 #ifde‡
SOFTFLOAT_FAST_INT64


53 
uöt_Á°64_t
 
sig64
, 
exåa
;

54 
uöt64_exåa
 
sig64Exåa
;

56 
uöt32_t
 
extSig
[3];

61 
uA
.
f
 = 
a
;

62 
uiA
 = 
uA
.
ui
;

63 
sign
 = 
	`signF32UI
–
uiA
 );

64 
exp
 = 
	`expF32UI
–
uiA
 );

65 
sig
 = 
	`‰acF32UI
–
uiA
 );

68 
shi·Di°
 = 0xBE - 
exp
;

69 i‡–
shi·Di°
 < 0 ) {

70 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

72 (
exp
 =0xFFË&& 
sig
 ? 
i64_‰omNaN


73 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

77 i‡–
exp
 ) 
sig
 |= 0x00800000;

78 #ifde‡
SOFTFLOAT_FAST_INT64


79 
sig64
 = (
uöt_Á°64_t
Ë
sig
<<40;

80 
exåa
 = 0;

81 i‡–
shi·Di°
 ) {

82 
sig64Exåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig64
, 0, 
shi·Di°
 );

83 
sig64
 = 
sig64Exåa
.
v
;

84 
exåa
 = 
sig64Exåa
.extra;

86  
	`so·Êﬂt_roundToI64
–
sign
, 
sig64
, 
exåa
, 
roundögMode
, 
exa˘
 );

88 
extSig
[
	`ödexW‹d
–3, 2 )] = 
sig
<<8;

89 
extSig
[
	`ödexW‹d
( 3, 1 )] = 0;

90 
extSig
[
	`ödexW‹d
( 3, 0 )] = 0;

91 i‡–
shi·Di°
 ) 
	`so·Êﬂt_shi·RightJam96M
–
extSig
, shiftDist,ÉxtSig );

92  
	`so·Êﬂt_roundMToI64
–
sign
, 
extSig
, 
roundögMode
, 
exa˘
 );

95 
	}
}

	@src/softfloat/source/f32_to_i64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$f32_to_i64_r_möMag
–
Êﬂt32_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°32_t
 
sig
;

50 
öt_Á°16_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°64_t
 
sig64
;

53 
öt_Á°64_t
 
absZ
;

57 
uA
.
f
 = 
a
;

58 
uiA
 = 
uA
.
ui
;

59 
exp
 = 
	`expF32UI
–
uiA
 );

60 
sig
 = 
	`‰acF32UI
–
uiA
 );

63 
shi·Di°
 = 0xBE - 
exp
;

64 i‡–64 <
shi·Di°
 ) {

65 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

66 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

72 
sign
 = 
	`signF32UI
–
uiA
 );

73 i‡–
shi·Di°
 <= 0 ) {

74 i‡–
uiA
 =
	`∑ckToF32UI
( 1, 0xBE, 0 ) ) {

75  -
	`INT64_C
( 0x7FFFFFFFFFFFFFFF ) - 1;

77 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

79 (
exp
 =0xFFË&& 
sig
 ? 
i64_‰omNaN


80 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

84 
sig
 |= 0x00800000;

85 
sig64
 = (
uöt_Á°64_t
Ë
sig
<<40;

86 
absZ
 = 
sig64
>>
shi·Di°
;

87 
shi·Di°
 = 40 - shiftDist;

88 i‡–
exa˘
 && (
shi·Di°
 < 0Ë&& (
uöt32_t
Ë(
sig
<<(shiftDist & 31)) ) {

89 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

91  
sign
 ? -
absZ
 :ábsZ;

93 
	}
}

	@src/softfloat/source/f32_to_ui32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t
 
	$f32_to_ui32
–
Êﬂt32_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°32_t
 
sig
;

51 
uöt_Á°64_t
 
sig64
;

52 
öt_Á°16_t
 
shi·Di°
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
sign
 = 
	`signF32UI
–
uiA
 );

59 
exp
 = 
	`expF32UI
–
uiA
 );

60 
sig
 = 
	`‰acF32UI
–
uiA
 );

63 #i‡(
ui32_‰omNaN
 !
ui32_‰omPosOvîÊow
Ë|| (ui32_‰omNaN !
ui32_‰omNegOvîÊow
)

64 i‡–(
exp
 =0xFFË&& 
sig
 ) {

65 #i‡(
ui32_‰omNaN
 =
ui32_‰omPosOvîÊow
)

66 
sign
 = 0;

67 #ñi‡(
ui32_‰omNaN
 =
ui32_‰omNegOvîÊow
)

68 
sign
 = 1;

70 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

71  
ui32_‰omNaN
;

77 i‡–
exp
 ) 
sig
 |= 0x00800000;

78 
sig64
 = (
uöt_Á°64_t
Ë
sig
<<32;

79 
shi·Di°
 = 0xAA - 
exp
;

80 i‡–0 < 
shi·Di°
 ) 
sig64
 = 
	`so·Êﬂt_shi·RightJam64
( sig64, shiftDist );

81  
	`so·Êﬂt_roundToUI32
–
sign
, 
sig64
, 
roundögMode
, 
exa˘
 );

83 
	}
}

	@src/softfloat/source/f32_to_ui32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t
 
	$f32_to_ui32_r_möMag
–
Êﬂt32_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°32_t
 
sig
;

50 
öt_Á°16_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°32_t
 
z
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF32UI
–
uiA
 );

59 
sig
 = 
	`‰acF32UI
–
uiA
 );

62 
shi·Di°
 = 0x9E - 
exp
;

63 i‡–32 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF32UI
–
uiA
 );

72 i‡–
sign
 || (
shi·Di°
 < 0) ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0xFFË&& 
sig
 ? 
ui32_‰omNaN


76 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

80 
sig
 = (sig | 0x00800000)<<8;

81 
z
 = 
sig
>>
shi·Di°
;

82 i‡–
exa˘
 && (
z
<<
shi·Di°
 !
sig
) ) {

83 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

85  
z
;

87 
	}
}

	@src/softfloat/source/f32_to_ui64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t
 
	$f32_to_ui64
–
Êﬂt32_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°32_t
 
sig
;

51 
öt_Á°16_t
 
shi·Di°
;

52 #ifde‡
SOFTFLOAT_FAST_INT64


53 
uöt_Á°64_t
 
sig64
, 
exåa
;

54 
uöt64_exåa
 
sig64Exåa
;

56 
uöt32_t
 
extSig
[3];

61 
uA
.
f
 = 
a
;

62 
uiA
 = 
uA
.
ui
;

63 
sign
 = 
	`signF32UI
–
uiA
 );

64 
exp
 = 
	`expF32UI
–
uiA
 );

65 
sig
 = 
	`‰acF32UI
–
uiA
 );

68 
shi·Di°
 = 0xBE - 
exp
;

69 i‡–
shi·Di°
 < 0 ) {

70 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

72 (
exp
 =0xFFË&& 
sig
 ? 
ui64_‰omNaN


73 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

77 i‡–
exp
 ) 
sig
 |= 0x00800000;

78 #ifde‡
SOFTFLOAT_FAST_INT64


79 
sig64
 = (
uöt_Á°64_t
Ë
sig
<<40;

80 
exåa
 = 0;

81 i‡–
shi·Di°
 ) {

82 
sig64Exåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig64
, 0, 
shi·Di°
 );

83 
sig64
 = 
sig64Exåa
.
v
;

84 
exåa
 = 
sig64Exåa
.extra;

86  
	`so·Êﬂt_roundToUI64
–
sign
, 
sig64
, 
exåa
, 
roundögMode
, 
exa˘
 );

88 
extSig
[
	`ödexW‹d
–3, 2 )] = 
sig
<<8;

89 
extSig
[
	`ödexW‹d
( 3, 1 )] = 0;

90 
extSig
[
	`ödexW‹d
( 3, 0 )] = 0;

91 i‡–
shi·Di°
 ) 
	`so·Êﬂt_shi·RightJam96M
–
extSig
, shiftDist,ÉxtSig );

92  
	`so·Êﬂt_roundMToUI64
–
sign
, 
extSig
, 
roundögMode
, 
exa˘
 );

95 
	}
}

	@src/softfloat/source/f32_to_ui64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t
 
	$f32_to_ui64_r_möMag
–
Êﬂt32_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui32_f32
 
uA
;

47 
uöt_Á°32_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°32_t
 
sig
;

50 
öt_Á°16_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°64_t
 
sig64
, 
z
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF32UI
–
uiA
 );

59 
sig
 = 
	`‰acF32UI
–
uiA
 );

62 
shi·Di°
 = 0xBE - 
exp
;

63 i‡–64 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF32UI
–
uiA
 );

72 i‡–
sign
 || (
shi·Di°
 < 0) ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0xFFË&& 
sig
 ? 
ui64_‰omNaN


76 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

80 
sig
 |= 0x00800000;

81 
sig64
 = (
uöt_Á°64_t
Ë
sig
<<40;

82 
z
 = 
sig64
>>
shi·Di°
;

83 
shi·Di°
 = 40 - shiftDist;

84 i‡–
exa˘
 && (
shi·Di°
 < 0Ë&& (
uöt32_t
Ë(
sig
<<(shiftDist & 31)) ) {

85 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

87  
z
;

89 
	}
}

	@src/softfloat/source/f64_add.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt64_t
 
	$f64_add
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

45 
ui64_f64
 
uA
;

46 
uöt_Á°64_t
 
uiA
;

47 
boﬁ
 
signA
;

48 
ui64_f64
 
uB
;

49 
uöt_Á°64_t
 
uiB
;

50 
boﬁ
 
signB
;

51 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

52 
	`Êﬂt64_t
 (*
magsFuncPå
)–
uöt_Á°64_t
, uöt_Á°64_t, 
boﬁ
 );

55 
uA
.
f
 = 
a
;

56 
uiA
 = 
uA
.
ui
;

57 
signA
 = 
	`signF64UI
–
uiA
 );

58 
uB
.
f
 = 
b
;

59 
uiB
 = 
uB
.
ui
;

60 
signB
 = 
	`signF64UI
–
uiB
 );

61 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

62 i‡–
signA
 =
signB
 ) {

63  
	`so·Êﬂt_addMagsF64
–
uiA
, 
uiB
, 
signA
 );

65  
	`so·Êﬂt_subMagsF64
–
uiA
, 
uiB
, 
signA
 );

68 
magsFuncPå
 =

69 (
signA
 =
signB
Ë? 
so·Êﬂt_addMagsF64
 : 
so·Êﬂt_subMagsF64
;

70  (*
magsFuncPå
)–
uiA
, 
uiB
, 
signA
 );

73 
	}
}

	@src/softfloat/source/f64_div.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$f64_div
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°64_t
 
sigA
;

51 
ui64_f64
 
uB
;

52 
uöt_Á°64_t
 
uiB
;

53 
boﬁ
 
signB
;

54 
öt_Á°16_t
 
expB
;

55 
uöt_Á°64_t
 
sigB
;

56 
boﬁ
 
signZ
;

57 
exp16_sig64
 
n‹mExpSig
;

58 
öt_Á°16_t
 
expZ
;

59 
uöt32_t
 
ªcù32
, 
sig32Z
, 
doubÀTîm
;

60 
uöt_Á°64_t
 
ªm
;

61 
uöt32_t
 
q
;

62 
uöt_Á°64_t
 
sigZ
;

63 
uöt_Á°64_t
 
uiZ
;

64 
ui64_f64
 
uZ
;

68 
uA
.
f
 = 
a
;

69 
uiA
 = 
uA
.
ui
;

70 
signA
 = 
	`signF64UI
–
uiA
 );

71 
expA
 = 
	`expF64UI
–
uiA
 );

72 
sigA
 = 
	`‰acF64UI
–
uiA
 );

73 
uB
.
f
 = 
b
;

74 
uiB
 = 
uB
.
ui
;

75 
signB
 = 
	`signF64UI
–
uiB
 );

76 
expB
 = 
	`expF64UI
–
uiB
 );

77 
sigB
 = 
	`‰acF64UI
–
uiB
 );

78 
signZ
 = 
signA
 ^ 
signB
;

81 i‡–
expA
 == 0x7FF ) {

82 i‡–
sigA
 ) 
¥›ag©eNaN
;

83 i‡–
expB
 == 0x7FF ) {

84 i‡–
sigB
 ) 
¥›ag©eNaN
;

85 
övÆid
;

87 
öföôy
;

89 i‡–
expB
 == 0x7FF ) {

90 i‡–
sigB
 ) 
¥›ag©eNaN
;

91 
zîo
;

95 i‡–! 
expB
 ) {

96 i‡–! 
sigB
 ) {

97 i‡–! (
expA
 | 
sigA
ËË
övÆid
;

98 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_öföôe
 );

99 
öföôy
;

101 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigB
 );

102 
expB
 = 
n‹mExpSig
.
exp
;

103 
sigB
 = 
n‹mExpSig
.
sig
;

105 i‡–! 
expA
 ) {

106 i‡–! 
sigA
 ) 
zîo
;

107 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigA
 );

108 
expA
 = 
n‹mExpSig
.
exp
;

109 
sigA
 = 
n‹mExpSig
.
sig
;

113 
expZ
 = 
expA
 - 
expB
 + 0x3FE;

114 
sigA
 |
	`UINT64_C
( 0x0010000000000000 );

115 
sigB
 |
	`UINT64_C
( 0x0010000000000000 );

116 i‡–
sigA
 < 
sigB
 ) {

117 --
expZ
;

118 
sigA
 <<= 11;

120 
sigA
 <<= 10;

122 
sigB
 <<= 11;

123 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
sigB
>>32 ) - 2;

124 
sig32Z
 = ((
uöt32_t
Ë(
sigA
>>32Ë* (
uöt_Á°64_t
Ë
ªcù32
)>>32;

125 
doubÀTîm
 = 
sig32Z
<<1;

126 
ªm
 =

127 ((
sigA
 - (
uöt_Á°64_t
Ë
doubÀTîm
 * (
uöt32_t
Ë(
sigB
>>32))<<28)

128 - (
uöt_Á°64_t
Ë
doubÀTîm
 * ((
uöt32_t
Ë
sigB
>>4);

129 
q
 = (((
uöt32_t
Ë(
ªm
>>32Ë* (
uöt_Á°64_t
Ë
ªcù32
)>>32) + 4;

130 
sigZ
 = ((
uöt_Á°64_t
Ë
sig32Z
<<32Ë+ ((uöt_Á°64_tË
q
<<4);

133 i‡–(
sigZ
 & 0x1FF) < 4<<4 ) {

134 
q
 &= ~7;

135 
sigZ
 &~(
uöt_Á°64_t
) 0x7F;

136 
doubÀTîm
 = 
q
<<1;

137 
ªm
 =

138 ((
ªm
 - (
uöt_Á°64_t
Ë
doubÀTîm
 * (
uöt32_t
Ë(
sigB
>>32))<<28)

139 - (
uöt_Á°64_t
Ë
doubÀTîm
 * ((
uöt32_t
Ë
sigB
>>4);

140 i‡–
ªm
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

141 
sigZ
 -= 1<<7;

143 i‡–
ªm
 ) 
sigZ
 |= 1;

146  
	`so·Êﬂt_roundPackToF64
–
signZ
, 
expZ
, 
sigZ
 );

149 
¥›ag©eNaN
:

150 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 
uiB
 );

151 
uiZ
;

154 
övÆid
:

155 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

156 
uiZ
 = 
deÁu…NaNF64UI
;

157 
uiZ
;

160 
öföôy
:

161 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 0x7FF, 0 );

162 
uiZ
;

165 
zîo
:

166 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 0, 0 );

167 
uiZ
:

168 
uZ
.
ui
 = 
uiZ
;

169  
uZ
.
f
;

171 
	}
}

	@src/softfloat/source/f64_eq.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f64_eq
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
ui64_f64
 
uB
;

49 
uöt_Á°64_t
 
uiB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF64UI
–
uiA
 ) || isNaNF64UI–
uiB
 ) ) {

57 
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 ) || so·Êﬂt_isSigNaNF64UI–
uiB
 )

59 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

61  
Ál£
;

63  (
uiA
 =
uiB
Ë|| ! ((uiA | uiBË& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ));

65 
	}
}

	@src/softfloat/source/f64_eq_signaling.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f64_eq_sig«lög
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

45 
ui64_f64
 
uA
;

46 
uöt_Á°64_t
 
uiA
;

47 
ui64_f64
 
uB
;

48 
uöt_Á°64_t
 
uiB
;

50 
uA
.
f
 = 
a
;

51 
uiA
 = 
uA
.
ui
;

52 
uB
.
f
 = 
b
;

53 
uiB
 = 
uB
.
ui
;

54 i‡–
	`isNaNF64UI
–
uiA
 ) || isNaNF64UI–
uiB
 ) ) {

55 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

56  
Ál£
;

58  (
uiA
 =
uiB
Ë|| ! ((uiA | uiBË& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ));

60 
	}
}

	@src/softfloat/source/f64_isSignalingNaN.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f64_isSig«lögNaN
–
Êﬂt64_t
 
a
 )

45 
ui64_f64
 
uA
;

47 
uA
.
f
 = 
a
;

48  
	`so·Êﬂt_isSigNaNF64UI
–
uA
.
ui
 );

50 
	}
}

	@src/softfloat/source/f64_le.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f64_À
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

45 
ui64_f64
 
uA
;

46 
uöt_Á°64_t
 
uiA
;

47 
ui64_f64
 
uB
;

48 
uöt_Á°64_t
 
uiB
;

49 
boﬁ
 
signA
, 
signB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF64UI
–
uiA
 ) || isNaNF64UI–
uiB
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57  
Ál£
;

59 
signA
 = 
	`signF64UI
–
uiA
 );

60 
signB
 = 
	`signF64UI
–
uiB
 );

62 (
signA
 !
signB
)

63 ? 
signA
 || ! ((
uiA
 | 
uiB
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

64 : (
uiA
 =
uiB
Ë|| (
signA
 ^ (uiA < uiB));

66 
	}
}

	@src/softfloat/source/f64_le_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f64_À_quõt
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
ui64_f64
 
uB
;

49 
uöt_Á°64_t
 
uiB
;

50 
boﬁ
 
signA
, 
signB
;

52 
uA
.
f
 = 
a
;

53 
uiA
 = 
uA
.
ui
;

54 
uB
.
f
 = 
b
;

55 
uiB
 = 
uB
.
ui
;

56 i‡–
	`isNaNF64UI
–
uiA
 ) || isNaNF64UI–
uiB
 ) ) {

58 
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 ) || so·Êﬂt_isSigNaNF64UI–
uiB
 )

60 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62  
Ál£
;

64 
signA
 = 
	`signF64UI
–
uiA
 );

65 
signB
 = 
	`signF64UI
–
uiB
 );

67 (
signA
 !
signB
)

68 ? 
signA
 || ! ((
uiA
 | 
uiB
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

69 : (
uiA
 =
uiB
Ë|| (
signA
 ^ (uiA < uiB));

71 
	}
}

	@src/softfloat/source/f64_lt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
boﬁ
 
	$f64_…
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

45 
ui64_f64
 
uA
;

46 
uöt_Á°64_t
 
uiA
;

47 
ui64_f64
 
uB
;

48 
uöt_Á°64_t
 
uiB
;

49 
boﬁ
 
signA
, 
signB
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 i‡–
	`isNaNF64UI
–
uiA
 ) || isNaNF64UI–
uiB
 ) ) {

56 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

57  
Ál£
;

59 
signA
 = 
	`signF64UI
–
uiA
 );

60 
signB
 = 
	`signF64UI
–
uiB
 );

62 (
signA
 !
signB
)

63 ? 
signA
 && ((
uiA
 | 
uiB
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

64 : (
uiA
 !
uiB
Ë&& (
signA
 ^ (uiA < uiB));

66 
	}
}

	@src/softfloat/source/f64_lt_quiet.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
boﬁ
 
	$f64_…_quõt
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
ui64_f64
 
uB
;

49 
uöt_Á°64_t
 
uiB
;

50 
boﬁ
 
signA
, 
signB
;

52 
uA
.
f
 = 
a
;

53 
uiA
 = 
uA
.
ui
;

54 
uB
.
f
 = 
b
;

55 
uiB
 = 
uB
.
ui
;

56 i‡–
	`isNaNF64UI
–
uiA
 ) || isNaNF64UI–
uiB
 ) ) {

58 
	`so·Êﬂt_isSigNaNF64UI
–
uiA
 ) || so·Êﬂt_isSigNaNF64UI–
uiB
 )

60 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

62  
Ál£
;

64 
signA
 = 
	`signF64UI
–
uiA
 );

65 
signB
 = 
	`signF64UI
–
uiB
 );

67 (
signA
 !
signB
)

68 ? 
signA
 && ((
uiA
 | 
uiB
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

69 : (
uiA
 !
uiB
Ë&& (
signA
 ^ (uiA < uiB));

71 
	}
}

	@src/softfloat/source/f64_mul.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$f64_mul
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°64_t
 
sigA
;

51 
ui64_f64
 
uB
;

52 
uöt_Á°64_t
 
uiB
;

53 
boﬁ
 
signB
;

54 
öt_Á°16_t
 
expB
;

55 
uöt_Á°64_t
 
sigB
;

56 
boﬁ
 
signZ
;

57 
uöt_Á°64_t
 
magBôs
;

58 
exp16_sig64
 
n‹mExpSig
;

59 
öt_Á°16_t
 
expZ
;

60 #ifde‡
SOFTFLOAT_FAST_INT64


61 
uöt128
 
sig128Z
;

63 
uöt32_t
 
sig128Z
[4];

65 
uöt_Á°64_t
 
sigZ
, 
uiZ
;

66 
ui64_f64
 
uZ
;

70 
uA
.
f
 = 
a
;

71 
uiA
 = 
uA
.
ui
;

72 
signA
 = 
	`signF64UI
–
uiA
 );

73 
expA
 = 
	`expF64UI
–
uiA
 );

74 
sigA
 = 
	`‰acF64UI
–
uiA
 );

75 
uB
.
f
 = 
b
;

76 
uiB
 = 
uB
.
ui
;

77 
signB
 = 
	`signF64UI
–
uiB
 );

78 
expB
 = 
	`expF64UI
–
uiB
 );

79 
sigB
 = 
	`‰acF64UI
–
uiB
 );

80 
signZ
 = 
signA
 ^ 
signB
;

83 i‡–
expA
 == 0x7FF ) {

84 i‡–
sigA
 || ((
expB
 =0x7FFË&& 
sigB
ËË
¥›ag©eNaN
;

85 
magBôs
 = 
expB
 | 
sigB
;

86 
öfArg
;

88 i‡–
expB
 == 0x7FF ) {

89 i‡–
sigB
 ) 
¥›ag©eNaN
;

90 
magBôs
 = 
expA
 | 
sigA
;

91 
öfArg
;

95 i‡–! 
expA
 ) {

96 i‡–! 
sigA
 ) 
zîo
;

97 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigA
 );

98 
expA
 = 
n‹mExpSig
.
exp
;

99 
sigA
 = 
n‹mExpSig
.
sig
;

101 i‡–! 
expB
 ) {

102 i‡–! 
sigB
 ) 
zîo
;

103 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigB
 );

104 
expB
 = 
n‹mExpSig
.
exp
;

105 
sigB
 = 
n‹mExpSig
.
sig
;

109 
expZ
 = 
expA
 + 
expB
 - 0x3FF;

110 
sigA
 = (sigA | 
	`UINT64_C
( 0x0010000000000000 ))<<10;

111 
sigB
 = (sigB | 
	`UINT64_C
( 0x0010000000000000 ))<<11;

112 #ifde‡
SOFTFLOAT_FAST_INT64


113 
sig128Z
 = 
	`so·Êﬂt_mul64To128
–
sigA
, 
sigB
 );

114 
sigZ
 = 
sig128Z
.
v64
 | (sig128Z.
v0
 != 0);

116 
	`so·Êﬂt_mul64To128M
–
sigA
, 
sigB
, 
sig128Z
 );

117 
sigZ
 =

118 (
uöt64_t
Ë
sig128Z
[
	`ödexW‹d
( 4, 3 )]<<32 | sig128Z[indexWord( 4, 2 )];

119 i‡–
sig128Z
[
	`ödexW‹d
–4, 1 )] || sig128Z[ödexW‹d–4, 0 )] ) 
sigZ
 |= 1;

121 i‡–
sigZ
 < 
	`UINT64_C
( 0x4000000000000000 ) ) {

122 --
expZ
;

123 
sigZ
 <<= 1;

125  
	`so·Êﬂt_roundPackToF64
–
signZ
, 
expZ
, 
sigZ
 );

128 
¥›ag©eNaN
:

129 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 
uiB
 );

130 
uiZ
;

133 
öfArg
:

134 i‡–! 
magBôs
 ) {

135 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

136 
uiZ
 = 
deÁu…NaNF64UI
;

138 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 0x7FF, 0 );

140 
uiZ
;

143 
zîo
:

144 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 0, 0 );

145 
uiZ
:

146 
uZ
.
ui
 = 
uiZ
;

147  
uZ
.
f
;

149 
	}
}

	@src/softfloat/source/f64_mulAdd.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt64_t
 
	$f64_mulAdd
–
Êﬂt64_t
 
a
, flﬂt64_à
b
, flﬂt64_à
c
 )

44 
ui64_f64
 
uA
;

45 
uöt_Á°64_t
 
uiA
;

46 
ui64_f64
 
uB
;

47 
uöt_Á°64_t
 
uiB
;

48 
ui64_f64
 
uC
;

49 
uöt_Á°64_t
 
uiC
;

51 
uA
.
f
 = 
a
;

52 
uiA
 = 
uA
.
ui
;

53 
uB
.
f
 = 
b
;

54 
uiB
 = 
uB
.
ui
;

55 
uC
.
f
 = 
c
;

56 
uiC
 = 
uC
.
ui
;

57  
	`so·Êﬂt_mulAddF64
–
uiA
, 
uiB
, 
uiC
, 0 );

59 
	}
}

	@src/softfloat/source/f64_rem.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$f64_ªm
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°64_t
 
sigA
;

51 
ui64_f64
 
uB
;

52 
uöt_Á°64_t
 
uiB
;

53 
öt_Á°16_t
 
expB
;

54 
uöt_Á°64_t
 
sigB
;

55 
exp16_sig64
 
n‹mExpSig
;

56 
uöt64_t
 
ªm
;

57 
öt_Á°16_t
 
expDiff
;

58 
uöt32_t
 
q
, 
ªcù32
;

59 
uöt_Á°64_t
 
q64
;

60 
uöt64_t
 
ÆtRem
, 
mónRem
;

61 
boﬁ
 
signRem
;

62 
uöt_Á°64_t
 
uiZ
;

63 
ui64_f64
 
uZ
;

67 
uA
.
f
 = 
a
;

68 
uiA
 = 
uA
.
ui
;

69 
signA
 = 
	`signF64UI
–
uiA
 );

70 
expA
 = 
	`expF64UI
–
uiA
 );

71 
sigA
 = 
	`‰acF64UI
–
uiA
 );

72 
uB
.
f
 = 
b
;

73 
uiB
 = 
uB
.
ui
;

74 
expB
 = 
	`expF64UI
–
uiB
 );

75 
sigB
 = 
	`‰acF64UI
–
uiB
 );

78 i‡–
expA
 == 0x7FF ) {

79 i‡–
sigA
 || ((
expB
 =0x7FFË&& 
sigB
ËË
¥›ag©eNaN
;

80 
övÆid
;

82 i‡–
expB
 == 0x7FF ) {

83 i‡–
sigB
 ) 
¥›ag©eNaN
;

84  
a
;

88 i‡–
expA
 < 
expB
 - 1 )  
a
;

91 i‡–! 
expB
 ) {

92 i‡–! 
sigB
 ) 
övÆid
;

93 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigB
 );

94 
expB
 = 
n‹mExpSig
.
exp
;

95 
sigB
 = 
n‹mExpSig
.
sig
;

97 i‡–! 
expA
 ) {

98 i‡–! 
sigA
 )  
a
;

99 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigA
 );

100 
expA
 = 
n‹mExpSig
.
exp
;

101 
sigA
 = 
n‹mExpSig
.
sig
;

105 
ªm
 = 
sigA
 | 
	`UINT64_C
( 0x0010000000000000 );

106 
sigB
 |
	`UINT64_C
( 0x0010000000000000 );

107 
expDiff
 = 
expA
 - 
expB
;

108 i‡–
expDiff
 < 1 ) {

109 i‡–
expDiff
 < -1 )  
a
;

110 
sigB
 <<= 9;

111 i‡–
expDiff
 ) {

112 
ªm
 <<= 8;

113 
q
 = 0;

115 
ªm
 <<= 9;

116 
q
 = (
sigB
 <
ªm
);

117 i‡–
q
 ) 
ªm
 -
sigB
;

120 
ªcù32
 = 
	`so·Êﬂt_≠¥oxRecù32_1
–
sigB
>>21 );

125 
ªm
 <<= 9;

126 
expDiff
 -= 30;

132 
sigB
 <<= 9;

134 
q64
 = (
uöt32_t
Ë(
ªm
>>32Ë* (
uöt_Á°64_t
Ë
ªcù32
;

135 i‡–
expDiff
 < 0 ) ;

136 
q
 = (
q64
 + 0x80000000)>>32;

137 #ifde‡
SOFTFLOAT_FAST_INT64


138 
ªm
 <<= 29;

140 
ªm
 = (
uöt_Á°64_t
Ë(
uöt32_t
) (rem>>3)<<32;

142 
ªm
 -
q
 * (
uöt64_t
Ë
sigB
;

143 i‡–
ªm
 & 
	`UINT64_C
–0x8000000000000000 ) )Ñem +
sigB
;

144 
expDiff
 -= 29;

149 
q
 = (
uöt32_t
Ë(
q64
>>32)>>(~
expDiff
 & 31);

150 
ªm
 = (ªm<<(
expDiff
 + 30)Ë- 
q
 * (
uöt64_t
Ë
sigB
;

151 i‡–
ªm
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

152 
ÆtRem
 = 
ªm
 + 
sigB
;

153 
£À˘Rem
;

159 
ÆtRem
 = 
ªm
;

160 ++
q
;

161 
ªm
 -
sigB
;

162 }  ! (
ªm
 & 
	`UINT64_C
( 0x8000000000000000 )) );

163 
£À˘Rem
:

164 
mónRem
 = 
ªm
 + 
ÆtRem
;

166 (
mónRem
 & 
	`UINT64_C
–0x8000000000000000 )Ë|| (! mónRem && (
q
 & 1))

168 
ªm
 = 
ÆtRem
;

170 
signRem
 = 
signA
;

171 i‡–
ªm
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

172 
signRem
 = ! signRem;

173 
ªm
 = -rem;

175  
	`so·Êﬂt_n‹mRoundPackToF64
–
signRem
, 
expB
, 
ªm
 );

178 
¥›ag©eNaN
:

179 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 
uiB
 );

180 
uiZ
;

181 
övÆid
:

182 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

183 
uiZ
 = 
deÁu…NaNF64UI
;

184 
uiZ
:

185 
uZ
.
ui
 = 
uiZ
;

186  
uZ
.
f
;

188 
	}
}

	@src/softfloat/source/f64_roundToInt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$f64_roundToI¡
–
Êﬂt64_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°64_t
 
uiZ
, 
œ°BôMask
, 
roundBôsMask
;

50 
ui64_f64
 
uZ
;

54 
uA
.
f
 = 
a
;

55 
uiA
 = 
uA
.
ui
;

56 
exp
 = 
	`expF64UI
–
uiA
 );

59 i‡–
exp
 <= 0x3FE ) {

60 i‡–!(
uiA
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF )ËË 
a
;

61 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

62 
uiZ
 = 
uiA
 & 
	`∑ckToF64UI
( 1, 0, 0 );

63  
roundögMode
 ) {

64 
so·Êﬂt_round_√¨_eví
:

65 i‡–!
	`‰acF64UI
–
uiA
 ) ) ;

66 
so·Êﬂt_round_√¨_maxMag
:

67 i‡–
exp
 =0x3FE ) 
uiZ
 |
	`∑ckToF64UI
( 0, 0x3FF, 0 );

69 
so·Êﬂt_round_mö
:

70 i‡–
uiZ
 ) uiZ = 
	`∑ckToF64UI
( 1, 0x3FF, 0 );

72 
so·Êﬂt_round_max
:

73 i‡–!
uiZ
 ) uiZ = 
	`∑ckToF64UI
( 0, 0x3FF, 0 );

75 #ifde‡
SOFTFLOAT_ROUND_ODD


76 
so·Êﬂt_round_odd
:

77 
uiZ
 |
	`∑ckToF64UI
( 0, 0x3FF, 0 );

81 
uiZ
;

85 i‡–0x433 <
exp
 ) {

86 i‡–(
exp
 =0x7FFË&& 
	`‰acF64UI
–
uiA
 ) ) {

87 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 0 );

88 
uiZ
;

90  
a
;

94 
uiZ
 = 
uiA
;

95 
œ°BôMask
 = (
uöt_Á°64_t
Ë1<<(0x433 - 
exp
);

96 
roundBôsMask
 = 
œ°BôMask
 - 1;

97 i‡–
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
 ) {

98 
uiZ
 +
œ°BôMask
>>1;

99 } i‡–
roundögMode
 =
so·Êﬂt_round_√¨_eví
 ) {

100 
uiZ
 +
œ°BôMask
>>1;

101 i‡–!(
uiZ
 & 
roundBôsMask
ËËuiZ &~
œ°BôMask
;

103 
roundögMode


104 =(
	`signF64UI
–
uiZ
 ) ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
)

106 
uiZ
 +
roundBôsMask
;

108 
uiZ
 &~
roundBôsMask
;

109 i‡–
uiZ
 !
uiA
 ) {

110 #ifde‡
SOFTFLOAT_ROUND_ODD


111 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
uiZ
 |
œ°BôMask
;

113 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

115 
uiZ
:

116 
uZ
.
ui
 = 
uiZ
;

117  
uZ
.
f
;

119 
	}
}

	@src/softfloat/source/f64_sqrt.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t
 
	$f64_sqπ
–
Êﬂt64_t
 
a
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°64_t
 
sigA
, 
uiZ
;

51 
exp16_sig64
 
n‹mExpSig
;

52 
öt_Á°16_t
 
expZ
;

53 
uöt32_t
 
sig32A
, 
ªcùSqπ32
, 
sig32Z
;

54 
uöt_Á°64_t
 
ªm
;

55 
uöt32_t
 
q
;

56 
uöt_Á°64_t
 
sigZ
, 
shi·edSigZ
;

57 
ui64_f64
 
uZ
;

61 
uA
.
f
 = 
a
;

62 
uiA
 = 
uA
.
ui
;

63 
signA
 = 
	`signF64UI
–
uiA
 );

64 
expA
 = 
	`expF64UI
–
uiA
 );

65 
sigA
 = 
	`‰acF64UI
–
uiA
 );

68 i‡–
expA
 == 0x7FF ) {

69 i‡–
sigA
 ) {

70 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 0 );

71 
uiZ
;

73 i‡–! 
signA
 )  
a
;

74 
övÆid
;

78 i‡–
signA
 ) {

79 i‡–! (
expA
 | 
sigA
ËË 
a
;

80 
övÆid
;

84 i‡–! 
expA
 ) {

85 i‡–! 
sigA
 )  
a
;

86 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigA
 );

87 
expA
 = 
n‹mExpSig
.
exp
;

88 
sigA
 = 
n‹mExpSig
.
sig
;

95 
expZ
 = ((
expA
 - 0x3FF)>>1) + 0x3FE;

96 
expA
 &= 1;

97 
sigA
 |
	`UINT64_C
( 0x0010000000000000 );

98 
sig32A
 = 
sigA
>>21;

99 
ªcùSqπ32
 = 
	`so·Êﬂt_≠¥oxRecùSqπ32_1
–
expA
, 
sig32A
 );

100 
sig32Z
 = ((
uöt_Á°64_t
Ë
sig32A
 * 
ªcùSqπ32
)>>32;

101 i‡–
expA
 ) {

102 
sigA
 <<= 8;

103 
sig32Z
 >>= 1;

105 
sigA
 <<= 9;

107 
ªm
 = 
sigA
 - (
uöt_Á°64_t
Ë
sig32Z
 * sig32Z;

108 
q
 = ((
uöt32_t
Ë(
ªm
>>2Ë* (
uöt_Á°64_t
Ë
ªcùSqπ32
)>>32;

109 
sigZ
 = ((
uöt_Á°64_t
Ë
sig32Z
<<32 | 1<<5Ë+ ((uöt_Á°64_tË
q
<<3);

112 i‡–(
sigZ
 & 0x1FF) < 0x22 ) {

113 
sigZ
 &~(
uöt_Á°64_t
) 0x3F;

114 
shi·edSigZ
 = 
sigZ
>>6;

115 
ªm
 = (
sigA
<<52Ë- 
shi·edSigZ
 * shiftedSigZ;

116 i‡–
ªm
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

117 --
sigZ
;

119 i‡–
ªm
 ) 
sigZ
 |= 1;

122  
	`so·Êﬂt_roundPackToF64
–0, 
expZ
, 
sigZ
 );

125 
övÆid
:

126 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

127 
uiZ
 = 
deÁu…NaNF64UI
;

128 
uiZ
:

129 
uZ
.
ui
 = 
uiZ
;

130  
uZ
.
f
;

132 
	}
}

	@src/softfloat/source/f64_sub.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt64_t
 
	$f64_sub
–
Êﬂt64_t
 
a
, flﬂt64_à
b
 )

45 
ui64_f64
 
uA
;

46 
uöt_Á°64_t
 
uiA
;

47 
boﬁ
 
signA
;

48 
ui64_f64
 
uB
;

49 
uöt_Á°64_t
 
uiB
;

50 
boﬁ
 
signB
;

51 #i‡! 
deföed
 
INLINE_LEVEL
 || (INLINE_LEVEL < 2)

52 
	`Êﬂt64_t
 (*
magsFuncPå
)–
uöt_Á°64_t
, uöt_Á°64_t, 
boﬁ
 );

55 
uA
.
f
 = 
a
;

56 
uiA
 = 
uA
.
ui
;

57 
signA
 = 
	`signF64UI
–
uiA
 );

58 
uB
.
f
 = 
b
;

59 
uiB
 = 
uB
.
ui
;

60 
signB
 = 
	`signF64UI
–
uiB
 );

61 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

62 i‡–
signA
 =
signB
 ) {

63  
	`so·Êﬂt_subMagsF64
–
uiA
, 
uiB
, 
signA
 );

65  
	`so·Êﬂt_addMagsF64
–
uiA
, 
uiB
, 
signA
 );

68 
magsFuncPå
 =

69 (
signA
 =
signB
Ë? 
so·Êﬂt_subMagsF64
 : 
so·Êﬂt_addMagsF64
;

70  (*
magsFuncPå
)–
uiA
, 
uiB
, 
signA
 );

73 
	}
}

	@src/softfloat/source/f64_to_extF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t
 
	$f64_to_extF80
–
Êﬂt64_t
 
a
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt128
 
uiZ
;

53 
uöt_Á°16_t
 
uiZ64
;

54 
uöt_Á°64_t
 
uiZ0
;

55 
exp16_sig64
 
n‹mExpSig
;

56 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

60 
uA
.
f
 = 
a
;

61 
uiA
 = 
uA
.
ui
;

62 
sign
 = 
	`signF64UI
–
uiA
 );

63 
exp
 = 
	`expF64UI
–
uiA
 );

64 
‰ac
 = 
	`‰acF64UI
–
uiA
 );

67 i‡–
exp
 == 0x7FF ) {

68 i‡–
‰ac
 ) {

69 
	`so·Êﬂt_f64UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

70 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToExtF80UI
–&
comm⁄NaN
 );

71 
uiZ64
 = 
uiZ
.
v64
;

72 
uiZ0
 = 
uiZ
.
v0
;

74 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x7FFF );

75 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

77 
uiZ
;

81 i‡–! 
exp
 ) {

82 i‡–! 
‰ac
 ) {

83 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

84 
uiZ0
 = 0;

85 
uiZ
;

87 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
‰ac
 );

88 
exp
 = 
n‹mExpSig
.exp;

89 
‰ac
 = 
n‹mExpSig
.
sig
;

93 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 
exp
 + 0x3C00 );

94 
uiZ0
 = (
‰ac
 | 
	`UINT64_C
( 0x0010000000000000 ))<<11;

95 
uiZ
:

96 
uZ
.
s
.
signExp
 = 
uiZ64
;

97 
uZ
.
s
.
signif
 = 
uiZ0
;

98  
uZ
.
f
;

100 
	}
}

	@src/softfloat/source/f64_to_extF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f64_to_extF80M
–
Êﬂt64_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

49 *
zPå
 = 
	`f64_to_extF80
–
a
 );

51 
	}
}

55 
	$f64_to_extF80M
–
Êﬂt64_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

57 
extFlﬂt80M
 *
zSPå
;

58 
ui64_f64
 
uA
;

59 
uöt64_t
 
uiA
;

60 
boﬁ
 
sign
;

61 
öt_Á°16_t
 
exp
;

62 
uöt64_t
 
‰ac
;

63 
comm⁄NaN
 commonNaN;

64 
uöt_Á°16_t
 
uiZ64
;

65 
uöt64_t
 
uiZ0
;

66 
exp16_sig64
 
n‹mExpSig
;

70 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

71 
uA
.
f
 = 
a
;

72 
uiA
 = 
uA
.
ui
;

73 
sign
 = 
	`signF64UI
–
uiA
 );

74 
exp
 = 
	`expF64UI
–
uiA
 );

75 
‰ac
 = 
	`‰acF64UI
–
uiA
 );

78 i‡–
exp
 == 0x7FF ) {

79 i‡–
‰ac
 ) {

80 
	`so·Êﬂt_f64UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

81 
	`so·Êﬂt_comm⁄NaNToExtF80M
–&
comm⁄NaN
, 
zSPå
 );

84 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x7FFF );

85 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

86 
uiZ
;

90 i‡–! 
exp
 ) {

91 i‡–! 
‰ac
 ) {

92 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

93 
uiZ0
 = 0;

94 
uiZ
;

96 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
‰ac
 );

97 
exp
 = 
n‹mExpSig
.exp;

98 
‰ac
 = 
n‹mExpSig
.
sig
;

102 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 
exp
 + 0x3C00 );

103 
uiZ0
 = 
	`UINT64_C
–0x8000000000000000 ) | 
‰ac
<<11;

104 
uiZ
:

105 
zSPå
->
signExp
 = 
uiZ64
;

106 
zSPå
->
signif
 = 
uiZ0
;

108 
	}
}

	@src/softfloat/source/f64_to_f128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t
 
	$f64_to_f128
–
Êﬂt64_t
 
a
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt128
 
uiZ
;

53 
exp16_sig64
 
n‹mExpSig
;

54 
uöt128
 
‰ac128
;

55 
ui128_f128
 
uZ
;

59 
uA
.
f
 = 
a
;

60 
uiA
 = 
uA
.
ui
;

61 
sign
 = 
	`signF64UI
–
uiA
 );

62 
exp
 = 
	`expF64UI
–
uiA
 );

63 
‰ac
 = 
	`‰acF64UI
–
uiA
 );

66 i‡–
exp
 == 0x7FF ) {

67 i‡–
‰ac
 ) {

68 
	`so·Êﬂt_f64UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

69 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF128UI
–&
comm⁄NaN
 );

71 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 0x7FFF, 0 );

72 
uiZ
.
v0
 = 0;

74 
uiZ
;

78 i‡–! 
exp
 ) {

79 i‡–! 
‰ac
 ) {

80 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 0, 0 );

81 
uiZ
.
v0
 = 0;

82 
uiZ
;

84 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
‰ac
 );

85 
exp
 = 
n‹mExpSig
.exp - 1;

86 
‰ac
 = 
n‹mExpSig
.
sig
;

90 
‰ac128
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
‰ac
, 60 );

91 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 
exp
 + 0x3C00, 
‰ac128
.v64 );

92 
uiZ
.
v0
 = 
‰ac128
.v0;

93 
uiZ
:

94 
uZ
.
ui
 = 
uiZ
;

95  
uZ
.
f
;

97 
	}
}

	@src/softfloat/source/f64_to_f128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
	$f64_to_f128M
–
Êﬂt64_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

49 *
zPå
 = 
	`f64_to_f128
–
a
 );

51 
	}
}

55 
	$f64_to_f128M
–
Êﬂt64_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

57 
uöt32_t
 *
zWPå
;

58 
ui64_f64
 
uA
;

59 
uöt64_t
 
uiA
;

60 
boﬁ
 
sign
;

61 
öt_Á°16_t
 
exp
;

62 
uöt64_t
 
‰ac
;

63 
comm⁄NaN
 commonNaN;

64 
uöt32_t
 
uiZ96
;

65 
exp16_sig64
 
n‹mExpSig
;

69 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

72 
uA
.
f
 = 
a
;

73 
uiA
 = 
uA
.
ui
;

74 
sign
 = 
	`signF64UI
–
uiA
 );

75 
exp
 = 
	`expF64UI
–
uiA
 );

76 
‰ac
 = 
	`‰acF64UI
–
uiA
 );

79 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

80 i‡–
exp
 == 0x7FF ) {

81 i‡–
‰ac
 ) {

82 
	`so·Êﬂt_f64UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

83 
	`so·Êﬂt_comm⁄NaNToF128M
–&
comm⁄NaN
, 
zWPå
 );

86 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0x7FFF, 0 );

87 
uiZ
;

91 i‡–! 
exp
 ) {

92 i‡–! 
‰ac
 ) {

93 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0, 0 );

94 
uiZ
;

96 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
‰ac
 );

97 
exp
 = 
n‹mExpSig
.exp - 1;

98 
‰ac
 = 
n‹mExpSig
.
sig
;

102 
zWPå
[
	`ödexW‹d
–4, 1 )] = (
uöt32_t
Ë
‰ac
<<28;

103 
‰ac
 >>= 4;

104 
zWPå
[
	`ödexW‹dHi
–4 )] = 
	`∑ckToF128UI96
–
sign
, 
exp
 + 0x3C00, 
‰ac
>>32 );

105 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
‰ac
;

109 
uiZ
:

110 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
uiZ96
;

111 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

112 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

114 
	}
}

	@src/softfloat/source/f64_to_f16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$f64_to_f16
–
Êﬂt64_t
 
a
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°16_t
 
uiZ
, 
‰ac16
;

53 
ui16_f16
 
uZ
;

57 
uA
.
f
 = 
a
;

58 
uiA
 = 
uA
.
ui
;

59 
sign
 = 
	`signF64UI
–
uiA
 );

60 
exp
 = 
	`expF64UI
–
uiA
 );

61 
‰ac
 = 
	`‰acF64UI
–
uiA
 );

64 i‡–
exp
 == 0x7FF ) {

65 i‡–
‰ac
 ) {

66 
	`so·Êﬂt_f64UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

67 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF16UI
–&
comm⁄NaN
 );

69 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0x1F, 0 );

71 
uiZ
;

75 
‰ac16
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
‰ac
, 38 );

76 i‡–! (
exp
 | 
‰ac16
) ) {

77 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0, 0 );

78 
uiZ
;

82  
	`so·Êﬂt_roundPackToF16
–
sign
, 
exp
 - 0x3F1, 
‰ac16
 | 0x4000 );

83 
uiZ
:

84 
uZ
.
ui
 = 
uiZ
;

85  
uZ
.
f
;

87 
	}
}

	@src/softfloat/source/f64_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$f64_to_f32
–
Êﬂt64_t
 
a
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
‰ac
;

51 
comm⁄NaN
 commonNaN;

52 
uöt_Á°32_t
 
uiZ
, 
‰ac32
;

53 
ui32_f32
 
uZ
;

57 
uA
.
f
 = 
a
;

58 
uiA
 = 
uA
.
ui
;

59 
sign
 = 
	`signF64UI
–
uiA
 );

60 
exp
 = 
	`expF64UI
–
uiA
 );

61 
‰ac
 = 
	`‰acF64UI
–
uiA
 );

64 i‡–
exp
 == 0x7FF ) {

65 i‡–
‰ac
 ) {

66 
	`so·Êﬂt_f64UIToComm⁄NaN
–
uiA
, &
comm⁄NaN
 );

67 
uiZ
 = 
	`so·Êﬂt_comm⁄NaNToF32UI
–&
comm⁄NaN
 );

69 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0xFF, 0 );

71 
uiZ
;

75 
‰ac32
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
‰ac
, 22 );

76 i‡–! (
exp
 | 
‰ac32
) ) {

77 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0, 0 );

78 
uiZ
;

82  
	`so·Êﬂt_roundPackToF32
–
sign
, 
exp
 - 0x381, 
‰ac32
 | 0x40000000 );

83 
uiZ
:

84 
uZ
.
ui
 = 
uiZ
;

85  
uZ
.
f
;

87 
	}
}

	@src/softfloat/source/f64_to_i32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$f64_to_i32
–
Êﬂt64_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
sig
;

51 
öt_Á°16_t
 
shi·Di°
;

55 
uA
.
f
 = 
a
;

56 
uiA
 = 
uA
.
ui
;

57 
sign
 = 
	`signF64UI
–
uiA
 );

58 
exp
 = 
	`expF64UI
–
uiA
 );

59 
sig
 = 
	`‰acF64UI
–
uiA
 );

62 #i‡(
i32_‰omNaN
 !
i32_‰omPosOvîÊow
Ë|| (i32_‰omNaN !
i32_‰omNegOvîÊow
)

63 i‡–(
exp
 =0x7FFË&& 
sig
 ) {

64 #i‡(
i32_‰omNaN
 =
i32_‰omPosOvîÊow
)

65 
sign
 = 0;

66 #ñi‡(
i32_‰omNaN
 =
i32_‰omNegOvîÊow
)

67 
sign
 = 1;

69 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

70  
i32_‰omNaN
;

76 i‡–
exp
 ) 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

77 
shi·Di°
 = 0x427 - 
exp
;

78 i‡–0 < 
shi·Di°
 ) 
sig
 = 
	`so·Êﬂt_shi·RightJam64
( sig, shiftDist );

79  
	`so·Êﬂt_roundToI32
–
sign
, 
sig
, 
roundögMode
, 
exa˘
 );

81 
	}
}

	@src/softfloat/source/f64_to_i32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t
 
	$f64_to_i32_r_möMag
–
Êﬂt64_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°64_t
 
sig
;

50 
öt_Á°16_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
öt_Á°32_t
 
absZ
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF64UI
–
uiA
 );

59 
sig
 = 
	`‰acF64UI
–
uiA
 );

62 
shi·Di°
 = 0x433 - 
exp
;

63 i‡–53 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF64UI
–
uiA
 );

72 i‡–
shi·Di°
 < 22 ) {

74 
sign
 && (
exp
 =0x41EË&& (
sig
 < 
	`UINT64_C
( 0x0000000000200000 ))

76 i‡–
exa˘
 && 
sig
 ) {

77 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

81 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

83 (
exp
 =0x7FFË&& 
sig
 ? 
i32_‰omNaN


84 : 
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

88 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

89 
absZ
 = 
sig
>>
shi·Di°
;

90 i‡–
exa˘
 && ((
uöt_Á°64_t
Ë(
uöt_Á°32_t
Ë
absZ
<<
shi·Di°
 !
sig
) ) {

91 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

93  
sign
 ? -
absZ
 :ábsZ;

95 
	}
}

	@src/softfloat/source/f64_to_i64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$f64_to_i64
–
Êﬂt64_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
sig
;

51 
öt_Á°16_t
 
shi·Di°
;

52 #ifde‡
SOFTFLOAT_FAST_INT64


53 
uöt64_exåa
 
sigExåa
;

55 
uöt32_t
 
extSig
[3];

60 
uA
.
f
 = 
a
;

61 
uiA
 = 
uA
.
ui
;

62 
sign
 = 
	`signF64UI
–
uiA
 );

63 
exp
 = 
	`expF64UI
–
uiA
 );

64 
sig
 = 
	`‰acF64UI
–
uiA
 );

67 i‡–
exp
 ) 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

68 
shi·Di°
 = 0x433 - 
exp
;

69 #ifde‡
SOFTFLOAT_FAST_INT64


70 i‡–
shi·Di°
 <= 0 ) {

71 i‡–
shi·Di°
 < -11 ) 
övÆid
;

72 
sigExåa
.
v
 = 
sig
<<-
shi·Di°
;

73 
sigExåa
.
exåa
 = 0;

75 
sigExåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig
, 0, 
shi·Di°
 );

78 
	`so·Êﬂt_roundToI64
(

79 
sign
, 
sigExåa
.
v
, sigExåa.
exåa
, 
roundögMode
, 
exa˘
 );

81 
extSig
[
	`ödexW‹d
( 3, 0 )] = 0;

82 i‡–
shi·Di°
 <= 0 ) {

83 i‡–
shi·Di°
 < -11 ) 
övÆid
;

84 
sig
 <<-
shi·Di°
;

85 
extSig
[
	`ödexW‹d
–3, 2 )] = 
sig
>>32;

86 
extSig
[
	`ödexW‹d
–3, 1 )] = 
sig
;

88 
extSig
[
	`ödexW‹d
–3, 2 )] = 
sig
>>32;

89 
extSig
[
	`ödexW‹d
–3, 1 )] = 
sig
;

90 
	`so·Êﬂt_shi·RightJam96M
–
extSig
, 
shi·Di°
,ÉxtSig );

92  
	`so·Êﬂt_roundMToI64
–
sign
, 
extSig
, 
roundögMode
, 
exa˘
 );

96 
övÆid
:

97 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

99 (
exp
 =0x7FFË&& 
	`‰acF64UI
–
uiA
 ) ? 
i64_‰omNaN


100 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

102 
	}
}

	@src/softfloat/source/f64_to_i64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t
 
	$f64_to_i64_r_möMag
–
Êﬂt64_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
sig
;

51 
öt_Á°16_t
 
shi·Di°
;

52 
öt_Á°64_t
 
absZ
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
sign
 = 
	`signF64UI
–
uiA
 );

59 
exp
 = 
	`expF64UI
–
uiA
 );

60 
sig
 = 
	`‰acF64UI
–
uiA
 );

63 
shi·Di°
 = 0x433 - 
exp
;

64 i‡–
shi·Di°
 <= 0 ) {

67 i‡–
shi·Di°
 < -10 ) {

68 i‡–
uiA
 =
	`∑ckToF64UI
( 1, 0x43E, 0 ) ) {

69  -
	`INT64_C
( 0x7FFFFFFFFFFFFFFF ) - 1;

71 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

73 (
exp
 =0x7FFË&& 
sig
 ? 
i64_‰omNaN


74 : 
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

78 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

79 
absZ
 = 
sig
<<-
shi·Di°
;

83 i‡–53 <
shi·Di°
 ) {

84 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

85 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

91 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

92 
absZ
 = 
sig
>>
shi·Di°
;

93 i‡–
exa˘
 && (
absZ
<<
shi·Di°
 !
sig
) ) {

94 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

97  
sign
 ? -
absZ
 :ábsZ;

99 
	}
}

	@src/softfloat/source/f64_to_ui32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t
 
	$f64_to_ui32
–
Êﬂt64_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
sig
;

51 
öt_Á°16_t
 
shi·Di°
;

55 
uA
.
f
 = 
a
;

56 
uiA
 = 
uA
.
ui
;

57 
sign
 = 
	`signF64UI
–
uiA
 );

58 
exp
 = 
	`expF64UI
–
uiA
 );

59 
sig
 = 
	`‰acF64UI
–
uiA
 );

62 #i‡(
ui32_‰omNaN
 !
ui32_‰omPosOvîÊow
Ë|| (ui32_‰omNaN !
ui32_‰omNegOvîÊow
)

63 i‡–(
exp
 =0x7FFË&& 
sig
 ) {

64 #i‡(
ui32_‰omNaN
 =
ui32_‰omPosOvîÊow
)

65 
sign
 = 0;

66 #ñi‡(
ui32_‰omNaN
 =
ui32_‰omNegOvîÊow
)

67 
sign
 = 1;

69 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

70  
ui32_‰omNaN
;

76 i‡–
exp
 ) 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

77 
shi·Di°
 = 0x427 - 
exp
;

78 i‡–0 < 
shi·Di°
 ) 
sig
 = 
	`so·Êﬂt_shi·RightJam64
( sig, shiftDist );

79  
	`so·Êﬂt_roundToUI32
–
sign
, 
sig
, 
roundögMode
, 
exa˘
 );

81 
	}
}

	@src/softfloat/source/f64_to_ui32_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t
 
	$f64_to_ui32_r_möMag
–
Êﬂt64_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°64_t
 
sig
;

50 
öt_Á°16_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°32_t
 
z
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF64UI
–
uiA
 );

59 
sig
 = 
	`‰acF64UI
–
uiA
 );

62 
shi·Di°
 = 0x433 - 
exp
;

63 i‡–53 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF64UI
–
uiA
 );

72 i‡–
sign
 || (
shi·Di°
 < 21) ) {

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 (
exp
 =0x7FFË&& 
sig
 ? 
ui32_‰omNaN


76 : 
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

80 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

81 
z
 = 
sig
>>
shi·Di°
;

82 i‡–
exa˘
 && ((
uöt_Á°64_t
Ë
z
<<
shi·Di°
 !
sig
) ) {

83 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

85  
z
;

87 
	}
}

	@src/softfloat/source/f64_to_ui64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t
 
	$f64_to_ui64
–
Êﬂt64_t
 
a
, 
uöt_Á°8_t
 
roundögMode
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
boﬁ
 
sign
;

49 
öt_Á°16_t
 
exp
;

50 
uöt_Á°64_t
 
sig
;

51 
öt_Á°16_t
 
shi·Di°
;

52 #ifde‡
SOFTFLOAT_FAST_INT64


53 
uöt64_exåa
 
sigExåa
;

55 
uöt32_t
 
extSig
[3];

60 
uA
.
f
 = 
a
;

61 
uiA
 = 
uA
.
ui
;

62 
sign
 = 
	`signF64UI
–
uiA
 );

63 
exp
 = 
	`expF64UI
–
uiA
 );

64 
sig
 = 
	`‰acF64UI
–
uiA
 );

67 i‡–
exp
 ) 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

68 
shi·Di°
 = 0x433 - 
exp
;

69 #ifde‡
SOFTFLOAT_FAST_INT64


70 i‡–
shi·Di°
 <= 0 ) {

71 i‡–
shi·Di°
 < -11 ) 
övÆid
;

72 
sigExåa
.
v
 = 
sig
<<-
shi·Di°
;

73 
sigExåa
.
exåa
 = 0;

75 
sigExåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig
, 0, 
shi·Di°
 );

78 
	`so·Êﬂt_roundToUI64
(

79 
sign
, 
sigExåa
.
v
, sigExåa.
exåa
, 
roundögMode
, 
exa˘
 );

81 
extSig
[
	`ödexW‹d
( 3, 0 )] = 0;

82 i‡–
shi·Di°
 <= 0 ) {

83 i‡–
shi·Di°
 < -11 ) 
övÆid
;

84 
sig
 <<-
shi·Di°
;

85 
extSig
[
	`ödexW‹d
–3, 2 )] = 
sig
>>32;

86 
extSig
[
	`ödexW‹d
–3, 1 )] = 
sig
;

88 
extSig
[
	`ödexW‹d
–3, 2 )] = 
sig
>>32;

89 
extSig
[
	`ödexW‹d
–3, 1 )] = 
sig
;

90 
	`so·Êﬂt_shi·RightJam96M
–
extSig
, 
shi·Di°
,ÉxtSig );

92  
	`so·Êﬂt_roundMToUI64
–
sign
, 
extSig
, 
roundögMode
, 
exa˘
 );

96 
övÆid
:

97 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

99 (
exp
 =0x7FFË&& 
	`‰acF64UI
–
uiA
 ) ? 
ui64_‰omNaN


100 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

102 
	}
}

	@src/softfloat/source/f64_to_ui64_r_minMag.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t
 
	$f64_to_ui64_r_möMag
–
Êﬂt64_t
 
a
, 
boﬁ
 
exa˘
 )

46 
ui64_f64
 
uA
;

47 
uöt_Á°64_t
 
uiA
;

48 
öt_Á°16_t
 
exp
;

49 
uöt_Á°64_t
 
sig
;

50 
öt_Á°16_t
 
shi·Di°
;

51 
boﬁ
 
sign
;

52 
uöt_Á°64_t
 
z
;

56 
uA
.
f
 = 
a
;

57 
uiA
 = 
uA
.
ui
;

58 
exp
 = 
	`expF64UI
–
uiA
 );

59 
sig
 = 
	`‰acF64UI
–
uiA
 );

62 
shi·Di°
 = 0x433 - 
exp
;

63 i‡–53 <
shi·Di°
 ) {

64 i‡–
exa˘
 && (
exp
 | 
sig
) ) {

65 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

71 
sign
 = 
	`signF64UI
–
uiA
 );

72 i‡–
sign
 ) 
övÆid
;

73 i‡–
shi·Di°
 <= 0 ) {

74 i‡–
shi·Di°
 < -11 ) 
övÆid
;

75 
z
 = (
sig
 | 
	`UINT64_C
–0x0010000000000000 ))<<-
shi·Di°
;

77 
sig
 |
	`UINT64_C
( 0x0010000000000000 );

78 
z
 = 
sig
>>
shi·Di°
;

79 i‡–
exa˘
 && (
uöt64_t
Ë(
sig
<<(-
shi·Di°
 & 63)) ) {

80 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

83  
z
;

86 
övÆid
:

87 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

89 (
exp
 =0x7FFË&& 
sig
 ? 
ui64_‰omNaN


90 : 
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

92 
	}
}

	@src/softfloat/source/i32_to_extF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
extFlﬂt80_t
 
	$i32_to_extF80
–
öt32_t
 
a
 )

45 
uöt_Á°16_t
 
uiZ64
;

46 
uöt_Á°32_t
 
absA
;

47 
boﬁ
 
sign
;

48 
öt_Á°8_t
 
shi·Di°
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

51 
uiZ64
 = 0;

52 
absA
 = 0;

53 i‡–
a
 ) {

54 
sign
 = (
a
 < 0);

55 
absA
 = 
sign
 ? -(
uöt_Á°32_t
Ë
a
 : (uint_fast32_t)á;

56 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
absA
 );

57 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x401E - 
shi·Di°
 );

58 
absA
 <<
shi·Di°
;

60 
uZ
.
s
.
signExp
 = 
uiZ64
;

61 
uZ
.
s
.
signif
 = (
uöt_Á°64_t
Ë
absA
<<32;

62  
uZ
.
f
;

64 
	}
}

	@src/softfloat/source/i32_to_extF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 
	$i32_to_extF80M
–
öt32_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

47 *
zPå
 = 
	`i32_to_extF80
–
a
 );

49 
	}
}

53 
	$i32_to_extF80M
–
öt32_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

55 
extFlﬂt80M
 *
zSPå
;

56 
uöt_Á°16_t
 
uiZ64
;

57 
uöt64_t
 
sigZ
;

58 
boﬁ
 
sign
;

59 
uöt32_t
 
absA
;

60 
öt_Á°8_t
 
shi·Di°
;

62 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

63 
uiZ64
 = 0;

64 
sigZ
 = 0;

65 i‡–
a
 ) {

66 
sign
 = (
a
 < 0);

67 
absA
 = 
sign
 ? -(
uöt32_t
Ë
a
 : (uint32_t)á;

68 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
absA
 );

69 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x401E - 
shi·Di°
 );

70 
sigZ
 = (
uöt64_t
Ë(
absA
<<
shi·Di°
)<<32;

72 
zSPå
->
signExp
 = 
uiZ64
;

73 
zSPå
->
signif
 = 
sigZ
;

75 
	}
}

	@src/softfloat/source/i32_to_f128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt128_t
 
	$i32_to_f128
–
öt32_t
 
a
 )

44 
uöt_Á°64_t
 
uiZ64
;

45 
boﬁ
 
sign
;

46 
uöt_Á°32_t
 
absA
;

47 
öt_Á°8_t
 
shi·Di°
;

48 
ui128_f128
 
uZ
;

50 
uiZ64
 = 0;

51 i‡–
a
 ) {

52 
sign
 = (
a
 < 0);

53 
absA
 = 
sign
 ? -(
uöt_Á°32_t
Ë
a
 : (uint_fast32_t)á;

54 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
absA
 ) + 17;

55 
uiZ64
 =

56 
	`∑ckToF128UI64
(

57 
sign
, 0x402E - 
shi·Di°
, (
uöt_Á°64_t
Ë
absA
<<shiftDist );

59 
uZ
.
ui
.
v64
 = 
uiZ64
;

60 
uZ
.
ui
.
v0
 = 0;

61  
uZ
.
f
;

63 
	}
}

	@src/softfloat/source/i32_to_f128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 
	$i32_to_f128M
–
öt32_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

47 *
zPå
 = 
	`i32_to_f128
–
a
 );

49 
	}
}

53 
	$i32_to_f128M
–
öt32_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

55 
uöt32_t
 *
zWPå
;

56 
uöt32_t
 
uiZ96
, 
uiZ64
;

57 
boﬁ
 
sign
;

58 
uöt32_t
 
absA
;

59 
öt_Á°8_t
 
shi·Di°
;

60 
uöt64_t
 
n‹mAbsA
;

62 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

63 
uiZ96
 = 0;

64 
uiZ64
 = 0;

65 i‡–
a
 ) {

66 
sign
 = (
a
 < 0);

67 
absA
 = 
sign
 ? -(
uöt32_t
Ë
a
 : (uint32_t)á;

68 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
absA
 ) + 17;

69 
n‹mAbsA
 = (
uöt64_t
Ë
absA
<<
shi·Di°
;

70 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0x402E - 
shi·Di°
, 
n‹mAbsA
>>32 );

71 
uiZ64
 = 
n‹mAbsA
;

73 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
uiZ96
;

74 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
uiZ64
;

75 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

76 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

78 
	}
}

	@src/softfloat/source/i32_to_f16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt16_t
 
	$i32_to_f16
–
öt32_t
 
a
 )

45 
boﬁ
 
sign
;

46 
uöt_Á°32_t
 
absA
;

47 
öt_Á°8_t
 
shi·Di°
;

48 
ui16_f16
 
u
;

49 
uöt_Á°16_t
 
sig
;

51 
sign
 = (
a
 < 0);

52 
absA
 = 
sign
 ? -(
uöt_Á°32_t
Ë
a
 : (uint_fast32_t)á;

53 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
absA
 ) - 21;

54 i‡–0 <
shi·Di°
 ) {

55 
u
.
ui
 =

56 
a
 ? 
	`∑ckToF16UI
(

57 
sign
, 0x18 - 
shi·Di°
, (
uöt_Á°16_t
Ë
absA
<<shiftDist )

59  
u
.
f
;

61 
shi·Di°
 += 4;

62 
sig
 =

63 (
shi·Di°
 < 0)

64 ? 
absA
>>(-
shi·Di°
)

65 | ((
uöt32_t
Ë(
absA
<<(
shi·Di°
 & 31)) != 0)

66 : (
uöt_Á°16_t
Ë
absA
<<
shi·Di°
;

67  
	`so·Êﬂt_roundPackToF16
–
sign
, 0x1C - 
shi·Di°
, 
sig
 );

70 
	}
}

	@src/softfloat/source/i32_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt32_t
 
	$i32_to_f32
–
öt32_t
 
a
 )

45 
boﬁ
 
sign
;

46 
ui32_f32
 
uZ
;

47 
uöt_Á°32_t
 
absA
;

49 
sign
 = (
a
 < 0);

50 i‡–! (
a
 & 0x7FFFFFFF) ) {

51 
uZ
.
ui
 = 
sign
 ? 
	`∑ckToF32UI
( 1, 0x9E, 0 ) : 0;

52  
uZ
.
f
;

54 
absA
 = 
sign
 ? -(
uöt_Á°32_t
Ë
a
 : (uint_fast32_t)á;

55  
	`so·Êﬂt_n‹mRoundPackToF32
–
sign
, 0x9C, 
absA
 );

57 
	}
}

	@src/softfloat/source/i32_to_f64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt64_t
 
	$i32_to_f64
–
öt32_t
 
a
 )

45 
uöt_Á°64_t
 
uiZ
;

46 
boﬁ
 
sign
;

47 
uöt_Á°32_t
 
absA
;

48 
öt_Á°8_t
 
shi·Di°
;

49 
ui64_f64
 
uZ
;

51 i‡–! 
a
 ) {

52 
uiZ
 = 0;

54 
sign
 = (
a
 < 0);

55 
absA
 = 
sign
 ? -(
uöt_Á°32_t
Ë
a
 : (uint_fast32_t)á;

56 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
absA
 ) + 21;

57 
uiZ
 =

58 
	`∑ckToF64UI
(

59 
sign
, 0x432 - 
shi·Di°
, (
uöt_Á°64_t
Ë
absA
<<shiftDist );

61 
uZ
.
ui
 = 
uiZ
;

62  
uZ
.
f
;

64 
	}
}

	@src/softfloat/source/i64_to_extF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
extFlﬂt80_t
 
	$i64_to_extF80
–
öt64_t
 
a
 )

45 
uöt_Á°16_t
 
uiZ64
;

46 
uöt_Á°64_t
 
absA
;

47 
boﬁ
 
sign
;

48 
öt_Á°8_t
 
shi·Di°
;

49 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

51 
uiZ64
 = 0;

52 
absA
 = 0;

53 i‡–
a
 ) {

54 
sign
 = (
a
 < 0);

55 
absA
 = 
sign
 ? -(
uöt_Á°64_t
Ë
a
 : (uint_fast64_t)á;

56 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
absA
 );

57 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x403E - 
shi·Di°
 );

58 
absA
 <<
shi·Di°
;

60 
uZ
.
s
.
signExp
 = 
uiZ64
;

61 
uZ
.
s
.
signif
 = 
absA
;

62  
uZ
.
f
;

64 
	}
}

	@src/softfloat/source/i64_to_extF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 
	$i64_to_extF80M
–
öt64_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

47 *
zPå
 = 
	`i64_to_extF80
–
a
 );

49 
	}
}

53 
	$i64_to_extF80M
–
öt64_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

55 
extFlﬂt80M
 *
zSPå
;

56 
uöt_Á°16_t
 
uiZ64
;

57 
uöt64_t
 
sigZ
;

58 
boﬁ
 
sign
;

59 
uöt64_t
 
absA
;

60 
öt_Á°8_t
 
shi·Di°
;

62 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

63 
uiZ64
 = 0;

64 
sigZ
 = 0;

65 i‡–
a
 ) {

66 
sign
 = (
a
 < 0);

67 
absA
 = 
sign
 ? -(
uöt64_t
Ë
a
 : (uint64_t)á;

68 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
absA
 );

69 
uiZ64
 = 
	`∑ckToExtF80UI64
–
sign
, 0x403E - 
shi·Di°
 );

70 
sigZ
 = 
absA
<<
shi·Di°
;

72 
zSPå
->
signExp
 = 
uiZ64
;

73 
zSPå
->
signif
 = 
sigZ
;

75 
	}
}

	@src/softfloat/source/i64_to_f128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt128_t
 
	$i64_to_f128
–
öt64_t
 
a
 )

44 
uöt_Á°64_t
 
uiZ64
, 
uiZ0
;

45 
boﬁ
 
sign
;

46 
uöt_Á°64_t
 
absA
;

47 
öt_Á°8_t
 
shi·Di°
;

48 
uöt128
 
zSig
;

49 
ui128_f128
 
uZ
;

51 i‡–! 
a
 ) {

52 
uiZ64
 = 0;

53 
uiZ0
 = 0;

55 
sign
 = (
a
 < 0);

56 
absA
 = 
sign
 ? -(
uöt_Á°64_t
Ë
a
 : (uint_fast64_t)á;

57 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
absA
 ) + 49;

58 i‡–64 <
shi·Di°
 ) {

59 
zSig
.
v64
 = 
absA
<<(
shi·Di°
 - 64);

60 
zSig
.
v0
 = 0;

62 
zSig
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
absA
, 
shi·Di°
 );

64 
uiZ64
 = 
	`∑ckToF128UI64
–
sign
, 0x406E - 
shi·Di°
, 
zSig
.
v64
 );

65 
uiZ0
 = 
zSig
.
v0
;

67 
uZ
.
ui
.
v64
 = 
uiZ64
;

68 
uZ
.
ui
.
v0
 = 
uiZ0
;

69  
uZ
.
f
;

71 
	}
}

	@src/softfloat/source/i64_to_f128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 
	$i64_to_f128M
–
öt64_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

47 *
zPå
 = 
	`i64_to_f128
–
a
 );

49 
	}
}

53 
	$i64_to_f128M
–
öt64_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

55 
uöt32_t
 *
zWPå
;

56 
uöt32_t
 
uiZ96
, 
uiZ64
;

57 
boﬁ
 
sign
;

58 
uöt64_t
 
absA
;

59 
uöt_Á°8_t
 
shi·Di°
;

60 
uöt32_t
 *
±r
;

62 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

63 
uiZ96
 = 0;

64 
uiZ64
 = 0;

65 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

66 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

67 i‡–
a
 ) {

68 
sign
 = (
a
 < 0);

69 
absA
 = 
sign
 ? -(
uöt64_t
Ë
a
 : (uint64_t)á;

70 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
absA
 ) + 17;

71 i‡–
shi·Di°
 < 32 ) {

72 
±r
 = 
zWPå
 + 
	`ödexMu…iw‹dHi
( 4, 3 );

73 
±r
[
	`ödexW‹d
( 3, 2 )] = 0;

74 
±r
[
	`ödexW‹d
–3, 1 )] = 
absA
>>32;

75 
±r
[
	`ödexW‹d
–3, 0 )] = 
absA
;

76 
	`so·Êﬂt_sh‹tShi·Le·96M
–
±r
, 
shi·Di°
,Ötr );

77 
±r
[
	`ödexW‹dHi
( 3 )] =

78 
	`∑ckToF128UI96
(

79 
sign
, 0x404E - 
shi·Di°
, 
±r
[
	`ödexW‹dHi
( 3 )] );

82 
absA
 <<
shi·Di°
 - 32;

83 
uiZ96
 = 
	`∑ckToF128UI96
–
sign
, 0x404E - 
shi·Di°
, 
absA
>>32 );

84 
uiZ64
 = 
absA
;

86 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
uiZ96
;

87 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
uiZ64
;

89 
	}
}

	@src/softfloat/source/i64_to_f16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt16_t
 
	$i64_to_f16
–
öt64_t
 
a
 )

45 
boﬁ
 
sign
;

46 
uöt_Á°64_t
 
absA
;

47 
öt_Á°8_t
 
shi·Di°
;

48 
ui16_f16
 
u
;

49 
uöt_Á°16_t
 
sig
;

51 
sign
 = (
a
 < 0);

52 
absA
 = 
sign
 ? -(
uöt_Á°64_t
Ë
a
 : (uint_fast64_t)á;

53 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
absA
 ) - 53;

54 i‡–0 <
shi·Di°
 ) {

55 
u
.
ui
 =

56 
a
 ? 
	`∑ckToF16UI
(

57 
sign
, 0x18 - 
shi·Di°
, (
uöt_Á°16_t
Ë
absA
<<shiftDist )

59  
u
.
f
;

61 
shi·Di°
 += 4;

62 
sig
 =

63 (
shi·Di°
 < 0)

64 ? 
	`so·Êﬂt_sh‹tShi·RightJam64
–
absA
, -
shi·Di°
 )

65 : (
uöt_Á°16_t
Ë
absA
<<
shi·Di°
;

66  
	`so·Êﬂt_roundPackToF16
–
sign
, 0x1C - 
shi·Di°
, 
sig
 );

69 
	}
}

	@src/softfloat/source/i64_to_f32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt32_t
 
	$i64_to_f32
–
öt64_t
 
a
 )

45 
boﬁ
 
sign
;

46 
uöt_Á°64_t
 
absA
;

47 
öt_Á°8_t
 
shi·Di°
;

48 
ui32_f32
 
u
;

49 
uöt_Á°32_t
 
sig
;

51 
sign
 = (
a
 < 0);

52 
absA
 = 
sign
 ? -(
uöt_Á°64_t
Ë
a
 : (uint_fast64_t)á;

53 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
absA
 ) - 40;

54 i‡–0 <
shi·Di°
 ) {

55 
u
.
ui
 =

56 
a
 ? 
	`∑ckToF32UI
(

57 
sign
, 0x95 - 
shi·Di°
, (
uöt_Á°32_t
Ë
absA
<<shiftDist )

59  
u
.
f
;

61 
shi·Di°
 += 7;

62 
sig
 =

63 (
shi·Di°
 < 0)

64 ? 
	`so·Êﬂt_sh‹tShi·RightJam64
–
absA
, -
shi·Di°
 )

65 : (
uöt_Á°32_t
Ë
absA
<<
shi·Di°
;

66  
	`so·Êﬂt_roundPackToF32
–
sign
, 0x9C - 
shi·Di°
, 
sig
 );

69 
	}
}

	@src/softfloat/source/i64_to_f64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt64_t
 
	$i64_to_f64
–
öt64_t
 
a
 )

45 
boﬁ
 
sign
;

46 
ui64_f64
 
uZ
;

47 
uöt_Á°64_t
 
absA
;

49 
sign
 = (
a
 < 0);

50 i‡–! (
a
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF )) ) {

51 
uZ
.
ui
 = 
sign
 ? 
	`∑ckToF64UI
( 1, 0x43E, 0 ) : 0;

52  
uZ
.
f
;

54 
absA
 = 
sign
 ? -(
uöt_Á°64_t
Ë
a
 : (uint_fast64_t)á;

55  
	`so·Êﬂt_n‹mRoundPackToF64
–
sign
, 0x43C, 
absA
 );

57 
	}
}

	@src/softfloat/source/include/internals.h

37 #i‚de‡
öã∫Æs_h


38 
	#öã∫Æs_h
 1

	)

40 
	~<°dboﬁ.h
>

41 
	~<°döt.h
>

42 
	~"¥imôives.h
"

43 
	~"so·Êﬂt_ty≥s.h
"

45 
	uui16_f16
 { 
uöt16_t
 
	mui
; 
Êﬂt16_t
 
	mf
; };

46 
	uui16_bf16
 { 
uöt16_t
 
	mui
; 
bÊﬂt16_t
 
	mf
; };

47 
	uui32_f32
 { 
uöt32_t
 
	mui
; 
Êﬂt32_t
 
	mf
; };

48 
	uui64_f64
 { 
uöt64_t
 
	mui
; 
Êﬂt64_t
 
	mf
; };

50 #ifde‡
SOFTFLOAT_FAST_INT64


51 
	uextF80M_extF80
 { 
extFlﬂt80M
 
	mfM
; 
extFlﬂt80_t
 
	mf
; };

52 
	uui128_f128
 { 
uöt128
 
	mui
; 
Êﬂt128_t
 
	mf
; };

56 
	mso·Êﬂt_mulAdd_subC
 = 1,

57 
	mso·Êﬂt_mulAdd_subProd
 = 2

62 
uöt_Á°32_t
 
so·Êﬂt_roundToUI32
–
boﬁ
, 
uöt_Á°64_t
, 
uöt_Á°8_t
, bool );

64 #ifde‡
SOFTFLOAT_FAST_INT64


65 
uöt_Á°64_t


66 
so·Êﬂt_roundToUI64
(

67 
boﬁ
, 
uöt_Á°64_t
, uöt_Á°64_t, 
uöt_Á°8_t
, bool );

69 
uöt_Á°64_t
 
so·Êﬂt_roundMToUI64
–
boﬁ
, 
uöt32_t
 *, 
uöt_Á°8_t
, bool );

72 
öt_Á°32_t
 
so·Êﬂt_roundToI32
–
boﬁ
, 
uöt_Á°64_t
, 
uöt_Á°8_t
, bool );

74 #ifde‡
SOFTFLOAT_FAST_INT64


75 
öt_Á°64_t


76 
so·Êﬂt_roundToI64
(

77 
boﬁ
, 
uöt_Á°64_t
, uöt_Á°64_t, 
uöt_Á°8_t
, bool );

79 
öt_Á°64_t
 
so·Êﬂt_roundMToI64
–
boﬁ
, 
uöt32_t
 *, 
uöt_Á°8_t
, bool );

84 
	#signF16UI
–
a
 ) ((
boﬁ
Ë((
uöt16_t
Ë◊)>>15))

	)

85 
	#expF16UI
–
a
 ) ((
öt_Á°8_t
Ë(◊)>>10Ë& 0x1F)

	)

86 
	#‰acF16UI
–
a
 ) (◊Ë& 0x03FF)

	)

87 
	#∑ckToF16UI
–
sign
, 
exp
, 
sig
 ) (((
uöt16_t
Ë(sign)<<15Ë+ ((uöt16_tË”xp)<<10Ë+ (sig))

	)

89 
	#isNaNF16UI
–
a
 ) (((~◊Ë& 0x7C00Ë=0Ë&& (◊Ë& 0x03FF))

	)

91 
	sexp8_sig16
 { 
öt_Á°8_t
 
	mexp
; 
uöt_Á°16_t
 
	msig
; };

92 
exp8_sig16
 
so·Êﬂt_n‹mSubn‹mÆF16Sig
–
uöt_Á°16_t
 );

94 
Êﬂt16_t
 
so·Êﬂt_roundPackToF16
–
boﬁ
, 
öt_Á°16_t
, 
uöt_Á°16_t
 );

95 
Êﬂt16_t
 
so·Êﬂt_n‹mRoundPackToF16
–
boﬁ
, 
öt_Á°16_t
, 
uöt_Á°16_t
 );

97 
Êﬂt16_t
 
so·Êﬂt_addMagsF16
–
uöt_Á°16_t
, uint_fast16_t );

98 
Êﬂt16_t
 
so·Êﬂt_subMagsF16
–
uöt_Á°16_t
, uint_fast16_t );

99 
Êﬂt16_t


100 
so·Êﬂt_mulAddF16
(

101 
uöt_Á°16_t
, uöt_Á°16_t, uöt_Á°16_t, 
uöt_Á°8_t
 );

105 
	#signBF16UI
–
a
 ) ((
boﬁ
Ë((
uöt16_t
Ë◊)>>15))

	)

106 
	#expBF16UI
–
a
 ) ((
öt_Á°16_t
Ë(◊)>>7Ë& 0xFF)

	)

107 
	#‰acBF16UI
–
a
 ) (◊Ë& 0x07F)

	)

108 
	#∑ckToBF16UI
–
sign
, 
exp
, 
sig
 ) (((
uöt16_t
Ë(sign)<<15Ë+ ((uöt16_tË”xp)<<7Ë+ (sig))

	)

110 
	#isNaNBF16UI
–
a
 ) (((~◊Ë& 0x7FC0Ë=0Ë&& (◊Ë& 0x07F))

	)

112 
bÊﬂt16_t
 
so·Êﬂt_roundPackToBF16
–
boﬁ
, 
öt_Á°16_t
, 
uöt_Á°16_t
 );

113 
exp8_sig16
 
so·Êﬂt_n‹mSubn‹mÆBF16Sig
–
uöt_Á°16_t
 );

117 
	#signF32UI
–
a
 ) ((
boﬁ
Ë((
uöt32_t
Ë◊)>>31))

	)

118 
	#expF32UI
–
a
 ) ((
öt_Á°16_t
Ë(◊)>>23Ë& 0xFF)

	)

119 
	#‰acF32UI
–
a
 ) (◊Ë& 0x007FFFFF)

	)

120 
	#∑ckToF32UI
–
sign
, 
exp
, 
sig
 ) (((
uöt32_t
Ë(sign)<<31Ë+ ((uöt32_tË”xp)<<23Ë+ (sig))

	)

122 
	#isNaNF32UI
–
a
 ) (((~◊Ë& 0x7F800000Ë=0Ë&& (◊Ë& 0x007FFFFF))

	)

124 
	sexp16_sig32
 { 
öt_Á°16_t
 
	mexp
; 
uöt_Á°32_t
 
	msig
; };

125 
exp16_sig32
 
so·Êﬂt_n‹mSubn‹mÆF32Sig
–
uöt_Á°32_t
 );

127 
Êﬂt32_t
 
so·Êﬂt_roundPackToF32
–
boﬁ
, 
öt_Á°16_t
, 
uöt_Á°32_t
 );

128 
Êﬂt32_t
 
so·Êﬂt_n‹mRoundPackToF32
–
boﬁ
, 
öt_Á°16_t
, 
uöt_Á°32_t
 );

130 
Êﬂt32_t
 
so·Êﬂt_addMagsF32
–
uöt_Á°32_t
, uint_fast32_t );

131 
Êﬂt32_t
 
so·Êﬂt_subMagsF32
–
uöt_Á°32_t
, uint_fast32_t );

132 
Êﬂt32_t


133 
so·Êﬂt_mulAddF32
(

134 
uöt_Á°32_t
, uöt_Á°32_t, uöt_Á°32_t, 
uöt_Á°8_t
 );

138 
	#signF64UI
–
a
 ) ((
boﬁ
Ë((
uöt64_t
Ë◊)>>63))

	)

139 
	#expF64UI
–
a
 ) ((
öt_Á°16_t
Ë(◊)>>52Ë& 0x7FF)

	)

140 
	#‰acF64UI
–
a
 ) (◊Ë& 
	`UINT64_C
–0x000FFFFFFFFFFFFF ))

	)

141 
	#∑ckToF64UI
–
sign
, 
exp
, 
sig
 ) ((
uöt64_t
Ë(((
uöt_Á°64_t
Ë(sign)<<63Ë+ ((uöt_Á°64_tË”xp)<<52Ë+ (sig)))

	)

143 
	#isNaNF64UI
–
a
 ) (((~◊Ë& 
	`UINT64_C
–0x7FF0000000000000 )Ë=0Ë&& (◊Ë& UINT64_C–0x000FFFFFFFFFFFFF )))

	)

145 
	sexp16_sig64
 { 
öt_Á°16_t
 
	mexp
; 
uöt_Á°64_t
 
	msig
; };

146 
exp16_sig64
 
so·Êﬂt_n‹mSubn‹mÆF64Sig
–
uöt_Á°64_t
 );

148 
Êﬂt64_t
 
so·Êﬂt_roundPackToF64
–
boﬁ
, 
öt_Á°16_t
, 
uöt_Á°64_t
 );

149 
Êﬂt64_t
 
so·Êﬂt_n‹mRoundPackToF64
–
boﬁ
, 
öt_Á°16_t
, 
uöt_Á°64_t
 );

151 
Êﬂt64_t
 
so·Êﬂt_addMagsF64
–
uöt_Á°64_t
, uöt_Á°64_t, 
boﬁ
 );

152 
Êﬂt64_t
 
so·Êﬂt_subMagsF64
–
uöt_Á°64_t
, uöt_Á°64_t, 
boﬁ
 );

153 
Êﬂt64_t


154 
so·Êﬂt_mulAddF64
(

155 
uöt_Á°64_t
, uöt_Á°64_t, uöt_Á°64_t, 
uöt_Á°8_t
 );

159 
	#signExtF80UI64
–
a64
 ) ((
boﬁ
Ë((
uöt16_t
Ë◊64)>>15))

	)

160 
	#expExtF80UI64
–
a64
 ) (◊64Ë& 0x7FFF)

	)

161 
	#∑ckToExtF80UI64
–
sign
, 
exp
 ) ((
uöt_Á°16_t
Ë(sign)<<15 | (exp))

	)

163 
	#isNaNExtF80UI
–
a64
, 
a0
 ) (((◊64Ë& 0x7FFFË=0x7FFFË&& (◊0Ë& 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF )))

	)

165 #ifde‡
SOFTFLOAT_FAST_INT64


170 
	sexp32_sig64
 { 
öt_Á°32_t
 
	mexp
; 
uöt64_t
 
	msig
; };

171 
exp32_sig64
 
so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
uöt_Á°64_t
 );

173 
extFlﬂt80_t


174 
so·Êﬂt_roundPackToExtF80
(

175 
boﬁ
, 
öt_Á°32_t
, 
uöt_Á°64_t
, uöt_Á°64_t, 
uöt_Á°8_t
 );

176 
extFlﬂt80_t


177 
so·Êﬂt_n‹mRoundPackToExtF80
(

178 
boﬁ
, 
öt_Á°32_t
, 
uöt_Á°64_t
, uöt_Á°64_t, 
uöt_Á°8_t
 );

180 
extFlﬂt80_t


181 
so·Êﬂt_addMagsExtF80
(

182 
uöt_Á°16_t
, 
uöt_Á°64_t
, uöt_Á°16_t, uöt_Á°64_t, 
boﬁ
 );

183 
extFlﬂt80_t


184 
so·Êﬂt_subMagsExtF80
(

185 
uöt_Á°16_t
, 
uöt_Á°64_t
, uöt_Á°16_t, uöt_Á°64_t, 
boﬁ
 );

189 
	#signF128UI64
–
a64
 ) ((
boﬁ
Ë((
uöt64_t
Ë◊64)>>63))

	)

190 
	#expF128UI64
–
a64
 ) ((
öt_Á°32_t
Ë(◊64)>>48Ë& 0x7FFF)

	)

191 
	#‰acF128UI64
–
a64
 ) (◊64Ë& 
	`UINT64_C
–0x0000FFFFFFFFFFFF ))

	)

192 
	#∑ckToF128UI64
–
sign
, 
exp
, 
sig64
 ) (((
uöt_Á°64_t
Ë(sign)<<63Ë+ ((uöt_Á°64_tË”xp)<<48Ë+ (sig64))

	)

194 
	#isNaNF128UI
–
a64
, 
a0
 ) (((~◊64Ë& 
	`UINT64_C
–0x7FFF000000000000 )Ë=0Ë&& (a0 || (◊64Ë& UINT64_C–0x0000FFFFFFFFFFFF ))))

	)

196 
	sexp32_sig128
 { 
öt_Á°32_t
 
	mexp
; 
uöt128
 
	msig
; };

197 
exp32_sig128


198 
so·Êﬂt_n‹mSubn‹mÆF128Sig
–
uöt_Á°64_t
, uint_fast64_t );

200 
Êﬂt128_t


201 
so·Êﬂt_roundPackToF128
(

202 
boﬁ
, 
öt_Á°32_t
, 
uöt_Á°64_t
, uint_fast64_t, uint_fast64_t );

203 
Êﬂt128_t


204 
so·Êﬂt_n‹mRoundPackToF128
(

205 
boﬁ
, 
öt_Á°32_t
, 
uöt_Á°64_t
, uint_fast64_t );

207 
Êﬂt128_t


208 
so·Êﬂt_addMagsF128
(

209 
uöt_Á°64_t
, uöt_Á°64_t, uöt_Á°64_t, uöt_Á°64_t, 
boﬁ
 );

210 
Êﬂt128_t


211 
so·Êﬂt_subMagsF128
(

212 
uöt_Á°64_t
, uöt_Á°64_t, uöt_Á°64_t, uöt_Á°64_t, 
boﬁ
 );

213 
Êﬂt128_t


214 
so·Êﬂt_mulAddF128
(

215 
uöt_Á°64_t
,

216 
uöt_Á°64_t
,

217 
uöt_Á°64_t
,

218 
uöt_Á°64_t
,

219 
uöt_Á°64_t
,

220 
uöt_Á°64_t
,

221 
uöt_Á°8_t


229 
boﬁ


230 
so·Êﬂt_åyPr›ag©eNaNExtF80M
(

231 c⁄° 
extFlﬂt80M
 *,

232 c⁄° 
extFlﬂt80M
 *,

233 
extFlﬂt80M
 *

235 
so·Êﬂt_övÆidExtF80M
–
extFlﬂt80M
 * );

237 
so·Êﬂt_n‹mExtF80SigM
–
uöt64_t
 * );

240 
so·Êﬂt_roundPackMToExtF80M
(

241 
boﬁ
, 
öt32_t
, 
uöt32_t
 *, 
uöt_Á°8_t
, 
extFlﬂt80M
 * );

243 
so·Êﬂt_n‹mRoundPackMToExtF80M
(

244 
boﬁ
, 
öt32_t
, 
uöt32_t
 *, 
uöt_Á°8_t
, 
extFlﬂt80M
 * );

247 
so·Êﬂt_addExtF80M
(

248 c⁄° 
extFlﬂt80M
 *,

249 c⁄° 
extFlﬂt80M
 *,

250 
extFlﬂt80M
 *,

251 
boﬁ


255 
so·Êﬂt_com∑ªN⁄n‹mExtF80M
(

256 c⁄° 
extFlﬂt80M
 *, const extFloat80M * );

260 
	#signF128UI96
–
a96
 ) ((
boﬁ
Ë((
uöt32_t
Ë◊96)>>31))

	)

261 
	#expF128UI96
–
a96
 ) ((
öt32_t
Ë(◊96)>>16Ë& 0x7FFF)

	)

262 
	#‰acF128UI96
–
a96
 ) (◊96Ë& 0x0000FFFF)

	)

263 
	#∑ckToF128UI96
–
sign
, 
exp
, 
sig96
 ) (((
uöt32_t
Ë(sign)<<31Ë+ ((uöt32_tË”xp)<<16Ë+ (sig96))

	)

265 
boﬁ
 
so·Êﬂt_isNaNF128M
–c⁄° 
uöt32_t
 * );

267 
boﬁ


268 
so·Êﬂt_åyPr›ag©eNaNF128M
(

269 c⁄° 
uöt32_t
 *, const uint32_t *, uint32_t * );

270 
so·Êﬂt_övÆidF128M
–
uöt32_t
 * );

272 
so·Êﬂt_shi·N‹mSigF128M
–c⁄° 
uöt32_t
 *, 
uöt_Á°8_t
, uint32_t * );

274 
so·Êﬂt_roundPackMToF128M
–
boﬁ
, 
öt32_t
, 
uöt32_t
 *, uint32_t * );

275 
so·Êﬂt_n‹mRoundPackMToF128M
–
boﬁ
, 
öt32_t
, 
uöt32_t
 *, uint32_t * );

278 
so·Êﬂt_addF128M
–c⁄° 
uöt32_t
 *, c⁄° uöt32_à*, uöt32_à*, 
boﬁ
 );

280 
so·Êﬂt_mulAddF128M
(

281 c⁄° 
uöt32_t
 *,

282 c⁄° 
uöt32_t
 *,

283 c⁄° 
uöt32_t
 *,

284 
uöt32_t
 *,

285 
uöt_Á°8_t


	@src/softfloat/source/include/opts-GCC.h

37 #i‚de‡
›ts_GCC_h


38 
	#›ts_GCC_h
 1

	)

40 #ifde‡
INLINE


42 
	~<°döt.h
>

43 
	~"¥imôiveTy≥s.h
"

45 #ifde‡
SOFTFLOAT_BUILTIN_CLZ


47 
INLINE
 
uöt_Á°8_t
 
	$so·Êﬂt_cou¡LódögZîos16
–
uöt16_t
 
a
 )

48 {  
a
 ? 
	`__buûtö_˛z
–®Ë- 16 : 16; 
	}
}

49 
	#so·Êﬂt_cou¡LódögZîos16
 
so·Êﬂt_cou¡LódögZîos16


	)

51 
INLINE
 
uöt_Á°8_t
 
	$so·Êﬂt_cou¡LódögZîos32
–
uöt32_t
 
a
 )

52 {  
a
 ? 
	`__buûtö_˛z
–®Ë: 32; 
	}
}

53 
	#so·Êﬂt_cou¡LódögZîos32
 
so·Êﬂt_cou¡LódögZîos32


	)

55 
INLINE
 
uöt_Á°8_t
 
	$so·Êﬂt_cou¡LódögZîos64
–
uöt64_t
 
a
 )

56 {  
a
 ? 
	`__buûtö_˛zŒ
–®Ë: 64; 
	}
}

57 
	#so·Êﬂt_cou¡LódögZîos64
 
so·Êﬂt_cou¡LódögZîos64


	)

61 #ifde‡
SOFTFLOAT_INTRINSIC_INT128


63 
INLINE
 
uöt128
 
	$so·Êﬂt_mul64ByShi·ed32To128
–
uöt64_t
 
a
, 
uöt32_t
 
b
 )

65 uni⁄ { 
__öt128
 
ui
; 
uöt128
 
s
; } 
uZ
;

66 
uZ
.
ui
 = (
__öt128
Ë
a
 * ((
uöt_Á°64_t
Ë
b
<<32);

67  
uZ
.
s
;

68 
	}
}

69 
	#so·Êﬂt_mul64ByShi·ed32To128
 
so·Êﬂt_mul64ByShi·ed32To128


	)

71 
INLINE
 
uöt128
 
	$so·Êﬂt_mul64To128
–
uöt64_t
 
a
, uöt64_à
b
 )

73 uni⁄ { 
__öt128
 
ui
; 
uöt128
 
s
; } 
uZ
;

74 
uZ
.
ui
 = (
__öt128
Ë
a
 * 
b
;

75  
uZ
.
s
;

76 
	}
}

77 
	#so·Êﬂt_mul64To128
 
so·Êﬂt_mul64To128


	)

79 
INLINE


80 
uöt128
 
	$so·Êﬂt_mul128By32
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt32_t
 
b
 )

82 uni⁄ { 
__öt128
 
ui
; 
uöt128
 
s
; } 
uZ
;

83 
uZ
.
ui
 = ((
__öt128
Ë
a64
<<64 | 
a0
Ë* 
b
;

84  
uZ
.
s
;

85 
	}
}

86 
	#so·Êﬂt_mul128By32
 
so·Êﬂt_mul128By32


	)

88 
INLINE


90 
	$so·Êﬂt_mul128To256M
(

91 
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
, uöt64_à*
zPå
 )

93 
__öt128
 
z0
, 
mid1
, 
mid
, 
z128
;

94 
z0
 = (
__öt128
Ë
a0
 * 
b0
;

95 
mid1
 = (
__öt128
Ë
a64
 * 
b0
;

96 
mid
 = 
mid1
 + (
__öt128
Ë
a0
 * 
b64
;

97 
z128
 = (
__öt128
Ë
a64
 * 
b64
;

98 
z128
 +(
__öt128
Ë(
mid
 < 
mid1
)<<64 | mid>>64;

99 
mid
 <<= 64;

100 
z0
 +
mid
;

101 
z128
 +(
z0
 < 
mid
);

102 
zPå
[
	`ödexW‹d
–4, 0 )] = 
z0
;

103 
zPå
[
	`ödexW‹d
–4, 1 )] = 
z0
>>64;

104 
zPå
[
	`ödexW‹d
–4, 2 )] = 
z128
;

105 
zPå
[
	`ödexW‹d
–4, 3 )] = 
z128
>>64;

106 
	}
}

107 
	#so·Êﬂt_mul128To256M
 
so·Êﬂt_mul128To256M


	)

	@src/softfloat/source/include/primitiveTypes.h

37 #i‚de‡
¥imôiveTy≥s_h


38 
	#¥imôiveTy≥s_h
 1

	)

40 
	~<°döt.h
>

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 #ifde‡
LITTLEENDIAN


45 
	suöt128
 { 
uöt64_t
 
	mv0
, 
	mv64
; };

46 
	suöt64_exåa
 { 
uöt64_t
 
	mexåa
, 
	mv
; };

47 
	suöt128_exåa
 { 
uöt64_t
 
	mexåa
; 
uöt128
 
	mv
; };

49 
	suöt128
 { 
uöt64_t
 
	mv64
, 
	mv0
; };

50 
	suöt64_exåa
 { 
uöt64_t
 
	mv
, 
	mexåa
; };

51 
	suöt128_exåa
 { 
uöt128
 
	mv
; 
uöt64_t
 
	mexåa
; };

60 #ifde‡
LITTLEENDIAN


61 
	#w‹dIn¸
 1

	)

62 
	#ödexW‹d
–
tŸÆ
, 
n
 ) (n)

	)

63 
	#ödexW‹dHi
–
tŸÆ
 ) (—ŸÆË- 1)

	)

64 
	#ödexW‹dLo
–
tŸÆ
 ) 0

	)

65 
	#ödexMu…iw‹d
–
tŸÆ
, 
m
, 
n
 ) (n)

	)

66 
	#ödexMu…iw‹dHi
–
tŸÆ
, 
n
 ) (—ŸÆË- (n))

	)

67 
	#ödexMu…iw‹dLo
–
tŸÆ
, 
n
 ) 0

	)

68 
	#ödexMu…iw‹dHiBut
–
tŸÆ
, 
n
 ) (n)

	)

69 
	#ödexMu…iw‹dLoBut
–
tŸÆ
, 
n
 ) 0

	)

70 
	#INIT_UINTM4
–
v3
, 
v2
, 
v1
, 
v0
 ) { v0, v1, v2, v3 }

	)

72 
	#w‹dIn¸
 -1

	)

73 
	#ödexW‹d
–
tŸÆ
, 
n
 ) (—ŸÆË- 1 - (n))

	)

74 
	#ödexW‹dHi
–
tŸÆ
 ) 0

	)

75 
	#ödexW‹dLo
–
tŸÆ
 ) (—ŸÆË- 1)

	)

76 
	#ödexMu…iw‹d
–
tŸÆ
, 
m
, 
n
 ) (—ŸÆË- 1 - (m))

	)

77 
	#ödexMu…iw‹dHi
–
tŸÆ
, 
n
 ) 0

	)

78 
	#ödexMu…iw‹dLo
–
tŸÆ
, 
n
 ) (—ŸÆË- (n))

	)

79 
	#ödexMu…iw‹dHiBut
–
tŸÆ
, 
n
 ) 0

	)

80 
	#ödexMu…iw‹dLoBut
–
tŸÆ
, 
n
 ) (n)

	)

81 
	#INIT_UINTM4
–
v3
, 
v2
, 
v1
, 
v0
 ) { v3, v2, v1, v0 }

	)

	@src/softfloat/source/include/primitives.h

37 #i‚de‡
¥imôives_h


38 
	#¥imôives_h
 1

	)

40 
	~<°dboﬁ.h
>

41 
	~<°döt.h
>

42 
	~"¥imôiveTy≥s.h
"

44 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam64


51 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

52 
INLINE


53 
uöt64_t
 
	$so·Êﬂt_sh‹tShi·RightJam64
–
uöt64_t
 
a
, 
uöt_Á°8_t
 
di°
 )

54 {  
a
>>
di°
 | (◊ & (((
uöt_Á°64_t
Ë1<<di°Ë- 1)Ë!0); 
	}
}

56 
uöt64_t
 
so·Êﬂt_sh‹tShi·RightJam64
–uöt64_à
a
, 
uöt_Á°8_t
 
di°
 );

60 #i‚de‡
so·Êﬂt_shi·RightJam32


70 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

71 
INLINE
 
uöt32_t
 
	$so·Êﬂt_shi·RightJam32
–
uöt32_t
 
a
, 
uöt_Á°16_t
 
di°
 )

74 (
di°
 < 31Ë? 
a
>>di° | ((
uöt32_t
) (a<<(-dist & 31)) != 0) : (a != 0);

75 
	}
}

77 
uöt32_t
 
so·Êﬂt_shi·RightJam32
–uöt32_à
a
, 
uöt_Á°16_t
 
di°
 );

81 #i‚de‡
so·Êﬂt_shi·RightJam64


91 #i‡
deföed
 
INLINE_LEVEL
 && (3 <= INLINE_LEVEL)

92 
INLINE
 
uöt64_t
 
	$so·Êﬂt_shi·RightJam64
–
uöt64_t
 
a
, 
uöt_Á°32_t
 
di°
 )

95 (
di°
 < 63Ë? 
a
>>di° | ((
uöt64_t
) (a<<(-dist & 63)) != 0) : (a != 0);

96 
	}
}

98 
uöt64_t
 
so·Êﬂt_shi·RightJam64
–uöt64_à
a
, 
uöt_Á°32_t
 
di°
 );

107 c⁄° 
uöt_Àa°8_t
 
so·Êﬂt_cou¡LódögZîos8
[256];

109 #i‚de‡
so·Êﬂt_cou¡LódögZîos16


114 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

115 
INLINE
 
uöt_Á°8_t
 
	$so·Êﬂt_cou¡LódögZîos16
–
uöt16_t
 
a
 )

117 
uöt_Á°8_t
 
cou¡
 = 8;

118 i‡–0x100 <
a
 ) {

119 
cou¡
 = 0;

120 
a
 >>= 8;

122 
cou¡
 +
so·Êﬂt_cou¡LódögZîos8
[
a
];

123  
cou¡
;

124 
	}
}

126 
uöt_Á°8_t
 
so·Êﬂt_cou¡LódögZîos16
–
uöt16_t
 
a
 );

130 #i‚de‡
so·Êﬂt_cou¡LódögZîos32


135 #i‡
deföed
 
INLINE_LEVEL
 && (3 <= INLINE_LEVEL)

136 
INLINE
 
uöt_Á°8_t
 
	$so·Êﬂt_cou¡LódögZîos32
–
uöt32_t
 
a
 )

138 
uöt_Á°8_t
 
cou¡
 = 0;

139 i‡–
a
 < 0x10000 ) {

140 
cou¡
 = 16;

141 
a
 <<= 16;

143 i‡–
a
 < 0x1000000 ) {

144 
cou¡
 += 8;

145 
a
 <<= 8;

147 
cou¡
 +
so·Êﬂt_cou¡LódögZîos8
[
a
>>24];

148  
cou¡
;

149 
	}
}

151 
uöt_Á°8_t
 
so·Êﬂt_cou¡LódögZîos32
–
uöt32_t
 
a
 );

155 #i‚de‡
so·Êﬂt_cou¡LódögZîos64


160 
uöt_Á°8_t
 
so·Êﬂt_cou¡LódögZîos64
–
uöt64_t
 
a
 );

163 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecù_1k0s
[16];

164 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecù_1k1s
[16];

166 #i‚de‡
so·Êﬂt_≠¥oxRecù32_1


178 #ifde‡
SOFTFLOAT_FAST_DIV64TO32


179 
	#so·Êﬂt_≠¥oxRecù32_1
–
a
 ) ((
uöt32_t
Ë(
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) / (uöt32_tË◊)))

	)

181 
uöt32_t
 
so·Êﬂt_≠¥oxRecù32_1
–uöt32_à
a
 );

185 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecùSqπ_1k0s
[16];

186 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecùSqπ_1k1s
[16];

188 #i‚de‡
so·Êﬂt_≠¥oxRecùSqπ32_1


207 
uöt32_t
 
so·Êﬂt_≠¥oxRecùSqπ32_1
–
oddExpA
, uöt32_à
a
 );

210 #ifde‡
SOFTFLOAT_FAST_INT64


217 #i‚de‡
so·Êﬂt_eq128


223 #i‡
deföed
 
INLINE_LEVEL
 && (1 <= INLINE_LEVEL)

224 
INLINE


225 
boﬁ
 
	$so·Êﬂt_eq128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

226 {  (
a64
 =
b64
Ë&& (
a0
 =
b0
); 
	}
}

228 
boﬁ
 
so·Êﬂt_eq128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 );

232 #i‚de‡
so·Êﬂt_À128


238 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

239 
INLINE


240 
boﬁ
 
	$so·Êﬂt_À128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

241 {  (
a64
 < 
b64
Ë|| (◊64 =b64Ë&& (
a0
 <
b0
)); 
	}
}

243 
boﬁ
 
so·Êﬂt_À128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 );

247 #i‚de‡
so·Êﬂt_…128


253 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

254 
INLINE


255 
boﬁ
 
	$so·Êﬂt_…128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

256 {  (
a64
 < 
b64
Ë|| (◊64 =b64Ë&& (
a0
 < 
b0
)); 
	}
}

258 
boﬁ
 
so·Êﬂt_…128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 );

262 #i‚de‡
so·Êﬂt_sh‹tShi·Le·128


267 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

268 
INLINE


269 
uöt128


270 
	$so·Êﬂt_sh‹tShi·Le·128
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 )

272 
uöt128
 
z
;

273 
z
.
v64
 = 
a64
<<
di°
 | 
a0
>>(-dist & 63);

274 
z
.
v0
 = 
a0
<<
di°
;

275  
z
;

276 
	}
}

278 
uöt128


279 
so·Êﬂt_sh‹tShi·Le·128
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 );

283 #i‚de‡
so·Êﬂt_sh‹tShi·Right128


288 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

289 
INLINE


290 
uöt128


291 
	$so·Êﬂt_sh‹tShi·Right128
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 )

293 
uöt128
 
z
;

294 
z
.
v64
 = 
a64
>>
di°
;

295 
z
.
v0
 = 
a64
<<(-
di°
 & 63Ë| 
a0
>>dist;

296  
z
;

297 
	}
}

299 
uöt128


300 
so·Êﬂt_sh‹tShi·Right128
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 );

304 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam64Exåa


309 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

310 
INLINE


311 
uöt64_exåa


312 
	$so·Êﬂt_sh‹tShi·RightJam64Exåa
(

313 
uöt64_t
 
a
, uöt64_à
exåa
, 
uöt_Á°8_t
 
di°
 )

315 
uöt64_exåa
 
z
;

316 
z
.
v
 = 
a
>>
di°
;

317 
z
.
exåa
 = 
a
<<(-
di°
 & 63) | (extra != 0);

318  
z
;

319 
	}
}

321 
uöt64_exåa


322 
so·Êﬂt_sh‹tShi·RightJam64Exåa
(

323 
uöt64_t
 
a
, uöt64_à
exåa
, 
uöt_Á°8_t
 
di°
 );

327 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam128


335 #i‡
deföed
 
INLINE_LEVEL
 && (3 <= INLINE_LEVEL)

336 
INLINE


337 
uöt128


338 
	$so·Êﬂt_sh‹tShi·RightJam128
(

339 
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 )

341 
uöt_Á°8_t
 
√gDi°
 = -
di°
;

342 
uöt128
 
z
;

343 
z
.
v64
 = 
a64
>>
di°
;

344 
z
.
v0
 =

345 
a64
<<(
√gDi°
 & 63Ë| 
a0
>>
di°


346 | ((
uöt64_t
Ë(
a0
<<(
√gDi°
 & 63)) != 0);

347  
z
;

348 
	}
}

350 
uöt128


351 
so·Êﬂt_sh‹tShi·RightJam128
(

352 
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 );

356 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam128Exåa


361 #i‡
deföed
 
INLINE_LEVEL
 && (3 <= INLINE_LEVEL)

362 
INLINE


363 
uöt128_exåa


364 
	$so·Êﬂt_sh‹tShi·RightJam128Exåa
(

365 
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
exåa
, 
uöt_Á°8_t
 
di°
 )

367 
uöt_Á°8_t
 
√gDi°
 = -
di°
;

368 
uöt128_exåa
 
z
;

369 
z
.
v
.
v64
 = 
a64
>>
di°
;

370 
z
.
v
.
v0
 = 
a64
<<(
√gDi°
 & 63Ë| 
a0
>>
di°
;

371 
z
.
exåa
 = 
a0
<<(
√gDi°
 & 63) | (extra != 0);

372  
z
;

373 
	}
}

375 
uöt128_exåa


376 
so·Êﬂt_sh‹tShi·RightJam128Exåa
(

377 
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
exåa
, 
uöt_Á°8_t
 
di°
 );

381 #i‚de‡
so·Êﬂt_shi·RightJam64Exåa


398 #i‡
deföed
 
INLINE_LEVEL
 && (4 <= INLINE_LEVEL)

399 
INLINE


400 
uöt64_exåa


401 
	$so·Êﬂt_shi·RightJam64Exåa
(

402 
uöt64_t
 
a
, uöt64_à
exåa
, 
uöt_Á°32_t
 
di°
 )

404 
uöt64_exåa
 
z
;

405 i‡–
di°
 < 64 ) {

406 
z
.
v
 = 
a
>>
di°
;

407 
z
.
exåa
 = 
a
<<(-
di°
 & 63);

409 
z
.
v
 = 0;

410 
z
.
exåa
 = (
di°
 =64Ë? 
a
 : (a != 0);

412 
z
.
exåa
 |= (extra != 0);

413  
z
;

414 
	}
}

416 
uöt64_exåa


417 
so·Êﬂt_shi·RightJam64Exåa
(

418 
uöt64_t
 
a
, uöt64_à
exåa
, 
uöt_Á°32_t
 
di°
 );

422 #i‚de‡
so·Êﬂt_shi·RightJam128


433 
uöt128


434 
so·Êﬂt_shi·RightJam128
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°32_t
 
di°
 );

437 #i‚de‡
so·Êﬂt_shi·RightJam128Exåa


455 
uöt128_exåa


456 
so·Êﬂt_shi·RightJam128Exåa
(

457 
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
exåa
, 
uöt_Á°32_t
 
di°
 );

460 #i‚de‡
so·Êﬂt_shi·RightJam256M


474 
so·Êﬂt_shi·RightJam256M
(

475 c⁄° 
uöt64_t
 *
aPå
, 
uöt_Á°32_t
 
di°
, uöt64_à*
zPå
 );

478 #i‚de‡
so·Êﬂt_add128


484 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

485 
INLINE


486 
uöt128


487 
	$so·Êﬂt_add128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

489 
uöt128
 
z
;

490 
z
.
v0
 = 
a0
 + 
b0
;

491 
z
.
v64
 = 
a64
 + 
b64
 + (z.
v0
 < 
a0
);

492  
z
;

493 
	}
}

495 
uöt128


496 
so·Êﬂt_add128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 );

500 #i‚de‡
so·Êﬂt_add256M


509 
so·Êﬂt_add256M
(

510 c⁄° 
uöt64_t
 *
aPå
, c⁄° uöt64_à*
bPå
, uöt64_à*
zPå
 );

513 #i‚de‡
so·Êﬂt_sub128


519 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

520 
INLINE


521 
uöt128


522 
	$so·Êﬂt_sub128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

524 
uöt128
 
z
;

525 
z
.
v0
 = 
a0
 - 
b0
;

526 
z
.
v64
 = 
a64
 - 
b64
;

527 
z
.
v64
 -(
a0
 < 
b0
);

528  
z
;

529 
	}
}

531 
uöt128


532 
so·Êﬂt_sub128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 );

536 #i‚de‡
so·Êﬂt_sub256M


546 
so·Êﬂt_sub256M
(

547 c⁄° 
uöt64_t
 *
aPå
, c⁄° uöt64_à*
bPå
, uöt64_à*
zPå
 );

550 #i‚de‡
so·Êﬂt_mul64ByShi·ed32To128


554 #i‡
deföed
 
INLINE_LEVEL
 && (3 <= INLINE_LEVEL)

555 
INLINE
 
uöt128
 
	$so·Êﬂt_mul64ByShi·ed32To128
–
uöt64_t
 
a
, 
uöt32_t
 
b
 )

557 
uöt_Á°64_t
 
mid
;

558 
uöt128
 
z
;

559 
mid
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë
a
 * 
b
;

560 
z
.
v0
 = 
mid
<<32;

561 
z
.
v64
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë(
a
>>32Ë* 
b
 + (
mid
>>32);

562  
z
;

563 
	}
}

565 
uöt128
 
so·Êﬂt_mul64ByShi·ed32To128
–
uöt64_t
 
a
, 
uöt32_t
 
b
 );

569 #i‚de‡
so·Êﬂt_mul64To128


573 
uöt128
 
so·Êﬂt_mul64To128
–
uöt64_t
 
a
, uöt64_à
b
 );

576 #i‚de‡
so·Êﬂt_mul128By32


582 #i‡
deföed
 
INLINE_LEVEL
 && (4 <= INLINE_LEVEL)

583 
INLINE


584 
uöt128
 
	$so·Êﬂt_mul128By32
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt32_t
 
b
 )

586 
uöt128
 
z
;

587 
uöt_Á°64_t
 
mid
;

588 
uöt_Á°32_t
 
ˇºy
;

589 
z
.
v0
 = 
a0
 * 
b
;

590 
mid
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë(
a0
>>32Ë* 
b
;

591 
ˇºy
 = (
uöt32_t
Ë((
uöt_Á°32_t
Ë(
z
.
v0
>>32Ë- (uöt_Á°32_tË
mid
);

592 
z
.
v64
 = 
a64
 * 
b
 + (
uöt_Á°32_t
Ë((
mid
 + 
ˇºy
)>>32);

593  
z
;

594 
	}
}

596 
uöt128
 
so·Êﬂt_mul128By32
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt32_t
 
b
 );

600 #i‚de‡
so·Êﬂt_mul128To256M


609 
so·Êﬂt_mul128To256M
(

610 
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
, uöt64_à*
zPå
 );

620 #i‚de‡
so·Êﬂt_com∑ª96M


629 
öt_Á°8_t
 
so·Êﬂt_com∑ª96M
–c⁄° 
uöt32_t
 *
aPå
, c⁄° uöt32_à*
bPå
 );

632 #i‚de‡
so·Êﬂt_com∑ª128M


641 
öt_Á°8_t


642 
so·Êﬂt_com∑ª128M
–c⁄° 
uöt32_t
 *
aPå
, c⁄° uöt32_à*
bPå
 );

645 #i‚de‡
so·Êﬂt_sh‹tShi·Le·64To96M


653 #i‡
deföed
 
INLINE_LEVEL
 && (2 <= INLINE_LEVEL)

654 
INLINE


656 
	$so·Êﬂt_sh‹tShi·Le·64To96M
(

657 
uöt64_t
 
a
, 
uöt_Á°8_t
 
di°
, 
uöt32_t
 *
zPå
 )

659 
zPå
[
	`ödexW‹d
–3, 0 )] = (
uöt32_t
Ë
a
<<
di°
;

660 
a
 >>32 - 
di°
;

661 
zPå
[
	`ödexW‹d
–3, 2 )] = 
a
>>32;

662 
zPå
[
	`ödexW‹d
–3, 1 )] = 
a
;

663 
	}
}

666 
so·Êﬂt_sh‹tShi·Le·64To96M
(

667 
uöt64_t
 
a
, 
uöt_Á°8_t
 
di°
, 
uöt32_t
 *
zPå
 );

671 #i‚de‡
so·Êﬂt_sh‹tShi·Le·M


682 
so·Êﬂt_sh‹tShi·Le·M
(

683 
uöt_Á°8_t
 
size_w‹ds
,

684 c⁄° 
uöt32_t
 *
aPå
,

685 
uöt_Á°8_t
 
di°
,

686 
uöt32_t
 *
zPå


690 #i‚de‡
so·Êﬂt_sh‹tShi·Le·96M


695 
	#so·Êﬂt_sh‹tShi·Le·96M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_sh‹tShi·Le·M
–3,áPå, di°, zPå )

	)

698 #i‚de‡
so·Êﬂt_sh‹tShi·Le·128M


703 
	#so·Êﬂt_sh‹tShi·Le·128M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_sh‹tShi·Le·M
–4,áPå, di°, zPå )

	)

706 #i‚de‡
so·Êﬂt_sh‹tShi·Le·160M


711 
	#so·Êﬂt_sh‹tShi·Le·160M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_sh‹tShi·Le·M
–5,áPå, di°, zPå )

	)

714 #i‚de‡
so·Êﬂt_shi·Le·M


726 
so·Êﬂt_shi·Le·M
(

727 
uöt_Á°8_t
 
size_w‹ds
,

728 c⁄° 
uöt32_t
 *
aPå
,

729 
uöt32_t
 
di°
,

730 
uöt32_t
 *
zPå


734 #i‚de‡
so·Êﬂt_shi·Le·96M


739 
	#so·Êﬂt_shi·Le·96M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_shi·Le·M
–3,áPå, di°, zPå )

	)

742 #i‚de‡
so·Êﬂt_shi·Le·128M


747 
	#so·Êﬂt_shi·Le·128M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_shi·Le·M
–4,áPå, di°, zPå )

	)

750 #i‚de‡
so·Êﬂt_shi·Le·160M


755 
	#so·Êﬂt_shi·Le·160M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_shi·Le·M
–5,áPå, di°, zPå )

	)

758 #i‚de‡
so·Êﬂt_sh‹tShi·RightM


769 
so·Êﬂt_sh‹tShi·RightM
(

770 
uöt_Á°8_t
 
size_w‹ds
,

771 c⁄° 
uöt32_t
 *
aPå
,

772 
uöt_Á°8_t
 
di°
,

773 
uöt32_t
 *
zPå


777 #i‚de‡
so·Êﬂt_sh‹tShi·Right128M


782 
	#so·Êﬂt_sh‹tShi·Right128M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_sh‹tShi·RightM
–4,áPå, di°, zPå )

	)

785 #i‚de‡
so·Êﬂt_sh‹tShi·Right160M


790 
	#so·Êﬂt_sh‹tShi·Right160M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_sh‹tShi·RightM
–5,áPå, di°, zPå )

	)

793 #i‚de‡
so·Êﬂt_sh‹tShi·RightJamM


805 
so·Êﬂt_sh‹tShi·RightJamM
(

806 
uöt_Á°8_t
, c⁄° 
uöt32_t
 *, uint_fast8_t, uint32_t * );

809 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam160M


814 
	#so·Êﬂt_sh‹tShi·RightJam160M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_sh‹tShi·RightJamM
–5,áPå, di°, zPå )

	)

817 #i‚de‡
so·Êﬂt_shi·RightM


829 
so·Êﬂt_shi·RightM
(

830 
uöt_Á°8_t
 
size_w‹ds
,

831 c⁄° 
uöt32_t
 *
aPå
,

832 
uöt32_t
 
di°
,

833 
uöt32_t
 *
zPå


837 #i‚de‡
so·Êﬂt_shi·Right96M


842 
	#so·Êﬂt_shi·Right96M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_shi·RightM
–3,áPå, di°, zPå )

	)

845 #i‚de‡
so·Êﬂt_shi·RightJamM


860 
so·Êﬂt_shi·RightJamM
(

861 
uöt_Á°8_t
 
size_w‹ds
,

862 c⁄° 
uöt32_t
 *
aPå
,

863 
uöt32_t
 
di°
,

864 
uöt32_t
 *
zPå


868 #i‚de‡
so·Êﬂt_shi·RightJam96M


873 
	#so·Êﬂt_shi·RightJam96M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_shi·RightJamM
–3,áPå, di°, zPå )

	)

876 #i‚de‡
so·Êﬂt_shi·RightJam128M


881 
	#so·Êﬂt_shi·RightJam128M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_shi·RightJamM
–4,áPå, di°, zPå )

	)

884 #i‚de‡
so·Êﬂt_shi·RightJam160M


889 
	#so·Êﬂt_shi·RightJam160M
–
aPå
, 
di°
, 
zPå
 ) 
	`so·Êﬂt_shi·RightJamM
–5,áPå, di°, zPå )

	)

892 #i‚de‡
so·Êﬂt_addM


902 
so·Êﬂt_addM
(

903 
uöt_Á°8_t
 
size_w‹ds
,

904 c⁄° 
uöt32_t
 *
aPå
,

905 c⁄° 
uöt32_t
 *
bPå
,

906 
uöt32_t
 *
zPå


910 #i‚de‡
so·Êﬂt_add96M


915 
	#so·Êﬂt_add96M
–
aPå
, 
bPå
, 
zPå
 ) 
	`so·Êﬂt_addM
–3,áPå, bPå, zPå )

	)

918 #i‚de‡
so·Êﬂt_add128M


923 
	#so·Êﬂt_add128M
–
aPå
, 
bPå
, 
zPå
 ) 
	`so·Êﬂt_addM
–4,áPå, bPå, zPå )

	)

926 #i‚de‡
so·Êﬂt_add160M


931 
	#so·Êﬂt_add160M
–
aPå
, 
bPå
, 
zPå
 ) 
	`so·Êﬂt_addM
–5,áPå, bPå, zPå )

	)

934 #i‚de‡
so·Êﬂt_addC¨ryM


943 
uöt_Á°8_t


944 
so·Êﬂt_addC¨ryM
(

945 
uöt_Á°8_t
 
size_w‹ds
,

946 c⁄° 
uöt32_t
 *
aPå
,

947 c⁄° 
uöt32_t
 *
bPå
,

948 
uöt_Á°8_t
 
ˇºy
,

949 
uöt32_t
 *
zPå


953 #i‚de‡
so·Êﬂt_addCom∂C¨ryM


959 
uöt_Á°8_t


960 
so·Êﬂt_addCom∂C¨ryM
(

961 
uöt_Á°8_t
 
size_w‹ds
,

962 c⁄° 
uöt32_t
 *
aPå
,

963 c⁄° 
uöt32_t
 *
bPå
,

964 
uöt_Á°8_t
 
ˇºy
,

965 
uöt32_t
 *
zPå


969 #i‚de‡
so·Êﬂt_addCom∂C¨ry96M


974 
	#so·Êﬂt_addCom∂C¨ry96M
–
aPå
, 
bPå
, 
ˇºy
, 
zPå
 ) 
	`so·Êﬂt_addCom∂C¨ryM
–3,áPå, bPå, c¨ry, zPå )

	)

977 #i‚de‡
so·Êﬂt_√gXM


984 
so·Êﬂt_√gXM
–
uöt_Á°8_t
 
size_w‹ds
, 
uöt32_t
 *
zPå
 );

987 #i‚de‡
so·Êﬂt_√gX96M


992 
	#so·Êﬂt_√gX96M
–
zPå
 ) 
	`so·Êﬂt_√gXM
–3, zPå )

	)

995 #i‚de‡
so·Êﬂt_√gX128M


1000 
	#so·Êﬂt_√gX128M
–
zPå
 ) 
	`so·Êﬂt_√gXM
–4, zPå )

	)

1003 #i‚de‡
so·Êﬂt_√gX160M


1008 
	#so·Êﬂt_√gX160M
–
zPå
 ) 
	`so·Êﬂt_√gXM
–5, zPå )

	)

1011 #i‚de‡
so·Êﬂt_√gX256M


1016 
	#so·Êﬂt_√gX256M
–
zPå
 ) 
	`so·Êﬂt_√gXM
–8, zPå )

	)

1019 #i‚de‡
so·Êﬂt_sub1XM


1027 
so·Êﬂt_sub1XM
–
uöt_Á°8_t
 
size_w‹ds
, 
uöt32_t
 *
zPå
 );

1030 #i‚de‡
so·Êﬂt_sub1X96M


1035 
	#so·Êﬂt_sub1X96M
–
zPå
 ) 
	`so·Êﬂt_sub1XM
–3, zPå )

	)

1038 #i‚de‡
so·Êﬂt_sub1X160M


1043 
	#so·Êﬂt_sub1X160M
–
zPå
 ) 
	`so·Êﬂt_sub1XM
–5, zPå )

	)

1046 #i‚de‡
so·Êﬂt_subM


1056 
so·Êﬂt_subM
(

1057 
uöt_Á°8_t
 
size_w‹ds
,

1058 c⁄° 
uöt32_t
 *
aPå
,

1059 c⁄° 
uöt32_t
 *
bPå
,

1060 
uöt32_t
 *
zPå


1064 #i‚de‡
so·Êﬂt_sub96M


1069 
	#so·Êﬂt_sub96M
–
aPå
, 
bPå
, 
zPå
 ) 
	`so·Êﬂt_subM
–3,áPå, bPå, zPå )

	)

1072 #i‚de‡
so·Êﬂt_sub128M


1077 
	#so·Êﬂt_sub128M
–
aPå
, 
bPå
, 
zPå
 ) 
	`so·Êﬂt_subM
–4,áPå, bPå, zPå )

	)

1080 #i‚de‡
so·Êﬂt_sub160M


1085 
	#so·Êﬂt_sub160M
–
aPå
, 
bPå
, 
zPå
 ) 
	`so·Êﬂt_subM
–5,áPå, bPå, zPå )

	)

1088 #i‚de‡
so·Êﬂt_mul64To128M


1095 
so·Êﬂt_mul64To128M
–
uöt64_t
 
a
, uöt64_à
b
, 
uöt32_t
 *
zPå
 );

1098 #i‚de‡
so·Êﬂt_mul128MTo256M


1108 
so·Êﬂt_mul128MTo256M
(

1109 c⁄° 
uöt32_t
 *
aPå
, c⁄° uöt32_à*
bPå
, uöt32_à*
zPå
 );

1112 #i‚de‡
so·Êﬂt_ªmSãpMBy32


1123 
so·Êﬂt_ªmSãpMBy32
(

1124 
uöt_Á°8_t
 
size_w‹ds
,

1125 c⁄° 
uöt32_t
 *
ªmPå
,

1126 
uöt_Á°8_t
 
di°
,

1127 c⁄° 
uöt32_t
 *
bPå
,

1128 
uöt32_t
 
q
,

1129 
uöt32_t
 *
zPå


1133 #i‚de‡
so·Êﬂt_ªmSãp96MBy32


1138 
	#so·Êﬂt_ªmSãp96MBy32
–
ªmPå
, 
di°
, 
bPå
, 
q
, 
zPå
 ) 
	`so·Êﬂt_ªmSãpMBy32
–3,ÑemPå, di°, bPå, q, zPå )

	)

1141 #i‚de‡
so·Êﬂt_ªmSãp128MBy32


1146 
	#so·Êﬂt_ªmSãp128MBy32
–
ªmPå
, 
di°
, 
bPå
, 
q
, 
zPå
 ) 
	`so·Êﬂt_ªmSãpMBy32
–4,ÑemPå, di°, bPå, q, zPå )

	)

1149 #i‚de‡
so·Êﬂt_ªmSãp160MBy32


1154 
	#so·Êﬂt_ªmSãp160MBy32
–
ªmPå
, 
di°
, 
bPå
, 
q
, 
zPå
 ) 
	`so·Êﬂt_ªmSãpMBy32
–5,ÑemPå, di°, bPå, q, zPå )

	)

	@src/softfloat/source/include/softfloat.h

46 #i‚de‡
so·Êﬂt_h


47 
	#so·Êﬂt_h
 1

	)

49 
	~<°dboﬁ.h
>

50 
	~<°döt.h
>

51 
	~"so·Êﬂt_ty≥s.h
"

53 #i‚de‡
THREAD_LOCAL


54 
	#THREAD_LOCAL


	)

60 
THREAD_LOCAL
 
uöt_Á°8_t
 
so·Êﬂt_dëe˘Tööess
;

62 
	mso·Êﬂt_tööess_bef‹eRoundög
 = 0,

63 
	mso·Êﬂt_tööess_a·îRoundög
 = 1

70 
THREAD_LOCAL
 
uöt_Á°8_t
 
so·Êﬂt_roundögMode
;

72 
	mso·Êﬂt_round_√¨_eví
 = 0,

73 
	mso·Êﬂt_round_möMag
 = 1,

74 
	mso·Êﬂt_round_mö
 = 2,

75 
	mso·Êﬂt_round_max
 = 3,

76 
	mso·Êﬂt_round_√¨_maxMag
 = 4,

77 
	mso·Êﬂt_round_odd
 = 6

83 
THREAD_LOCAL
 
uöt_Á°8_t
 
so·Êﬂt_ex˚±i⁄Fœgs
;

85 
	mso·Êﬂt_Êag_öexa˘
 = 1,

86 
	mso·Êﬂt_Êag_undîÊow
 = 2,

87 
	mso·Êﬂt_Êag_ovîÊow
 = 4,

88 
	mso·Êﬂt_Êag_öföôe
 = 8,

89 
	mso·Êﬂt_Êag_övÆid
 = 16

95 
so·Êﬂt_øi£Fœgs
–
uöt_Á°8_t
 );

100 
Êﬂt16_t
 
ui32_to_f16
–
uöt32_t
 );

101 
Êﬂt32_t
 
ui32_to_f32
–
uöt32_t
 );

102 
Êﬂt64_t
 
ui32_to_f64
–
uöt32_t
 );

103 #ifde‡
SOFTFLOAT_FAST_INT64


104 
extFlﬂt80_t
 
ui32_to_extF80
–
uöt32_t
 );

105 
Êﬂt128_t
 
ui32_to_f128
–
uöt32_t
 );

107 
ui32_to_extF80M
–
uöt32_t
, 
extFlﬂt80_t
 * );

108 
ui32_to_f128M
–
uöt32_t
, 
Êﬂt128_t
 * );

109 
Êﬂt16_t
 
ui64_to_f16
–
uöt64_t
 );

110 
Êﬂt32_t
 
ui64_to_f32
–
uöt64_t
 );

111 
Êﬂt64_t
 
ui64_to_f64
–
uöt64_t
 );

112 #ifde‡
SOFTFLOAT_FAST_INT64


113 
extFlﬂt80_t
 
ui64_to_extF80
–
uöt64_t
 );

114 
Êﬂt128_t
 
ui64_to_f128
–
uöt64_t
 );

116 
ui64_to_extF80M
–
uöt64_t
, 
extFlﬂt80_t
 * );

117 
ui64_to_f128M
–
uöt64_t
, 
Êﬂt128_t
 * );

118 
Êﬂt16_t
 
i32_to_f16
–
öt32_t
 );

119 
Êﬂt32_t
 
i32_to_f32
–
öt32_t
 );

120 
Êﬂt64_t
 
i32_to_f64
–
öt32_t
 );

121 #ifde‡
SOFTFLOAT_FAST_INT64


122 
extFlﬂt80_t
 
i32_to_extF80
–
öt32_t
 );

123 
Êﬂt128_t
 
i32_to_f128
–
öt32_t
 );

125 
i32_to_extF80M
–
öt32_t
, 
extFlﬂt80_t
 * );

126 
i32_to_f128M
–
öt32_t
, 
Êﬂt128_t
 * );

127 
Êﬂt16_t
 
i64_to_f16
–
öt64_t
 );

128 
Êﬂt32_t
 
i64_to_f32
–
öt64_t
 );

129 
Êﬂt64_t
 
i64_to_f64
–
öt64_t
 );

130 #ifde‡
SOFTFLOAT_FAST_INT64


131 
extFlﬂt80_t
 
i64_to_extF80
–
öt64_t
 );

132 
Êﬂt128_t
 
i64_to_f128
–
öt64_t
 );

134 
i64_to_extF80M
–
öt64_t
, 
extFlﬂt80_t
 * );

135 
i64_to_f128M
–
öt64_t
, 
Êﬂt128_t
 * );

140 
uöt_Á°32_t
 
f16_to_ui32
–
Êﬂt16_t
, 
uöt_Á°8_t
, 
boﬁ
 );

141 
uöt_Á°64_t
 
f16_to_ui64
–
Êﬂt16_t
, 
uöt_Á°8_t
, 
boﬁ
 );

142 
öt_Á°32_t
 
f16_to_i32
–
Êﬂt16_t
, 
uöt_Á°8_t
, 
boﬁ
 );

143 
öt_Á°64_t
 
f16_to_i64
–
Êﬂt16_t
, 
uöt_Á°8_t
, 
boﬁ
 );

144 
uöt_Á°32_t
 
f16_to_ui32_r_möMag
–
Êﬂt16_t
, 
boﬁ
 );

145 
uöt_Á°64_t
 
f16_to_ui64_r_möMag
–
Êﬂt16_t
, 
boﬁ
 );

146 
öt_Á°32_t
 
f16_to_i32_r_möMag
–
Êﬂt16_t
, 
boﬁ
 );

147 
öt_Á°64_t
 
f16_to_i64_r_möMag
–
Êﬂt16_t
, 
boﬁ
 );

148 
Êﬂt32_t
 
f16_to_f32
–
Êﬂt16_t
 );

149 
Êﬂt64_t
 
f16_to_f64
–
Êﬂt16_t
 );

150 #ifde‡
SOFTFLOAT_FAST_INT64


151 
extFlﬂt80_t
 
f16_to_extF80
–
Êﬂt16_t
 );

152 
Êﬂt128_t
 
f16_to_f128
–
Êﬂt16_t
 );

154 
f16_to_extF80M
–
Êﬂt16_t
, 
extFlﬂt80_t
 * );

155 
f16_to_f128M
–
Êﬂt16_t
, 
Êﬂt128_t
 * );

156 
Êﬂt16_t
 
f16_roundToI¡
–Êﬂt16_t, 
uöt_Á°8_t
, 
boﬁ
 );

157 
Êﬂt16_t
 
f16_add
( float16_t, float16_t );

158 
Êﬂt16_t
 
f16_sub
( float16_t, float16_t );

159 
Êﬂt16_t
 
f16_mul
( float16_t, float16_t );

160 
Êﬂt16_t
 
f16_mulAdd
( float16_t, float16_t, float16_t );

161 
Êﬂt16_t
 
f16_div
( float16_t, float16_t );

162 
Êﬂt16_t
 
f16_ªm
( float16_t, float16_t );

163 
Êﬂt16_t
 
f16_sqπ
( float16_t );

164 
boﬁ
 
f16_eq
–
Êﬂt16_t
, float16_t );

165 
boﬁ
 
f16_À
–
Êﬂt16_t
, float16_t );

166 
boﬁ
 
f16_…
–
Êﬂt16_t
, float16_t );

167 
boﬁ
 
f16_eq_sig«lög
–
Êﬂt16_t
, float16_t );

168 
boﬁ
 
f16_À_quõt
–
Êﬂt16_t
, float16_t );

169 
boﬁ
 
f16_…_quõt
–
Êﬂt16_t
, float16_t );

170 
boﬁ
 
f16_isSig«lögNaN
–
Êﬂt16_t
 );

175 
Êﬂt32_t
 
bf16_to_f32
–
bÊﬂt16_t
 );

176 
bÊﬂt16_t
 
f32_to_bf16
–
Êﬂt32_t
 );

177 
boﬁ
 
bf16_isSig«lögNaN
–
bÊﬂt16_t
 );

182 
uöt_Á°32_t
 
f32_to_ui32
–
Êﬂt32_t
, 
uöt_Á°8_t
, 
boﬁ
 );

183 
uöt_Á°64_t
 
f32_to_ui64
–
Êﬂt32_t
, 
uöt_Á°8_t
, 
boﬁ
 );

184 
öt_Á°32_t
 
f32_to_i32
–
Êﬂt32_t
, 
uöt_Á°8_t
, 
boﬁ
 );

185 
öt_Á°64_t
 
f32_to_i64
–
Êﬂt32_t
, 
uöt_Á°8_t
, 
boﬁ
 );

186 
uöt_Á°32_t
 
f32_to_ui32_r_möMag
–
Êﬂt32_t
, 
boﬁ
 );

187 
uöt_Á°64_t
 
f32_to_ui64_r_möMag
–
Êﬂt32_t
, 
boﬁ
 );

188 
öt_Á°32_t
 
f32_to_i32_r_möMag
–
Êﬂt32_t
, 
boﬁ
 );

189 
öt_Á°64_t
 
f32_to_i64_r_möMag
–
Êﬂt32_t
, 
boﬁ
 );

190 
Êﬂt16_t
 
f32_to_f16
–
Êﬂt32_t
 );

191 
Êﬂt64_t
 
f32_to_f64
–
Êﬂt32_t
 );

192 #ifde‡
SOFTFLOAT_FAST_INT64


193 
extFlﬂt80_t
 
f32_to_extF80
–
Êﬂt32_t
 );

194 
Êﬂt128_t
 
f32_to_f128
–
Êﬂt32_t
 );

196 
f32_to_extF80M
–
Êﬂt32_t
, 
extFlﬂt80_t
 * );

197 
f32_to_f128M
–
Êﬂt32_t
, 
Êﬂt128_t
 * );

198 
Êﬂt32_t
 
f32_roundToI¡
–Êﬂt32_t, 
uöt_Á°8_t
, 
boﬁ
 );

199 
Êﬂt32_t
 
f32_add
( float32_t, float32_t );

200 
Êﬂt32_t
 
f32_sub
( float32_t, float32_t );

201 
Êﬂt32_t
 
f32_mul
( float32_t, float32_t );

202 
Êﬂt32_t
 
f32_mulAdd
( float32_t, float32_t, float32_t );

203 
Êﬂt32_t
 
f32_div
( float32_t, float32_t );

204 
Êﬂt32_t
 
f32_ªm
( float32_t, float32_t );

205 
Êﬂt32_t
 
f32_sqπ
( float32_t );

206 
boﬁ
 
f32_eq
–
Êﬂt32_t
, float32_t );

207 
boﬁ
 
f32_À
–
Êﬂt32_t
, float32_t );

208 
boﬁ
 
f32_…
–
Êﬂt32_t
, float32_t );

209 
boﬁ
 
f32_eq_sig«lög
–
Êﬂt32_t
, float32_t );

210 
boﬁ
 
f32_À_quõt
–
Êﬂt32_t
, float32_t );

211 
boﬁ
 
f32_…_quõt
–
Êﬂt32_t
, float32_t );

212 
boﬁ
 
f32_isSig«lögNaN
–
Êﬂt32_t
 );

217 
uöt_Á°32_t
 
f64_to_ui32
–
Êﬂt64_t
, 
uöt_Á°8_t
, 
boﬁ
 );

218 
uöt_Á°64_t
 
f64_to_ui64
–
Êﬂt64_t
, 
uöt_Á°8_t
, 
boﬁ
 );

219 
öt_Á°32_t
 
f64_to_i32
–
Êﬂt64_t
, 
uöt_Á°8_t
, 
boﬁ
 );

220 
öt_Á°64_t
 
f64_to_i64
–
Êﬂt64_t
, 
uöt_Á°8_t
, 
boﬁ
 );

221 
uöt_Á°32_t
 
f64_to_ui32_r_möMag
–
Êﬂt64_t
, 
boﬁ
 );

222 
uöt_Á°64_t
 
f64_to_ui64_r_möMag
–
Êﬂt64_t
, 
boﬁ
 );

223 
öt_Á°32_t
 
f64_to_i32_r_möMag
–
Êﬂt64_t
, 
boﬁ
 );

224 
öt_Á°64_t
 
f64_to_i64_r_möMag
–
Êﬂt64_t
, 
boﬁ
 );

225 
Êﬂt16_t
 
f64_to_f16
–
Êﬂt64_t
 );

226 
Êﬂt32_t
 
f64_to_f32
–
Êﬂt64_t
 );

227 #ifde‡
SOFTFLOAT_FAST_INT64


228 
extFlﬂt80_t
 
f64_to_extF80
–
Êﬂt64_t
 );

229 
Êﬂt128_t
 
f64_to_f128
–
Êﬂt64_t
 );

231 
f64_to_extF80M
–
Êﬂt64_t
, 
extFlﬂt80_t
 * );

232 
f64_to_f128M
–
Êﬂt64_t
, 
Êﬂt128_t
 * );

233 
Êﬂt64_t
 
f64_roundToI¡
–Êﬂt64_t, 
uöt_Á°8_t
, 
boﬁ
 );

234 
Êﬂt64_t
 
f64_add
( float64_t, float64_t );

235 
Êﬂt64_t
 
f64_sub
( float64_t, float64_t );

236 
Êﬂt64_t
 
f64_mul
( float64_t, float64_t );

237 
Êﬂt64_t
 
f64_mulAdd
( float64_t, float64_t, float64_t );

238 
Êﬂt64_t
 
f64_div
( float64_t, float64_t );

239 
Êﬂt64_t
 
f64_ªm
( float64_t, float64_t );

240 
Êﬂt64_t
 
f64_sqπ
( float64_t );

241 
boﬁ
 
f64_eq
–
Êﬂt64_t
, float64_t );

242 
boﬁ
 
f64_À
–
Êﬂt64_t
, float64_t );

243 
boﬁ
 
f64_…
–
Êﬂt64_t
, float64_t );

244 
boﬁ
 
f64_eq_sig«lög
–
Êﬂt64_t
, float64_t );

245 
boﬁ
 
f64_À_quõt
–
Êﬂt64_t
, float64_t );

246 
boﬁ
 
f64_…_quõt
–
Êﬂt64_t
, float64_t );

247 
boﬁ
 
f64_isSig«lögNaN
–
Êﬂt64_t
 );

253 
THREAD_LOCAL
 
uöt_Á°8_t
 
extF80_roundögPªcisi⁄
;

258 #ifde‡
SOFTFLOAT_FAST_INT64


259 
uöt_Á°32_t
 
extF80_to_ui32
–
extFlﬂt80_t
, 
uöt_Á°8_t
, 
boﬁ
 );

260 
uöt_Á°64_t
 
extF80_to_ui64
–
extFlﬂt80_t
, 
uöt_Á°8_t
, 
boﬁ
 );

261 
öt_Á°32_t
 
extF80_to_i32
–
extFlﬂt80_t
, 
uöt_Á°8_t
, 
boﬁ
 );

262 
öt_Á°64_t
 
extF80_to_i64
–
extFlﬂt80_t
, 
uöt_Á°8_t
, 
boﬁ
 );

263 
uöt_Á°32_t
 
extF80_to_ui32_r_möMag
–
extFlﬂt80_t
, 
boﬁ
 );

264 
uöt_Á°64_t
 
extF80_to_ui64_r_möMag
–
extFlﬂt80_t
, 
boﬁ
 );

265 
öt_Á°32_t
 
extF80_to_i32_r_möMag
–
extFlﬂt80_t
, 
boﬁ
 );

266 
öt_Á°64_t
 
extF80_to_i64_r_möMag
–
extFlﬂt80_t
, 
boﬁ
 );

267 
Êﬂt16_t
 
extF80_to_f16
–
extFlﬂt80_t
 );

268 
Êﬂt32_t
 
extF80_to_f32
–
extFlﬂt80_t
 );

269 
Êﬂt64_t
 
extF80_to_f64
–
extFlﬂt80_t
 );

270 
Êﬂt128_t
 
extF80_to_f128
–
extFlﬂt80_t
 );

271 
extFlﬂt80_t
 
extF80_roundToI¡
–extFlﬂt80_t, 
uöt_Á°8_t
, 
boﬁ
 );

272 
extFlﬂt80_t
 
extF80_add
(ÉxtFloat80_t,ÉxtFloat80_t );

273 
extFlﬂt80_t
 
extF80_sub
(ÉxtFloat80_t,ÉxtFloat80_t );

274 
extFlﬂt80_t
 
extF80_mul
(ÉxtFloat80_t,ÉxtFloat80_t );

275 
extFlﬂt80_t
 
extF80_div
(ÉxtFloat80_t,ÉxtFloat80_t );

276 
extFlﬂt80_t
 
extF80_ªm
(ÉxtFloat80_t,ÉxtFloat80_t );

277 
extFlﬂt80_t
 
extF80_sqπ
(ÉxtFloat80_t );

278 
boﬁ
 
extF80_eq
–
extFlﬂt80_t
,ÉxtFloat80_t );

279 
boﬁ
 
extF80_À
–
extFlﬂt80_t
,ÉxtFloat80_t );

280 
boﬁ
 
extF80_…
–
extFlﬂt80_t
,ÉxtFloat80_t );

281 
boﬁ
 
extF80_eq_sig«lög
–
extFlﬂt80_t
,ÉxtFloat80_t );

282 
boﬁ
 
extF80_À_quõt
–
extFlﬂt80_t
,ÉxtFloat80_t );

283 
boﬁ
 
extF80_…_quõt
–
extFlﬂt80_t
,ÉxtFloat80_t );

284 
boﬁ
 
extF80_isSig«lögNaN
–
extFlﬂt80_t
 );

286 
uöt_Á°32_t
 
extF80M_to_ui32
–c⁄° 
extFlﬂt80_t
 *, 
uöt_Á°8_t
, 
boﬁ
 );

287 
uöt_Á°64_t
 
extF80M_to_ui64
–c⁄° 
extFlﬂt80_t
 *, 
uöt_Á°8_t
, 
boﬁ
 );

288 
öt_Á°32_t
 
extF80M_to_i32
–c⁄° 
extFlﬂt80_t
 *, 
uöt_Á°8_t
, 
boﬁ
 );

289 
öt_Á°64_t
 
extF80M_to_i64
–c⁄° 
extFlﬂt80_t
 *, 
uöt_Á°8_t
, 
boﬁ
 );

290 
uöt_Á°32_t
 
extF80M_to_ui32_r_möMag
–c⁄° 
extFlﬂt80_t
 *, 
boﬁ
 );

291 
uöt_Á°64_t
 
extF80M_to_ui64_r_möMag
–c⁄° 
extFlﬂt80_t
 *, 
boﬁ
 );

292 
öt_Á°32_t
 
extF80M_to_i32_r_möMag
–c⁄° 
extFlﬂt80_t
 *, 
boﬁ
 );

293 
öt_Á°64_t
 
extF80M_to_i64_r_möMag
–c⁄° 
extFlﬂt80_t
 *, 
boﬁ
 );

294 
Êﬂt16_t
 
extF80M_to_f16
–c⁄° 
extFlﬂt80_t
 * );

295 
Êﬂt32_t
 
extF80M_to_f32
–c⁄° 
extFlﬂt80_t
 * );

296 
Êﬂt64_t
 
extF80M_to_f64
–c⁄° 
extFlﬂt80_t
 * );

297 
extF80M_to_f128M
–c⁄° 
extFlﬂt80_t
 *, 
Êﬂt128_t
 * );

299 
extF80M_roundToI¡
(

300 c⁄° 
extFlﬂt80_t
 *, 
uöt_Á°8_t
, 
boﬁ
,ÉxtFloat80_t * );

301 
extF80M_add
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t *,ÉxtFloat80_t * );

302 
extF80M_sub
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t *,ÉxtFloat80_t * );

303 
extF80M_mul
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t *,ÉxtFloat80_t * );

304 
extF80M_div
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t *,ÉxtFloat80_t * );

305 
extF80M_ªm
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t *,ÉxtFloat80_t * );

306 
extF80M_sqπ
–c⁄° 
extFlﬂt80_t
 *,ÉxtFloat80_t * );

307 
boﬁ
 
extF80M_eq
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t * );

308 
boﬁ
 
extF80M_À
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t * );

309 
boﬁ
 
extF80M_…
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t * );

310 
boﬁ
 
extF80M_eq_sig«lög
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t * );

311 
boﬁ
 
extF80M_À_quõt
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t * );

312 
boﬁ
 
extF80M_…_quõt
–c⁄° 
extFlﬂt80_t
 *, constÉxtFloat80_t * );

313 
boﬁ
 
extF80M_isSig«lögNaN
–c⁄° 
extFlﬂt80_t
 * );

318 #ifde‡
SOFTFLOAT_FAST_INT64


319 
uöt_Á°32_t
 
f128_to_ui32
–
Êﬂt128_t
, 
uöt_Á°8_t
, 
boﬁ
 );

320 
uöt_Á°64_t
 
f128_to_ui64
–
Êﬂt128_t
, 
uöt_Á°8_t
, 
boﬁ
 );

321 
öt_Á°32_t
 
f128_to_i32
–
Êﬂt128_t
, 
uöt_Á°8_t
, 
boﬁ
 );

322 
öt_Á°64_t
 
f128_to_i64
–
Êﬂt128_t
, 
uöt_Á°8_t
, 
boﬁ
 );

323 
uöt_Á°32_t
 
f128_to_ui32_r_möMag
–
Êﬂt128_t
, 
boﬁ
 );

324 
uöt_Á°64_t
 
f128_to_ui64_r_möMag
–
Êﬂt128_t
, 
boﬁ
 );

325 
öt_Á°32_t
 
f128_to_i32_r_möMag
–
Êﬂt128_t
, 
boﬁ
 );

326 
öt_Á°64_t
 
f128_to_i64_r_möMag
–
Êﬂt128_t
, 
boﬁ
 );

327 
Êﬂt16_t
 
f128_to_f16
–
Êﬂt128_t
 );

328 
Êﬂt32_t
 
f128_to_f32
–
Êﬂt128_t
 );

329 
Êﬂt64_t
 
f128_to_f64
–
Êﬂt128_t
 );

330 
extFlﬂt80_t
 
f128_to_extF80
–
Êﬂt128_t
 );

331 
Êﬂt128_t
 
f128_roundToI¡
–Êﬂt128_t, 
uöt_Á°8_t
, 
boﬁ
 );

332 
Êﬂt128_t
 
f128_add
( float128_t, float128_t );

333 
Êﬂt128_t
 
f128_sub
( float128_t, float128_t );

334 
Êﬂt128_t
 
f128_mul
( float128_t, float128_t );

335 
Êﬂt128_t
 
f128_mulAdd
( float128_t, float128_t, float128_t );

336 
Êﬂt128_t
 
f128_div
( float128_t, float128_t );

337 
Êﬂt128_t
 
f128_ªm
( float128_t, float128_t );

338 
Êﬂt128_t
 
f128_sqπ
( float128_t );

339 
boﬁ
 
f128_eq
–
Êﬂt128_t
, float128_t );

340 
boﬁ
 
f128_À
–
Êﬂt128_t
, float128_t );

341 
boﬁ
 
f128_…
–
Êﬂt128_t
, float128_t );

342 
boﬁ
 
f128_eq_sig«lög
–
Êﬂt128_t
, float128_t );

343 
boﬁ
 
f128_À_quõt
–
Êﬂt128_t
, float128_t );

344 
boﬁ
 
f128_…_quõt
–
Êﬂt128_t
, float128_t );

345 
boﬁ
 
f128_isSig«lögNaN
–
Êﬂt128_t
 );

347 
uöt_Á°32_t
 
f128M_to_ui32
–c⁄° 
Êﬂt128_t
 *, 
uöt_Á°8_t
, 
boﬁ
 );

348 
uöt_Á°64_t
 
f128M_to_ui64
–c⁄° 
Êﬂt128_t
 *, 
uöt_Á°8_t
, 
boﬁ
 );

349 
öt_Á°32_t
 
f128M_to_i32
–c⁄° 
Êﬂt128_t
 *, 
uöt_Á°8_t
, 
boﬁ
 );

350 
öt_Á°64_t
 
f128M_to_i64
–c⁄° 
Êﬂt128_t
 *, 
uöt_Á°8_t
, 
boﬁ
 );

351 
uöt_Á°32_t
 
f128M_to_ui32_r_möMag
–c⁄° 
Êﬂt128_t
 *, 
boﬁ
 );

352 
uöt_Á°64_t
 
f128M_to_ui64_r_möMag
–c⁄° 
Êﬂt128_t
 *, 
boﬁ
 );

353 
öt_Á°32_t
 
f128M_to_i32_r_möMag
–c⁄° 
Êﬂt128_t
 *, 
boﬁ
 );

354 
öt_Á°64_t
 
f128M_to_i64_r_möMag
–c⁄° 
Êﬂt128_t
 *, 
boﬁ
 );

355 
Êﬂt16_t
 
f128M_to_f16
–c⁄° 
Êﬂt128_t
 * );

356 
Êﬂt32_t
 
f128M_to_f32
–c⁄° 
Êﬂt128_t
 * );

357 
Êﬂt64_t
 
f128M_to_f64
–c⁄° 
Êﬂt128_t
 * );

358 
f128M_to_extF80M
–c⁄° 
Êﬂt128_t
 *, 
extFlﬂt80_t
 * );

359 
f128M_roundToI¡
–c⁄° 
Êﬂt128_t
 *, 
uöt_Á°8_t
, 
boﬁ
, float128_t * );

360 
f128M_add
–c⁄° 
Êﬂt128_t
 *, const float128_t *, float128_t * );

361 
f128M_sub
–c⁄° 
Êﬂt128_t
 *, const float128_t *, float128_t * );

362 
f128M_mul
–c⁄° 
Êﬂt128_t
 *, const float128_t *, float128_t * );

364 
f128M_mulAdd
(

365 c⁄° 
Êﬂt128_t
 *, const float128_t *, const float128_t *, float128_t *

367 
f128M_div
–c⁄° 
Êﬂt128_t
 *, const float128_t *, float128_t * );

368 
f128M_ªm
–c⁄° 
Êﬂt128_t
 *, const float128_t *, float128_t * );

369 
f128M_sqπ
–c⁄° 
Êﬂt128_t
 *, float128_t * );

370 
boﬁ
 
f128M_eq
–c⁄° 
Êﬂt128_t
 *, const float128_t * );

371 
boﬁ
 
f128M_À
–c⁄° 
Êﬂt128_t
 *, const float128_t * );

372 
boﬁ
 
f128M_…
–c⁄° 
Êﬂt128_t
 *, const float128_t * );

373 
boﬁ
 
f128M_eq_sig«lög
–c⁄° 
Êﬂt128_t
 *, const float128_t * );

374 
boﬁ
 
f128M_À_quõt
–c⁄° 
Êﬂt128_t
 *, const float128_t * );

375 
boﬁ
 
f128M_…_quõt
–c⁄° 
Êﬂt128_t
 *, const float128_t * );

376 
boﬁ
 
f128M_isSig«lögNaN
–c⁄° 
Êﬂt128_t
 * );

	@src/softfloat/source/include/softfloat_types.h

37 #i‚de‡
so·Êﬂt_ty≥s_h


38 
	#so·Êﬂt_ty≥s_h
 1

	)

40 
	~<°döt.h
>

50 °ru˘ { 
uöt16_t
 
	mv
; } 
	tÊﬂt16_t
;

51 °ru˘ { 
uöt16_t
 
	mv
; } 
	tbÊﬂt16_t
;

52 °ru˘ { 
uöt32_t
 
	mv
; } 
	tÊﬂt32_t
;

53 °ru˘ { 
uöt64_t
 
	mv
; } 
	tÊﬂt64_t
;

54 °ru˘ { 
uöt64_t
 
	mv
[2]; } 
	tÊﬂt128_t
;

61 #ifde‡
LITTLEENDIAN


62 
	sextFlﬂt80M
 { 
uöt64_t
 
	msignif
; 
uöt16_t
 
	msignExp
; };

64 
	sextFlﬂt80M
 { 
uöt16_t
 
	msignExp
; 
uöt64_t
 
	msignif
; };

79 
extFlﬂt80M
 
	textFlﬂt80_t
;

	@src/softfloat/source/s_add128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_add128


43 
uöt128


44 
	$so·Êﬂt_add128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

46 
uöt128
 
z
;

48 
z
.
v0
 = 
a0
 + 
b0
;

49 
z
.
v64
 = 
a64
 + 
b64
 + (z.
v0
 < 
a0
);

50  
z
;

52 
	}
}

	@src/softfloat/source/s_add256M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_add256M


44 
	$so·Êﬂt_add256M
(

45 c⁄° 
uöt64_t
 *
aPå
, c⁄° uöt64_à*
bPå
, uöt64_à*
zPå
 )

47 
ödex
;

48 
uöt_Á°8_t
 
ˇºy
;

49 
uöt64_t
 
w‹dA
, 
w‹dZ
;

51 
ödex
 = 
	`ödexW‹dLo
( 4 );

52 
ˇºy
 = 0;

54 
w‹dA
 = 
aPå
[
ödex
];

55 
w‹dZ
 = 
w‹dA
 + 
bPå
[
ödex
] + 
ˇºy
;

56 
zPå
[
ödex
] = 
w‹dZ
;

57 i‡–
ödex
 =
	`ödexW‹dHi
( 4 ) ) ;

58 i‡–
w‹dZ
 !
w‹dA
 ) 
ˇºy
 = (wordZ < wordA);

59 
ödex
 +
w‹dIn¸
;

62 
	}
}

	@src/softfloat/source/s_addCarryM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_addC¨ryM


43 
uöt_Á°8_t


44 
	$so·Êﬂt_addC¨ryM
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
aPå
,

47 c⁄° 
uöt32_t
 *
bPå
,

48 
uöt_Á°8_t
 
ˇºy
,

49 
uöt32_t
 *
zPå


52 
ödex
, 
œ°Index
;

53 
uöt32_t
 
w‹dA
, 
w‹dZ
;

55 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

56 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

58 
w‹dA
 = 
aPå
[
ödex
];

59 
w‹dZ
 = 
w‹dA
 + 
bPå
[
ödex
] + 
ˇºy
;

60 
zPå
[
ödex
] = 
w‹dZ
;

61 i‡–
w‹dZ
 !
w‹dA
 ) 
ˇºy
 = (wordZ < wordA);

62 i‡–
ödex
 =
œ°Index
 ) ;

63 
ödex
 +
w‹dIn¸
;

65  
ˇºy
;

67 
	}
}

	@src/softfloat/source/s_addComplCarryM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_addCom∂C¨ryM


43 
uöt_Á°8_t


44 
	$so·Êﬂt_addCom∂C¨ryM
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
aPå
,

47 c⁄° 
uöt32_t
 *
bPå
,

48 
uöt_Á°8_t
 
ˇºy
,

49 
uöt32_t
 *
zPå


52 
ödex
, 
œ°Index
;

53 
uöt32_t
 
w‹dA
, 
w‹dZ
;

55 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

56 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

58 
w‹dA
 = 
aPå
[
ödex
];

59 
w‹dZ
 = 
w‹dA
 + ~
bPå
[
ödex
] + 
ˇºy
;

60 
zPå
[
ödex
] = 
w‹dZ
;

61 i‡–
w‹dZ
 !
w‹dA
 ) 
ˇºy
 = (wordZ < wordA);

62 i‡–
ödex
 =
œ°Index
 ) ;

63 
ödex
 +
w‹dIn¸
;

65  
ˇºy
;

67 
	}
}

	@src/softfloat/source/s_addExtF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

45 
	$so·Êﬂt_addExtF80M
(

46 c⁄° 
extFlﬂt80M
 *
aSPå
,

47 c⁄° 
extFlﬂt80M
 *
bSPå
,

48 
extFlﬂt80M
 *
zSPå
,

49 
boﬁ
 
√g©eB


52 
uöt32_t
 
uiA64
;

53 
öt32_t
 
expA
;

54 
uöt32_t
 
uiB64
;

55 
öt32_t
 
expB
;

56 
uöt32_t
 
uiZ64
;

57 
boﬁ
 
signZ
, 
signB
;

58 c⁄° 
extFlﬂt80M
 *
ãmpSPå
;

59 
uöt64_t
 
sigZ
, 
sigB
;

61 (*
roundPackRoutöePå
)(

62 
boﬁ
, 
öt32_t
, 
uöt32_t
 *, 
uöt_Á°8_t
, 
extFlﬂt80M
 * );

63 
öt32_t
 
expDiff
;

64 
uöt32_t
 
extSigX
[3], 
sigZExåa
;

68 
uiA64
 = 
aSPå
->
signExp
;

69 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

70 
uiB64
 = 
bSPå
->
signExp
;

71 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

74 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

75 i‡–
	`so·Êﬂt_åyPr›ag©eNaNExtF80M
–
aSPå
, 
bSPå
, 
zSPå
 ) ) ;

76 
uiZ64
 = 
uiA64
;

77 i‡–
expB
 == 0x7FFF ) {

78 
uiZ64
 = 
uiB64
 ^ 
	`∑ckToExtF80UI64
–
√g©eB
, 0 );

79 i‡–(
expA
 =0x7FFFË&& (
uiZ64
 !
uiA64
) ) {

80 
	`so·Êﬂt_övÆidExtF80M
–
zSPå
 );

84 
zSPå
->
signExp
 = 
uiZ64
;

85 
zSPå
->
signif
 = 
	`UINT64_C
( 0x8000000000000000 );

90 
signZ
 = 
	`signExtF80UI64
–
uiA64
 );

91 
signB
 = 
	`signExtF80UI64
–
uiB64
 ) ^ 
√g©eB
;

92 
√g©eB
 = (
signZ
 !
signB
);

93 i‡–
expA
 < 
expB
 ) {

94 
signZ
 = 
signB
;

95 
expA
 = 
expB
;

96 
expB
 = 
	`expExtF80UI64
–
uiA64
 );

97 
ãmpSPå
 = 
aSPå
;

98 
aSPå
 = 
bSPå
;

99 
bSPå
 = 
ãmpSPå
;

101 i‡–! 
expB
 ) {

102 
expB
 = 1;

103 i‡–! 
expA
 )ÉxpA = 1;

105 
sigZ
 = 
aSPå
->
signif
;

106 
sigB
 = 
bSPå
->
signif
;

109 
roundPackRoutöePå
 = 
so·Êﬂt_roundPackMToExtF80M
;

110 
expDiff
 = 
expA
 - 
expB
;

111 i‡–
expDiff
 ) {

114 
extSigX
[
	`ödexW‹d
–3, 2 )] = 
sigB
>>32;

115 
extSigX
[
	`ödexW‹d
–3, 1 )] = 
sigB
;

116 
extSigX
[
	`ödexW‹d
( 3, 0 )] = 0;

117 
	`so·Êﬂt_shi·RightJam96M
–
extSigX
, 
expDiff
,ÉxtSigX );

118 
sigB
 =

119 (
uöt64_t
Ë
extSigX
[
	`ödexW‹d
( 3, 2 )]<<32

120 | 
extSigX
[
	`ödexW‹d
( 3, 1 )];

121 i‡–
√g©eB
 ) {

122 
sigZ
 -
sigB
;

123 
sigZExåa
 = 
extSigX
[
	`ödexW‹dLo
( 3 )];

124 i‡–
sigZExåa
 ) {

125 --
sigZ
;

126 
sigZExåa
 = -sigZExtra;

128 i‡–! (
sigZ
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

129 i‡–
sigZ
 & 
	`UINT64_C
( 0x4000000000000000 ) ) {

130 --
expA
;

131 
sigZ
 = sigZ<<1 | 
sigZExåa
>>31;

132 
sigZExåa
 <<= 1;

134 
roundPackRoutöePå
 = 
so·Êﬂt_n‹mRoundPackMToExtF80M
;

138 
sigZ
 +
sigB
;

139 i‡–
sigZ
 & 
	`UINT64_C
( 0x8000000000000000 ) ) sigZ;

140 
sigZExåa
 = (
uöt32_t
Ë
sigZ
<<31 | (
extSigX
[
	`ödexW‹dLo
( 3 )] != 0);

141 
com∂ëeN‹mA·îAdd
;

146 
sigZExåa
 = 0;

147 i‡–
√g©eB
 ) {

148 i‡–
sigZ
 < 
sigB
 ) {

149 
signZ
 = ! signZ;

150 
sigZ
 = 
sigB
 - sigZ;

152 
sigZ
 -
sigB
;

153 i‡–! 
sigZ
 ) {

154 
signZ
 = (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
);

155 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
signZ
, 0 );

156 
zSPå
->
signif
 = 0;

160 
roundPackRoutöePå
 = 
so·Êﬂt_n‹mRoundPackMToExtF80M
;

162 
sigZ
 +
sigB
;

163 i‡–
sigZ
 < 
sigB
 ) {

164 
sigZExåa
 = (
uöt32_t
Ë
sigZ
<<31;

165 
com∂ëeN‹mA·îAdd
:

166 ++
expA
;

167 
sigZ
 = 
	`UINT64_C
( 0x8000000000000000 ) | sigZ>>1;

169 i‡–! (
sigZ
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

170 
roundPackRoutöePå
 = 
so·Êﬂt_n‹mRoundPackMToExtF80M
;

175 
extSigX
[
	`ödexW‹d
–3, 0 )] = 
sigZExåa
;

176 
sigZ
:

177 
extSigX
[
	`ödexW‹d
–3, 2 )] = 
sigZ
>>32;

178 
extSigX
[
	`ödexW‹d
–3, 1 )] = 
sigZ
;

181 
roundPack
:

182 (*
roundPackRoutöePå
)(

183 
signZ
, 
expA
, 
extSigX
, 
extF80_roundögPªcisi⁄
, 
zSPå
 );

185 
	}
}

	@src/softfloat/source/s_addF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

45 
	$so·Êﬂt_addF128M
(

46 c⁄° 
uöt32_t
 *
aWPå
,

47 c⁄° 
uöt32_t
 *
bWPå
,

48 
uöt32_t
 *
zWPå
,

49 
boﬁ
 
√g©eB


52 
uöt32_t
 
uiA96
;

53 
öt32_t
 
expA
;

54 
uöt32_t
 
uiB96
;

55 
öt32_t
 
expB
;

56 
uöt32_t
 
uiZ96
;

57 
boﬁ
 
signZ
, 
signB
;

58 c⁄° 
uöt32_t
 *
ãmpPå
;

59 
uöt32_t
 
sig96A
, 
sig96B
;

60 
öt32_t
 
expDiff
;

61 
uöt_Á°8_t


62 (*
addC¨ryMRoutöePå
)(

63 
uöt_Á°8_t
,

64 c⁄° 
uöt32_t
 *,

65 c⁄° 
uöt32_t
 *,

66 
uöt_Á°8_t
,

67 
uöt32_t
 *

69 
uöt32_t
 
extSigZ
[5], 
w‹dSigZ
;

70 
uöt_Á°8_t
 
ˇºy
;

71 (*
roundPackRoutöePå
)–
boﬁ
, 
öt32_t
, 
uöt32_t
 *, uint32_t * );

75 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

76 
expA
 = 
	`expF128UI96
–
uiA96
 );

77 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

78 
expB
 = 
	`expF128UI96
–
uiB96
 );

81 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

82 i‡–
	`so·Êﬂt_åyPr›ag©eNaNF128M
–
aWPå
, 
bWPå
, 
zWPå
 ) ) ;

83 
uiZ96
 = 
uiA96
;

84 i‡–
expB
 == 0x7FFF ) {

85 
uiZ96
 = 
uiB96
 ^ 
	`∑ckToF128UI96
–
√g©eB
, 0, 0 );

86 i‡–(
expA
 =0x7FFFË&& (
uiZ96
 !
uiA96
) ) {

87 
	`so·Êﬂt_övÆidF128M
–
zWPå
 );

91 
zWPå
[
	`ödexW‹dHi
–4 )] = 
uiZ96
;

92 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

93 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

94 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

99 
signZ
 = 
	`signF128UI96
–
uiA96
 );

100 
signB
 = 
	`signF128UI96
–
uiB96
 ) ^ 
√g©eB
;

101 
√g©eB
 = (
signZ
 !
signB
);

102 i‡–(
uöt32_t
Ë(
uiA96
<<1Ë< (uöt32_tË(
uiB96
<<1) ) {

103 
signZ
 = 
signB
;

104 
expA
 = 
expB
;

105 
expB
 = 
	`expF128UI96
–
uiA96
 );

106 
ãmpPå
 = 
aWPå
;

107 
aWPå
 = 
bWPå
;

108 
bWPå
 = 
ãmpPå
;

109 
uiA96
 = 
uiB96
;

110 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

112 
sig96A
 = 
	`‰acF128UI96
–
uiA96
 );

113 
sig96B
 = 
	`‰acF128UI96
–
uiB96
 );

114 i‡–
expA
 ) {

115 --
expA
;

116 
sig96A
 |= 0x00010000;

117 i‡–
expB
 ) {

118 --
expB
;

119 
sig96B
 |= 0x00010000;

124 
addC¨ryMRoutöePå
 =

125 
√g©eB
 ? 
so·Êﬂt_addCom∂C¨ryM
 : 
so·Êﬂt_addC¨ryM
;

126 
expDiff
 = 
expA
 - 
expB
;

127 i‡–
expDiff
 ) {

130 
extSigZ
[
	`ödexW‹dHi
–5 )] = 
sig96B
;

131 
extSigZ
[
	`ödexW‹d
–5, 3 )] = 
bWPå
[indexWord( 4, 2 )];

132 
extSigZ
[
	`ödexW‹d
–5, 2 )] = 
bWPå
[indexWord( 4, 1 )];

133 
extSigZ
[
	`ödexW‹d
–5, 1 )] = 
bWPå
[indexWord( 4, 0 )];

134 
extSigZ
[
	`ödexW‹d
( 5, 0 )] = 0;

135 
	`so·Êﬂt_shi·RightJam160M
–
extSigZ
, 
expDiff
,ÉxtSigZ );

136 
sig96B
 = 
extSigZ
[
	`ödexW‹dHi
( 5 )];

137 
ˇºy
 = 0;

138 i‡–
√g©eB
 ) {

139 
sig96B
 = ~sig96B;

140 
w‹dSigZ
 = 
extSigZ
[
	`ödexW‹dLo
( 5 )];

141 
extSigZ
[
	`ödexW‹dLo
–5 )] = -
w‹dSigZ
;

142 
ˇºy
 = ! 
w‹dSigZ
;

144 
ˇºy
 =

145 (*
addC¨ryMRoutöePå
)(

147 &
aWPå
[
	`ödexMu…iw‹dLo
( 4, 3 )],

148 &
extSigZ
[
	`ödexMu…iw‹d
( 5, 3, 1 )],

149 
ˇºy
,

150 &
extSigZ
[
	`ödexMu…iw‹d
( 5, 3, 1 )]

152 
w‹dSigZ
 = 
sig96A
 + 
sig96B
 + 
ˇºy
;

156 
extSigZ
[
	`ödexW‹dLo
( 5 )] = 0;

157 
ˇºy
 =

158 (*
addC¨ryMRoutöePå
)(

160 &
aWPå
[
	`ödexMu…iw‹dLo
( 4, 3 )],

161 &
bWPå
[
	`ödexMu…iw‹dLo
( 4, 3 )],

162 
√g©eB
,

163 &
extSigZ
[
	`ödexMu…iw‹d
( 5, 3, 1 )]

165 i‡–
√g©eB
 ) {

166 
w‹dSigZ
 = 
sig96A
 + ~
sig96B
 + 
ˇºy
;

167 i‡–
w‹dSigZ
 & 0x80000000 ) {

168 
signZ
 = ! signZ;

169 
ˇºy
 =

170 
	`so·Êﬂt_addCom∂C¨ry96M
(

171 &
bWPå
[
	`ödexMu…iw‹dLo
( 4, 3 )],

172 &
aWPå
[
	`ödexMu…iw‹dLo
( 4, 3 )],

174 &
extSigZ
[
	`ödexMu…iw‹d
( 5, 3, 1 )]

176 
w‹dSigZ
 = 
sig96B
 + ~
sig96A
 + 
ˇºy
;

179 ! 
w‹dSigZ
 && ! 
extSigZ
[
	`ödexW‹d
( 5, 3 )]

180 && ! ( 
extSigZ
[
	`ödexW‹d
( 5, 2 )]

181 | 
extSigZ
[
	`ödexW‹d
( 5, 1 )]

182 | 
extSigZ
[
	`ödexW‹d
( 5, 0 )]

185 
signZ
 = (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
);

186 
zWPå
[
	`ödexW‹dHi
–4 )] = 
	`∑ckToF128UI96
–
signZ
, 0, 0 );

187 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

188 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

189 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

194 
w‹dSigZ
 = 
sig96A
 + 
sig96B
 + 
ˇºy
;

197 
extSigZ
[
	`ödexW‹dHi
–5 )] = 
w‹dSigZ
;

200 
roundPackRoutöePå
 = 
so·Êﬂt_n‹mRoundPackMToF128M
;

201 i‡–0x00010000 <
w‹dSigZ
 ) {

202 i‡–0x00020000 <
w‹dSigZ
 ) {

203 ++
expA
;

204 
	`so·Êﬂt_sh‹tShi·RightJam160M
–
extSigZ
, 1,ÉxtSigZ );

206 
roundPackRoutöePå
 = 
so·Êﬂt_roundPackMToF128M
;

208 (*
roundPackRoutöePå
)–
signZ
, 
expA
, 
extSigZ
, 
zWPå
 );

210 
	}
}

	@src/softfloat/source/s_addM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_addM


44 
	$so·Êﬂt_addM
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
aPå
,

47 c⁄° 
uöt32_t
 *
bPå
,

48 
uöt32_t
 *
zPå


51 
ödex
, 
œ°Index
;

52 
uöt_Á°8_t
 
ˇºy
;

53 
uöt32_t
 
w‹dA
, 
w‹dZ
;

55 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

56 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

57 
ˇºy
 = 0;

59 
w‹dA
 = 
aPå
[
ödex
];

60 
w‹dZ
 = 
w‹dA
 + 
bPå
[
ödex
] + 
ˇºy
;

61 
zPå
[
ödex
] = 
w‹dZ
;

62 i‡–
ödex
 =
œ°Index
 ) ;

63 i‡–
w‹dZ
 !
w‹dA
 ) 
ˇºy
 = (wordZ < wordA);

64 
ödex
 +
w‹dIn¸
;

67 
	}
}

	@src/softfloat/source/s_addMagsExtF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t


45 
	$so·Êﬂt_addMagsExtF80
(

46 
uöt_Á°16_t
 
uiA64
,

47 
uöt_Á°64_t
 
uiA0
,

48 
uöt_Á°16_t
 
uiB64
,

49 
uöt_Á°64_t
 
uiB0
,

50 
boﬁ
 
signZ


53 
öt_Á°32_t
 
expA
;

54 
uöt_Á°64_t
 
sigA
;

55 
öt_Á°32_t
 
expB
;

56 
uöt_Á°64_t
 
sigB
;

57 
öt_Á°32_t
 
expDiff
;

58 
uöt_Á°16_t
 
uiZ64
;

59 
uöt_Á°64_t
 
uiZ0
, 
sigZ
, 
sigZExåa
;

60 
exp32_sig64
 
n‹mExpSig
;

61 
öt_Á°32_t
 
expZ
;

62 
uöt64_exåa
 
sig64Exåa
;

63 
uöt128
 
uiZ
;

64 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

68 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

69 
sigA
 = 
uiA0
;

70 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

71 
sigB
 = 
uiB0
;

74 
expDiff
 = 
expA
 - 
expB
;

75 i‡–! 
expDiff
 ) {

76 i‡–
expA
 == 0x7FFF ) {

77 i‡–(
sigA
 | 
sigB
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

78 
¥›ag©eNaN
;

80 
uiZ64
 = 
uiA64
;

81 
uiZ0
 = 
uiA0
;

82 
uiZ
;

84 
sigZ
 = 
sigA
 + 
sigB
;

85 
sigZExåa
 = 0;

86 i‡–! 
expA
 ) {

87 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
sigZ
 );

88 
expZ
 = 
n‹mExpSig
.
exp
 + 1;

89 
sigZ
 = 
n‹mExpSig
.
sig
;

90 
roundAndPack
;

92 
expZ
 = 
expA
;

93 
shi·Right1
;

97 i‡–
expDiff
 < 0 ) {

98 i‡–
expB
 == 0x7FFF ) {

99 i‡–
sigB
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

100 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
, 0x7FFF );

101 
uiZ0
 = 
uiB0
;

102 
uiZ
;

104 
expZ
 = 
expB
;

105 i‡–! 
expA
 ) {

106 ++
expDiff
;

107 
sigZExåa
 = 0;

108 i‡–! 
expDiff
 ) 
√wlyAlig√d
;

110 
sig64Exåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sigA
, 0, -
expDiff
 );

111 
sigA
 = 
sig64Exåa
.
v
;

112 
sigZExåa
 = 
sig64Exåa
.
exåa
;

114 i‡–
expA
 == 0x7FFF ) {

115 i‡–
sigA
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

116 
uiZ64
 = 
uiA64
;

117 
uiZ0
 = 
uiA0
;

118 
uiZ
;

120 
expZ
 = 
expA
;

121 i‡–! 
expB
 ) {

122 --
expDiff
;

123 
sigZExåa
 = 0;

124 i‡–! 
expDiff
 ) 
√wlyAlig√d
;

126 
sig64Exåa
 = 
	`so·Êﬂt_shi·RightJam64Exåa
–
sigB
, 0, 
expDiff
 );

127 
sigB
 = 
sig64Exåa
.
v
;

128 
sigZExåa
 = 
sig64Exåa
.
exåa
;

130 
√wlyAlig√d
:

131 
sigZ
 = 
sigA
 + 
sigB
;

132 i‡–
sigZ
 & 
	`UINT64_C
–0x8000000000000000 ) ) 
roundAndPack
;

135 
shi·Right1
:

136 
sig64Exåa
 = 
	`so·Êﬂt_sh‹tShi·RightJam64Exåa
–
sigZ
, 
sigZExåa
, 1 );

137 
sigZ
 = 
sig64Exåa
.
v
 | 
	`UINT64_C
( 0x8000000000000000 );

138 
sigZExåa
 = 
sig64Exåa
.
exåa
;

139 ++
expZ
;

140 
roundAndPack
:

142 
	`so·Êﬂt_roundPackToExtF80
(

143 
signZ
, 
expZ
, 
sigZ
, 
sigZExåa
, 
extF80_roundögPªcisi⁄
 );

146 
¥›ag©eNaN
:

147 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNExtF80UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

148 
uiZ64
 = 
uiZ
.
v64
;

149 
uiZ0
 = 
uiZ
.
v0
;

150 
uiZ
:

151 
uZ
.
s
.
signExp
 = 
uiZ64
;

152 
uZ
.
s
.
signif
 = 
uiZ0
;

153  
uZ
.
f
;

155 
	}
}

	@src/softfloat/source/s_addMagsF128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

43 
Êﬂt128_t


44 
	$so·Êﬂt_addMagsF128
(

45 
uöt_Á°64_t
 
uiA64
,

46 
uöt_Á°64_t
 
uiA0
,

47 
uöt_Á°64_t
 
uiB64
,

48 
uöt_Á°64_t
 
uiB0
,

49 
boﬁ
 
signZ


52 
öt_Á°32_t
 
expA
;

53 
uöt128
 
sigA
;

54 
öt_Á°32_t
 
expB
;

55 
uöt128
 
sigB
;

56 
öt_Á°32_t
 
expDiff
;

57 
uöt128
 
uiZ
, 
sigZ
;

58 
öt_Á°32_t
 
expZ
;

59 
uöt_Á°64_t
 
sigZExåa
;

60 
uöt128_exåa
 
sig128Exåa
;

61 
ui128_f128
 
uZ
;

63 
expA
 = 
	`expF128UI64
–
uiA64
 );

64 
sigA
.
v64
 = 
	`‰acF128UI64
–
uiA64
 );

65 
sigA
.
v0
 = 
uiA0
;

66 
expB
 = 
	`expF128UI64
–
uiB64
 );

67 
sigB
.
v64
 = 
	`‰acF128UI64
–
uiB64
 );

68 
sigB
.
v0
 = 
uiB0
;

69 
expDiff
 = 
expA
 - 
expB
;

70 i‡–! 
expDiff
 ) {

71 i‡–
expA
 == 0x7FFF ) {

72 i‡–
sigA
.
v64
 | sigA.
v0
 | 
sigB
.v64 | sigB.v0 ) 
¥›ag©eNaN
;

73 
uiZ
.
v64
 = 
uiA64
;

74 
uiZ
.
v0
 = 
uiA0
;

75 
uiZ
;

77 
sigZ
 = 
	`so·Êﬂt_add128
–
sigA
.
v64
, sigA.
v0
, 
sigB
.v64, sigB.v0 );

78 i‡–! 
expA
 ) {

79 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
signZ
, 0, 
sigZ
.v64 );

80 
uiZ
.
v0
 = 
sigZ
.v0;

81 
uiZ
;

83 
expZ
 = 
expA
;

84 
sigZ
.
v64
 |
	`UINT64_C
( 0x0002000000000000 );

85 
sigZExåa
 = 0;

86 
shi·Right1
;

88 i‡–
expDiff
 < 0 ) {

89 i‡–
expB
 == 0x7FFF ) {

90 i‡–
sigB
.
v64
 | sigB.
v0
 ) 
¥›ag©eNaN
;

91 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
signZ
, 0x7FFF, 0 );

92 
uiZ
.
v0
 = 0;

93 
uiZ
;

95 
expZ
 = 
expB
;

96 i‡–
expA
 ) {

97 
sigA
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

99 ++
expDiff
;

100 
sigZExåa
 = 0;

101 i‡–! 
expDiff
 ) 
√wlyAlig√d
;

103 
sig128Exåa
 =

104 
	`so·Êﬂt_shi·RightJam128Exåa
–
sigA
.
v64
, sigA.
v0
, 0, -
expDiff
 );

105 
sigA
 = 
sig128Exåa
.
v
;

106 
sigZExåa
 = 
sig128Exåa
.
exåa
;

108 i‡–
expA
 == 0x7FFF ) {

109 i‡–
sigA
.
v64
 | sigA.
v0
 ) 
¥›ag©eNaN
;

110 
uiZ
.
v64
 = 
uiA64
;

111 
uiZ
.
v0
 = 
uiA0
;

112 
uiZ
;

114 
expZ
 = 
expA
;

115 i‡–
expB
 ) {

116 
sigB
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

118 --
expDiff
;

119 
sigZExåa
 = 0;

120 i‡–! 
expDiff
 ) 
√wlyAlig√d
;

122 
sig128Exåa
 =

123 
	`so·Êﬂt_shi·RightJam128Exåa
–
sigB
.
v64
, sigB.
v0
, 0, 
expDiff
 );

124 
sigB
 = 
sig128Exåa
.
v
;

125 
sigZExåa
 = 
sig128Exåa
.
exåa
;

127 
√wlyAlig√d
:

128 
sigZ
 =

129 
	`so·Êﬂt_add128
(

130 
sigA
.
v64
 | 
	`UINT64_C
( 0x0001000000000000 ),

131 
sigA
.
v0
,

132 
sigB
.
v64
,

133 
sigB
.
v0


135 --
expZ
;

136 i‡–
sigZ
.
v64
 < 
	`UINT64_C
–0x0002000000000000 ) ) 
roundAndPack
;

137 ++
expZ
;

138 
shi·Right1
:

139 
sig128Exåa
 =

140 
	`so·Êﬂt_sh‹tShi·RightJam128Exåa
(

141 
sigZ
.
v64
, sigZ.
v0
, 
sigZExåa
, 1 );

142 
sigZ
 = 
sig128Exåa
.
v
;

143 
sigZExåa
 = 
sig128Exåa
.
exåa
;

144 
roundAndPack
:

146 
	`so·Êﬂt_roundPackToF128
–
signZ
, 
expZ
, 
sigZ
.
v64
, sigZ.
v0
, 
sigZExåa
 );

147 
¥›ag©eNaN
:

148 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

149 
uiZ
:

150 
uZ
.
ui
 = 
uiZ
;

151  
uZ
.
f
;

153 
	}
}

	@src/softfloat/source/s_addMagsF16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$so·Êﬂt_addMagsF16
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 )

46 
öt_Á°8_t
 
expA
;

47 
uöt_Á°16_t
 
sigA
;

48 
öt_Á°8_t
 
expB
;

49 
uöt_Á°16_t
 
sigB
;

50 
öt_Á°8_t
 
expDiff
;

51 
uöt_Á°16_t
 
uiZ
;

52 
boﬁ
 
signZ
;

53 
öt_Á°8_t
 
expZ
;

54 
uöt_Á°16_t
 
sigZ
;

55 
uöt_Á°16_t
 
sigX
, 
sigY
;

56 
öt_Á°8_t
 
shi·Di°
;

57 
uöt_Á°32_t
 
sig32Z
;

58 
öt_Á°8_t
 
roundögMode
;

59 
ui16_f16
 
uZ
;

63 
expA
 = 
	`expF16UI
–
uiA
 );

64 
sigA
 = 
	`‰acF16UI
–
uiA
 );

65 
expB
 = 
	`expF16UI
–
uiB
 );

66 
sigB
 = 
	`‰acF16UI
–
uiB
 );

69 
expDiff
 = 
expA
 - 
expB
;

70 i‡–! 
expDiff
 ) {

73 i‡–! 
expA
 ) {

74 
uiZ
 = 
uiA
 + 
sigB
;

75 
uiZ
;

77 i‡–
expA
 == 0x1F ) {

78 i‡–
sigA
 | 
sigB
 ) 
¥›ag©eNaN
;

79 
uiZ
 = 
uiA
;

80 
uiZ
;

82 
signZ
 = 
	`signF16UI
–
uiA
 );

83 
expZ
 = 
expA
;

84 
sigZ
 = 0x0800 + 
sigA
 + 
sigB
;

85 i‡–! (
sigZ
 & 1Ë&& (
expZ
 < 0x1E) ) {

86 
sigZ
 >>= 1;

87 
∑ck
;

89 
sigZ
 <<= 3;

93 
signZ
 = 
	`signF16UI
–
uiA
 );

94 i‡–
expDiff
 < 0 ) {

97 i‡–
expB
 == 0x1F ) {

98 i‡–
sigB
 ) 
¥›ag©eNaN
;

99 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 0x1F, 0 );

100 
uiZ
;

102 i‡–
expDiff
 <= -13 ) {

103 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 
expB
, 
sigB
 );

104 i‡–
expA
 | 
sigA
 ) 
addEpsû⁄
;

105 
uiZ
;

107 
expZ
 = 
expB
;

108 
sigX
 = 
sigB
 | 0x0400;

109 
sigY
 = 
sigA
 + (
expA
 ? 0x0400 : sigA);

110 
shi·Di°
 = 19 + 
expDiff
;

114 
uiZ
 = 
uiA
;

115 i‡–
expA
 == 0x1F ) {

116 i‡–
sigA
 ) 
¥›ag©eNaN
;

117 
uiZ
;

119 i‡–13 <
expDiff
 ) {

120 i‡–
expB
 | 
sigB
 ) 
addEpsû⁄
;

121 
uiZ
;

123 
expZ
 = 
expA
;

124 
sigX
 = 
sigA
 | 0x0400;

125 
sigY
 = 
sigB
 + (
expB
 ? 0x0400 : sigB);

126 
shi·Di°
 = 19 - 
expDiff
;

128 
sig32Z
 =

129 ((
uöt_Á°32_t
Ë
sigX
<<19Ë+ ((uöt_Á°32_tË
sigY
<<
shi·Di°
);

130 i‡–
sig32Z
 < 0x40000000 ) {

131 --
expZ
;

132 
sig32Z
 <<= 1;

134 
sigZ
 = 
sig32Z
>>16;

135 i‡–
sig32Z
 & 0xFFFF ) {

136 
sigZ
 |= 1;

138 i‡–! (
sigZ
 & 0xFË&& (
expZ
 < 0x1E) ) {

139 
sigZ
 >>= 4;

140 
∑ck
;

144  
	`so·Êﬂt_roundPackToF16
–
signZ
, 
expZ
, 
sigZ
 );

147 
¥›ag©eNaN
:

148 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–
uiA
, 
uiB
 );

149 
uiZ
;

152 
addEpsû⁄
:

153 
roundögMode
 = 
so·Êﬂt_roundögMode
;

154 i‡–
roundögMode
 !
so·Êﬂt_round_√¨_eví
 ) {

156 
roundögMode


157 =(
	`signF16UI
–
uiZ
 ) ? 
so·Êﬂt_round_mö


158 : 
so·Êﬂt_round_max
)

160 ++
uiZ
;

161 i‡–(
uöt16_t
Ë(
uiZ
<<1) == 0xF800 ) {

162 
	`so·Êﬂt_øi£Fœgs
(

163 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

166 #ifde‡
SOFTFLOAT_ROUND_ODD


167 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

168 
uiZ
 |= 1;

172 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

173 
uiZ
;

176 
∑ck
:

177 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 
expZ
, 
sigZ
 );

178 
uiZ
:

179 
uZ
.
ui
 = 
uiZ
;

180  
uZ
.
f
;

182 
	}
}

	@src/softfloat/source/s_addMagsF32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

43 
Êﬂt32_t
 
	$so·Êﬂt_addMagsF32
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 )

45 
öt_Á°16_t
 
expA
;

46 
uöt_Á°32_t
 
sigA
;

47 
öt_Á°16_t
 
expB
;

48 
uöt_Á°32_t
 
sigB
;

49 
öt_Á°16_t
 
expDiff
;

50 
uöt_Á°32_t
 
uiZ
;

51 
boﬁ
 
signZ
;

52 
öt_Á°16_t
 
expZ
;

53 
uöt_Á°32_t
 
sigZ
;

54 
ui32_f32
 
uZ
;

58 
expA
 = 
	`expF32UI
–
uiA
 );

59 
sigA
 = 
	`‰acF32UI
–
uiA
 );

60 
expB
 = 
	`expF32UI
–
uiB
 );

61 
sigB
 = 
	`‰acF32UI
–
uiB
 );

64 
expDiff
 = 
expA
 - 
expB
;

65 i‡–! 
expDiff
 ) {

68 i‡–! 
expA
 ) {

69 
uiZ
 = 
uiA
 + 
sigB
;

70 
uiZ
;

72 i‡–
expA
 == 0xFF ) {

73 i‡–
sigA
 | 
sigB
 ) 
¥›ag©eNaN
;

74 
uiZ
 = 
uiA
;

75 
uiZ
;

77 
signZ
 = 
	`signF32UI
–
uiA
 );

78 
expZ
 = 
expA
;

79 
sigZ
 = 0x01000000 + 
sigA
 + 
sigB
;

80 i‡–! (
sigZ
 & 1Ë&& (
expZ
 < 0xFE) ) {

81 
uiZ
 = 
	`∑ckToF32UI
–
signZ
, 
expZ
, 
sigZ
>>1 );

82 
uiZ
;

84 
sigZ
 <<= 6;

88 
signZ
 = 
	`signF32UI
–
uiA
 );

89 
sigA
 <<= 6;

90 
sigB
 <<= 6;

91 i‡–
expDiff
 < 0 ) {

92 i‡–
expB
 == 0xFF ) {

93 i‡–
sigB
 ) 
¥›ag©eNaN
;

94 
uiZ
 = 
	`∑ckToF32UI
–
signZ
, 0xFF, 0 );

95 
uiZ
;

97 
expZ
 = 
expB
;

98 
sigA
 +
expA
 ? 0x20000000 : sigA;

99 
sigA
 = 
	`so·Êﬂt_shi·RightJam32
–sigA, -
expDiff
 );

101 i‡–
expA
 == 0xFF ) {

102 i‡–
sigA
 ) 
¥›ag©eNaN
;

103 
uiZ
 = 
uiA
;

104 
uiZ
;

106 
expZ
 = 
expA
;

107 
sigB
 +
expB
 ? 0x20000000 : sigB;

108 
sigB
 = 
	`so·Êﬂt_shi·RightJam32
–sigB, 
expDiff
 );

110 
sigZ
 = 0x20000000 + 
sigA
 + 
sigB
;

111 i‡–
sigZ
 < 0x40000000 ) {

112 --
expZ
;

113 
sigZ
 <<= 1;

116  
	`so·Êﬂt_roundPackToF32
–
signZ
, 
expZ
, 
sigZ
 );

119 
¥›ag©eNaN
:

120 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–
uiA
, 
uiB
 );

121 
uiZ
:

122 
uZ
.
ui
 = 
uiZ
;

123  
uZ
.
f
;

125 
	}
}

	@src/softfloat/source/s_addMagsF64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

43 
Êﬂt64_t


44 
	$so·Êﬂt_addMagsF64
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
, 
boﬁ
 
signZ
 )

46 
öt_Á°16_t
 
expA
;

47 
uöt_Á°64_t
 
sigA
;

48 
öt_Á°16_t
 
expB
;

49 
uöt_Á°64_t
 
sigB
;

50 
öt_Á°16_t
 
expDiff
;

51 
uöt_Á°64_t
 
uiZ
;

52 
öt_Á°16_t
 
expZ
;

53 
uöt_Á°64_t
 
sigZ
;

54 
ui64_f64
 
uZ
;

58 
expA
 = 
	`expF64UI
–
uiA
 );

59 
sigA
 = 
	`‰acF64UI
–
uiA
 );

60 
expB
 = 
	`expF64UI
–
uiB
 );

61 
sigB
 = 
	`‰acF64UI
–
uiB
 );

64 
expDiff
 = 
expA
 - 
expB
;

65 i‡–! 
expDiff
 ) {

68 i‡–! 
expA
 ) {

69 
uiZ
 = 
uiA
 + 
sigB
;

70 
uiZ
;

72 i‡–
expA
 == 0x7FF ) {

73 i‡–
sigA
 | 
sigB
 ) 
¥›ag©eNaN
;

74 
uiZ
 = 
uiA
;

75 
uiZ
;

77 
expZ
 = 
expA
;

78 
sigZ
 = 
	`UINT64_C
–0x0020000000000000 ) + 
sigA
 + 
sigB
;

79 
sigZ
 <<= 9;

83 
sigA
 <<= 9;

84 
sigB
 <<= 9;

85 i‡–
expDiff
 < 0 ) {

86 i‡–
expB
 == 0x7FF ) {

87 i‡–
sigB
 ) 
¥›ag©eNaN
;

88 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 0x7FF, 0 );

89 
uiZ
;

91 
expZ
 = 
expB
;

92 i‡–
expA
 ) {

93 
sigA
 +
	`UINT64_C
( 0x2000000000000000 );

95 
sigA
 <<= 1;

97 
sigA
 = 
	`so·Êﬂt_shi·RightJam64
–sigA, -
expDiff
 );

99 i‡–
expA
 == 0x7FF ) {

100 i‡–
sigA
 ) 
¥›ag©eNaN
;

101 
uiZ
 = 
uiA
;

102 
uiZ
;

104 
expZ
 = 
expA
;

105 i‡–
expB
 ) {

106 
sigB
 +
	`UINT64_C
( 0x2000000000000000 );

108 
sigB
 <<= 1;

110 
sigB
 = 
	`so·Êﬂt_shi·RightJam64
–sigB, 
expDiff
 );

112 
sigZ
 = 
	`UINT64_C
–0x2000000000000000 ) + 
sigA
 + 
sigB
;

113 i‡–
sigZ
 < 
	`UINT64_C
( 0x4000000000000000 ) ) {

114 --
expZ
;

115 
sigZ
 <<= 1;

118  
	`so·Êﬂt_roundPackToF64
–
signZ
, 
expZ
, 
sigZ
 );

121 
¥›ag©eNaN
:

122 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 
uiB
 );

123 
uiZ
:

124 
uZ
.
ui
 = 
uiZ
;

125  
uZ
.
f
;

127 
	}
}

	@src/softfloat/source/s_approxRecip32_1.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_≠¥oxRecù32_1


42 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecù_1k0s
[16];

43 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecù_1k1s
[16];

45 
uöt32_t
 
	$so·Êﬂt_≠¥oxRecù32_1
–
uöt32_t
 
a
 )

47 
ödex
;

48 
uöt16_t
 
ïs
, 
r0
;

49 
uöt32_t
 
sigma0
;

50 
uöt_Á°32_t
 
r
;

51 
uöt32_t
 
sqrSigma0
;

53 
ödex
 = 
a
>>27 & 0xF;

54 
ïs
 = (
uöt16_t
Ë(
a
>>11);

55 
r0
 = 
so·Êﬂt_≠¥oxRecù_1k0s
[
ödex
]

56 - ((
so·Êﬂt_≠¥oxRecù_1k1s
[
ödex
] * (
uöt_Á°32_t
Ë
ïs
)>>20);

57 
sigma0
 = ~(
uöt_Á°32_t
Ë((
r0
 * (
uöt_Á°64_t
Ë
a
)>>7);

58 
r
 = ((
uöt_Á°32_t
Ë
r0
<<16Ë+ (‘0 * (
uöt_Á°64_t
Ë
sigma0
)>>24);

59 
sqrSigma0
 = ((
uöt_Á°64_t
Ë
sigma0
 * sigma0)>>32;

60 
r
 +((
uöt32_t
Ë∏* (
uöt_Á°64_t
Ë
sqrSigma0
)>>48;

61  
r
;

63 
	}
}

	@src/softfloat/source/s_approxRecipSqrt32_1.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_≠¥oxRecùSqπ32_1


42 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecùSqπ_1k0s
[];

43 c⁄° 
uöt16_t
 
so·Êﬂt_≠¥oxRecùSqπ_1k1s
[];

45 
uöt32_t
 
	$so·Êﬂt_≠¥oxRecùSqπ32_1
–
oddExpA
, 
uöt32_t
 
a
 )

47 
ödex
;

48 
uöt16_t
 
ïs
, 
r0
;

49 
uöt_Á°32_t
 
ESqrR0
;

50 
uöt32_t
 
sigma0
;

51 
uöt_Á°32_t
 
r
;

52 
uöt32_t
 
sqrSigma0
;

54 
ödex
 = (
a
>>27 & 0xEË+ 
oddExpA
;

55 
ïs
 = (
uöt16_t
Ë(
a
>>12);

56 
r0
 = 
so·Êﬂt_≠¥oxRecùSqπ_1k0s
[
ödex
]

57 - ((
so·Êﬂt_≠¥oxRecùSqπ_1k1s
[
ödex
] * (
uöt_Á°32_t
Ë
ïs
)

59 
ESqrR0
 = (
uöt_Á°32_t
Ë
r0
 *Ñ0;

60 i‡–! 
oddExpA
 ) 
ESqrR0
 <<= 1;

61 
sigma0
 = ~(
uöt_Á°32_t
Ë(((
uöt32_t
Ë
ESqrR0
 * (
uöt_Á°64_t
Ë
a
)>>23);

62 
r
 = ((
uöt_Á°32_t
Ë
r0
<<16Ë+ (‘0 * (
uöt_Á°64_t
Ë
sigma0
)>>25);

63 
sqrSigma0
 = ((
uöt_Á°64_t
Ë
sigma0
 * sigma0)>>32;

64 
r
 +((
uöt32_t
Ë(‘>>1Ë+ (r>>3Ë- ((
uöt_Á°32_t
Ë
r0
<<14))

65 * (
uöt_Á°64_t
Ë
sqrSigma0
)

67 i‡–! (
r
 & 0x80000000) )Ñ = 0x80000000;

68  
r
;

70 
	}
}

	@src/softfloat/source/s_approxRecipSqrt_1Ks.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

41 c⁄° 
uöt16_t
 
	gso·Êﬂt_≠¥oxRecùSqπ_1k0s
[16] = {

45 c⁄° 
uöt16_t
 
	gso·Êﬂt_≠¥oxRecùSqπ_1k1s
[16] = {

	@src/softfloat/source/s_approxRecip_1Ks.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

41 c⁄° 
uöt16_t
 
	gso·Êﬂt_≠¥oxRecù_1k0s
[16] = {

45 c⁄° 
uöt16_t
 
	gso·Êﬂt_≠¥oxRecù_1k1s
[16] = {

	@src/softfloat/source/s_compare128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_com∑ª128M


43 
öt_Á°8_t
 
	$so·Êﬂt_com∑ª128M
–c⁄° 
uöt32_t
 *
aPå
, c⁄° uöt32_à*
bPå
 )

45 
ödex
, 
œ°Index
;

46 
uöt32_t
 
w‹dA
, 
w‹dB
;

48 
ödex
 = 
	`ödexW‹dHi
( 4 );

49 
œ°Index
 = 
	`ödexW‹dLo
( 4 );

51 
w‹dA
 = 
aPå
[
ödex
];

52 
w‹dB
 = 
bPå
[
ödex
];

53 i‡–
w‹dA
 !
w‹dB
 )  (wordA < wordB) ? -1 : 1;

54 i‡–
ödex
 =
œ°Index
 ) ;

55 
ödex
 -
w‹dIn¸
;

59 
	}
}

	@src/softfloat/source/s_compare96M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_com∑ª96M


43 
öt_Á°8_t
 
	$so·Êﬂt_com∑ª96M
–c⁄° 
uöt32_t
 *
aPå
, c⁄° uöt32_à*
bPå
 )

45 
ödex
, 
œ°Index
;

46 
uöt32_t
 
w‹dA
, 
w‹dB
;

48 
ödex
 = 
	`ödexW‹dHi
( 3 );

49 
œ°Index
 = 
	`ödexW‹dLo
( 3 );

51 
w‹dA
 = 
aPå
[
ödex
];

52 
w‹dB
 = 
bPå
[
ödex
];

53 i‡–
w‹dA
 !
w‹dB
 )  (wordA < wordB) ? -1 : 1;

54 i‡–
ödex
 =
œ°Index
 ) ;

55 
ödex
 -
w‹dIn¸
;

59 
	}
}

	@src/softfloat/source/s_compareNonnormExtF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt_ty≥s.h
"

43 
	$so·Êﬂt_com∑ªN⁄n‹mExtF80M
(

44 c⁄° 
extFlﬂt80M
 *
aSPå
, c⁄° extFlﬂt80M *
bSPå
 )

46 
uöt_Á°16_t
 
uiA64
, 
uiB64
;

47 
uöt64_t
 
sigA
;

48 
boﬁ
 
signB
;

49 
uöt64_t
 
sigB
;

50 
öt32_t
 
expA
, 
expB
;

54 
uiA64
 = 
aSPå
->
signExp
;

55 
uiB64
 = 
bSPå
->
signExp
;

56 
sigA
 = 
aSPå
->
signif
;

57 
signB
 = 
	`signExtF80UI64
–
uiB64
 );

58 
sigB
 = 
bSPå
->
signif
;

61 i‡–(
uiA64
 ^ 
uiB64
) & 0x8000 ) {

62 i‡–! (
sigA
 | 
sigB
) )  0;

63 
ªsu…FromSignB
;

67 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

68 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

69 i‡–
expA
 == 0x7FFF ) {

70 i‡(
expB
 == 0x7FFF)  0;

71 
signB
 = ! signB;

72 
ªsu…FromSignB
;

74 i‡–
expB
 == 0x7FFF ) {

75 
ªsu…FromSignB
;

79 i‡–! 
expA
 )ÉxpA = 1;

80 i‡–! (
sigA
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

81 i‡–
sigA
 ) {

82 
expA
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sigA
 );

84 
expA
 = -128;

87 i‡–! 
expB
 )ÉxpB = 1;

88 i‡–! (
sigB
 & 
	`UINT64_C
( 0x8000000000000000 )) ) {

89 i‡–
sigB
 ) {

90 
expB
 +
	`so·Êﬂt_n‹mExtF80SigM
–&
sigB
 );

92 
expB
 = -128;

97 i‡–
signB
 ) {

98 i‡–
expA
 < 
expB
 )  1;

99 i‡–(
expB
 < 
expA
Ë|| (
sigB
 < 
sigA
) )  -1;

101 i‡–
expB
 < 
expA
 )  1;

102 i‡–(
expA
 < 
expB
Ë|| (
sigA
 < 
sigB
) )  -1;

104  (
sigA
 !
sigB
);

107 
ªsu…FromSignB
:

108  
signB
 ? 1 : -1;

110 
	}
}

	@src/softfloat/source/s_countLeadingZeros16.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_cou¡LódögZîos16


42 
	#so·Êﬂt_cou¡LódögZîos16
 
so·Êﬂt_cou¡LódögZîos16


	)

43 
	~"¥imôives.h
"

45 
uöt_Á°8_t
 
	$so·Êﬂt_cou¡LódögZîos16
–
uöt16_t
 
a
 )

47 
uöt_Á°8_t
 
cou¡
;

49 
cou¡
 = 8;

50 i‡–0x100 <
a
 ) {

51 
cou¡
 = 0;

52 
a
 >>= 8;

54 
cou¡
 +
so·Êﬂt_cou¡LódögZîos8
[
a
];

55  
cou¡
;

57 
	}
}

	@src/softfloat/source/s_countLeadingZeros32.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_cou¡LódögZîos32


42 
	#so·Êﬂt_cou¡LódögZîos32
 
so·Êﬂt_cou¡LódögZîos32


	)

43 
	~"¥imôives.h
"

45 
uöt_Á°8_t
 
	$so·Êﬂt_cou¡LódögZîos32
–
uöt32_t
 
a
 )

47 
uöt_Á°8_t
 
cou¡
;

49 
cou¡
 = 0;

50 i‡–
a
 < 0x10000 ) {

51 
cou¡
 = 16;

52 
a
 <<= 16;

54 i‡–
a
 < 0x1000000 ) {

55 
cou¡
 += 8;

56 
a
 <<= 8;

58 
cou¡
 +
so·Êﬂt_cou¡LódögZîos8
[
a
>>24];

59  
cou¡
;

61 
	}
}

	@src/softfloat/source/s_countLeadingZeros64.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_cou¡LódögZîos64


42 
	#so·Êﬂt_cou¡LódögZîos64
 
so·Êﬂt_cou¡LódögZîos64


	)

43 
	~"¥imôives.h
"

45 
uöt_Á°8_t
 
	$so·Êﬂt_cou¡LódögZîos64
–
uöt64_t
 
a
 )

47 
uöt_Á°8_t
 
cou¡
;

48 
uöt32_t
 
a32
;

50 
cou¡
 = 0;

51 
a32
 = 
a
>>32;

52 i‡–! 
a32
 ) {

53 
cou¡
 = 32;

54 
a32
 = 
a
;

59 i‡–
a32
 < 0x10000 ) {

60 
cou¡
 += 16;

61 
a32
 <<= 16;

63 i‡–
a32
 < 0x1000000 ) {

64 
cou¡
 += 8;

65 
a32
 <<= 8;

67 
cou¡
 +
so·Êﬂt_cou¡LódögZîos8
[
a32
>>24];

68  
cou¡
;

70 
	}
}

	@src/softfloat/source/s_countLeadingZeros8.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

41 c⁄° 
uöt_Àa°8_t
 
	gso·Êﬂt_cou¡LódögZîos8
[256] = {

	@src/softfloat/source/s_eq128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

41 #i‚de‡
so·Êﬂt_eq128


43 
boﬁ
 
	$so·Êﬂt_eq128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

46  (
a64
 =
b64
Ë&& (
a0
 =
b0
);

48 
	}
}

	@src/softfloat/source/s_invalidExtF80M.c

37 
	~"∂©f‹m.h
"

38 
	~"•ecülize.h
"

39 
	~"so·Êﬂt.h
"

41 
	$so·Êﬂt_övÆidExtF80M
–
extFlﬂt80M
 *
zSPå
 )

44 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

45 
zSPå
->
signExp
 = 
deÁu…NaNExtF80UI64
;

46 
zSPå
->
signif
 = 
deÁu…NaNExtF80UI0
;

48 
	}
}

	@src/softfloat/source/s_invalidF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôives.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

43 
	$so·Êﬂt_övÆidF128M
–
uöt32_t
 *
zWPå
 )

46 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

47 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
deÁu…NaNF128UI96
;

48 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
deÁu…NaNF128UI64
;

49 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
deÁu…NaNF128UI32
;

50 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
deÁu…NaNF128UI0
;

52 
	}
}

	@src/softfloat/source/s_isNaNF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"¥imôives.h
"

44 
boﬁ
 
	$so·Êﬂt_isNaNF128M
–c⁄° 
uöt32_t
 *
aWPå
 )

46 
uöt32_t
 
uiA96
;

48 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

49 i‡–(~
uiA96
 & 0x7FFF0000Ë!0 )  
Ál£
;

51 ((
uiA96
 & 0x0000FFFF) != 0)

52 || ((
aWPå
[
	`ödexW‹d
( 4, 2 )] |áWPtr[indexWord( 4, 1 )]

53 | 
aWPå
[
	`ödexW‹d
( 4, 0 )])

56 
	}
}

	@src/softfloat/source/s_le128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

41 #i‚de‡
so·Êﬂt_À128


43 
boﬁ
 
	$so·Êﬂt_À128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

46  (
a64
 < 
b64
Ë|| (◊64 =b64Ë&& (
a0
 <
b0
));

48 
	}
}

	@src/softfloat/source/s_lt128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

41 #i‚de‡
so·Êﬂt_…128


43 
boﬁ
 
	$so·Êﬂt_…128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

46  (
a64
 < 
b64
Ë|| (◊64 =b64Ë&& (
a0
 < 
b0
));

48 
	}
}

	@src/softfloat/source/s_mul128By32.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_mul128By32


43 
uöt128
 
	$so·Êﬂt_mul128By32
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt32_t
 
b
 )

45 
uöt128
 
z
;

46 
uöt_Á°64_t
 
mid
;

47 
uöt_Á°32_t
 
ˇºy
;

49 
z
.
v0
 = 
a0
 * 
b
;

50 
mid
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë(
a0
>>32Ë* 
b
;

51 
ˇºy
 = (
uöt32_t
Ë((
uöt_Á°32_t
Ë(
z
.
v0
>>32Ë- (uöt_Á°32_tË
mid
);

52 
z
.
v64
 = 
a64
 * 
b
 + (
uöt_Á°32_t
Ë((
mid
 + 
ˇºy
)>>32);

53  
z
;

55 
	}
}

	@src/softfloat/source/s_mul128MTo256M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_mul128MTo256M


44 
	$so·Êﬂt_mul128MTo256M
(

45 c⁄° 
uöt32_t
 *
aPå
, c⁄° uöt32_à*
bPå
, uöt32_à*
zPå
 )

47 
uöt32_t
 *
œ°ZPå
, 
w‹dB
;

48 
uöt64_t
 
dw‹dProd
;

49 
uöt32_t
 
w‹dZ
;

50 
uöt_Á°8_t
 
ˇºy
;

52 
bPå
 +
	`ödexW‹dLo
( 4 );

53 
œ°ZPå
 = 
zPå
 + 
	`ödexMu…iw‹dHi
( 8, 5 );

54 
zPå
 +
	`ödexMu…iw‹dLo
( 8, 5 );

55 
w‹dB
 = *
bPå
;

56 
dw‹dProd
 = (
uöt64_t
Ë
aPå
[
	`ödexW‹d
–4, 0 )] * 
w‹dB
;

57 
zPå
[
	`ödexW‹d
–5, 0 )] = 
dw‹dProd
;

58 
dw‹dProd
 = (
uöt64_t
Ë
aPå
[
	`ödexW‹d
–4, 1 )] * 
w‹dB
 + (dwordProd>>32);

59 
zPå
[
	`ödexW‹d
–5, 1 )] = 
dw‹dProd
;

60 
dw‹dProd
 = (
uöt64_t
Ë
aPå
[
	`ödexW‹d
–4, 2 )] * 
w‹dB
 + (dwordProd>>32);

61 
zPå
[
	`ödexW‹d
–5, 2 )] = 
dw‹dProd
;

62 
dw‹dProd
 = (
uöt64_t
Ë
aPå
[
	`ödexW‹d
–4, 3 )] * 
w‹dB
 + (dwordProd>>32);

63 
zPå
[
	`ödexW‹d
–5, 3 )] = 
dw‹dProd
;

64 
zPå
[
	`ödexW‹d
–5, 4 )] = 
dw‹dProd
>>32;

66 
bPå
 +
w‹dIn¸
;

67 
zPå
 +
w‹dIn¸
;

68 
w‹dB
 = *
bPå
;

69 
dw‹dProd
 = (
uöt64_t
Ë
aPå
[
	`ödexW‹d
–4, 0 )] * 
w‹dB
;

70 
w‹dZ
 = 
zPå
[
	`ödexW‹d
–5, 0 )] + (
uöt32_t
Ë
dw‹dProd
;

71 
zPå
[
	`ödexW‹d
–5, 0 )] = 
w‹dZ
;

72 
ˇºy
 = (
w‹dZ
 < (
uöt32_t
Ë
dw‹dProd
);

73 
dw‹dProd
 =

74 (
uöt64_t
Ë
aPå
[
	`ödexW‹d
–4, 1 )] * 
w‹dB
 + (
dw‹dProd
>>32);

75 
w‹dZ
 = 
zPå
[
	`ödexW‹d
–5, 1 )] + (
uöt32_t
Ë
dw‹dProd
 + 
ˇºy
;

76 
zPå
[
	`ödexW‹d
–5, 1 )] = 
w‹dZ
;

77 i‡–
w‹dZ
 !(
uöt32_t
Ë
dw‹dProd
 ) {

78 
ˇºy
 = (
w‹dZ
 < (
uöt32_t
Ë
dw‹dProd
);

80 
dw‹dProd
 =

81 (
uöt64_t
Ë
aPå
[
	`ödexW‹d
–4, 2 )] * 
w‹dB
 + (
dw‹dProd
>>32);

82 
w‹dZ
 = 
zPå
[
	`ödexW‹d
–5, 2 )] + (
uöt32_t
Ë
dw‹dProd
 + 
ˇºy
;

83 
zPå
[
	`ödexW‹d
–5, 2 )] = 
w‹dZ
;

84 i‡–
w‹dZ
 !(
uöt32_t
Ë
dw‹dProd
 ) {

85 
ˇºy
 = (
w‹dZ
 < (
uöt32_t
Ë
dw‹dProd
);

87 
dw‹dProd
 =

88 (
uöt64_t
Ë
aPå
[
	`ödexW‹d
–4, 3 )] * 
w‹dB
 + (
dw‹dProd
>>32);

89 
w‹dZ
 = 
zPå
[
	`ödexW‹d
–5, 3 )] + (
uöt32_t
Ë
dw‹dProd
 + 
ˇºy
;

90 
zPå
[
	`ödexW‹d
–5, 3 )] = 
w‹dZ
;

91 i‡–
w‹dZ
 !(
uöt32_t
Ë
dw‹dProd
 ) {

92 
ˇºy
 = (
w‹dZ
 < (
uöt32_t
Ë
dw‹dProd
);

94 
zPå
[
	`ödexW‹d
–5, 4 )] = (
dw‹dProd
>>32Ë+ 
ˇºy
;

95 }  
zPå
 !
œ°ZPå
 );

97 
	}
}

	@src/softfloat/source/s_mul128To256M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_mul128To256M


42 
	#so·Êﬂt_mul128To256M
 
so·Êﬂt_mul128To256M


	)

43 
	~"¥imôives.h
"

46 
	$so·Êﬂt_mul128To256M
(

47 
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
, uöt64_à*
zPå
 )

49 
uöt128
 
p0
, 
p64
, 
p128
;

50 
uöt_Á°64_t
 
z64
, 
z128
, 
z192
;

52 
p0
 = 
	`so·Êﬂt_mul64To128
–
a0
, 
b0
 );

53 
zPå
[
	`ödexW‹d
–4, 0 )] = 
p0
.
v0
;

54 
p64
 = 
	`so·Êﬂt_mul64To128
–
a64
, 
b0
 );

55 
z64
 = 
p64
.
v0
 + 
p0
.
v64
;

56 
z128
 = 
p64
.
v64
 + (
z64
 <Ö64.
v0
);

57 
p128
 = 
	`so·Êﬂt_mul64To128
–
a64
, 
b64
 );

58 
z128
 +
p128
.
v0
;

59 
z192
 = 
p128
.
v64
 + (
z128
 <Ö128.
v0
);

60 
p64
 = 
	`so·Êﬂt_mul64To128
–
a0
, 
b64
 );

61 
z64
 +
p64
.
v0
;

62 
zPå
[
	`ödexW‹d
–4, 1 )] = 
z64
;

63 
p64
.
v64
 +(
z64
 <Ö64.
v0
);

64 
z128
 +
p64
.
v64
;

65 
zPå
[
	`ödexW‹d
–4, 2 )] = 
z128
;

66 
zPå
[
	`ödexW‹d
–4, 3 )] = 
z192
 + (
z128
 < 
p64
.
v64
);

68 
	}
}

	@src/softfloat/source/s_mul64ByShifted32To128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_mul64ByShi·ed32To128


43 
uöt128
 
	$so·Êﬂt_mul64ByShi·ed32To128
–
uöt64_t
 
a
, 
uöt32_t
 
b
 )

45 
uöt_Á°64_t
 
mid
;

46 
uöt128
 
z
;

48 
mid
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë
a
 * 
b
;

49 
z
.
v0
 = 
mid
<<32;

50 
z
.
v64
 = (
uöt_Á°64_t
Ë(
uöt32_t
Ë(
a
>>32Ë* 
b
 + (
mid
>>32);

51  
z
;

53 
	}
}

	@src/softfloat/source/s_mul64To128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_mul64To128


43 
uöt128
 
	$so·Êﬂt_mul64To128
–
uöt64_t
 
a
, uöt64_à
b
 )

45 
uöt32_t
 
a32
, 
a0
, 
b32
, 
b0
;

46 
uöt128
 
z
;

47 
uöt64_t
 
mid1
, 
mid
;

49 
a32
 = 
a
>>32;

50 
a0
 = 
a
;

51 
b32
 = 
b
>>32;

52 
b0
 = 
b
;

53 
z
.
v0
 = (
uöt_Á°64_t
Ë
a0
 * 
b0
;

54 
mid1
 = (
uöt_Á°64_t
Ë
a32
 * 
b0
;

55 
mid
 = 
mid1
 + (
uöt_Á°64_t
Ë
a0
 * 
b32
;

56 
z
.
v64
 = (
uöt_Á°64_t
Ë
a32
 * 
b32
;

57 
z
.
v64
 +(
uöt_Á°64_t
Ë(
mid
 < 
mid1
)<<32 | mid>>32;

58 
mid
 <<= 32;

59 
z
.
v0
 +
mid
;

60 
z
.
v64
 +(z.
v0
 < 
mid
);

61  
z
;

63 
	}
}

	@src/softfloat/source/s_mul64To128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_mul64To128M


43 
	$so·Êﬂt_mul64To128M
–
uöt64_t
 
a
, uöt64_à
b
, 
uöt32_t
 *
zPå
 )

45 
uöt32_t
 
a32
, 
a0
, 
b32
, 
b0
;

46 
uöt64_t
 
z0
, 
mid1
, 
z64
, 
mid
;

48 
a32
 = 
a
>>32;

49 
a0
 = 
a
;

50 
b32
 = 
b
>>32;

51 
b0
 = 
b
;

52 
z0
 = (
uöt64_t
Ë
a0
 * 
b0
;

53 
mid1
 = (
uöt64_t
Ë
a32
 * 
b0
;

54 
mid
 = 
mid1
 + (
uöt64_t
Ë
a0
 * 
b32
;

55 
z64
 = (
uöt64_t
Ë
a32
 * 
b32
;

56 
z64
 +(
uöt64_t
Ë(
mid
 < 
mid1
)<<32 | mid>>32;

57 
mid
 <<= 32;

58 
z0
 +
mid
;

59 
zPå
[
	`ödexW‹d
–4, 1 )] = 
z0
>>32;

60 
zPå
[
	`ödexW‹d
–4, 0 )] = 
z0
;

61 
z64
 +(
z0
 < 
mid
);

62 
zPå
[
	`ödexW‹d
–4, 3 )] = 
z64
>>32;

63 
zPå
[
	`ödexW‹d
–4, 2 )] = 
z64
;

65 
	}
}

	@src/softfloat/source/s_mulAddF128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t


45 
	$so·Êﬂt_mulAddF128
(

46 
uöt_Á°64_t
 
uiA64
,

47 
uöt_Á°64_t
 
uiA0
,

48 
uöt_Á°64_t
 
uiB64
,

49 
uöt_Á°64_t
 
uiB0
,

50 
uöt_Á°64_t
 
uiC64
,

51 
uöt_Á°64_t
 
uiC0
,

52 
uöt_Á°8_t
 
›


55 
boﬁ
 
signA
;

56 
öt_Á°32_t
 
expA
;

57 
uöt128
 
sigA
;

58 
boﬁ
 
signB
;

59 
öt_Á°32_t
 
expB
;

60 
uöt128
 
sigB
;

61 
boﬁ
 
signC
;

62 
öt_Á°32_t
 
expC
;

63 
uöt128
 
sigC
;

64 
boﬁ
 
signZ
;

65 
uöt_Á°64_t
 
magBôs
;

66 
uöt128
 
uiZ
;

67 
exp32_sig128
 
n‹mExpSig
;

68 
öt_Á°32_t
 
expZ
;

69 
uöt64_t
 
sig256Z
[4];

70 
uöt128
 
sigZ
;

71 
öt_Á°32_t
 
shi·Di°
, 
expDiff
;

72 
uöt128
 
x128
;

73 
uöt64_t
 
sig256C
[4];

74 
uöt64_t
 
zîo256
[4] = 
	`INIT_UINTM4
( 0, 0, 0, 0 );

75 
uöt_Á°64_t
 
sigZExåa
, 
sig256Z0
;

76 
ui128_f128
 
uZ
;

80 
signA
 = 
	`signF128UI64
–
uiA64
 );

81 
expA
 = 
	`expF128UI64
–
uiA64
 );

82 
sigA
.
v64
 = 
	`‰acF128UI64
–
uiA64
 );

83 
sigA
.
v0
 = 
uiA0
;

84 
signB
 = 
	`signF128UI64
–
uiB64
 );

85 
expB
 = 
	`expF128UI64
–
uiB64
 );

86 
sigB
.
v64
 = 
	`‰acF128UI64
–
uiB64
 );

87 
sigB
.
v0
 = 
uiB0
;

88 
signC
 = 
	`signF128UI64
–
uiC64
 ) ^ (
›
 =
so·Êﬂt_mulAdd_subC
);

89 
expC
 = 
	`expF128UI64
–
uiC64
 );

90 
sigC
.
v64
 = 
	`‰acF128UI64
–
uiC64
 );

91 
sigC
.
v0
 = 
uiC0
;

92 
signZ
 = 
signA
 ^ 
signB
 ^ (
›
 =
so·Êﬂt_mulAdd_subProd
);

95 i‡–
expA
 == 0x7FFF ) {

97 (
sigA
.
v64
 | sigA.
v0
Ë|| ((
expB
 =0x7FFFË&& (
sigB
.v64 | sigB.v0))

99 
¥›ag©eNaN_ABC
;

101 
magBôs
 = 
expB
 | 
sigB
.
v64
 | sigB.
v0
;

102 
öfProdArg
;

104 i‡–
expB
 == 0x7FFF ) {

105 i‡–
sigB
.
v64
 | sigB.
v0
 ) 
¥›ag©eNaN_ABC
;

106 
magBôs
 = 
expA
 | 
sigA
.
v64
 | sigA.
v0
;

107 
öfProdArg
;

109 i‡–
expC
 == 0x7FFF ) {

110 i‡–
sigC
.
v64
 | sigC.
v0
 ) {

111 
uiZ
.
v64
 = 0;

112 
uiZ
.
v0
 = 0;

113 
¥›ag©eNaN_ZC
;

115 
uiZ
.
v64
 = 
uiC64
;

116 
uiZ
.
v0
 = 
uiC0
;

117 
uiZ
;

121 i‡–! 
expA
 ) {

122 i‡–! (
sigA
.
v64
 | sigA.
v0
ËË
zîoProd
;

123 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigA
.
v64
, sigA.
v0
 );

124 
expA
 = 
n‹mExpSig
.
exp
;

125 
sigA
 = 
n‹mExpSig
.
sig
;

127 i‡–! 
expB
 ) {

128 i‡–! (
sigB
.
v64
 | sigB.
v0
ËË
zîoProd
;

129 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigB
.
v64
, sigB.
v0
 );

130 
expB
 = 
n‹mExpSig
.
exp
;

131 
sigB
 = 
n‹mExpSig
.
sig
;

135 
expZ
 = 
expA
 + 
expB
 - 0x3FFE;

136 
sigA
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

137 
sigB
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

138 
sigA
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–sigA.
v64
, sigA.
v0
, 8 );

139 
sigB
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–sigB.
v64
, sigB.
v0
, 15 );

140 
	`so·Êﬂt_mul128To256M
–
sigA
.
v64
, sigA.
v0
, 
sigB
.v64, sigB.v0, 
sig256Z
 );

141 
sigZ
.
v64
 = 
sig256Z
[
	`ödexW‹d
( 4, 3 )];

142 
sigZ
.
v0
 = 
sig256Z
[
	`ödexW‹d
( 4, 2 )];

143 
shi·Di°
 = 0;

144 i‡–! (
sigZ
.
v64
 & 
	`UINT64_C
( 0x0100000000000000 )) ) {

145 --
expZ
;

146 
shi·Di°
 = -1;

148 i‡–! 
expC
 ) {

149 i‡–! (
sigC
.
v64
 | sigC.
v0
) ) {

150 
shi·Di°
 += 8;

151 
sigZ
;

153 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF128Sig
–
sigC
.
v64
, sigC.
v0
 );

154 
expC
 = 
n‹mExpSig
.
exp
;

155 
sigC
 = 
n‹mExpSig
.
sig
;

157 
sigC
.
v64
 |
	`UINT64_C
( 0x0001000000000000 );

158 
sigC
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–sigC.
v64
, sigC.
v0
, 8 );

161 
expDiff
 = 
expZ
 - 
expC
;

162 i‡–
expDiff
 < 0 ) {

163 
expZ
 = 
expC
;

164 i‡–(
signZ
 =
signC
Ë|| (
expDiff
 < -1) ) {

165 
shi·Di°
 -
expDiff
;

166 i‡–
shi·Di°
 ) {

167 
sigZ
 =

168 
	`so·Êﬂt_shi·RightJam128
–
sigZ
.
v64
, sigZ.
v0
, 
shi·Di°
 );

171 i‡–! 
shi·Di°
 ) {

172 
x128
 =

173 
	`so·Êﬂt_sh‹tShi·Right128
(

174 
sig256Z
[
	`ödexW‹d
( 4, 1 )], sig256Z[indexWord( 4, 0 )],

177 
sig256Z
[
	`ödexW‹d
–4, 1 )] = (
sigZ
.
v0
<<63Ë| 
x128
.
v64
;

178 
sig256Z
[
	`ödexW‹d
–4, 0 )] = 
x128
.
v0
;

179 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·Right128
–sigZ.
v64
, sigZ.
v0
, 1 );

180 
sig256Z
[
	`ödexW‹d
–4, 3 )] = 
sigZ
.
v64
;

181 
sig256Z
[
	`ödexW‹d
–4, 2 )] = 
sigZ
.
v0
;

185 i‡–
shi·Di°
 ) 
	`so·Êﬂt_add256M
–
sig256Z
, sig256Z, sig256Z );

186 i‡–! 
expDiff
 ) {

187 
sigZ
.
v64
 = 
sig256Z
[
	`ödexW‹d
( 4, 3 )];

188 
sigZ
.
v0
 = 
sig256Z
[
	`ödexW‹d
( 4, 2 )];

190 
sig256C
[
	`ödexW‹d
–4, 3 )] = 
sigC
.
v64
;

191 
sig256C
[
	`ödexW‹d
–4, 2 )] = 
sigC
.
v0
;

192 
sig256C
[
	`ödexW‹d
( 4, 1 )] = 0;

193 
sig256C
[
	`ödexW‹d
( 4, 0 )] = 0;

194 
	`so·Êﬂt_shi·RightJam256M
–
sig256C
, 
expDiff
, sig256C );

199 
shi·Di°
 = 8;

200 i‡–
signZ
 =
signC
 ) {

203 i‡–
expDiff
 <= 0 ) {

204 
sigZ
 = 
	`so·Êﬂt_add128
–
sigC
.
v64
, sigC.
v0
, sigZ.v64, sigZ.v0 );

206 
	`so·Êﬂt_add256M
–
sig256Z
, 
sig256C
, sig256Z );

207 
sigZ
.
v64
 = 
sig256Z
[
	`ödexW‹d
( 4, 3 )];

208 
sigZ
.
v0
 = 
sig256Z
[
	`ödexW‹d
( 4, 2 )];

210 i‡–
sigZ
.
v64
 & 
	`UINT64_C
( 0x0200000000000000 ) ) {

211 ++
expZ
;

212 
shi·Di°
 = 9;

217 i‡–
expDiff
 < 0 ) {

218 
signZ
 = 
signC
;

219 i‡–
expDiff
 < -1 ) {

220 
sigZ
 =

221 
	`so·Êﬂt_sub128
–
sigC
.
v64
, sigC.
v0
, 
sigZ
.v64, sigZ.v0 );

222 
sigZExåa
 =

223 
sig256Z
[
	`ödexW‹d
( 4, 1 )] | sig256Z[indexWord( 4, 0 )];

224 i‡–
sigZExåa
 ) {

225 
sigZ
 = 
	`so·Êﬂt_sub128
–sigZ.
v64
, sigZ.
v0
, 0, 1 );

227 i‡–! (
sigZ
.
v64
 & 
	`UINT64_C
( 0x0100000000000000 )) ) {

228 --
expZ
;

229 
shi·Di°
 = 7;

231 
shi·RightRoundPack
;

233 
sig256C
[
	`ödexW‹d
–4, 3 )] = 
sigC
.
v64
;

234 
sig256C
[
	`ödexW‹d
–4, 2 )] = 
sigC
.
v0
;

235 
sig256C
[
	`ödexW‹d
( 4, 1 )] = 0;

236 
sig256C
[
	`ödexW‹d
( 4, 0 )] = 0;

237 
	`so·Êﬂt_sub256M
–
sig256C
, 
sig256Z
, sig256Z );

239 } i‡–! 
expDiff
 ) {

240 
sigZ
 = 
	`so·Êﬂt_sub128
–sigZ.
v64
, sigZ.
v0
, 
sigC
.v64, sigC.v0 );

242 ! (
sigZ
.
v64
 | sigZ.
v0
Ë&& ! 
sig256Z
[
	`ödexW‹d
( 4, 1 )]

243 && ! 
sig256Z
[
	`ödexW‹d
( 4, 0 )]

245 
com∂ëeC™˚Œ©i⁄
;

247 
sig256Z
[
	`ödexW‹d
–4, 3 )] = 
sigZ
.
v64
;

248 
sig256Z
[
	`ödexW‹d
–4, 2 )] = 
sigZ
.
v0
;

249 i‡–
sigZ
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

250 
signZ
 = ! signZ;

251 
	`so·Êﬂt_sub256M
–
zîo256
, 
sig256Z
, sig256Z );

254 
	`so·Êﬂt_sub256M
–
sig256Z
, 
sig256C
, sig256Z );

255 i‡–1 < 
expDiff
 ) {

256 
sigZ
.
v64
 = 
sig256Z
[
	`ödexW‹d
( 4, 3 )];

257 
sigZ
.
v0
 = 
sig256Z
[
	`ödexW‹d
( 4, 2 )];

258 i‡–! (
sigZ
.
v64
 & 
	`UINT64_C
( 0x0100000000000000 )) ) {

259 --
expZ
;

260 
shi·Di°
 = 7;

262 
sigZ
;

267 
sigZ
.
v64
 = 
sig256Z
[
	`ödexW‹d
( 4, 3 )];

268 
sigZ
.
v0
 = 
sig256Z
[
	`ödexW‹d
( 4, 2 )];

269 
sigZExåa
 = 
sig256Z
[
	`ödexW‹d
( 4, 1 )];

270 
sig256Z0
 = 
sig256Z
[
	`ödexW‹d
( 4, 0 )];

271 i‡–
sigZ
.
v64
 ) {

272 i‡–
sig256Z0
 ) 
sigZExåa
 |= 1;

274 
expZ
 -= 64;

275 
sigZ
.
v64
 = sigZ.
v0
;

276 
sigZ
.
v0
 = 
sigZExåa
;

277 
sigZExåa
 = 
sig256Z0
;

278 i‡–! 
sigZ
.
v64
 ) {

279 
expZ
 -= 64;

280 
sigZ
.
v64
 = sigZ.
v0
;

281 
sigZ
.
v0
 = 
sigZExåa
;

282 
sigZExåa
 = 0;

283 i‡–! 
sigZ
.
v64
 ) {

284 
expZ
 -= 64;

285 
sigZ
.
v64
 = sigZ.
v0
;

286 
sigZ
.
v0
 = 0;

290 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sigZ
.
v64
 );

291 
expZ
 +7 - 
shi·Di°
;

292 
shi·Di°
 = 15 - shiftDist;

293 i‡–0 < 
shi·Di°
 ) 
shi·RightRoundPack
;

294 i‡–
shi·Di°
 ) {

295 
shi·Di°
 = -shiftDist;

296 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–sigZ.
v64
, sigZ.
v0
, 
shi·Di°
 );

297 
x128
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
sigZExåa
, 
shi·Di°
 );

298 
sigZ
.
v0
 |
x128
.
v64
;

299 
sigZExåa
 = 
x128
.
v0
;

301 
roundPack
;

303 
sigZ
:

304 
sigZExåa
 = 
sig256Z
[
	`ödexW‹d
( 4, 1 )] | sig256Z[indexWord( 4, 0 )];

305 
shi·RightRoundPack
:

306 
sigZExåa
 = (
uöt64_t
Ë(
sigZ
.
v0
<<(64 - 
shi·Di°
)) | (sigZExtra != 0);

307 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·Right128
–sigZ.
v64
, sigZ.
v0
, 
shi·Di°
 );

308 
roundPack
:

310 
	`so·Êﬂt_roundPackToF128
(

311 
signZ
, 
expZ
 - 1, 
sigZ
.
v64
, sigZ.
v0
, 
sigZExåa
 );

314 
¥›ag©eNaN_ABC
:

315 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

316 
¥›ag©eNaN_ZC
;

319 
öfProdArg
:

320 i‡–
magBôs
 ) {

321 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
signZ
, 0x7FFF, 0 );

322 
uiZ
.
v0
 = 0;

323 i‡–
expC
 !0x7FFF ) 
uiZ
;

324 i‡–
sigC
.
v64
 | sigC.
v0
 ) 
¥›ag©eNaN_ZC
;

325 i‡–
signZ
 =
signC
 ) 
uiZ
;

327 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

328 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

329 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

330 
¥›ag©eNaN_ZC
:

331 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–uiZ.
v64
, uiZ.
v0
, 
uiC64
, 
uiC0
 );

332 
uiZ
;

335 
zîoProd
:

336 
uiZ
.
v64
 = 
uiC64
;

337 
uiZ
.
v0
 = 
uiC0
;

338 i‡–! (
expC
 | 
sigC
.
v64
 | sigC.
v0
Ë&& (
signZ
 !
signC
) ) {

339 
com∂ëeC™˚Œ©i⁄
:

340 
uiZ
.
v64
 =

341 
	`∑ckToF128UI64
(

342 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

343 
uiZ
.
v0
 = 0;

345 
uiZ
:

346 
uZ
.
ui
 = 
uiZ
;

347  
uZ
.
f
;

349 
	}
}

	@src/softfloat/source/s_mulAddF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

45 
	$so·Êﬂt_mulAddF128M
(

46 c⁄° 
uöt32_t
 *
aWPå
,

47 c⁄° 
uöt32_t
 *
bWPå
,

48 c⁄° 
uöt32_t
 *
cWPå
,

49 
uöt32_t
 *
zWPå
,

50 
uöt_Á°8_t
 
›


53 
uöt32_t
 
uiA96
;

54 
öt32_t
 
expA
;

55 
uöt32_t
 
uiB96
;

56 
öt32_t
 
expB
;

57 
uöt32_t
 
uiC96
;

58 
boﬁ
 
signC
;

59 
öt32_t
 
expC
;

60 
boﬁ
 
signProd
, 
¥odIsInföôe
;

61 
uöt32_t
 *
±r
, 
uiZ96
, 
sigA
[4];

62 
uöt_Á°8_t
 
shi·Di°
;

63 
uöt32_t
 
sigX
[5];

64 
öt32_t
 
expProd
;

65 
uöt32_t
 
sigProd
[8], 
w‹dSig
;

66 
boﬁ
 
doSub
;

67 
uöt_Á°8_t


68 (*
addC¨ryMRoutöePå
)(

69 
uöt_Á°8_t
,

70 c⁄° 
uöt32_t
 *,

71 c⁄° 
uöt32_t
 *,

72 
uöt_Á°8_t
,

73 
uöt32_t
 *

75 
öt32_t
 
expDiff
;

76 
boﬁ
 
signZ
;

77 
öt32_t
 
expZ
;

78 
uöt32_t
 *
extSigPå
;

79 
uöt_Á°8_t
 
ˇºy
;

80 (*
roundPackRoutöePå
)–
boﬁ
, 
öt32_t
, 
uöt32_t
 *, uint32_t * );

84 
uiA96
 = 
aWPå
[
	`ödexW‹dHi
( 4 )];

85 
expA
 = 
	`expF128UI96
–
uiA96
 );

86 
uiB96
 = 
bWPå
[
	`ödexW‹dHi
( 4 )];

87 
expB
 = 
	`expF128UI96
–
uiB96
 );

88 
uiC96
 = 
cWPå
[
	`ödexW‹dHi
( 4 )];

89 
signC
 = 
	`signF128UI96
–
uiC96
 ) ^ (
›
 =
so·Êﬂt_mulAdd_subC
);

90 
expC
 = 
	`expF128UI96
–
uiC96
 );

91 
signProd
 =

92 
	`signF128UI96
–
uiA96
 ) ^ signF128UI96–
uiB96
 )

93 ^ (
›
 =
so·Êﬂt_mulAdd_subProd
);

96 
¥odIsInföôe
 = 
Ál£
;

97 i‡–(
expA
 =0x7FFFË|| (
expB
 == 0x7FFF) ) {

98 i‡–
	`so·Êﬂt_åyPr›ag©eNaNF128M
–
aWPå
, 
bWPå
, 
zWPå
 ) ) {

99 
¥›ag©eNaN_ZC
;

101 
±r
 = (
uöt32_t
 *Ë
aWPå
;

102 i‡–! (
uöt32_t
Ë(
uiA96
<<1ËË
possibÀInvÆidProd
;

103 i‡–! (
uöt32_t
Ë(
uiB96
<<1) ) {

104 
±r
 = (
uöt32_t
 *Ë
bWPå
;

105 
possibÀInvÆidProd
:

107 ! (
±r
[
	`ödexW‹d
( 4, 2 )] |Ötr[indexWord( 4, 1 )]

108 | 
±r
[
	`ödexW‹d
( 4, 0 )])

110 
övÆid
;

113 
¥odIsInföôe
 = 
åue
;

115 i‡–
expC
 == 0x7FFF ) {

117 
	`‰acF128UI96
–
uiC96
 )

118 || (
cWPå
[
	`ödexW‹d
( 4, 2 )] | cWPtr[indexWord( 4, 1 )]

119 | 
cWPå
[
	`ödexW‹d
( 4, 0 )])

121 
zWPå
[
	`ödexW‹dHi
( 4 )] = 0;

122 
¥›ag©eNaN_ZC
;

124 i‡–
¥odIsInföôe
 && (
signProd
 !
signC
ËË
övÆid
;

125 
c›yC
;

127 i‡–
¥odIsInföôe
 ) {

128 
uiZ96
 = 
	`∑ckToF128UI96
–
signProd
, 0x7FFF, 0 );

129 
uiZ
;

133 i‡–
expA
 ) {

134 
sigA
[
	`ödexW‹dHi
–4 )] = 
	`‰acF128UI96
–
uiA96
 ) | 0x00010000;

135 
sigA
[
	`ödexW‹d
–4, 2 )] = 
aWPå
[indexWord( 4, 2 )];

136 
sigA
[
	`ödexW‹d
–4, 1 )] = 
aWPå
[indexWord( 4, 1 )];

137 
sigA
[
	`ödexW‹d
–4, 0 )] = 
aWPå
[indexWord( 4, 0 )];

139 
expA
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
aWPå
, 0, 
sigA
 );

140 i‡–
expA
 =-128 ) 
zîoProd
;

142 i‡–
expB
 ) {

143 
sigX
[
	`ödexW‹dHi
–4 )] = 
	`‰acF128UI96
–
uiB96
 ) | 0x00010000;

144 
sigX
[
	`ödexW‹d
–4, 2 )] = 
bWPå
[indexWord( 4, 2 )];

145 
sigX
[
	`ödexW‹d
–4, 1 )] = 
bWPå
[indexWord( 4, 1 )];

146 
sigX
[
	`ödexW‹d
–4, 0 )] = 
bWPå
[indexWord( 4, 0 )];

148 
expB
 = 
	`so·Êﬂt_shi·N‹mSigF128M
–
bWPå
, 0, 
sigX
 );

149 i‡–
expB
 =-128 ) 
zîoProd
;

153 
expProd
 = 
expA
 + 
expB
 - 0x3FF0;

154 
	`so·Êﬂt_mul128MTo256M
–
sigA
, 
sigX
, 
sigProd
 );

157 
w‹dSig
 = 
	`‰acF128UI96
–
uiC96
 );

158 i‡–
expC
 ) {

159 --
expC
;

160 
w‹dSig
 |= 0x00010000;

162 
sigX
[
	`ödexW‹dHi
–5 )] = 
w‹dSig
;

163 
sigX
[
	`ödexW‹d
–5, 3 )] = 
cWPå
[indexWord( 4, 2 )];

164 
sigX
[
	`ödexW‹d
–5, 2 )] = 
cWPå
[indexWord( 4, 1 )];

165 
sigX
[
	`ödexW‹d
–5, 1 )] = 
cWPå
[indexWord( 4, 0 )];

168 
doSub
 = (
signProd
 !
signC
);

169 
addC¨ryMRoutöePå
 =

170 
doSub
 ? 
so·Êﬂt_addCom∂C¨ryM
 : 
so·Êﬂt_addC¨ryM
;

171 
expDiff
 = 
expProd
 - 
expC
;

172 i‡–
expDiff
 <= 0 ) {

175 
signZ
 = 
signC
;

176 
expZ
 = 
expC
;

178 
sigProd
[
	`ödexW‹d
( 8, 2 )]

179 || (
sigProd
[
	`ödexW‹d
( 8, 1 )] | sigProd[indexWord( 8, 0 )])

181 
sigProd
[
	`ödexW‹d
( 8, 3 )] |= 1;

183 
extSigPå
 = &
sigProd
[
	`ödexMu…iw‹dHi
( 8, 5 )];

184 i‡–
expDiff
 ) {

185 
	`so·Êﬂt_shi·RightJam160M
–
extSigPå
, -
expDiff
,ÉxtSigPtr );

187 
ˇºy
 = 0;

188 i‡–
doSub
 ) {

189 
w‹dSig
 = 
extSigPå
[
	`ödexW‹dLo
( 5 )];

190 
extSigPå
[
	`ödexW‹dLo
–5 )] = -
w‹dSig
;

191 
ˇºy
 = ! 
w‹dSig
;

193 (*
addC¨ryMRoutöePå
)(

195 &
sigX
[
	`ödexMu…iw‹dHi
( 5, 4 )],

196 
extSigPå
 + 
	`ödexMu…iw‹dHi
( 5, 4 ),

197 
ˇºy
,

198 
extSigPå
 + 
	`ödexMu…iw‹dHi
( 5, 4 )

200 
w‹dSig
 = 
extSigPå
[
	`ödexW‹dHi
( 5 )];

201 i‡–! 
expZ
 ) {

202 i‡–
w‹dSig
 & 0x80000000 ) {

203 
signZ
 = ! signZ;

204 
	`so·Êﬂt_√gX160M
–
extSigPå
 );

205 
w‹dSig
 = 
extSigPå
[
	`ödexW‹dHi
( 5 )];

207 
checkC™˚Œ©i⁄
;

209 i‡–
w‹dSig
 < 0x00010000 ) {

210 --
expZ
;

211 
	`so·Êﬂt_add160M
–
extSigPå
,ÉxtSigPtr,ÉxtSigPtr );

212 
roundPack
;

214 
extSigRódy_noC™˚Œ©i⁄
;

218 
signZ
 = 
signProd
;

219 
expZ
 = 
expProd
;

220 
sigX
[
	`ödexW‹dLo
( 5 )] = 0;

221 
expDiff
 -= 128;

222 i‡–0 <
expDiff
 ) {

225 i‡–
expDiff
 ) 
	`so·Êﬂt_shi·RightJam160M
–
sigX
,ÉxpDiff, sigX );

226 
w‹dSig
 = 
sigX
[
	`ödexW‹dLo
( 5 )];

227 
ˇºy
 = 0;

228 i‡–
doSub
 ) {

229 
ˇºy
 = ! 
w‹dSig
;

230 
w‹dSig
 = -wordSig;

232 
ˇºy
 =

233 (*
addC¨ryMRoutöePå
)(

235 &
sigProd
[
	`ödexMu…iw‹dLo
( 8, 4 )],

236 &
sigX
[
	`ödexMu…iw‹dHi
( 5, 4 )],

237 
ˇºy
,

238 &
sigProd
[
	`ödexMu…iw‹dLo
( 8, 4 )]

240 
sigProd
[
	`ödexW‹d
–8, 2 )] |
w‹dSig
;

241 
±r
 = &
sigProd
[
	`ödexW‹d
( 8, 4 )];

245 
shi·Di°
 = 
expDiff
 & 31;

246 i‡–
shi·Di°
 ) {

247 
	`so·Êﬂt_sh‹tShi·Right160M
–
sigX
, 
shi·Di°
, sigX );

249 
expDiff
 >>= 5;

250 
extSigPå
 =

251 &
sigProd
[
	`ödexMu…iw‹dLo
–8, 5 )] - 
w‹dIn¸


252 + 
expDiff
 * -
w‹dIn¸
;

253 
ˇºy
 =

254 (*
addC¨ryMRoutöePå
)–5, 
extSigPå
, 
sigX
, 
doSub
,ÉxtSigPtr );

255 i‡–
expDiff
 == -4 ) {

258 
w‹dSig
 = 
sigProd
[
	`ödexW‹dHi
( 8 )];

259 i‡–
w‹dSig
 & 0x80000000 ) {

260 
signZ
 = ! signZ;

261 
	`so·Êﬂt_√gX256M
–
sigProd
 );

262 
w‹dSig
 = 
sigProd
[
	`ödexW‹dHi
( 8 )];

266 i‡–
w‹dSig
 ) 
expProdBiggî_noW‹dShi·
;

267 
w‹dSig
 = 
sigProd
[
	`ödexW‹d
( 8, 6 )];

268 i‡–0x00040000 <
w‹dSig
 ) 
expProdBiggî_noW‹dShi·
;

269 
expZ
 -= 32;

270 
extSigPå
 = &
sigProd
[
	`ödexMu…iw‹dHi
–8, 5 )] - 
w‹dIn¸
;

272 i‡–
w‹dSig
 ) ;

273 
w‹dSig
 = 
extSigPå
[
	`ödexW‹d
( 5, 3 )];

274 i‡–0x00040000 <
w‹dSig
 ) ;

275 
expZ
 -= 32;

276 
extSigPå
 -
w‹dIn¸
;

277 i‡–
extSigPå
 =&
sigProd
[
	`ödexMu…iw‹dLo
( 8, 5 )] ) {

278 
checkC™˚Œ©i⁄
;

283 
±r
 = 
extSigPå
 + 
	`ödexW‹dLo
( 5 );

285 
±r
 -
w‹dIn¸
;

286 i‡–*
±r
 ) {

287 
extSigPå
[
	`ödexW‹dLo
( 5 )] |= 1;

290 }  
±r
 !&
sigProd
[
	`ödexW‹dLo
( 8 )] );

291 
w‹dSig
 = 
extSigPå
[
	`ödexW‹dHi
( 5 )];

292 
extSigRódy
;

294 
±r
 = 
extSigPå
 + 
	`ödexW‹dHi
–5 ) + 
w‹dIn¸
;

298 i‡–
ˇºy
 !
doSub
 ) {

299 i‡–
doSub
 ) {

301 
w‹dSig
 = *
±r
;

302 *
±r
 = 
w‹dSig
 - 1;

303 
±r
 +
w‹dIn¸
;

304 }  ! 
w‹dSig
 );

307 
w‹dSig
 = *
±r
 + 1;

308 *
±r
 = 
w‹dSig
;

309 
±r
 +
w‹dIn¸
;

310 }  ! 
w‹dSig
 );

315 
expProdBiggî_noW‹dShi·
:

317 
sigProd
[
	`ödexW‹d
( 8, 2 )]

318 || (
sigProd
[
	`ödexW‹d
( 8, 1 )] | sigProd[indexWord( 8, 0 )])

320 
sigProd
[
	`ödexW‹d
( 8, 3 )] |= 1;

322 
extSigPå
 = &
sigProd
[
	`ödexMu…iw‹dHi
( 8, 5 )];

323 
w‹dSig
 = 
extSigPå
[
	`ödexW‹dHi
( 5 )];

325 
extSigRódy
:

326 
roundPackRoutöePå
 = 
so·Êﬂt_n‹mRoundPackMToF128M
;

327 i‡–
w‹dSig
 < 0x00010000 ) 
doRoundPack
;

328 
extSigRódy_noC™˚Œ©i⁄
:

329 i‡–0x00020000 <
w‹dSig
 ) {

330 ++
expZ
;

331 
	`so·Êﬂt_sh‹tShi·RightJam160M
–
extSigPå
, 1,ÉxtSigPtr );

333 
roundPack
:

334 
roundPackRoutöePå
 = 
so·Êﬂt_roundPackMToF128M
;

335 
doRoundPack
:

336 (*
roundPackRoutöePå
)–
signZ
, 
expZ
, 
extSigPå
, 
zWPå
 );

340 
övÆid
:

341 
	`so·Êﬂt_övÆidF128M
–
zWPå
 );

342 
¥›ag©eNaN_ZC
:

343 
	`so·Êﬂt_¥›ag©eNaNF128M
–
zWPå
, 
cWPå
, zWPtr );

347 
zîoProd
:

349 ! (
uöt32_t
Ë(
uiC96
<<1Ë&& (
signProd
 !
signC
)

350 && ! 
cWPå
[
	`ödexW‹d
( 4, 2 )]

351 && ! (
cWPå
[
	`ödexW‹d
( 4, 1 )] | cWPtr[indexWord( 4, 0 )])

353 
com∂ëeC™˚Œ©i⁄
;

355 
c›yC
:

356 
zWPå
[
	`ödexW‹dHi
–4 )] = 
uiC96
;

357 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
cWPå
[indexWord( 4, 2 )];

358 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
cWPå
[indexWord( 4, 1 )];

359 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
cWPå
[indexWord( 4, 0 )];

363 
checkC™˚Œ©i⁄
:

365 
w‹dSig


366 || (
extSigPå
[
	`ödexW‹d
( 5, 3 )] |ÉxtSigPtr[indexWord( 5, 2 )])

367 || (
extSigPå
[
	`ödexW‹d
( 5, 1 )] |ÉxtSigPtr[indexWord( 5, 0 )])

369 
extSigRódy
;

371 
com∂ëeC™˚Œ©i⁄
:

372 
uiZ96
 =

373 
	`∑ckToF128UI96
(

374 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

375 
uiZ
:

376 
zWPå
[
	`ödexW‹dHi
–4 )] = 
uiZ96
;

377 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

378 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

379 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

381 
	}
}

	@src/softfloat/source/s_mulAddF16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t


45 
	$so·Êﬂt_mulAddF16
(

46 
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
, uöt_Á°16_à
uiC
, 
uöt_Á°8_t
 
›
 )

48 
boﬁ
 
signA
;

49 
öt_Á°8_t
 
expA
;

50 
uöt_Á°16_t
 
sigA
;

51 
boﬁ
 
signB
;

52 
öt_Á°8_t
 
expB
;

53 
uöt_Á°16_t
 
sigB
;

54 
boﬁ
 
signC
;

55 
öt_Á°8_t
 
expC
;

56 
uöt_Á°16_t
 
sigC
;

57 
boﬁ
 
signProd
;

58 
uöt_Á°16_t
 
magBôs
, 
uiZ
;

59 
exp8_sig16
 
n‹mExpSig
;

60 
öt_Á°8_t
 
expProd
;

61 
uöt_Á°32_t
 
sigProd
;

62 
boﬁ
 
signZ
;

63 
öt_Á°8_t
 
expZ
;

64 
uöt_Á°16_t
 
sigZ
;

65 
öt_Á°8_t
 
expDiff
;

66 
uöt_Á°32_t
 
sig32Z
, 
sig32C
;

67 
öt_Á°8_t
 
shi·Di°
;

68 
ui16_f16
 
uZ
;

72 
signA
 = 
	`signF16UI
–
uiA
 );

73 
expA
 = 
	`expF16UI
–
uiA
 );

74 
sigA
 = 
	`‰acF16UI
–
uiA
 );

75 
signB
 = 
	`signF16UI
–
uiB
 );

76 
expB
 = 
	`expF16UI
–
uiB
 );

77 
sigB
 = 
	`‰acF16UI
–
uiB
 );

78 
signC
 = 
	`signF16UI
–
uiC
 ) ^ (
›
 =
so·Êﬂt_mulAdd_subC
);

79 
expC
 = 
	`expF16UI
–
uiC
 );

80 
sigC
 = 
	`‰acF16UI
–
uiC
 );

81 
signProd
 = 
signA
 ^ 
signB
 ^ (
›
 =
so·Êﬂt_mulAdd_subProd
);

84 i‡–
expA
 == 0x1F ) {

85 i‡–
sigA
 || ((
expB
 =0x1FË&& 
sigB
ËË
¥›ag©eNaN_ABC
;

86 
magBôs
 = 
expB
 | 
sigB
;

87 
öfProdArg
;

89 i‡–
expB
 == 0x1F ) {

90 i‡–
sigB
 ) 
¥›ag©eNaN_ABC
;

91 
magBôs
 = 
expA
 | 
sigA
;

92 
öfProdArg
;

94 i‡–
expC
 == 0x1F ) {

95 i‡–
sigC
 ) {

96 
uiZ
 = 0;

97 
¥›ag©eNaN_ZC
;

99 
uiZ
 = 
uiC
;

100 
uiZ
;

104 i‡–! 
expA
 ) {

105 i‡–! 
sigA
 ) 
zîoProd
;

106 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigA
 );

107 
expA
 = 
n‹mExpSig
.
exp
;

108 
sigA
 = 
n‹mExpSig
.
sig
;

110 i‡–! 
expB
 ) {

111 i‡–! 
sigB
 ) 
zîoProd
;

112 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigB
 );

113 
expB
 = 
n‹mExpSig
.
exp
;

114 
sigB
 = 
n‹mExpSig
.
sig
;

118 
expProd
 = 
expA
 + 
expB
 - 0xE;

119 
sigA
 = (sigA | 0x0400)<<4;

120 
sigB
 = (sigB | 0x0400)<<4;

121 
sigProd
 = (
uöt_Á°32_t
Ë
sigA
 * 
sigB
;

122 i‡–
sigProd
 < 0x20000000 ) {

123 --
expProd
;

124 
sigProd
 <<= 1;

126 
signZ
 = 
signProd
;

127 i‡–! 
expC
 ) {

128 i‡–! 
sigC
 ) {

129 
expZ
 = 
expProd
 - 1;

130 
sigZ
 = 
sigProd
>>15 | ((sigProd & 0x7FFF) != 0);

131 
roundPack
;

133 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF16Sig
–
sigC
 );

134 
expC
 = 
n‹mExpSig
.
exp
;

135 
sigC
 = 
n‹mExpSig
.
sig
;

137 
sigC
 = (sigC | 0x0400)<<3;

140 
expDiff
 = 
expProd
 - 
expC
;

141 i‡–
signProd
 =
signC
 ) {

144 i‡–
expDiff
 <= 0 ) {

145 
expZ
 = 
expC
;

146 
sigZ
 = 
sigC
 + 
	`so·Êﬂt_shi·RightJam32
–
sigProd
, 16 - 
expDiff
 );

148 
expZ
 = 
expProd
;

149 
sig32Z
 =

150 
sigProd


151 + 
	`so·Êﬂt_shi·RightJam32
(

152 (
uöt_Á°32_t
Ë
sigC
<<16, 
expDiff
 );

153 
sigZ
 = 
sig32Z
>>16 | ((sig32Z & 0xFFFF) != 0 );

155 i‡–
sigZ
 < 0x4000 ) {

156 --
expZ
;

157 
sigZ
 <<= 1;

162 
sig32C
 = (
uöt_Á°32_t
Ë
sigC
<<16;

163 i‡–
expDiff
 < 0 ) {

164 
signZ
 = 
signC
;

165 
expZ
 = 
expC
;

166 
sig32Z
 = 
sig32C
 - 
	`so·Êﬂt_shi·RightJam32
–
sigProd
, -
expDiff
 );

167 } i‡–! 
expDiff
 ) {

168 
expZ
 = 
expProd
;

169 
sig32Z
 = 
sigProd
 - 
sig32C
;

170 i‡–! 
sig32Z
 ) 
com∂ëeC™˚Œ©i⁄
;

171 i‡–
sig32Z
 & 0x80000000 ) {

172 
signZ
 = ! signZ;

173 
sig32Z
 = -sig32Z;

176 
expZ
 = 
expProd
;

177 
sig32Z
 = 
sigProd
 - 
	`so·Êﬂt_shi·RightJam32
–
sig32C
, 
expDiff
 );

179 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
sig32Z
 ) - 1;

180 
expZ
 -
shi·Di°
;

181 
shi·Di°
 -= 16;

182 i‡–
shi·Di°
 < 0 ) {

183 
sigZ
 =

184 
sig32Z
>>(-
shi·Di°
)

185 | ((
uöt32_t
Ë(
sig32Z
<<(
shi·Di°
 & 31)) != 0);

187 
sigZ
 = (
uöt_Á°16_t
Ë
sig32Z
<<
shi·Di°
;

190 
roundPack
:

191  
	`so·Êﬂt_roundPackToF16
–
signZ
, 
expZ
, 
sigZ
 );

194 
¥›ag©eNaN_ABC
:

195 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–
uiA
, 
uiB
 );

196 
¥›ag©eNaN_ZC
;

199 
öfProdArg
:

200 i‡–
magBôs
 ) {

201 
uiZ
 = 
	`∑ckToF16UI
–
signProd
, 0x1F, 0 );

202 i‡–
expC
 !0x1F ) 
uiZ
;

203 i‡–
sigC
 ) 
¥›ag©eNaN_ZC
;

204 i‡–
signProd
 =
signC
 ) 
uiZ
;

206 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

207 
uiZ
 = 
deÁu…NaNF16UI
;

208 
¥›ag©eNaN_ZC
:

209 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–uiZ, 
uiC
 );

210 
uiZ
;

213 
zîoProd
:

214 
uiZ
 = 
uiC
;

215 i‡–! (
expC
 | 
sigC
Ë&& (
signProd
 !
signC
) ) {

216 
com∂ëeC™˚Œ©i⁄
:

217 
uiZ
 =

218 
	`∑ckToF16UI
(

219 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

221 
uiZ
:

222 
uZ
.
ui
 = 
uiZ
;

223  
uZ
.
f
;

225 
	}
}

	@src/softfloat/source/s_mulAddF32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t


45 
	$so·Êﬂt_mulAddF32
(

46 
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
, uöt_Á°32_à
uiC
, 
uöt_Á°8_t
 
›
 )

48 
boﬁ
 
signA
;

49 
öt_Á°16_t
 
expA
;

50 
uöt_Á°32_t
 
sigA
;

51 
boﬁ
 
signB
;

52 
öt_Á°16_t
 
expB
;

53 
uöt_Á°32_t
 
sigB
;

54 
boﬁ
 
signC
;

55 
öt_Á°16_t
 
expC
;

56 
uöt_Á°32_t
 
sigC
;

57 
boﬁ
 
signProd
;

58 
uöt_Á°32_t
 
magBôs
, 
uiZ
;

59 
exp16_sig32
 
n‹mExpSig
;

60 
öt_Á°16_t
 
expProd
;

61 
uöt_Á°64_t
 
sigProd
;

62 
boﬁ
 
signZ
;

63 
öt_Á°16_t
 
expZ
;

64 
uöt_Á°32_t
 
sigZ
;

65 
öt_Á°16_t
 
expDiff
;

66 
uöt_Á°64_t
 
sig64Z
, 
sig64C
;

67 
öt_Á°8_t
 
shi·Di°
;

68 
ui32_f32
 
uZ
;

72 
signA
 = 
	`signF32UI
–
uiA
 );

73 
expA
 = 
	`expF32UI
–
uiA
 );

74 
sigA
 = 
	`‰acF32UI
–
uiA
 );

75 
signB
 = 
	`signF32UI
–
uiB
 );

76 
expB
 = 
	`expF32UI
–
uiB
 );

77 
sigB
 = 
	`‰acF32UI
–
uiB
 );

78 
signC
 = 
	`signF32UI
–
uiC
 ) ^ (
›
 =
so·Êﬂt_mulAdd_subC
);

79 
expC
 = 
	`expF32UI
–
uiC
 );

80 
sigC
 = 
	`‰acF32UI
–
uiC
 );

81 
signProd
 = 
signA
 ^ 
signB
 ^ (
›
 =
so·Êﬂt_mulAdd_subProd
);

84 i‡–
expA
 == 0xFF ) {

85 i‡–
sigA
 || ((
expB
 =0xFFË&& 
sigB
ËË
¥›ag©eNaN_ABC
;

86 
magBôs
 = 
expB
 | 
sigB
;

87 
öfProdArg
;

89 i‡–
expB
 == 0xFF ) {

90 i‡–
sigB
 ) 
¥›ag©eNaN_ABC
;

91 
magBôs
 = 
expA
 | 
sigA
;

92 
öfProdArg
;

94 i‡–
expC
 == 0xFF ) {

95 i‡–
sigC
 ) {

96 
uiZ
 = 0;

97 
¥›ag©eNaN_ZC
;

99 
uiZ
 = 
uiC
;

100 
uiZ
;

104 i‡–! 
expA
 ) {

105 i‡–! 
sigA
 ) 
zîoProd
;

106 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigA
 );

107 
expA
 = 
n‹mExpSig
.
exp
;

108 
sigA
 = 
n‹mExpSig
.
sig
;

110 i‡–! 
expB
 ) {

111 i‡–! 
sigB
 ) 
zîoProd
;

112 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigB
 );

113 
expB
 = 
n‹mExpSig
.
exp
;

114 
sigB
 = 
n‹mExpSig
.
sig
;

118 
expProd
 = 
expA
 + 
expB
 - 0x7E;

119 
sigA
 = (sigA | 0x00800000)<<7;

120 
sigB
 = (sigB | 0x00800000)<<7;

121 
sigProd
 = (
uöt_Á°64_t
Ë
sigA
 * 
sigB
;

122 i‡–
sigProd
 < 
	`UINT64_C
( 0x2000000000000000 ) ) {

123 --
expProd
;

124 
sigProd
 <<= 1;

126 
signZ
 = 
signProd
;

127 i‡–! 
expC
 ) {

128 i‡–! 
sigC
 ) {

129 
expZ
 = 
expProd
 - 1;

130 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
sigProd
, 31 );

131 
roundPack
;

133 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF32Sig
–
sigC
 );

134 
expC
 = 
n‹mExpSig
.
exp
;

135 
sigC
 = 
n‹mExpSig
.
sig
;

137 
sigC
 = (sigC | 0x00800000)<<6;

140 
expDiff
 = 
expProd
 - 
expC
;

141 i‡–
signProd
 =
signC
 ) {

144 i‡–
expDiff
 <= 0 ) {

145 
expZ
 = 
expC
;

146 
sigZ
 = 
sigC
 + 
	`so·Êﬂt_shi·RightJam64
–
sigProd
, 32 - 
expDiff
 );

148 
expZ
 = 
expProd
;

149 
sig64Z
 =

150 
sigProd


151 + 
	`so·Êﬂt_shi·RightJam64
(

152 (
uöt_Á°64_t
Ë
sigC
<<32, 
expDiff
 );

153 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
sig64Z
, 32 );

155 i‡–
sigZ
 < 0x40000000 ) {

156 --
expZ
;

157 
sigZ
 <<= 1;

162 
sig64C
 = (
uöt_Á°64_t
Ë
sigC
<<32;

163 i‡–
expDiff
 < 0 ) {

164 
signZ
 = 
signC
;

165 
expZ
 = 
expC
;

166 
sig64Z
 = 
sig64C
 - 
	`so·Êﬂt_shi·RightJam64
–
sigProd
, -
expDiff
 );

167 } i‡–! 
expDiff
 ) {

168 
expZ
 = 
expProd
;

169 
sig64Z
 = 
sigProd
 - 
sig64C
;

170 i‡–! 
sig64Z
 ) 
com∂ëeC™˚Œ©i⁄
;

171 i‡–
sig64Z
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

172 
signZ
 = ! signZ;

173 
sig64Z
 = -sig64Z;

176 
expZ
 = 
expProd
;

177 
sig64Z
 = 
sigProd
 - 
	`so·Êﬂt_shi·RightJam64
–
sig64C
, 
expDiff
 );

179 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig64Z
 ) - 1;

180 
expZ
 -
shi·Di°
;

181 
shi·Di°
 -= 32;

182 i‡–
shi·Di°
 < 0 ) {

183 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
sig64Z
, -
shi·Di°
 );

185 
sigZ
 = (
uöt_Á°32_t
Ë
sig64Z
<<
shi·Di°
;

188 
roundPack
:

189  
	`so·Êﬂt_roundPackToF32
–
signZ
, 
expZ
, 
sigZ
 );

192 
¥›ag©eNaN_ABC
:

193 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–
uiA
, 
uiB
 );

194 
¥›ag©eNaN_ZC
;

197 
öfProdArg
:

198 i‡–
magBôs
 ) {

199 
uiZ
 = 
	`∑ckToF32UI
–
signProd
, 0xFF, 0 );

200 i‡–
expC
 !0xFF ) 
uiZ
;

201 i‡–
sigC
 ) 
¥›ag©eNaN_ZC
;

202 i‡–
signProd
 =
signC
 ) 
uiZ
;

204 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

205 
uiZ
 = 
deÁu…NaNF32UI
;

206 
¥›ag©eNaN_ZC
:

207 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–uiZ, 
uiC
 );

208 
uiZ
;

211 
zîoProd
:

212 
uiZ
 = 
uiC
;

213 i‡–! (
expC
 | 
sigC
Ë&& (
signProd
 !
signC
) ) {

214 
com∂ëeC™˚Œ©i⁄
:

215 
uiZ
 =

216 
	`∑ckToF32UI
(

217 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

219 
uiZ
:

220 
uZ
.
ui
 = 
uiZ
;

221  
uZ
.
f
;

223 
	}
}

	@src/softfloat/source/s_mulAddF64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 #ifde‡
SOFTFLOAT_FAST_INT64


46 
Êﬂt64_t


47 
	$so·Êﬂt_mulAddF64
(

48 
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
, uöt_Á°64_à
uiC
, 
uöt_Á°8_t
 
›
 )

50 
boﬁ
 
signA
;

51 
öt_Á°16_t
 
expA
;

52 
uöt_Á°64_t
 
sigA
;

53 
boﬁ
 
signB
;

54 
öt_Á°16_t
 
expB
;

55 
uöt_Á°64_t
 
sigB
;

56 
boﬁ
 
signC
;

57 
öt_Á°16_t
 
expC
;

58 
uöt_Á°64_t
 
sigC
;

59 
boﬁ
 
signZ
;

60 
uöt_Á°64_t
 
magBôs
, 
uiZ
;

61 
exp16_sig64
 
n‹mExpSig
;

62 
öt_Á°16_t
 
expZ
;

63 
uöt128
 
sig128Z
;

64 
uöt_Á°64_t
 
sigZ
;

65 
öt_Á°16_t
 
expDiff
;

66 
uöt128
 
sig128C
;

67 
öt_Á°8_t
 
shi·Di°
;

68 
ui64_f64
 
uZ
;

72 
signA
 = 
	`signF64UI
–
uiA
 );

73 
expA
 = 
	`expF64UI
–
uiA
 );

74 
sigA
 = 
	`‰acF64UI
–
uiA
 );

75 
signB
 = 
	`signF64UI
–
uiB
 );

76 
expB
 = 
	`expF64UI
–
uiB
 );

77 
sigB
 = 
	`‰acF64UI
–
uiB
 );

78 
signC
 = 
	`signF64UI
–
uiC
 ) ^ (
›
 =
so·Êﬂt_mulAdd_subC
);

79 
expC
 = 
	`expF64UI
–
uiC
 );

80 
sigC
 = 
	`‰acF64UI
–
uiC
 );

81 
signZ
 = 
signA
 ^ 
signB
 ^ (
›
 =
so·Êﬂt_mulAdd_subProd
);

84 i‡–
expA
 == 0x7FF ) {

85 i‡–
sigA
 || ((
expB
 =0x7FFË&& 
sigB
ËË
¥›ag©eNaN_ABC
;

86 
magBôs
 = 
expB
 | 
sigB
;

87 
öfProdArg
;

89 i‡–
expB
 == 0x7FF ) {

90 i‡–
sigB
 ) 
¥›ag©eNaN_ABC
;

91 
magBôs
 = 
expA
 | 
sigA
;

92 
öfProdArg
;

94 i‡–
expC
 == 0x7FF ) {

95 i‡–
sigC
 ) {

96 
uiZ
 = 0;

97 
¥›ag©eNaN_ZC
;

99 
uiZ
 = 
uiC
;

100 
uiZ
;

104 i‡–! 
expA
 ) {

105 i‡–! 
sigA
 ) 
zîoProd
;

106 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigA
 );

107 
expA
 = 
n‹mExpSig
.
exp
;

108 
sigA
 = 
n‹mExpSig
.
sig
;

110 i‡–! 
expB
 ) {

111 i‡–! 
sigB
 ) 
zîoProd
;

112 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigB
 );

113 
expB
 = 
n‹mExpSig
.
exp
;

114 
sigB
 = 
n‹mExpSig
.
sig
;

118 
expZ
 = 
expA
 + 
expB
 - 0x3FE;

119 
sigA
 = (sigA | 
	`UINT64_C
( 0x0010000000000000 ))<<10;

120 
sigB
 = (sigB | 
	`UINT64_C
( 0x0010000000000000 ))<<10;

121 
sig128Z
 = 
	`so·Êﬂt_mul64To128
–
sigA
, 
sigB
 );

122 i‡–
sig128Z
.
v64
 < 
	`UINT64_C
( 0x2000000000000000 ) ) {

123 --
expZ
;

124 
sig128Z
 =

125 
	`so·Êﬂt_add128
(

126 
sig128Z
.
v64
, sig128Z.
v0
, sig128Z.v64, sig128Z.v0 );

128 i‡–! 
expC
 ) {

129 i‡–! 
sigC
 ) {

130 --
expZ
;

131 
sigZ
 = 
sig128Z
.
v64
<<1 | (sig128Z.
v0
 != 0);

132 
roundPack
;

134 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigC
 );

135 
expC
 = 
n‹mExpSig
.
exp
;

136 
sigC
 = 
n‹mExpSig
.
sig
;

138 
sigC
 = (sigC | 
	`UINT64_C
( 0x0010000000000000 ))<<9;

141 
expDiff
 = 
expZ
 - 
expC
;

142 i‡–
expDiff
 < 0 ) {

143 
expZ
 = 
expC
;

144 i‡–(
signZ
 =
signC
Ë|| (
expDiff
 < -1) ) {

145 
sig128Z
.
v64
 = 
	`so·Êﬂt_shi·RightJam64
–sig128Z.v64, -
expDiff
 );

147 
sig128Z
 =

148 
	`so·Êﬂt_sh‹tShi·RightJam128
–
sig128Z
.
v64
, sig128Z.
v0
, 1 );

150 } i‡–
expDiff
 ) {

151 
sig128C
 = 
	`so·Êﬂt_shi·RightJam128
–
sigC
, 0, 
expDiff
 );

155 i‡–
signZ
 =
signC
 ) {

158 i‡–
expDiff
 <= 0 ) {

159 
sigZ
 = (
sigC
 + 
sig128Z
.
v64
Ë| (sig128Z.
v0
 != 0);

161 
sig128Z
 =

162 
	`so·Êﬂt_add128
(

163 
sig128Z
.
v64
, sig128Z.
v0
, 
sig128C
.v64, sig128C.v0 );

164 
sigZ
 = 
sig128Z
.
v64
 | (sig128Z.
v0
 != 0);

166 i‡–
sigZ
 < 
	`UINT64_C
( 0x4000000000000000 ) ) {

167 --
expZ
;

168 
sigZ
 <<= 1;

173 i‡–
expDiff
 < 0 ) {

174 
signZ
 = 
signC
;

175 
sig128Z
 = 
	`so·Êﬂt_sub128
–
sigC
, 0, sig128Z.
v64
, sig128Z.
v0
 );

176 } i‡–! 
expDiff
 ) {

177 
sig128Z
.
v64
 = sig128Z.v64 - 
sigC
;

178 i‡–! (
sig128Z
.
v64
 | sig128Z.
v0
ËË
com∂ëeC™˚Œ©i⁄
;

179 i‡–
sig128Z
.
v64
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

180 
signZ
 = ! signZ;

181 
sig128Z
 = 
	`so·Êﬂt_sub128
–0, 0, sig128Z.
v64
, sig128Z.
v0
 );

184 
sig128Z
 =

185 
	`so·Êﬂt_sub128
(

186 
sig128Z
.
v64
, sig128Z.
v0
, 
sig128C
.v64, sig128C.v0 );

190 i‡–! 
sig128Z
.
v64
 ) {

191 
expZ
 -= 64;

192 
sig128Z
.
v64
 = sig128Z.
v0
;

193 
sig128Z
.
v0
 = 0;

195 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig128Z
.
v64
 ) - 1;

196 
expZ
 -
shi·Di°
;

197 i‡–
shi·Di°
 < 0 ) {

198 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
–
sig128Z
.
v64
, -
shi·Di°
 );

200 
sig128Z
 =

201 
	`so·Êﬂt_sh‹tShi·Le·128
(

202 
sig128Z
.
v64
, sig128Z.
v0
, 
shi·Di°
 );

203 
sigZ
 = 
sig128Z
.
v64
;

205 
sigZ
 |(
sig128Z
.
v0
 != 0);

207 
roundPack
:

208  
	`so·Êﬂt_roundPackToF64
–
signZ
, 
expZ
, 
sigZ
 );

211 
¥›ag©eNaN_ABC
:

212 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 
uiB
 );

213 
¥›ag©eNaN_ZC
;

216 
öfProdArg
:

217 i‡–
magBôs
 ) {

218 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 0x7FF, 0 );

219 i‡–
expC
 !0x7FF ) 
uiZ
;

220 i‡–
sigC
 ) 
¥›ag©eNaN_ZC
;

221 i‡–
signZ
 =
signC
 ) 
uiZ
;

223 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

224 
uiZ
 = 
deÁu…NaNF64UI
;

225 
¥›ag©eNaN_ZC
:

226 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–uiZ, 
uiC
 );

227 
uiZ
;

230 
zîoProd
:

231 
uiZ
 = 
uiC
;

232 i‡–! (
expC
 | 
sigC
Ë&& (
signZ
 !
signC
) ) {

233 
com∂ëeC™˚Œ©i⁄
:

234 
uiZ
 =

235 
	`∑ckToF64UI
(

236 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

238 
uiZ
:

239 
uZ
.
ui
 = 
uiZ
;

240  
uZ
.
f
;

242 
	}
}

246 
Êﬂt64_t


247 
	$so·Êﬂt_mulAddF64
(

248 
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
, uöt_Á°64_à
uiC
, 
uöt_Á°8_t
 
›
 )

250 
boﬁ
 
signA
;

251 
öt_Á°16_t
 
expA
;

252 
uöt64_t
 
sigA
;

253 
boﬁ
 
signB
;

254 
öt_Á°16_t
 
expB
;

255 
uöt64_t
 
sigB
;

256 
boﬁ
 
signC
;

257 
öt_Á°16_t
 
expC
;

258 
uöt64_t
 
sigC
;

259 
boﬁ
 
signZ
;

260 
uöt64_t
 
magBôs
, 
uiZ
;

261 
exp16_sig64
 
n‹mExpSig
;

262 
öt_Á°16_t
 
expZ
;

263 
uöt32_t
 
sig128Z
[4];

264 
uöt64_t
 
sigZ
;

265 
öt_Á°16_t
 
shi·Di°
, 
expDiff
;

266 
uöt32_t
 
sig128C
[4];

267 
ui64_f64
 
uZ
;

271 
signA
 = 
	`signF64UI
–
uiA
 );

272 
expA
 = 
	`expF64UI
–
uiA
 );

273 
sigA
 = 
	`‰acF64UI
–
uiA
 );

274 
signB
 = 
	`signF64UI
–
uiB
 );

275 
expB
 = 
	`expF64UI
–
uiB
 );

276 
sigB
 = 
	`‰acF64UI
–
uiB
 );

277 
signC
 = 
	`signF64UI
–
uiC
 ) ^ (
›
 =
so·Êﬂt_mulAdd_subC
);

278 
expC
 = 
	`expF64UI
–
uiC
 );

279 
sigC
 = 
	`‰acF64UI
–
uiC
 );

280 
signZ
 = 
signA
 ^ 
signB
 ^ (
›
 =
so·Êﬂt_mulAdd_subProd
);

283 i‡–
expA
 == 0x7FF ) {

284 i‡–
sigA
 || ((
expB
 =0x7FFË&& 
sigB
ËË
¥›ag©eNaN_ABC
;

285 
magBôs
 = 
expB
 | 
sigB
;

286 
öfProdArg
;

288 i‡–
expB
 == 0x7FF ) {

289 i‡–
sigB
 ) 
¥›ag©eNaN_ABC
;

290 
magBôs
 = 
expA
 | 
sigA
;

291 
öfProdArg
;

293 i‡–
expC
 == 0x7FF ) {

294 i‡–
sigC
 ) {

295 
uiZ
 = 0;

296 
¥›ag©eNaN_ZC
;

298 
uiZ
 = 
uiC
;

299 
uiZ
;

303 i‡–! 
expA
 ) {

304 i‡–! 
sigA
 ) 
zîoProd
;

305 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigA
 );

306 
expA
 = 
n‹mExpSig
.
exp
;

307 
sigA
 = 
n‹mExpSig
.
sig
;

309 i‡–! 
expB
 ) {

310 i‡–! 
sigB
 ) 
zîoProd
;

311 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigB
 );

312 
expB
 = 
n‹mExpSig
.
exp
;

313 
sigB
 = 
n‹mExpSig
.
sig
;

317 
expZ
 = 
expA
 + 
expB
 - 0x3FE;

318 
sigA
 = (sigA | 
	`UINT64_C
( 0x0010000000000000 ))<<10;

319 
sigB
 = (sigB | 
	`UINT64_C
( 0x0010000000000000 ))<<11;

320 
	`so·Êﬂt_mul64To128M
–
sigA
, 
sigB
, 
sig128Z
 );

321 
sigZ
 =

322 (
uöt64_t
Ë
sig128Z
[
	`ödexW‹d
( 4, 3 )]<<32 | sig128Z[indexWord( 4, 2 )];

323 
shi·Di°
 = 0;

324 i‡–! (
sigZ
 & 
	`UINT64_C
( 0x4000000000000000 )) ) {

325 --
expZ
;

326 
shi·Di°
 = -1;

328 i‡–! 
expC
 ) {

329 i‡–! 
sigC
 ) {

330 i‡–
shi·Di°
 ) 
sigZ
 <<= 1;

331 
sigZ
;

333 
n‹mExpSig
 = 
	`so·Êﬂt_n‹mSubn‹mÆF64Sig
–
sigC
 );

334 
expC
 = 
n‹mExpSig
.
exp
;

335 
sigC
 = 
n‹mExpSig
.
sig
;

337 
sigC
 = (sigC | 
	`UINT64_C
( 0x0010000000000000 ))<<10;

340 
expDiff
 = 
expZ
 - 
expC
;

341 i‡–
expDiff
 < 0 ) {

342 
expZ
 = 
expC
;

343 i‡–(
signZ
 =
signC
Ë|| (
expDiff
 < -1) ) {

344 
shi·Di°
 -
expDiff
;

345 i‡–
shi·Di°
) {

346 
sigZ
 = 
	`so·Êﬂt_shi·RightJam64
–sigZ, 
shi·Di°
 );

349 i‡–! 
shi·Di°
 ) {

350 
	`so·Êﬂt_sh‹tShi·Right128M
–
sig128Z
, 1, sig128Z );

354 i‡–
shi·Di°
 ) 
	`so·Êﬂt_add128M
–
sig128Z
, sig128Z, sig128Z );

355 i‡–! 
expDiff
 ) {

356 
sigZ
 =

357 (
uöt64_t
Ë
sig128Z
[
	`ödexW‹d
( 4, 3 )]<<32

358 | 
sig128Z
[
	`ödexW‹d
( 4, 2 )];

360 
sig128C
[
	`ödexW‹d
–4, 3 )] = 
sigC
>>32;

361 
sig128C
[
	`ödexW‹d
–4, 2 )] = 
sigC
;

362 
sig128C
[
	`ödexW‹d
( 4, 1 )] = 0;

363 
sig128C
[
	`ödexW‹d
( 4, 0 )] = 0;

364 
	`so·Êﬂt_shi·RightJam128M
–
sig128C
, 
expDiff
, sig128C );

369 i‡–
signZ
 =
signC
 ) {

372 i‡–
expDiff
 <= 0 ) {

373 
sigZ
 +
sigC
;

375 
	`so·Êﬂt_add128M
–
sig128Z
, 
sig128C
, sig128Z );

376 
sigZ
 =

377 (
uöt64_t
Ë
sig128Z
[
	`ödexW‹d
( 4, 3 )]<<32

378 | 
sig128Z
[
	`ödexW‹d
( 4, 2 )];

380 i‡–
sigZ
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

381 ++
expZ
;

382 
sigZ
 = 
	`so·Êﬂt_sh‹tShi·RightJam64
( sigZ, 1 );

387 i‡–
expDiff
 < 0 ) {

388 
signZ
 = 
signC
;

389 i‡–
expDiff
 < -1 ) {

390 
sigZ
 = 
sigC
 - sigZ;

392 
sig128Z
[
	`ödexW‹d
( 4, 1 )] || sig128Z[indexWord( 4, 0 )]

394 
sigZ
 = (sigZ - 1) | 1;

396 i‡–! (
sigZ
 & 
	`UINT64_C
( 0x4000000000000000 )) ) {

397 --
expZ
;

398 
sigZ
 <<= 1;

400 
roundPack
;

402 
sig128C
[
	`ödexW‹d
–4, 3 )] = 
sigC
>>32;

403 
sig128C
[
	`ödexW‹d
–4, 2 )] = 
sigC
;

404 
sig128C
[
	`ödexW‹d
( 4, 1 )] = 0;

405 
sig128C
[
	`ödexW‹d
( 4, 0 )] = 0;

406 
	`so·Êﬂt_sub128M
–
sig128C
, 
sig128Z
, sig128Z );

408 } i‡–! 
expDiff
 ) {

409 
sigZ
 -
sigC
;

411 ! 
sigZ
 && ! 
sig128Z
[
	`ödexW‹d
( 4, 1 )]

412 && ! 
sig128Z
[
	`ödexW‹d
( 4, 0 )]

414 
com∂ëeC™˚Œ©i⁄
;

416 
sig128Z
[
	`ödexW‹d
–4, 3 )] = 
sigZ
>>32;

417 
sig128Z
[
	`ödexW‹d
–4, 2 )] = 
sigZ
;

418 i‡–
sigZ
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

419 
signZ
 = ! signZ;

420 
	`so·Êﬂt_√gX128M
–
sig128Z
 );

423 
	`so·Êﬂt_sub128M
–
sig128Z
, 
sig128C
, sig128Z );

424 i‡–1 < 
expDiff
 ) {

425 
sigZ
 =

426 (
uöt64_t
Ë
sig128Z
[
	`ödexW‹d
( 4, 3 )]<<32

427 | 
sig128Z
[
	`ödexW‹d
( 4, 2 )];

428 i‡–! (
sigZ
 & 
	`UINT64_C
( 0x4000000000000000 )) ) {

429 --
expZ
;

430 
sigZ
 <<= 1;

432 
sigZ
;

437 
shi·Di°
 = 0;

438 
sigZ
 =

439 (
uöt64_t
Ë
sig128Z
[
	`ödexW‹d
( 4, 3 )]<<32

440 | 
sig128Z
[
	`ödexW‹d
( 4, 2 )];

441 i‡–! 
sigZ
 ) {

442 
shi·Di°
 = 64;

443 
sigZ
 =

444 (
uöt64_t
Ë
sig128Z
[
	`ödexW‹d
( 4, 1 )]<<32

445 | 
sig128Z
[
	`ödexW‹d
( 4, 0 )];

447 
shi·Di°
 +
	`so·Êﬂt_cou¡LódögZîos64
–
sigZ
 ) - 1;

448 i‡–
shi·Di°
 ) {

449 
expZ
 -
shi·Di°
;

450 
	`so·Êﬂt_shi·Le·128M
–
sig128Z
, 
shi·Di°
, sig128Z );

451 
sigZ
 =

452 (
uöt64_t
Ë
sig128Z
[
	`ödexW‹d
( 4, 3 )]<<32

453 | 
sig128Z
[
	`ödexW‹d
( 4, 2 )];

456 
sigZ
:

457 i‡–
sig128Z
[
	`ödexW‹d
–4, 1 )] || sig128Z[ödexW‹d–4, 0 )] ) 
sigZ
 |= 1;

458 
roundPack
:

459  
	`so·Êﬂt_roundPackToF64
–
signZ
, 
expZ
 - 1, 
sigZ
 );

462 
¥›ag©eNaN_ABC
:

463 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 
uiB
 );

464 
¥›ag©eNaN_ZC
;

467 
öfProdArg
:

468 i‡–
magBôs
 ) {

469 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 0x7FF, 0 );

470 i‡–
expC
 !0x7FF ) 
uiZ
;

471 i‡–
sigC
 ) 
¥›ag©eNaN_ZC
;

472 i‡–
signZ
 =
signC
 ) 
uiZ
;

474 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

475 
uiZ
 = 
deÁu…NaNF64UI
;

476 
¥›ag©eNaN_ZC
:

477 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–uiZ, 
uiC
 );

478 
uiZ
;

481 
zîoProd
:

482 
uiZ
 = 
uiC
;

483 i‡–! (
expC
 | 
sigC
Ë&& (
signZ
 !
signC
) ) {

484 
com∂ëeC™˚Œ©i⁄
:

485 
uiZ
 =

486 
	`∑ckToF64UI
(

487 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

489 
uiZ
:

490 
uZ
.
ui
 = 
uiZ
;

491  
uZ
.
f
;

493 
	}
}

	@src/softfloat/source/s_negXM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_√gXM


43 
	$so·Êﬂt_√gXM
–
uöt_Á°8_t
 
size_w‹ds
, 
uöt32_t
 *
zPå
 )

45 
ödex
, 
œ°Index
;

46 
uöt_Á°8_t
 
ˇºy
;

47 
uöt32_t
 
w‹d
;

49 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

50 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

51 
ˇºy
 = 1;

53 
w‹d
 = ~
zPå
[
ödex
] + 
ˇºy
;

54 
zPå
[
ödex
] = 
w‹d
;

55 i‡–
ödex
 =
œ°Index
 ) ;

56 
ödex
 +
w‹dIn¸
;

57 i‡–
w‹d
 ) 
ˇºy
 = 0;

60 
	}
}

	@src/softfloat/source/s_normExtF80SigM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

41 
	$so·Êﬂt_n‹mExtF80SigM
–
uöt64_t
 *
sigPå
 )

43 
uöt64_t
 
sig
;

44 
öt_Á°8_t
 
shi·Di°
;

46 
sig
 = *
sigPå
;

47 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig
 );

48 *
sigPå
 = 
sig
<<
shi·Di°
;

49  -
shi·Di°
;

51 
	}
}

	@src/softfloat/source/s_normRoundPackMToExtF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

43 
	$so·Êﬂt_n‹mRoundPackMToExtF80M
(

44 
boﬁ
 
sign
,

45 
öt32_t
 
exp
,

46 
uöt32_t
 *
extSigPå
,

47 
uöt_Á°8_t
 
roundögPªcisi⁄
,

48 
extFlﬂt80M
 *
zSPå


51 
öt_Á°16_t
 
shi·Di°
;

52 
uöt32_t
 
w‹dSig
;

54 
shi·Di°
 = 0;

55 
w‹dSig
 = 
extSigPå
[
	`ödexW‹d
( 3, 2 )];

56 i‡–! 
w‹dSig
 ) {

57 
shi·Di°
 = 32;

58 
w‹dSig
 = 
extSigPå
[
	`ödexW‹d
( 3, 1 )];

59 i‡–! 
w‹dSig
 ) {

60 
shi·Di°
 = 64;

61 
w‹dSig
 = 
extSigPå
[
	`ödexW‹d
( 3, 0 )];

62 i‡–! 
w‹dSig
 ) {

63 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
sign
, 0 );

64 
zSPå
->
signif
 = 0;

69 
shi·Di°
 +
	`so·Êﬂt_cou¡LódögZîos32
–
w‹dSig
 );

70 i‡–
shi·Di°
 ) {

71 
exp
 -
shi·Di°
;

72 
	`so·Êﬂt_shi·Le·96M
–
extSigPå
, 
shi·Di°
,ÉxtSigPtr );

74 
	`so·Êﬂt_roundPackMToExtF80M
(

75 
sign
, 
exp
, 
extSigPå
, 
roundögPªcisi⁄
, 
zSPå
 );

77 
	}
}

	@src/softfloat/source/s_normRoundPackMToF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

43 
	$so·Êﬂt_n‹mRoundPackMToF128M
(

44 
boﬁ
 
sign
, 
öt32_t
 
exp
, 
uöt32_t
 *
extSigPå
, uöt32_à*
zWPå
 )

46 c⁄° 
uöt32_t
 *
±r
;

47 
öt_Á°16_t
 
shi·Di°
;

48 
uöt32_t
 
w‹dSig
;

50 
±r
 = 
extSigPå
 + 
	`ödexW‹dHi
( 5 );

51 
shi·Di°
 = 0;

53 
w‹dSig
 = *
±r
;

54 i‡–
w‹dSig
 ) ;

55 
shi·Di°
 += 32;

56 i‡–160 <
shi·Di°
 ) {

57 
zWPå
[
	`ödexW‹dHi
–4 )] = 
	`∑ckToF128UI96
–
sign
, 0, 0 );

58 
zWPå
[
	`ödexW‹d
( 4, 2 )] = 0;

59 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

60 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

63 
±r
 -
w‹dIn¸
;

65 
shi·Di°
 +
	`so·Êﬂt_cou¡LódögZîos32
–
w‹dSig
 ) - 15;

66 i‡–
shi·Di°
 ) {

67 
exp
 -
shi·Di°
;

68 
	`so·Êﬂt_shi·Le·160M
–
extSigPå
, 
shi·Di°
,ÉxtSigPtr );

70 
	`so·Êﬂt_roundPackMToF128M
–
sign
, 
exp
, 
extSigPå
, 
zWPå
 );

72 
	}
}

	@src/softfloat/source/s_normRoundPackToExtF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

42 
extFlﬂt80_t


43 
	$so·Êﬂt_n‹mRoundPackToExtF80
(

44 
boﬁ
 
sign
,

45 
öt_Á°32_t
 
exp
,

46 
uöt_Á°64_t
 
sig
,

47 
uöt_Á°64_t
 
sigExåa
,

48 
uöt_Á°8_t
 
roundögPªcisi⁄


51 
öt_Á°8_t
 
shi·Di°
;

52 
uöt128
 
sig128
;

54 i‡–! 
sig
 ) {

55 
exp
 -= 64;

56 
sig
 = 
sigExåa
;

57 
sigExåa
 = 0;

59 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig
 );

60 
exp
 -
shi·Di°
;

61 i‡–
shi·Di°
 ) {

62 
sig128
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
sig
, 
sigExåa
, 
shi·Di°
 );

63 
sig
 = 
sig128
.
v64
;

64 
sigExåa
 = 
sig128
.
v0
;

67 
	`so·Êﬂt_roundPackToExtF80
(

68 
sign
, 
exp
, 
sig
, 
sigExåa
, 
roundögPªcisi⁄
 );

70 
	}
}

	@src/softfloat/source/s_normRoundPackToF128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

42 
Êﬂt128_t


43 
	$so·Êﬂt_n‹mRoundPackToF128
(

44 
boﬁ
 
sign
, 
öt_Á°32_t
 
exp
, 
uöt_Á°64_t
 
sig64
, uöt_Á°64_à
sig0
 )

46 
öt_Á°8_t
 
shi·Di°
;

47 
uöt128
 
sig128
;

48 
ui128_f128
 
uZ
;

49 
uöt_Á°64_t
 
sigExåa
;

50 
uöt128_exåa
 
sig128Exåa
;

52 i‡–! 
sig64
 ) {

53 
exp
 -= 64;

54 
sig64
 = 
sig0
;

55 
sig0
 = 0;

57 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig64
 ) - 15;

58 
exp
 -
shi·Di°
;

59 i‡–0 <
shi·Di°
 ) {

60 i‡–
shi·Di°
 ) {

61 
sig128
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
sig64
, 
sig0
, 
shi·Di°
 );

62 
sig64
 = 
sig128
.
v64
;

63 
sig0
 = 
sig128
.
v0
;

65 i‡–(
uöt32_t
Ë
exp
 < 0x7FFD ) {

66 
uZ
.
ui
.
v64
 = 
	`∑ckToF128UI64
–
sign
, 
sig64
 | 
sig0
 ? 
exp
 : 0, sig64 );

67 
uZ
.
ui
.
v0
 = 
sig0
;

68  
uZ
.
f
;

70 
sigExåa
 = 0;

72 
sig128Exåa
 =

73 
	`so·Êﬂt_sh‹tShi·RightJam128Exåa
–
sig64
, 
sig0
, 0, -
shi·Di°
 );

74 
sig64
 = 
sig128Exåa
.
v
.
v64
;

75 
sig0
 = 
sig128Exåa
.
v
.
v0
;

76 
sigExåa
 = 
sig128Exåa
.
exåa
;

78  
	`so·Êﬂt_roundPackToF128
–
sign
, 
exp
, 
sig64
, 
sig0
, 
sigExåa
 );

80 
	}
}

	@src/softfloat/source/s_normRoundPackToF16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

42 
Êﬂt16_t


43 
	$so·Êﬂt_n‹mRoundPackToF16
–
boﬁ
 
sign
, 
öt_Á°16_t
 
exp
, 
uöt_Á°16_t
 
sig
 )

45 
öt_Á°8_t
 
shi·Di°
;

46 
ui16_f16
 
uZ
;

48 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos16
–
sig
 ) - 1;

49 
exp
 -
shi·Di°
;

50 i‡–(4 <
shi·Di°
Ë&& ((Ë
exp
 < 0x1D) ) {

51 
uZ
.
ui
 = 
	`∑ckToF16UI
–
sign
, 
sig
 ? 
exp
 : 0, sig<<(
shi·Di°
 - 4) );

52  
uZ
.
f
;

54  
	`so·Êﬂt_roundPackToF16
–
sign
, 
exp
, 
sig
<<
shi·Di°
 );

57 
	}
}

	@src/softfloat/source/s_normRoundPackToF32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

42 
Êﬂt32_t


43 
	$so·Êﬂt_n‹mRoundPackToF32
–
boﬁ
 
sign
, 
öt_Á°16_t
 
exp
, 
uöt_Á°32_t
 
sig
 )

45 
öt_Á°8_t
 
shi·Di°
;

46 
ui32_f32
 
uZ
;

48 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
sig
 ) - 1;

49 
exp
 -
shi·Di°
;

50 i‡–(7 <
shi·Di°
Ë&& ((Ë
exp
 < 0xFD) ) {

51 
uZ
.
ui
 = 
	`∑ckToF32UI
–
sign
, 
sig
 ? 
exp
 : 0, sig<<(
shi·Di°
 - 7) );

52  
uZ
.
f
;

54  
	`so·Êﬂt_roundPackToF32
–
sign
, 
exp
, 
sig
<<
shi·Di°
 );

57 
	}
}

	@src/softfloat/source/s_normRoundPackToF64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

42 
Êﬂt64_t


43 
	$so·Êﬂt_n‹mRoundPackToF64
–
boﬁ
 
sign
, 
öt_Á°16_t
 
exp
, 
uöt_Á°64_t
 
sig
 )

45 
öt_Á°8_t
 
shi·Di°
;

46 
ui64_f64
 
uZ
;

48 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig
 ) - 1;

49 
exp
 -
shi·Di°
;

50 i‡–(10 <
shi·Di°
Ë&& ((Ë
exp
 < 0x7FD) ) {

51 
uZ
.
ui
 = 
	`∑ckToF64UI
–
sign
, 
sig
 ? 
exp
 : 0, sig<<(
shi·Di°
 - 10) );

52  
uZ
.
f
;

54  
	`so·Êﬂt_roundPackToF64
–
sign
, 
exp
, 
sig
<<
shi·Di°
 );

57 
	}
}

	@src/softfloat/source/s_normSubnormalBF16Sig.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

41 
exp8_sig16
 
	$so·Êﬂt_n‹mSubn‹mÆBF16Sig
–
uöt_Á°16_t
 
sig
 )

43 
öt_Á°8_t
 
shi·Di°
;

44 
exp8_sig16
 
z
;

46 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos16
–
sig
 ) - 8;

47 
z
.
exp
 = 1 - 
shi·Di°
;

48 
z
.
sig
 = sig<<
shi·Di°
;

49  
z
;

51 
	}
}

	@src/softfloat/source/s_normSubnormalExtF80Sig.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

41 
exp32_sig64
 
	$so·Êﬂt_n‹mSubn‹mÆExtF80Sig
–
uöt_Á°64_t
 
sig
 )

43 
öt_Á°8_t
 
shi·Di°
;

44 
exp32_sig64
 
z
;

46 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig
 );

47 
z
.
exp
 = -
shi·Di°
;

48 
z
.
sig
 = sig<<
shi·Di°
;

49  
z
;

51 
	}
}

	@src/softfloat/source/s_normSubnormalF128Sig.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

41 
exp32_sig128


42 
	$so·Êﬂt_n‹mSubn‹mÆF128Sig
–
uöt_Á°64_t
 
sig64
, uöt_Á°64_à
sig0
 )

44 
öt_Á°8_t
 
shi·Di°
;

45 
exp32_sig128
 
z
;

47 i‡–! 
sig64
 ) {

48 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig0
 ) - 15;

49 
z
.
exp
 = -63 - 
shi·Di°
;

50 i‡–
shi·Di°
 < 0 ) {

51 
z
.
sig
.
v64
 = 
sig0
>>-
shi·Di°
;

52 
z
.
sig
.
v0
 = 
sig0
<<(
shi·Di°
 & 63);

54 
z
.
sig
.
v64
 = 
sig0
<<
shi·Di°
;

55 
z
.
sig
.
v0
 = 0;

58 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig64
 ) - 15;

59 
z
.
exp
 = 1 - 
shi·Di°
;

60 
z
.
sig
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–
sig64
, 
sig0
, 
shi·Di°
 );

62  
z
;

64 
	}
}

	@src/softfloat/source/s_normSubnormalF128SigM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

41 
	$so·Êﬂt_n‹mSubn‹mÆF128SigM
–
uöt32_t
 *
sigPå
 )

43 c⁄° 
uöt32_t
 *
±r
;

44 
öt_Á°16_t
 
shi·Di°
;

45 
uöt32_t
 
w‹dSig
;

47 
±r
 = 
sigPå
 + 
	`ödexW‹dHi
( 4 );

48 
shi·Di°
 = 0;

50 
w‹dSig
 = *
±r
;

51 i‡–
w‹dSig
 ) ;

52 
shi·Di°
 += 32;

53 i‡–128 <
shi·Di°
 )  1;

54 
±r
 -
w‹dIn¸
;

56 
shi·Di°
 +
	`so·Êﬂt_cou¡LódögZîos32
–
w‹dSig
 ) - 15;

57 i‡–
shi·Di°
 ) 
	`so·Êﬂt_shi·Le·128M
–
sigPå
, shiftDist, sigPtr );

58  1 - 
shi·Di°
;

60 
	}
}

	@src/softfloat/source/s_normSubnormalF16Sig.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

41 
exp8_sig16
 
	$so·Êﬂt_n‹mSubn‹mÆF16Sig
–
uöt_Á°16_t
 
sig
 )

43 
öt_Á°8_t
 
shi·Di°
;

44 
exp8_sig16
 
z
;

46 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos16
–
sig
 ) - 5;

47 
z
.
exp
 = 1 - 
shi·Di°
;

48 
z
.
sig
 = sig<<
shi·Di°
;

49  
z
;

51 
	}
}

	@src/softfloat/source/s_normSubnormalF32Sig.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

41 
exp16_sig32
 
	$so·Êﬂt_n‹mSubn‹mÆF32Sig
–
uöt_Á°32_t
 
sig
 )

43 
öt_Á°8_t
 
shi·Di°
;

44 
exp16_sig32
 
z
;

46 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
sig
 ) - 8;

47 
z
.
exp
 = 1 - 
shi·Di°
;

48 
z
.
sig
 = sig<<
shi·Di°
;

49  
z
;

51 
	}
}

	@src/softfloat/source/s_normSubnormalF64Sig.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

41 
exp16_sig64
 
	$so·Êﬂt_n‹mSubn‹mÆF64Sig
–
uöt_Á°64_t
 
sig
 )

43 
öt_Á°8_t
 
shi·Di°
;

44 
exp16_sig64
 
z
;

46 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sig
 ) - 11;

47 
z
.
exp
 = 1 - 
shi·Di°
;

48 
z
.
sig
 = sig<<
shi·Di°
;

49  
z
;

51 
	}
}

	@src/softfloat/source/s_remStepMBy32.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_ªmSãpMBy32


44 
	$so·Êﬂt_ªmSãpMBy32
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
ªmPå
,

47 
uöt_Á°8_t
 
di°
,

48 c⁄° 
uöt32_t
 *
bPå
,

49 
uöt32_t
 
q
,

50 
uöt32_t
 *
zPå


53 
ödex
, 
œ°Index
;

54 
uöt64_t
 
dw‹dProd
;

55 
uöt32_t
 
w‹dRem
, 
w‹dShi·edRem
, 
w‹dProd
;

56 
uöt_Á°8_t
 
uNegDi°
, 
b‹row
;

58 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

59 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

60 
dw‹dProd
 = (
uöt64_t
Ë
bPå
[
ödex
] * 
q
;

61 
w‹dRem
 = 
ªmPå
[
ödex
];

62 
w‹dShi·edRem
 = 
w‹dRem
<<
di°
;

63 
w‹dProd
 = 
dw‹dProd
;

64 
zPå
[
ödex
] = 
w‹dShi·edRem
 - 
w‹dProd
;

65 i‡–
ödex
 !
œ°Index
 ) {

66 
uNegDi°
 = -
di°
;

67 
b‹row
 = (
w‹dShi·edRem
 < 
w‹dProd
);

69 
w‹dShi·edRem
 = 
w‹dRem
>>(
uNegDi°
 & 31);

70 
ödex
 +
w‹dIn¸
;

71 
dw‹dProd
 = (
uöt64_t
Ë
bPå
[
ödex
] * 
q
 + (dwordProd>>32);

72 
w‹dRem
 = 
ªmPå
[
ödex
];

73 
w‹dShi·edRem
 |
w‹dRem
<<
di°
;

74 
w‹dProd
 = 
dw‹dProd
;

75 
zPå
[
ödex
] = 
w‹dShi·edRem
 - 
w‹dProd
 - 
b‹row
;

76 i‡–
ödex
 =
œ°Index
 ) ;

77 
b‹row
 =

78 
b‹row
 ? (
w‹dShi·edRem
 <
w‹dProd
)

79 : (
w‹dShi·edRem
 < 
w‹dProd
);

83 
	}
}

	@src/softfloat/source/s_roundMToI64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t


45 
	$so·Êﬂt_roundMToI64
(

46 
boﬁ
 
sign
, 
uöt32_t
 *
extSigPå
, 
uöt_Á°8_t
 
roundögMode
, boﬁ 
exa˘
 )

48 
uöt64_t
 
sig
;

49 
uöt32_t
 
sigExåa
;

50 uni⁄ { 
uöt64_t
 
ui
; 
öt64_t
 
i
; } 
uZ
;

51 
öt64_t
 
z
;

55 
sig
 =

56 (
uöt64_t
Ë
extSigPå
[
	`ödexW‹d
( 3, 2 )]<<32

57 | 
extSigPå
[
	`ödexW‹d
( 3, 1 )];

58 
sigExåa
 = 
extSigPå
[
	`ödexW‹dLo
( 3 )];

60 (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

61 || (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

63 i‡–0x80000000 <
sigExåa
 ) 
ö¸emít
;

66 
sigExåa


67 && (
sign


68 ? (
roundögMode
 =
so·Êﬂt_round_mö
)

69 #ifde‡
SOFTFLOAT_ROUND_ODD


70 || (
roundögMode
 =
so·Êﬂt_round_odd
)

72 : (
roundögMode
 =
so·Êﬂt_round_max
))

74 
ö¸emít
:

75 ++
sig
;

76 i‡–!
sig
 ) 
övÆid
;

78 (
sigExåa
 == 0x80000000)

79 && (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

81 
sig
 &~(
uöt_Á°64_t
) 1;

85 
uZ
.
ui
 = 
sign
 ? -
sig
 : sig;

86 
z
 = 
uZ
.
i
;

87 i‡–
z
 && ((z < 0Ë^ 
sign
ËË
övÆid
;

88 i‡–
sigExåa
 ) {

89 #ifde‡
SOFTFLOAT_ROUND_ODD


90 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
z
 |= 1;

92 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

94  
z
;

97 
övÆid
:

98 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

99  
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

101 
	}
}

	@src/softfloat/source/s_roundMToUI64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t


45 
	$so·Êﬂt_roundMToUI64
(

46 
boﬁ
 
sign
, 
uöt32_t
 *
extSigPå
, 
uöt_Á°8_t
 
roundögMode
, boﬁ 
exa˘
 )

48 
uöt64_t
 
sig
;

49 
uöt32_t
 
sigExåa
;

53 
sig
 =

54 (
uöt64_t
Ë
extSigPå
[
	`ödexW‹d
( 3, 2 )]<<32

55 | 
extSigPå
[
	`ödexW‹d
( 3, 1 )];

56 
sigExåa
 = 
extSigPå
[
	`ödexW‹dLo
( 3 )];

58 (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

59 || (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

61 i‡–0x80000000 <
sigExåa
 ) 
ö¸emít
;

63 i‡–
sign
 ) {

64 i‡–!(
sig
 | 
sigExåa
) )  0;

65 i‡–
roundögMode
 =
so·Êﬂt_round_mö
 ) 
övÆid
;

66 #ifde‡
SOFTFLOAT_ROUND_ODD


67 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
övÆid
;

70 i‡–(
roundögMode
 =
so·Êﬂt_round_max
Ë&& 
sigExåa
 ) {

71 
ö¸emít
:

72 ++
sig
;

73 i‡–!
sig
 ) 
övÆid
;

75 (
sigExåa
 == 0x80000000)

76 && (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

78 
sig
 &~(
uöt_Á°64_t
) 1;

83 i‡–
sign
 && 
sig
 ) 
övÆid
;

84 i‡–
sigExåa
 ) {

85 #ifde‡
SOFTFLOAT_ROUND_ODD


86 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
sig
 |= 1;

88 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

90  
sig
;

93 
övÆid
:

94 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

95  
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

97 
	}
}

	@src/softfloat/source/s_roundPackMToExtF80M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

44 
	$so·Êﬂt_roundPackMToExtF80M
(

45 
boﬁ
 
sign
,

46 
öt32_t
 
exp
,

47 
uöt32_t
 *
extSigPå
,

48 
uöt_Á°8_t
 
roundögPªcisi⁄
,

49 
extFlﬂt80M
 *
zSPå


52 
uöt_Á°8_t
 
roundögMode
;

53 
boﬁ
 
roundNórEví
;

54 
uöt64_t
 
sig
, 
roundIn¸emít
, 
roundMask
, 
roundBôs
;

55 
boﬁ
 
isTöy
;

56 
uöt32_t
 
sigExåa
;

57 
boﬁ
 
doIn¸emít
;

61 
roundögMode
 = 
so·Êﬂt_roundögMode
;

62 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

63 
sig
 =

64 (
uöt64_t
Ë
extSigPå
[
	`ödexW‹d
( 3, 2 )]<<32

65 | 
extSigPå
[
	`ödexW‹d
( 3, 1 )];

66 i‡–
roundögPªcisi⁄
 =80 ) 
¥ecisi⁄80
;

67 i‡–
roundögPªcisi⁄
 == 64 ) {

68 
roundIn¸emít
 = 
	`UINT64_C
( 0x0000000000000400 );

69 
roundMask
 = 
	`UINT64_C
( 0x00000000000007FF );

70 } i‡–
roundögPªcisi⁄
 == 32 ) {

71 
roundIn¸emít
 = 
	`UINT64_C
( 0x0000008000000000 );

72 
roundMask
 = 
	`UINT64_C
( 0x000000FFFFFFFFFF );

74 
¥ecisi⁄80
;

78 i‡–
extSigPå
[
	`ödexW‹dLo
–3 )] ) 
sig
 |= 1;

79 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

80 
roundIn¸emít
 =

81 (
roundögMode


82 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

83 ? 
roundMask


86 
roundBôs
 = 
sig
 & 
roundMask
;

89 i‡–0x7FFD <(
uöt32_t
Ë(
exp
 - 1) ) {

90 i‡–
exp
 <= 0 ) {

93 
isTöy
 =

94 (
so·Êﬂt_dëe˘Tööess


95 =
so·Êﬂt_tööess_bef‹eRoundög
)

96 || (
exp
 < 0)

97 || (
sig
 <(
uöt64_t
Ë(sig + 
roundIn¸emít
));

98 
sig
 = 
	`so·Êﬂt_shi·RightJam64
–sig, 1 - 
exp
 );

99 
roundBôs
 = 
sig
 & 
roundMask
;

100 i‡–
roundBôs
 ) {

101 i‡–
isTöy
 ) 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

102 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

103 #ifde‡
SOFTFLOAT_ROUND_ODD


104 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

105 
sig
 |
roundMask
 + 1;

109 
sig
 +
roundIn¸emít
;

110 
exp
 = ((
sig
 & 
	`UINT64_C
( 0x8000000000000000 )) != 0);

111 
roundIn¸emít
 = 
roundMask
 + 1;

112 i‡–
roundNórEví
 && (
roundBôs
<<1 =
roundIn¸emít
) ) {

113 
roundMask
 |
roundIn¸emít
;

115 
sig
 &~
roundMask
;

116 
∑ckRëu∫
;

119 (0x7FFE < 
exp
)

120 || ((
exp
 =0x7FFEË&& ((
uöt64_t
Ë(
sig
 + 
roundIn¸emít
) < sig))

122 
ovîÊow
;

127 i‡–
roundBôs
 ) {

128 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

129 #ifde‡
SOFTFLOAT_ROUND_ODD


130 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

131 
sig
 = (sig & ~
roundMask
) | (roundMask + 1);

132 
∑ckRëu∫
;

136 
sig
 +
roundIn¸emít
;

137 i‡–
sig
 < 
roundIn¸emít
 ) {

138 ++
exp
;

139 
sig
 = 
	`UINT64_C
( 0x8000000000000000 );

141 
roundIn¸emít
 = 
roundMask
 + 1;

142 i‡–
roundNórEví
 && (
roundBôs
<<1 =
roundIn¸emít
) ) {

143 
roundMask
 |
roundIn¸emít
;

145 
sig
 &~
roundMask
;

146 
∑ckRëu∫
;

149 
¥ecisi⁄80
:

150 
sigExåa
 = 
extSigPå
[
	`ödexW‹dLo
( 3 )];

151 
doIn¸emít
 = (0x80000000 <
sigExåa
);

152 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

153 
doIn¸emít
 =

154 (
roundögMode


155 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

156 && 
sigExåa
;

160 i‡–0x7FFD <(
uöt32_t
Ë(
exp
 - 1) ) {

161 i‡–
exp
 <= 0 ) {

164 
isTöy
 =

165 (
so·Êﬂt_dëe˘Tööess


166 =
so·Êﬂt_tööess_bef‹eRoundög
)

167 || (
exp
 < 0)

168 || ! 
doIn¸emít


169 || (
sig
 < 
	`UINT64_C
( 0xFFFFFFFFFFFFFFFF ));

170 
	`so·Êﬂt_shi·RightJam96M
–
extSigPå
, 1 - 
exp
,ÉxtSigPtr );

171 
exp
 = 0;

172 
sig
 =

173 (
uöt64_t
Ë
extSigPå
[
	`ödexW‹d
( 3, 2 )]<<32

174 | 
extSigPå
[
	`ödexW‹d
( 3, 1 )];

175 
sigExåa
 = 
extSigPå
[
	`ödexW‹dLo
( 3 )];

176 i‡–
sigExåa
 ) {

177 i‡–
isTöy
 ) 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

178 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

179 #ifde‡
SOFTFLOAT_ROUND_ODD


180 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

181 
sig
 |= 1;

182 
∑ckRëu∫
;

186 
doIn¸emít
 = (0x80000000 <
sigExåa
);

188 ! 
roundNórEví


189 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
)

191 
doIn¸emít
 =

192 (
roundögMode


193 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

194 && 
sigExåa
;

196 i‡–
doIn¸emít
 ) {

197 ++
sig
;

198 
sig
 &~(
uöt64_t
Ë(! (
sigExåa
 & 0x7FFFFFFFË& 
roundNórEví
);

199 
exp
 = ((
sig
 & 
	`UINT64_C
( 0x8000000000000000 )) != 0);

201 
∑ckRëu∫
;

204 (0x7FFE < 
exp
)

205 || ((
exp
 =0x7FFEË&& (
sig
 =
	`UINT64_C
( 0xFFFFFFFFFFFFFFFF ))

206 && 
doIn¸emít
)

210 
roundMask
 = 0;

211 
ovîÊow
:

212 
	`so·Êﬂt_øi£Fœgs
(

213 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

215 
roundNórEví


216 || (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

217 || (
roundögMode


218 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

220 
exp
 = 0x7FFF;

221 
sig
 = 
	`UINT64_C
( 0x8000000000000000 );

223 
exp
 = 0x7FFE;

224 
sig
 = ~
roundMask
;

226 
∑ckRëu∫
;

231 i‡–
sigExåa
 ) {

232 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

233 #ifde‡
SOFTFLOAT_ROUND_ODD


234 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

235 
sig
 |= 1;

236 
∑ckRëu∫
;

240 i‡–
doIn¸emít
 ) {

241 ++
sig
;

242 i‡–! 
sig
 ) {

243 ++
exp
;

244 
sig
 = 
	`UINT64_C
( 0x8000000000000000 );

246 
sig
 &~(
uöt64_t
Ë(! (
sigExåa
 & 0x7FFFFFFFË& 
roundNórEví
);

251 
∑ckRëu∫
:

252 
zSPå
->
signExp
 = 
	`∑ckToExtF80UI64
–
sign
, 
exp
 );

253 
zSPå
->
signif
 = 
sig
;

255 
	}
}

	@src/softfloat/source/s_roundPackMToF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

44 
	$so·Êﬂt_roundPackMToF128M
(

45 
boﬁ
 
sign
, 
öt32_t
 
exp
, 
uöt32_t
 *
extSigPå
, uöt32_à*
zWPå
 )

47 
uöt_Á°8_t
 
roundögMode
;

48 
boﬁ
 
roundNórEví
;

49 
uöt32_t
 
sigExåa
;

50 
boﬁ
 
doIn¸emít
, 
isTöy
;

51 c⁄° 
uöt32_t
 
maxSig
[4] =

52 
	`INIT_UINTM4
( 0x0001FFFF, 0xFFFFFFFF, 0xFFFFFFFF, 0xFFFFFFFF );

53 
uöt32_t
 
ui
, 
uj
;

57 
roundögMode
 = 
so·Êﬂt_roundögMode
;

58 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

59 
sigExåa
 = 
extSigPå
[
	`ödexW‹dLo
( 5 )];

60 
doIn¸emít
 = (0x80000000 <
sigExåa
);

61 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

62 
doIn¸emít
 =

63 (
roundögMode


64 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

65 && 
sigExåa
;

69 i‡–0x7FFD <(
uöt32_t
Ë
exp
 ) {

70 i‡–
exp
 < 0 ) {

73 
isTöy
 =

74 (
so·Êﬂt_dëe˘Tööess


75 =
so·Êﬂt_tööess_bef‹eRoundög
)

76 || (
exp
 < -1)

77 || ! 
doIn¸emít


78 || (
	`so·Êﬂt_com∑ª128M
(

79 
extSigPå
 + 
	`ödexMu…iw‹dHi
–5, 4 ), 
maxSig
 )

81 
	`so·Êﬂt_shi·RightJam160M
–
extSigPå
, -
exp
,ÉxtSigPtr );

82 
exp
 = 0;

83 
sigExåa
 = 
extSigPå
[
	`ödexW‹dLo
( 5 )];

84 i‡–
isTöy
 && 
sigExåa
 ) {

85 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

87 
doIn¸emít
 = (0x80000000 <
sigExåa
);

89 ! 
roundNórEví


90 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
)

92 
doIn¸emít
 =

93 (
roundögMode


94 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

95 && 
sigExåa
;

98 (0x7FFD < 
exp
)

99 || ((
exp
 =0x7FFDË&& 
doIn¸emít


100 && (
	`so·Êﬂt_com∑ª128M
(

101 
extSigPå
 + 
	`ödexMu…iw‹dHi
–5, 4 ), 
maxSig
 )

106 
	`so·Êﬂt_øi£Fœgs
(

107 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

109 
roundNórEví


110 || (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

111 || (
roundögMode


112 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

114 
ui
 = 
	`∑ckToF128UI96
–
sign
, 0x7FFF, 0 );

115 
uj
 = 0;

117 
ui
 = 
	`∑ckToF128UI96
–
sign
, 0x7FFE, 0x0000FFFF );

118 
uj
 = 0xFFFFFFFF;

120 
zWPå
[
	`ödexW‹dHi
–4 )] = 
ui
;

121 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
uj
;

122 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
uj
;

123 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
uj
;

129 
uj
 = 
extSigPå
[
	`ödexW‹d
( 5, 1 )];

130 i‡–
sigExåa
 ) {

131 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

132 #ifde‡
SOFTFLOAT_ROUND_ODD


133 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

134 
uj
 |= 1;

135 
noIn¸emítPackRëu∫
;

139 i‡–
doIn¸emít
 ) {

140 ++
uj
;

141 i‡–
uj
 ) {

142 i‡–! (
sigExåa
 & 0x7FFFFFFFË&& 
roundNórEví
 ) 
uj
 &= ~1;

143 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
extSigPå
[indexWord( 5, 3 )];

144 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
extSigPå
[indexWord( 5, 2 )];

145 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
uj
;

146 
ui
 = 
extSigPå
[
	`ödexW‹dHi
( 5 )];

148 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
uj
;

149 
ui
 = 
extSigPå
[
	`ödexW‹d
( 5, 2 )] + 1;

150 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
ui
;

151 
uj
 = 
extSigPå
[
	`ödexW‹d
( 5, 3 )];

152 i‡–
ui
 ) {

153 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
uj
;

154 
ui
 = 
extSigPå
[
	`ödexW‹dHi
( 5 )];

156 ++
uj
;

157 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
uj
;

158 
ui
 = 
extSigPå
[
	`ödexW‹dHi
( 5 )];

159 i‡–! 
uj
 ) ++
ui
;

163 
noIn¸emítPackRëu∫
:

164 
zWPå
[
	`ödexW‹d
–4, 0 )] = 
uj
;

165 
ui
 = 
extSigPå
[
	`ödexW‹d
( 5, 2 )];

166 
zWPå
[
	`ödexW‹d
–4, 1 )] = 
ui
;

167 
uj
 |
ui
;

168 
ui
 = 
extSigPå
[
	`ödexW‹d
( 5, 3 )];

169 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
ui
;

170 
uj
 |
ui
;

171 
ui
 = 
extSigPå
[
	`ödexW‹dHi
( 5 )];

172 
uj
 |
ui
;

173 i‡–! 
uj
 ) 
exp
 = 0;

175 
zWPå
[
	`ödexW‹dHi
–4 )] = 
	`∑ckToF128UI96
–
sign
, 
exp
, 
ui
 );

177 
	}
}

	@src/softfloat/source/s_roundPackToBF16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

44 
bÊﬂt16_t


45 
	$so·Êﬂt_roundPackToBF16
–
boﬁ
 
sign
, 
öt_Á°16_t
 
exp
, 
uöt_Á°16_t
 
sig
 )

47 
uöt_Á°8_t
 
roundögMode
;

48 
boﬁ
 
roundNórEví
;

49 
uöt_Á°8_t
 
roundIn¸emít
, 
roundBôs
;

50 
boﬁ
 
isTöy
;

51 
uöt_Á°16_t
 
uiZ
;

52 
ui16_bf16
 
uZ
;

56 
roundögMode
 = 
so·Êﬂt_roundögMode
;

57 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

58 
roundIn¸emít
 = 0x40;

59 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

60 
roundIn¸emít
 =

61 (
roundögMode


62 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

66 
roundBôs
 = 
sig
 & 0x7F;

69 i‡–0xFD <(Ë
exp
 ) {

70 i‡–
exp
 < 0 ) {

73 
isTöy
 =

74 (
so·Êﬂt_dëe˘Tööess
 =
so·Êﬂt_tööess_bef‹eRoundög
)

75 || (
exp
 < -1Ë|| (
sig
 + 
roundIn¸emít
 < 0x8000);

76 
sig
 = 
	`so·Êﬂt_shi·RightJam32
–sig, -
exp
 );

77 
exp
 = 0;

78 
roundBôs
 = 
sig
 & 0x7F;

79 i‡–
isTöy
 && 
roundBôs
 ) {

80 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

82 } i‡–(0xFD < 
exp
Ë|| (0x8000 <
sig
 + 
roundIn¸emít
) ) {

85 
	`so·Êﬂt_øi£Fœgs
(

86 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

87 
uiZ
 = 
	`∑ckToBF16UI
–
sign
, 0xFF, 0 ) - ! 
roundIn¸emít
;

88 
uiZ
;

93 
sig
 = (sig + 
roundIn¸emít
)>>7;

94 i‡–
roundBôs
 ) {

95 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

96 #ifde‡
SOFTFLOAT_ROUND_ODD


97 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

98 
sig
 |= 1;

99 
∑ckRëu∫
;

103 
sig
 &~(
uöt_Á°16_t
Ë(! (
roundBôs
 ^ 0x40Ë& 
roundNórEví
);

104 i‡–! 
sig
 ) 
exp
 = 0;

107 
∑ckRëu∫
:

108 
uiZ
 = 
	`∑ckToBF16UI
–
sign
, 
exp
, 
sig
 );

109 
uiZ
:

110 
uZ
.
ui
 = 
uiZ
;

111  
uZ
.
f
;

113 
	}
}

	@src/softfloat/source/s_roundPackToExtF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
extFlﬂt80_t


44 
	$so·Êﬂt_roundPackToExtF80
(

45 
boﬁ
 
sign
,

46 
öt_Á°32_t
 
exp
,

47 
uöt_Á°64_t
 
sig
,

48 
uöt_Á°64_t
 
sigExåa
,

49 
uöt_Á°8_t
 
roundögPªcisi⁄


52 
uöt_Á°8_t
 
roundögMode
;

53 
boﬁ
 
roundNórEví
;

54 
uöt_Á°64_t
 
roundIn¸emít
, 
roundMask
, 
roundBôs
;

55 
boﬁ
 
isTöy
, 
doIn¸emít
;

56 
uöt64_exåa
 
sig64Exåa
;

57 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

61 
roundögMode
 = 
so·Êﬂt_roundögMode
;

62 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

63 i‡–
roundögPªcisi⁄
 =80 ) 
¥ecisi⁄80
;

64 i‡–
roundögPªcisi⁄
 == 64 ) {

65 
roundIn¸emít
 = 
	`UINT64_C
( 0x0000000000000400 );

66 
roundMask
 = 
	`UINT64_C
( 0x00000000000007FF );

67 } i‡–
roundögPªcisi⁄
 == 32 ) {

68 
roundIn¸emít
 = 
	`UINT64_C
( 0x0000008000000000 );

69 
roundMask
 = 
	`UINT64_C
( 0x000000FFFFFFFFFF );

71 
¥ecisi⁄80
;

73 
sig
 |(
sigExåa
 != 0);

74 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

75 
roundIn¸emít
 =

76 (
roundögMode


77 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

78 ? 
roundMask


81 
roundBôs
 = 
sig
 & 
roundMask
;

84 i‡–0x7FFD <(
uöt32_t
Ë(
exp
 - 1) ) {

85 i‡–
exp
 <= 0 ) {

88 
isTöy
 =

89 (
so·Êﬂt_dëe˘Tööess


90 =
so·Êﬂt_tööess_bef‹eRoundög
)

91 || (
exp
 < 0)

92 || (
sig
 <(
uöt64_t
Ë(sig + 
roundIn¸emít
));

93 
sig
 = 
	`so·Êﬂt_shi·RightJam64
–sig, 1 - 
exp
 );

94 
roundBôs
 = 
sig
 & 
roundMask
;

95 i‡–
roundBôs
 ) {

96 i‡–
isTöy
 ) 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

97 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

98 #ifde‡
SOFTFLOAT_ROUND_ODD


99 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

100 
sig
 |
roundMask
 + 1;

104 
sig
 +
roundIn¸emít
;

105 
exp
 = ((
sig
 & 
	`UINT64_C
( 0x8000000000000000 )) != 0);

106 
roundIn¸emít
 = 
roundMask
 + 1;

107 i‡–
roundNórEví
 && (
roundBôs
<<1 =
roundIn¸emít
) ) {

108 
roundMask
 |
roundIn¸emít
;

110 
sig
 &~
roundMask
;

111 
∑ckRëu∫
;

114 (0x7FFE < 
exp
)

115 || ((
exp
 =0x7FFEË&& ((
uöt64_t
Ë(
sig
 + 
roundIn¸emít
) < sig))

117 
ovîÊow
;

122 i‡–
roundBôs
 ) {

123 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

124 #ifde‡
SOFTFLOAT_ROUND_ODD


125 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

126 
sig
 = (sig & ~
roundMask
) | (roundMask + 1);

127 
∑ckRëu∫
;

131 
sig
 = (
uöt64_t
Ë(sig + 
roundIn¸emít
);

132 i‡–
sig
 < 
roundIn¸emít
 ) {

133 ++
exp
;

134 
sig
 = 
	`UINT64_C
( 0x8000000000000000 );

136 
roundIn¸emít
 = 
roundMask
 + 1;

137 i‡–
roundNórEví
 && (
roundBôs
<<1 =
roundIn¸emít
) ) {

138 
roundMask
 |
roundIn¸emít
;

140 
sig
 &~
roundMask
;

141 
∑ckRëu∫
;

144 
¥ecisi⁄80
:

145 
doIn¸emít
 = (
	`UINT64_C
–0x8000000000000000 ) <
sigExåa
);

146 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

147 
doIn¸emít
 =

148 (
roundögMode


149 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

150 && 
sigExåa
;

154 i‡–0x7FFD <(
uöt32_t
Ë(
exp
 - 1) ) {

155 i‡–
exp
 <= 0 ) {

158 
isTöy
 =

159 (
so·Êﬂt_dëe˘Tööess


160 =
so·Êﬂt_tööess_bef‹eRoundög
)

161 || (
exp
 < 0)

162 || ! 
doIn¸emít


163 || (
sig
 < 
	`UINT64_C
( 0xFFFFFFFFFFFFFFFF ));

164 
sig64Exåa
 =

165 
	`so·Êﬂt_shi·RightJam64Exåa
–
sig
, 
sigExåa
, 1 - 
exp
 );

166 
exp
 = 0;

167 
sig
 = 
sig64Exåa
.
v
;

168 
sigExåa
 = 
sig64Exåa
.
exåa
;

169 i‡–
sigExåa
 ) {

170 i‡–
isTöy
 ) 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

171 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

172 #ifde‡
SOFTFLOAT_ROUND_ODD


173 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

174 
sig
 |= 1;

175 
∑ckRëu∫
;

179 
doIn¸emít
 = (
	`UINT64_C
–0x8000000000000000 ) <
sigExåa
);

181 ! 
roundNórEví


182 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
)

184 
doIn¸emít
 =

185 (
roundögMode


186 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

187 && 
sigExåa
;

189 i‡–
doIn¸emít
 ) {

190 ++
sig
;

191 
sig
 &=

192 ~(
uöt_Á°64_t
)

193 (! (
sigExåa
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

194 & 
roundNórEví
);

195 
exp
 = ((
sig
 & 
	`UINT64_C
( 0x8000000000000000 )) != 0);

197 
∑ckRëu∫
;

200 (0x7FFE < 
exp
)

201 || ((
exp
 =0x7FFEË&& (
sig
 =
	`UINT64_C
( 0xFFFFFFFFFFFFFFFF ))

202 && 
doIn¸emít
)

206 
roundMask
 = 0;

207 
ovîÊow
:

208 
	`so·Êﬂt_øi£Fœgs
(

209 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

211 
roundNórEví


212 || (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

213 || (
roundögMode


214 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

216 
exp
 = 0x7FFF;

217 
sig
 = 
	`UINT64_C
( 0x8000000000000000 );

219 
exp
 = 0x7FFE;

220 
sig
 = ~
roundMask
;

222 
∑ckRëu∫
;

227 i‡–
sigExåa
 ) {

228 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

229 #ifde‡
SOFTFLOAT_ROUND_ODD


230 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

231 
sig
 |= 1;

232 
∑ckRëu∫
;

236 i‡–
doIn¸emít
 ) {

237 ++
sig
;

238 i‡–! 
sig
 ) {

239 ++
exp
;

240 
sig
 = 
	`UINT64_C
( 0x8000000000000000 );

242 
sig
 &=

243 ~(
uöt_Á°64_t
)

244 (! (
sigExåa
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

245 & 
roundNórEví
);

250 
∑ckRëu∫
:

251 
uZ
.
s
.
signExp
 = 
	`∑ckToExtF80UI64
–
sign
, 
exp
 );

252 
uZ
.
s
.
signif
 = 
sig
;

253  
uZ
.
f
;

255 
	}
}

	@src/softfloat/source/s_roundPackToF128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt128_t


44 
	$so·Êﬂt_roundPackToF128
(

45 
boﬁ
 
sign
,

46 
öt_Á°32_t
 
exp
,

47 
uöt_Á°64_t
 
sig64
,

48 
uöt_Á°64_t
 
sig0
,

49 
uöt_Á°64_t
 
sigExåa


52 
uöt_Á°8_t
 
roundögMode
;

53 
boﬁ
 
roundNórEví
, 
doIn¸emít
, 
isTöy
;

54 
uöt128_exåa
 
sig128Exåa
;

55 
uöt_Á°64_t
 
uiZ64
, 
uiZ0
;

56 
uöt128
 
sig128
;

57 
ui128_f128
 
uZ
;

61 
roundögMode
 = 
so·Êﬂt_roundögMode
;

62 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

63 
doIn¸emít
 = (
	`UINT64_C
–0x8000000000000000 ) <
sigExåa
);

64 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

65 
doIn¸emít
 =

66 (
roundögMode


67 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

68 && 
sigExåa
;

72 i‡–0x7FFD <(
uöt32_t
Ë
exp
 ) {

73 i‡–
exp
 < 0 ) {

76 
isTöy
 =

77 (
so·Êﬂt_dëe˘Tööess


78 =
so·Êﬂt_tööess_bef‹eRoundög
)

79 || (
exp
 < -1)

80 || ! 
doIn¸emít


81 || 
	`so·Êﬂt_…128
(

82 
sig64
,

83 
sig0
,

84 
	`UINT64_C
( 0x0001FFFFFFFFFFFF ),

85 
	`UINT64_C
( 0xFFFFFFFFFFFFFFFF )

87 
sig128Exåa
 =

88 
	`so·Êﬂt_shi·RightJam128Exåa
–
sig64
, 
sig0
, 
sigExåa
, -
exp
 );

89 
sig64
 = 
sig128Exåa
.
v
.
v64
;

90 
sig0
 = 
sig128Exåa
.
v
.
v0
;

91 
sigExåa
 = 
sig128Exåa
.
exåa
;

92 
exp
 = 0;

93 i‡–
isTöy
 && 
sigExåa
 ) {

94 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

96 
doIn¸emít
 = (
	`UINT64_C
–0x8000000000000000 ) <
sigExåa
);

98 ! 
roundNórEví


99 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
)

101 
doIn¸emít
 =

102 (
roundögMode


103 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

104 && 
sigExåa
;

107 (0x7FFD < 
exp
)

108 || ((
exp
 == 0x7FFD)

109 && 
	`so·Êﬂt_eq128
(

110 
sig64
,

111 
sig0
,

112 
	`UINT64_C
( 0x0001FFFFFFFFFFFF ),

113 
	`UINT64_C
( 0xFFFFFFFFFFFFFFFF )

115 && 
doIn¸emít
)

119 
	`so·Êﬂt_øi£Fœgs
(

120 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

122 
roundNórEví


123 || (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

124 || (
roundögMode


125 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

127 
uiZ64
 = 
	`∑ckToF128UI64
–
sign
, 0x7FFF, 0 );

128 
uiZ0
 = 0;

130 
uiZ64
 =

131 
	`∑ckToF128UI64
(

132 
sign
, 0x7FFE, 
	`UINT64_C
( 0x0000FFFFFFFFFFFF ) );

133 
uiZ0
 = 
	`UINT64_C
( 0xFFFFFFFFFFFFFFFF );

135 
uiZ
;

140 i‡–
sigExåa
 ) {

141 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

142 #ifde‡
SOFTFLOAT_ROUND_ODD


143 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

144 
sig0
 |= 1;

145 
∑ckRëu∫
;

149 i‡–
doIn¸emít
 ) {

150 
sig128
 = 
	`so·Êﬂt_add128
–
sig64
, 
sig0
, 0, 1 );

151 
sig64
 = 
sig128
.
v64
;

152 
sig0
 =

153 
sig128
.
v0


154 & ~(
uöt64_t
)

155 (! (
sigExåa
 & 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ))

156 & 
roundNórEví
);

158 i‡–! (
sig64
 | 
sig0
ËË
exp
 = 0;

162 
∑ckRëu∫
:

163 
uiZ64
 = 
	`∑ckToF128UI64
–
sign
, 
exp
, 
sig64
 );

164 
uiZ0
 = 
sig0
;

165 
uiZ
:

166 
uZ
.
ui
.
v64
 = 
uiZ64
;

167 
uZ
.
ui
.
v0
 = 
uiZ0
;

168  
uZ
.
f
;

170 
	}
}

	@src/softfloat/source/s_roundPackToF16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt16_t


44 
	$so·Êﬂt_roundPackToF16
–
boﬁ
 
sign
, 
öt_Á°16_t
 
exp
, 
uöt_Á°16_t
 
sig
 )

46 
uöt_Á°8_t
 
roundögMode
;

47 
boﬁ
 
roundNórEví
;

48 
uöt_Á°8_t
 
roundIn¸emít
, 
roundBôs
;

49 
boﬁ
 
isTöy
;

50 
uöt_Á°16_t
 
uiZ
;

51 
ui16_f16
 
uZ
;

55 
roundögMode
 = 
so·Êﬂt_roundögMode
;

56 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

57 
roundIn¸emít
 = 0x8;

58 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

59 
roundIn¸emít
 =

60 (
roundögMode


61 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

65 
roundBôs
 = 
sig
 & 0xF;

68 i‡–0x1D <(Ë
exp
 ) {

69 i‡–
exp
 < 0 ) {

72 
isTöy
 =

73 (
so·Êﬂt_dëe˘Tööess
 =
so·Êﬂt_tööess_bef‹eRoundög
)

74 || (
exp
 < -1Ë|| (
sig
 + 
roundIn¸emít
 < 0x8000);

75 
sig
 = 
	`so·Êﬂt_shi·RightJam32
–sig, -
exp
 );

76 
exp
 = 0;

77 
roundBôs
 = 
sig
 & 0xF;

78 i‡–
isTöy
 && 
roundBôs
 ) {

79 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

81 } i‡–(0x1D < 
exp
Ë|| (0x8000 <
sig
 + 
roundIn¸emít
) ) {

84 
	`so·Êﬂt_øi£Fœgs
(

85 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

86 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 0x1F, 0 ) - ! 
roundIn¸emít
;

87 
uiZ
;

92 
sig
 = (sig + 
roundIn¸emít
)>>4;

93 i‡–
roundBôs
 ) {

94 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

95 #ifde‡
SOFTFLOAT_ROUND_ODD


96 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

97 
sig
 |= 1;

98 
∑ckRëu∫
;

102 
sig
 &~(
uöt_Á°16_t
Ë(! (
roundBôs
 ^ 8Ë& 
roundNórEví
);

103 i‡–! 
sig
 ) 
exp
 = 0;

106 
∑ckRëu∫
:

107 
uiZ
 = 
	`∑ckToF16UI
–
sign
, 
exp
, 
sig
 );

108 
uiZ
:

109 
uZ
.
ui
 = 
uiZ
;

110  
uZ
.
f
;

112 
	}
}

	@src/softfloat/source/s_roundPackToF32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt32_t


44 
	$so·Êﬂt_roundPackToF32
–
boﬁ
 
sign
, 
öt_Á°16_t
 
exp
, 
uöt_Á°32_t
 
sig
 )

46 
uöt_Á°8_t
 
roundögMode
;

47 
boﬁ
 
roundNórEví
;

48 
uöt_Á°8_t
 
roundIn¸emít
, 
roundBôs
;

49 
boﬁ
 
isTöy
;

50 
uöt_Á°32_t
 
uiZ
;

51 
ui32_f32
 
uZ
;

55 
roundögMode
 = 
so·Êﬂt_roundögMode
;

56 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

57 
roundIn¸emít
 = 0x40;

58 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

59 
roundIn¸emít
 =

60 (
roundögMode


61 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

65 
roundBôs
 = 
sig
 & 0x7F;

68 i‡–0xFD <(Ë
exp
 ) {

69 i‡–
exp
 < 0 ) {

72 
isTöy
 =

73 (
so·Êﬂt_dëe˘Tööess
 =
so·Êﬂt_tööess_bef‹eRoundög
)

74 || (
exp
 < -1Ë|| (
sig
 + 
roundIn¸emít
 < 0x80000000);

75 
sig
 = 
	`so·Êﬂt_shi·RightJam32
–sig, -
exp
 );

76 
exp
 = 0;

77 
roundBôs
 = 
sig
 & 0x7F;

78 i‡–
isTöy
 && 
roundBôs
 ) {

79 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

81 } i‡–(0xFD < 
exp
Ë|| (0x80000000 <
sig
 + 
roundIn¸emít
) ) {

84 
	`so·Êﬂt_øi£Fœgs
(

85 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

86 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 0xFF, 0 ) - ! 
roundIn¸emít
;

87 
uiZ
;

92 
sig
 = (sig + 
roundIn¸emít
)>>7;

93 i‡–
roundBôs
 ) {

94 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

95 #ifde‡
SOFTFLOAT_ROUND_ODD


96 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

97 
sig
 |= 1;

98 
∑ckRëu∫
;

102 
sig
 &~(
uöt_Á°32_t
Ë(! (
roundBôs
 ^ 0x40Ë& 
roundNórEví
);

103 i‡–! 
sig
 ) 
exp
 = 0;

106 
∑ckRëu∫
:

107 
uiZ
 = 
	`∑ckToF32UI
–
sign
, 
exp
, 
sig
 );

108 
uiZ
:

109 
uZ
.
ui
 = 
uiZ
;

110  
uZ
.
f
;

112 
	}
}

	@src/softfloat/source/s_roundPackToF64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"so·Êﬂt.h
"

43 
Êﬂt64_t


44 
	$so·Êﬂt_roundPackToF64
–
boﬁ
 
sign
, 
öt_Á°16_t
 
exp
, 
uöt_Á°64_t
 
sig
 )

46 
uöt_Á°8_t
 
roundögMode
;

47 
boﬁ
 
roundNórEví
;

48 
uöt_Á°16_t
 
roundIn¸emít
, 
roundBôs
;

49 
boﬁ
 
isTöy
;

50 
uöt_Á°64_t
 
uiZ
;

51 
ui64_f64
 
uZ
;

55 
roundögMode
 = 
so·Êﬂt_roundögMode
;

56 
roundNórEví
 = (
roundögMode
 =
so·Êﬂt_round_√¨_eví
);

57 
roundIn¸emít
 = 0x200;

58 i‡–! 
roundNórEví
 && (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
) ) {

59 
roundIn¸emít
 =

60 (
roundögMode


61 =(
sign
 ? 
so·Êﬂt_round_mö
 : 
so·Êﬂt_round_max
))

65 
roundBôs
 = 
sig
 & 0x3FF;

68 i‡–0x7FD <(
uöt16_t
Ë
exp
 ) {

69 i‡–
exp
 < 0 ) {

72 
isTöy
 =

73 (
so·Êﬂt_dëe˘Tööess
 =
so·Êﬂt_tööess_bef‹eRoundög
)

74 || (
exp
 < -1)

75 || (
sig
 + 
roundIn¸emít
 < 
	`UINT64_C
( 0x8000000000000000 ));

76 
sig
 = 
	`so·Êﬂt_shi·RightJam64
–sig, -
exp
 );

77 
exp
 = 0;

78 
roundBôs
 = 
sig
 & 0x3FF;

79 i‡–
isTöy
 && 
roundBôs
 ) {

80 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_undîÊow
 );

83 (0x7FD < 
exp
)

84 || (
	`UINT64_C
–0x8000000000000000 ) <
sig
 + 
roundIn¸emít
)

88 
	`so·Êﬂt_øi£Fœgs
(

89 
so·Êﬂt_Êag_ovîÊow
 | 
so·Êﬂt_Êag_öexa˘
 );

90 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 0x7FF, 0 ) - ! 
roundIn¸emít
;

91 
uiZ
;

96 
sig
 = (sig + 
roundIn¸emít
)>>10;

97 i‡–
roundBôs
 ) {

98 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

99 #ifde‡
SOFTFLOAT_ROUND_ODD


100 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

101 
sig
 |= 1;

102 
∑ckRëu∫
;

106 
sig
 &~(
uöt_Á°64_t
Ë(! (
roundBôs
 ^ 0x200Ë& 
roundNórEví
);

107 i‡–! 
sig
 ) 
exp
 = 0;

110 
∑ckRëu∫
:

111 
uiZ
 = 
	`∑ckToF64UI
–
sign
, 
exp
, 
sig
 );

112 
uiZ
:

113 
uZ
.
ui
 = 
uiZ
;

114  
uZ
.
f
;

116 
	}
}

	@src/softfloat/source/s_roundToI32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°32_t


45 
	$so·Êﬂt_roundToI32
(

46 
boﬁ
 
sign
, 
uöt_Á°64_t
 
sig
, 
uöt_Á°8_t
 
roundögMode
, boﬁ 
exa˘
 )

48 
uöt_Á°16_t
 
roundIn¸emít
, 
roundBôs
;

49 
uöt_Á°32_t
 
sig32
;

50 uni⁄ { 
uöt32_t
 
ui
; 
öt32_t
 
i
; } 
uZ
;

51 
öt_Á°32_t
 
z
;

55 
roundIn¸emít
 = 0x800;

57 (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
)

58 && (
roundögMode
 !
so·Êﬂt_round_√¨_eví
)

60 
roundIn¸emít
 = 0;

62 
sign


63 ? (
roundögMode
 =
so·Êﬂt_round_mö
)

64 #ifde‡
SOFTFLOAT_ROUND_ODD


65 || (
roundögMode
 =
so·Êﬂt_round_odd
)

67 : (
roundögMode
 =
so·Êﬂt_round_max
)

69 
roundIn¸emít
 = 0xFFF;

72 
roundBôs
 = 
sig
 & 0xFFF;

73 
sig
 +
roundIn¸emít
;

74 i‡–
sig
 & 
	`UINT64_C
–0xFFFFF00000000000 ) ) 
övÆid
;

75 
sig32
 = 
sig
>>12;

77 (
roundBôs
 =0x800Ë&& (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

79 
sig32
 &~(
uöt_Á°32_t
) 1;

81 
uZ
.
ui
 = 
sign
 ? -
sig32
 : sig32;

82 
z
 = 
uZ
.
i
;

83 i‡–
z
 && ((z < 0Ë^ 
sign
ËË
övÆid
;

84 i‡–
roundBôs
 ) {

85 #ifde‡
SOFTFLOAT_ROUND_ODD


86 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
z
 |= 1;

88 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

90  
z
;

93 
övÆid
:

94 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

95  
sign
 ? 
i32_‰omNegOvîÊow
 : 
i32_‰omPosOvîÊow
;

97 
	}
}

	@src/softfloat/source/s_roundToI64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
öt_Á°64_t


45 
	$so·Êﬂt_roundToI64
(

46 
boﬁ
 
sign
,

47 
uöt_Á°64_t
 
sig
,

48 
uöt_Á°64_t
 
sigExåa
,

49 
uöt_Á°8_t
 
roundögMode
,

50 
boﬁ
 
exa˘


53 uni⁄ { 
uöt64_t
 
ui
; 
öt64_t
 
i
; } 
uZ
;

54 
öt_Á°64_t
 
z
;

59 (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

60 || (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

62 i‡–
	`UINT64_C
–0x8000000000000000 ) <
sigExåa
 ) 
ö¸emít
;

65 
sigExåa


66 && (
sign


67 ? (
roundögMode
 =
so·Êﬂt_round_mö
)

68 #ifde‡
SOFTFLOAT_ROUND_ODD


69 || (
roundögMode
 =
so·Êﬂt_round_odd
)

71 : (
roundögMode
 =
so·Êﬂt_round_max
))

73 
ö¸emít
:

74 ++
sig
;

75 i‡–!
sig
 ) 
övÆid
;

77 (
sigExåa
 =
	`UINT64_C
( 0x8000000000000000 ))

78 && (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

80 
sig
 &~(
uöt_Á°64_t
) 1;

84 
uZ
.
ui
 = 
sign
 ? -
sig
 : sig;

85 
z
 = 
uZ
.
i
;

86 i‡–
z
 && ((z < 0Ë^ 
sign
ËË
övÆid
;

87 i‡–
sigExåa
 ) {

88 #ifde‡
SOFTFLOAT_ROUND_ODD


89 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
z
 |= 1;

91 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

93  
z
;

96 
övÆid
:

97 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

98  
sign
 ? 
i64_‰omNegOvîÊow
 : 
i64_‰omPosOvîÊow
;

100 
	}
}

	@src/softfloat/source/s_roundToUI32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°32_t


45 
	$so·Êﬂt_roundToUI32
(

46 
boﬁ
 
sign
, 
uöt_Á°64_t
 
sig
, 
uöt_Á°8_t
 
roundögMode
, boﬁ 
exa˘
 )

48 
uöt_Á°16_t
 
roundIn¸emít
, 
roundBôs
;

49 
uöt_Á°32_t
 
z
;

53 
roundIn¸emít
 = 0x800;

55 (
roundögMode
 !
so·Êﬂt_round_√¨_maxMag
)

56 && (
roundögMode
 !
so·Êﬂt_round_√¨_eví
)

58 
roundIn¸emít
 = 0;

59 i‡–
sign
 ) {

60 i‡–!
sig
 )  0;

61 i‡–
roundögMode
 =
so·Êﬂt_round_mö
 ) 
övÆid
;

62 #ifde‡
SOFTFLOAT_ROUND_ODD


63 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
övÆid
;

66 i‡–
roundögMode
 =
so·Êﬂt_round_max
 ) 
roundIn¸emít
 = 0xFFF;

69 
roundBôs
 = 
sig
 & 0xFFF;

70 
sig
 +
roundIn¸emít
;

71 i‡–
sig
 & 
	`UINT64_C
–0xFFFFF00000000000 ) ) 
övÆid
;

72 
z
 = 
sig
>>12;

74 (
roundBôs
 =0x800Ë&& (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

76 
z
 &~(
uöt_Á°32_t
) 1;

78 i‡–
sign
 && 
z
 ) 
övÆid
;

79 i‡–
roundBôs
 ) {

80 #ifde‡
SOFTFLOAT_ROUND_ODD


81 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
z
 |= 1;

83 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

85  
z
;

88 
övÆid
:

89 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

90  
sign
 ? 
ui32_‰omNegOvîÊow
 : 
ui32_‰omPosOvîÊow
;

92 
	}
}

	@src/softfloat/source/s_roundToUI64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
uöt_Á°64_t


45 
	$so·Êﬂt_roundToUI64
(

46 
boﬁ
 
sign
,

47 
uöt_Á°64_t
 
sig
,

48 
uöt_Á°64_t
 
sigExåa
,

49 
uöt_Á°8_t
 
roundögMode
,

50 
boﬁ
 
exa˘


57 (
roundögMode
 =
so·Êﬂt_round_√¨_maxMag
)

58 || (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

60 i‡–
	`UINT64_C
–0x8000000000000000 ) <
sigExåa
 ) 
ö¸emít
;

62 i‡–
sign
 ) {

63 i‡–!(
sig
 | 
sigExåa
) )  0;

64 i‡–
roundögMode
 =
so·Êﬂt_round_mö
 ) 
övÆid
;

65 #ifde‡
SOFTFLOAT_ROUND_ODD


66 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
övÆid
;

69 i‡–(
roundögMode
 =
so·Êﬂt_round_max
Ë&& 
sigExåa
 ) {

70 
ö¸emít
:

71 ++
sig
;

72 i‡–!
sig
 ) 
övÆid
;

74 (
sigExåa
 =
	`UINT64_C
( 0x8000000000000000 ))

75 && (
roundögMode
 =
so·Êﬂt_round_√¨_eví
)

77 
sig
 &~(
uöt_Á°64_t
) 1;

82 i‡–
sign
 && 
sig
 ) 
övÆid
;

83 i‡–
sigExåa
 ) {

84 #ifde‡
SOFTFLOAT_ROUND_ODD


85 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) 
sig
 |= 1;

87 i‡–
exa˘
 ) 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

89  
sig
;

92 
övÆid
:

93 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

94  
sign
 ? 
ui64_‰omNegOvîÊow
 : 
ui64_‰omPosOvîÊow
;

96 
	}
}

	@src/softfloat/source/s_shiftLeftM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_shi·Le·M


42 
	#so·Êﬂt_shi·Le·M
 
so·Êﬂt_shi·Le·M


	)

43 
	~"¥imôives.h
"

46 
	$so·Êﬂt_shi·Le·M
(

47 
uöt_Á°8_t
 
size_w‹ds
,

48 c⁄° 
uöt32_t
 *
aPå
,

49 
uöt32_t
 
di°
,

50 
uöt32_t
 *
zPå


53 
uöt32_t
 
w‹dDi°
;

54 
uöt_Á°8_t
 
ö√rDi°
;

55 
uöt32_t
 *
de°På
;

56 
uöt_Á°8_t
 
i
;

58 
w‹dDi°
 = 
di°
>>5;

59 i‡–
w‹dDi°
 < 
size_w‹ds
 ) {

60 
aPå
 +
	`ödexMu…iw‹dLoBut
–
size_w‹ds
, 
w‹dDi°
 );

61 
ö√rDi°
 = 
di°
 & 31;

62 i‡–
ö√rDi°
 ) {

63 
	`so·Êﬂt_sh‹tShi·Le·M
(

64 
size_w‹ds
 - 
w‹dDi°
,

65 
aPå
,

66 
ö√rDi°
,

67 
zPå
 + 
	`ödexMu…iw‹dHiBut
–
size_w‹ds
, 
w‹dDi°
 )

69 i‡–! 
w‹dDi°
 ) ;

71 
aPå
 +
	`ödexW‹dHi
–
size_w‹ds
 - 
w‹dDi°
 );

72 
de°På
 = 
zPå
 + 
	`ödexW‹dHi
–
size_w‹ds
 );

73  
i
 = 
size_w‹ds
 - 
w‹dDi°
; i; --i ) {

74 *
de°På
 = *
aPå
;

75 
aPå
 -
w‹dIn¸
;

76 
de°På
 -
w‹dIn¸
;

79 
zPå
 +
	`ödexMu…iw‹dLo
–
size_w‹ds
, 
w‹dDi°
 );

81 
w‹dDi°
 = 
size_w‹ds
;

84 *
zPå
++ = 0;

85 --
w‹dDi°
;

86 }  
w‹dDi°
 );

88 
	}
}

	@src/softfloat/source/s_shiftNormSigF128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

42 
	$so·Êﬂt_shi·N‹mSigF128M
(

43 c⁄° 
uöt32_t
 *
wPå
, 
uöt_Á°8_t
 
shi·Di°
, uöt32_à*
sigPå
 )

45 
uöt32_t
 
w‹dSig
;

46 
öt32_t
 
exp
;

47 
uöt32_t
 
ÀadögBô
;

49 
w‹dSig
 = 
wPå
[
	`ödexW‹dHi
( 4 )];

50 
exp
 = 
	`expF128UI96
–
w‹dSig
 );

51 i‡–
exp
 ) {

52 
	`so·Êﬂt_sh‹tShi·Le·128M
–
wPå
, 
shi·Di°
, 
sigPå
 );

53 
ÀadögBô
 = 0x00010000<<
shi·Di°
;

54 
sigPå
[
	`ödexW‹dHi
( 4 )] =

55 (
sigPå
[
	`ödexW‹dHi
–4 )] & (
ÀadögBô
 - 1)) |ÜeadingBit;

57 
exp
 = 16;

58 
w‹dSig
 &= 0x7FFFFFFF;

59 i‡–! 
w‹dSig
 ) {

60 
exp
 = -16;

61 
w‹dSig
 = 
wPå
[
	`ödexW‹d
( 4, 2 )];

62 i‡–! 
w‹dSig
 ) {

63 
exp
 = -48;

64 
w‹dSig
 = 
wPå
[
	`ödexW‹d
( 4, 1 )];

65 i‡–! 
w‹dSig
 ) {

66 
w‹dSig
 = 
wPå
[
	`ödexW‹d
( 4, 0 )];

67 i‡–! 
w‹dSig
 )  -128;

68 
exp
 = -80;

72 
exp
 -
	`so·Êﬂt_cou¡LódögZîos32
–
w‹dSig
 );

73 
	`so·Êﬂt_shi·Le·128M
–
wPå
, 1 - 
exp
 + 
shi·Di°
, 
sigPå
 );

75  
exp
;

77 
	}
}

	@src/softfloat/source/s_shiftRightJam128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_shi·RightJam128


43 
uöt128


44 
	$so·Êﬂt_shi·RightJam128
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°32_t
 
di°
 )

46 
uöt_Á°8_t
 
u8NegDi°
;

47 
uöt128
 
z
;

49 i‡–
di°
 < 64 ) {

50 
u8NegDi°
 = -
di°
;

51 
z
.
v64
 = 
a64
>>
di°
;

52 
z
.
v0
 =

53 
a64
<<(
u8NegDi°
 & 63Ë| 
a0
>>
di°


54 | ((
uöt64_t
Ë(
a0
<<(
u8NegDi°
 & 63)) != 0);

56 
z
.
v64
 = 0;

57 
z
.
v0
 =

58 (
di°
 < 127)

59 ? 
a64
>>(
di°
 & 63)

60 | (((
a64
 & (((
uöt_Á°64_t
Ë1<<(
di°
 & 63)Ë- 1)Ë| 
a0
)

62 : ((
a64
 | 
a0
) != 0);

64  
z
;

66 
	}
}

	@src/softfloat/source/s_shiftRightJam128Extra.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_shi·RightJam128Exåa


43 
uöt128_exåa


44 
	$so·Êﬂt_shi·RightJam128Exåa
(

45 
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
exåa
, 
uöt_Á°32_t
 
di°
 )

47 
uöt_Á°8_t
 
u8NegDi°
;

48 
uöt128_exåa
 
z
;

50 
u8NegDi°
 = -
di°
;

51 i‡–
di°
 < 64 ) {

52 
z
.
v
.
v64
 = 
a64
>>
di°
;

53 
z
.
v
.
v0
 = 
a64
<<(
u8NegDi°
 & 63Ë| 
a0
>>
di°
;

54 
z
.
exåa
 = 
a0
<<(
u8NegDi°
 & 63);

56 
z
.
v
.
v64
 = 0;

57 i‡–
di°
 == 64 ) {

58 
z
.
v
.
v0
 = 
a64
;

59 
z
.
exåa
 = 
a0
;

61 
exåa
 |
a0
;

62 i‡–
di°
 < 128 ) {

63 
z
.
v
.
v0
 = 
a64
>>(
di°
 & 63);

64 
z
.
exåa
 = 
a64
<<(
u8NegDi°
 & 63);

66 
z
.
v
.
v0
 = 0;

67 
z
.
exåa
 = (
di°
 =128Ë? 
a64
 : (a64 != 0);

71 
z
.
exåa
 |= (extra != 0);

72  
z
;

74 
	}
}

	@src/softfloat/source/s_shiftRightJam256M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_shi·RightJam256M


45 
	$so·Êﬂt_sh‹tShi·RightJamM
(

46 
uöt_Á°8_t
 
size_w‹ds
,

47 c⁄° 
uöt64_t
 *
aPå
,

48 
uöt_Á°8_t
 
di°
,

49 
uöt64_t
 *
zPå


52 
uöt_Á°8_t
 
uNegDi°
;

53 
ödex
, 
œ°Index
;

54 
uöt64_t
 
∑πW‹dZ
, 
w‹dA
;

56 
uNegDi°
 = -
di°
;

57 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

58 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

59 
w‹dA
 = 
aPå
[
ödex
];

60 
∑πW‹dZ
 = 
w‹dA
>>
di°
;

61 i‡–
∑πW‹dZ
<<
di°
 !
w‹dA
 )ÖartWordZ |= 1;

62  
ödex
 !
œ°Index
 ) {

63 
w‹dA
 = 
aPå
[
ödex
 + 
w‹dIn¸
];

64 
zPå
[
ödex
] = 
w‹dA
<<(
uNegDi°
 & 63Ë| 
∑πW‹dZ
;

65 
ödex
 +
w‹dIn¸
;

66 
∑πW‹dZ
 = 
w‹dA
>>
di°
;

68 
zPå
[
ödex
] = 
∑πW‹dZ
;

70 
	}
}

73 
	$so·Êﬂt_shi·RightJam256M
(

74 c⁄° 
uöt64_t
 *
aPå
, 
uöt_Á°32_t
 
di°
, uöt64_à*
zPå
 )

76 
uöt64_t
 
w‹dJam
;

77 
uöt_Á°32_t
 
w‹dDi°
;

78 
uöt64_t
 *
±r
;

79 
uöt_Á°8_t
 
i
, 
ö√rDi°
;

81 
w‹dJam
 = 0;

82 
w‹dDi°
 = 
di°
>>6;

83 i‡–
w‹dDi°
 ) {

84 i‡–4 < 
w‹dDi°
 ) wordDist = 4;

85 
±r
 = (
uöt64_t
 *Ë(
aPå
 + 
	`ödexMu…iw‹dLo
–4, 
w‹dDi°
 ));

86 
i
 = 
w‹dDi°
;

88 
w‹dJam
 = *
±r
++;

89 i‡–
w‹dJam
 ) ;

90 --
i
;

91 }  
i
 );

92 
±r
 = 
zPå
;

94 i‡–
w‹dDi°
 < 4 ) {

95 
aPå
 +
	`ödexMu…iw‹dHiBut
–4, 
w‹dDi°
 );

96 
ö√rDi°
 = 
di°
 & 63;

97 i‡–
ö√rDi°
 ) {

98 
	`so·Êﬂt_sh‹tShi·RightJamM
(

99 4 - 
w‹dDi°
,

100 
aPå
,

101 
ö√rDi°
,

102 
zPå
 + 
	`ödexMu…iw‹dLoBut
–4, 
w‹dDi°
 )

104 i‡–! 
w‹dDi°
 ) 
w‹dJam
;

106 
aPå
 +
	`ödexW‹dLo
–4 - 
w‹dDi°
 );

107 
±r
 = 
zPå
 + 
	`ödexW‹dLo
( 4 );

108  
i
 = 4 - 
w‹dDi°
; i; --i ) {

109 *
±r
 = *
aPå
;

110 
aPå
 +
w‹dIn¸
;

111 
±r
 +
w‹dIn¸
;

114 
±r
 = 
zPå
 + 
	`ödexMu…iw‹dHi
–4, 
w‹dDi°
 );

117 *
±r
++ = 0;

118 --
w‹dDi°
;

119 }  
w‹dDi°
 );

120 
w‹dJam
:

121 i‡–
w‹dJam
 ) 
zPå
[
	`ödexW‹dLo
( 4 )] |= 1;

123 
	}
}

	@src/softfloat/source/s_shiftRightJam32.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_shi·RightJam32


42 
uöt32_t
 
	$so·Êﬂt_shi·RightJam32
–
uöt32_t
 
a
, 
uöt_Á°16_t
 
di°
 )

46 (
di°
 < 31Ë? 
a
>>di° | ((
uöt32_t
) (a<<(-dist & 31)) != 0) : (a != 0);

48 
	}
}

	@src/softfloat/source/s_shiftRightJam64.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_shi·RightJam64


42 
uöt64_t
 
	$so·Êﬂt_shi·RightJam64
–
uöt64_t
 
a
, 
uöt_Á°32_t
 
di°
 )

46 (
di°
 < 63Ë? 
a
>>di° | ((
uöt64_t
) (a<<(-dist & 63)) != 0) : (a != 0);

48 
	}
}

	@src/softfloat/source/s_shiftRightJam64Extra.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_shi·RightJam64Exåa


43 
uöt64_exåa


44 
	$so·Êﬂt_shi·RightJam64Exåa
(

45 
uöt64_t
 
a
, uöt64_à
exåa
, 
uöt_Á°32_t
 
di°
 )

47 
uöt64_exåa
 
z
;

49 i‡–
di°
 < 64 ) {

50 
z
.
v
 = 
a
>>
di°
;

51 
z
.
exåa
 = 
a
<<(-
di°
 & 63);

53 
z
.
v
 = 0;

54 
z
.
exåa
 = (
di°
 =64Ë? 
a
 : (a != 0);

56 
z
.
exåa
 |= (extra != 0);

57  
z
;

59 
	}
}

	@src/softfloat/source/s_shiftRightJamM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_shi·RightJamM


42 
	#so·Êﬂt_shi·RightJamM
 
so·Êﬂt_shi·RightJamM


	)

43 
	~"¥imôives.h
"

46 
	$so·Êﬂt_shi·RightJamM
(

47 
uöt_Á°8_t
 
size_w‹ds
,

48 c⁄° 
uöt32_t
 *
aPå
,

49 
uöt32_t
 
di°
,

50 
uöt32_t
 *
zPå


53 
uöt32_t
 
w‹dJam
, 
w‹dDi°
, *
±r
;

54 
uöt_Á°8_t
 
i
, 
ö√rDi°
;

56 
w‹dJam
 = 0;

57 
w‹dDi°
 = 
di°
>>5;

58 i‡–
w‹dDi°
 ) {

59 i‡–
size_w‹ds
 < 
w‹dDi°
 ) wordDist = size_words;

60 
±r
 = (
uöt32_t
 *Ë(
aPå
 + 
	`ödexMu…iw‹dLo
–
size_w‹ds
, 
w‹dDi°
 ));

61 
i
 = 
w‹dDi°
;

63 
w‹dJam
 = *
±r
++;

64 i‡–
w‹dJam
 ) ;

65 --
i
;

66 }  
i
 );

67 
±r
 = 
zPå
;

69 i‡–
w‹dDi°
 < 
size_w‹ds
 ) {

70 
aPå
 +
	`ödexMu…iw‹dHiBut
–
size_w‹ds
, 
w‹dDi°
 );

71 
ö√rDi°
 = 
di°
 & 31;

72 i‡–
ö√rDi°
 ) {

73 
	`so·Êﬂt_sh‹tShi·RightJamM
(

74 
size_w‹ds
 - 
w‹dDi°
,

75 
aPå
,

76 
ö√rDi°
,

77 
zPå
 + 
	`ödexMu…iw‹dLoBut
–
size_w‹ds
, 
w‹dDi°
 )

79 i‡–! 
w‹dDi°
 ) 
w‹dJam
;

81 
aPå
 +
	`ödexW‹dLo
–
size_w‹ds
 - 
w‹dDi°
 );

82 
±r
 = 
zPå
 + 
	`ödexW‹dLo
–
size_w‹ds
 );

83  
i
 = 
size_w‹ds
 - 
w‹dDi°
; i; --i ) {

84 *
±r
 = *
aPå
;

85 
aPå
 +
w‹dIn¸
;

86 
±r
 +
w‹dIn¸
;

89 
±r
 = 
zPå
 + 
	`ödexMu…iw‹dHi
–
size_w‹ds
, 
w‹dDi°
 );

92 *
±r
++ = 0;

93 --
w‹dDi°
;

94 }  
w‹dDi°
 );

95 
w‹dJam
:

96 i‡–
w‹dJam
 ) 
zPå
[
	`ödexW‹dLo
–
size_w‹ds
 )] |= 1;

98 
	}
}

	@src/softfloat/source/s_shiftRightM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_shi·RightM


42 
	#so·Êﬂt_shi·RightM
 
so·Êﬂt_shi·RightM


	)

43 
	~"¥imôives.h
"

46 
	$so·Êﬂt_shi·RightM
(

47 
uöt_Á°8_t
 
size_w‹ds
,

48 c⁄° 
uöt32_t
 *
aPå
,

49 
uöt32_t
 
di°
,

50 
uöt32_t
 *
zPå


53 
uöt32_t
 
w‹dDi°
;

54 
uöt_Á°8_t
 
ö√rDi°
;

55 
uöt32_t
 *
de°På
;

56 
uöt_Á°8_t
 
i
;

58 
w‹dDi°
 = 
di°
>>5;

59 i‡–
w‹dDi°
 < 
size_w‹ds
 ) {

60 
aPå
 +
	`ödexMu…iw‹dHiBut
–
size_w‹ds
, 
w‹dDi°
 );

61 
ö√rDi°
 = 
di°
 & 31;

62 i‡–
ö√rDi°
 ) {

63 
	`so·Êﬂt_sh‹tShi·RightM
(

64 
size_w‹ds
 - 
w‹dDi°
,

65 
aPå
,

66 
ö√rDi°
,

67 
zPå
 + 
	`ödexMu…iw‹dLoBut
–
size_w‹ds
, 
w‹dDi°
 )

69 i‡–! 
w‹dDi°
 ) ;

71 
aPå
 +
	`ödexW‹dLo
–
size_w‹ds
 - 
w‹dDi°
 );

72 
de°På
 = 
zPå
 + 
	`ödexW‹dLo
–
size_w‹ds
 );

73  
i
 = 
size_w‹ds
 - 
w‹dDi°
; i; --i ) {

74 *
de°På
 = *
aPå
;

75 
aPå
 +
w‹dIn¸
;

76 
de°På
 +
w‹dIn¸
;

79 
zPå
 +
	`ödexMu…iw‹dHi
–
size_w‹ds
, 
w‹dDi°
 );

81 
w‹dDi°
 = 
size_w‹ds
;

84 *
zPå
++ = 0;

85 --
w‹dDi°
;

86 }  
w‹dDi°
 );

88 
	}
}

	@src/softfloat/source/s_shortShiftLeft128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·Le·128


43 
uöt128


44 
	$so·Êﬂt_sh‹tShi·Le·128
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 )

46 
uöt128
 
z
;

48 
z
.
v64
 = 
a64
<<
di°
 | 
a0
>>(-dist & 63);

49 
z
.
v0
 = 
a0
<<
di°
;

50  
z
;

52 
	}
}

	@src/softfloat/source/s_shortShiftLeft64To96M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·Le·64To96M


44 
	$so·Êﬂt_sh‹tShi·Le·64To96M
(

45 
uöt64_t
 
a
, 
uöt_Á°8_t
 
di°
, 
uöt32_t
 *
zPå
 )

48 
zPå
[
	`ödexW‹d
–3, 0 )] = (
uöt32_t
Ë
a
<<
di°
;

49 
a
 >>32 - 
di°
;

50 
zPå
[
	`ödexW‹d
–3, 2 )] = 
a
>>32;

51 
zPå
[
	`ödexW‹d
–3, 1 )] = 
a
;

53 
	}
}

	@src/softfloat/source/s_shortShiftLeftM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·Le·M


44 
	$so·Êﬂt_sh‹tShi·Le·M
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
aPå
,

47 
uöt_Á°8_t
 
di°
,

48 
uöt32_t
 *
zPå


51 
uöt_Á°8_t
 
uNegDi°
;

52 
ödex
, 
œ°Index
;

53 
uöt32_t
 
∑πW‹dZ
, 
w‹dA
;

55 
uNegDi°
 = -
di°
;

56 
ödex
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

57 
œ°Index
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

58 
∑πW‹dZ
 = 
aPå
[
ödex
]<<
di°
;

59  
ödex
 !
œ°Index
 ) {

60 
w‹dA
 = 
aPå
[
ödex
 - 
w‹dIn¸
];

61 
zPå
[
ödex
] = 
∑πW‹dZ
 | 
w‹dA
>>(
uNegDi°
 & 31);

62 
ödex
 -
w‹dIn¸
;

63 
∑πW‹dZ
 = 
w‹dA
<<
di°
;

65 
zPå
[
ödex
] = 
∑πW‹dZ
;

67 
	}
}

	@src/softfloat/source/s_shortShiftRight128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·Right128


43 
uöt128


44 
	$so·Êﬂt_sh‹tShi·Right128
–
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 )

46 
uöt128
 
z
;

48 
z
.
v64
 = 
a64
>>
di°
;

49 
z
.
v0
 = 
a64
<<(-
di°
 & 63Ë| 
a0
>>dist;

50  
z
;

52 
	}
}

	@src/softfloat/source/s_shortShiftRightExtendM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·RightExãndM


44 
	$so·Êﬂt_sh‹tShi·RightExãndM
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
aPå
,

47 
uöt_Á°8_t
 
di°
,

48 
uöt32_t
 *
zPå


51 
uöt_Á°8_t
 
uNegDi°
;

52 
ödexA
, 
œ°IndexA
;

53 
uöt32_t
 
∑πW‹dZ
, 
w‹dA
;

55 
uNegDi°
 = -
di°
;

56 
ödexA
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

57 
œ°IndexA
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

58 
zPå
 +
	`ödexW‹dLo
–
size_w‹ds
 + 1 );

59 
∑πW‹dZ
 = 0;

61 
w‹dA
 = 
aPå
[
ödexA
];

62 *
zPå
 = 
w‹dA
<<(
uNegDi°
 & 31Ë| 
∑πW‹dZ
;

63 
zPå
 +
w‹dIn¸
;

64 
∑πW‹dZ
 = 
w‹dA
>>
di°
;

65 i‡–
ödexA
 =
œ°IndexA
 ) ;

66 
ödexA
 +
w‹dIn¸
;

68 *
zPå
 = 
∑πW‹dZ
;

70 
	}
}

	@src/softfloat/source/s_shortShiftRightJam128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam128


43 
uöt128


44 
	$so·Êﬂt_sh‹tShi·RightJam128
(

45 
uöt64_t
 
a64
, uöt64_à
a0
, 
uöt_Á°8_t
 
di°
 )

47 
uöt_Á°8_t
 
uNegDi°
;

48 
uöt128
 
z
;

50 
uNegDi°
 = -
di°
;

51 
z
.
v64
 = 
a64
>>
di°
;

52 
z
.
v0
 =

53 
a64
<<(
uNegDi°
 & 63Ë| 
a0
>>
di°


54 | ((
uöt64_t
Ë(
a0
<<(
uNegDi°
 & 63)) != 0);

55  
z
;

57 
	}
}

	@src/softfloat/source/s_shortShiftRightJam128Extra.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam128Exåa


43 
uöt128_exåa


44 
	$so·Êﬂt_sh‹tShi·RightJam128Exåa
(

45 
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
exåa
, 
uöt_Á°8_t
 
di°
 )

47 
uöt_Á°8_t
 
uNegDi°
;

48 
uöt128_exåa
 
z
;

50 
uNegDi°
 = -
di°
;

51 
z
.
v
.
v64
 = 
a64
>>
di°
;

52 
z
.
v
.
v0
 = 
a64
<<(
uNegDi°
 & 63Ë| 
a0
>>
di°
;

53 
z
.
exåa
 = 
a0
<<(
uNegDi°
 & 63) | (extra != 0);

54  
z
;

56 
	}
}

	@src/softfloat/source/s_shortShiftRightJam64.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

40 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam64


42 
uöt64_t
 
	$so·Êﬂt_sh‹tShi·RightJam64
–
uöt64_t
 
a
, 
uöt_Á°8_t
 
di°
 )

45  
a
>>
di°
 | (◊ & (((
uöt_Á°64_t
) 1<<dist) - 1)) != 0);

47 
	}
}

	@src/softfloat/source/s_shortShiftRightJam64Extra.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·RightJam64Exåa


43 
uöt64_exåa


44 
	$so·Êﬂt_sh‹tShi·RightJam64Exåa
(

45 
uöt64_t
 
a
, uöt64_à
exåa
, 
uöt_Á°8_t
 
di°
 )

47 
uöt64_exåa
 
z
;

49 
z
.
v
 = 
a
>>
di°
;

50 
z
.
exåa
 = 
a
<<(-
di°
 & 63) | (extra != 0);

51  
z
;

53 
	}
}

	@src/softfloat/source/s_shortShiftRightJamM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·RightJamM


44 
	$so·Êﬂt_sh‹tShi·RightJamM
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
aPå
,

47 
uöt_Á°8_t
 
di°
,

48 
uöt32_t
 *
zPå


51 
uöt_Á°8_t
 
uNegDi°
;

52 
ödex
, 
œ°Index
;

53 
uöt32_t
 
∑πW‹dZ
, 
w‹dA
;

55 
uNegDi°
 = -
di°
;

56 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

57 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

58 
w‹dA
 = 
aPå
[
ödex
];

59 
∑πW‹dZ
 = 
w‹dA
>>
di°
;

60 i‡–
∑πW‹dZ
<<
di°
 !
w‹dA
 )ÖartWordZ |= 1;

61  
ödex
 !
œ°Index
 ) {

62 
w‹dA
 = 
aPå
[
ödex
 + 
w‹dIn¸
];

63 
zPå
[
ödex
] = 
w‹dA
<<(
uNegDi°
 & 31Ë| 
∑πW‹dZ
;

64 
ödex
 +
w‹dIn¸
;

65 
∑πW‹dZ
 = 
w‹dA
>>
di°
;

67 
zPå
[
ödex
] = 
∑πW‹dZ
;

69 
	}
}

	@src/softfloat/source/s_shortShiftRightM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sh‹tShi·RightM


44 
	$so·Êﬂt_sh‹tShi·RightM
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
aPå
,

47 
uöt_Á°8_t
 
di°
,

48 
uöt32_t
 *
zPå


51 
uöt_Á°8_t
 
uNegDi°
;

52 
ödex
, 
œ°Index
;

53 
uöt32_t
 
∑πW‹dZ
, 
w‹dA
;

55 
uNegDi°
 = -
di°
;

56 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

57 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

58 
∑πW‹dZ
 = 
aPå
[
ödex
]>>
di°
;

59  
ödex
 !
œ°Index
 ) {

60 
w‹dA
 = 
aPå
[
ödex
 + 
w‹dIn¸
];

61 
zPå
[
ödex
] = 
w‹dA
<<(
uNegDi°
 & 31Ë| 
∑πW‹dZ
;

62 
ödex
 +
w‹dIn¸
;

63 
∑πW‹dZ
 = 
w‹dA
>>
di°
;

65 
zPå
[
ödex
] = 
∑πW‹dZ
;

67 
	}
}

	@src/softfloat/source/s_sub128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sub128


43 
uöt128


44 
	$so·Êﬂt_sub128
–
uöt64_t
 
a64
, uöt64_à
a0
, uöt64_à
b64
, uöt64_à
b0
 )

46 
uöt128
 
z
;

48 
z
.
v0
 = 
a0
 - 
b0
;

49 
z
.
v64
 = 
a64
 - 
b64
 - (
a0
 < 
b0
);

50  
z
;

52 
	}
}

	@src/softfloat/source/s_sub1XM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sub1XM


43 
	$so·Êﬂt_sub1XM
–
uöt_Á°8_t
 
size_w‹ds
, 
uöt32_t
 *
zPå
 )

45 
ödex
, 
œ°Index
;

46 
uöt32_t
 
w‹dA
;

48 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

49 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

51 
w‹dA
 = 
zPå
[
ödex
];

52 
zPå
[
ödex
] = 
w‹dA
 - 1;

53 i‡–
w‹dA
 || (
ödex
 =
œ°Index
) ) ;

54 
ödex
 +
w‹dIn¸
;

57 
	}
}

	@src/softfloat/source/s_sub256M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_sub256M


44 
	$so·Êﬂt_sub256M
(

45 c⁄° 
uöt64_t
 *
aPå
, c⁄° uöt64_à*
bPå
, uöt64_à*
zPå
 )

47 
ödex
;

48 
uöt_Á°8_t
 
b‹row
;

49 
uöt64_t
 
w‹dA
, 
w‹dB
;

51 
ödex
 = 
	`ödexW‹dLo
( 4 );

52 
b‹row
 = 0;

54 
w‹dA
 = 
aPå
[
ödex
];

55 
w‹dB
 = 
bPå
[
ödex
];

56 
zPå
[
ödex
] = 
w‹dA
 - 
w‹dB
 - 
b‹row
;

57 i‡–
ödex
 =
	`ödexW‹dHi
( 4 ) ) ;

58 
b‹row
 = b‹row ? (
w‹dA
 <
w‹dB
) : (wordA < wordB);

59 
ödex
 +
w‹dIn¸
;

62 
	}
}

	@src/softfloat/source/s_subM.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"¥imôiveTy≥s.h
"

41 #i‚de‡
so·Êﬂt_subM


44 
	$so·Êﬂt_subM
(

45 
uöt_Á°8_t
 
size_w‹ds
,

46 c⁄° 
uöt32_t
 *
aPå
,

47 c⁄° 
uöt32_t
 *
bPå
,

48 
uöt32_t
 *
zPå


51 
ödex
, 
œ°Index
;

52 
uöt_Á°8_t
 
b‹row
;

53 
uöt32_t
 
w‹dA
, 
w‹dB
;

55 
ödex
 = 
	`ödexW‹dLo
–
size_w‹ds
 );

56 
œ°Index
 = 
	`ödexW‹dHi
–
size_w‹ds
 );

57 
b‹row
 = 0;

59 
w‹dA
 = 
aPå
[
ödex
];

60 
w‹dB
 = 
bPå
[
ödex
];

61 
zPå
[
ödex
] = 
w‹dA
 - 
w‹dB
 - 
b‹row
;

62 i‡–
ödex
 =
œ°Index
 ) ;

63 
b‹row
 = b‹row ? (
w‹dA
 <
w‹dB
) : (wordA < wordB);

64 
ödex
 +
w‹dIn¸
;

67 
	}
}

	@src/softfloat/source/s_subMagsExtF80.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
extFlﬂt80_t


45 
	$so·Êﬂt_subMagsExtF80
(

46 
uöt_Á°16_t
 
uiA64
,

47 
uöt_Á°64_t
 
uiA0
,

48 
uöt_Á°16_t
 
uiB64
,

49 
uöt_Á°64_t
 
uiB0
,

50 
boﬁ
 
signZ


53 
öt_Á°32_t
 
expA
;

54 
uöt_Á°64_t
 
sigA
;

55 
öt_Á°32_t
 
expB
;

56 
uöt_Á°64_t
 
sigB
;

57 
öt_Á°32_t
 
expDiff
;

58 
uöt_Á°16_t
 
uiZ64
;

59 
uöt_Á°64_t
 
uiZ0
;

60 
öt_Á°32_t
 
expZ
;

61 
uöt_Á°64_t
 
sigExåa
;

62 
uöt128
 
sig128
, 
uiZ
;

63 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

67 
expA
 = 
	`expExtF80UI64
–
uiA64
 );

68 
sigA
 = 
uiA0
;

69 
expB
 = 
	`expExtF80UI64
–
uiB64
 );

70 
sigB
 = 
uiB0
;

73 
expDiff
 = 
expA
 - 
expB
;

74 i‡–0 < 
expDiff
 ) 
expABiggî
;

75 i‡–
expDiff
 < 0 ) 
expBBiggî
;

76 i‡–
expA
 == 0x7FFF ) {

77 i‡–(
sigA
 | 
sigB
Ë& 
	`UINT64_C
( 0x7FFFFFFFFFFFFFFF ) ) {

78 
¥›ag©eNaN
;

80 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

81 
uiZ64
 = 
deÁu…NaNExtF80UI64
;

82 
uiZ0
 = 
deÁu…NaNExtF80UI0
;

83 
uiZ
;

87 
expZ
 = 
expA
;

88 i‡–! 
expZ
 )ÉxpZ = 1;

89 
sigExåa
 = 0;

90 i‡–
sigB
 < 
sigA
 ) 
aBiggî
;

91 i‡–
sigA
 < 
sigB
 ) 
bBiggî
;

92 
uiZ64
 =

93 
	`∑ckToExtF80UI64
–(
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0 );

94 
uiZ0
 = 0;

95 
uiZ
;

98 
expBBiggî
:

99 i‡–
expB
 == 0x7FFF ) {

100 i‡–
sigB
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

101 
uiZ64
 = 
	`∑ckToExtF80UI64
–
signZ
 ^ 1, 0x7FFF );

102 
uiZ0
 = 
	`UINT64_C
( 0x8000000000000000 );

103 
uiZ
;

105 i‡–! 
expA
 ) {

106 ++
expDiff
;

107 
sigExåa
 = 0;

108 i‡–! 
expDiff
 ) 
√wlyAlig√dBBiggî
;

110 
sig128
 = 
	`so·Êﬂt_shi·RightJam128
–
sigA
, 0, -
expDiff
 );

111 
sigA
 = 
sig128
.
v64
;

112 
sigExåa
 = 
sig128
.
v0
;

113 
√wlyAlig√dBBiggî
:

114 
expZ
 = 
expB
;

115 
bBiggî
:

116 
signZ
 = ! signZ;

117 
sig128
 = 
	`so·Êﬂt_sub128
–
sigB
, 0, 
sigA
, 
sigExåa
 );

118 
n‹mRoundPack
;

121 
expABiggî
:

122 i‡–
expA
 == 0x7FFF ) {

123 i‡–
sigA
 & 
	`UINT64_C
–0x7FFFFFFFFFFFFFFF ) ) 
¥›ag©eNaN
;

124 
uiZ64
 = 
uiA64
;

125 
uiZ0
 = 
uiA0
;

126 
uiZ
;

128 i‡–! 
expB
 ) {

129 --
expDiff
;

130 
sigExåa
 = 0;

131 i‡–! 
expDiff
 ) 
√wlyAlig√dABiggî
;

133 
sig128
 = 
	`so·Êﬂt_shi·RightJam128
–
sigB
, 0, 
expDiff
 );

134 
sigB
 = 
sig128
.
v64
;

135 
sigExåa
 = 
sig128
.
v0
;

136 
√wlyAlig√dABiggî
:

137 
expZ
 = 
expA
;

138 
aBiggî
:

139 
sig128
 = 
	`so·Êﬂt_sub128
–
sigA
, 0, 
sigB
, 
sigExåa
 );

142 
n‹mRoundPack
:

144 
	`so·Êﬂt_n‹mRoundPackToExtF80
(

145 
signZ
, 
expZ
, 
sig128
.
v64
, sig128.
v0
, 
extF80_roundögPªcisi⁄
 );

148 
¥›ag©eNaN
:

149 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNExtF80UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

150 
uiZ64
 = 
uiZ
.
v64
;

151 
uiZ0
 = 
uiZ
.
v0
;

152 
uiZ
:

153 
uZ
.
s
.
signExp
 = 
uiZ64
;

154 
uZ
.
s
.
signif
 = 
uiZ0
;

155  
uZ
.
f
;

157 
	}
}

	@src/softfloat/source/s_subMagsF128.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt128_t


45 
	$so·Êﬂt_subMagsF128
(

46 
uöt_Á°64_t
 
uiA64
,

47 
uöt_Á°64_t
 
uiA0
,

48 
uöt_Á°64_t
 
uiB64
,

49 
uöt_Á°64_t
 
uiB0
,

50 
boﬁ
 
signZ


53 
öt_Á°32_t
 
expA
;

54 
uöt128
 
sigA
;

55 
öt_Á°32_t
 
expB
;

56 
uöt128
 
sigB
, 
sigZ
;

57 
öt_Á°32_t
 
expDiff
, 
expZ
;

58 
uöt128
 
uiZ
;

59 
ui128_f128
 
uZ
;

61 
expA
 = 
	`expF128UI64
–
uiA64
 );

62 
sigA
.
v64
 = 
	`‰acF128UI64
–
uiA64
 );

63 
sigA
.
v0
 = 
uiA0
;

64 
expB
 = 
	`expF128UI64
–
uiB64
 );

65 
sigB
.
v64
 = 
	`‰acF128UI64
–
uiB64
 );

66 
sigB
.
v0
 = 
uiB0
;

67 
sigA
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–sigA.
v64
, sigA.
v0
, 4 );

68 
sigB
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–sigB.
v64
, sigB.
v0
, 4 );

69 
expDiff
 = 
expA
 - 
expB
;

70 i‡–0 < 
expDiff
 ) 
expABiggî
;

71 i‡–
expDiff
 < 0 ) 
expBBiggî
;

72 i‡–
expA
 == 0x7FFF ) {

73 i‡–
sigA
.
v64
 | sigA.
v0
 | 
sigB
.v64 | sigB.v0 ) 
¥›ag©eNaN
;

74 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 
uiZ
.
v64
 = 
deÁu…NaNF128UI64
;

76 
uiZ
.
v0
 = 
deÁu…NaNF128UI0
;

77 
uiZ
;

79 
expZ
 = 
expA
;

80 i‡–! 
expZ
 )ÉxpZ = 1;

81 i‡–
sigB
.
v64
 < 
sigA
.v64 ) 
aBiggî
;

82 i‡–
sigA
.
v64
 < 
sigB
.v64 ) 
bBiggî
;

83 i‡–
sigB
.
v0
 < 
sigA
.v0 ) 
aBiggî
;

84 i‡–
sigA
.
v0
 < 
sigB
.v0 ) 
bBiggî
;

85 
uiZ
.
v64
 =

86 
	`∑ckToF128UI64
(

87 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

88 
uiZ
.
v0
 = 0;

89 
uiZ
;

90 
expBBiggî
:

91 i‡–
expB
 == 0x7FFF ) {

92 i‡–
sigB
.
v64
 | sigB.
v0
 ) 
¥›ag©eNaN
;

93 
uiZ
.
v64
 = 
	`∑ckToF128UI64
–
signZ
 ^ 1, 0x7FFF, 0 );

94 
uiZ
.
v0
 = 0;

95 
uiZ
;

97 i‡–
expA
 ) {

98 
sigA
.
v64
 |
	`UINT64_C
( 0x0010000000000000 );

100 ++
expDiff
;

101 i‡–! 
expDiff
 ) 
√wlyAlig√dBBiggî
;

103 
sigA
 = 
	`so·Êﬂt_shi·RightJam128
–sigA.
v64
, sigA.
v0
, -
expDiff
 );

104 
√wlyAlig√dBBiggî
:

105 
expZ
 = 
expB
;

106 
sigB
.
v64
 |
	`UINT64_C
( 0x0010000000000000 );

107 
bBiggî
:

108 
signZ
 = ! signZ;

109 
sigZ
 = 
	`so·Êﬂt_sub128
–
sigB
.
v64
, sigB.
v0
, 
sigA
.v64, sigA.v0 );

110 
n‹mRoundPack
;

111 
expABiggî
:

112 i‡–
expA
 == 0x7FFF ) {

113 i‡–
sigA
.
v64
 | sigA.
v0
 ) 
¥›ag©eNaN
;

114 
uiZ
.
v64
 = 
uiA64
;

115 
uiZ
.
v0
 = 
uiA0
;

116 
uiZ
;

118 i‡–
expB
 ) {

119 
sigB
.
v64
 |
	`UINT64_C
( 0x0010000000000000 );

121 --
expDiff
;

122 i‡–! 
expDiff
 ) 
√wlyAlig√dABiggî
;

124 
sigB
 = 
	`so·Êﬂt_shi·RightJam128
–sigB.
v64
, sigB.
v0
, 
expDiff
 );

125 
√wlyAlig√dABiggî
:

126 
expZ
 = 
expA
;

127 
sigA
.
v64
 |
	`UINT64_C
( 0x0010000000000000 );

128 
aBiggî
:

129 
sigZ
 = 
	`so·Êﬂt_sub128
–
sigA
.
v64
, sigA.
v0
, 
sigB
.v64, sigB.v0 );

130 
n‹mRoundPack
:

131  
	`so·Êﬂt_n‹mRoundPackToF128
–
signZ
, 
expZ
 - 5, 
sigZ
.
v64
, sigZ.
v0
 );

132 
¥›ag©eNaN
:

133 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF128UI
–
uiA64
, 
uiA0
, 
uiB64
, 
uiB0
 );

134 
uiZ
:

135 
uZ
.
ui
 = 
uiZ
;

136  
uZ
.
f
;

138 
	}
}

	@src/softfloat/source/s_subMagsF16.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt16_t
 
	$so·Êﬂt_subMagsF16
–
uöt_Á°16_t
 
uiA
, uöt_Á°16_à
uiB
 )

46 
öt_Á°8_t
 
expA
;

47 
uöt_Á°16_t
 
sigA
;

48 
öt_Á°8_t
 
expB
;

49 
uöt_Á°16_t
 
sigB
;

50 
öt_Á°8_t
 
expDiff
;

51 
uöt_Á°16_t
 
uiZ
;

52 
öt_Á°16_t
 
sigDiff
;

53 
boﬁ
 
signZ
;

54 
öt_Á°8_t
 
shi·Di°
, 
expZ
;

55 
uöt_Á°16_t
 
sigZ
, 
sigX
, 
sigY
;

56 
uöt_Á°32_t
 
sig32Z
;

57 
öt_Á°8_t
 
roundögMode
;

58 
ui16_f16
 
uZ
;

62 
expA
 = 
	`expF16UI
–
uiA
 );

63 
sigA
 = 
	`‰acF16UI
–
uiA
 );

64 
expB
 = 
	`expF16UI
–
uiB
 );

65 
sigB
 = 
	`‰acF16UI
–
uiB
 );

68 
expDiff
 = 
expA
 - 
expB
;

69 i‡–! 
expDiff
 ) {

72 i‡–
expA
 == 0x1F ) {

73 i‡–
sigA
 | 
sigB
 ) 
¥›ag©eNaN
;

74 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

75 
uiZ
 = 
deÁu…NaNF16UI
;

76 
uiZ
;

78 
sigDiff
 = 
sigA
 - 
sigB
;

79 i‡–! 
sigDiff
 ) {

80 
uiZ
 =

81 
	`∑ckToF16UI
(

82 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

83 
uiZ
;

85 i‡–
expA
 ) --expA;

86 
signZ
 = 
	`signF16UI
–
uiA
 );

87 i‡–
sigDiff
 < 0 ) {

88 
signZ
 = ! signZ;

89 
sigDiff
 = -sigDiff;

91 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos16
–
sigDiff
 ) - 5;

92 
expZ
 = 
expA
 - 
shi·Di°
;

93 i‡–
expZ
 < 0 ) {

94 
shi·Di°
 = 
expA
;

95 
expZ
 = 0;

97 
sigZ
 = 
sigDiff
<<
shi·Di°
;

98 
∑ck
;

102 
signZ
 = 
	`signF16UI
–
uiA
 );

103 i‡–
expDiff
 < 0 ) {

106 
signZ
 = ! signZ;

107 i‡–
expB
 == 0x1F ) {

108 i‡–
sigB
 ) 
¥›ag©eNaN
;

109 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 0x1F, 0 );

110 
uiZ
;

112 i‡–
expDiff
 <= -13 ) {

113 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 
expB
, 
sigB
 );

114 i‡–
expA
 | 
sigA
 ) 
subEpsû⁄
;

115 
uiZ
;

117 
expZ
 = 
expA
 + 19;

118 
sigX
 = 
sigB
 | 0x0400;

119 
sigY
 = 
sigA
 + (
expA
 ? 0x0400 : sigA);

120 
expDiff
 = -expDiff;

124 
uiZ
 = 
uiA
;

125 i‡–
expA
 == 0x1F ) {

126 i‡–
sigA
 ) 
¥›ag©eNaN
;

127 
uiZ
;

129 i‡–13 <
expDiff
 ) {

130 i‡–
expB
 | 
sigB
 ) 
subEpsû⁄
;

131 
uiZ
;

133 
expZ
 = 
expB
 + 19;

134 
sigX
 = 
sigA
 | 0x0400;

135 
sigY
 = 
sigB
 + (
expB
 ? 0x0400 : sigB);

137 
sig32Z
 = ((
uöt_Á°32_t
Ë
sigX
<<
expDiff
Ë- 
sigY
;

138 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
sig32Z
 ) - 1;

139 
sig32Z
 <<
shi·Di°
;

140 
expZ
 -
shi·Di°
;

141 
sigZ
 = 
sig32Z
>>16;

142 i‡–
sig32Z
 & 0xFFFF ) {

143 
sigZ
 |= 1;

145 i‡–! (
sigZ
 & 0xFË&& ((Ë
expZ
 < 0x1E) ) {

146 
sigZ
 >>= 4;

147 
∑ck
;

150  
	`so·Êﬂt_roundPackToF16
–
signZ
, 
expZ
, 
sigZ
 );

154 
¥›ag©eNaN
:

155 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF16UI
–
uiA
, 
uiB
 );

156 
uiZ
;

159 
subEpsû⁄
:

160 
roundögMode
 = 
so·Êﬂt_roundögMode
;

161 i‡–
roundögMode
 !
so·Êﬂt_round_√¨_eví
 ) {

163 (
roundögMode
 =
so·Êﬂt_round_möMag
)

164 || (
roundögMode


165 =(
	`signF16UI
–
uiZ
 ) ? 
so·Êﬂt_round_max


166 : 
so·Êﬂt_round_mö
))

168 --
uiZ
;

170 #ifde‡
SOFTFLOAT_ROUND_ODD


171 i‡–
roundögMode
 =
so·Êﬂt_round_odd
 ) {

172 
uiZ
 = (uiZ - 1) | 1;

176 
so·Êﬂt_ex˚±i⁄Fœgs
 |
so·Êﬂt_Êag_öexa˘
;

177 
uiZ
;

180 
∑ck
:

181 
uiZ
 = 
	`∑ckToF16UI
–
signZ
, 
expZ
, 
sigZ
 );

182 
uiZ
:

183 
uZ
.
ui
 = 
uiZ
;

184  
uZ
.
f
;

186 
	}
}

	@src/softfloat/source/s_subMagsF32.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt32_t
 
	$so·Êﬂt_subMagsF32
–
uöt_Á°32_t
 
uiA
, uöt_Á°32_à
uiB
 )

46 
öt_Á°16_t
 
expA
;

47 
uöt_Á°32_t
 
sigA
;

48 
öt_Á°16_t
 
expB
;

49 
uöt_Á°32_t
 
sigB
;

50 
öt_Á°16_t
 
expDiff
;

51 
uöt_Á°32_t
 
uiZ
;

52 
öt_Á°32_t
 
sigDiff
;

53 
boﬁ
 
signZ
;

54 
öt_Á°8_t
 
shi·Di°
;

55 
öt_Á°16_t
 
expZ
;

56 
uöt_Á°32_t
 
sigX
, 
sigY
;

57 
ui32_f32
 
uZ
;

61 
expA
 = 
	`expF32UI
–
uiA
 );

62 
sigA
 = 
	`‰acF32UI
–
uiA
 );

63 
expB
 = 
	`expF32UI
–
uiB
 );

64 
sigB
 = 
	`‰acF32UI
–
uiB
 );

67 
expDiff
 = 
expA
 - 
expB
;

68 i‡–! 
expDiff
 ) {

71 i‡–
expA
 == 0xFF ) {

72 i‡–
sigA
 | 
sigB
 ) 
¥›ag©eNaN
;

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

74 
uiZ
 = 
deÁu…NaNF32UI
;

75 
uiZ
;

77 
sigDiff
 = 
sigA
 - 
sigB
;

78 i‡–! 
sigDiff
 ) {

79 
uiZ
 =

80 
	`∑ckToF32UI
(

81 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

82 
uiZ
;

84 i‡–
expA
 ) --expA;

85 
signZ
 = 
	`signF32UI
–
uiA
 );

86 i‡–
sigDiff
 < 0 ) {

87 
signZ
 = ! signZ;

88 
sigDiff
 = -sigDiff;

90 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
sigDiff
 ) - 8;

91 
expZ
 = 
expA
 - 
shi·Di°
;

92 i‡–
expZ
 < 0 ) {

93 
shi·Di°
 = 
expA
;

94 
expZ
 = 0;

96 
uiZ
 = 
	`∑ckToF32UI
–
signZ
, 
expZ
, 
sigDiff
<<
shi·Di°
 );

97 
uiZ
;

101 
signZ
 = 
	`signF32UI
–
uiA
 );

102 
sigA
 <<= 7;

103 
sigB
 <<= 7;

104 i‡–
expDiff
 < 0 ) {

107 
signZ
 = ! signZ;

108 i‡–
expB
 == 0xFF ) {

109 i‡–
sigB
 ) 
¥›ag©eNaN
;

110 
uiZ
 = 
	`∑ckToF32UI
–
signZ
, 0xFF, 0 );

111 
uiZ
;

113 
expZ
 = 
expB
 - 1;

114 
sigX
 = 
sigB
 | 0x40000000;

115 
sigY
 = 
sigA
 + (
expA
 ? 0x40000000 : sigA);

116 
expDiff
 = -expDiff;

120 i‡–
expA
 == 0xFF ) {

121 i‡–
sigA
 ) 
¥›ag©eNaN
;

122 
uiZ
 = 
uiA
;

123 
uiZ
;

125 
expZ
 = 
expA
 - 1;

126 
sigX
 = 
sigA
 | 0x40000000;

127 
sigY
 = 
sigB
 + (
expB
 ? 0x40000000 : sigB);

130 
	`so·Êﬂt_n‹mRoundPackToF32
(

131 
signZ
, 
expZ
, 
sigX
 - 
	`so·Êﬂt_shi·RightJam32
–
sigY
, 
expDiff
 )

136 
¥›ag©eNaN
:

137 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF32UI
–
uiA
, 
uiB
 );

138 
uiZ
:

139 
uZ
.
ui
 = 
uiZ
;

140  
uZ
.
f
;

142 
	}
}

	@src/softfloat/source/s_subMagsF64.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

42 
	~"so·Êﬂt.h
"

44 
Êﬂt64_t


45 
	$so·Êﬂt_subMagsF64
–
uöt_Á°64_t
 
uiA
, uöt_Á°64_à
uiB
, 
boﬁ
 
signZ
 )

47 
öt_Á°16_t
 
expA
;

48 
uöt_Á°64_t
 
sigA
;

49 
öt_Á°16_t
 
expB
;

50 
uöt_Á°64_t
 
sigB
;

51 
öt_Á°16_t
 
expDiff
;

52 
uöt_Á°64_t
 
uiZ
;

53 
öt_Á°64_t
 
sigDiff
;

54 
öt_Á°8_t
 
shi·Di°
;

55 
öt_Á°16_t
 
expZ
;

56 
uöt_Á°64_t
 
sigZ
;

57 
ui64_f64
 
uZ
;

61 
expA
 = 
	`expF64UI
–
uiA
 );

62 
sigA
 = 
	`‰acF64UI
–
uiA
 );

63 
expB
 = 
	`expF64UI
–
uiB
 );

64 
sigB
 = 
	`‰acF64UI
–
uiB
 );

67 
expDiff
 = 
expA
 - 
expB
;

68 i‡–! 
expDiff
 ) {

71 i‡–
expA
 == 0x7FF ) {

72 i‡–
sigA
 | 
sigB
 ) 
¥›ag©eNaN
;

73 
	`so·Êﬂt_øi£Fœgs
–
so·Êﬂt_Êag_övÆid
 );

74 
uiZ
 = 
deÁu…NaNF64UI
;

75 
uiZ
;

77 
sigDiff
 = 
sigA
 - 
sigB
;

78 i‡–! 
sigDiff
 ) {

79 
uiZ
 =

80 
	`∑ckToF64UI
(

81 (
so·Êﬂt_roundögMode
 =
so·Êﬂt_round_mö
), 0, 0 );

82 
uiZ
;

84 i‡–
expA
 ) --expA;

85 i‡–
sigDiff
 < 0 ) {

86 
signZ
 = ! signZ;

87 
sigDiff
 = -sigDiff;

89 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
sigDiff
 ) - 11;

90 
expZ
 = 
expA
 - 
shi·Di°
;

91 i‡–
expZ
 < 0 ) {

92 
shi·Di°
 = 
expA
;

93 
expZ
 = 0;

95 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 
expZ
, 
sigDiff
<<
shi·Di°
 );

96 
uiZ
;

100 
sigA
 <<= 10;

101 
sigB
 <<= 10;

102 i‡–
expDiff
 < 0 ) {

105 
signZ
 = ! signZ;

106 i‡–
expB
 == 0x7FF ) {

107 i‡–
sigB
 ) 
¥›ag©eNaN
;

108 
uiZ
 = 
	`∑ckToF64UI
–
signZ
, 0x7FF, 0 );

109 
uiZ
;

111 
sigA
 +
expA
 ? 
	`UINT64_C
( 0x4000000000000000 ) : sigA;

112 
sigA
 = 
	`so·Êﬂt_shi·RightJam64
–sigA, -
expDiff
 );

113 
sigB
 |
	`UINT64_C
( 0x4000000000000000 );

114 
expZ
 = 
expB
;

115 
sigZ
 = 
sigB
 - 
sigA
;

119 i‡–
expA
 == 0x7FF ) {

120 i‡–
sigA
 ) 
¥›ag©eNaN
;

121 
uiZ
 = 
uiA
;

122 
uiZ
;

124 
sigB
 +
expB
 ? 
	`UINT64_C
( 0x4000000000000000 ) : sigB;

125 
sigB
 = 
	`so·Êﬂt_shi·RightJam64
–sigB, 
expDiff
 );

126 
sigA
 |
	`UINT64_C
( 0x4000000000000000 );

127 
expZ
 = 
expA
;

128 
sigZ
 = 
sigA
 - 
sigB
;

130  
	`so·Êﬂt_n‹mRoundPackToF64
–
signZ
, 
expZ
 - 1, 
sigZ
 );

134 
¥›ag©eNaN
:

135 
uiZ
 = 
	`so·Êﬂt_¥›ag©eNaNF64UI
–
uiA
, 
uiB
 );

136 
uiZ
:

137 
uZ
.
ui
 = 
uiZ
;

138  
uZ
.
f
;

140 
	}
}

	@src/softfloat/source/s_tryPropagateNaNExtF80M.c

37 
	~<°dboﬁ.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

42 
boﬁ


43 
	$so·Êﬂt_åyPr›ag©eNaNExtF80M
(

44 c⁄° 
extFlﬂt80M
 *
aSPå
,

45 c⁄° 
extFlﬂt80M
 *
bSPå
,

46 
extFlﬂt80M
 *
zSPå


49 
uöt_Á°16_t
 
ui64
;

50 
uöt64_t
 
ui0
;

52 
ui64
 = 
aSPå
->
signExp
;

53 
ui0
 = 
aSPå
->
signif
;

54 i‡–
	`isNaNExtF80UI
–
ui64
, 
ui0
 ) ) 
¥›ag©eNaN
;

55 
ui64
 = 
bSPå
->
signExp
;

56 
ui0
 = 
bSPå
->
signif
;

57 i‡–
	`isNaNExtF80UI
–
ui64
, 
ui0
 ) ) 
¥›ag©eNaN
;

58  
Ál£
;

59 
¥›ag©eNaN
:

60 
	`so·Êﬂt_¥›ag©eNaNExtF80M
–
aSPå
, 
bSPå
, 
zSPå
 );

61  
åue
;

63 
	}
}

	@src/softfloat/source/s_tryPropagateNaNF128M.c

37 
	~<°dboﬁ.h
>

38 
	~<°döt.h
>

39 
	~"∂©f‹m.h
"

40 
	~"öã∫Æs.h
"

41 
	~"•ecülize.h
"

43 
boﬁ


44 
	$so·Êﬂt_åyPr›ag©eNaNF128M
(

45 c⁄° 
uöt32_t
 *
aWPå
, c⁄° uöt32_à*
bWPå
, uöt32_à*
zWPå
 )

48 i‡–
	`so·Êﬂt_isNaNF128M
–
aWPå
 ) || so·Êﬂt_isNaNF128M–
bWPå
 ) ) {

49 
	`so·Êﬂt_¥›ag©eNaNF128M
–
aWPå
, 
bWPå
, 
zWPå
 );

50  
åue
;

52  
Ál£
;

54 
	}
}

	@src/softfloat/source/softfloat_state.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"•ecülize.h
"

41 
	~"so·Êﬂt.h
"

43 #i‚de‡
THREAD_LOCAL


44 
	#THREAD_LOCAL


	)

47 
THREAD_LOCAL
 
uöt_Á°8_t
 
	gso·Êﬂt_roundögMode
 = 
so·Êﬂt_round_√¨_eví
;

48 
THREAD_LOCAL
 
uöt_Á°8_t
 
	gso·Êﬂt_dëe˘Tööess
 = 
öô_dëe˘Tööess
;

49 
THREAD_LOCAL
 
uöt_Á°8_t
 
	gso·Êﬂt_ex˚±i⁄Fœgs
 = 0;

51 
THREAD_LOCAL
 
uöt_Á°8_t
 
	gextF80_roundögPªcisi⁄
 = 80;

	@src/softfloat/source/ui32_to_extF80.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
extFlﬂt80_t
 
	$ui32_to_extF80
–
uöt32_t
 
a
 )

44 
uöt_Á°16_t
 
uiZ64
;

45 
öt_Á°8_t
 
shi·Di°
;

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

48 
uiZ64
 = 0;

49 i‡–
a
 ) {

50 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
a
 );

51 
uiZ64
 = 0x401E - 
shi·Di°
;

52 
a
 <<
shi·Di°
;

54 
uZ
.
s
.
signExp
 = 
uiZ64
;

55 
uZ
.
s
.
signif
 = (
uöt_Á°64_t
Ë
a
<<32;

56  
uZ
.
f
;

58 
	}
}

	@src/softfloat/source/ui32_to_extF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 
	$ui32_to_extF80M
–
uöt32_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

47 *
zPå
 = 
	`ui32_to_extF80
–
a
 );

49 
	}
}

53 
	$ui32_to_extF80M
–
uöt32_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

55 
extFlﬂt80M
 *
zSPå
;

56 
uöt_Á°16_t
 
uiZ64
;

57 
uöt64_t
 
sigZ
;

58 
öt_Á°8_t
 
shi·Di°
;

60 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

61 
uiZ64
 = 0;

62 
sigZ
 = 0;

63 i‡–
a
 ) {

64 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
a
 );

65 
uiZ64
 = 
	`∑ckToExtF80UI64
–0, 0x401E - 
shi·Di°
 );

66 
sigZ
 = (
uöt64_t
Ë(
a
<<
shi·Di°
)<<32;

68 
zSPå
->
signExp
 = 
uiZ64
;

69 
zSPå
->
signif
 = 
sigZ
;

71 
	}
}

	@src/softfloat/source/ui32_to_f128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt128_t
 
	$ui32_to_f128
–
uöt32_t
 
a
 )

44 
uöt_Á°64_t
 
uiZ64
;

45 
öt_Á°8_t
 
shi·Di°
;

46 
ui128_f128
 
uZ
;

48 
uiZ64
 = 0;

49 i‡–
a
 ) {

50 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
a
 ) + 17;

51 
uiZ64
 =

52 
	`∑ckToF128UI64
(

53 0, 0x402E - 
shi·Di°
, (
uöt_Á°64_t
Ë
a
<<shiftDist );

55 
uZ
.
ui
.
v64
 = 
uiZ64
;

56 
uZ
.
ui
.
v0
 = 0;

57  
uZ
.
f
;

59 
	}
}

	@src/softfloat/source/ui32_to_f128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 
	$ui32_to_f128M
–
uöt32_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

47 *
zPå
 = 
	`ui32_to_f128
–
a
 );

49 
	}
}

53 
	$ui32_to_f128M
–
uöt32_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

55 
uöt32_t
 *
zWPå
, 
uiZ96
, 
uiZ64
;

56 
öt_Á°8_t
 
shi·Di°
;

57 
uöt64_t
 
n‹mA
;

59 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

60 
uiZ96
 = 0;

61 
uiZ64
 = 0;

62 i‡–
a
 ) {

63 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
a
 ) + 17;

64 
n‹mA
 = (
uöt64_t
Ë
a
<<
shi·Di°
;

65 
uiZ96
 = 
	`∑ckToF128UI96
–0, 0x402E - 
shi·Di°
, 
n‹mA
>>32 );

66 
uiZ64
 = 
n‹mA
;

68 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
uiZ96
;

69 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
uiZ64
;

70 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

71 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

73 
	}
}

	@src/softfloat/source/ui32_to_f16.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt16_t
 
	$ui32_to_f16
–
uöt32_t
 
a
 )

44 
öt_Á°8_t
 
shi·Di°
;

45 
ui16_f16
 
u
;

46 
uöt_Á°16_t
 
sig
;

48 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
a
 ) - 21;

49 i‡–0 <
shi·Di°
 ) {

50 
u
.
ui
 =

51 
a
 ? 
	`∑ckToF16UI
(

52 0, 0x18 - 
shi·Di°
, (
uöt_Á°16_t
Ë
a
<<shiftDist )

54  
u
.
f
;

56 
shi·Di°
 += 4;

57 
sig
 =

58 (
shi·Di°
 < 0)

59 ? 
a
>>(-
shi·Di°
Ë| ((
uöt32_t
) (a<<(shiftDist & 31)) != 0)

60 : (
uöt_Á°16_t
Ë
a
<<
shi·Di°
;

61  
	`so·Êﬂt_roundPackToF16
–0, 0x1C - 
shi·Di°
, 
sig
 );

64 
	}
}

	@src/softfloat/source/ui32_to_f32.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt32_t
 
	$ui32_to_f32
–
uöt32_t
 
a
 )

44 
ui32_f32
 
uZ
;

46 i‡–! 
a
 ) {

47 
uZ
.
ui
 = 0;

48  
uZ
.
f
;

50 i‡–
a
 & 0x80000000 ) {

51  
	`so·Êﬂt_roundPackToF32
–0, 0x9D, 
a
>>1 | (a & 1) );

53  
	`so·Êﬂt_n‹mRoundPackToF32
–0, 0x9C, 
a
 );

56 
	}
}

	@src/softfloat/source/ui32_to_f64.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt64_t
 
	$ui32_to_f64
–
uöt32_t
 
a
 )

44 
uöt_Á°64_t
 
uiZ
;

45 
öt_Á°8_t
 
shi·Di°
;

46 
ui64_f64
 
uZ
;

48 i‡–! 
a
 ) {

49 
uiZ
 = 0;

51 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos32
–
a
 ) + 21;

52 
uiZ
 =

53 
	`∑ckToF64UI
–0, 0x432 - 
shi·Di°
, (
uöt_Á°64_t
Ë
a
<<shiftDist );

55 
uZ
.
ui
 = 
uiZ
;

56  
uZ
.
f
;

58 
	}
}

	@src/softfloat/source/ui64_to_extF80.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
extFlﬂt80_t
 
	$ui64_to_extF80
–
uöt64_t
 
a
 )

44 
uöt_Á°16_t
 
uiZ64
;

45 
öt_Á°8_t
 
shi·Di°
;

46 uni⁄ { 
extFlﬂt80M
 
s
; 
extFlﬂt80_t
 
f
; } 
uZ
;

48 
uiZ64
 = 0;

49 i‡–
a
 ) {

50 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
a
 );

51 
uiZ64
 = 0x403E - 
shi·Di°
;

52 
a
 <<
shi·Di°
;

54 
uZ
.
s
.
signExp
 = 
uiZ64
;

55 
uZ
.
s
.
signif
 = 
a
;

56  
uZ
.
f
;

58 
	}
}

	@src/softfloat/source/ui64_to_extF80M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 
	$ui64_to_extF80M
–
uöt64_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

47 *
zPå
 = 
	`ui64_to_extF80
–
a
 );

49 
	}
}

53 
	$ui64_to_extF80M
–
uöt64_t
 
a
, 
extFlﬂt80_t
 *
zPå
 )

55 
extFlﬂt80M
 *
zSPå
;

56 
uöt_Á°16_t
 
uiZ64
;

57 
uöt64_t
 
sigZ
;

58 
öt_Á°8_t
 
shi·Di°
;

60 
zSPå
 = (
extFlﬂt80M
 *Ë
zPå
;

61 
uiZ64
 = 0;

62 
sigZ
 = 0;

63 i‡–
a
 ) {

64 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
a
 );

65 
uiZ64
 = 
	`∑ckToExtF80UI64
–0, 0x403E - 
shi·Di°
 );

66 
sigZ
 = 
a
<<
shi·Di°
;

68 
zSPå
->
signExp
 = 
uiZ64
;

69 
zSPå
->
signif
 = 
sigZ
;

71 
	}
}

	@src/softfloat/source/ui64_to_f128.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt128_t
 
	$ui64_to_f128
–
uöt64_t
 
a
 )

44 
uöt_Á°64_t
 
uiZ64
, 
uiZ0
;

45 
öt_Á°8_t
 
shi·Di°
;

46 
uöt128
 
zSig
;

47 
ui128_f128
 
uZ
;

49 i‡–! 
a
 ) {

50 
uiZ64
 = 0;

51 
uiZ0
 = 0;

53 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
a
 ) + 49;

54 i‡–64 <
shi·Di°
 ) {

55 
zSig
.
v64
 = 
a
<<(
shi·Di°
 - 64);

56 
zSig
.
v0
 = 0;

58 
zSig
 = 
	`so·Êﬂt_sh‹tShi·Le·128
–0, 
a
, 
shi·Di°
 );

60 
uiZ64
 = 
	`∑ckToF128UI64
–0, 0x406E - 
shi·Di°
, 
zSig
.
v64
 );

61 
uiZ0
 = 
zSig
.
v0
;

63 
uZ
.
ui
.
v64
 = 
uiZ64
;

64 
uZ
.
ui
.
v0
 = 
uiZ0
;

65  
uZ
.
f
;

67 
	}
}

	@src/softfloat/source/ui64_to_f128M.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 #ifde‡
SOFTFLOAT_FAST_INT64


44 
	$ui64_to_f128M
–
uöt64_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

47 *
zPå
 = 
	`ui64_to_f128
–
a
 );

49 
	}
}

53 
	$ui64_to_f128M
–
uöt64_t
 
a
, 
Êﬂt128_t
 *
zPå
 )

55 
uöt32_t
 *
zWPå
, 
uiZ96
, 
uiZ64
;

56 
uöt_Á°8_t
 
shi·Di°
;

57 
uöt32_t
 *
±r
;

59 
zWPå
 = (
uöt32_t
 *Ë
zPå
;

60 
uiZ96
 = 0;

61 
uiZ64
 = 0;

62 
zWPå
[
	`ödexW‹d
( 4, 1 )] = 0;

63 
zWPå
[
	`ödexW‹d
( 4, 0 )] = 0;

64 i‡–
a
 ) {

65 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
a
 ) + 17;

66 i‡–
shi·Di°
 < 32 ) {

67 
±r
 = 
zWPå
 + 
	`ödexMu…iw‹dHi
( 4, 3 );

68 
±r
[
	`ödexW‹d
( 3, 2 )] = 0;

69 
±r
[
	`ödexW‹d
–3, 1 )] = 
a
>>32;

70 
±r
[
	`ödexW‹d
–3, 0 )] = 
a
;

71 
	`so·Êﬂt_sh‹tShi·Le·96M
–
±r
, 
shi·Di°
,Ötr );

72 
±r
[
	`ödexW‹dHi
( 3 )] =

73 
	`∑ckToF128UI96
–0, 0x404E - 
shi·Di°
, 
±r
[
	`ödexW‹dHi
( 3 )] );

76 
a
 <<
shi·Di°
 - 32;

77 
uiZ96
 = 
	`∑ckToF128UI96
–0, 0x404E - 
shi·Di°
, 
a
>>32 );

78 
uiZ64
 = 
a
;

80 
zWPå
[
	`ödexW‹d
–4, 3 )] = 
uiZ96
;

81 
zWPå
[
	`ödexW‹d
–4, 2 )] = 
uiZ64
;

83 
	}
}

	@src/softfloat/source/ui64_to_f16.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt16_t
 
	$ui64_to_f16
–
uöt64_t
 
a
 )

44 
öt_Á°8_t
 
shi·Di°
;

45 
ui16_f16
 
u
;

46 
uöt_Á°16_t
 
sig
;

48 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
a
 ) - 53;

49 i‡–0 <
shi·Di°
 ) {

50 
u
.
ui
 =

51 
a
 ? 
	`∑ckToF16UI
(

52 0, 0x18 - 
shi·Di°
, (
uöt_Á°16_t
Ë
a
<<shiftDist )

54  
u
.
f
;

56 
shi·Di°
 += 4;

57 
sig
 =

58 (
shi·Di°
 < 0Ë? 
	`so·Êﬂt_sh‹tShi·RightJam64
–
a
, -shiftDist )

59 : (
uöt_Á°16_t
Ë
a
<<
shi·Di°
;

60  
	`so·Êﬂt_roundPackToF16
–0, 0x1C - 
shi·Di°
, 
sig
 );

63 
	}
}

	@src/softfloat/source/ui64_to_f32.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt32_t
 
	$ui64_to_f32
–
uöt64_t
 
a
 )

44 
öt_Á°8_t
 
shi·Di°
;

45 
ui32_f32
 
u
;

46 
uöt_Á°32_t
 
sig
;

48 
shi·Di°
 = 
	`so·Êﬂt_cou¡LódögZîos64
–
a
 ) - 40;

49 i‡–0 <
shi·Di°
 ) {

50 
u
.
ui
 =

51 
a
 ? 
	`∑ckToF32UI
(

52 0, 0x95 - 
shi·Di°
, (
uöt_Á°32_t
Ë
a
<<shiftDist )

54  
u
.
f
;

56 
shi·Di°
 += 7;

57 
sig
 =

58 (
shi·Di°
 < 0Ë? 
	`so·Êﬂt_sh‹tShi·RightJam64
–
a
, -shiftDist )

59 : (
uöt_Á°32_t
Ë
a
<<
shi·Di°
;

60  
	`so·Êﬂt_roundPackToF32
–0, 0x9C - 
shi·Di°
, 
sig
 );

63 
	}
}

	@src/softfloat/source/ui64_to_f64.c

37 
	~<°döt.h
>

38 
	~"∂©f‹m.h
"

39 
	~"öã∫Æs.h
"

40 
	~"so·Êﬂt.h
"

42 
Êﬂt64_t
 
	$ui64_to_f64
–
uöt64_t
 
a
 )

44 
ui64_f64
 
uZ
;

46 i‡–! 
a
 ) {

47 
uZ
.
ui
 = 0;

48  
uZ
.
f
;

50 i‡–
a
 & 
	`UINT64_C
( 0x8000000000000000 ) ) {

52 
	`so·Êﬂt_roundPackToF64
(

53 0, 0x43D, 
	`so·Êﬂt_sh‹tShi·RightJam64
–
a
, 1 ) );

55  
	`so·Êﬂt_n‹mRoundPackToF64
–0, 0x43C, 
a
 );

58 
	}
}

	@src/syscall.c

6 
	~<as£π.h
>

7 
	~<°döt.h
>

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

11 
	~<sys/time.h
>

13 
	~"riscv.h
"

14 
	~"riscv_¥iv©e.h
"

15 
	~"utûs.h
"

17 
	#PREALLOC_SIZE
 4096

	)

26 
	#SUPPORTED_SYSCALLS
 \

27 
	`_
(
˛o£
, 57) \

28 
	`_
(
l£ek
, 62) \

29 
	`_
(
ªad
, 63) \

30 
	`_
(
wrôe
, 64) \

31 
	`_
(
f°©
, 80) \

32 
	`_
(
exô
, 93) \

33 
	`_
(
gëtimeofday
, 169) \

34 
	`_
(
brk
, 214) \

35 
	`_
(
˛ock_gëtime
, 403) \

36 
	`_
(
›í
, 1024) \

37 
	`IIF
(
	`RV32_HAS
(
SYSTEM
))( \

38 
	`_
(
sbi_ba£
, 0x10) \

39 
	`_
(
sbi_timî
, 0x54494D45) \

40 
	`_
(
sbi_r°
, 0x53525354) \

42 
	`IIF
(
	`RV32_HAS
(
SDL
))( \

43 
	`_
(
døw_‰ame
, 0xBEEF) \

44 
	`_
(
£tup_queue
, 0xC0DE) \

45 
	`_
(
submô_queue
, 0xFEED) \

46 
	`_
(
£tup_audio
, 0xBABE) \

47 
	`_
(
c⁄åﬁ_audio
, 0xD00D) \

48 )

	)

52 
	#_
(
«me
, 
numbî
Ë
SYS_
##«mênumbî,

	)

53 
	mSUPPORTED_SYSCALLS


54 #unde‡
_


58 
	mO_RDONLY
 = 0,

59 
	mO_WRONLY
 = 1,

60 
	mO_RDWR
 = 2,

61 
	mO_ACCMODE
 = 3,

64 
	$föd_‰ì_fd
(
vm_©å_t
 *
©å
)

66 
i
 = 3;; ++i) {

67 
m≠_ôî_t
 
ô
;

68 
	`m≠_föd
(
©å
->
fd_m≠
, &
ô
, &
i
);

69 i‡(
	`m≠_©_íd
(
©å
->
fd_m≠
, &
ô
))

70  
i
;

72 
	}
}

74 c⁄° *
	$gë_mode_°r
(
uöt32_t
 
Êags
, uöt32_à
mode
 
UNUSED
)

76 
Êags
 & 
O_ACCMODE
) {

77 
O_RDONLY
:

79 
O_WRONLY
:

81 
O_RDWR
:

84  
NULL
;

86 
	}
}

88 
uöt8_t
 
	gtmp
[
PREALLOC_SIZE
];

89 
	$sysˇŒ_wrôe
(
riscv_t
 *
rv
)

91 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

94 
riscv_w‹d_t
 
fd
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

95 
riscv_w‹d_t
 
buf„r
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

96 
riscv_w‹d_t
 
cou¡
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
);

99 
m≠_ôî_t
 
ô
;

100 
	`m≠_föd
(
©å
->
fd_m≠
, &
ô
, &
fd
);

101 i‡(
	`m≠_©_íd
(
©å
->
fd_m≠
, &
ô
))

102 
îr‹_h™dÀr
;

104 
uöt32_t
 
tŸÆ_wrôe
 = 0;

105 
FILE
 *
h™dÀ
 = 
	`m≠_ôî_vÆue
(&
ô
, FILE *);

107 
cou¡
 > 
PREALLOC_SIZE
) {

108 
	`mem‹y_ªad
(
©å
->
mem
, 
tmp
, 
buf„r
 + 
tŸÆ_wrôe
, 
PREALLOC_SIZE
);

110 
size_t
 
wrôãn
 = 
	`fwrôe
(
tmp
, 1, 
PREALLOC_SIZE
, 
h™dÀ
);

111 i‡(
wrôãn
 !
PREALLOC_SIZE
 && 
	`„º‹
(
h™dÀ
))

112 
îr‹_h™dÀr
;

113 
tŸÆ_wrôe
 +
wrôãn
;

114 
cou¡
 -
PREALLOC_SIZE
;

117 
	`mem‹y_ªad
(
©å
->
mem
, 
tmp
, 
buf„r
 + 
tŸÆ_wrôe
, 
cou¡
);

119 
size_t
 
wrôãn
 = 
	`fwrôe
(
tmp
, 1, 
cou¡
, 
h™dÀ
);

120 i‡(
wrôãn
 !
cou¡
 && 
	`„º‹
(
h™dÀ
))

121 
îr‹_h™dÀr
;

122 
tŸÆ_wrôe
 +
wrôãn
;

123 
	`as£π
(
tŸÆ_wrôe
 =
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
));

126 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
tŸÆ_wrôe
);

130 
îr‹_h™dÀr
:

132 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

133 
	}
}

136 
	$sysˇŒ_exô
(
riscv_t
 *
rv
)

141 
	`rv_hÆt
(
rv
);

143 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

144 
©å
->
exô_code
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

145 
	}
}

152 
	$sysˇŒ_brk
(
riscv_t
 *
rv
)

154 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

157 
riscv_w‹d_t
 
ö¸emít
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

158 i‡(
ö¸emít
)

159 
©å
->
bªak_addr
 = 
ö¸emít
;

162 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
©å
->
bªak_addr
);

163 
	}
}

165 
	$sysˇŒ_gëtimeofday
(
riscv_t
 *
rv
)

168 
riscv_w‹d_t
 
tv
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

169 
riscv_w‹d_t
 
tz
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

172 i‡(
tv
) {

173 
timevÆ
 
tv_s
;

174 
	`rv_gëtimeofday
(&
tv_s
);

175 
	`mem‹y_wrôe_w
(
tv
 + 0, (c⁄° 
uöt8_t
 *Ë&
tv_s
.
tv_£c
);

176 
	`mem‹y_wrôe_w
(
tv
 + 8, (c⁄° 
uöt8_t
 *Ë&
tv_s
.
tv_u£c
);

179 i‡(
tz
) {

184 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 0);

185 
	}
}

187 
	$sysˇŒ_˛ock_gëtime
(
riscv_t
 *
rv
)

190 
riscv_w‹d_t
 
id
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

191 
riscv_w‹d_t
 
ç
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

193 
id
) {

194 
CLOCK_REALTIME
:

195 #ifde‡
CLOCK_MONOTONIC


196 
CLOCK_MONOTONIC
:

200 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

204 i‡(
ç
) {

205 
time•ec
 
ç_s
;

206 
	`rv_˛ock_gëtime
(&
ç_s
);

207 
	`mem‹y_wrôe_w
(
ç
 + 0, (c⁄° 
uöt8_t
 *Ë&
ç_s
.
tv_£c
);

208 
	`mem‹y_wrôe_w
(
ç
 + 8, (c⁄° 
uöt8_t
 *Ë&
ç_s
.
tv_n£c
);

212 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 0);

213 
	}
}

215 
	$sysˇŒ_˛o£
(
riscv_t
 *
rv
)

217 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

220 
uöt32_t
 
fd
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

222 i‡(
fd
 >= 3) {

223 
m≠_ôî_t
 
ô
;

224 
	`m≠_föd
(
©å
->
fd_m≠
, &
ô
, &
fd
);

225 i‡(!
	`m≠_©_íd
(
©å
->
fd_m≠
, &
ô
)) {

226 i‡(
	`f˛o£
(
	`m≠_ôî_vÆue
(&
ô
, 
FILE
 *))) {

228 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

231 
	`m≠_îa£
(
©å
->
fd_m≠
, &
ô
);

234 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 0);

239 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 0);

240 
	}
}

246 
	$sysˇŒ_l£ek
(
riscv_t
 *
rv
)

248 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

251 
uöt32_t
 
fd
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

252 
uöt32_t
 
off£t
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

253 
uöt32_t
 
whí˚
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
);

256 
m≠_ôî_t
 
ô
;

257 
	`m≠_föd
(
©å
->
fd_m≠
, &
ô
, &
fd
);

258 i‡(
	`m≠_©_íd
(
©å
->
fd_m≠
, &
ô
)) {

260 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

264 
FILE
 *
h™dÀ
 = 
	`m≠_ôî_vÆue
(&
ô
, FILE *);

265 i‡(
	`f£ek
(
h™dÀ
, 
off£t
, 
whí˚
)) {

267 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

271 
pos
 = 
	`·ñl
(
h™dÀ
);

272 i‡(
pos
 == -1) {

274 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

279 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
pos
);

280 
	}
}

282 
	$sysˇŒ_ªad
(
riscv_t
 *
rv
)

284 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

287 
uöt32_t
 
fd
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

288 
uöt32_t
 
buf
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

289 
uöt32_t
 
cou¡
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
);

292 
m≠_ôî_t
 
ô
;

293 
	`m≠_föd
(
©å
->
fd_m≠
, &
ô
, &
fd
);

294 i‡(
	`m≠_©_íd
(
©å
->
fd_m≠
, &
ô
)) {

296 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

300 
FILE
 *
h™dÀ
 = 
	`m≠_ôî_vÆue
(&
ô
, FILE *);

301 
uöt32_t
 
tŸÆ_ªad
 = 0;

304 
cou¡
 > 
PREALLOC_SIZE
) {

305 
size_t
 
r
 = 
	`‰ód
(
tmp
, 1, 
PREALLOC_SIZE
, 
h™dÀ
);

306 
	`mem‹y_wrôe
(
©å
->
mem
, 
buf
 + 
tŸÆ_ªad
, 
tmp
, 
r
);

307 
cou¡
 -
r
;

308 
tŸÆ_ªad
 +
r
;

309 i‡(
r
 !
PREALLOC_SIZE
)

312 
size_t
 
r
 = 
	`‰ód
(
tmp
, 1, 
cou¡
, 
h™dÀ
);

313 
	`mem‹y_wrôe
(
©å
->
mem
, 
buf
 + 
tŸÆ_ªad
, 
tmp
, 
r
);

314 
tŸÆ_ªad
 +
r
;

315 i‡(
tŸÆ_ªad
 !
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
Ë&& 
	`„º‹
(
h™dÀ
)) {

317 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

321 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
tŸÆ_ªad
);

322 
	}
}

324 
	$sysˇŒ_f°©
(
riscv_t
 *
rv
 
UNUSED
)

327 
	}
}

329 
	$sysˇŒ_›í
(
riscv_t
 *
rv
)

331 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

334 
uöt32_t
 
«me
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

335 
uöt32_t
 
Êags
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

336 
uöt32_t
 
mode
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
);

339 c⁄° 
size_t
 
«me_Àn
 = 
	`°æí
((*Ë
©å
->
mem
->
mem_ba£
 + 
«me
);

340 *
«me_°r
 = 
	`mÆloc
(
«me_Àn
 + 1);

341 
	`as£π
(
«me_°r
);

342 
«me_°r
[
«me_Àn
] = '\0';

343 
	`mem‹y_ªad
(
©å
->
mem
, (
uöt8_t
 *Ë
«me_°r
, 
«me
, 
«me_Àn
);

346 c⁄° *
mode_°r
 = 
	`gë_mode_°r
(
Êags
, 
mode
);

347 i‡(!
mode_°r
) {

348 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

352 
FILE
 *
h™dÀ
 = 
	`f›í
(
«me_°r
, 
mode_°r
);

353 i‡(!
h™dÀ
) {

354 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, -1);

358 
	`‰ì
(
«me_°r
);

360 c⁄° 
fd
 = 
	`föd_‰ì_fd
(
©å
);

363 
	`m≠_ö£π
(
©å
->
fd_m≠
, (*Ë&
fd
, &
h™dÀ
);

366 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
fd
);

367 
	}
}

369 #i‡
RV32_HAS
(
SDL
)

370 
sysˇŒ_døw_‰ame
(
riscv_t
 *
rv
);

371 
sysˇŒ_£tup_queue
(
riscv_t
 *
rv
);

372 
sysˇŒ_submô_queue
(
riscv_t
 *
rv
);

373 
sysˇŒ_£tup_audio
(
riscv_t
 *
rv
);

374 
sysˇŒ_c⁄åﬁ_audio
(
riscv_t
 *
rv
);

377 #i‡
RV32_HAS
(
SYSTEM
)

380 
	$sysˇŒ_sbi_timî
(
riscv_t
 *
rv
)

382 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

383 c⁄° 
riscv_w‹d_t
 
fid
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a6
);

384 c⁄° 
riscv_w‹d_t
 
a0
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

385 c⁄° 
riscv_w‹d_t
 
a1
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

387 
fid
) {

388 
SBI_TIMER_SET_TIMER
:

389 
©å
->
timî
 = (((
uöt64_t
Ë
a1
Ë<< 32Ë| (uöt64_tË(
a0
);

390 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

391 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 0);

394 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_ERR_NOT_SUPPORTED
);

395 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 0);

398 
	}
}

400 
	#SBI_IMPL_ID
 0x999

	)

401 
	#SBI_IMPL_VERSION
 1

	)

403 
	$sysˇŒ_sbi_ba£
(
riscv_t
 *
rv
)

405 c⁄° 
riscv_w‹d_t
 
fid
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a6
);

407 
fid
) {

408 
SBI_BASE_GET_SBI_IMPL_ID
:

409 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

410 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 
SBI_IMPL_ID
);

412 
SBI_BASE_GET_SBI_IMPL_VERSION
:

413 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

414 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 
SBI_IMPL_VERSION
);

416 
SBI_BASE_GET_MVENDORID
:

417 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

418 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
,Ñv->
c§_mvíd‹id
);

420 
SBI_BASE_GET_MARCHID
:

421 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

422 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
,Ñv->
c§_m¨chid
);

424 
SBI_BASE_GET_MIMPID
:

425 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

426 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
,Ñv->
c§_mimpid
);

428 
SBI_BASE_GET_SBI_SPEC_VERSION
:

429 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

430 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, (0 << 24) | 3);

432 
SBI_BASE_PROBE_EXTENSION
: {

433 c⁄° 
riscv_w‹d_t
 
eid
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

434 
boﬁ
 
avaûabÀ
 =

435 
eid
 =
SBI_EID_BASE
 ||Éid =
SBI_EID_TIMER
 ||Éid =
SBI_EID_RST
;

436 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

437 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 
avaûabÀ
);

441 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_ERR_NOT_SUPPORTED
);

442 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 0);

445 
	}
}

447 
	$sysˇŒ_sbi_r°
(
riscv_t
 *
rv
)

449 c⁄° 
riscv_w‹d_t
 
fid
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a6
);

450 c⁄° 
riscv_w‹d_t
 
a0
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

451 c⁄° 
riscv_w‹d_t
 
a1
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

453 
fid
) {

454 
SBI_RST_SYSTEM_RESET
:

455 
	`Ârötf
(
°dîr
, "sy°emÑe£t:Åy≥=%u,Ñós⁄=%u\n", 
a0
, 
a1
);

456 
	`rv_hÆt
(
rv
);

457 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_SUCCESS
);

458 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 0);

461 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a0
, 
SBI_ERR_NOT_SUPPORTED
);

462 
	`rv_£t_ªg
(
rv
, 
rv_ªg_a1
, 0);

465 
	}
}

468 
	$sysˇŒ_h™dÀr
(
riscv_t
 *
rv
)

471 
riscv_w‹d_t
 
sysˇŒ
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a7
);

473 
sysˇŒ
) {

474 
	#_
(
«me
, 
numbî
) \

475 
SYS_
##
«me
: \

476 
sysˇŒ_
##
	`«me
(
rv
); \

477 ;

	)

478 
SUPPORTED_SYSCALLS


479 #unde‡
_


481 
	`Ârötf
(
°dîr
, "unknow¿sysˇŒ %d\n", (Ë
sysˇŒ
);

488 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

489 
©å
->
îr‹
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

490 
	}
}

	@src/syscall_sdl.c

6 #i‡!
RV32_HAS
(
SDL
)

10 
	~<î∫o.h
>

11 
	~<±hªad.h
>

12 
	~<°döt.h
>

13 
	~<°dio.h
>

14 
	~<uni°d.h
>

16 
	~<SDL.h
>

17 
	~<SDL_mixî.h
>

19 
	~"riscv.h
"

20 
	~"riscv_¥iv©e.h
"

28 
	#SAMPLE_RATE
 11025

	)

31 
	#CHANNEL_USED
 2

	)

33 
	#CHUNK_SIZE
 2048

	)

35 
	#MUSIC_MAX_SIZE
 65536

	)

38 
	#SFX_SAMPLE_SIZE
 32768

	)

42 
	mINIT_AUDIO
,

43 
	mSHUTDOWN_AUDIO
,

44 
	mPLAY_MUSIC
,

45 
	mPLAY_SFX
,

46 
	mSET_MUSIC_VOLUME
,

47 
	mSTOP_MUSIC
,

50 
	ssound
 {

51 
uöt8_t
 *
	md©a
;

52 
size_t
 
	msize
;

53 
	mlo›ög
;

54 
	mvﬁume
;

55 } 
	tsound_t
;

58 
±hªad_t
 
	gmusic_thªad
;

59 
uöt8_t
 *
	gmusic_midi_d©a
;

60 
Mix_Music
 *
	gmid
;

63 
±hªad_t
 
	gsfx_thªad
;

64 
Mix_Chunk
 *
	gsfx_chunk
;

65 
uöt8_t
 *
	gsfx_ßm∂es
;

66 
uöt32_t
 
	gƒ_sfx_ßm∂es
;

67 
	gch™
;

70 *
	md©a
;

71 
	msize
;

72 } 
	tmusicöfo_t
;

75 *
	md©a
;

76 
	msize
;

77 } 
	tsfxöfo_t
;

80 
	mKEY_EVENT
 = 0,

81 
	mMOUSE_MOTION_EVENT
 = 1,

82 
	mMOUSE_BUTTON_EVENT
 = 2,

83 
	mQUIT_EVENT
 = 3,

87 
uöt32_t
 
	mkeycode
;

88 
uöt8_t
 
	m°©e
;

89 } 
	tkey_evít_t
;

92 
öt32_t
 
	mx
, 
	my
, 
	mxªl
, 
	myªl
;

93 } 
	tmou£_mŸi⁄_t
;

96 
uöt8_t
 
	mbuâ⁄
;

97 
uöt8_t
 
	m°©e
;

98 } 
	tmou£_buâ⁄_t
;

101 
uöt32_t
 
	mty≥
;

103 
key_evít_t
 
	mkey_evít
;

105 
mou£_mŸi⁄_t
 
	mmŸi⁄
;

106 
mou£_buâ⁄_t
 
	mbuâ⁄
;

107 } 
	mmou£
;

109 } 
	tevít_t
;

112 
uöt32_t
 
	mba£
;

113 
size_t
 
	míd
;

114 } 
	tevít_queue_t
;

117 
	mRELATIVE_MODE_SUBMISSION
 = 0,

118 
	mWINDOW_TITLE_SUBMISSION
 = 1,

122 
uöt8_t
 
	míabÀd
;

123 } 
	tmou£_submissi⁄_t
;

126 
uöt32_t
 
	mtôÀ
;

127 
uöt32_t
 
	msize
;

128 } 
	ttôÀ_submissi⁄_t
;

131 
uöt32_t
 
	mty≥
;

133 
mou£_submissi⁄_t
 
	mmou£
;

134 
tôÀ_submissi⁄_t
 
	mtôÀ
;

136 } 
	tsubmissi⁄_t
;

139 
uöt32_t
 
	mba£
;

140 
size_t
 
	m°¨t
;

141 } 
	tsubmissi⁄_queue_t
;

144 
SDL_Wödow
 *
	gwödow
 = 
NULL
;

145 
SDL_Rídîî
 *
	gªndîî
;

146 
SDL_Textuª
 *
	gãxtuª
;

149 
uöt32_t
 
	gqueues_ˇ∑côy
;

150 
uöt32_t
 
	gevít_cou¡
;

151 
uöt32_t
 
	gde„ºed_submissi⁄s
 = 0;

152 
evít_queue_t
 
	gevít_queue
 = {

153 .
ba£
 = 0,

154 .
	gíd
 = 0,

156 
submissi⁄_queue_t
 
	gsubmissi⁄_queue
 = {

157 .
ba£
 = 0,

158 .
	g°¨t
 = 0,

161 
submissi⁄_t
 
	$submissi⁄_p›
(
riscv_t
 *
rv
)

163 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

164 
submissi⁄_t
 
submissi⁄
;

165 
	`mem‹y_ªad
(

166 
©å
->
mem
, (*Ë&
submissi⁄
,

167 
submissi⁄_queue
.
ba£
 + submissi⁄_queue.
°¨t
 * (
submissi⁄_t
),

168 (
submissi⁄_t
));

169 ++
submissi⁄_queue
.
°¨t
;

170 
submissi⁄_queue
.
°¨t
 &
queues_ˇ∑côy
 - 1;

171  
submissi⁄
;

172 
	}
}

174 
	$evít_push
(
riscv_t
 *
rv
, 
evít_t
 
evít
)

176 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

177 
	`mem‹y_wrôe
(
©å
->
mem
,

178 
evít_queue
.
ba£
 +Évít_queue.
íd
 * (
evít_t
),

179 (*Ë&
evít
, (
evít_t
));

180 ++
evít_queue
.
íd
;

181 
evít_queue
.
íd
 &
queues_ˇ∑côy
 - 1;

183 
uöt32_t
 
cou¡
;

184 
	`mem‹y_ªad
(
©å
->
mem
, (*Ë&
cou¡
, 
evít_cou¡
, (
uöt32_t
));

185 
cou¡
 += 1;

186 
	`mem‹y_wrôe
(
©å
->
mem
, 
evít_cou¡
, (*Ë&
cou¡
, (
uöt32_t
));

187 
	}
}

189 
ölöe
 
uöt32_t
 
	$round_pow2
(
uöt32_t
 
x
)

191 i‡(
x
 <= 1)

193 #i‡
	`deföed
(
__GNUC__
Ë|| deföed(
__˛™g__
)

194 
x
 = 1 << (32 - 
	`__buûtö_˛z
(x - 1));

197 
x
--;

198 
x
 |= x >> 1;

199 
x
 |= x >> 2;

200 
x
 |= x >> 4;

201 
x
 |= x >> 8;

202 
x
 |= x >> 16;

203 
x
++;

205  
x
;

206 
	}
}

208 
sysˇŒ_submô_queue
(
riscv_t
 *
rv
);

211 
boﬁ
 
	$check_sdl
(
riscv_t
 *
rv
, 
width
, 
height
)

213 i‡(!
wödow
) {

214 i‡(
	`SDL_Inô
(
SDL_INIT_VIDEO
 | 
SDL_INIT_AUDIO
) != 0) {

215 
	`Ârötf
(
°dîr
, "FailedÅo call SDL_Init()\n");

216 
	`exô
(1);

218 
wödow
 = 
	`SDL_Cª©eWödow
("rv32emu", 
SDL_WINDOWPOS_UNDEFINED
,

219 
SDL_WINDOWPOS_UNDEFINED
, 
width
, 
height
,

220 
SDL_WINDOW_RESIZABLE
);

221 i‡(!
wödow
) {

222 
	`Ârötf
(
°dîr
, "Window couldÇot be created! SDL_Error: %s\n",

223 
	`SDL_GëEº‹
());

224 
	`exô
(1);

227 
ªndîî
 = 
	`SDL_Cª©eRídîî
(
wödow
, -1, 
SDL_RENDERER_PRESENTVSYNC
);

228 
ãxtuª
 = 
	`SDL_Cª©eTextuª
(
ªndîî
, 
SDL_PIXELFORMAT_ARGB8888
,

229 
SDL_TEXTUREACCESS_STREAMING
, 
width
, 
height
);

231 i‡(
de„ºed_submissi⁄s
) {

232 
	`sysˇŒ_submô_queue
(
rv
);

233 
de„ºed_submissi⁄s
 = 0;

237 
SDL_Evít
 
evít
;

238 
	`SDL_PﬁlEvít
(&
evít
)) {

239 
evít
.
ty≥
) {

240 
SDL_QUIT
: {

241 
evít_t
 
√w_evít
 = {

242 .
ty≥
 = 
QUIT_EVENT
,

244 
	`evít_push
(
rv
, 
√w_evít
);

245  
Ál£
;

247 
SDL_KEYDOWN
:

248 
SDL_KEYUP
: {

249 i‡(
evít
.
key
.
ª≥©
)

251 
evít_t
 
√w_evít
 = {

252 .
ty≥
 = 
KEY_EVENT
,

254 
key_evít_t
 
key_evít
 = {

255 .
keycode
 = 
evít
.
key
.
keysym
.
sym
,

256 .
°©e
 = (
boﬁ
Ë(
evít
.
key
.°©ê=
SDL_PRESSED
),

258 
	`mem˝y
(&
√w_evít
.
key_evít
, &key_event, (key_event));

259 
	`evít_push
(
rv
, 
√w_evít
);

262 
SDL_MOUSEMOTION
: {

263 
evít_t
 
√w_evít
 = {

264 .
ty≥
 = 
MOUSE_MOTION_EVENT
,

266 
mou£_mŸi⁄_t
 
mou£_mŸi⁄
 = {

267 .
x
 = 
evít
.
mŸi⁄
.x,

268 .
y
 = 
evít
.
mŸi⁄
.y,

269 .
xªl
 = 
evít
.
mŸi⁄
.xrel,

270 .
yªl
 = 
evít
.
mŸi⁄
.yrel,

272 
	`mem˝y
(&
√w_evít
.
mou£
.
mŸi⁄
, &
mou£_mŸi⁄
,

273 (
mou£_mŸi⁄
));

274 
	`evít_push
(
rv
, 
√w_evít
);

277 
SDL_MOUSEBUTTONDOWN
:

278 
SDL_MOUSEBUTTONUP
: {

279 
evít_t
 
√w_evít
 = {

280 .
ty≥
 = 
MOUSE_BUTTON_EVENT
,

282 
mou£_buâ⁄_t
 
mou£_buâ⁄
 = {

283 .
buâ⁄
 = 
evít
.button.button,

284 .
°©e
 = (
boﬁ
Ë(
evít
.
buâ⁄
.°©ê=
SDL_PRESSED
),

286 
	`mem˝y
(&
√w_evít
.
mou£
.
buâ⁄
, &
mou£_buâ⁄
,

287 (
mou£_buâ⁄
));

288 
	`evít_push
(
rv
, 
√w_evít
);

295  
åue
;

296 
	}
}

298 
	$sysˇŒ_døw_‰ame
(
riscv_t
 *
rv
)

300 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

303 c⁄° 
uöt32_t
 
s¸ìn
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

304 c⁄° 
width
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

305 c⁄° 
height
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
);

307 i‡(!
	`check_sdl
(
rv
, 
width
, 
height
))

311 
pôch
 = 0;

312 *
pixñs_±r
;

313 i‡(
	`SDL_LockTextuª
(
ãxtuª
, 
NULL
, &
pixñs_±r
, &
pôch
))

314 
	`exô
(-1);

315 
	`mem‹y_ªad
(
©å
->
mem
, 
pixñs_±r
, 
s¸ìn
, 
width
 * 
height
 * 4);

316 
	`SDL_U∆ockTextuª
(
ãxtuª
);

318 
a˘uÆ_width
, 
a˘uÆ_height
;

319 
	`SDL_GëWödowSize
(
wödow
, &
a˘uÆ_width
, &
a˘uÆ_height
);

320 
	`SDL_RídîC›y
(
ªndîî
, 
ãxtuª
, 
NULL
,

321 &(
SDL_Re˘
){0, 0, 
a˘uÆ_width
, 
a˘uÆ_height
});

322 
	`SDL_RídîPª£¡
(
ªndîî
);

323 
	}
}

325 
	$sysˇŒ_£tup_queue
(
riscv_t
 *
rv
)

328 
uöt32_t
 
ba£
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

329 
queues_ˇ∑côy
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

330 
evít_cou¡
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
);

332 
evít_queue
.
ba£
 = base;

333 
submissi⁄_queue
.
ba£
 = ba£ + (
evít_t
Ë* 
queues_ˇ∑côy
;

334 
queues_ˇ∑côy
 = 
	`round_pow2
(queues_capacity);

335 
	}
}

337 
	$sysˇŒ_submô_queue
(
riscv_t
 *
rv
)

340 
uöt32_t
 
cou¡
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

342 i‡(!
wödow
) {

343 
de„ºed_submissi⁄s
 +
cou¡
;

347 i‡(
de„ºed_submissi⁄s
)

348 
cou¡
 = 
de„ºed_submissi⁄s
;

350 
cou¡
--) {

351 
submissi⁄_t
 
submissi⁄
 = 
	`submissi⁄_p›
(
rv
);

353 *
tôÀ
;

354 
submissi⁄
.
ty≥
) {

355 
RELATIVE_MODE_SUBMISSION
:

356 
	`SDL_SëRñ©iveMou£Mode
(
submissi⁄
.
mou£
.
íabÀd
);

358 
WINDOW_TITLE_SUBMISSION
:

359 
tôÀ
 = 
	`mÆloc
(
submissi⁄
.tôÀ.
size
 + 1);

360 i‡(
	`u∆ikñy
(!
tôÀ
))

363 
	`mem‹y_ªad
(
	`PRIV
(
rv
)->
mem
, (
uöt8_t
 *Ë
tôÀ
,

364 
submissi⁄
.
tôÀ
.tôÀ, submissi⁄.tôÀ.
size
);

365 
tôÀ
[
submissi⁄
.tôÀ.
size
] = 0;

367 
	`SDL_SëWödowTôÀ
(
wödow
, 
tôÀ
);

368 
	`‰ì
(
tôÀ
);

372 
	}
}

400 
PACKED
(struct {

401 
id
[4];

402 
uöt16_t
 
sc‹e_Àn
;

403 
uöt16_t
 
sc‹e_°¨t
;

404 }Ë
	tmus_hódî_t
;

406 
PACKED
(struct {

407 
id
[4];

408 
Àngth
;

409 
uöt16_t
 
ty≥
;

410 
uöt16_t
 
¡øcks
;

411 
uöt16_t
 
ticks
;

412 }Ë
	tmidi_hódî_t
;

414 c⁄° 
	gmagic_mus
[4] = {

420 c⁄° 
	gmagic_midi
[4] = {

426 c⁄° 
	gmagic_åack
[4] = {

432 c⁄° 
uöt8_t
 
	gmagic_íd_of_åack
[4] = {

439 c⁄° 
	gc⁄åﬁÀr_m≠
[16] = {

443 
uöt8_t
 *
	gmidi_d©a
;

444 
	gmidi_size
;

446 
uöt8_t
 *
	gmus_pos
;

447 
	gmus_íd_of_åack
;

449 
uöt8_t
 
	gdñè_byãs
[4];

450 
	gdñè_˙t
;

453 
uöt8_t
 
	gmus_ch™√l
[16];

456 
	$c⁄vît
()

458 
uöt8_t
 
d©a
, 
œ°
, 
ch™√l
;

459 
uöt8_t
 
evít
[3] = {0};

460 
cou¡
 = 0;

461 
uöt8_t
 *
midi_d©a_tmp
;

463 
d©a
 = *
mus_pos
++;

464 
œ°
 = 
d©a
 & 0x80;

465 
ch™√l
 = 
d©a
 & 0xf;

467 
d©a
 & 0x70) {

469 
evít
[0] = 0x80;

470 
evít
[1] = *
mus_pos
++ & 0x7f;

471 
evít
[2] = 
mus_ch™√l
[
ch™√l
];

472 
cou¡
 = 3;

476 
evít
[0] = 0x90;

477 
d©a
 = *
mus_pos
++;

478 
evít
[1] = 
d©a
 & 0x7f;

479 
evít
[2] = 
d©a
 & 0x80 ? *
mus_pos
++ : 
mus_ch™√l
[
ch™√l
];

480 
mus_ch™√l
[
ch™√l
] = 
evít
[2];

481 
cou¡
 = 3;

485 
evít
[0] = 0xe0;

486 
evít
[1] = (*
mus_pos
 & 0x01) << 6;

487 
evít
[2] = *
mus_pos
++ >> 1;

488 
cou¡
 = 3;

492 
evít
[0] = 0xb0;

493 
evít
[1] = 
c⁄åﬁÀr_m≠
[*
mus_pos
++ & 0xf];

494 
evít
[2] = 0x7f;

495 
cou¡
 = 3;

499 
d©a
 = *
mus_pos
++;

500 i‡(
d©a
 == 0) {

501 
evít
[0] = 0xc0;

502 
evít
[1] = *
mus_pos
++;

503 
cou¡
 = 2;

506 
evít
[0] = 0xb0;

507 
evít
[1] = 
c⁄åﬁÀr_m≠
[
d©a
 & 0xf];

508 
evít
[2] = *
mus_pos
++;

509 
cou¡
 = 3;

516 
mus_íd_of_åack
 = 1;

520 
mus_pos
++;

524 i‡(
ch™√l
 == 9)

525 
ch™√l
 = 15;

526 i‡(
ch™√l
 == 15)

527 
ch™√l
 = 9;

529 
evít
[0] |
ch™√l
;

531 
midi_d©a_tmp
 = 
	`ªÆloc
(
midi_d©a
, 
midi_size
 + 
dñè_˙t
 + 
cou¡
);

532 i‡(
	`u∆ikñy
(!
midi_d©a_tmp
)) {

533 
	`‰ì
(
midi_d©a
);

534  -
ENOMEM
;

536 
midi_d©a
 = 
midi_d©a_tmp
;

538 
	`mem˝y
(
midi_d©a
 + 
midi_size
, &
dñè_byãs
, 
dñè_˙t
);

539 
midi_size
 +
dñè_˙t
;

540 
	`mem˝y
(
midi_d©a
 + 
midi_size
, &
evít
, 
cou¡
);

541 
midi_size
 +
cou¡
;

543 i‡(
œ°
) {

544 
dñè_˙t
 = 0;

546 
d©a
 = *
mus_pos
++;

547 
dñè_byãs
[
dñè_˙t
] = 
d©a
;

548 
dñè_˙t
++;

549 } 
d©a
 & 128);

551 
dñè_byãs
[0] = 0;

552 
dñè_˙t
 = 1;

556 
	}
}

558 
uöt8_t
 *
	$mus2midi
(
uöt8_t
 *
d©a
, *
Àngth
)

560 
mus_hódî_t
 *
mus_hdr
 = (mus_hódî_à*Ë
d©a
;

561 
midi_hódî_t
 
midi_hdr
;

562 
uöt8_t
 *
mid_åack_Àn
;

563 
åack_Àn
;

564 
uöt8_t
 *
midi_d©a_tmp
;

566 i‡(
	`°∫cmp
(
mus_hdr
->
id
, 
magic_mus
, 4))

567  
NULL
;

569 i‡(*
Àngth
 !
mus_hdr
->
sc‹e_°¨t
 + mus_hdr->
sc‹e_Àn
)

570  
NULL
;

572 
midi_size
 = (
midi_hódî_t
);

573 
	`mem˝y
(
midi_hdr
.
id
, 
magic_midi
, 4);

574 
midi_hdr
.
Àngth
 = 
	`bsw≠32
(6);

575 
midi_hdr
.
ty≥
 = 
	`bsw≠16
(0);

576 
midi_hdr
.
¡øcks
 = 
	`bsw≠16
(1);

578 
midi_hdr
.
ticks
 =

579 
	`bsw≠16
(70);

580 
midi_d©a
 = 
	`mÆloc
(
midi_size
);

581 i‡(
	`u∆ikñy
(!
midi_d©a
))

582  
NULL
;

583 
	`mem˝y
(
midi_d©a
, &
midi_hdr
, 
midi_size
);

585 
midi_d©a_tmp
 = 
	`ªÆloc
(
midi_d©a
, 
midi_size
 + 8);

586 i‡(
	`u∆ikñy
(!
midi_d©a_tmp
)) {

587 
	`‰ì
(
midi_d©a
);

588  
NULL
;

590 
midi_d©a
 = 
midi_d©a_tmp
;

591 
	`mem˝y
(
midi_d©a
 + 
midi_size
, 
magic_åack
, 4);

592 
midi_size
 += 4;

593 
mid_åack_Àn
 = 
midi_d©a
 + 
midi_size
;

594 
midi_size
 += 4;

596 
åack_Àn
 = 0;

598 
mus_pos
 = 
d©a
 + 
mus_hdr
->
sc‹e_°¨t
;

599 
mus_íd_of_åack
 = 0;

600 
dñè_byãs
[0] = 0;

601 
dñè_˙t
 = 1;

603 
i
 = 0; i < 16; i++)

604 
mus_ch™√l
[
i
] = 0;

606 !
mus_íd_of_åack
)

607 i‡(
	`u∆ikñy
(
	`c⁄vît
() < 0))

608  
NULL
;

611 
midi_d©a_tmp
 = 
	`ªÆloc
(
midi_d©a
, 
midi_size
 + 
dñè_˙t
);

612 i‡(
	`u∆ikñy
(!
midi_d©a_tmp
)) {

613 
	`‰ì
(
midi_d©a
);

614  
NULL
;

616 
midi_d©a
 = 
midi_d©a_tmp
;

617 
	`mem˝y
(
midi_d©a
 + 
midi_size
, &
dñè_byãs
, 
dñè_˙t
);

618 
midi_size
 +
dñè_˙t
;

620 
midi_d©a_tmp
 = 
	`ªÆloc
(
midi_d©a
, 
midi_size
 + 3);

621 i‡(
	`u∆ikñy
(!
midi_d©a_tmp
)) {

622 
	`‰ì
(
midi_d©a
);

623  
NULL
;

625 
midi_d©a
 = 
midi_d©a_tmp
;

626 
	`mem˝y
(
midi_d©a
 + 
midi_size
, 
magic_íd_of_åack
 + 1, 3);

627 
midi_size
 += 3;

629 
åack_Àn
 = 
	`bsw≠32
(
midi_size
 - (
midi_hódî_t
) - 8);

630 
	`mem˝y
(
mid_åack_Àn
, &
åack_Àn
, 4);

632 *
Àngth
 = 
midi_size
;

634  
midi_d©a
;

635 
	}
}

637 *
	$sfx_h™dÀr
(*
¨g
)

639 
sound_t
 *
sfx
 = (sound_à*Ë
¨g
;

640 
uöt8_t
 *
±r
 = 
sfx
->
d©a
;

642 i‡(*
±r
 & 0x3) {

643 
±r
 += 2;

644 
±r
 += 2;

645 
ƒ_sfx_ßm∂es
 = *(
uöt32_t
 *Ë
±r
;

646 
±r
 += 4;

647 
±r
 += 4;

649 
±r
 += 44;

650 
ƒ_sfx_ßm∂es
 = 
sfx
->
size
 - 44;

653 
	`mem˝y
(
sfx_ßm∂es
, 
±r
, (
uöt8_t
Ë* 
ƒ_sfx_ßm∂es
);

654 
sfx_chunk
 = 
	`Mix_QuickLﬂd_RAW
(
sfx_ßm∂es
, 
ƒ_sfx_ßm∂es
);

655 i‡(!
sfx_chunk
)

656  
NULL
;

658 
ch™
 = 
	`Mix_PœyCh™√l
(-1, 
sfx_chunk
, 0);

659 i‡(
ch™
 == -1)

660  
NULL
;

662 i‡(*
±r
 & 0x3) {

664 
	`Mix_Vﬁume
(
ch™
, 
sfx
->
vﬁume
 * 8);

669 
	`Mix_Vﬁume
(
ch™
, (
sfx
->
vﬁume
 + 1) % 128);

672  
NULL
;

673 
	}
}

675 *
	$music_h™dÀr
(*
¨g
)

677 
sound_t
 *
music
 = (sound_à*Ë
¨g
;

678 
lo›ög
 = 
music
->looping ? -1 : 1;

680 
	`‰ì
(
music_midi_d©a
);

682 
music_midi_d©a
 = 
	`mus2midi
(
music
->
d©a
, (*Ë&music->
size
);

683 i‡(!
music_midi_d©a
) {

684 
	`Ârötf
(
°dîr
, "mus2midi failed\n");

685  
NULL
;

688 
SDL_RW›s
 *
rw›s
 = 
	`SDL_RWFromMem
(
music_midi_d©a
, 
music
->
size
);

689 i‡(!
rw›s
) {

690 
	`Ârötf
(
°dîr
, "SDL_RWFromMem faûed: %s\n", 
	`SDL_GëEº‹
());

691  
NULL
;

694 
mid
 = 
	`Mix_LﬂdMUSTy≥_RW
(
rw›s
, 
MUS_MID
, 
SDL_TRUE
);

695 i‡(!
mid
) {

696 
	`Ârötf
(
°dîr
, "Mix_LﬂdMUSTy≥_RW faûed: %s\n", 
	`Mix_GëEº‹
());

697  
NULL
;

703 
	`Mix_VﬁumeMusic
(
music
->
vﬁume
 * 8);

705 i‡(
	`Mix_PœyMusic
(
mid
, 
lo›ög
) == -1) {

706 
	`Ârötf
(
°dîr
, "Mix_PœyMusi¯Áûed: %s\n", 
	`Mix_GëEº‹
());

707  
NULL
;

710  
NULL
;

711 
	}
}

713 
	$∂ay_sfx
(
riscv_t
 *
rv
)

715 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

717 c⁄° 
uöt32_t
 
sfxöfo_addr
 = (uöt32_tË
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

718 
vﬁume
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
);

720 
sfxöfo_t
 
sfxöfo
;

721 
	`mem‹y_ªad
(
©å
->
mem
, (
uöt8_t
 *Ë&
sfxöfo
, 
sfxöfo_addr
,

722 (
sfxöfo_t
));

728 
uöt32_t
 
sfx_d©a_off£t
 = *((uöt32_à*Ë&
sfxöfo
);

729 
uöt32_t
 
sfx_d©a_size
 = *(uöt32_à*Ë((uöt32_à*Ë&
sfxöfo
 + 1);

730 
uöt8_t
 
sfx_d©a
[
SFX_SAMPLE_SIZE
];

731 
	`mem‹y_ªad
(
©å
->
mem
, 
sfx_d©a
, 
sfx_d©a_off£t
,

732 (
uöt8_t
Ë* 
sfx_d©a_size
);

734 
sound_t
 
sfx
 = {

735 .
d©a
 = 
sfx_d©a
,

736 .
size
 = 
sfx_d©a_size
,

737 .
vﬁume
 = volume,

739 
	`±hªad_¸óã
(&
sfx_thªad
, 
NULL
, 
sfx_h™dÀr
, &
sfx
);

743 #ifde‡
__EMSCRIPTEN__


744 
	`±hªad_joö
(
sfx_thªad
, 
NULL
);

746 
	}
}

748 
	$∂ay_music
(
riscv_t
 *
rv
)

750 
vm_©å_t
 *
©å
 = 
	`PRIV
(
rv
);

752 c⁄° 
uöt32_t
 
musicöfo_addr
 = (uöt32_tË
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

753 
vﬁume
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a2
);

754 
lo›ög
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a3
);

756 
musicöfo_t
 
musicöfo
;

757 
	`mem‹y_ªad
(
©å
->
mem
, (
uöt8_t
 *Ë&
musicöfo
, 
musicöfo_addr
,

758 (
musicöfo_t
));

764 
uöt32_t
 
music_d©a_off£t
 = *((uöt32_à*Ë&
musicöfo
);

765 
uöt32_t
 
music_d©a_size
 = *(uöt32_à*Ë((uöt32_à*Ë&
musicöfo
 + 1);

766 
uöt8_t
 
music_d©a
[
MUSIC_MAX_SIZE
];

767 
	`mem‹y_ªad
(
©å
->
mem
, 
music_d©a
, 
music_d©a_off£t
, 
music_d©a_size
);

769 
sound_t
 
music
 = {

770 .
d©a
 = 
music_d©a
,

771 .
size
 = 
music_d©a_size
,

772 .
lo›ög
 =Üooping,

773 .
vﬁume
 = volume,

775 
	`±hªad_¸óã
(&
music_thªad
, 
NULL
, 
music_h™dÀr
, &
music
);

779 #ifde‡
__EMSCRIPTEN__


780 
	`±hªad_joö
(
music_thªad
, 
NULL
);

782 
	}
}

784 
	$°›_music
(
riscv_t
 *
rv
 
UNUSED
)

786 i‡(
	`Mix_PœyögMusic
())

787 
	`Mix_HÆtMusic
();

788 
	}
}

790 
	$£t_music_vﬁume
(
riscv_t
 *
rv
)

792 
vﬁume
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a1
);

795 
	`Mix_VﬁumeMusic
(
vﬁume
 * 8);

796 
	}
}

798 
	$öô_audio
()

800 i‡(!(
	`SDL_WasInô
(-1Ë& 
SDL_INIT_AUDIO
)) {

801 i‡(
	`SDL_Inô
(
SDL_INIT_AUDIO
) != 0) {

802 
	`Ârötf
(
°dîr
, "FailedÅo call SDL_Init()\n");

803 
	`exô
(1);

808 
sfx_ßm∂es
 = 
	`mÆloc
(
SFX_SAMPLE_SIZE
);

809 i‡(
	`u∆ikñy
(!
sfx_ßm∂es
)) {

810 
	`Ârötf
(
°dîr
, "FailedÅoállocate memory for buffer\n");

811 
	`exô
(1);

815 i‡(
	`Mix_Inô
(
MIX_INIT_MID
) != MIX_INIT_MID) {

816 
	`Ârötf
(
°dîr
, "Mix_Inô faûed: %s\n", 
	`Mix_GëEº‹
());

817 
	`exô
(1);

819 i‡(
	`Mix_O≥nAudio
(
SAMPLE_RATE
, 
AUDIO_U8
, 
CHANNEL_USED
, 
CHUNK_SIZE
) == -1) {

820 
	`Ârötf
(
°dîr
, "Mix_O≥nAudiÿÁûed: %s\n", 
	`Mix_GëEº‹
());

821 
	`Mix_Quô
();

822 
	`exô
(1);

824 
	}
}

826 
	$shutdown_audio
(
riscv_t
 *
rv
)

828 
	`°›_music
(
rv
);

829 
	`Mix_HÆtCh™√l
(-1);

830 
	`Mix_Clo£Audio
();

831 
	`Mix_Quô
();

832 
	`‰ì
(
music_midi_d©a
);

833 
	`‰ì
(
sfx_ßm∂es
);

834 
	}
}

836 
	$sysˇŒ_£tup_audio
(
riscv_t
 *
rv
)

839 c⁄° 
ªque°
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

841 
ªque°
) {

842 
INIT_AUDIO
:

843 
	`öô_audio
();

845 
SHUTDOWN_AUDIO
:

846 
	`shutdown_audio
(
rv
);

849 
	`Ârötf
(
°dîr
, "unknown soundÑequest\n");

852 
	}
}

854 
	$sysˇŒ_c⁄åﬁ_audio
(
riscv_t
 *
rv
)

857 c⁄° 
ªque°
 = 
	`rv_gë_ªg
(
rv
, 
rv_ªg_a0
);

859 
ªque°
) {

860 
PLAY_MUSIC
:

861 
	`∂ay_music
(
rv
);

863 
PLAY_SFX
:

864 
	`∂ay_sfx
(
rv
);

866 
SET_MUSIC_VOLUME
:

867 
	`£t_music_vﬁume
(
rv
);

869 
STOP_MUSIC
:

870 
	`°›_music
(
rv
);

873 
	`Ârötf
(
°dîr
, "unknown sound controlÑequest\n");

876 
	}
}

	@src/t2c.c

6 
	~<Œvm-c/A«lysis.h
>

7 
	~<Œvm-c/BôWrôî.h
>

8 
	~<Œvm-c/C‹e.h
>

9 
	~<Œvm-c/Executi⁄Engöe.h
>

10 
	~<Œvm-c/T¨gë.h
>

11 
	~<Œvm-c/Tønsf‹ms/PassBuûdî.h
>

12 
	~<°dlib.h
>

14 
	~"jô.h
"

15 
	~"riscv_¥iv©e.h
"

17 
	#MAX_BLOCKS
 8152

	)

19 
	sLLVM_block_m≠_íåy
 {

20 
uöt32_t
 
	mpc
;

21 
LLVMBasicBlockRef
 
	mblock
;

24 
	sLLVM_block_m≠
 {

25 
uöt32_t
 
	mcou¡
;

26 
LLVM_block_m≠_íåy
 
	mm≠
[
MAX_BLOCKS
];

29 
FORCE_INLINE
 
	$t2c_block_m≠_ö£π
(
LLVM_block_m≠
 *
m≠
,

30 
LLVMBasicBlockRef
 *
íåy
,

31 
uöt32_t
 
pc
)

33 
LLVM_block_m≠_íåy
 
m≠_íåy
 = {

34 .
block
 = *
íåy
,

35 .
pc
 =Öc,

37 
m≠
->m≠[m≠->
cou¡
++] = 
m≠_íåy
;

39 
	}
}

41 
FORCE_INLINE
 
LLVMBasicBlockRef
 
	$t2c_block_m≠_£¨ch
(
LLVM_block_m≠
 *
m≠
,

42 
uöt32_t
 
pc
)

44 
uöt32_t
 
i
 = 0; i < 
m≠
->
cou¡
; i++) {

45 i‡(
m≠
->m≠[
i
].
pc
 ==Öc) {

46  
m≠
->m≠[
i
].
block
;

49  
NULL
;

50 
	}
}

52 
	#T2C_OP
(
ö°
, 
code
) \

53 
t2c_
##
	`ö°
( \

54 
LLVMBuûdîRef
 *
buûdî
 
UNUSED
, 
LLVMTy≥Ref
 *
∑øm_ty≥s
 UNUSED, \

55 
LLVMVÆueRef
 
°¨t
 
UNUSED
, 
LLVMBasicBlockRef
 *
íåy
 UNUSED, \

56 
LLVMBuûdîRef
 *
èkí_buûdî
 
UNUSED
, \

57 
LLVMBuûdîRef
 *
u¡akí_buûdî
 
UNUSED
, 
uöt64_t
 
mem_ba£
 UNUSED, \

58 
rv_ö¢_t
 *
ú
 
UNUSED
) \

60 
code
; \

61 }

	)

63 
	#T2C_LLVM_GEN_ADDR
(
ªg
, 
rv_membî
, 
ú_membî
) \

64 
FORCE_INLINE
 
LLVMVÆueRef
 
t2c_gí_
##
ªg
##
	`_addr
( \

65 
LLVMVÆueRef
 
°¨t
, 
LLVMBuûdîRef
 *
buûdî
, 
UNUSED
 
rv_ö¢_t
 *
ú
) \

67 
LLVMVÆueRef
 
off£t
 = 
	`LLVMC⁄°I¡
( \

68 
	`LLVMI¡32Ty≥
(), \

69 
	`off£tof
(
riscv_t
, 
rv_membî
Ë/ (Ë+ 
ú_membî
, 
åue
); \

70  
	`LLVMBuûdInBoundsGEP2
(*
buûdî
, 
	`LLVMI¡32Ty≥
(), \

71 
	`LLVMGëP¨am
(
°¨t
, 0), &
off£t
, 1, ""); \

72 }

	)

74 
T2C_LLVM_GEN_ADDR
(
rs1
, 
X
, 
ú
->rs1);

75 
T2C_LLVM_GEN_ADDR
(
rs2
, 
X
, 
ú
->rs2);

76 
T2C_LLVM_GEN_ADDR
(
rd
, 
X
, 
ú
->rd);

77 
T2C_LLVM_GEN_ADDR
(
ø
, 
X
, 
rv_ªg_ø
);

78 
T2C_LLVM_GEN_ADDR
(
•
, 
X
, 
rv_ªg_•
);

79 
T2C_LLVM_GEN_ADDR
(
PC
, PC, 0);

81 
	#T2C_LLVM_GEN_STORE_IMM32
(
buûdî
, 
vÆ
, 
addr
) \

82 
	`LLVMBuûdSt‹e
(
buûdî
, 
	`LLVMC⁄°I¡
(
	`LLVMI¡32Ty≥
(), 
vÆ
, 
åue
), 
addr
)

	)

84 
	#T2C_LLVM_GEN_LOAD_VMREG
(
ªg
, 
size
, 
addr
) \

85 
LLVMVÆueRef
 
vÆ_
##
ªg
 = \

86 
	`LLVMBuûdLﬂd2
(*
buûdî
, 
LLVMI¡
##
size
##
	`Ty≥
(), 
addr
, "");

	)

88 
	#T2C_LLVM_GEN_ALU32_IMM
(
›
, 
d°
, 
imm
) \

89 
LLVMBuûd
##
	`›
(*
buûdî
, 
d°
, 
	`LLVMC⁄°I¡
(
	`LLVMI¡32Ty≥
(), 
imm
, 
åue
), "")

	)

91 
	#T2C_LLVM_GEN_ALU64_IMM
(
›
, 
d°
, 
imm
) \

92 
LLVMBuûd
##
	`›
(*
buûdî
, 
d°
, 
	`LLVMC⁄°I¡
(
	`LLVMI¡64Ty≥
(), 
imm
, 
åue
), "")

	)

94 
	#T2C_LLVM_GEN_CMP
(
c⁄d
, 
rs1
, 
rs2
) \

95 
LLVMVÆueRef
 
cmp
 = 
	`LLVMBuûdICmp
(*
buûdî
, 
LLVMI¡
##
c⁄d
, 
rs1
, 
rs2
, "")

	)

97 
	#T2C_LLVM_GEN_CMP_IMM32
(
c⁄d
, 
rs1
, 
imm
) \

98 
LLVMVÆueRef
 
cmp
 = \

99 
	`LLVMBuûdICmp
(*
buûdî
, 
LLVMI¡
##
c⁄d
, 
rs1
, \

100 
	`LLVMC⁄°I¡
(
	`LLVMI¡32Ty≥
(), 
imm
, 
Ál£
), "")

	)

102 
FORCE_INLINE
 
LLVMVÆueRef
 
	$t2c_gí_mem_loc
(
LLVMVÆueRef
 
°¨t
,

103 
LLVMBuûdîRef
 *
buûdî
,

104 
UNUSED
 
rv_ö¢_t
 *
ú
,

105 
uöt64_t
 
mem_ba£
)

107 
LLVMVÆueRef
 
vÆ_rs1
 =

108 
	`LLVMBuûdZExt
(*
buûdî
,

109 
	`LLVMBuûdLﬂd2
(*
buûdî
, 
	`LLVMI¡32Ty≥
(),

110 
	`t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
), ""),

111 
	`LLVMI¡64Ty≥
(), "");

112 
LLVMVÆueRef
 
addr
 =

113 
	`T2C_LLVM_GEN_ALU64_IMM
(
Add
, 
vÆ_rs1
, 
ú
->
imm
 + 
mem_ba£
);

114 
addr
 = 
	`LLVMBuûdI¡ToPå
(*
buûdî
,áddr,

115 
	`LLVMPoöãrTy≥
(
	`LLVMI¡32Ty≥
(), 0), "");

116  
addr
;

117 
	}
}

119 
FORCE_INLINE
 
	$t2c_gí_ˇŒ_io_func
(
LLVMVÆueRef
 
°¨t
,

120 
LLVMBuûdîRef
 *
buûdî
,

121 
LLVMTy≥Ref
 *
∑øm_ty≥s
,

122 
off£t
)

124 
LLVMVÆueRef
 
func_off£t
 = 
	`LLVMC⁄°I¡
(
	`LLVMI¡32Ty≥
(), 
off£t
, 
åue
);

125 
LLVMVÆueRef
 
addr_io_func
 = 
	`LLVMBuûdInBoundsGEP2
(

126 *
buûdî
, 
	`LLVMPoöãrTy≥
(
	`LLVMVoidTy≥
(), 0), 
	`LLVMGëP¨am
(
°¨t
, 0),

127 &
func_off£t
, 1, "addr_io_func");

128 
LLVMVÆueRef
 
io_func
 = 
	`LLVMBuûdLﬂd2
(

129 *
buûdî
,

130 
	`LLVMPoöãrTy≥
(
	`LLVMFun˘i⁄Ty≥
(
	`LLVMVoidTy≥
(), 
∑øm_ty≥s
, 1, 0), 0),

131 
addr_io_func
, "io_func");

132 
LLVMVÆueRef
 
io_∑øm
 = 
	`LLVMGëP¨am
(
°¨t
, 0);

133 
	`LLVMBuûdCÆl2
(*
buûdî
,

134 
	`LLVMFun˘i⁄Ty≥
(
	`LLVMVoidTy≥
(), 
∑øm_ty≥s
, 1, 0), 
io_func
,

135 &
io_∑øm
, 1, "");

136 
	}
}

138 
	~"t2c_ãm∂©e.c
"

139 #unde‡
T2C_OP


141 c⁄° *
	gdi•©ch_èbÀ
[] = {

143 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
) \

144 [
rv_ö¢_
##
ö°
] = 
t2c_
##ö°,

	)

145 
RV_INSN_LIST


146 #unde‡
_


148 
	#_
(
ö°
Ë[
rv_ö¢_
##ö°] = 
t2c_
##ö°,

	)

149 
FUSE_INSN_LIST


150 #unde‡
_


153 
FORCE_INLINE
 
boﬁ
 
	$t2c_ö¢_is_ãrmöÆ
(
uöt8_t
 
›code
)

155 
›code
) {

156 
rv_ö¢_eˇŒ
:

157 
rv_ö¢_ebªak
:

158 
rv_ö¢_jÆr
:

159 
rv_ö¢_§ë
:

160 
rv_ö¢_mªt
:

161 #i‡
	`RV32_HAS
(
EXT_C
)

162 
rv_ö¢_cjÆr
:

163 
rv_ö¢_cjr
:

164 
rv_ö¢_˚bªak
:

166  
åue
;

168  
Ál£
;

169 
	}
}

171 (*
	tt2c_codegí_block_func_t
)(
	tLLVMBuûdîRef
 *
	tbuûdî
 
	tUNUSED
,

172 
	tLLVMTy≥Ref
 *
	t∑øm_ty≥s
 
	tUNUSED
,

173 
	tLLVMVÆueRef
 
	t°¨t
 
	tUNUSED
,

174 
	tLLVMBasicBlockRef
 *
	tíåy
 
	tUNUSED
,

175 
	tLLVMBuûdîRef
 *
	tèkí_buûdî
 
	tUNUSED
,

176 
	tLLVMBuûdîRef
 *
	tu¡akí_buûdî
 
	tUNUSED
,

177 
	tuöt64_t
 
	tmem_ba£
 
	tUNUSED
,

178 
	trv_ö¢_t
 *
	tú
 
	tUNUSED
);

180 
	$t2c_åa˚_ebb
(
LLVMBuûdîRef
 *
buûdî
,

181 
LLVMTy≥Ref
 *
∑øm_ty≥s
 
UNUSED
,

182 
LLVMVÆueRef
 
°¨t
,

183 
LLVMBasicBlockRef
 *
íåy
,

184 
uöt64_t
 
mem_ba£
,

185 
rv_ö¢_t
 *
ú
,

186 
£t_t
 *
£t
,

187 
LLVM_block_m≠
 *
m≠
)

189 i‡(
	`£t_has
(
£t
, 
ú
->
pc
))

191 
	`£t_add
(
£t
, 
ú
->
pc
);

192 
	`t2c_block_m≠_ö£π
(
m≠
, 
íåy
, 
ú
->
pc
);

193 
LLVMBuûdîRef
 
tk
, 
utk
;

196 ((
t2c_codegí_block_func_t
Ë
di•©ch_èbÀ
[
ú
->
›code
])(

197 
buûdî
, 
∑øm_ty≥s
, 
°¨t
, 
íåy
, &
tk
, &
utk
, 
mem_ba£
, 
ú
);

198 i‡(!
ú
->
√xt
)

200 
ú
 = ir->
√xt
;

203 i‡(!
	`t2c_ö¢_is_ãrmöÆ
(
ú
->
›code
)) {

204 i‡(
ú
->
bønch_u¡akí
) {

205 i‡(
	`£t_has
(
£t
, 
ú
->
bønch_u¡akí
->
pc
))

206 
	`LLVMBuûdBr
(
utk
,

207 
	`t2c_block_m≠_£¨ch
(
m≠
, 
ú
->
bønch_u¡akí
->
pc
));

209 
LLVMBasicBlockRef
 
u¡akí_íåy
 =

210 
	`LLVMAµídBasicBlock
(
°¨t
,

213 
LLVMBuûdîRef
 
u¡akí_buûdî
 = 
	`LLVMCª©eBuûdî
();

214 
	`LLVMPosôi⁄BuûdîAtEnd
(
u¡akí_buûdî
, 
u¡akí_íåy
);

215 
	`LLVMBuûdBr
(
utk
, 
u¡akí_íåy
);

216 
	`t2c_åa˚_ebb
(&
u¡akí_buûdî
, 
∑øm_ty≥s
, 
°¨t
,

217 &
u¡akí_íåy
, 
mem_ba£
, 
ú
->
bønch_u¡akí
, 
£t
,

218 
m≠
);

221 i‡(
ú
->
bønch_èkí
) {

222 i‡(
	`£t_has
(
£t
, 
ú
->
bønch_èkí
->
pc
))

223 
	`LLVMBuûdBr
(
tk
,

224 
	`t2c_block_m≠_£¨ch
(
m≠
, 
ú
->
bønch_èkí
->
pc
));

226 
LLVMBasicBlockRef
 
èkí_íåy
 = 
	`LLVMAµídBasicBlock
(
°¨t
,

229 
LLVMBuûdîRef
 
èkí_buûdî
 = 
	`LLVMCª©eBuûdî
();

230 
	`LLVMPosôi⁄BuûdîAtEnd
(
èkí_buûdî
, 
èkí_íåy
);

231 
	`LLVMBuûdBr
(
tk
, 
èkí_íåy
);

232 
	`t2c_åa˚_ebb
(&
èkí_buûdî
, 
∑øm_ty≥s
, 
°¨t
, &
èkí_íåy
,

233 
mem_ba£
, 
ú
->
bønch_èkí
, 
£t
, 
m≠
);

237 
	}
}

239 
	$t2c_compûe
(
block_t
 *
block
, 
uöt64_t
 
mem_ba£
)

241 
LLVMModuÀRef
 
moduÀ
 = 
	`LLVMModuÀCª©eWôhName
("my_module");

242 
LLVMTy≥Ref
 
io_membîs
[] = {

243 
	`LLVMPoöãrTy≥
(
	`LLVMVoidTy≥
(), 0), LLVMPointerType(LLVMVoidType(), 0),

244 
	`LLVMPoöãrTy≥
(
	`LLVMVoidTy≥
(), 0), LLVMPointerType(LLVMVoidType(), 0),

245 
	`LLVMPoöãrTy≥
(
	`LLVMVoidTy≥
(), 0), LLVMPointerType(LLVMVoidType(), 0),

246 
	`LLVMPoöãrTy≥
(
	`LLVMVoidTy≥
(), 0), LLVMPointerType(LLVMVoidType(), 0),

247 
	`LLVMPoöãrTy≥
(
	`LLVMVoidTy≥
(), 0), LLVMPointerType(LLVMVoidType(), 0),

248 
	`LLVMPoöãrTy≥
(
	`LLVMVoidTy≥
(), 0), 
	`LLVMI¡8Ty≥
()};

249 
LLVMTy≥Ref
 
°ru˘_io
 = 
	`LLVMSåu˘Ty≥
(
io_membîs
, 12, 
Ál£
);

250 
LLVMTy≥Ref
 
¨r_X
 = 
	`LLVMAºayTy≥
(
	`LLVMI¡32Ty≥
(), 32);

251 
LLVMTy≥Ref
 
rv_membîs
[] = {
	`LLVMI¡8Ty≥
(), 
°ru˘_io
, 
¨r_X
,

252 
	`LLVMI¡32Ty≥
()};

253 
LLVMTy≥Ref
 
°ru˘_rv
 = 
	`LLVMSåu˘Ty≥
(
rv_membîs
, 4, 
Ál£
);

254 
LLVMTy≥Ref
 
∑øm_ty≥s
[] = {
	`LLVMPoöãrTy≥
(
°ru˘_rv
, 0)};

255 
LLVMVÆueRef
 
°¨t
 = 
	`LLVMAddFun˘i⁄
(

256 
moduÀ
, "°¨t", 
	`LLVMFun˘i⁄Ty≥
(
	`LLVMVoidTy≥
(), 
∑øm_ty≥s
, 1, 0));

257 
LLVMBasicBlockRef
 
fú°_block
 = 
	`LLVMAµídBasicBlock
(
°¨t
, "first_block");

258 
LLVMBuûdîRef
 
fú°_buûdî
 = 
	`LLVMCª©eBuûdî
();

259 
	`LLVMPosôi⁄BuûdîAtEnd
(
fú°_buûdî
, 
fú°_block
);

260 
LLVMBasicBlockRef
 
íåy
 = 
	`LLVMAµídBasicBlock
(
°¨t
, "entry");

261 
LLVMBuûdîRef
 
buûdî
 = 
	`LLVMCª©eBuûdî
();

262 
	`LLVMPosôi⁄BuûdîAtEnd
(
buûdî
, 
íåy
);

263 
	`LLVMBuûdBr
(
fú°_buûdî
, 
íåy
);

264 
£t_t
 
£t
;

265 
	`£t_ª£t
(&
£t
);

266 
LLVM_block_m≠
 
m≠
;

267 
m≠
.
cou¡
 = 0;

269 
	`t2c_åa˚_ebb
(&
buûdî
, 
∑øm_ty≥s
, 
°¨t
, &
íåy
, 
mem_ba£
,

270 
block
->
ú_hód
, &
£t
, &
m≠
);

272 *
îr‹
 = 
NULL
, *
åùÀ
 = 
	`LLVMGëDeÁu…T¨gëTrùÀ
();

273 
LLVMExecuti⁄EngöeRef
 
ígöe
;

274 
LLVMT¨gëRef
 
èrgë
;

275 
	`LLVMLökInMCJIT
();

276 
	`LLVMInôülizeN©iveT¨gë
();

277 
	`LLVMInôülizeN©iveAsmPröãr
();

278 i‡(
	`LLVMGëT¨gëFromTrùÀ
(
åùÀ
, &
èrgë
, &
îr‹
) != 0) {

279 
	`Ârötf
(
°dîr
,

282 
	`ab‹t
();

284 
LLVMT¨gëMachöeRef
 
tm
 = 
	`LLVMCª©eT¨gëMachöe
(

285 
èrgë
, 
åùÀ
, 
	`LLVMGëHo°CPUName
(), 
	`LLVMGëHo°CPUFótuªs
(),

286 
LLVMCodeGíLevñN⁄e
, 
LLVMRñocDeÁu…
, 
LLVMCodeModñJITDeÁu…
);

287 
LLVMPassBuûdîO±i⁄sRef
 
pb_›ti⁄
 = 
	`LLVMCª©ePassBuûdîO±i⁄s
();

289 
	`LLVMRunPas£s
(
moduÀ
, "deÁu…<O3>,óæy-c£<memsß>,ö°comböe", 
tm
,

290 
pb_›ti⁄
);

292 i‡(
	`LLVMCª©eExecuti⁄EngöeF‹ModuÀ
(&
ígöe
, 
moduÀ
, &
îr‹
) != 0) {

293 
	`Ârötf
(
°dîr
,

296 
	`ab‹t
();

300 
block
->
func
 = (
exec_t2c_func_t
Ë
	`LLVMGëPoöãrToGlobÆ
(
ígöe
, 
°¨t
);

301 
block
->
hŸ2
 = 
åue
;

302 
	}
}

	@src/t2c_template.c

9 
T2C_OP
(
n›
, { ; })

11 
T2C_OP
(
lui
, {

12 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
imm
,

13 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
));

16 
T2C_OP
(
auùc
, {

17 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
 + ir->
imm
,

18 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
));

21 
T2C_OP
(
jÆ
, {

22 i‡(
ú
->
rd
)

23 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
 + 4,

24 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
));

26 i‡(
ú
->
bønch_èkí
)

27 *
èkí_buûdî
 = *
buûdî
;

29 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
 + ir->
imm
,

30 
t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
));

31 
LLVMBuûdRëVoid
(*
buûdî
);

35 
T2C_OP
(
jÆr
, {

36 i‡(
ú
->
rd
)

37 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
 + 4,

38 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
));

40 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

41 
vÆ_rs1
 = 
T2C_LLVM_GEN_ALU32_IMM
(
Add
, vÆ_rs1, 
ú
->
imm
);

42 
vÆ_rs1
 = 
T2C_LLVM_GEN_ALU32_IMM
(
And
, val_rs1, ~1U);

43 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs1
, 
t2c_gí_PC_addr
(
°¨t
, buûdî, 
ú
));

44 
LLVMBuûdRëVoid
(*
buûdî
);

47 
	#BRANCH_FUNC
(
ty≥
, 
c⁄d
) \

48 
	`T2C_OP
(
ty≥
, { \

49 
LLVMVÆueRef
 
addr_PC
 = 
	`t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
); \

50 
	`T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, \

51 
	`t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
)); \

52 
	`T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, \

53 
	`t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
)); \

54 
	`T2C_LLVM_GEN_CMP
(
c⁄d
, 
vÆ_rs1
, 
vÆ_rs2
); \

55 
LLVMBasicBlockRef
 
èkí
 = 
	`LLVMAµídBasicBlock
(
°¨t
, "taken"); \

56 
LLVMBuûdîRef
 
buûdî2
 = 
	`LLVMCª©eBuûdî
(); \

57 
	`LLVMPosôi⁄BuûdîAtEnd
(
buûdî2
, 
èkí
); \

58 i‡(
ú
->
bønch_èkí
) \

59 *
èkí_buûdî
 = 
buûdî2
; \

61 
	`T2C_LLVM_GEN_STORE_IMM32
(
buûdî2
, 
ú
->
pc
 + ir->
imm
, 
addr_PC
); \

62 
	`LLVMBuûdRëVoid
(
buûdî2
); \

64 
LLVMBasicBlockRef
 
u¡akí
 = 
	`LLVMAµídBasicBlock
(
°¨t
, "untaken"); \

65 
LLVMBuûdîRef
 
buûdî3
 = 
	`LLVMCª©eBuûdî
(); \

66 
	`LLVMPosôi⁄BuûdîAtEnd
(
buûdî3
, 
u¡akí
); \

67 i‡(
ú
->
bønch_u¡akí
) \

68 *
u¡akí_buûdî
 = 
buûdî3
; \

70 
	`T2C_LLVM_GEN_STORE_IMM32
(
buûdî3
, 
ú
->
pc
 + 4, 
addr_PC
); \

71 
	`LLVMBuûdRëVoid
(
buûdî3
); \

73 
	`LLVMBuûdC⁄dBr
(*
buûdî
, 
cmp
, 
èkí
, 
u¡akí
); \

74 })

	)

76 
	$BRANCH_FUNC
(
beq
, 
EQ
)

77 
	$BRANCH_FUNC
(
b√
, 
NE
)

78 
	$BRANCH_FUNC
(
b…
, 
SLT
)

79 
	$BRANCH_FUNC
(
bge
, 
SGE
)

80 
	$BRANCH_FUNC
(
b…u
, 
ULT
)

81 
	$BRANCH_FUNC
(
bgeu
, 
UGE
)

83 
	`T2C_OP
(
lb
, {

84 
LLVMVÆueRef
 
mem_loc
 = 
	`t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

85 
LLVMVÆueRef
 
ªs
 = 
	`LLVMBuûdSExt
(

86 *
buûdî
, 
	`LLVMBuûdLﬂd2
(*buûdî, 
	`LLVMI¡8Ty≥
(), 
mem_loc
, "res"),

87 
	`LLVMI¡32Ty≥
(), "sext8to32");

88 
	`LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
	`t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

89 
	}
})

91 
T2C_OP
(
lh
, {

92 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

93 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdSExt
(

94 *
buûdî
, 
LLVMBuûdLﬂd2
(*buûdî, 
LLVMI¡16Ty≥
(), 
mem_loc
, "res"),

95 
LLVMI¡32Ty≥
(), "sext16to32");

96 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

100 
T2C_OP
(
lw
, {

101 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

102 
LLVMVÆueRef
 
ªs
 =

103 
LLVMBuûdLﬂd2
(*
buûdî
, 
LLVMI¡32Ty≥
(), 
mem_loc
, "res");

104 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

107 
T2C_OP
(
lbu
, {

108 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

109 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdZExt
(

110 *
buûdî
, 
LLVMBuûdLﬂd2
(*buûdî, 
LLVMI¡8Ty≥
(), 
mem_loc
, "res"),

111 
LLVMI¡32Ty≥
(), "zext8to32");

112 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

115 
T2C_OP
(
lhu
, {

116 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

117 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdZExt
(

118 *
buûdî
, 
LLVMBuûdLﬂd2
(*buûdî, 
LLVMI¡16Ty≥
(), 
mem_loc
, "res"),

119 
LLVMI¡32Ty≥
(), "zext16to32");

120 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

123 
T2C_OP
(
sb
, {

124 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

125 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 8, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

126 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs2
, 
mem_loc
);

129 
T2C_OP
(
sh
, {

130 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

131 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 16, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

132 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs2
, 
mem_loc
);

135 
T2C_OP
(
sw
, {

136 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

137 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

138 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs2
, 
mem_loc
);

141 
T2C_OP
(
addi
, {

142 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

143 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
Add
, 
vÆ_rs1
, 
ú
->
imm
);

144 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

147 
T2C_OP
(
¶ti
, {

148 
LLVMVÆueRef
 
addr_rd
 = 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
);

149 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

150 
T2C_LLVM_GEN_CMP_IMM32
(
SLT
, 
vÆ_rs1
, 
ú
->
imm
);

151 
LLVMVÆueRef
 
ªs
 =

152 
LLVMBuûdSñe˘
(*
buûdî
, 
cmp
, 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 1, 
åue
),

153 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 0, 
åue
), "");

154 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rd
);

157 
T2C_OP
(
¶tiu
, {

158 
LLVMVÆueRef
 
addr_rd
 = 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
);

159 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

160 
T2C_LLVM_GEN_CMP_IMM32
(
ULT
, 
vÆ_rs1
, 
ú
->
imm
);

161 
LLVMVÆueRef
 
ªs
 =

162 
LLVMBuûdSñe˘
(*
buûdî
, 
cmp
, 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 1, 
åue
),

163 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 0, 
åue
), "");

164 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rd
);

167 
T2C_OP
(
x‹i
, {

168 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

169 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
X‹
, 
vÆ_rs1
, 
ú
->
imm
);

170 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

173 
T2C_OP
(
‹i
, {

174 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

175 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
Or
, 
vÆ_rs1
, 
ú
->
imm
);

176 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

179 
T2C_OP
(
™di
, {

180 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

181 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
And
, 
vÆ_rs1
, 
ú
->
imm
);

182 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

185 
T2C_OP
(
¶li
, {

186 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

187 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
Shl
, 
vÆ_rs1
, 
ú
->
imm
 & 0x1f);

188 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

191 
T2C_OP
(
§li
, {

192 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

193 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
LShr
, 
vÆ_rs1
, 
ú
->
imm
 & 0x1f);

194 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

197 
T2C_OP
(
§ai
, {

198 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

199 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
AShr
, 
vÆ_rs1
, 
ú
->
imm
 & 0x1f);

200 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

203 
T2C_OP
(
add
, {

204 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

205 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

206 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdAdd
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "add");

207 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

210 
T2C_OP
(
sub
, {

211 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

212 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

213 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdSub
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "sub");

214 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

217 
T2C_OP
(
¶l
, {

218 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

219 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

220 
vÆ_rs2
 = 
T2C_LLVM_GEN_ALU32_IMM
(
And
, val_rs2, 0x1f);

221 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdShl
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "sll");

222 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

225 
T2C_OP
(
¶t
, {

226 
LLVMVÆueRef
 
addr_rd
 = 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
);

227 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

228 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

229 
T2C_LLVM_GEN_CMP
(
SLT
, 
vÆ_rs1
, 
vÆ_rs2
);

230 
LLVMVÆueRef
 
ªs
 =

231 
LLVMBuûdSñe˘
(*
buûdî
, 
cmp
, 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 1, 
åue
),

232 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 0, 
åue
), "");

233 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rd
);

236 
T2C_OP
(
¶tu
, {

237 
LLVMVÆueRef
 
addr_rd
 = 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
);

238 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

239 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

240 
T2C_LLVM_GEN_CMP
(
ULT
, 
vÆ_rs1
, 
vÆ_rs2
);

241 
LLVMVÆueRef
 
ªs
 =

242 
LLVMBuûdSñe˘
(*
buûdî
, 
cmp
, 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 1, 
åue
),

243 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 0, 
åue
), "");

244 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rd
);

247 
T2C_OP
(
x‹
, {

248 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

249 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

250 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdX‹
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "xor");

251 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

254 
T2C_OP
(
§l
, {

255 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

256 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

257 
vÆ_rs2
 = 
T2C_LLVM_GEN_ALU32_IMM
(
And
, val_rs2, 0x1f);

258 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdLShr
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "sll");

259 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

262 
T2C_OP
(
§a
, {

263 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

264 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

265 
vÆ_rs2
 = 
T2C_LLVM_GEN_ALU32_IMM
(
And
, val_rs2, 0x1f);

266 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdAShr
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "sll");

267 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

270 
T2C_OP
(
‹
, {

271 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

272 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

273 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdOr
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "xor");

274 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

277 
T2C_OP
(
™d
, {

278 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

279 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

280 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdAnd
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "xor");

281 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

284 
T2C_OP
(
eˇŒ
, {

285 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
,

286 
t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
));

287 
t2c_gí_ˇŒ_io_func
(
°¨t
, 
buûdî
, 
∑øm_ty≥s
, 8);

288 
LLVMBuûdRëVoid
(*
buûdî
);

291 
T2C_OP
(
ebªak
, {

292 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
,

293 
t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
));

294 
t2c_gí_ˇŒ_io_func
(
°¨t
, 
buûdî
, 
∑øm_ty≥s
, 9);

295 
LLVMBuûdRëVoid
(*
buûdî
);

298 
T2C_OP
(
wfi
, { 
__UNREACHABLE
; })

300 
T2C_OP
(
uªt
, { 
__UNREACHABLE
; })

302 
T2C_OP
(
§ë
, { 
__UNREACHABLE
; })

304 
T2C_OP
(
hªt
, { 
__UNREACHABLE
; })

306 
T2C_OP
(
mªt
, { 
__UNREACHABLE
; })

308 
T2C_OP
(
s„n˚vma
, { 
__UNREACHABLE
; })

310 #i‡
RV32_HAS
(
Zi„n˚i
)

311 
T2C_OP
(
„n˚i
, { 
__UNREACHABLE
; })

312 
T2C_OP
(
„n˚
, { 
__UNREACHABLE
; })

315 #i‡
RV32_HAS
(
Zic§
)

316 
T2C_OP
(
c§rw
, { 
__UNREACHABLE
; })

318 
T2C_OP
(
c§rs
, { 
__UNREACHABLE
; })

320 
T2C_OP
(
c§rc
, { 
__UNREACHABLE
; })

322 
T2C_OP
(
c§rwi
, { 
__UNREACHABLE
; })

324 
T2C_OP
(
c§rsi
, { 
__UNREACHABLE
; })

326 
T2C_OP
(
c§rci
, { 
__UNREACHABLE
; })

329 #i‡
RV32_HAS
(
EXT_M
)

330 
T2C_OP
(
mul
, {

331 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

332 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

333 
vÆ_rs1
 = 
LLVMBuûdSExt
(*
buûdî
, vÆ_rs1, 
LLVMI¡64Ty≥
(), "sextrs1to64");

334 
vÆ_rs2
 = 
LLVMBuûdSExt
(*
buûdî
, vÆ_rs2, 
LLVMI¡64Ty≥
(), "sextrs2to64");

335 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdMul
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "mul");

336 
ªs
 = 
T2C_LLVM_GEN_ALU64_IMM
(
And
,Ñes, 0xFFFFFFFF);

337 
ªs
 = 
LLVMBuûdTrunc
(*
buûdî
,Ñes, 
LLVMI¡32Ty≥
(), "sextresto32");

338 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

341 
T2C_OP
(
mulh
, {

342 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

343 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

344 
vÆ_rs1
 = 
LLVMBuûdSExt
(*
buûdî
, vÆ_rs1, 
LLVMI¡64Ty≥
(), "sextrs1to64");

345 
vÆ_rs2
 = 
LLVMBuûdSExt
(*
buûdî
, vÆ_rs2, 
LLVMI¡64Ty≥
(), "sextrs2to64");

346 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdMul
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "mul");

347 
ªs
 = 
T2C_LLVM_GEN_ALU64_IMM
(
LShr
,Ñes, 32);

348 
ªs
 = 
LLVMBuûdTrunc
(*
buûdî
,Ñes, 
LLVMI¡32Ty≥
(), "sextresto32");

349 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

352 
T2C_OP
(
mulhsu
, {

353 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

354 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

355 
vÆ_rs1
 = 
LLVMBuûdSExt
(*
buûdî
, vÆ_rs1, 
LLVMI¡64Ty≥
(), "sextrs1to64");

356 
vÆ_rs2
 = 
LLVMBuûdZExt
(*
buûdî
, vÆ_rs2, 
LLVMI¡64Ty≥
(), "zextrs2to64");

357 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdMul
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "mul");

358 
ªs
 = 
T2C_LLVM_GEN_ALU64_IMM
(
LShr
,Ñes, 32);

359 
ªs
 = 
LLVMBuûdTrunc
(*
buûdî
,Ñes, 
LLVMI¡32Ty≥
(), "sextresto32");

360 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

363 
T2C_OP
(
mulhu
, {

364 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

365 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

366 
vÆ_rs1
 = 
LLVMBuûdZExt
(*
buûdî
, vÆ_rs1, 
LLVMI¡64Ty≥
(), "sextrs1to64");

367 
vÆ_rs2
 = 
LLVMBuûdZExt
(*
buûdî
, vÆ_rs2, 
LLVMI¡64Ty≥
(), "zextrs2to64");

368 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdMul
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "mul");

369 
ªs
 = 
T2C_LLVM_GEN_ALU64_IMM
(
LShr
,Ñes, 32);

370 
ªs
 = 
LLVMBuûdTrunc
(*
buûdî
,Ñes, 
LLVMI¡32Ty≥
(), "sextresto32");

371 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

374 
T2C_OP
(
div
, {

375 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

376 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

377 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdSDiv
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "sdiv");

378 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

381 
T2C_OP
(
divu
, {

382 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

383 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

384 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdUDiv
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "udiv");

385 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

388 
T2C_OP
(
ªm
, {

389 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

390 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

391 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdSRem
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "srem");

392 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

395 
T2C_OP
(
ªmu
, {

396 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

397 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

398 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdURem
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "urem");

399 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

403 #i‡
RV32_HAS
(
EXT_A
)

404 
T2C_OP
(
Ãw
, { 
__UNREACHABLE
; })

406 
T2C_OP
(
scw
, { 
__UNREACHABLE
; })

408 
T2C_OP
(
amosw≠w
, { 
__UNREACHABLE
; })

410 
T2C_OP
(
amﬂddw
, { 
__UNREACHABLE
; })

412 
T2C_OP
(
amox‹w
, { 
__UNREACHABLE
; })

414 
T2C_OP
(
amﬂndw
, { 
__UNREACHABLE
; })

416 
T2C_OP
(
amo‹w
, { 
__UNREACHABLE
; })

418 
T2C_OP
(
amomöw
, { 
__UNREACHABLE
; })

420 
T2C_OP
(
amomaxw
, { 
__UNREACHABLE
; })

422 
T2C_OP
(
amomöuw
, { 
__UNREACHABLE
; })

424 
T2C_OP
(
amomaxuw
, { 
__UNREACHABLE
; })

427 #i‡
RV32_HAS
(
EXT_F
)

428 
T2C_OP
(
Êw
, { 
__UNREACHABLE
; })

430 
T2C_OP
(
fsw
, { 
__UNREACHABLE
; })

432 
T2C_OP
(
fmadds
, { 
__UNREACHABLE
; })

434 
T2C_OP
(
fmsubs
, { 
__UNREACHABLE
; })

436 
T2C_OP
(
‚msubs
, { 
__UNREACHABLE
; })

438 
T2C_OP
(
‚madds
, { 
__UNREACHABLE
; })

440 
T2C_OP
(
Ádds
, { 
__UNREACHABLE
; })

442 
T2C_OP
(
fsubs
, { 
__UNREACHABLE
; })

444 
T2C_OP
(
fmuls
, { 
__UNREACHABLE
; })

446 
T2C_OP
(
fdivs
, { 
__UNREACHABLE
; })

448 
T2C_OP
(
fsqπs
, { 
__UNREACHABLE
; })

450 
T2C_OP
(
fsgnjs
, { 
__UNREACHABLE
; })

452 
T2C_OP
(
fsgnjns
, { 
__UNREACHABLE
; })

454 
T2C_OP
(
fsgnjxs
, { 
__UNREACHABLE
; })

456 
T2C_OP
(
fmös
, { 
__UNREACHABLE
; })

458 
T2C_OP
(
fmaxs
, { 
__UNREACHABLE
; })

460 
T2C_OP
(
fcvtws
, { 
__UNREACHABLE
; })

462 
T2C_OP
(
fcvtwus
, { 
__UNREACHABLE
; })

464 
T2C_OP
(
fmvxw
, { 
__UNREACHABLE
; })

466 
T2C_OP
(
„qs
, { 
__UNREACHABLE
; })

468 
T2C_OP
(
Êts
, { 
__UNREACHABLE
; })

470 
T2C_OP
(
Êes
, { 
__UNREACHABLE
; })

472 
T2C_OP
(
f˛asss
, { 
__UNREACHABLE
; })

474 
T2C_OP
(
fcvtsw
, { 
__UNREACHABLE
; })

476 
T2C_OP
(
fcvtswu
, { 
__UNREACHABLE
; })

478 
T2C_OP
(
fmvwx
, { 
__UNREACHABLE
; })

481 #i‡
RV32_HAS
(
EXT_C
)

482 
T2C_OP
(
ˇddi4•n
, {

483 
T2C_LLVM_GEN_LOAD_VMREG
(
•
, 32, 
t2c_gí_•_addr
(
°¨t
, 
buûdî
, 
ú
));

484 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
Add
, 
vÆ_•
, (
öt16_t
Ë
ú
->
imm
);

485 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

487 
T2C_OP
(
˛w
, {

488 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

489 
LLVMVÆueRef
 
ªs
 =

490 
LLVMBuûdLﬂd2
(*
buûdî
, 
LLVMI¡32Ty≥
(), 
mem_loc
, "res");

491 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

494 
T2C_OP
(
csw
, {

495 
LLVMVÆueRef
 
mem_loc
 = 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, 
ú
, 
mem_ba£
);

496 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

497 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs2
, 
mem_loc
);

500 
T2C_OP
(
˙›
, { ; })

502 
T2C_OP
(
ˇddi
, {

503 
LLVMVÆueRef
 
addr_rd
 = 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
);

504 
T2C_LLVM_GEN_LOAD_VMREG
(
rd
, 32, 
addr_rd
);

505 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
Add
, 
vÆ_rd
, (
öt16_t
Ë
ú
->
imm
);

506 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rd
);

509 
T2C_OP
(
cjÆ
, {

510 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
 + 2,

511 
t2c_gí_ø_addr
(
°¨t
, 
buûdî
, 
ú
));

512 i‡(
ú
->
bønch_èkí
)

513 *
èkí_buûdî
 = *
buûdî
;

515 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
 + ir->
imm
,

516 
t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
));

517 
LLVMBuûdRëVoid
(*
buûdî
);

521 
T2C_OP
(
˛i
, {

522 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
imm
,

523 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
));

526 
T2C_OP
(
ˇddi16•
, {

527 
LLVMVÆueRef
 
addr_rd
 = 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
);

528 
T2C_LLVM_GEN_LOAD_VMREG
(
rd
, 32, 
addr_rd
);

529 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
Add
, 
vÆ_rd
, 
ú
->
imm
);

530 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rd
);

533 
T2C_OP
(
˛ui
, {

534 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
imm
,

535 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
));

538 
T2C_OP
(
c§li
, {

539 
LLVMVÆueRef
 
addr_rs1
 = 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
);

540 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
addr_rs1
);

541 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
LShr
, 
vÆ_rs1
, 
ú
->
shamt
);

542 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rs1
);

545 
T2C_OP
(
c§ai
, {

546 
LLVMVÆueRef
 
addr_rs1
 = 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
);

547 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
addr_rs1
);

548 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
AShr
, 
vÆ_rs1
, 
ú
->
shamt
);

549 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rs1
);

552 
T2C_OP
(
ˇndi
, {

553 
LLVMVÆueRef
 
addr_rs1
 = 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
);

554 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
addr_rs1
);

555 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
And
, 
vÆ_rs1
, 
ú
->
imm
);

556 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rs1
);

559 
T2C_OP
(
csub
, {

560 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

561 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

562 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdSub
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "sub");

563 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

566 
T2C_OP
(
cx‹
, {

567 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

568 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

569 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdX‹
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "xor");

570 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

573 
T2C_OP
(
c‹
, {

574 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

575 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

576 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdOr
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "xor");

577 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

580 
T2C_OP
(
ˇnd
, {

581 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

582 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

583 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdAnd
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "xor");

584 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

587 
T2C_OP
(
cj
, {

588 i‡(
ú
->
bønch_èkí
)

589 *
èkí_buûdî
 = *
buûdî
;

591 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
 + ir->
imm
,

592 
t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
));

593 
LLVMBuûdRëVoid
(*
buûdî
);

597 
T2C_OP
(
cbeqz
, {

598 
LLVMVÆueRef
 
addr_PC
 = 
t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
);

599 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

600 
T2C_LLVM_GEN_CMP_IMM32
(
EQ
, 
vÆ_rs1
, 0);

601 
LLVMBasicBlockRef
 
èkí
 = 
LLVMAµídBasicBlock
(
°¨t
, "taken");

602 
LLVMBuûdîRef
 
buûdî2
 = 
LLVMCª©eBuûdî
();

603 
LLVMPosôi⁄BuûdîAtEnd
(
buûdî2
, 
èkí
);

604 i‡(
ú
->
bønch_èkí
)

605 *
èkí_buûdî
 = 
buûdî2
;

607 
T2C_LLVM_GEN_STORE_IMM32
(
buûdî2
, 
ú
->
pc
 + ir->
imm
, 
addr_PC
);

608 
LLVMBuûdRëVoid
(
buûdî2
);

611 
LLVMBasicBlockRef
 
u¡akí
 = 
LLVMAµídBasicBlock
(
°¨t
, "untaken");

612 
LLVMBuûdîRef
 
buûdî3
 = 
LLVMCª©eBuûdî
();

613 
LLVMPosôi⁄BuûdîAtEnd
(
buûdî3
, 
u¡akí
);

614 i‡(
ú
->
bønch_u¡akí
)

615 *
u¡akí_buûdî
 = 
buûdî3
;

617 
T2C_LLVM_GEN_STORE_IMM32
(
buûdî3
, 
ú
->
pc
 + 2, 
addr_PC
);

618 
LLVMBuûdRëVoid
(
buûdî3
);

620 
LLVMBuûdC⁄dBr
(*
buûdî
, 
cmp
, 
èkí
, 
u¡akí
);

623 
T2C_OP
(
cb√z
, {

624 
LLVMVÆueRef
 
addr_PC
 = 
t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
);

625 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

626 
T2C_LLVM_GEN_CMP_IMM32
(
NE
, 
vÆ_rs1
, 0);

627 
LLVMBasicBlockRef
 
èkí
 = 
LLVMAµídBasicBlock
(
°¨t
, "taken");

628 
LLVMBuûdîRef
 
buûdî2
 = 
LLVMCª©eBuûdî
();

629 
LLVMPosôi⁄BuûdîAtEnd
(
buûdî2
, 
èkí
);

630 i‡(
ú
->
bønch_èkí
)

631 *
èkí_buûdî
 = 
buûdî2
;

633 
T2C_LLVM_GEN_STORE_IMM32
(
buûdî2
, 
ú
->
pc
 + ir->
imm
, 
addr_PC
);

634 
LLVMBuûdRëVoid
(
buûdî2
);

637 
LLVMBasicBlockRef
 
u¡akí
 = 
LLVMAµídBasicBlock
(
°¨t
, "untaken");

638 
LLVMBuûdîRef
 
buûdî3
 = 
LLVMCª©eBuûdî
();

639 
LLVMPosôi⁄BuûdîAtEnd
(
buûdî3
, 
u¡akí
);

640 i‡(
ú
->
bønch_u¡akí
)

641 *
u¡akí_buûdî
 = 
buûdî3
;

643 
T2C_LLVM_GEN_STORE_IMM32
(
buûdî3
, 
ú
->
pc
 + 2, 
addr_PC
);

644 
LLVMBuûdRëVoid
(
buûdî3
);

646 
LLVMBuûdC⁄dBr
(*
buûdî
, 
cmp
, 
èkí
, 
u¡akí
);

649 
T2C_OP
(
c¶li
, {

650 
LLVMVÆueRef
 
addr_rd
 = 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
);

651 
T2C_LLVM_GEN_LOAD_VMREG
(
rd
, 32, 
addr_rd
);

652 
LLVMVÆueRef
 
ªs
 = 
T2C_LLVM_GEN_ALU32_IMM
(
Shl
, 
vÆ_rd
, (
uöt8_t
Ë
ú
->
imm
);

653 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
addr_rd
);

656 
T2C_OP
(
˛w•
, {

657 
LLVMVÆueRef
 
vÆ_•
 = 
LLVMBuûdZExt
(

658 *
buûdî
,

659 
LLVMBuûdLﬂd2
(*
buûdî
, 
LLVMI¡32Ty≥
(),

660 
t2c_gí_•_addr
(
°¨t
, 
buûdî
, 
ú
), "val_sp"),

661 
LLVMI¡64Ty≥
(), "zext32to64");

662 
LLVMVÆueRef
 
addr
 = 
LLVMBuûdAdd
(

663 *
buûdî
, 
vÆ_•
,

664 
LLVMC⁄°I¡
(
LLVMI¡64Ty≥
(), 
ú
->
imm
 + 
mem_ba£
, 
åue
), "addr");

665 
LLVMVÆueRef
 
ˇ°_addr
 = 
LLVMBuûdI¡ToPå
(

666 *
buûdî
, 
addr
, 
LLVMPoöãrTy≥
(
LLVMI¡32Ty≥
(), 0), "cast");

667 
LLVMVÆueRef
 
ªs
 =

668 
LLVMBuûdLﬂd2
(*
buûdî
, 
LLVMI¡32Ty≥
(), 
ˇ°_addr
, "res");

669 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

672 
T2C_OP
(
cjr
, {

673 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

674 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs1
, 
t2c_gí_PC_addr
(
°¨t
, buûdî, 
ú
));

675 
LLVMBuûdRëVoid
(*
buûdî
);

678 
T2C_OP
(
cmv
, {

679 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

680 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs2
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

683 
T2C_OP
(
˚bªak
, {

684 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
,

685 
t2c_gí_PC_addr
(
°¨t
, 
buûdî
, 
ú
));

686 
t2c_gí_ˇŒ_io_func
(
°¨t
, 
buûdî
, 
∑øm_ty≥s
, 9);

687 
LLVMBuûdRëVoid
(*
buûdî
);

690 
T2C_OP
(
cjÆr
, {

691 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
pc
 + 2,

692 
t2c_gí_ø_addr
(
°¨t
, 
buûdî
, 
ú
));

693 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

694 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs1
, 
t2c_gí_PC_addr
(
°¨t
, buûdî, 
ú
));

695 
LLVMBuûdRëVoid
(*
buûdî
);

698 
T2C_OP
(
ˇdd
, {

699 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

700 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
));

701 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdAdd
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rs2
, "add");

702 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rd_addr
(
°¨t
, buûdî, 
ú
));

705 
T2C_OP
(
csw•
, {

706 
LLVMVÆueRef
 
addr_rs2
 = 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, 
ú
);

707 
LLVMVÆueRef
 
vÆ_•
 = 
LLVMBuûdZExt
(

708 *
buûdî
,

709 
LLVMBuûdLﬂd2
(*
buûdî
, 
LLVMI¡32Ty≥
(),

710 
t2c_gí_•_addr
(
°¨t
, 
buûdî
, 
ú
), "val_sp"),

711 
LLVMI¡64Ty≥
(), "zext32to64");

712 
T2C_LLVM_GEN_LOAD_VMREG
(
rs2
, 32, 
addr_rs2
);

713 
LLVMVÆueRef
 
addr
 = 
LLVMBuûdAdd
(

714 *
buûdî
, 
vÆ_•
,

715 
LLVMC⁄°I¡
(
LLVMI¡64Ty≥
(), 
ú
->
imm
 + 
mem_ba£
, 
åue
), "addr");

716 
LLVMVÆueRef
 
ˇ°_addr
 = 
LLVMBuûdI¡ToPå
(

717 *
buûdî
, 
addr
, 
LLVMPoöãrTy≥
(
LLVMI¡32Ty≥
(), 0), "cast");

718 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs2
, 
ˇ°_addr
);

722 #i‡
RV32_HAS
(
EXT_C
Ë&& RV32_HAS(
EXT_F
)

723 
T2C_OP
(
cÊw•
, { 
__UNREACHABLE
; })

725 
T2C_OP
(
cfsw•
, { 
__UNREACHABLE
; })

727 
T2C_OP
(
cÊw
, { 
__UNREACHABLE
; })

729 
T2C_OP
(
cfsw
, { 
__UNREACHABLE
; })

732 
T2C_OP
(
fu£1
, {

733 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

734 
i
 = 0; i < 
ú
->
imm2
; i++) {

735 
LLVMVÆueRef
 
rd_off£t
 =

736 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(),

737 
off£tof
(
riscv_t
, 
X
Ë/ (Ë+ 
fu£
[
i
].
rd
, 
åue
);

738 
LLVMVÆueRef
 
addr_rd
 = 
LLVMBuûdInBoundsGEP2
(*
buûdî
, 
LLVMI¡32Ty≥
(),

739 
LLVMGëP¨am
(
°¨t
, 0),

740 &
rd_off£t
, 1, "addr_rd");

741 
LLVMBuûdSt‹e
(*
buûdî
,

742 
LLVMC⁄°I¡
(
LLVMI¡32Ty≥
(), 
fu£
[
i
].
imm
, 
åue
),

743 
addr_rd
);

747 
T2C_OP
(
fu£2
, {

748 
LLVMVÆueRef
 
addr_rd
 = 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, 
ú
);

749 
T2C_LLVM_GEN_STORE_IMM32
(*
buûdî
, 
ú
->
imm
, 
addr_rd
);

750 
T2C_LLVM_GEN_LOAD_VMREG
(
rs1
, 32, 
t2c_gí_rs1_addr
(
°¨t
, 
buûdî
, 
ú
));

751 
T2C_LLVM_GEN_LOAD_VMREG
(
rd
, 32, 
addr_rd
);

752 
LLVMVÆueRef
 
ªs
 = 
LLVMBuûdAdd
(*
buûdî
, 
vÆ_rs1
, 
vÆ_rd
, "add");

753 
LLVMBuûdSt‹e
(*
buûdî
, 
ªs
, 
t2c_gí_rs2_addr
(
°¨t
, buûdî, 
ú
));

756 
T2C_OP
(
fu£3
, {

757 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

758 
i
 = 0; i < 
ú
->
imm2
; i++) {

759 
LLVMVÆueRef
 
mem_loc
 =

760 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, (
rv_ö¢_t
 *Ë(&
fu£
[
i
]), 
mem_ba£
);

761 
T2C_LLVM_GEN_LOAD_VMREG
(

762 
rs2
, 32,

763 
t2c_gí_rs2_addr
(
°¨t
, 
buûdî
, (
rv_ö¢_t
 *Ë(&
fu£
[
i
])));

764 
LLVMBuûdSt‹e
(*
buûdî
, 
vÆ_rs2
, 
mem_loc
);

768 
T2C_OP
(
fu£4
, {

769 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

770 
i
 = 0; i < 
ú
->
imm2
; i++) {

771 
LLVMVÆueRef
 
mem_loc
 =

772 
t2c_gí_mem_loc
(
°¨t
, 
buûdî
, (
rv_ö¢_t
 *Ë(&
fu£
[
i
]), 
mem_ba£
);

773 
LLVMVÆueRef
 
ªs
 =

774 
LLVMBuûdLﬂd2
(*
buûdî
, 
LLVMI¡32Ty≥
(), 
mem_loc
, "res");

775 
LLVMBuûdSt‹e
(

776 *
buûdî
, 
ªs
,

777 
t2c_gí_rd_addr
(
°¨t
, 
buûdî
, (
rv_ö¢_t
 *Ë(&
fu£
[
i
])));

781 
T2C_OP
(
fu£5
, {

782 
›code_fu£_t
 *
fu£
 = 
ú
->fuse;

783 
i
 = 0; i < 
ú
->
imm2
; i++) {

784 
fu£
[
i
].
›code
) {

785 
rv_ö¢_¶li
:

786 
t2c_¶li
(
buûdî
, 
∑øm_ty≥s
, 
°¨t
, 
íåy
, 
èkí_buûdî
,

787 
u¡akí_buûdî
, 
mem_ba£
, (
rv_ö¢_t
 *Ë(&
fu£
[
i
]));

789 
rv_ö¢_§li
:

790 
t2c_§li
(
buûdî
, 
∑øm_ty≥s
, 
°¨t
, 
íåy
, 
èkí_buûdî
,

791 
u¡akí_buûdî
, 
mem_ba£
, (
rv_ö¢_t
 *Ë(&
fu£
[
i
]));

793 
rv_ö¢_§ai
:

794 
t2c_§ai
(
buûdî
, 
∑øm_ty≥s
, 
°¨t
, 
íåy
, 
èkí_buûdî
,

795 
u¡akí_buûdî
, 
mem_ba£
, (
rv_ö¢_t
 *Ë(&
fu£
[
i
]));

798 
__UNREACHABLE
;

	@src/uart.c

1 
	~<î∫o.h
>

2 
	~<pﬁl.h
>

3 
	~<°dio.h
>

4 
	~<°dlib.h
>

5 
	~<°rög.h
>

6 
	~<uni°d.h
>

8 
	~"io.h
"

12 
	#U8250_INT_THRE
 1

	)

14 
	$u8250_upd©e_öãºu±s
(
u8250_°©e_t
 *
u¨t
)

18 i‡(
u¨t
->
ö_ªady
)

19 
u¨t
->
≥ndög_öts
 |= 1;

21 
u¨t
->
≥ndög_öts
 &= ~1;

24 
u¨t
->
≥ndög_öts
 &u¨t->
õr
;

27 i‡(
u¨t
->
≥ndög_öts
)

28 
u¨t
->
cuºít_öt
 = 
	`ûog2
(u¨t->
≥ndög_öts
);

29 
	}
}

31 
	$u8250_check_ªady
(
u8250_°©e_t
 *
u¨t
)

33 i‡(
u¨t
->
ö_ªady
)

36 
pﬁlfd
 
pfd
 = {
u¨t
->
ö_fd
, 
POLLIN
, 0};

37 
	`pﬁl
(&
pfd
, 1, 0);

38 i‡(
pfd
.
ªvíts
 & 
POLLIN
)

39 
u¨t
->
ö_ªady
 = 
åue
;

40 
	}
}

42 
	$u8250_h™dÀ_out
(
u8250_°©e_t
 *
u¨t
, 
uöt8_t
 
vÆue
)

44 i‡(
	`wrôe
(
u¨t
->
out_fd
, &
vÆue
, 1) < 1)

45 
	`Ârötf
(
°dîr
, "ÁûedÅÿwrôêUART ouçut: %s\n", 
	`°ªº‹
(
î∫o
));

46 
	}
}

48 
uöt8_t
 
	$u8250_h™dÀ_ö
(
u8250_°©e_t
 *
u¨t
)

50 
uöt8_t
 
vÆue
 = 0;

51 
	`u8250_check_ªady
(
u¨t
);

52 i‡(!
u¨t
->
ö_ªady
)

53  
vÆue
;

55 i‡(
	`ªad
(
u¨t
->
ö_fd
, &
vÆue
, 1) < 0)

56 
	`Ârötf
(
°dîr
, "ÁûedÅÿªad UART i≈ut: %s\n", 
	`°ªº‹
(
î∫o
));

58 
u¨t
->
ö_ªady
 = 
Ál£
;

59 
	`u8250_check_ªady
(
u¨t
);

68  
vÆue
;

69 
	}
}

71 
uöt8_t
 
	$u8250_ªg_ªad
(
u8250_°©e_t
 *
u¨t
, 
uöt32_t
 
addr
)

73 
uöt8_t
 
ªt
;

74 
addr
) {

76 i‡(
u¨t
->
l¸
 & (1 << 7)) {

77  
u¨t
->
dŒ
;

79  
	`u8250_h™dÀ_ö
(
u¨t
);

81 i‡(
u¨t
->
l¸
 & (1 << 7)) {

82  
u¨t
->
dlh
;

84  
u¨t
->
õr
;

86 
ªt
 = (
u¨t
->
cuºít_öt
 << 1Ë| (u¨t->
≥ndög_öts
 ? 0 : 1);

87 i‡(
u¨t
->
cuºít_öt
 =
U8250_INT_THRE
)

88 
u¨t
->
≥ndög_öts
 &~(1 << u¨t->
cuºít_öt
);

89  
ªt
;

91  
u¨t
->
l¸
;

93  
u¨t
->
m¸
;

97  (0x60 | (
uöt8_t
Ë
u¨t
->
ö_ªady
);

107 
	}
}

109 
	$u8250_ªg_wrôe
(
u8250_°©e_t
 *
u¨t
, 
uöt32_t
 
addr
, 
uöt8_t
 
vÆue
)

111 
addr
) {

113 i‡(
u¨t
->
l¸
 & (1 << 7)) {

114 
u¨t
->
dŒ
 = 
vÆue
;

117 
	`u8250_h™dÀ_out
(
u¨t
, 
vÆue
);

118 
u¨t
->
≥ndög_öts
 |1 << 
U8250_INT_THRE
;

121 i‡(
u¨t
->
l¸
 & (1 << 7)) {

122 
u¨t
->
dlh
 = 
vÆue
;

125 
u¨t
->
õr
 = 
vÆue
;

128 
u¨t
->
l¸
 = 
vÆue
;

131 
u¨t
->
m¸
 = 
vÆue
;

134 
	}
}

136 
uöt32_t
 
	$u8250_ªad
(
u8250_°©e_t
 *
u¨t
,

137 
uöt32_t
 
addr
)

139  (
uöt32_t
Ë(
öt8_t
Ë
	`u8250_ªg_ªad
(
u¨t
, 
addr
);

140 
	}
}

142 
	$u8250_wrôe
(
u8250_°©e_t
 *
u¨t
,

143 
uöt32_t
 
addr
,

144 
uöt32_t
 
vÆue
)

146 
	`u8250_ªg_wrôe
(
u¨t
, 
addr
, 
vÆue
);

147 
	}
}

	@src/utils.c

6 
	~<°dboﬁ.h
>

7 
	~<°döt.h
>

8 
	~<°dlib.h
>

9 
	~<°rög.h
>

10 
	~<sys/time.h
>

11 
	~<time.h
>

13 
	~"utûs.h
"

15 #i‡
deföed
(
__APPLE__
)

16 
	#HAVE_MACH_TIMER


	)

17 
	~<mach/mach_time.h
>

18 #ñi‡!
deföed
(
_WIN32
Ë&& !deföed(
_WIN64
)

19 
	#HAVE_POSIX_TIMER


	)

20 #ifde‡
CLOCK_MONOTONIC


21 
	#CLOCKID
 
CLOCK_MONOTONIC


	)

23 
	#CLOCKID
 
CLOCK_REALTIME


	)

27 
	#MAX_PATH_LEN
 1024

	)

29 
	$gë_time_öfo
(
öt32_t
 *
tv_£c
, i¡32_à*
tv_n£c
)

31 #i‡
	`deföed
(
HAVE_POSIX_TIMER
)

32 
time•ec
 
t
;

33 
	`˛ock_gëtime
(
CLOCKID
, &
t
);

34 *
tv_£c
 = 
t
.tv_sec;

35 *
tv_n£c
 = 
t
.tv_nsec;

36 #ñi‡
	`deföed
(
HAVE_MACH_TIMER
)

37 
mach_timeba£_öfo_d©a_t
 
öfo
;

41 i‡(
öfo
.
díom
 == 0)

42 (Ë
	`mach_timeba£_öfo
(&
öfo
);

44 
uöt64_t
 
n£cs
 = 
	`mach_absﬁuã_time
(Ë* 
öfo
.
numî
 / info.
díom
;

45 *
tv_£c
 = 
n£cs
 / 1e9;

46 *
tv_n£c
 = 
n£cs
 - (*
tv_£c
 * 1e9);

48 
˛ock_t
 
t
 = 
	`˛ock
();

49 *
tv_£c
 = 
t
 / 
CLOCKS_PER_SEC
;

50 *
tv_n£c
 = (
t
 % 
CLOCKS_PER_SEC
) * (1e9 / CLOCKS_PER_SEC);

52 
	}
}

54 
	$rv_gëtimeofday
(
timevÆ
 *
tv
)

56 
öt32_t
 
tv_£c
, 
tv_n£c
;

57 
	`gë_time_öfo
(&
tv_£c
, &
tv_n£c
);

58 
tv
->
tv_£c
 =Åv_sec;

59 
tv
->
tv_u£c
 = 
tv_n£c
 / 1000;

60 
	}
}

62 
	$rv_˛ock_gëtime
(
time•ec
 *
ç
)

64 
öt32_t
 
tv_£c
, 
tv_n£c
;

65 
	`gë_time_öfo
(&
tv_£c
, &
tv_n£c
);

66 
ç
->
tv_£c
 =Åv_sec;

67 
ç
->
tv_n£c
 =Åv_nsec;

68 
	}
}

70 *
	$ßnôize_∑th
(c⁄° *
öput
)

72 
size_t
 
n
 = 
	`°∫Àn
(
öput
, 
MAX_PATH_LEN
);

74 *
ªt
 = 
	`ˇŒoc
(
n
 + 1, ());

75 i‡(!
ªt
)

76  
NULL
;

81 i‡(
n
 == 0) {

82 
ªt
[0] = '.';

83  
ªt
;

86 
boﬁ
 
is_roŸ
 = (
öput
[0] == '/');

95 
size_t
 
w
 = 0, 
r
 = 0;

96 
size_t
 
dŸdŸ
 = 0;

97 i‡(
is_roŸ
) {

98 
ªt
[
w
] = '/';

99 
w
++;

100 
r
 = 1;

101 
dŸdŸ
 = 1;

104 
r
 < 
n
) {

105 i‡(
öput
[
r
] == '/') {

107 
r
++;

108 } i‡(
öput
[
r
] ='.' && (∏+ 1 =
n
 || input[r + 1] == '/')) {

110 
r
++;

111 } i‡(
öput
[
r
] == '.' && input[r + 1] == '.' &&

112 (
r
 + 2 =
n
 || 
öput
[r + 2] == '/')) {

114 
r
 += 2;

116 i‡(
w
 > 
dŸdŸ
) {

118 
w
--;

119 
w
 > 
dŸdŸ
 && 
ªt
[w] != '/') {

120 
w
--;

122 } i‡(!
is_roŸ
) {

124 i‡(
w
 > 0) {

125 
ªt
[
w
] = '/';

126 
w
++;

128 
ªt
[
w
] = '.';

129 
w
++;

130 
ªt
[
w
] = '.';

131 
w
++;

132 
dŸdŸ
 = 
w
;

136 i‡((
is_roŸ
 && 
w
 != 1) || (!is_root && w != 0)) {

137 
ªt
[
w
] = '/';

138 
w
++;

142 ; 
r
 < 
n
 && 
öput
[r] != '/';Ñ++) {

143 
ªt
[
w
] = 
öput
[
r
];

144 
w
++;

150 i‡(
w
 == 0) {

151 
ªt
[
w
] = '.';

152 
w
++;

158 
	`mem£t
(
ªt
 + 
w
, '\0', 
n
 + 1 - w);

160  
ªt
;

161 
	}
}

163 
HASH_FUNC_IMPL
(
£t_hash
, 
SET_SIZE_BITS
, 1 << SET_SIZE_BITS);

165 
	$£t_ª£t
(
£t_t
 *
£t
)

167 
	`mem£t
(
£t
, 0, (
£t_t
));

168 
	}
}

175 
boﬁ
 
	$£t_add
(
£t_t
 *
£t
, 
uöt32_t
 
key
)

177 c⁄° 
uöt32_t
 
ödex
 = 
	`£t_hash
(
key
);

178 
uöt8_t
 
cou¡
 = 0;

179 
£t
->
èbÀ
[
ödex
][
cou¡
]) {

180 i‡(
£t
->
èbÀ
[
ödex
][
cou¡
++] =
key
)

181  
Ál£
;

184 
£t
->
èbÀ
[
ödex
][
cou¡
] = 
key
;

185  
åue
;

186 
	}
}

193 
boﬁ
 
	$£t_has
(
£t_t
 *
£t
, 
uöt32_t
 
key
)

195 c⁄° 
uöt32_t
 
ödex
 = 
	`£t_hash
(
key
);

196 
uöt8_t
 
cou¡
 = 0; 
£t
->
èbÀ
[
ödex
][count]; count++) {

197 i‡(
£t
->
èbÀ
[
ödex
][
cou¡
] =
key
)

198  
åue
;

200  
Ál£
;

201 
	}
}

	@src/utils.h

1 #¥agm®
⁄˚


3 
	~<°dboﬁ.h
>

4 
	~<°döt.h
>

5 
	~<sys/time.h
>

6 
	~<time.h
>

11 
rv_gëtimeofday
(
timevÆ
 *
tv
);

14 
rv_˛ock_gëtime
(
time•ec
 *
ç
);

20 
	#HASH_FUNC_IMPL
(
«me
, 
size_bôs
, 
size
) \

21 
FORCE_INLINE
 
uöt32_t
 
	`«me
(uöt32_à
vÆ
) \

24  (
vÆ
 * 0x61C88647 >> (32 - 
size_bôs
)Ë& ((
size
) - (1)); \

25 }

	)

50 *
ßnôize_∑th
(c⁄° *
öput
);

52 
ölöe
 
uöçå_t
 
	$Æign_up
(
uöçå_t
 
sz
, 
size_t
 
Æignmít
)

54 
uöçå_t
 
mask
 = 
Æignmít
 - 1;

55 i‡(
	`likñy
((
Æignmít
 & 
mask
) == 0))

56  ((
sz
 + 
mask
) & ~mask);

57  (((
sz
 + 
mask
Ë/ 
Æignmít
) *álignment);

58 
	}
}

62 
	sli°_hód
 {

63 
li°_hód
 *
	m¥ev
, *
	m√xt
;

66 
ölöe
 
	$INIT_LIST_HEAD
(
li°_hód
 *
hód
)

68 
hód
->
√xt
 = hód->
¥ev
 = head;

69 
	}
}

71 
ölöe
 
boﬁ
 
	$li°_em±y
(c⁄° 
li°_hód
 *
hód
)

73  
hód
->
√xt
 == head;

74 
	}
}

76 
ölöe
 
	$li°_add
(
li°_hód
 *
node
, li°_hód *
hód
)

78 
li°_hód
 *
√xt
 = 
hód
->next;

80 
√xt
->
¥ev
 = 
node
;

81 
node
->
√xt
 =Çext;

82 
node
->
¥ev
 = 
hód
;

83 
hód
->
√xt
 = 
node
;

84 
	}
}

86 
ölöe
 
	$li°_dñ
(
li°_hód
 *
node
)

88 
li°_hód
 *
√xt
 = 
node
->√xt, *
¥ev
 =Çode->prev;

90 
√xt
->
¥ev
 =Örev;

91 
¥ev
->
√xt
 =Çext;

92 
	}
}

94 
ölöe
 
	$li°_dñ_öô
(
li°_hód
 *
node
)

96 
	`li°_dñ
(
node
);

97 
	`INIT_LIST_HEAD
(
node
);

98 
	}
}

100 
	#li°_íåy
(
node
, 
ty≥
, 
membî
Ë
	`c⁄èöî_of
“ode,Åy≥, membî)

	)

102 
	#li°_fú°_íåy
(
hód
, 
ty≥
, 
membî
) \

103 
	`li°_íåy
((
hód
)->
√xt
, 
ty≥
, 
membî
)

	)

105 
	#li°_œ°_íåy
(
hód
, 
ty≥
, 
membî
) \

106 
	`li°_íåy
((
hód
)->
¥ev
, 
ty≥
, 
membî
)

	)

108 #ifde‡
__HAVE_TYPEOF


109 
	#li°_f‹_óch_íåy_ß„
(
íåy
, 
ß„
, 
hód
, 
membî
) \

110 
íåy
 = 
	`li°_íåy
((
hód
)->
√xt
, 
	`__ty≥of__
(*íåy), 
membî
), \

111 
ß„
 = 
	`li°_íåy
(
íåy
->
membî
.
√xt
, 
	`__ty≥of__
(*entry), member); \

112 &
íåy
->
membî
 !(
hód
);É¡ry = 
ß„
, \

113 
ß„
 = 
	`li°_íåy
(ß„->
membî
.
√xt
, 
	`__ty≥of__
(*
íåy
), membî))

	)

115 
	#li°_f‹_óch_íåy_ß„
(
íåy
, 
ß„
, 
hód
, 
membî
, 
ty≥
) \

116 
íåy
 = 
	`li°_íåy
((
hód
)->
√xt
, 
ty≥
, 
membî
), \

117 
ß„
 = 
	`li°_íåy
(
íåy
->
membî
.
√xt
, 
ty≥
, member); \

118 &
íåy
->
membî
 !(
hód
); \

119 
íåy
 = 
ß„
, sa„ = 
	`li°_íåy
(ß„->
membî
.
√xt
, 
ty≥
, membî))

	)

122 
	#SET_SIZE_BITS
 10

	)

123 
	#SET_SIZE
 (1 << 
SET_SIZE_BITS
)

	)

124 
	#SET_SLOTS_SIZE
 32

	)

130 
uöt32_t
 
	mèbÀ
[
SET_SIZE
][
SET_SLOTS_SIZE
];

131 } 
	t£t_t
;

137 
£t_ª£t
(
£t_t
 *
£t
);

144 
boﬁ
 
£t_add
(
£t_t
 *
£t
, 
uöt32_t
 
key
);

151 
boﬁ
 
£t_has
(
£t_t
 *
£t
, 
uöt32_t
 
key
);

	@tests/aes.c

10 
	#AES___
 128

	)

16 
	#BLOCKCIPHERS
 1

	)

17 
	#AEAD_MODES
 1

	)

19 #i‡
BLOCKCIPHERS


20 
	#ECB
 1

	)

21 
	#CBC
 1

	)

22 
	#CFB
 1

	)

23 
	#OFB
 1

	)

24 
	#CTR
 1

	)

25 
	#XEX
 1

	)

26 
	#KWA
 1

	)

27 
	#FPE
 1

	)

30 #i‡
AEAD_MODES


31 
	#CMAC
 1

	)

33 #i‡
CTR


34 
	#CCM
 1

	)

35 
	#GCM
 1

	)

36 
	#EAX
 1

	)

37 
	#SIV
 1

	)

38 
	#GCM_SIV
 1

	)

41 #i‡
XEX


42 
	#OCB
 1

	)

45 
	#POLY1305
 1

	)

48 #i‡
CBC


49 
	#CTS
 1

	)

52 #i‡
XEX


53 
	#XTS
 1

	)

56 #i‡
CTR


57 
	#CTR_NA
 1

	)

60 #i‡
EAX


61 
	#EAXP
 1

	)

64 
	#WTF
 !(
AEAD_MODES
 || 
BLOCKCIPHERS
)

	)

65 
	#M_RIJNDAEL
 
WTF


	)

71 #i‡
ECB
 || (
CBC
 && !
CTS
Ë|| (
XEX
 && !
XTS
)

72 
	#AES_PADDING
 0

	)

75 #i‡
ECB
 || 
CBC
 || 
XEX
 || 
KWA
 || 
M_RIJNDAEL


76 
	#DECRYPTION
 1

	)

79 #i‡
FPE


80 
	#CUSTOM_ALPHABET
 \

81 0

	)

83 
	#FF_X
 1

	)

86 #i‡
CTR_NA


87 
	#CTR_IV_LENGTH
 12

	)

88 
	#CTR_STARTVALUE
 1

	)

91 #i‡
CCM


92 
	#CCM_NONCE_LEN
 11

	)

93 
	#CCM_TAG_LEN
 16

	)

96 #i‡
GCM


97 
	#GCM_NONCE_LEN
 12

	)

100 #i‡
EAX
 && !
EAXP


101 
	#EAX_NONCE_LEN
 16

	)

104 #i‡
OCB


105 
	#OCB_NONCE_LEN
 12

	)

106 
	#OCB_TAG_LEN
 16

	)

112 
	~<°rög.h
>

113 #i‡
__STDC_VERSION__
 > 199900L || 
__˝lu•lus
 > 201100L || 
deföed
(
_MSC_VER
)

114 
	~<°döt.h
>

116 
	~<limôs.h
>

117 #i‡
CHAR_BIT
 == 8

118 
	tuöt8_t
;

120 #i‡
INT_MAX
 > 200000L

121 
	töt32_t
;

123 
	töt32_t
;

130 #i‡
M_RIJNDAEL


131 
AES_Cùhî
(c⁄° 
uöt8_t
 *
key
,

132 c⁄° 
mode
,

133 c⁄° 
uöt8_t
 
x
[16],

134 
uöt8_t
 
y
[16]);

140 #i‡
ECB


141 
AES_ECB_í¸y±
(c⁄° 
uöt8_t
 *
key
,

142 c⁄° 
uöt8_t
 *
≤txt
,

143 c⁄° 
size_t
 
±extLí
,

144 
uöt8_t
 *
¸txt
);

146 
AES_ECB_de¸y±
(c⁄° 
uöt8_t
 *
key
,

147 c⁄° 
uöt8_t
 *
¸txt
,

148 c⁄° 
size_t
 
¸txtLí
,

149 
uöt8_t
 *
≤txt
);

155 #i‡
CBC


156 
AES_CBC_í¸y±
(c⁄° 
uöt8_t
 *
key
,

157 c⁄° 
uöt8_t
 
iVec
[16],

158 c⁄° 
uöt8_t
 *
≤txt
,

159 c⁄° 
size_t
 
±extLí
,

160 
uöt8_t
 *
¸txt
);

162 
AES_CBC_de¸y±
(c⁄° 
uöt8_t
 *
key
,

163 c⁄° 
uöt8_t
 
iVec
[16],

164 c⁄° 
uöt8_t
 *
¸txt
,

165 c⁄° 
size_t
 
¸txtLí
,

166 
uöt8_t
 *
≤txt
);

172 #i‡
CFB


173 
AES_CFB_í¸y±
(c⁄° 
uöt8_t
 *
key
,

174 c⁄° 
uöt8_t
 
iVec
[16],

175 c⁄° 
uöt8_t
 *
≤txt
,

176 c⁄° 
size_t
 
±extLí
,

177 
uöt8_t
 *
¸txt
);

179 
AES_CFB_de¸y±
(c⁄° 
uöt8_t
 *
key
,

180 c⁄° 
uöt8_t
 
iVec
[16],

181 c⁄° 
uöt8_t
 *
¸txt
,

182 c⁄° 
size_t
 
¸txtLí
,

183 
uöt8_t
 *
≤txt
);

189 #i‡
OFB


190 
AES_OFB_í¸y±
(c⁄° 
uöt8_t
 *
key
,

191 c⁄° 
uöt8_t
 
iVec
[16],

192 c⁄° 
uöt8_t
 *
≤txt
,

193 c⁄° 
size_t
 
±extLí
,

194 
uöt8_t
 *
¸txt
);

196 
AES_OFB_de¸y±
(c⁄° 
uöt8_t
 *
key
,

197 c⁄° 
uöt8_t
 
iVec
[16],

198 c⁄° 
uöt8_t
 *
¸txt
,

199 c⁄° 
size_t
 
¸txtLí
,

200 
uöt8_t
 *
≤txt
);

206 #i‡
XTS


207 
AES_XTS_í¸y±
(c⁄° 
uöt8_t
 *
keys
,

208 c⁄° 
uöt8_t
 *
twók
,

209 c⁄° 
uöt8_t
 *
≤txt
,

210 c⁄° 
size_t
 
±extLí
,

211 
uöt8_t
 *
¸txt
);

213 
AES_XTS_de¸y±
(c⁄° 
uöt8_t
 *
keys
,

214 c⁄° 
uöt8_t
 *
twók
,

215 c⁄° 
uöt8_t
 *
¸txt
,

216 c⁄° 
size_t
 
¸txtLí
,

217 
uöt8_t
 *
≤txt
);

223 #i‡
CTR_NA


224 
AES_CTR_í¸y±
(c⁄° 
uöt8_t
 *
key
,

225 c⁄° 
uöt8_t
 *
iv
,

226 c⁄° 
uöt8_t
 *
≤txt
,

227 c⁄° 
size_t
 
±extLí
,

228 
uöt8_t
 *
¸txt
);

230 
AES_CTR_de¸y±
(c⁄° 
uöt8_t
 *
key
,

231 c⁄° 
uöt8_t
 *
iv
,

232 c⁄° 
uöt8_t
 *
¸txt
,

233 c⁄° 
size_t
 
¸txtLí
,

234 
uöt8_t
 *
≤txt
);

240 #i‡
SIV


241 
AES_SIV_í¸y±
(c⁄° 
uöt8_t
 *
keys
,

242 c⁄° 
uöt8_t
 *
≤txt
,

243 c⁄° 
size_t
 
±extLí
,

244 c⁄° 
uöt8_t
 *
aD©a
,

245 c⁄° 
size_t
 
aD©aLí
,

246 
uöt8_t
 
iv
[16],

247 
uöt8_t
 *
¸txt
);

249 
AES_SIV_de¸y±
(c⁄° 
uöt8_t
 *
keys
,

250 c⁄° 
uöt8_t
 
iv
[16],

251 c⁄° 
uöt8_t
 *
¸txt
,

252 c⁄° 
size_t
 
¸txtLí
,

253 c⁄° 
uöt8_t
 *
aD©a
,

254 c⁄° 
size_t
 
aD©aLí
,

255 
uöt8_t
 *
≤txt
);

261 #i‡
GCM


262 
AES_GCM_í¸y±
(c⁄° 
uöt8_t
 *
key
,

263 c⁄° 
uöt8_t
 *
n⁄˚
,

264 c⁄° 
uöt8_t
 *
≤txt
,

265 c⁄° 
size_t
 
±extLí
,

266 c⁄° 
uöt8_t
 *
aD©a
,

267 c⁄° 
size_t
 
aD©aLí
,

268 
uöt8_t
 *
¸txt
,

269 
uöt8_t
 
auTag
[16]);

271 
AES_GCM_de¸y±
(c⁄° 
uöt8_t
 *
key
,

272 c⁄° 
uöt8_t
 *
n⁄˚
,

273 c⁄° 
uöt8_t
 *
¸txt
,

274 c⁄° 
size_t
 
¸txtLí
,

275 c⁄° 
uöt8_t
 *
aD©a
,

276 c⁄° 
size_t
 
aD©aLí
,

277 c⁄° 
uöt8_t
 
ègLí
,

278 
uöt8_t
 *
≤txt
);

284 #i‡
CCM


285 
AES_CCM_í¸y±
(c⁄° 
uöt8_t
 *
key
,

286 c⁄° 
uöt8_t
 *
n⁄˚
,

287 c⁄° 
uöt8_t
 *
≤txt
,

288 c⁄° 
size_t
 
±extLí
,

289 c⁄° 
uöt8_t
 *
aD©a
,

290 c⁄° 
size_t
 
aD©aLí
,

291 
uöt8_t
 *
¸txt
,

292 
uöt8_t
 
auTag
[16]);

294 
AES_CCM_de¸y±
(c⁄° 
uöt8_t
 *
key
,

295 c⁄° 
uöt8_t
 *
n⁄˚
,

296 c⁄° 
uöt8_t
 *
¸txt
,

297 c⁄° 
size_t
 
¸txtLí
,

298 c⁄° 
uöt8_t
 *
aD©a
,

299 c⁄° 
size_t
 
aD©aLí
,

300 c⁄° 
uöt8_t
 
ègLí
,

301 
uöt8_t
 *
≤txt
);

307 #i‡
OCB


308 
AES_OCB_í¸y±
(c⁄° 
uöt8_t
 *
key
,

309 c⁄° 
uöt8_t
 *
n⁄˚
,

310 c⁄° 
uöt8_t
 *
≤txt
,

311 c⁄° 
size_t
 
±extLí
,

312 c⁄° 
uöt8_t
 *
aD©a
,

313 c⁄° 
size_t
 
aD©aLí
,

314 
uöt8_t
 *
¸txt
,

315 
uöt8_t
 
auTag
[16]);

317 
AES_OCB_de¸y±
(c⁄° 
uöt8_t
 *
key
,

318 c⁄° 
uöt8_t
 *
n⁄˚
,

319 c⁄° 
uöt8_t
 *
¸txt
,

320 c⁄° 
size_t
 
¸txtLí
,

321 c⁄° 
uöt8_t
 *
aD©a
,

322 c⁄° 
size_t
 
aD©aLí
,

323 c⁄° 
uöt8_t
 
ègLí
,

324 
uöt8_t
 *
≤txt
);

330 #i‡
EAX


331 
AES_EAX_í¸y±
(c⁄° 
uöt8_t
 *
key
,

332 c⁄° 
uöt8_t
 *
n⁄˚
,

333 c⁄° 
uöt8_t
 *
≤txt
,

334 c⁄° 
size_t
 
±extLí
,

335 #i‡
EAXP


336 c⁄° 
size_t
 
n⁄˚Lí
,

337 
uöt8_t
 *
¸txt
);

339 c⁄° 
uöt8_t
 *
	gaD©a
,

340 c⁄° 
size_t
 
	gaD©aLí
,

341 
uöt8_t
 *
	g¸txt
,

342 
uöt8_t
 
	gauTag
[16]);

345 
AES_EAX_de¸y±
(c⁄° 
uöt8_t
 *
key
,

346 c⁄° 
uöt8_t
 *
n⁄˚
,

347 c⁄° 
uöt8_t
 *
¸txt
,

348 c⁄° 
size_t
 
¸txtLí
,

349 #i‡
EAXP


350 c⁄° 
size_t
 
n⁄˚Lí
,

352 c⁄° 
uöt8_t
 *
aD©a
,

353 c⁄° 
size_t
 
aD©aLí
,

354 c⁄° 
uöt8_t
 
ègLí
,

356 
uöt8_t
 *
≤txt
);

362 #i‡
GCM_SIV


363 
GCM_SIV_í¸y±
(c⁄° 
uöt8_t
 *
key
,

364 c⁄° 
uöt8_t
 *
n⁄˚
,

365 c⁄° 
uöt8_t
 *
≤txt
,

366 c⁄° 
size_t
 
±extLí
,

367 c⁄° 
uöt8_t
 *
aD©a
,

368 c⁄° 
size_t
 
aD©aLí
,

369 
uöt8_t
 *
¸txt
,

370 
uöt8_t
 
auTag
[16]);

372 
GCM_SIV_de¸y±
(c⁄° 
uöt8_t
 *
key
,

373 c⁄° 
uöt8_t
 *
n⁄˚
,

374 c⁄° 
uöt8_t
 *
¸txt
,

375 c⁄° 
size_t
 
¸txtLí
,

376 c⁄° 
uöt8_t
 *
aD©a
,

377 c⁄° 
size_t
 
aD©aLí
,

378 c⁄° 
uöt8_t
 
ègLí
,

379 
uöt8_t
 *
≤txt
);

385 #i‡
KWA


386 
AES_KEY_wøp
(c⁄° 
uöt8_t
 *
kek
,

387 c⁄° 
uöt8_t
 *
£¸ë
,

388 c⁄° 
size_t
 
£¸ëLí
,

389 
uöt8_t
 *
wøµed
);

391 
AES_KEY_unwøp
(c⁄° 
uöt8_t
 *
kek
,

392 c⁄° 
uöt8_t
 *
wøµed
,

393 c⁄° 
size_t
 
wøpLí
,

394 
uöt8_t
 *
£¸ë
);

400 #i‡
FPE


401 
AES_FPE_í¸y±
(c⁄° 
uöt8_t
 *
key
,

402 c⁄° 
uöt8_t
 *
twók
,

403 #i‡
FF_X
 == 3

404 
	#FF3_TWEAK_LEN
 7

	)

406 c⁄° 
size_t
 
twókLí
,

408 c⁄° *
≤txt
,

409 c⁄° 
size_t
 
±extLí
,

410 *
¸txt
);

412 
AES_FPE_de¸y±
(c⁄° 
uöt8_t
 *
key
,

413 c⁄° 
uöt8_t
 *
twók
,

414 #i‡
FF_X
 != 3

415 c⁄° 
size_t
 
twókLí
,

417 c⁄° *
¸txt
,

418 c⁄° 
size_t
 
¸txtLí
,

419 *
≤txt
);

425 #i‡
POLY1305


426 
AES_Pﬁy1305
(c⁄° 
uöt8_t
 *
keys
,

427 c⁄° 
uöt8_t
 
n⁄˚
[16],

428 c⁄° *
d©a
,

429 c⁄° 
size_t
 
d©aSize
,

430 
uöt8_t
 
mac
[16]);

436 #i‡
CMAC


437 
AES_CMAC
(c⁄° 
uöt8_t
 *
key
,

438 c⁄° *
d©a
,

439 c⁄° 
size_t
 
d©aSize
,

440 
uöt8_t
 
mac
[16]);

446 
	#ENCRYPTION_FAILURE
 0x1E

	)

447 
	#DECRYPTION_FAILURE
 0x1D

	)

448 
	#AUTHENTICATION_FAILURE
 0x1A

	)

449 
	#ENDED_IN_SUCCESS
 0x00

	)

451 #i‡(
AES___
 != 256) && (AES___ != 192)

452 
	#AES_KEY_SIZE
 16

	)

454 
	#AES_KEY_SIZE
 (
AES___
 / 8)

	)

526 
	#KEYSIZE
 
AES_KEY_SIZE


	)

527 
	#BLOCKSIZE
 (128 / 8Ë

	)

528 
	#Nb
 (
BLOCKSIZE
 / 4Ë

	)

529 
	#Nk
 (
KEYSIZE
 / 4Ë

	)

530 
	#ROUNDS
 (
Nk
 + 6Ë

	)

532 
	#IMPLEMENT
(
x
Ë(xË> 0

	)

534 
	#INCREASE_SECURITY
 0

	)

535 
	#DONT_USE_FUNCTIONS
 0

	)

536 
	#SMALL_CIPHER
 0

	)

540 
uöt8_t
 
	tblock_t
[
BLOCKSIZE
];

541 
uöt8_t
 
	t°©e_t
[
Nb
][4];

548 
uöt8_t
 
	gRoundKey
[
BLOCKSIZE
 * 
ROUNDS
 + 
KEYSIZE
];

556 c⁄° 
	gsbox
[256] =

568 #i‡
DECRYPTION


569 c⁄° 
	grsbox
[256] =

586 
	#SBoxVÆue
(
x
Ë(
sbox
[x])

	)

587 
	#InvSBoxVÆue
(
x
Ë(
rsbox
[x]Ë

	)

589 
	#COPY32BIT
(
x
, 
y
Ë*(
öt32_t
 *Ë&(yË*(öt32_à*Ë&
	)
x

590 
	#XOR32BITS
(
x
, 
y
Ë*(
öt32_t
 *Ë&(yË^*(öt32_à*Ë&
	)
x

592 #i‡
DONT_USE_FUNCTIONS


595 
	#x‹Block
(
x
, 
y
) \

597 *(*Ë&(
y
)[0] ^*(c⁄° *Ë&(
x
)[0]; \

598 *(*Ë&(
y
)[8] ^*(c⁄° *Ë&(
x
)[8]; \

599 }

	)

601 
	#xtime
(
x
Ë(x & 0x80 ? x << 1 ^ 0x11b : x * 2)

	)

603 
	#gmul
(
x
, 
y
) \

604 (
x
 * (
y
 <13)Ë^ (
	`xtime
(x) * (y / 2 & 1)) ^ \

605 (
	`xtime
(xtime(
x
)Ë* (
y
 >13)Ë^ (xtime(xtime(xtime(x))))

	)

609 
	$x‹Block
(c⁄° 
block_t
 
§c
, block_à
de°
)

611 
uöt8_t
 
i
;

612 
i
 = 0; i < 
BLOCKSIZE
; ++i)

614 
de°
[
i
] ^
§c
[i];

616 
	}
}

619 
uöt8_t
 
	$xtime
(
uöt8_t
 
x
)

621  (
x
 > 0x7f) * 0x1b ^ (x << 1);

622 
	}
}

624 #i‡
DECRYPTION


627 
uöt8_t
 
	$gmul
(
uöt8_t
 
x
, uöt8_à
y
)

629 
uöt8_t
 
m
;

630 
m
 = 0; 
y
 > 1; y >>= 1)

632 i‡(
y
 & 01)

633 
m
 ^
x
;

634 
x
 = 
	`xtime
(x);

636  
m
 ^ 
x
;

637 
	}
}

648 
	$KeyEx∑nsi⁄
(c⁄° 
uöt8_t
 *
key
)

650 
uöt8_t
 
rc⁄
 = 1, 
i
;

651 
	`mem˝y
(
RoundKey
, 
key
, 
KEYSIZE
);

653 
i
 = 
KEYSIZE
; i < (
ROUNDS
 + 1Ë* 
Nb
 * 4; i += 4) {

654 
i
 % 
KEYSIZE
) {

656 
	`mem˝y
(&
RoundKey
[
i
], &RoundKey[ò- 
KEYSIZE
], KEYSIZE);

657 #i‡
Nk
 == 4

658 i‡(!
rc⁄
)

659 
rc⁄
 = 0x1b;

661 
RoundKey
[
i
] ^
	`SBoxVÆue
(RoundKey[ò- 3]Ë^ 
rc⁄
;

662 
RoundKey
[
i
 + 1] ^
	`SBoxVÆue
(RoundKey[i - 2]);

663 
RoundKey
[
i
 + 2] ^
	`SBoxVÆue
(RoundKey[i - 1]);

664 
RoundKey
[
i
 + 3] ^
	`SBoxVÆue
(RoundKey[i - 4]);

665 
rc⁄
 <<= 1;

667 #i‡
Nk
 == 8

669 
RoundKey
[
i
] ^
	`SBoxVÆue
(RoundKey[i - 4]);

670 
RoundKey
[
i
 + 1] ^
	`SBoxVÆue
(RoundKey[i - 3]);

671 
RoundKey
[
i
 + 2] ^
	`SBoxVÆue
(RoundKey[i - 2]);

672 
RoundKey
[
i
 + 3] ^
	`SBoxVÆue
(RoundKey[i - 1]);

676 
	`XOR32BITS
(
RoundKey
[
i
 - 0x4], RoundKey[i]);

680 
	}
}

683 
	$AddRoundKey
(c⁄° 
uöt8_t
 
round
, 
block_t
 
°©e
)

685 
	`x‹Block
(
RoundKey
 + 
BLOCKSIZE
 * 
round
, 
°©e
);

686 
	}
}

689 
	$SubByãs
(
block_t
 
°©e
)

691 
uöt8_t
 
i
;

692 
i
 = 0; i < 
BLOCKSIZE
; ++i) {

693 
°©e
[
i
] = 
	`SBoxVÆue
(state[i]);

695 
	}
}

699 
	$Shi·Rows
(
°©e_t
 *
°©e
)

701 
uöt8_t
 
ãmp
 = (*
°©e
)[0][1];

702 (*
°©e
)[0][1] = (*state)[1][1];

703 (*
°©e
)[1][1] = (*state)[2][1];

704 (*
°©e
)[2][1] = (*state)[3][1];

705 (*
°©e
)[3][1] = 
ãmp
;

707 
ãmp
 = (*
°©e
)[0][2];

708 (*
°©e
)[0][2] = (*state)[2][2];

709 (*
°©e
)[2][2] = 
ãmp
;

710 
ãmp
 = (*
°©e
)[1][2];

711 (*
°©e
)[1][2] = (*state)[3][2];

712 (*
°©e
)[3][2] = 
ãmp
;

714 
ãmp
 = (*
°©e
)[0][3];

715 (*
°©e
)[0][3] = (*state)[3][3];

716 (*
°©e
)[3][3] = (*state)[2][3];

717 (*
°©e
)[2][3] = (*state)[1][3];

718 (*
°©e
)[1][3] = 
ãmp
;

719 
	}
}

722 
	$MixCﬁumns
(
°©e_t
 *
°©e
)

724 
uöt8_t
 
a
, 
b
, 
c
, 
d
, 
i
;

725 
i
 = 0; i < 
Nb
; ++i) {

726 
a
 = (*
°©e
)[
i
][0] ^ (*state)[i][1];

727 
b
 = (*
°©e
)[
i
][1] ^ (*state)[i][2];

728 
c
 = (*
°©e
)[
i
][2] ^ (*state)[i][3];

730 
d
 = 
a
 ^ 
c
;

731 (*
°©e
)[
i
][0] ^
d
 ^ 
	`xtime
(
a
);

732 (*
°©e
)[
i
][1] ^
d
 ^ 
	`xtime
(
b
);

734 
b
 ^
d
;

735 (*
°©e
)[
i
][2] ^
d
 ^ 
	`xtime
(
c
);

736 (*
°©e
)[
i
][3] ^
d
 ^ 
	`xtime
(
b
);

738 
	}
}

741 
	$rijnd´lEn¸y±
(c⁄° 
block_t
 
öput
, block_à
ouçut
)

743 
uöt8_t
 
r
;

744 
°©e_t
 *
°©e
 = (*Ë
ouçut
;

747 i‡(
öput
 !
ouçut
)

748 
	`mem˝y
(
°©e
, 
öput
, 
BLOCKSIZE
);

752 
r
 = 0;Ñ !
ROUNDS
;) {

753 
	`AddRoundKey
(
r
, 
ouçut
);

754 
	`SubByãs
(
ouçut
);

755 
	`Shi·Rows
(
°©e
);

756 ++
r
 !
ROUNDS
 ? 
	`MixCﬁumns
(
°©e
Ë: 
	`AddRoundKey
(ROUNDS, 
ouçut
);

758 
	}
}

764 #i‡
IMPLEMENT
(
DECRYPTION
)

767 
	$InvSubByãs
(
block_t
 
°©e
)

769 
uöt8_t
 
i
;

770 
i
 = 0; i < 
BLOCKSIZE
; ++i) {

771 
°©e
[
i
] = 
	`InvSBoxVÆue
(state[i]);

773 
	}
}

776 
	$InvShi·Rows
(
°©e_t
 *
°©e
)

778 
uöt8_t
 
ãmp
 = (*
°©e
)[3][1];

779 (*
°©e
)[3][1] = (*state)[2][1];

780 (*
°©e
)[2][1] = (*state)[1][1];

781 (*
°©e
)[1][1] = (*state)[0][1];

782 (*
°©e
)[0][1] = 
ãmp
;

784 
ãmp
 = (*
°©e
)[0][2];

785 (*
°©e
)[0][2] = (*state)[2][2];

786 (*
°©e
)[2][2] = 
ãmp
;

787 
ãmp
 = (*
°©e
)[1][2];

788 (*
°©e
)[1][2] = (*state)[3][2];

789 (*
°©e
)[3][2] = 
ãmp
;

791 
ãmp
 = (*
°©e
)[0][3];

792 (*
°©e
)[0][3] = (*state)[1][3];

793 (*
°©e
)[1][3] = (*state)[2][3];

794 (*
°©e
)[2][3] = (*state)[3][3];

795 (*
°©e
)[3][3] = 
ãmp
;

796 
	}
}

799 
	$InvMixCﬁumns
(
°©e_t
 *
°©e
)

801 
uöt8_t
 
i
, 
x
[4];

802 
i
 = 0; i < 
Nb
; ++i)

804 
	`COPY32BIT
((*
°©e
)[
i
][0], 
x
[0]);

806 (*
°©e
)[
i
][0] =

807 
	`gmul
(
x
[0], 14) ^ gmul(x[1], 11) ^ gmul(x[2], 13) ^ gmul(x[3], 9);

808 (*
°©e
)[
i
][1] =

809 
	`gmul
(
x
[1], 14) ^ gmul(x[2], 11) ^ gmul(x[3], 13) ^ gmul(x[0], 9);

810 (*
°©e
)[
i
][2] =

811 
	`gmul
(
x
[2], 14) ^ gmul(x[3], 11) ^ gmul(x[0], 13) ^ gmul(x[1], 9);

812 (*
°©e
)[
i
][3] =

813 
	`gmul
(
x
[3], 14) ^ gmul(x[0], 11) ^ gmul(x[1], 13) ^ gmul(x[2], 9);

815 
	}
}

818 
	$rijnd´lDe¸y±
(c⁄° 
block_t
 
öput
, block_à
ouçut
)

820 
uöt8_t
 
r
;

821 
°©e_t
 *
°©e
 = (*Ë
ouçut
;

824 i‡(
öput
 !
ouçut
)

825 
	`mem˝y
(
°©e
, 
öput
, 
BLOCKSIZE
);

829 
r
 = 
ROUNDS
;Ñ != 0;) {

830 
r
-- !
ROUNDS
 ? 
	`InvMixCﬁumns
(
°©e
Ë: 
	`AddRoundKey
(ROUNDS, 
ouçut
);

831 
	`InvShi·Rows
(
°©e
);

832 
	`InvSubByãs
(
ouçut
);

833 
	`AddRoundKey
(
r
, 
ouçut
);

835 
	}
}

839 #i‡
M_RIJNDAEL


847 
	$AES_Cùhî
(c⁄° 
uöt8_t
 *
key
, c⁄° 
mode
, c⁄° 
block_t
 
x
, block_à
y
)

849 
	`KeyEx∑nsi⁄
(
key
);

850 
mode
 & 1 ? 
	`rijnd´lEn¸y±
(
x
, 
y
Ë: 
	`rijnd´lDe¸y±
(x, y);

851 
	}
}

859 
	#AES_SëKey
(
key
Ë
	`KeyEx∑nsi⁄
(key)

	)

861 #i‡
INCREASE_SECURITY


862 
	#BURN
(
key
Ë
	`mem£t
(key, 0,  key)

	)

863 
	#SABOTAGE
(
buf
, 
Àn
Ë
	`mem£t
(buf, 0,Üí)

	)

864 
	#MISMATCH
 
c⁄°memcmp


	)

866 
	#MISMATCH
 
memcmp


	)

867 
	#SABOTAGE
(
buf
, 
Àn
Ë(Ë
	)
buf

868 
	#BURN
(
key
Ë(Ëkey

	)

871 #i‡
INCREASE_SECURITY
 && 
AEAD_MODES


874 
uöt8_t
 
	$c⁄°memcmp
(c⁄° 
uöt8_t
 *
§c
, c⁄° uöt8_à*
d°
, uöt8_à
n
)

876 
uöt8_t
 
cmp
 = 0;

877 
n
--) {

878 
cmp
 |
§c
[
n
] ^ 
d°
[n];

880  
cmp
;

881 
	}
}

885 (*
	tfdoubÀ_t
)(
	tblock_t
);

886 (*
	tfmix_t
)(c⁄° 
	tblock_t
, block_t);

888 
	#LAST
 (
BLOCKSIZE
 - 1Ë

	)

890 #i‡
SMALL_CIPHER


891 
uöt8_t
 
	tcou¡_t
;

893 
	#öcBlock
(
block
, 
big
Ë++block[big ? 
LAST
 : 0]

	)

894 
	#x‹2BVÆ
(
buf
, 
num
, 
pos
) \

895 
buf
[
pos
 - 1] ^(
num
) >> 8; \

896 
buf
[
pos
] ^
num


	)

897 
	#c›yLVÆ
(
buf
, 
num
, 
pos
) \

898 
buf
[
pos
 + 1] = (
num
) >> 8; \

899 
buf
[
pos
] = 
num


	)

902 
size_t
 
	tcou¡_t
;

904 #i‡
CTR
 || 
KWA
 || 
FPE


907 
	$x‹2BVÆ
(
uöt8_t
 *
buff
, 
size_t
 
vÆ
, uöt8_à
pos
)

910 
buff
[
pos
--] ^(
uöt8_t
Ë
vÆ
;

911 
vÆ
 >>= 8);

912 
	}
}

915 #i‡
XTS
 || 
GCM_SIV


918 
	$c›yLVÆ
(
block_t
 
block
, 
size_t
 
vÆ
, 
uöt8_t
 
pos
)

921 
block
[
pos
++] = (
uöt8_t
Ë
vÆ
;

922 
vÆ
 >>= 8);

923 
	}
}

926 #i‡
CTR


929 
	$öcBlock
(
block_t
 
block
, c⁄° 
big
)

931 
uöt8_t
 
i
 = 
big
 ? 
LAST
 : 0;

932 i‡(
i
)

934 !++
block
[
i
])

935 --
i
;

937 
i
 < 4 && !++
block
[i])

938 ++
i
;

940 
	}
}

944 #i‡
EAX
 && !
EAXP
 || 
SIV
 || 
OCB
 || 
CMAC


947 
	$doubÀBGF128
(
block_t
 
block
)

949 
i
, 
c
 = 0;

950 
i
 = 
BLOCKSIZE
; i; 
c
 >>= 8)

952 
c
 |
block
[--
i
] << 1;

953 
block
[
i
] = (
uöt8_t
Ë
c
;

955 
block
[
LAST
] ^
c
 * 0x87;

956 
	}
}

959 #i‡
XTS
 || 
EAXP


962 
	$doubÀLGF128
(
block_t
 
block
)

964 
c
 = 0, 
i
;

965 
i
 = 0; i < 
BLOCKSIZE
; 
c
 >>= 8)

967 
c
 |
block
[
i
] << 1;

968 
block
[
i
++] = (
uöt8_t
Ë
c
;

970 
block
[0] ^
c
 * 0x87;

971 
	}
}

974 #i‡
GCM


977 
	$hÆveBGF128
(
block_t
 
block
)

979 
i
, 
c
 = 0;

980 
i
 = 0; i < 
BLOCKSIZE
; 
c
 <<= 8)

982 
c
 |
block
[
i
];

983 
block
[
i
++] = (
uöt8_t
Ë(
c
 >> 1);

985 i‡(
c
 & 0x100)

986 
block
[0] ^= 0xe1;

987 
	}
}

990 
	$mulGF128
(c⁄° 
block_t
 
x
, block_à
y
)

992 
uöt8_t
 
i
, 
j
, 
ªsu…
[
BLOCKSIZE
] = {0};

994 
i
 = 0; i < 
BLOCKSIZE
; ++i) {

995 
j
 = 0; j < 8; ++j)

997 i‡(
x
[
i
] << 
j
 & 0x80)

999 
	`x‹Block
(
y
, 
ªsu…
);

1001 
	`hÆveBGF128
(
y
);

1004 
	`mem˝y
(
y
, 
ªsu…
, Ñesult);

1005 
	}
}

1008 #i‡
GCM_SIV


1011 
	$hÆveLGF128
(
block_t
 
block
)

1013 
c
 = 0, 
i
;

1014 
i
 = 
BLOCKSIZE
; i; 
c
 <<= 8)

1016 
c
 |
block
[--
i
];

1017 
block
[
i
] = (
uöt8_t
Ë(
c
 >> 1);

1019 i‡(
c
 & 0x100)

1020 
block
[
LAST
] ^= 0xe1;

1021 
	}
}

1024 
	$dŸGF128
(c⁄° 
block_t
 
x
, block_à
y
)

1026 
uöt8_t
 
i
, 
j
, 
ªsu…
[
BLOCKSIZE
] = {0};

1028 
i
 = 
BLOCKSIZE
; i--;) {

1029 
j
 = 8; j--;)

1031 
	`hÆveLGF128
(
y
);

1032 i‡(
x
[
i
] >> 
j
 & 1) {

1033 
	`x‹Block
(
y
, 
ªsu…
);

1037 
	`mem˝y
(
y
, 
ªsu…
, Ñesult);

1038 
	}
}

1041 #i‡
CBC
 || 
CFB
 || 
OFB
 || 
CTR
 || 
OCB


1044 
	$mixThíX‹
(
fmix_t
 
mix
,

1045 c⁄° 
block_t
 
b
,

1046 
block_t
 
f
,

1047 c⁄° 
uöt8_t
 *
x
,

1048 c⁄° 
uöt8_t
 
Àn
,

1049 
uöt8_t
 *
y
)

1051 
uöt8_t
 
i
 = 
Àn
;

1052 i‡(
Àn
) {

1053 
	`mix
(
b
, 
f
);

1054 
i
--) {

1055 
y
[
i
] = 
f
[i] ^ 
x
[i];

1058 
	}
}

1061 #i‡
AEAD_MODES
 || 
FPE


1065 
	$xMac
(c⁄° *
d©a
,

1066 c⁄° 
size_t
 
d©aSize
,

1067 c⁄° 
block_t
 
£ed
,

1068 
fmix_t
 
mix
,

1069 
block_t
 
ªsu…
)

1071 
uöt8_t
 c⁄° *
x
;

1072 
cou¡_t
 
n
 = 
d©aSize
 / 
BLOCKSIZE
;

1074 
x
 = 
d©a
; 
n
--; x +
BLOCKSIZE
) {

1075 
	`x‹Block
(
x
, 
ªsu…
);

1076 
	`mix
(
£ed
, 
ªsu…
);

1078 i‡((
n
 = 
d©aSize
 % 
BLOCKSIZE
) != 0) {

1079 
n
--) {

1080 
ªsu…
[
n
] ^
x
[n];

1082 
	`mix
(
£ed
, 
ªsu…
);

1084 
	}
}

1087 #i‡
CMAC
 || 
SIV
 || 
EAX
 || 
OCB


1090 
	$cMac
(c⁄° 
block_t
 
D
,

1091 c⁄° 
block_t
 
Q
,

1092 c⁄° *
d©a
,

1093 c⁄° 
size_t
 
d©aSize
,

1094 
block_t
 
mac
)

1096 c⁄° 
uöt8_t
 
r
 = 
d©aSize
 ? (d©aSizê- 1Ë% 
BLOCKSIZE
 + 1 : 0;

1097 c⁄° 
uöt8_t
 *
p
 = 
r
 ? (uöt8_àc⁄° *Ë
d©a
 + 
d©aSize
 -Ñ : &r;

1099 
	`xMac
(
d©a
, 
d©aSize
 - 
r
, 
mac
, &
rijnd´lEn¸y±
, mac);

1100 i‡(
r
 < 
BLOCKSIZE
) {

1101 
mac
[
r
] ^= 0x80;

1103 
	`x‹Block
(
r
 < 
BLOCKSIZE
 ? 
Q
 : 
D
, 
mac
);

1105 
	`xMac
(
p
, 
r
 + !r, 
mac
, &
rijnd´lEn¸y±
, mac);

1106 
	}
}

1109 
	$gëSubkeys
(
fdoubÀ_t
 
fdoubÀ
,

1110 c⁄° 
quad
,

1111 c⁄° 
uöt8_t
 *
key
,

1112 
block_t
 
D
,

1113 
block_t
 
Q
)

1115 
	`AES_SëKey
(
key
);

1116 
	`rijnd´lEn¸y±
(
D
, D);

1117 i‡(
quad
) {

1118 
	`fdoubÀ
(
D
);

1120 
	`mem˝y
(
Q
, 
D
, 
BLOCKSIZE
);

1121 
	`fdoubÀ
(
Q
);

1122 
	}
}

1125 #ifde‡
AES_PADDING


1128 
	$∑dBlock
(c⁄° 
uöt8_t
 
Àn
, 
block_t
 
block
)

1130 #i‡
AES_PADDING


1131 
uöt8_t
 
n
 = 
BLOCKSIZE
 - 
Àn
, *
p
 = &
block
[len];

1132 
	`mem£t
(
p
, 
n
 * (
AES_PADDING
 != 2),Ç);

1133 *
p
 ^'\x80' * (
AES_PADDING
 == 2);

1135 i‡(
Àn
)

1137 
	`mem£t
(
block
 + 
Àn
, 0, 
BLOCKSIZE
 -Üen);

1140  
Àn
 || 
AES_PADDING
;

1141 
	}
}

1148 #i‡
IMPLEMENT
(
ECB
)

1156 
	$AES_ECB_í¸y±
(c⁄° 
uöt8_t
 *
key
,

1157 c⁄° 
uöt8_t
 *
≤txt
,

1158 c⁄° 
size_t
 
±extLí
,

1159 
uöt8_t
 *
¸txt
)

1161 
uöt8_t
 *
y
;

1162 
cou¡_t
 
n
 = 
±extLí
 / 
BLOCKSIZE
;

1163 
	`mem˝y
(
¸txt
, 
≤txt
, 
±extLí
);

1165 
	`AES_SëKey
(
key
);

1166 
y
 = 
¸txt
; 
n
--; y +
BLOCKSIZE
) {

1167 
	`rijnd´lEn¸y±
(
y
, y);

1169 i‡(
	`∑dBlock
(
±extLí
 % 
BLOCKSIZE
, 
y
)) {

1170 
	`rijnd´lEn¸y±
(
y
, y);

1172 
	`BURN
(
RoundKey
);

1173 
	}
}

1183 
	$AES_ECB_de¸y±
(c⁄° 
uöt8_t
 *
key
,

1184 c⁄° 
uöt8_t
 *
¸txt
,

1185 c⁄° 
size_t
 
¸txtLí
,

1186 
uöt8_t
 *
≤txt
)

1188 
uöt8_t
 *
y
;

1189 
cou¡_t
 
n
 = 
¸txtLí
 / 
BLOCKSIZE
;

1190 
	`mem˝y
(
≤txt
, 
¸txt
, 
¸txtLí
);

1192 
	`AES_SëKey
(
key
);

1193 
y
 = 
≤txt
; 
n
--; y +
BLOCKSIZE
) {

1194 
	`rijnd´lDe¸y±
(
y
, y);

1196 
	`BURN
(
RoundKey
);

1200  
¸txtLí
 % 
BLOCKSIZE
 ? 
DECRYPTION_FAILURE
 : 
ENDED_IN_SUCCESS
;

1201 
	}
}

1208 #i‡
IMPLEMENT
(
CBC
)

1218 
	$AES_CBC_í¸y±
(c⁄° 
uöt8_t
 *
key
,

1219 c⁄° 
block_t
 
iVec
,

1220 c⁄° 
uöt8_t
 *
≤txt
,

1221 c⁄° 
size_t
 
±extLí
,

1222 
uöt8_t
 *
¸txt
)

1224 
uöt8_t
 c⁄° *
iv
 = 
iVec
;

1225 
uöt8_t
 
r
 = 
±extLí
 % 
BLOCKSIZE
, *
y
;

1226 
cou¡_t
 
n
 = 
±extLí
 / 
BLOCKSIZE
;

1227 #i‡
CTS


1228 i‡(
n
 == 0)

1229  
ENCRYPTION_FAILURE
;

1231 i‡(
r
 =0 && --
n
)

1232 
r
 = 
BLOCKSIZE
;

1233 
n
 += !n;

1235 
	`mem˝y
(
¸txt
, 
≤txt
, 
±extLí
);

1237 
	`AES_SëKey
(
key
);

1238 
y
 = 
¸txt
; 
n
--; y +
BLOCKSIZE
) {

1239 
	`x‹Block
(
iv
, 
y
);

1240 
	`rijnd´lEn¸y±
(
y
, y);

1241 
iv
 = 
y
;

1244 #i‡
CTS


1245 i‡(
r
) {

1246 
block_t
 
yn
 = {0};

1247 
	`mem˝y
(
yn
, 
y
, 
r
);

1248 
	`mem˝y
(
y
, y - 
BLOCKSIZE
, 
r
);

1249 
y
 -
BLOCKSIZE
;

1250 
iv
 = 
yn
;

1252 i‡(
	`∑dBlock
(
r
, 
y
)) {

1254 
	`x‹Block
(
iv
, 
y
);

1255 
	`rijnd´lEn¸y±
(
y
, y);

1257 
	`BURN
(
RoundKey
);

1258  
ENDED_IN_SUCCESS
;

1259 
	}
}

1270 
	$AES_CBC_de¸y±
(c⁄° 
uöt8_t
 *
key
,

1271 c⁄° 
block_t
 
iVec
,

1272 c⁄° 
uöt8_t
 *
¸txt
,

1273 c⁄° 
size_t
 
¸txtLí
,

1274 
uöt8_t
 *
≤txt
)

1276 
uöt8_t
 c⁄° *
x
 = 
¸txt
, *
iv
 = 
iVec
;

1277 
uöt8_t
 
r
 = 
¸txtLí
 % 
BLOCKSIZE
, *
y
;

1278 
cou¡_t
 
n
 = 
¸txtLí
 / 
BLOCKSIZE
;

1279 #i‡
CTS


1280 i‡(
n
 == 0)

1281  
DECRYPTION_FAILURE
;

1283 i‡(
r
 =0 && --
n
)

1284 
r
 = 
BLOCKSIZE
;

1285 
n
 -(
r
 > 0) - !n;

1287 i‡(
r
)

1288  
DECRYPTION_FAILURE
;

1291 
	`AES_SëKey
(
key
);

1292 
y
 = 
≤txt
; 
n
--; y +
BLOCKSIZE
) {

1293 
	`rijnd´lDe¸y±
(
x
, 
y
);

1294 
	`x‹Block
(
iv
, 
y
);

1295 
iv
 = 
x
;

1296 
x
 +
BLOCKSIZE
;

1298 i‡(
r
) {

1299 
	`mixThíX‹
(&
rijnd´lDe¸y±
, 
x
, 
y
, x + 
BLOCKSIZE
, 
r
, y + BLOCKSIZE);

1300 
	`mem˝y
(
y
, 
x
 + 
BLOCKSIZE
, 
r
);

1301 
	`rijnd´lDe¸y±
(
y
, y);

1302 
	`x‹Block
(
iv
, 
y
);

1304 
	`BURN
(
RoundKey
);

1307  
ENDED_IN_SUCCESS
;

1308 
	}
}

1315 #i‡
IMPLEMENT
(
CFB
)

1325 
	$CFB_Cùhî
(c⁄° 
uöt8_t
 *
key
,

1326 c⁄° 
block_t
 
iVec
,

1327 c⁄° 
mode
,

1328 c⁄° *
öput
,

1329 c⁄° 
size_t
 
d©aSize
,

1330 *
ouçut
)

1332 
uöt8_t
 c⁄° *
iv
 = 
iVec
, *
x
;

1333 
uöt8_t
 *
y
 = 
ouçut
, 
tmp
[
BLOCKSIZE
];

1334 
cou¡_t
 
n
 = 
d©aSize
 / 
BLOCKSIZE
;

1336 
	`AES_SëKey
(
key
);

1337 
x
 = 
öput
; 
n
--; x +
BLOCKSIZE
) {

1338 
	`rijnd´lEn¸y±
(
iv
, 
y
);

1339 
	`x‹Block
(
x
, 
y
);

1340 
iv
 = 
mode
 ? 
y
 : 
x
;

1341 
y
 +
BLOCKSIZE
;

1343 
	`mixThíX‹
(&
rijnd´lEn¸y±
, 
iv
, 
tmp
, 
x
, 
d©aSize
 % 
BLOCKSIZE
, 
y
);

1344 
	`BURN
(
RoundKey
);

1345 
	}
}

1355 
	$AES_CFB_í¸y±
(c⁄° 
uöt8_t
 *
key
,

1356 c⁄° 
block_t
 
iVec
,

1357 c⁄° 
uöt8_t
 *
≤txt
,

1358 c⁄° 
size_t
 
±extLí
,

1359 
uöt8_t
 *
¸txt
)

1361 
	`CFB_Cùhî
(
key
, 
iVec
, 1, 
≤txt
, 
±extLí
, 
¸txt
);

1362 
	}
}

1372 
	$AES_CFB_de¸y±
(c⁄° 
uöt8_t
 *
key
,

1373 c⁄° 
block_t
 
iVec
,

1374 c⁄° 
uöt8_t
 *
¸txt
,

1375 c⁄° 
size_t
 
¸txtLí
,

1376 
uöt8_t
 *
≤txt
)

1378 
	`CFB_Cùhî
(
key
, 
iVec
, 0, 
¸txt
, 
¸txtLí
, 
≤txt
);

1379 
	}
}

1386 #i‡
IMPLEMENT
(
OFB
)

1395 
	$AES_OFB_í¸y±
(c⁄° 
uöt8_t
 *
key
,

1396 c⁄° 
block_t
 
iVec
,

1397 c⁄° 
uöt8_t
 *
≤txt
,

1398 c⁄° 
size_t
 
±extLí
,

1399 
uöt8_t
 *
¸txt
)

1401 
cou¡_t
 
n
 = 
±extLí
 / 
BLOCKSIZE
;

1402 
uöt8_t
 *
y
;

1403 
block_t
 
iv
;

1405 
	`mem˝y
(
iv
, 
iVec
,  iv);

1406 
	`mem˝y
(
¸txt
, 
≤txt
, 
±extLí
);

1408 
	`AES_SëKey
(
key
);

1409 
y
 = 
¸txt
; 
n
--; y +
BLOCKSIZE
) {

1410 
	`rijnd´lEn¸y±
(
iv
, iv);

1411 
	`x‹Block
(
iv
, 
y
);

1413 
	`mixThíX‹
(&
rijnd´lEn¸y±
, 
iv
, iv, 
y
, 
±extLí
 % 
BLOCKSIZE
, y);

1414 
	`BURN
(
RoundKey
);

1415 
	}
}

1425 
	$AES_OFB_de¸y±
(c⁄° 
uöt8_t
 *
key
,

1426 c⁄° 
block_t
 
iVec
,

1427 c⁄° 
uöt8_t
 *
¸txt
,

1428 c⁄° 
size_t
 
¸txtLí
,

1429 
uöt8_t
 *
≤txt
)

1431 
	`AES_OFB_í¸y±
(
key
, 
iVec
, 
¸txt
, 
¸txtLí
, 
≤txt
);

1432 
	}
}

1440 #i‡
CTR


1449 
	$CTR_Cùhî
(c⁄° 
block_t
 
iCå
,

1450 c⁄° 
big
,

1451 c⁄° *
öput
,

1452 c⁄° 
size_t
 
d©aSize
,

1453 *
ouçut
)

1455 
block_t
 
c
, 
íc
;

1456 
cou¡_t
 
n
 = 
d©aSize
 / 
BLOCKSIZE
;

1457 
uöt8_t
 *
y
;

1459 
	`mem˝y
(
ouçut
, 
öput
, 
d©aSize
);

1460 
	`mem˝y
(
c
, 
iCå
,  c);

1461 i‡(
big
 > 1)

1462 
	`öcBlock
(
c
, 1);

1464 
y
 = 
ouçut
; 
n
--; y +
BLOCKSIZE
) {

1465 
	`rijnd´lEn¸y±
(
c
, 
íc
);

1466 
	`x‹Block
(
íc
, 
y
);

1467 
	`öcBlock
(
c
, 
big
);

1469 
	`mixThíX‹
(&
rijnd´lEn¸y±
, 
c
, c, 
y
, 
d©aSize
 % 
BLOCKSIZE
, y);

1470 
	}
}

1473 #i‡
IMPLEMENT
(
CTR_NA
)

1482 
	$AES_CTR_í¸y±
(c⁄° 
uöt8_t
 *
key
,

1483 c⁄° 
uöt8_t
 *
iv
,

1484 c⁄° 
uöt8_t
 *
≤txt
,

1485 c⁄° 
size_t
 
±extLí
,

1486 
uöt8_t
 *
¸txt
)

1488 #i‡
CTR_IV_LENGTH
 =
BLOCKSIZE


1489 
	#CTRBLOCK
 
iv


	)

1491 
block_t
 
CTRBLOCK
 = {0};

1492 
	`mem˝y
(
CTRBLOCK
, 
iv
, 
CTR_IV_LENGTH
);

1493 
	`x‹2BVÆ
(
CTRBLOCK
, 
CTR_STARTVALUE
, 
LAST
);

1495 
	`AES_SëKey
(
key
);

1496 
	`CTR_Cùhî
(
CTRBLOCK
, 1, 
≤txt
, 
±extLí
, 
¸txt
);

1497 
	`BURN
(
RoundKey
);

1498 
	}
}

1508 
	$AES_CTR_de¸y±
(c⁄° 
uöt8_t
 *
key
,

1509 c⁄° 
uöt8_t
 *
iv
,

1510 c⁄° 
uöt8_t
 *
¸txt
,

1511 c⁄° 
size_t
 
¸txtLí
,

1512 
uöt8_t
 *
≤txt
)

1514 
	`AES_CTR_í¸y±
(
key
, 
iv
, 
¸txt
, 
¸txtLí
, 
≤txt
);

1515 
	}
}

1523 #i‡
IMPLEMENT
(
XTS
)

1534 
	$XEX_Cùhî
(
fmix_t
 
cùhî
,

1535 c⁄° 
uöt8_t
 *
key∑ú
,

1536 c⁄° 
block_t
 
twók
,

1537 c⁄° 
size_t
 
£˘id
,

1538 c⁄° 
size_t
 
d©aSize
,

1539 
block_t
 
T
,

1540 *
°‹age
)

1542 
uöt8_t
 *
y
;

1543 
cou¡_t
 
n
 = 
d©aSize
 / 
BLOCKSIZE
;

1545 i‡(
£˘id
 =~(
size_t
) 0) {

1546 
	`mem˝y
(
T
, 
twók
, 
BLOCKSIZE
);

1549 
	`mem£t
(
T
, 0, 
BLOCKSIZE
);

1550 
	`c›yLVÆ
(
T
, 
£˘id
, 0);

1552 
	`AES_SëKey
(
key∑ú
 + 
KEYSIZE
);

1553 
	`rijnd´lEn¸y±
(
T
, T);

1555 
	`AES_SëKey
(
key∑ú
);

1556 
y
 = 
°‹age
; 
n
--; y +
BLOCKSIZE
) {

1557 
	`x‹Block
(
T
, 
y
);

1558 
	`cùhî
(
y
, y);

1559 
	`x‹Block
(
T
, 
y
);

1560 
	`doubÀLGF128
(
T
);

1562 
	}
}

1572 
	$AES_XTS_í¸y±
(c⁄° 
uöt8_t
 *
keys
,

1573 c⁄° 
uöt8_t
 *
twók
,

1574 c⁄° 
uöt8_t
 *
≤txt
,

1575 c⁄° 
size_t
 
±extLí
,

1576 
uöt8_t
 *
¸txt
)

1578 
block_t
 
T
;

1579 
uöt8_t
 
r
 = 
±extLí
 % 
BLOCKSIZE
, *
c
;

1580 
size_t
 
Àn
 = 
±extLí
 - 
r
;

1582 i‡(
Àn
 == 0)

1583  
ENCRYPTION_FAILURE
;

1584 
	`mem˝y
(
¸txt
, 
≤txt
, 
Àn
);

1586 
	`XEX_Cùhî
(&
rijnd´lEn¸y±
, 
keys
, 
twók
, ~0, 
Àn
, 
T
, 
¸txt
);

1587 i‡(
r
) {

1588 
c
 = 
¸txt
 + 
Àn
 - 
BLOCKSIZE
;

1589 
	`mem˝y
(
¸txt
 + 
Àn
, 
c
, 
r
);

1590 
	`mem˝y
(
c
, 
≤txt
 + 
Àn
, 
r
);

1591 
	`x‹Block
(
T
, 
c
);

1592 
	`rijnd´lEn¸y±
(
c
, c);

1593 
	`x‹Block
(
T
, 
c
);

1595 
	`BURN
(
RoundKey
);

1596  
ENDED_IN_SUCCESS
;

1597 
	}
}

1607 
	$AES_XTS_de¸y±
(c⁄° 
uöt8_t
 *
keys
,

1608 c⁄° 
uöt8_t
 *
twók
,

1609 c⁄° 
uöt8_t
 *
¸txt
,

1610 c⁄° 
size_t
 
¸txtLí
,

1611 
uöt8_t
 *
≤txt
)

1613 
block_t
 
TT
, 
T
;

1614 
uöt8_t
 
r
 = 
¸txtLí
 % 
BLOCKSIZE
, *
p
;

1615 
size_t
 
Àn
 = 
¸txtLí
 - 
r
;

1617 i‡(
Àn
 == 0)

1618  
DECRYPTION_FAILURE
;

1619 
	`mem˝y
(
≤txt
, 
¸txt
, 
Àn
);

1620 
p
 = 
≤txt
 + 
Àn
 - 
BLOCKSIZE
;

1622 
	`XEX_Cùhî
(&
rijnd´lDe¸y±
, 
keys
, 
twók
, ~0, 
Àn
 - 
BLOCKSIZE
, 
T
, 
≤txt
);

1623 i‡(
r
) {

1624 
	`mem˝y
(
TT
, 
T
,  T);

1625 
	`doubÀLGF128
(
TT
);

1626 
	`x‹Block
(
TT
, 
p
);

1627 
	`rijnd´lDe¸y±
(
p
,Ö);

1628 
	`x‹Block
(
TT
, 
p
);

1629 
	`mem˝y
(
≤txt
 + 
Àn
, 
p
, 
r
);

1630 
	`mem˝y
(
p
, 
¸txt
 + 
Àn
, 
r
);

1632 
	`x‹Block
(
T
, 
p
);

1633 
	`rijnd´lDe¸y±
(
p
,Ö);

1634 
	`x‹Block
(
T
, 
p
);

1636 
	`BURN
(
RoundKey
);

1637  
ENDED_IN_SUCCESS
;

1638 
	}
}

1645 #i‡
IMPLEMENT
(
CMAC
)

1653 
	$AES_CMAC
(c⁄° 
uöt8_t
 *
key
,

1654 c⁄° *
d©a
,

1655 c⁄° 
size_t
 
d©aSize
,

1656 
block_t
 
mac
)

1658 
block_t
 
K1
 = {0}, 
K2
;

1659 
	`mem˝y
(
mac
, 
K1
,  K1);

1660 
	`gëSubkeys
(&
doubÀBGF128
, 1, 
key
, 
K1
, 
K2
);

1661 
	`cMac
(
K1
, 
K2
, 
d©a
, 
d©aSize
, 
mac
);

1662 
	`BURN
(
RoundKey
);

1663 
	}
}

1670 #i‡
IMPLEMENT
(
GCM
)

1673 
	$GHash
(c⁄° 
block_t
 
H
,

1674 c⁄° *
aD©a
,

1675 c⁄° *
¸txt
,

1676 c⁄° 
size_t
 
ad©aLí
,

1677 c⁄° 
size_t
 
¸txtLí
,

1678 
block_t
 
gsh
)

1680 
block_t
 
Àn
 = {0};

1681 
	`x‹2BVÆ
(
Àn
, 
ad©aLí
 * 8, 
LAST
 / 2);

1682 
	`x‹2BVÆ
(
Àn
, 
¸txtLí
 * 8, 
LAST
);

1684 
	`xMac
(
aD©a
, 
ad©aLí
, 
H
, &
mulGF128
, 
gsh
);

1685 
	`xMac
(
¸txt
, 
¸txtLí
, 
H
, &
mulGF128
, 
gsh
);

1686 
	`xMac
(
Àn
, Üí, 
H
, &
mulGF128
, 
gsh
);

1687 
	}
}

1690 
	$GCM_Inô
(c⁄° 
uöt8_t
 *
key
,

1691 c⁄° 
uöt8_t
 *
n⁄˚
,

1692 
block_t
 
authKey
,

1693 
block_t
 
iv
)

1695 
	`AES_SëKey
(
key
);

1696 
	`rijnd´lEn¸y±
(
authKey
,áuthKey);

1697 #i‡
GCM_NONCE_LEN
 != 12

1698 
	`GHash
(
authKey
, 
NULL
, 
n⁄˚
, 0, 
GCM_NONCE_LEN
, 
iv
);

1700 
	`mem˝y
(
iv
, 
n⁄˚
, 12);

1701 
iv
[
LAST
] = 1;

1703 
	}
}

1716 
	$AES_GCM_í¸y±
(c⁄° 
uöt8_t
 *
key
,

1717 c⁄° 
uöt8_t
 *
n⁄˚
,

1718 c⁄° 
uöt8_t
 *
≤txt
,

1719 c⁄° 
size_t
 
±extLí
,

1720 c⁄° 
uöt8_t
 *
aD©a
,

1721 c⁄° 
size_t
 
aD©aLí
,

1722 
uöt8_t
 *
¸txt
,

1723 
block_t
 
auTag
)

1725 
block_t
 
H
 = {0}, 
iv
 = {0}, 
gsh
 = {0};

1726 
	`GCM_Inô
(
key
, 
n⁄˚
, 
H
, 
iv
);

1728 
	`CTR_Cùhî
(
iv
, 2, 
≤txt
, 
±extLí
, 
¸txt
);

1729 
	`rijnd´lEn¸y±
(
iv
, 
auTag
);

1730 
	`BURN
(
RoundKey
);

1731 
	`GHash
(
H
, 
aD©a
, 
¸txt
, 
aD©aLí
, 
±extLí
, 
gsh
);

1732 
	`x‹Block
(
gsh
, 
auTag
);

1733 
	}
}

1747 
	$AES_GCM_de¸y±
(c⁄° 
uöt8_t
 *
key
,

1748 c⁄° 
uöt8_t
 *
n⁄˚
,

1749 c⁄° 
uöt8_t
 *
¸txt
,

1750 c⁄° 
size_t
 
¸txtLí
,

1751 c⁄° 
uöt8_t
 *
aD©a
,

1752 c⁄° 
size_t
 
aD©aLí
,

1753 c⁄° 
uöt8_t
 
ègLí
,

1754 
uöt8_t
 *
≤txt
)

1756 
block_t
 
H
 = {0}, 
iv
 = {0}, 
gsh
 = {0};

1757 
	`GCM_Inô
(
key
, 
n⁄˚
, 
H
, 
iv
);

1758 
	`GHash
(
H
, 
aD©a
, 
¸txt
, 
aD©aLí
, 
¸txtLí
, 
gsh
);

1760 
	`rijnd´lEn¸y±
(
iv
, 
H
);

1761 
	`x‹Block
(
H
, 
gsh
);

1762 i‡(
	`MISMATCH
(
gsh
, 
¸txt
 + 
¸txtLí
, 
ègLí
)) {

1763 
	`BURN
(
RoundKey
);

1764  
AUTHENTICATION_FAILURE
;

1766 
	`CTR_Cùhî
(
iv
, 2, 
¸txt
, 
¸txtLí
, 
≤txt
);

1767 
	`BURN
(
RoundKey
);

1768  
ENDED_IN_SUCCESS
;

1769 
	}
}

1776 #i‡
IMPLEMENT
(
CCM
)

1779 
	$CBCMac
(c⁄° 
block_t
 
iv
,

1780 c⁄° *
aD©a
,

1781 c⁄° *
≤txt
,

1782 c⁄° 
size_t
 
aD©aLí
,

1783 c⁄° 
size_t
 
±extLí
,

1784 
block_t
 
M
)

1786 
block_t
 
A
 = {0};

1787 
uöt8_t
 
p
 = 1, 
s
 = 
LAST
 - 1;

1788 
	`mem˝y
(
M
, 
iv
, 
BLOCKSIZE
);

1790 
M
[0] |(
CCM_TAG_LEN
 - 2) << 2;

1791 
	`x‹2BVÆ
(
M
, 
±extLí
, 
LAST
);

1792 i‡(
aD©aLí
)

1794 
M
[0] |= 0x40;

1795 
	`rijnd´lEn¸y±
(
M
, M);

1797 i‡(
aD©aLí
 < 
s
)

1798 
s
 = 
aD©aLí
;

1799 i‡(
aD©aLí
 > 0xFEFF) {

1800 
p
 += 4;

1801 
s
 -= 4;

1802 
A
[0] = 0xFF;

1803 
A
[1] = 0xFE;

1805 
	`mem˝y
(
A
 + 
p
 + 1, 
aD©a
, 
s
);

1806 
	`x‹2BVÆ
(
A
, 
aD©aLí
, 
p
);

1809 
	`xMac
(
A
,  A, 
M
, &
rijnd´lEn¸y±
, M);

1810 i‡(
aD©aLí
 > 
s
)

1812 
	`xMac
((c⁄° *Ë
aD©a
 + 
s
, 
aD©aLí
 - s, 
M
, &
rijnd´lEn¸y±
, M);

1814 
	`xMac
(
≤txt
, 
±extLí
, 
M
, &
rijnd´lEn¸y±
, M);

1815 
	}
}

1828 
	$AES_CCM_í¸y±
(c⁄° 
uöt8_t
 *
key
,

1829 c⁄° 
uöt8_t
 *
n⁄˚
,

1830 c⁄° 
uöt8_t
 *
≤txt
,

1831 c⁄° 
size_t
 
±extLí
,

1832 c⁄° 
uöt8_t
 *
aD©a
,

1833 c⁄° 
size_t
 
aD©aLí
,

1834 
uöt8_t
 *
¸txt
,

1835 
block_t
 
auTag
)

1837 
block_t
 
iv
 = {14 - 
CCM_NONCE_LEN
, 0}, 
cbc
;

1838 
	`mem˝y
(
iv
 + 1, 
n⁄˚
, 
CCM_NONCE_LEN
);

1840 
	`AES_SëKey
(
key
);

1841 
	`CBCMac
(
iv
, 
aD©a
, 
≤txt
, 
aD©aLí
, 
±extLí
, 
cbc
);

1842 
	`CTR_Cùhî
(
iv
, 2, 
≤txt
, 
±extLí
, 
¸txt
);

1843 
	`rijnd´lEn¸y±
(
iv
, 
auTag
);

1844 
	`x‹Block
(
cbc
, 
auTag
);

1845 
	`BURN
(
RoundKey
);

1846 
	}
}

1860 
	$AES_CCM_de¸y±
(c⁄° 
uöt8_t
 *
key
,

1861 c⁄° 
uöt8_t
 *
n⁄˚
,

1862 c⁄° 
uöt8_t
 *
¸txt
,

1863 c⁄° 
size_t
 
¸txtLí
,

1864 c⁄° 
uöt8_t
 *
aD©a
,

1865 c⁄° 
size_t
 
aD©aLí
,

1866 c⁄° 
uöt8_t
 
ègLí
,

1867 
uöt8_t
 *
≤txt
)

1869 
block_t
 
iv
 = {14 - 
CCM_NONCE_LEN
, 0}, 
cbc
;

1870 
	`mem˝y
(
iv
 + 1, 
n⁄˚
, 
CCM_NONCE_LEN
);

1871 i‡(
ègLí
 &&ÅagLí !
CCM_TAG_LEN
)

1872  
DECRYPTION_FAILURE
;

1874 
	`AES_SëKey
(
key
);

1875 
	`CTR_Cùhî
(
iv
, 2, 
¸txt
, 
¸txtLí
, 
≤txt
);

1876 
	`CBCMac
(
iv
, 
aD©a
, 
≤txt
, 
aD©aLí
, 
¸txtLí
, 
cbc
);

1877 
	`rijnd´lEn¸y±
(
iv
, iv);

1878 
	`BURN
(
RoundKey
);

1880 
	`x‹Block
(
iv
, 
cbc
);

1881 i‡(
	`MISMATCH
(
cbc
, 
¸txt
 + 
¸txtLí
, 
ègLí
)) {

1882 
	`SABOTAGE
(
≤txt
, 
¸txtLí
);

1883  
AUTHENTICATION_FAILURE
;

1885  
ENDED_IN_SUCCESS
;

1886 
	}
}

1893 #i‡
IMPLEMENT
(
SIV
)

1896 
	$S2V
(c⁄° 
uöt8_t
 *
key
,

1897 c⁄° *
aD©a
,

1898 c⁄° *
≤txt
,

1899 c⁄° 
size_t
 
aD©aLí
,

1900 c⁄° 
size_t
 
±extLí
,

1901 
block_t
 
IV
)

1903 
block_t
 
K
[2], 
Y
;

1904 
uöt8_t
 
r
 = 
±extLí
 % 
BLOCKSIZE
, *
D
 = 
K
[0], *
Q
 = K[1];

1906 
	`mem£t
(*
K
, 0, 
BLOCKSIZE
);

1907 
	`mem£t
(
IV
, 0, 
BLOCKSIZE
);

1908 
	`gëSubkeys
(&
doubÀBGF128
, 1, 
key
, 
D
, 
Q
);

1909 
	`rijnd´lEn¸y±
(
D
, 
Y
);

1915 i‡(
aD©aLí
) {

1916 
	`cMac
(
D
, 
Q
, 
aD©a
, 
aD©aLí
, 
IV
);

1917 
	`doubÀBGF128
(
Y
);

1918 
	`x‹Block
(
IV
, 
Y
);

1919 
	`mem£t
(
IV
, 0, 
BLOCKSIZE
);

1921 i‡(
±extLí
 <  
Y
) {

1922 
	`doubÀBGF128
(
Y
);

1923 
r
 = 0;

1925 i‡(
r
) {

1926 
	`mem£t
(
D
, 0, 
BLOCKSIZE
);

1928 
	`x‹Block
(
Y
, 
D
 + 
r
);

1929 
	`cMac
(
D
, D, 
≤txt
, 
±extLí
 - 
r
, 
IV
);

1930 i‡(
r
) {

1931 
	`cMac
(
NULL
, 
Q
, (c⁄° *Ë
≤txt
 + 
±extLí
 - 
r
,Ñ, 
IV
);

1933 
	}
}

1945 
	$AES_SIV_í¸y±
(c⁄° 
uöt8_t
 *
keys
,

1946 c⁄° 
uöt8_t
 *
≤txt
,

1947 c⁄° 
size_t
 
±extLí
,

1948 c⁄° 
uöt8_t
 *
aD©a
,

1949 c⁄° 
size_t
 
aD©aLí
,

1950 
block_t
 
iv
,

1951 
uöt8_t
 *
¸txt
)

1953 
block_t
 
IV
;

1954 
	`S2V
(
keys
, 
aD©a
, 
≤txt
, 
aD©aLí
, 
±extLí
, 
IV
);

1955 
	`mem˝y
(
iv
, 
IV
,  IV);

1956 
IV
[8] &= 0x7F;

1957 
IV
[12] &= 0x7F;

1959 
	`AES_SëKey
(
keys
 + 
KEYSIZE
);

1960 
	`CTR_Cùhî
(
IV
, 1, 
≤txt
, 
±extLí
, 
¸txt
);

1961 
	`BURN
(
RoundKey
);

1962 
	}
}

1975 
	$AES_SIV_de¸y±
(c⁄° 
uöt8_t
 *
keys
,

1976 c⁄° 
block_t
 
iv
,

1977 c⁄° 
uöt8_t
 *
¸txt
,

1978 c⁄° 
size_t
 
¸txtLí
,

1979 c⁄° 
uöt8_t
 *
aD©a
,

1980 c⁄° 
size_t
 
aD©aLí
,

1981 
uöt8_t
 *
≤txt
)

1983 
block_t
 
IV
;

1984 
	`mem˝y
(
IV
, 
iv
,  IV);

1985 
IV
[8] &= 0x7F;

1986 
IV
[12] &= 0x7F;

1988 
	`AES_SëKey
(
keys
 + 
KEYSIZE
);

1989 
	`CTR_Cùhî
(
IV
, 1, 
¸txt
, 
¸txtLí
, 
≤txt
);

1990 
	`S2V
(
keys
, 
aD©a
, 
≤txt
, 
aD©aLí
, 
¸txtLí
, 
IV
);

1991 
	`BURN
(
RoundKey
);

1993 i‡(
	`MISMATCH
(
IV
, 
iv
,  IV))

1995 
	`SABOTAGE
(
≤txt
, 
¸txtLí
);

1996  
AUTHENTICATION_FAILURE
;

1998  
ENDED_IN_SUCCESS
;

1999 
	}
}

2006 #i‡
IMPLEMENT
(
GCM_SIV
)

2009 
	$PﬁyvÆ
(c⁄° 
block_t
 
H
,

2010 c⁄° *
aD©a
,

2011 c⁄° *
≤txt
,

2012 c⁄° 
size_t
 
aD©aLí
,

2013 c⁄° 
size_t
 
±extLí
,

2014 
block_t
 
pv
)

2016 
block_t
 
Àn
 = {0};

2017 
	`c›yLVÆ
(
Àn
, 
aD©aLí
 * 8, 0);

2018 
	`c›yLVÆ
(
Àn
, 
±extLí
 * 8, 8);

2020 
	`xMac
(
aD©a
, 
aD©aLí
, 
H
, &
dŸGF128
, 
pv
);

2021 
	`xMac
(
≤txt
, 
±extLí
, 
H
, &
dŸGF128
, 
pv
);

2022 
	`xMac
(
Àn
, Üí, 
H
, &
dŸGF128
, 
pv
);

2023 
	}
}

2026 
	$GCMSIV_Inô
(c⁄° 
uöt8_t
 *
key
, c⁄° uöt8_à*
n⁄˚
, 
block_t
 
AK
)

2028 
uöt8_t
 
iv
[10 * 
Nb
 + 
KEYSIZE
], *
h
, *
k
;

2029 
k
 = 
h
 = 
iv
 + 
BLOCKSIZE
;

2030 
	`mem˝y
(
iv
 + 4, 
n⁄˚
, 12);

2032 
	`AES_SëKey
(
key
);

2033 *(
öt32_t
 *Ë
iv
 = 0; *iv < 2 + 
Nk
 / 2; ++*iv) {

2034 
	`rijnd´lEn¸y±
(
iv
, 
k
);

2035 
k
 += 8;

2037 
	`AES_SëKey
(
k
 - 
KEYSIZE
);

2038 
	`mem˝y
(
AK
, 
h
, 
BLOCKSIZE
);

2039 
	}
}

2052 
	$GCM_SIV_í¸y±
(c⁄° 
uöt8_t
 *
key
,

2053 c⁄° 
uöt8_t
 *
n⁄˚
,

2054 c⁄° 
uöt8_t
 *
≤txt
,

2055 c⁄° 
size_t
 
±extLí
,

2056 c⁄° 
uöt8_t
 *
aD©a
,

2057 c⁄° 
size_t
 
aD©aLí
,

2058 
uöt8_t
 *
¸txt
,

2059 
block_t
 
auTag
)

2061 
block_t
 
H
, 
S
 = {0};

2062 
	`GCMSIV_Inô
(
key
, 
n⁄˚
, 
H
);

2064 
	`PﬁyvÆ
(
H
, 
aD©a
, 
≤txt
, 
aD©aLí
, 
±extLí
, 
S
);

2065 
	`XOR32BITS
(
n⁄˚
[0], 
S
[0]);

2066 
	`XOR32BITS
(
n⁄˚
[4], 
S
[4]);

2067 
	`XOR32BITS
(
n⁄˚
[8], 
S
[8]);

2069 
S
[
LAST
] &= 0x7F;

2070 
	`rijnd´lEn¸y±
(
S
, S);

2071 
	`mem˝y
(
auTag
, 
S
,  S);

2073 
S
[
LAST
] |= 0x80;

2074 
	`CTR_Cùhî
(
S
, 0, 
≤txt
, 
±extLí
, 
¸txt
);

2075 
	`BURN
(
RoundKey
);

2076 
	}
}

2090 
	$GCM_SIV_de¸y±
(c⁄° 
uöt8_t
 *
key
,

2091 c⁄° 
uöt8_t
 *
n⁄˚
,

2092 c⁄° 
uöt8_t
 *
¸txt
,

2093 c⁄° 
size_t
 
¸txtLí
,

2094 c⁄° 
uöt8_t
 *
aD©a
,

2095 c⁄° 
size_t
 
aD©aLí
,

2096 c⁄° 
uöt8_t
 
ègLí
,

2097 
uöt8_t
 *
≤txt
)

2099 
block_t
 
H
, 
S
;

2100 i‡(
ègLí
 ! 
S
)

2101  
DECRYPTION_FAILURE
;

2103 
	`GCMSIV_Inô
(
key
, 
n⁄˚
, 
H
);

2104 
	`mem˝y
(
S
, 
¸txt
 + 
¸txtLí
, 
ègLí
);

2105 
S
[
LAST
] |= 0x80;

2106 
	`CTR_Cùhî
(
S
, 0, 
¸txt
, 
¸txtLí
, 
≤txt
);

2108 
	`mem£t
(
S
, 0,  S);

2109 
	`PﬁyvÆ
(
H
, 
aD©a
, 
≤txt
, 
aD©aLí
, 
¸txtLí
, 
S
);

2110 
	`XOR32BITS
(
n⁄˚
[0], 
S
[0]);

2111 
	`XOR32BITS
(
n⁄˚
[4], 
S
[4]);

2112 
	`XOR32BITS
(
n⁄˚
[8], 
S
[8]);

2114 
S
[
LAST
] &= 0x7F;

2115 
	`rijnd´lEn¸y±
(
S
, S);

2116 
	`BURN
(
RoundKey
);

2117 i‡(
	`MISMATCH
(
S
, 
¸txt
 + 
¸txtLí
,

2118  
S
)) {

2119 
	`SABOTAGE
(
≤txt
, 
¸txtLí
);

2120  
AUTHENTICATION_FAILURE
;

2122  
ENDED_IN_SUCCESS
;

2123 
	}
}

2130 #i‡
IMPLEMENT
(
EAX
)

2133 
	$OMac
(c⁄° 
uöt8_t
 
t
,

2134 c⁄° 
block_t
 
D
,

2135 c⁄° 
block_t
 
Q
,

2136 c⁄° *
d©a
,

2137 c⁄° 
size_t
 
d©aSize
,

2138 
block_t
 
mac
)

2140 
	`mem£t
(
mac
, 0, 
BLOCKSIZE
);

2141 #i‡
EAXP


2142 i‡(
d©aSize
 =0 && 
t
)

2145 
	`mem˝y
(
mac
, 
t
 ? 
Q
 : 
D
, 
BLOCKSIZE
);

2147 i‡(
d©aSize
 == 0)

2148 
	`mem˝y
(
mac
, 
D
, 
BLOCKSIZE
);

2150 
mac
[
LAST
] ^
t
;

2151 
	`rijnd´lEn¸y±
(
mac
, mac);

2152 i‡(
d©aSize
 == 0)

2155 
	`cMac
(
D
, 
Q
, 
d©a
, 
d©aSize
, 
mac
);

2156 
	}
}

2170 
AES_EAX_í¸y±
(c⁄° 
uöt8_t
 *
key
,

2171 c⁄° 
uöt8_t
 *
n⁄˚
,

2172 c⁄° 
uöt8_t
 *
≤txt
,

2173 c⁄° 
size_t
 
±extLí
,

2174 #i‡
EAXP


2175 c⁄° 
size_t
 
n⁄˚Lí
,

2176 
uöt8_t
 *
¸txt
)

2177 
	#F_DOUBLE
 
doubÀLGF128


	)

2179 c⁄° 
uöt8_t
 *
	gaD©a
,

2180 c⁄° 
size_t
 
	gaD©aLí
,

2181 
uöt8_t
 *
	g¸txt
,

2182 
block_t
 
	gauTag
)

2183 
	#F_DOUBLE
 
doubÀBGF128


	)

2184 
	#n⁄˚Lí
 
EAX_NONCE_LEN


	)

2187 
block_t
 
	gD
 = {0}, 
	gQ
, 
	gmac
;

2188 
gëSubkeys
(&
F_DOUBLE
, 1, 
key
, 
D
, 
Q
);

2189 
OMac
(0, 
D
, 
Q
, 
n⁄˚
, 
n⁄˚Lí
, 
mac
);

2191 #i‡
EAXP


2192 
COPY32BIT
(
mac
[12], 
¸txt
[
±extLí
]);

2193 
	gmac
[12] &= 0x7F;

2194 
	gmac
[14] &= 0x7F;

2195 
CTR_Cùhî
(
mac
, 1, 
≤txt
, 
±extLí
, 
¸txt
);

2197 
OMac
(2, 
D
, 
Q
, 
¸txt
, 
±extLí
, 
mac
);

2198 
XOR32BITS
(
mac
[12], 
¸txt
[
±extLí
]);

2200 
OMac
(1, 
D
, 
Q
, 
aD©a
, 
aD©aLí
, 
auTag
);

2201 
x‹Block
(
mac
, 
auTag
);

2202 
CTR_Cùhî
(
mac
, 1, 
≤txt
, 
±extLí
, 
¸txt
);

2204 
OMac
(2, 
D
, 
Q
, 
¸txt
, 
±extLí
, 
mac
);

2205 
x‹Block
(
mac
, 
auTag
);

2207 
BURN
(
RoundKey
);

2223 
AES_EAX_de¸y±
(c⁄° 
uöt8_t
 *
key
,

2224 c⁄° 
uöt8_t
 *
n⁄˚
,

2225 c⁄° 
uöt8_t
 *
¸txt
,

2226 c⁄° 
size_t
 
¸txtLí
,

2227 #i‡
EAXP


2228 c⁄° 
size_t
 
n⁄˚Lí
,

2230 c⁄° 
uöt8_t
 *
aD©a
,

2231 c⁄° 
size_t
 
aD©aLí
,

2232 c⁄° 
uöt8_t
 
ègLí
,

2234 
uöt8_t
 *
≤txt
)

2236 
block_t
 
	gD
 = {0}, 
	gQ
, 
	gmac
, 
	gèg
;

2237 
gëSubkeys
(&
F_DOUBLE
, 1, 
key
, 
D
, 
Q
);

2238 
OMac
(2, 
D
, 
Q
, 
¸txt
, 
¸txtLí
, 
èg
);

2240 #i‡
EAXP


2241 
OMac
(0, 
D
, 
Q
, 
n⁄˚
, 
n⁄˚Lí
, 
mac
);

2242 
XOR32BITS
(
¸txt
[
¸txtLí
], 
èg
[12]);

2243 
XOR32BITS
(
mac
[12], 
èg
[12]);

2244 
	gmac
[12] &= 0x7F;

2245 
	gmac
[14] &= 0x7F;

2247 i‡(0 !*(
öt32_t
 *Ë&
èg
[12])

2249 
OMac
(1, 
D
, 
Q
, 
aD©a
, 
aD©aLí
, 
mac
);

2250 
x‹Block
(
mac
, 
èg
);

2251 
OMac
(0, 
D
, 
Q
, 
n⁄˚
, 
n⁄˚Lí
, 
mac
);

2252 
x‹Block
(
mac
, 
èg
);

2254 i‡(
MISMATCH
(
èg
, 
¸txt
 + 
¸txtLí
, 
ègLí
))

2257 
BURN
(
RoundKey
);

2258  
	gAUTHENTICATION_FAILURE
;

2260 
CTR_Cùhî
(
mac
, 1, 
¸txt
, 
¸txtLí
, 
≤txt
);

2262 
BURN
(
RoundKey
);

2263  
	gENDED_IN_SUCCESS
;

2273 #i‡
IMPLEMENT
(
OCB
)

2275 
block_t
 
	gOCBsubkeys
[4];

2279 
	$gëDñè
(c⁄° 
cou¡_t
 
ödex
, 
block_t
 
dñè
)

2281 
size_t
 
m
, 
b
 = 1;

2282 
block_t
 
L
;

2283 
	`mem˝y
(
L
, *
OCBsubkeys
,  L);

2285 
b
 <
ödex
 && b)

2287 
m
 = (4 * 
b
 - 1Ë& (
ödex
 - b);

2288 
b
 <<= 1;

2289 
	`doubÀBGF128
(
L
);

2290 i‡(
b
 > 
m
)

2291 
	`x‹Block
(
L
, 
dñè
);

2293 
	}
}

2297 
	$OCB_Cùhî
(
fmix_t
 
cùhî
,

2298 c⁄° 
uöt8_t
 *
n⁄˚
,

2299 c⁄° 
size_t
 
d©aSize
,

2300 *
d©a
)

2302 
uöt8_t
 *
Ls
 = 
OCBsubkeys
[1], *
kt
 = OCBsubkeys[2], *
dñ
 = OCBsubkeys[3], *
y
;

2303 
cou¡_t
 
i
 = 0, 
n
 = 
n⁄˚
[
OCB_NONCE_LEN
 - 1] % 64;

2304 
uöt8_t
 
j
 = 0, 
r
 = 
n
 % 8;

2306 
	`mem˝y
(
kt
 + 
BLOCKSIZE
 - 
OCB_NONCE_LEN
, 
n⁄˚
, OCB_NONCE_LEN);

2307 
kt
[0] = 
OCB_TAG_LEN
 << 4 & 0xFF;

2308 
kt
[
LAST
 - 
OCB_NONCE_LEN
] |= 1;

2309 
kt
[
LAST
] &= 0xC0;

2311 
	`rijnd´lEn¸y±
(
kt
, kt);

2312 
	`mem˝y
(
dñ
, 
kt
 + 1, 8);

2313 
	`x‹Block
(
kt
, 
dñ
);

2315 
n
 /8; 
j
 < 
BLOCKSIZE
; ++n)

2317 
kt
[
j
++] = kt[
n
] << 
r
 | kt[n + 1] >> (8 -Ñ);

2319 i‡((
n
 = 
d©aSize
 / 
BLOCKSIZE
) == 0) {

2320 
	`mem˝y
(
dñ
, 
kt
, 
BLOCKSIZE
);

2323 
y
 = 
d©a
; 
i
++ < 
n
; y +
BLOCKSIZE
) {

2324 
	`mem˝y
(
dñ
, 
kt
, 
BLOCKSIZE
);

2325 
	`gëDñè
(
i
, 
dñ
);

2326 
	`x‹Block
(
dñ
, 
y
);

2327 
	`cùhî
(
y
, y);

2328 
	`x‹Block
(
dñ
, 
y
);

2330 i‡((
r
 = 
d©aSize
 % 
BLOCKSIZE
) != 0) {

2331 
	`x‹Block
(
Ls
, 
dñ
);

2332 
	`mixThíX‹
(&
rijnd´lEn¸y±
, 
dñ
, 
kt
, 
y
, 
r
, y);

2333 
dñ
[
r
] ^= 0x80;

2335 
	}
}

2337 
	$n›
(c⁄° 
block_t
 
x
, block_à
y
Ë{
	}
}

2340 
	$OCB_GëTag
(c⁄° *
≤txt
,

2341 c⁄° *
aD©a
,

2342 c⁄° 
size_t
 
±extLí
,

2343 c⁄° 
size_t
 
aD©aLí
)

2345 
block_t
 
P
 = {0};

2346 
cou¡_t
 
n
 = 
aD©aLí
 / 
BLOCKSIZE
;

2347 
uöt8_t
 
r
 = 
aD©aLí
 % 
BLOCKSIZE
, *
èg
 = 
OCBsubkeys
[3];

2348 
uöt8_t
 c⁄° *
Ld
 = 
OCBsubkeys
[0], *
Ls
 = OCBsubkeys[1];

2349 
uöt8_t
 c⁄° *
xa
 = (uöt8_àc⁄° *Ë
aD©a
 + 
aD©aLí
 - 
r
;

2351 
	`xMac
(
≤txt
, 
±extLí
, 
NULL
, &
n›
, 
èg
);

2352 
	`x‹Block
(
Ld
, 
èg
);

2353 
	`rijnd´lEn¸y±
(
èg
,Åag);

2355 i‡(
r
)

2357 
	`gëDñè
(
n
, 
P
);

2358 
	`cMac
(
NULL
, 
Ls
, 
xa
, 
r
, 
P
);

2359 
	`x‹Block
(
P
, 
èg
);

2361 
xa
 -
BLOCKSIZE
; 
n
; xa -= BLOCKSIZE) {

2362 
	`mem˝y
(
P
, 
xa
,  P);

2363 
	`gëDñè
(
n
--, 
P
);

2364 
	`rijnd´lEn¸y±
(
P
, P);

2365 
	`x‹Block
(
P
, 
èg
);

2367 
	}
}

2380 
	$AES_OCB_í¸y±
(c⁄° 
uöt8_t
 *
key
,

2381 c⁄° 
uöt8_t
 *
n⁄˚
,

2382 c⁄° 
uöt8_t
 *
≤txt
,

2383 c⁄° 
size_t
 
±extLí
,

2384 c⁄° 
uöt8_t
 *
aD©a
,

2385 c⁄° 
size_t
 
aD©aLí
,

2386 
uöt8_t
 *
¸txt
,

2387 
block_t
 
auTag
)

2389 
uöt8_t
 *
Ld
 = 
OCBsubkeys
[0], *
Ls
 = OCBsubkeys[1], *
èg
 = OCBsubkeys[3];

2391 
	`mem˝y
(
¸txt
, 
≤txt
, 
±extLí
);

2392 
	`mem£t
(
Ls
, 0, 2 * 
BLOCKSIZE
);

2393 
	`gëSubkeys
(&
doubÀBGF128
, 0, 
key
, 
Ls
, 
Ld
);

2394 
	`OCB_Cùhî
(&
rijnd´lEn¸y±
, 
n⁄˚
, 
±extLí
, 
¸txt
);

2395 
	`OCB_GëTag
(
≤txt
, 
aD©a
, 
±extLí
, 
aD©aLí
);

2397 
	`mem˝y
(
auTag
, 
èg
, 
OCB_TAG_LEN
);

2398 
	`BURN
(
RoundKey
);

2399 
	}
}

2413 
	$AES_OCB_de¸y±
(c⁄° 
uöt8_t
 *
key
,

2414 c⁄° 
uöt8_t
 *
n⁄˚
,

2415 c⁄° 
uöt8_t
 *
¸txt
,

2416 c⁄° 
size_t
 
¸txtLí
,

2417 c⁄° 
uöt8_t
 *
aD©a
,

2418 c⁄° 
size_t
 
aD©aLí
,

2419 c⁄° 
uöt8_t
 
ègLí
,

2420 
uöt8_t
 *
≤txt
)

2422 
uöt8_t
 *
Ld
 = 
OCBsubkeys
[0], *
Ls
 = OCBsubkeys[1], *
èg
 = OCBsubkeys[3];

2423 i‡(
ègLí
 &&ÅagLí !
OCB_TAG_LEN
)

2424  
DECRYPTION_FAILURE
;

2426 
	`mem˝y
(
≤txt
, 
¸txt
, 
¸txtLí
);

2427 
	`mem£t
(
Ls
, 0, 2 * 
BLOCKSIZE
);

2428 
	`gëSubkeys
(&
doubÀBGF128
, 0, 
key
, 
Ls
, 
Ld
);

2429 
	`OCB_Cùhî
(&
rijnd´lDe¸y±
, 
n⁄˚
, 
¸txtLí
, 
≤txt
);

2430 
	`OCB_GëTag
(
≤txt
, 
aD©a
, 
¸txtLí
, 
aD©aLí
);

2432 
	`BURN
(
RoundKey
);

2433 i‡(
	`MISMATCH
(
èg
, 
¸txt
 + 
¸txtLí
, 
ègLí
)) {

2434 
	`SABOTAGE
(
≤txt
, 
¸txtLí
);

2435 
	`BURN
(
OCBsubkeys
);

2436  
AUTHENTICATION_FAILURE
;

2438  
ENDED_IN_SUCCESS
;

2439 
	}
}

2446 #i‡
IMPLEMENT
(
KWA
)

2447 
	#HB
 (
BLOCKSIZE
 / 2Ë

	)

2456 
	$AES_KEY_wøp
(c⁄° 
uöt8_t
 *
kek
,

2457 c⁄° 
uöt8_t
 *
£¸ë
,

2458 c⁄° 
size_t
 
£¸ëLí
,

2459 
uöt8_t
 *
wøµed
)

2461 
size_t
 
n
 = 
£¸ëLí
 / 
HB
, 
i
 = 0, 
q
;

2462 
block_t
 
A
;

2463 i‡(
n
 < 2 || 
£¸ëLí
 % 
HB
)

2464  
ENCRYPTION_FAILURE
;

2466 
	`mem£t
(
A
, 0xA6, 
HB
);

2467 
	`mem˝y
(
wøµed
 + 
HB
, 
£¸ë
, 
£¸ëLí
);

2468 
	`AES_SëKey
(
kek
);

2470 
q
 = 6 * 
n
; 
i
 < q;) {

2471 
uöt8_t
 *
r
 = 
wøµed
 + (
i
++ % 
n
 + 1Ë* 
HB
;

2472 
	`mem˝y
(
A
 + 
HB
, 
r
, HB);

2473 
	`rijnd´lEn¸y±
(
A
, A);

2474 
	`mem˝y
(
r
, 
A
 + 
HB
, HB);

2475 
	`x‹2BVÆ
(
A
, 
i
, 
HB
 - 1);

2477 
	`BURN
(
RoundKey
);

2479 
	`mem˝y
(
wøµed
, 
A
, 
HB
);

2480  
ENDED_IN_SUCCESS
;

2481 
	}
}

2491 
	$AES_KEY_unwøp
(c⁄° 
uöt8_t
 *
kek
,

2492 c⁄° 
uöt8_t
 *
wøµed
,

2493 c⁄° 
size_t
 
wøpLí
,

2494 
uöt8_t
 *
£¸ë
)

2496 
size_t
 
i
, 
n
 = 
wøpLí
 / 
HB
;

2497 
block_t
 
A
;

2498 i‡(
n
-- < 3 || 
wøpLí
 % 
HB
)

2499  
DECRYPTION_FAILURE
;

2501 
	`mem˝y
(
A
, 
wøµed
, 
HB
);

2502 
	`mem˝y
(
£¸ë
, 
wøµed
 + 
HB
, 
wøpLí
 - HB);

2503 
	`AES_SëKey
(
kek
);

2505 
i
 = 6 * 
n
; i; --i) {

2506 
uöt8_t
 *
r
 = 
£¸ë
 + ((
i
 - 1Ë% 
n
Ë* 
HB
;

2507 
	`x‹2BVÆ
(
A
, 
i
, 
HB
 - 1);

2508 
	`mem˝y
(
A
 + 
HB
, 
r
, HB);

2509 
	`rijnd´lDe¸y±
(
A
, A);

2510 
	`mem˝y
(
r
, 
A
 + 
HB
, HB);

2512 
	`BURN
(
RoundKey
);

2514 
n
 = 0; 
i
 < 
HB
; ++i)

2515 
n
 |
A
[
i
] ^ 0xA6;

2517  
n
 ? 
AUTHENTICATION_FAILURE
 : 
ENDED_IN_SUCCESS
;

2518 
	}
}

2525 #i‡
IMPLEMENT
(
POLY1305
)

2526 
	#SP
 17

	)

2529 
	$modP1305
(
uöt8_t
 *
block
, c⁄° 
ovrÊ
)

2531 
öt32_t
 
q
 = 
ovrÊ
 << 6 | 
block
[
SP
 - 1] / 4, 
t
;

2532 
uöt8_t
 
i
 = 0;

2533 i‡(!
q
)

2536 
t
 = 5 * 
q
;Å && 
i
 < 
SP
;Å >>= 8)

2538 
t
 +
block
[
i
];

2539 
block
[
i
++] = (
uöt8_t
Ë
t
;

2541 
block
[
SP
 - 1] -4 * (
uöt8_t
Ë
q
;

2542 
	}
}

2545 
	$addLBlocks
(c⁄° 
uöt8_t
 *
x
, c⁄° uöt8_à
Àn
, uöt8_à*
y
)

2547 
a
, 
i
;

2548 
i
 = 
a
 = 0; i < 
Àn
;á >>= 8) {

2549 
a
 +
x
[
i
] + 
y
[i];

2550 
y
[
i
++] = (
uöt8_t
Ë
a
;

2552 i‡(
i
 =
SP
)

2553 
	`modP1305
(
y
, 
a
);

2554 
	}
}

2557 
	$mulLBlocks
(c⁄° 
uöt8_t
 *
x
, uöt8_à*
y
)

2559 
uöt8_t
 
i
, 
sh
, 
n
 = 
SP
, 
¥od
[SP] = {0};

2560 
öt32_t
 
m
;

2561 
n
--)

2563 
sh
 = 
n
 ? 8 : 0;

2564 
m
 = 
i
 = 0; i < 
SP
; m >>= 8)

2566 
m
 +(
¥od
[
i
] + 
x
[i] * 
y
[
n
]Ë<< 
sh
;

2567 
¥od
[
i
++] = (
uöt8_t
Ë
m
;

2569 
	`modP1305
(
¥od
, 
m
);

2571 
	`mem˝y
(
y
, 
¥od
, 
SP
);

2572 
	}
}

2575 
	$cmpToP1305
(
uöt8_t
 *
block
)

2577 
uöt8_t
 
n
 = (
block
[
SP
 - 1] == 3) * (SP - 1);

2578 
c
 = 
block
[
SP
 - 1] > 3 || (
n
 && block[0] >= 0xFB);

2580 
c
 && 
n
)

2581 
c
 = (
block
[--
n
] == 0xFF);

2583 
c
 *= 5; c; c >>= 8) {

2584 
c
 +*
block
;

2585 *
block
++ = (
uöt8_t
Ë
c
;

2587 
	}
}

2597 
	$AES_Pﬁy1305
(c⁄° 
uöt8_t
 *
keys
,

2598 c⁄° 
block_t
 
n⁄˚
,

2599 c⁄° *
d©a
,

2600 c⁄° 
size_t
 
d©aSize
,

2601 
block_t
 
mac
)

2603 
uöt8_t
 
r
[
SP
], 
rk
[SP] = {1}, 
c
[SP] = {0}, 
pﬁy
[SP] = {0};

2604 
uöt8_t
 
n
 = (
d©aSize
 > 0);

2605 
uöt8_t
 
s
 = (
d©aSize
 - 
n
Ë% 
BLOCKSIZE
 +Ç;

2606 
cou¡_t
 
q
 = (
d©aSize
 - 
n
Ë/ 
BLOCKSIZE
 +Ç;

2607 c⁄° *
pos
 = (c⁄° *Ë
d©a
 + 
d©aSize
;

2609 
	`AES_SëKey
(
keys
);

2610 
	`rijnd´lEn¸y±
(
n⁄˚
, 
mac
);

2611 
	`BURN
(
RoundKey
);

2613 
	`mem˝y
(
r
, 
keys
 + 
KEYSIZE
, 
n
 = 
SP
 - 1);

2614 
r
[
n
] = 0;Ç;Ç -= 4) {

2615 
r
[
n
] &= 0xFC;

2616 
r
[
n
 - 1] &= 0x0F;

2619 
pos
 -
s
; 
q
--;Öo†-(†
BLOCKSIZE
)) {

2620 
	`mem˝y
(
c
, 
pos
, 
s
);

2621 
c
[
s
] = 1;

2622 
	`mulLBlocks
(
r
, 
rk
);

2623 
	`mulLBlocks
(
rk
, 
c
);

2624 
	`addLBlocks
(
c
,  c, 
pﬁy
);

2626 
	`cmpToP1305
(
pﬁy
);

2627 
	`addLBlocks
(
pﬁy
, 
BLOCKSIZE
, 
mac
);

2628 
	}
}

2635 #i‡
IMPLEMENT
(
FPE
)

2637 #i‡
CUSTOM_ALPHABET


2644 
	#NON_ASCII_CHARACTER_SET
 (
CUSTOM_ALPHABET
 >10)

	)

2650 
	#DECDIGIT
 "0123456789"

	)

2651 
	#LCLETTER
 "abcdefghijklmn›qr°uvwxyz"

	)

2652 
	#UCLETTER
 "ABCDEFGHIJKLMNOPQRSTUVWXYZ"

	)

2653 
	#HEXDIGIT
 
DECDIGIT
 "ABCDEFabcdef"

	)

2658 #i‡
CUSTOM_ALPHABET
 == 0

2659 
	#ALPHABET
 
DECDIGIT


	)

2660 
	#RADIX
 10

	)

2666 #i‡
CUSTOM_ALPHABET
 == 1

2667 
	#ALPHABET
 "01"

	)

2668 
	#RADIX
 2

	)

2674 #i‡
CUSTOM_ALPHABET
 == 2

2675 
	#ALPHABET
 
LCLETTER


	)

2676 
	#RADIX
 26

	)

2682 #i‡
CUSTOM_ALPHABET
 == 3

2683 
	#ALPHABET
 
DECDIGIT
 
LCLETTER


	)

2684 
	#RADIX
 36

	)

2690 #i‡
CUSTOM_ALPHABET
 == 4

2691 
	#ALPHABET
 
UCLETTER
 
LCLETTER


	)

2692 
	#RADIX
 52

	)

2698 #i‡
CUSTOM_ALPHABET
 == 5

2699 
	#ALPHABET
 
UCLETTER
 
LCLETTER
 
DECDIGIT
 "+/"

	)

2700 
	#RADIX
 64

	)

2706 #i‡
CUSTOM_ALPHABET
 == 6

2707 
	#ALPHABET
 
DECDIGIT
 
UCLETTER
 
LCLETTER
 "!#$%&()*+-;<=>?@^_`{|}~"

	)

2708 
	#RADIX
 85

	)

2714 #i‡
CUSTOM_ALPHABET
 == 7

2715 
	#ALPHABET
 
DECDIGIT
 "abcdefghijklmn›"

	)

2716 
	#RADIX
 26

	)

2722 #i‡
CUSTOM_ALPHABET
 == 8

2723 
	#ALPHABET
 
DECDIGIT
 
UCLETTER
 
LCLETTER
 "+/"

	)

2724 
	#RADIX
 64

	)

2730 #i‡
CUSTOM_ALPHABET
 == 9

2731 
	#ALPHABET
 \

2732 " !\"#$%&\'()*+,-./" 
DECDIGIT
 ":;<=>?@" 
UCLETTER
 "[\\]^_`" 
LCLETTER
 "{|}~"

	)

2733 
	#RADIX
 95

	)

2740 #i‡
NON_ASCII_CHARACTER_SET


2741 
	~<loˇÀ.h
>

2743 
	~<wch¨.h
>

2744 
	#°rög_t
 
wch¨_t
 *

	)

2746 
	#°rög_t
 *

	)

2752 #i‡
CUSTOM_ALPHABET
 == 10

2753 
	#ALPHABET
 
L
"ŒëŒíŒìŒîŒïŒñŒóŒòŒôŒöŒõŒúŒùŒûŒüŒ†Œ°Œ£Œ§Œ•Œ¶ŒßŒ®Œ©Œ±Œ≤Œ≥Œ¥ŒµŒ∂Œ∑Œ∏ŒπŒ∫ŒªŒºŒΩŒæŒøœÄœÅœÉœÇœÑœÖœÜœïœáœàœâ"

	)

2754 
	#RADIX
 50

	)

2760 #i‡
CUSTOM_ALPHABET
 == 20

2761 
	#ALPHABET
 
L
"ÿ°ÿ¶ÿ§ÿ¢ÿßÿ®Ÿæÿ™ÿ´ÿ¨⁄Üÿ≠ÿÆÿØÿ∞ÿ±ÿ≤⁄òÿ≥ÿ¥ÿµÿ∂ÿ∑ÿ∏ÿπÿ∫ŸÅŸÇ⁄©⁄ØŸÑŸÖŸÜŸàŸá€å"

	)

2762 
	#RADIX
 36

	)

2770 
	~<m©h.h
>

2771 
	#LOGRDX
 (
	`log
(
RADIX
Ë/Üog(2)Ë

	)

2772 #i‡
FF_X
 == 3

2773 
	#MAXLEN
 (2 * (Ë(96.000001 / 
LOGRDX
))

	)

2775 
	#MINLEN
 ((Ë(19.931568 / 
LOGRDX
 + 1))

	)

2778 
	#ALPHABET
 "0123456789"

	)

2779 
	#°rög_t
 *

	)

2780 
	#RADIX
 10

	)

2781 
	#LOGRDX
 3.321928095

	)

2782 
	#MINLEN
 6

	)

2783 
	#MAXLEN
 56

	)

2786 #i‡
RADIX
 > 0x100

2787 
	trba£_t
;

2789 
uöt8_t
 
	trba£_t
;

2792 #i‡
FF_X
 != 3

2794 
size_t
 
	gbb
, 
	gdd
;

2797 
	$numRadix
(c⁄° 
rba£_t
 *
s
, 
size_t
 
Àn
, 
uöt8_t
 *
num
, size_à
byãs
)

2799 
	`mem£t
(
num
, 0, 
byãs
);

2800 
Àn
--) {

2801 
size_t
 
i
, 
y
 = *
s
++;

2802 
i
 = 
byãs
; i; 
y
 >>= 8) {

2803 
y
 +
num
[--
i
] * 
RADIX
;

2804 
num
[
i
] = (
uöt8_t
Ë
y
;

2807 
	}
}

2810 
	$°rRadix
(c⁄° 
uöt8_t
 *
num
, 
size_t
 
byãs
, 
rba£_t
 *
s
, size_à
Àn
)

2812 
	`mem£t
(
s
, 0, (
rba£_t
Ë* 
Àn
);

2813 
byãs
--) {

2814 
size_t
 
i
, 
x
 = *
num
++;

2815 
i
 = 
Àn
; i; 
x
 /
RADIX
) {

2816 
x
 +
s
[--
i
] << 8;

2817 
s
[
i
] = 
x
 % 
RADIX
;

2820 
	}
}

2823 
	$rba£_add
(c⁄° 
rba£_t
 *
q
, 
size_t
 
N
,Ñba£_à*
p
)

2825 
size_t
 
c
, 
a
;

2826 
c
 = 0; 
N
--; c = 
a
 >
RADIX
)

2828 
a
 = 
p
[
N
] + 
q
[N] + 
c
;

2829 
p
[
N
] = 
a
 % 
RADIX
;

2831 
	}
}

2834 
	$rba£_sub
(c⁄° 
rba£_t
 *
q
, 
size_t
 
N
,Ñba£_à*
p
)

2836 
size_t
 
c
, 
s
;

2837 
c
 = 0; 
N
--; c = 
s
 < 
RADIX
)

2839 
s
 = 
RADIX
 + 
p
[
N
] - 
q
[N] - 
c
;

2840 
p
[
N
] = 
s
 % 
RADIX
;

2842 
	}
}

2845 
	$FF1round
(c⁄° 
uöt8_t
 
i
,

2846 c⁄° 
block_t
 
P
,

2847 c⁄° 
size_t
 
u
,

2848 c⁄° 
size_t
 
Àn
,

2849 
rba£_t
 *
Xc
)

2851 
size_t
 
k
 = 
bb
 % 
BLOCKSIZE
, 
s
 = 
i
 & 1 ? 
Àn
 :Üí - 
u
;

2852 
block_t
 
R
 = {0};

2853 
uöt8_t
 *
num
 = (*Ë(
Xc
 + 
u
);

2855 
	`numRadix
(
Xc
 - 
s
, 
Àn
 - 
u
, 
num
, 
bb
);

2856 
	`mem˝y
(
R
 + 
BLOCKSIZE
 - 
k
, 
num
, k);

2857 
R
[
LAST
 - 
k
] = 
i
;

2858 
	`xMac
(
P
, 
BLOCKSIZE
, 
R
, &
rijnd´lEn¸y±
, R);

2859 
	`xMac
(
num
 + 
k
, 
bb
 - k, 
R
, &
rijnd´lEn¸y±
, R);

2861 
	`mem˝y
(
num
, 
R
,  R);

2862 
k
 = (
dd
 - 01Ë/  
R
;

2863 
num
 +
k
 *  
R
; k; --k) {

2864 
	`mem˝y
(
num
, 
R
,  R);

2865 
	`x‹2BVÆ
(
num
, 
k
, 
LAST
);

2866 
	`rijnd´lEn¸y±
(
num
,Çum);

2867 
num
 - 
R
;

2869 
	`°rRadix
(
num
, 
dd
, 
Xc
, 
u
);

2870 
	}
}

2873 
	$FF1_Cùhî
(c⁄° 
uöt8_t
 *
key
,

2874 c⁄° 
mode
,

2875 c⁄° 
size_t
 
Àn
,

2876 c⁄° 
uöt8_t
 *
twók
,

2877 c⁄° 
size_t
 
twókLí
,

2878 
rba£_t
 *
X
)

2880 
size_t
 
t
, 
u
 = (
Àn
 + !
mode
) / 2;

2881 
rba£_t
 *
Xc
 = 
X
 + 
Àn
;

2883 
block_t
 
P
 = {1, 2, 1, 
RADIX
 >> 16, RADIX >> 8 & 0xFF, RADIX & 0xFF, 10};

2884 
uöt8_t
 
n
 = 10 * 
mode
, 
i
 = 0, 
r
 = 
twókLí
 % 
BLOCKSIZE
;

2886 i‡(
r
 > (
uöt8_t
Ë~
bb
 % 
BLOCKSIZE
)

2887 
r
 = 0;

2889 
P
[7] = 
Àn
 / 2 & 0xFF;

2890 
	`x‹2BVÆ
(
P
, 
Àn
, 11);

2891 
	`x‹2BVÆ
(
P
, 
twókLí
, 
LAST
);

2892 
t
 = 
twókLí
 - 
r
;

2894 
	`AES_SëKey
(
key
);

2895 
	`rijnd´lEn¸y±
(
P
, P);

2896 
	`xMac
(
twók
, 
t
, 
P
, &
rijnd´lEn¸y±
, P);

2898 
i
 < 
r
)

2899 
P
[
i
++] ^
twók
[
t
++];

2901 
i
 = 0x0; i < 
n
; 
u
 = 
Àn
 - u)

2903 
	`FF1round
(
i
++, 
P
, 
u
, 
Àn
, 
Xc
);

2904 
	`rba£_add
(
Xc
, 
u
, 
i
 & 1 ? 
X
 : Xc - u);

2906 
i
 ^10; i > 0; 
u
 = 
Àn
 - u)

2908 
	`FF1round
(--
i
, 
P
, 
u
, 
Àn
, 
Xc
);

2909 
	`rba£_sub
(
Xc
, 
u
, 
i
 & 1 ? X¯- u : 
X
);

2911 
	}
}

2915 
	$numRadix
(c⁄° 
rba£_t
 *
s
, 
uöt8_t
 
Àn
, uöt8_à*
num
, uöt8_à
byãs
)

2917 
	`mem£t
(
num
, 0, 
byãs
);

2918 
Àn
--) {

2919 
size_t
 
i
, 
d
 = 
s
[
Àn
];

2920 
i
 = 0; i < 
byãs
; 
d
 >>= 8) {

2921 
d
 +
num
[
i
] * 
RADIX
;

2922 
num
[
i
++] = (
uöt8_t
Ë
d
;

2925 
	}
}

2928 
	$°rRadix
(c⁄° 
uöt8_t
 *
num
, uöt8_à
byãs
, 
rba£_t
 *
s
, uöt8_à
Àn
)

2930 
	`mem£t
(
s
, 0, (
rba£_t
Ë* 
Àn
);

2931 
byãs
--) {

2932 
size_t
 
i
, 
b
 = 
num
[
byãs
];

2933 
i
 = 0; i < 
Àn
; 
b
 /
RADIX
) {

2934 
b
 +
s
[
i
] << 8;

2935 
s
[
i
++] = 
b
 % 
RADIX
;

2938 
	}
}

2941 
	$rba£_add
(c⁄° 
rba£_t
 *
q
, c⁄° 
uöt8_t
 
N
,Ñba£_à*
p
)

2943 
size_t
 
i
, 
c
, 
a
;

2944 
i
 = 
c
 = 0; i < 
N
; c = 
a
 >
RADIX
)

2946 
a
 = 
p
[
i
] + 
q
[i] + 
c
;

2947 
p
[
i
++] = 
a
 % 
RADIX
;

2949 
	}
}

2952 
	$rba£_sub
(c⁄° 
rba£_t
 *
q
, c⁄° 
uöt8_t
 
N
,Ñba£_à*
p
)

2954 
size_t
 
i
, 
c
, 
s
;

2955 
i
 = 
c
 = 0; i < 
N
; c = 
s
 < 
RADIX
)

2957 
s
 = 
RADIX
 + 
p
[
i
] - 
q
[i] - 
c
;

2958 
p
[
i
++] = 
s
 % 
RADIX
;

2960 
	}
}

2963 
	$FF3round
(c⁄° 
uöt8_t
 
i
,

2964 c⁄° 
uöt8_t
 *
T
,

2965 c⁄° 
uöt8_t
 
u
,

2966 c⁄° 
uöt8_t
 
Àn
,

2967 
rba£_t
 *
X
)

2969 
uöt8_t
 c⁄° 
w
 = (
i
 & 1Ë* 4, 
s
 = i & 1 ? 
Àn
 :Üí - 
u
;

2970 
block_t
 
P
;

2971 
	`COPY32BIT
(
T
[
w
], 
P
[12]);

2973 
	`numRadix
(
X
 - 
s
, 
Àn
 - 
u
, 
P
, 12);

2974 
P
[12] ^
i
;

2975 
	`rijnd´lEn¸y±
(
P
, P);

2976 
	`°rRadix
(
P
,  P, 
X
, 
u
);

2977 
	}
}

2980 
	$FF3_Cùhî
(c⁄° 
uöt8_t
 *
key
,

2981 c⁄° 
mode
,

2982 c⁄° 
uöt8_t
 
Àn
,

2983 c⁄° 
uöt8_t
 *
twók
,

2984 
rba£_t
 *
X
)

2986 
rba£_t
 *
Xc
 = 
X
 + 
Àn
;

2987 
uöt8_t
 
T
[8], 
n
 = 8 * 
mode
, 
u
 = (
Àn
 + modeË/ 2, *
k
 = (*Ë
Xc
, 
i
;

2989 
	`mem˝y
(
k
, 
twók
, 
FF3_TWEAK_LEN
);

2990 #i‡
FF3_TWEAK_LEN
 == 7

2991 
k
[7] = (
uöt8_t
) (k[3] << 4);

2992 
k
[3] &= 0xF0;

2995 
i
 =  
T
; i--;)

2996 
T
[
i
] = 
k
[7 - i];

2997 
i
 = 
KEYSIZE
; i--;)

2998 
k
[
i
] = *
key
++;

3000 
	`AES_SëKey
(
k
);

3001 
	`SABOTAGE
(
k
, 
KEYSIZE
);

3003 
i
 = 0x0; i < 
n
; 
u
 = 
Àn
 - u)

3005 
	`FF3round
(
i
++, 
T
, 
u
, 
Àn
, 
Xc
);

3006 
	`rba£_add
(
Xc
, 
u
, 
i
 & 1 ? 
X
 : Xc - u);

3008 
i
 ^8; i !0; 
u
 = 
Àn
 - u)

3010 
	`FF3round
(--
i
, 
T
, 
u
, 
Àn
, 
Xc
);

3011 
	`rba£_sub
(
Xc
, 
u
, 
i
 & 1 ? X¯- u : 
X
);

3013 
	}
}

3019 
	~<°dlib.h
>

3022 
	$FPEöô
(c⁄° 
°rög_t
 
°r
, c⁄° 
size_t
 
Àn
, 
rba£_t
 **
ödi˚s
)

3024 c⁄° 
°rög_t
 
Æpha
 = 
ALPHABET
;

3025 
size_t
 
i
 = (
Àn
 + 1) / 2;

3026 
size_t
 
j
 = (
Àn
 + 
i
Ë* (
rba£_t
);

3028 #i‡
FF_X
 != 3

3029 
bb
 = (
size_t
Ë(
LOGRDX
 * 
i
 + 8 - 1e-10) / 8;

3030 
dd
 = (
bb
 + 7) & ~3UL;

3031 
j
 +(
dd
 + 12) & ~15UL;

3033 
i
 *
Àn
 > 
MAXLEN
 ? 0 : (
rba£_t
);

3034 
j
 +
i
 >
KEYSIZE
 ? 0 : KEYSIZE - i;

3037 i‡(
Àn
 < 
MINLEN
 || 
i
 == 0)

3040 *
ödi˚s
 = 
	`mÆloc
(
j
);

3041 i‡(*
ödi˚s
 =
NULL
)

3044 
i
 = 0; i < 
Àn
; ++i) {

3045 
j
 = 0; 
Æpha
[j] !
°r
[
i
];) {

3046 i‡(++
j
 =
RADIX
) {

3047 
	`‰ì
(*
ödi˚s
);

3051 (*
ödi˚s
)[
i
] = (
rba£_t
Ë
j
;

3054 
	}
}

3057 
	$FPEföÆize
(c⁄° 
rba£_t
 *
ödex
, c⁄° 
size_t
 
Àn
, *
ouçut
)

3059 
size_t
 
i
;

3060 
°rög_t
 
°r
 = 
ouçut
;

3061 c⁄° 
°rög_t
 
abc
 = 
ALPHABET
;

3062 
	`BURN
(
RoundKey
);

3064 
°r
[
Àn
] = 0;

3065 
i
 = 
Àn
; i--;)

3066 
°r
[
i
] = 
abc
[
ödex
[i]];

3067 
	}
}

3079 
AES_FPE_í¸y±
(c⁄° 
uöt8_t
 *
key
,

3080 c⁄° 
uöt8_t
 *
twók
,

3081 #i‡
FF_X
 != 3

3082 c⁄° 
size_t
 
twókLí
,

3084 c⁄° *
≤txt
,

3085 c⁄° 
size_t
 
±extLí
,

3086 *
¸txt
)

3088 
rba£_t
 *
	gödex
 = 
NULL
;

3089 i‡(
FPEöô
(
≤txt
, 
±extLí
, &
ödex
) != 0)

3090  
ENCRYPTION_FAILURE
;

3092 #i‡
FF_X
 == 3

3093 
FF3_Cùhî
(
key
, 1, 
±extLí
, 
twók
, 
ödex
);

3095 
FF1_Cùhî
(
key
, 1, 
±extLí
, 
twók
, 
twókLí
, 
ödex
);

3097 
FPEföÆize
(
ödex
, 
±extLí
, 
¸txt
);

3098 
‰ì
(
ödex
);

3099  
	gENDED_IN_SUCCESS
;

3112 
AES_FPE_de¸y±
(c⁄° 
uöt8_t
 *
key
,

3113 c⁄° 
uöt8_t
 *
twók
,

3114 #i‡
FF_X
 != 3

3115 c⁄° 
size_t
 
twókLí
,

3117 c⁄° *
¸txt
,

3118 c⁄° 
size_t
 
¸txtLí
,

3119 *
≤txt
)

3121 
rba£_t
 *
	gödex
 = 
NULL
;

3122 i‡(
FPEöô
(
¸txt
, 
¸txtLí
, &
ödex
) != 0)

3123  
DECRYPTION_FAILURE
;

3125 #i‡
FF_X
 == 3

3126 
FF3_Cùhî
(
key
, 0, 
¸txtLí
, 
twók
, 
ödex
);

3128 
FF1_Cùhî
(
key
, 0, 
¸txtLí
, 
twók
, 
twókLí
, 
ödex
);

3130 
FPEföÆize
(
ödex
, 
¸txtLí
, 
≤txt
);

3131 
‰ì
(
ödex
);

3132  
	gENDED_IN_SUCCESS
;

3136 
	#HEXSTR_LENGTH
 114

	)

3137 
	~<°dio.h
>

3140 
	g£¸ëKey
 =

3142 *
	g£c⁄dKey
 =

3144 *
	gcùhîKey
 =

3146 *
	g∂aöText
 =

3149 *
	giVec
 = "8ea2b7ca516745bfÉafc49904b496089",

3150 #i‡
AES___
 == 256

3151 *
	gk_wøµed
 =

3154 *
	gxtscùhî
 =

3157 #ñi‡
AES___
 == 192

3158 *
	gecbcùhî
 =

3161 *
	gk_wøµed
 =

3164 *
	gecbcùhî
 =

3167 #i‡
CTS


3168 *
	gcbccùhî
 =

3172 *
	gcbccùhî
 =

3176 *
	gxtscùhî
 =

3179 *
	gcfbcùhî
 =

3182 *
	gofbcùhî
 =

3185 #i‡
CTR_IV_LENGTH
 == 16

3186 *
	g˘rcùhî
 =

3190 *
	g˘rcùhî
 =

3194 *
	gccmcùhî
 =

3198 *
	ggcmcùhî
 =

3204 *
	gsivcùhî
 =

3210 *
	gocbcùhî
 =

3216 *
	ggsvcùhî
 =

3222 #i‡
EAXP


3223 *
	góxcùhî
 =

3227 *
	góxcùhî
 =

3232 *
	gÂe_∂aö
 = "122333444455555666666777777788888888999999999012345682747",

3233 #i‡
FF_X
 == 3

3234 *
	gÂecùhî
 = "0053317760589559020399280014720716878020198371161819152",

3236 *
	gÂecùhî
 = "000260964766881620856103152534002821752468680082944565411",

3238 *
	g±extcmac
 = "b887df1fd8c239c3É8a64d9822e21128",

3239 *
	gpﬁy_1305
 = "3175bed9bd01821a 62d4c7bef26722be",

3240 *
	gk_wøµed
 = "1FA68B0A8112B447 AEF34BD8FB5A7B82 9D3E862371D2CFE5";

3243 
	ebuf„r_sizes
 {

3244 
	mPBYTES
 = 
HEXSTR_LENGTH
 / 2,

3245 
	mPADDED
 = 
PBYTES
 + 15 & ~15,

3246 
	mTAGGED
 = 
PBYTES
 + 16

3249 
	$hex2byãs
(c⁄° *
hex
, 
uöt8_t
 *
byãs
)

3251 
shl
 = 0;

3252 --
byãs
; *
hex
; ++hex) {

3253 i‡(*
hex
 < '0' || 'f' < *hex)

3255 i‡((
shl
 ^= 4) != 0)

3256 *++
byãs
 = 0;

3257 *
byãs
 |(*
hex
 % 16 + (*hex > '9'Ë* 9Ë<< 
shl
;

3259 
	}
}

3261 
	$check
(c⁄° *
mëhod
,

3262 *
ªsu…
,

3263 c⁄° *
ex≥˘ed
,

3264 
size_t
 
size
)

3266 
c
 = 
	`memcmp
(
ex≥˘ed
, 
ªsu…
, 
size
);

3267 
	`¥ötf
("AES-%d %s: %s\n", 
AES_KEY_SIZE
 * 8, 
mëhod
,

3268 
c
 ? "FAILED :`(" : "PASSED!");

3269 
	`mem£t
(
ªsu…
, 0xcc, 
TAGGED
);

3270 
	}
}

3272 
	$maö
()

3274 
uöt8_t
 
iv
[16], 
key
[64], 
authKey
[32], 
öput
[
PADDED
], 
ã°
[
TAGGED
],

3275 
ouçut
[
TAGGED
], *
a
 = 
authKey
 + 1, 
ß
 = áuthKey - 1, 
•
 = 
PBYTES
;

3276 
	`hex2byãs
(
cùhîKey
, 
key
);

3277 
	`hex2byãs
(
£c⁄dKey
, 
key
 + 32);

3278 
	`hex2byãs
(
£¸ëKey
, 
authKey
);

3279 
	`hex2byãs
(
iVec
, 
iv
);

3280 
	`hex2byãs
(
∂aöText
, 
öput
);

3281 #i‡
M_RIJNDAEL


3282 
	`hex2byãs
(
iVec
, 
öput
 + 48);

3283 
	`hex2byãs
(
£c⁄dKey
, 
ã°
);

3284 
a
 = 
AES_KEY_SIZE
 =16 ? 
key
 : 
öput
 + (
AES___
 - 192) / 2;

3286 
	`AES_Cùhî
(
key
 + 32, 'E', 
authKey
, 
ouçut
);

3287 
	`AES_Cùhî
(
authKey
, 'E', 
key
 + 32, 
ouçut
 + 16);

3288 
	`check
("En¸y±i⁄Åe°", 
ouçut
, 
a
, 32);

3289 
	`AES_Cùhî
(
key
 + 32, 'D', 
a
, 
ouçut
 + 16);

3290 
	`AES_Cùhî
(
authKey
, 'D', 
a
 + 16, 
ouçut
);

3291 
	`check
("De¸y±i⁄Åe°", 
ouçut
, 
ã°
, 32);

3294 
	`¥ötf
("TestÑesults\n");

3296 #i‡
ECB
 && 
AES_KEY_SIZE
 + 8 * !
AES_PADDING
 == 24

3297 
	`hex2byãs
(
ecbcùhî
, 
ã°
);

3298 
	`AES_ECB_í¸y±
(
key
, 
öput
, 
•
, 
ouçut
);

3299 
	`check
("ECBÉn¸y±i⁄", 
ouçut
, 
ã°
,  
öput
);

3300 
	`AES_ECB_de¸y±
(
key
, 
ã°
,  
öput
, 
ouçut
);

3301 
	`check
("ECB de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3303 #i‡
CBC
 && 
AES_KEY_SIZE
 == 16

3304 
	`hex2byãs
(
cbccùhî
, 
ã°
);

3305 
	`AES_CBC_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
ouçut
);

3306 
	`check
("CBCÉn¸y±i⁄", 
ouçut
, 
ã°
, 
CTS
 ? 
•
 :  
öput
);

3307 
	`AES_CBC_de¸y±
(
key
, 
iv
, 
ã°
, 
CTS
 ? 
•
 :  
öput
, 
ouçut
);

3308 
	`check
("CBC de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3310 #i‡
CFB
 && 
AES_KEY_SIZE
 == 16

3311 
	`hex2byãs
(
cfbcùhî
, 
ã°
);

3312 
	`AES_CFB_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
ouçut
);

3313 
	`check
("CFBÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
);

3314 
	`AES_CFB_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
ouçut
);

3315 
	`check
("CFB de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3317 #i‡
OFB
 && 
AES_KEY_SIZE
 == 16

3318 
	`hex2byãs
(
ofbcùhî
, 
ã°
);

3319 
	`AES_OFB_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
ouçut
);

3320 
	`check
("OFBÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
);

3321 
	`AES_OFB_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
ouçut
);

3322 
	`check
("OFB de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3324 #i‡
CTR_NA
 && 
AES_KEY_SIZE
 == 16

3325 
	`hex2byãs
(
˘rcùhî
, 
ã°
);

3326 
	`AES_CTR_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
ouçut
);

3327 
	`check
("CTRÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
);

3328 
	`AES_CTR_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
ouçut
);

3329 
	`check
("CTR de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3331 #i‡
XTS
 && 
AES_KEY_SIZE
 != 24

3332 
	`hex2byãs
(
xtscùhî
, 
ã°
);

3333 
	`AES_XTS_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
ouçut
);

3334 
	`check
("XTSÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
);

3335 
	`AES_XTS_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
ouçut
);

3336 
	`check
("XTS de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3338 #i‡
CMAC
 && 
AES_KEY_SIZE
 == 16

3339 
	`hex2byãs
(
±extcmac
, 
ã°
);

3340 
	`AES_CMAC
(
key
, 
öput
, 
•
, 
ouçut
);

3341 
	`check
("∂aöãxàCMAC", 
ouçut
, 
ã°
, 16);

3343 #i‡
POLY1305
 && 
AES_KEY_SIZE
 == 16

3344 
	`hex2byãs
(
pﬁy_1305
, 
ã°
);

3345 
	`AES_Pﬁy1305
(
key
, 
iv
, 
öput
, 
•
, 
ouçut
);

3346 
	`check
("Pﬁy1305áuth.", 
ouçut
, 
ã°
, 16);

3348 #i‡
GCM
 && 
AES_KEY_SIZE
 == 16

3349 
	`hex2byãs
(
gcmcùhî
, 
ã°
);

3350 
	`AES_GCM_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3351 
	`check
("GCMÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 16);

3352 
	`AES_GCM_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 16, 
ouçut
);

3353 
	`check
("GCM de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3355 #i‡
CCM
 && 
AES_KEY_SIZE
 == 16

3356 
	`hex2byãs
(
ccmcùhî
, 
ã°
);

3357 
	`AES_CCM_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3358 
	`check
("CCMÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 
CCM_TAG_LEN
);

3359 *
ouçut
 ^
	`AES_CCM_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 
CCM_TAG_LEN
, output);

3360 
	`check
("CCM de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3362 #i‡
OCB
 && 
AES_KEY_SIZE
 == 16

3363 
	`hex2byãs
(
ocbcùhî
, 
ã°
);

3364 
	`AES_OCB_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3365 
	`check
("OCBÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 
OCB_TAG_LEN
);

3366 *
ouçut
 ^
	`AES_OCB_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 
OCB_TAG_LEN
, output);

3367 
	`check
("OCB de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3369 #i‡
SIV
 && 
AES_KEY_SIZE
 == 16

3370 
	`hex2byãs
(
sivcùhî
, 
ã°
);

3371 
	`AES_SIV_í¸y±
(
key
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + 16);

3372 
	`check
("SIVÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 16);

3373 *
ouçut
 ^
	`AES_SIV_de¸y±
(
key
, 
ã°
,Åe° + 16, 
•
, 
a
, 
ß
, output);

3374 
	`check
("SIV de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3376 #i‡
GCM_SIV
 && 
AES_KEY_SIZE
 == 16

3377 
	`hex2byãs
(
gsvcùhî
, 
ã°
);

3378 
	`GCM_SIV_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3379 
	`check
("GCMSIVÉn¸y±", 
ouçut
, 
ã°
, 
•
 + 16);

3380 *
ouçut
 ^
	`GCM_SIV_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 16, output);

3381 
	`check
("GCMSIV de¸y±", 
ouçut
, 
öput
, 
•
);

3383 #i‡
EAX
 && 
AES_KEY_SIZE
 == 16

3384 
	`hex2byãs
(
óxcùhî
, 
ã°
);

3385 #i‡
EAXP


3386 
	`AES_EAX_í¸y±
(
key
, 
a
, 
öput
, 
•
, 
ß
, 
ouçut
);

3387 
	`check
("EAXÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 4);

3388 
	`AES_EAX_de¸y±
(
key
, 
a
, 
ã°
, 
•
, 
ß
, 
ouçut
);

3390 
	`AES_EAX_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3391 
	`check
("EAXÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 16);

3392 
	`AES_EAX_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 16, 
ouçut
);

3394 
	`check
("EAX de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3396 #i‡
FPE
 && 
AES_KEY_SIZE
 + 
CUSTOM_ALPHABET
 == 16

3397 
	`mem˝y
(
ã°
, 
Âecùhî
, 
FF_X
 =3 ? (
•
 = 55) : sp);

3398 #i‡
FF_X
 == 3

3399 
	`AES_FPE_í¸y±
(
key
, 
a
, 
Âe_∂aö
, 
•
, 
ouçut
);

3400 
	`check
("FF3Én¸y±i⁄", 
ouçut
, 
ã°
, 
•
);

3401 
	`AES_FPE_de¸y±
(
key
, 
a
, 
ã°
, 
•
, 
ouçut
);

3403 
	`AES_FPE_í¸y±
(
key
, 
a
, 
ß
, 
Âe_∂aö
, 
•
, 
ouçut
);

3404 
	`check
("FF1Én¸y±i⁄", 
ouçut
, 
ã°
, 
•
);

3405 
	`AES_FPE_de¸y±
(
key
, 
a
, 
ß
, 
ã°
, 
•
, 
ouçut
);

3407 
	`check
("FPE de¸y±i⁄", 
ouçut
, 
Âe_∂aö
, 
•
);

3409 #i‡
KWA


3410 
	`hex2byãs
(
k_wøµed
, 
ã°
);

3411 
	`AES_KEY_wøp
(
authKey
, 
key
 + 32, 
AES_KEY_SIZE
, 
ouçut
);

3412 
	`check
("key wøµög ", 
ouçut
, 
ã°
, 
AES_KEY_SIZE
 + 8);

3413 
	`AES_KEY_unwøp
(
authKey
, 
ã°
, 
AES_KEY_SIZE
 + 8, 
ouçut
);

3414 
	`check
("key unwøµög", 
ouçut
, 
key
 + 32, 
AES_KEY_SIZE
);

3417 #i‡
OCB
 * 
EAX
 * 
SIV
 * 
GCM_SIV
 * 
POLY1305
 * 
FPE
 * (16 / 
AES_KEY_SIZE
)

3418 
	`¥ötf
("+-> Let's do someÉxtraÅests\n");

3420 
•
 = 
ß
 = 24;

3421 
	`hex2byãs
("000102030405060708090A0B0C0D0E0F", 
key
);

3422 
	`hex2byãs
("BBAA99887766554433221107", 
iv
);

3423 
	`hex2byãs
("000102030405060708090A0B0C0D0E0F1011121314151617", 
a
);

3424 
	`hex2byãs
("000102030405060708090A0B0C0D0E0F1011121314151617", 
öput
);

3425 
	`hex2byãs
(

3428 
ã°
);

3429 
	`AES_OCB_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3430 
	`check
("OCBÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 
OCB_TAG_LEN
);

3431 *
ouçut
 ^
	`AES_OCB_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 
OCB_TAG_LEN
, output);

3432 
	`check
("OCB de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3434 
•
 = 11;

3435 
ß
 = 7;

3436 
	`hex2byãs
("ì8e1ed9ff2540´8f2ba9f50bc2f27c", 
key
);

3437 
	`hex2byãs
("752abad3e0afb5f434dc4310", 
iv
);

3438 
	`hex2byãs
("6578616d706c65", 
a
);

3439 
	`hex2byãs
("48656c6c6f20776f726c64", 
öput
);

3440 
	`hex2byãs
("5d349ód175ef6b1def6fd4fbcdeb7e4793f4a1d7e4Áa70100af1", 
ã°
);

3441 
	`GCM_SIV_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3442 
	`check
("GCMSIVÉn¸y±", 
ouçut
, 
ã°
, 
•
 + 16);

3443 *
ouçut
 ^
	`GCM_SIV_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 16, output);

3444 
	`check
("GCMSIV de¸y±", 
ouçut
, 
öput
, 
•
);

3445 
•
 = 12;

3446 
ß
 = 1;

3447 
	`hex2byãs
("01000000000000000000000000000000", 
key
);

3448 
	`hex2byãs
("030000000000000000000000", 
iv
);

3449 
	`hex2byãs
("01", 
a
);

3450 
	`hex2byãs
("020000000000000000000000", 
öput
);

3451 
	`hex2byãs
(

3454 
ã°
);

3455 
	`GCM_SIV_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3456 
	`check
("GCMSIVÉn¸y±", 
ouçut
, 
ã°
, 
•
 + 16);

3457 *
ouçut
 ^
	`GCM_SIV_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 16, output);

3458 
	`check
("GCMSIV de¸y±", 
ouçut
, 
öput
, 
•
);

3460 
•
 = 14;

3461 
ß
 = 24;

3462 
	`hex2byãs
(

3465 
key
);

3466 
	`hex2byãs
(

3469 
a
);

3470 
	`hex2byãs
("11223344 55667788 99Øbbc¯ddì", 
öput
);

3471 
	`hex2byãs
(

3474 
ã°
);

3475 
	`AES_SIV_í¸y±
(
key
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + 16);

3476 
	`check
("SIVÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 16);

3477 *
ouçut
 ^
	`AES_SIV_de¸y±
(
key
, 
ã°
,Åe° + 16, 
•
, 
a
, 
ß
, output);

3478 
	`check
("SIV de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3479 
•
 = 16;

3480 
ß
 = 0;

3481 
	`hex2byãs
(

3483 
key
);

3484 
	`hex2byãs
("00112233445566778899Øbbccddìff", 
öput
);

3485 
	`hex2byãs
(

3487 
ã°
);

3488 
	`AES_SIV_í¸y±
(
key
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + 16);

3489 
	`check
("SIVÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 16);

3490 *
ouçut
 ^
	`AES_SIV_de¸y±
(
key
, 
ã°
,Åe° + 16, 
•
, 
a
, 
ß
, output);

3491 
	`check
("SIV de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3492 #i‡
EAXP


3493 
•
 = 0;

3494 
ß
 = 50;

3495 
	`hex2byãs
("01020304050607080102030405060708", 
key
);

3496 
	`hex2byãs
(

3501 
öput
);

3502 
	`hex2byãs
("515AE775", 
ã°
);

3503 
	`AES_EAX_í¸y±
(
key
, 
öput
, 
NULL
, 
•
, 
ß
, 
ouçut
);

3504 
	`check
("EAXÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 4);

3505 
•
 +
	`AES_EAX_de¸y±
(
key
, 
öput
, 
ã°
, sp, 
ß
, 
ouçut
);

3506 
	`check
("EAX de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3507 
•
 = 28;

3508 
ß
 = 65;

3509 
	`hex2byãs
("10 20 30 40 50 60 70 80 90á0 b0 c0 d0É0 f0 00", 
authKey
);

3510 
	`hex2byãs
(

3516 
ã°
);

3517 
	`hex2byãs
(

3520 
öput
);

3521 
	`hex2byãs
(

3524 
key
);

3525 
	`AES_EAX_í¸y±
(
authKey
, 
ã°
, 
öput
, 
•
, 
ß
, 
ouçut
);

3526 
	`check
("EAXÉn¸y±i⁄", 
ouçut
, 
key
, 
•
 + 4);

3527 
	`AES_EAX_de¸y±
(
authKey
, 
ã°
, 
key
, 
•
, 
ß
, 
ouçut
);

3529 
•
 = 12;

3530 
ß
 = 8;

3531 
	`hex2byãs
("BD8E6E11475E60B268784C38C62FEB22", 
key
);

3532 
	`hex2byãs
("6EAC5C93072D8E8513F750935E46DA1B", 
iv
);

3533 
	`hex2byãs
("D4482D1CA78DCE0F", 
a
);

3534 
	`hex2byãs
("4DE3B35C3FC039245BD1FB7D", 
öput
);

3535 
	`hex2byãs
("835BB4F15D743E350E728414ABB8644FD6CCB86947C5E10590210A4F", 
ã°
);

3536 
	`AES_EAX_í¸y±
(
key
, 
iv
, 
öput
, 
•
, 
a
, 
ß
, 
ouçut
, output + sp);

3537 
	`check
("EAXÉn¸y±i⁄", 
ouçut
, 
ã°
, 
•
 + 16);

3538 
	`AES_EAX_de¸y±
(
key
, 
iv
, 
ã°
, 
•
, 
a
, 
ß
, 16, 
ouçut
);

3540 
	`check
("EAX de¸y±i⁄", 
ouçut
, 
öput
, 
•
);

3542 #i‡
FF_X
 =3 && !
CUSTOM_ALPHABET


3543 
•
 = 29;

3544 
	`hex2byãs
("EF 43 59 D8 D5 80 AA 4F 7F 03 6D 6F 04 FC 6A 94", 
key
);

3545 
	`hex2byãs
("00 00 00 00 00 00 00 00", 
a
);

3546 
	`mem˝y
(
öput
, "89012123456789000000789000000", 
•
);

3547 
	`mem˝y
(
ouçut
, "34695224821734535122613701434", 
•
);

3548 
	`AES_FPE_í¸y±
(
key
, 
a
, 
öput
, 
•
, 
ã°
);

3549 
	`check
("FF3Én¸y±i⁄", 
ã°
, 
ouçut
, 
•
);

3550 
	`AES_FPE_de¸y±
(
key
, 
a
, 
ouçut
, 
•
, 
ã°
);

3551 
	`check
("FF3 de¸y±i⁄", 
ã°
, 
öput
, 
•
);

3552 #ñi‡
FF_X
 !3 && 
CUSTOM_ALPHABET
 == 3

3553 
•
 = 19;

3554 
ß
 = 11;

3555 
	`hex2byãs
("2B 7E 15 16 28 AE D2 A6 AB F7 15 88 09 CF 4F 3C", 
key
);

3556 
	`hex2byãs
("37 37 37 37 70 71 72 73 37 37 37", 
a
);

3557 
	`mem˝y
(
öput
, "0123456789abcdefghi", 
•
);

3558 
	`mem˝y
(
ouçut
, "a9tv40mŒ9kdu509eum", 
•
);

3559 
	`AES_FPE_í¸y±
(
key
, 
a
, 
ß
, 
öput
, 
•
, 
ã°
);

3560 
	`check
("FF1Én¸y±i⁄", 
ã°
, 
ouçut
, 
•
);

3561 
	`AES_FPE_de¸y±
(
key
, 
a
, 
ß
, 
ouçut
, 
•
, 
ã°
);

3562 
	`check
("FF1 de¸y±i⁄", 
ã°
, 
öput
, 
•
);

3564 
•
 = 32;

3565 
	`hex2byãs
(

3568 
öput
);

3569 
	`hex2byãs
(

3572 
key
);

3573 
	`hex2byãs
("´ 21 2®55 39 97 29 59 5dÉ®45 8b c6 21 f‡0e", 
iv
);

3574 
	`hex2byãs
("0êe1 c1 6b b7 3‡0‡4‡d1 98 81 75 3¯01 cd be", 
ã°
);

3575 
	`AES_Pﬁy1305
(
key
, 
iv
, 
öput
, 
•
, 
ouçut
);

3576 
	`check
("Pﬁy1305áuth.", 
ouçut
, 
ã°
, 16);

3577 
•
 = 63;

3578 
	`hex2byãs
(

3583 
öput
);

3584 
	`hex2byãs
(

3587 
key
);

3588 
	`hex2byãs
("9®e8 31É7 43 97 8d 3®23 52 7¯71 28 14 9ê3a", 
iv
);

3589 
	`hex2byãs
("51 54ád 0d 2¯b2 6ê01 27 4‡c5 11 48 49 1‡1b", 
ã°
);

3590 
	`AES_Pﬁy1305
(
key
, 
iv
, 
öput
, 
•
, 
ouçut
);

3591 
	`check
("Pﬁy1305áuth.", 
ouçut
, 
ã°
, 16);

3594 
	}
}

	@tests/arch-test-target/constants.py

1 
imp‹t
 
os


3 
	gduäame
 = 'rv32emu'

4 
ª‚ame
 = 'sail_cSim'

6 
roŸ
 = 
os
.
∑th
.
ab•©h
(os.∑th.
	$dú«me
(
__fûe__
))

7 
cwd
 = 
os
.
	$gëcwd
()

9 
miß_A
 = (1 << 0)

10 
miß_C
 = (1 << 2)

11 
miß_F
 = (1 << 5)

12 
miß_M
 = (1 << 12)

14 
c⁄fig_ãmp
 = '''[RISCOF]

15 
Re„ªn˚Plugö
={0
	}
}

16 
Re„ªn˚PlugöP©h
={1}

17 
DUTPlugö
={2}

18 
DUTPlugöP©h
={3}

21 
∂ugö∑th
={3}

22 
i•ec
={3}/{2}
_iß
.
yaml


23 
p•ec
={3}/{2}
_∂©f‹m
.
yaml


24 
∑th
={4}/
buûd


25 
èrgë_run
=1

28 
∂ugö∑th
={1}

29 
∑th
={1}

	@tests/arch-test-target/rv32emu/env/model_test.h

1 #¥agm®
⁄˚


4 
	#RVMODEL_DATA_SECTION
 \

5 .
push£˘i⁄
 .
toho°
,"aw",@
¥ogbôs
; \

6 .
Æign
 8; .
globÆ
 
toho°
;Åoho°: .
dw‹d
 0; \

7 .
Æign
 8; .
globÆ
 
‰omho°
; fromho°: .
dw‹d
 0; \

8 .
p›£˘i⁄
; \

9 .
Æign
 8; .
globÆ
 
begö_ªg°©e
; begin_regstate: \

10 .
w‹d
 128; \

11 .
Æign
 8; .
globÆ
 
íd_ªg°©e
;Énd_regstate: \

12 .
w‹d
 4;

	)

16 
	#RVMODEL_HALT
 \

17 
add
 
a7
, 
x0
, 93; \

18 
add
 
a0
, 
x0
, 0; \

19 
eˇŒ


	)

21 
	#RVMODEL_BOOT


	)

24 
	#RVMODEL_DATA_BEGIN
 \

25 
RVMODEL_DATA_SECTION
.
Æign
 4; \

26 .
globÆ
 
begö_sig«tuª
; \

27 
begö_sig«tuª
:

	)

30 
	#RVMODEL_DATA_END
 \

31 .
Æign
 4; \

32 .
globÆ
 
íd_sig«tuª
; \

33 
íd_sig«tuª
:

	)

36 
	#RVMODEL_IO_INIT


	)

38 
	#RVMODEL_IO_WRITE_STR
(
_R
, 
_STR
)

	)

40 
	#RVMODEL_IO_CHECK
()

	)

42 
	#RVMODEL_IO_ASSERT_GPR_EQ
(
_S
, 
_R
, 
_I
)

	)

44 
	#RVMODEL_IO_ASSERT_SFPR_EQ
(
_F
, 
_R
, 
_I
)

	)

46 
	#RVMODEL_IO_ASSERT_DFPR_EQ
(
_D
, 
_R
, 
_I
)

	)

47 
	#RVMODEL_SET_MSW_INT


	)

48 
	#RVMODEL_CLEAR_MSW_INT


	)

49 
	#RVMODEL_CLEAR_MTIMER_INT


	)

50 
	#RVMODEL_CLEAR_MEXT_INT


	)

	@tests/arch-test-target/rv32emu/riscof_rv32emu.py

1 
imp‹t
 
os


2 
imp‹t
 
ª


3 
imp‹t
 
shutû


4 
imp‹t
 
sub¥o˚ss


5 
imp‹t
 
shÀx


6 
imp‹t
 
loggög


7 
imp‹t
 
øndom


8 
imp‹t
 
°rög


9 
‰om
 
°rög
 
imp‹t
 
Tem∂©e


10 
imp‹t
 
sys


12 
imp‹t
 
	griscof
.
utûs
 
as
 utils

13 
imp‹t
 
	griscof
.
c⁄°™ts
 
as
 constants

14 
‰om
 
	griscof
.
∂ugöTem∂©e
 
imp‹t
ÖluginTemplate

16 
	gloggî
 = 
loggög
.
	$gëLoggî
()

18 
˛ass
 
	$rv32emu
(
∂ugöTem∂©e
):

19 
__modñ__
 = "rv32emu"

20 
__vîsi⁄__
 = "dev"

22 
def
 
	$__öô__
(
£lf
, *
¨gs
, **
kw¨gs
):

23 
s˛ass
 = 
	`su≥r
().
	$__öô__
(*
¨gs
, **
kw¨gs
)

25 
c⁄fig
 = 
kw¨gs
.
	`gë
('config')

27 #I‡
the
 
c⁄fig
 
node
 
this
 
DUT
 
is
 
missög
 
‹
 
em±y
. 
Rai£
 
™
 
îr‹
. 
At
 
möimum
 
we
 
√ed


28 #thê
∑ths
 
to
 
the
 
i•ec
 
™d
 
p•ec
 
fûes


29 
c⁄fig
 
is
 
N⁄e
:

30 
	`¥öt
("PleaseÉnter input fileÖaths in configuration.")

31 
øi£
 
	$Sy°emExô
(1)

33 #I¿
of
 
™
 
RTL
 
ba£d
 
DUT
, 
this
 
would
 
be
 
poöt
 
to
 
the
 
föÆ
 
bö¨y
 
execuèbÀ
 o‡
your


34 #ã°-
bích
 
¥odu˚d
 
by
 
a
 
	`simuœt‹
 (
like
 
vîû©‹
, 
vcs
, 
öcisive
, 
ëc
). 
In
 
of
 
™
 
iss
 
‹


35 #emuœt‹, 
this
 
v¨übÀ
 
could
 
poöt
 
to
 
whîe
 
the
 
iss
 
bö¨y
 
is
 
loˇãd
. 
If
 'PATH variable

36 #i†
missög
 
ö
 
the
 
c⁄fig
.
öi
 
we
 
ˇn
 
h¨dcode
Åhê
Æã∫©e
 
hîe
.

37 
£lf
.
dut_exe
 = 
os
.
∑th
.
	`joö
(
c⁄fig
['PATH'] 'PATH' 
ö
 config "","rv32emu")

39 #Numbî 
of
 
∑øŒñ
 
jobs
 
th©
 
ˇn
 
be
 
•aw√d
 
off
 
by
 
RISCOF


40 #f‹ 
v¨ious
 
a˘i⁄s
 
≥rf‹med
 
ö
 
œãr
 
fun˘i⁄s
, 
•ecifiˇŒy
 
to
 
run
 
the
 
ã°s
 in

41 #∑øŒñ 
⁄
 
the
 
DUT
 
execuèbÀ
. 
C™
 
Æso
 
be
 
u£d
 
ö
Åhê
buûd
 
fun˘i⁄
 
ªquúed
.

42 
£lf
.
num_jobs
 = 
	`°r
(
c⁄fig
['jobs'] 'jobs' 
ö
 config 1)

44 #P©h 
to
 
the
 
dúe˘‹y
 
whîe
 
this
 
pyth⁄
 
fûe
 
is
 
loˇãd
. 
CﬁÀ˘
 
ô
 
‰om
Åhê
c⁄fig
.
öi


45 
£lf
.
∂ugö∑th
=
os
.
∑th
.
	`ab•©h
(
c⁄fig
['pluginpath'])

47 #CﬁÀ˘ 
the
 
∑ths
 
to
Åhê
riscv
-
c⁄fig
 
ab£d
 
ISA
 
™d
 
∂©f‹m
 
yaml
 
fûes
. 
O√
 
ˇn
 
choo£


48 #tÿ
h¨dcode
 
the£
 
hîe
 
ô£lf
 
ö°ód
 
of
 
pickög
 
ô
 
‰om
 
the
 
c⁄fig
.
öi
 
fûe
.

49 
£lf
.
iß_•ec
 = 
os
.
∑th
.
	`ab•©h
(
c⁄fig
['ispec'])

50 
£lf
.
∂©f‹m_•ec
 = 
os
.
∑th
.
	`ab•©h
(
c⁄fig
['pspec'])

52 #Wê
ˇ±uª
 
the
 
u£r
 
would
 
like
Åhê
run
Åhê
ã°s
 
⁄
Åhê
èrgë
 
‹


53 #nŸ. 
If
 
you
 
¨e
 
öãª°ed
 
ö
 
ju°
 
compûög
 
the
 
ã°s
 
™d
 
nŸ
 
ru¬ög


54 #them 
⁄
 
the
 
èrgë
, 
thí
 
fﬁlowög
 
v¨übÀ
 
should
 
be
 
£t
 
to
 
FÆ£


55 'èrgë_run' 
ö
 
c⁄fig
 
™d
 config['target_run']=='0':

56 
£lf
.
èrgë_run
 = 
FÆ£


58 
£lf
.
èrgë_run
 = 
True


60 #Rëu∫ 
the
 
∑ømëîs
 
£t
 
above
 
back
 
to
 
RISCOF
 
fuπhî
 
¥o˚ssög
.

61  
s˛ass


63 
def
 
	$öôüli£
(
£lf
, 
suôe
, 
w‹k_dú
, 
¨chã°_ív
):

64 #ˇ±uª 
the
 
w‹kög
 
dúe˘‹y
. 
Any
 
¨tiÁ˘s
 
th©
Åhê
DUT
 
¸óãs
 
should
 
be
 
∂a˚d
 
ö
 
this


65 #dúe˘‹y. 
Othî
 
¨tiÁ˘s
 
‰om
 
the
 
‰amew‹k
 
™d
Åhê
Re„ªn˚
 
∂ugö
 
wûl
 
Æso
 
be
 
∂a˚d


66 #hîê
ô£lf
.

67 
£lf
.
w‹k_dú
 = work_dir

69 #ˇ±uª 
the
 
¨chôe˘uøl
 
ã°
-
suôe
 
dúe˘‹y
.

70 
£lf
.
suôe_dú
 = 
suôe


72 #NŸê
the
 
m¨ch
 
is
 
nŸ
 
h¨dwúed
 
hîe
, 
beˇu£
 
ô
 
wûl
 
ch™ge
 
óch


73 #ã°. 
Simû¨ly
 
the
 
ouçut
 
ñf
 
«me
 
™d
 
compûe
 
ma¸os
 
wûl
 
be
 
assig√d
 
œãr
 
ö
Åhe

74 #runTe°†
fun˘i⁄


75 
£lf
.
compûe_cmd
 = 
os
.
	`gëív
("CROSS_COMPILE"Ë+ 'gc¯-m¨ch={0}\
-°©i¯-mcmodñ=med™y -fvisibûôy=hiddí -no°dlib -no°¨tfûe†-g\
-T '+£lf.
∂ugö∑th
+'/ív/lök.ld\
-I '+£lf.∂ugö∑th+'/ív/\
-I ' + 
¨chã°_ív
 + ' {2} -o {3} {4}'

81 
def
 
	$buûd
(
£lf
, 
iß_yaml
, 
∂©f‹m_yaml
):

82 #lﬂd 
the
 
iß
 
yaml
 
as
 
a
 
di˘i⁄¨y
 
ö
 
pyth⁄
.

83 
i•ec
 = 
utûs
.
	`lﬂd_yaml
(
iß_yaml
)['hart0']

85 #ˇ±uª 
the
 
XLEN
 
vÆue
 
by
 
pickög
Åhê
max
 vÆuê
ö
 'suµ‹ãd_xÀn' 
fõld
 
of
 
iß
 
yaml
. 
This


86 #wû»
be
 
u£ful
 
ö
 
£âög
 
öãgî
 
vÆue
 i¿
the
 
compûî
 
	`°rög
 (
nŸ
 
Æªady
 
h¨dcoded
);

87 
£lf
.
xÀn
 = ('64' 64 
ö
 
i•ec
['supported_xlen'] '32')

89 
£lf
.
compûe_cmd
 = sñf.compûe_cmd+' -mabi='+('Õ64 ' 64 
ö
 
i•ec
['supported_xlen'] 'ilp32 ')

91 
def
 
	$runTe°s
(
£lf
, 
ã°Li°
):

92 #Dñëê
Makefûe
 
ô
 
Æªady
 
exi°s
.

93 
os
.
∑th
.
	`exi°s
(
£lf
.
w‹k_dú
+ "/Makefûe." + sñf.
«me
[:-1]):

94 
os
.
	`ªmove
(
£lf
.
w‹k_dú
+ "/Makefûe." + sñf.
«me
[:-1])

95 #¸óã 
™
 
ö°™˚
 
the
 
makeUtû
 
˛ass
 
th©
 
we
 
wûl
 
u£
 
to
 
¸óã
 
èrgës
.

96 
make
 = 
utûs
.
	`makeUtû
(
makefûeP©h
=
os
.
∑th
.
	`joö
(
£lf
.
w‹k_dú
, "Makefûe." + sñf.
«me
[:-1]))

98 #£à
the
 
make
 
comm™d
 
th©
 
wûl
 
be
 
u£d
. 
The
 
num_jobs
 
∑ømëî
 
was
 
£t
 
ö
Åhê
__öô__


99 #fun˘i⁄ 
óæõr


100 
make
.
makeComm™d
 = 'makê-j' + 
£lf
.
num_jobs


102 #wê
wûl
 
ôî©e
 
ovî
 
óch
 
íåy
 
ö
 
the
 
ã°Li°
. 
Each
É¡ry 
node
 wû»
be
 
ª„ªd
 
to
 
by
Åhe

103 #v¨übÀ 
ã°«me
.

104 
ã°«me
 
ö
 
ã°Li°
:

105 #f‹ 
óch
 
ã°«me
 
we
 
gë
 
Æl
 
ôs
 
	`fõlds
 (
as
 
des¸ibed
 
by
 
the
 
ã°Li°
 
f‹m©
)

106 
ã°íåy
 = 
ã°Li°
[
ã°«me
]

108 #wê
ˇ±uª
 
the
 
∑th
 
to
Åhê
as£mbly
 
fûe
 
of
 
this
 
ã°


109 
ã°
 = 
ã°íåy
['test_path']

111 #ˇ±uª 
the
 
dúe˘‹y
 
whîe
Åhê
¨tiÁ˘s
 
of
 
this
 
ã°
 
wûl
 
be
 
dum≥d
/
¸óãd
. 
RISCOF
 
is


112 #goög 
to
 
look
 
öto
 
this
 
dúe˘‹y
 
the
 
sig«tuª
 
fûes


113 
ã°_dú
 = 
ã°íåy
['work_dir']

115 #«mê
of
 
the
 
ñf
 
fûe
 
a·î
 
compû©i⁄
 o‡thê
ã°


116 
ñf
 = 'my.elf'

118 #«mê
of
 
the
 
sig«tuª
 
fûe
 
as
 
≥r
 
ªquúemít
 o‡
RISCOF
. RISCOF 
ex≥˘s
Åhêsig«tuª 
to


119 #bê
«med
 
as
 
DUT
-<
dut
-
«me
>.
sig«tuª
. 
The
 
bñow
 
v¨übÀ
 
¸óãs
 
™
 
absﬁuã
 
∑th
 
of


120 #sig«tuª 
fûe
.

121 
sig_fûe
 = 
os
.
∑th
.
	`joö
(
ã°_dú
, 
£lf
.
«me
[:-1] + ".signature")

123 #f‹ 
óch
 
ã°
 
thîe
 
¨e
 
•ecific
 
compûe
 
ma¸os
 
th©
 
√ed
 
to
 
be
 
íabÀd
. 
The
 ma¸o†
ö


124 #thê
ã°Li°
 
node
 
⁄ly
 
c⁄èö
 
the
 
ma¸os
/
vÆues
. 
F‹
Åhê
gcc
 
toﬁchaö
 
we
 
√ed
 
to


125 #¥efix 
wôh
 "-D". 
The
 
fﬁlowög
 
d€s
 
¥eci£ly
 
th©
.

126 
compûe_ma¸os
 = ' -D' + " -D".
	`joö
(
ã°íåy
['macros'])

128 #sub°ôuã 
Æl
 
v¨übÀs
 
ö
 
the
 
compûe
 
comm™d
 
th©
 
we
 
¸óãd
 i¿thê
öôülize
 
fun˘i⁄


129 
cmd
 = 
£lf
.
compûe_cmd
.
	`f‹m©
(
ã°íåy
['iß'].
	`lowî
(), sñf.
xÀn
, 
ã°
, 
ñf
, 
compûe_ma¸os
)

131 #i‡
the
 
u£r
 
w™ts
 
to
 
dißbÀ
 
ru¬ög
Åhê
ã°s
 
™d
 
⁄ly
 
compûe
Åhêã°s, 
thí


132 #thê"ñ£" 
˛au£
 
is
 
execuãd
 
bñow
 
assignög
 
the
 
sim
 
comm™d
 
to
 
sim∂e
 
no
 
a˘i⁄


133 #echÿ
°©emít
.

134 
£lf
.
èrgë_run
:

135 #£à
up
 
the
 
simuœti⁄
 
comm™d
. 
Tem∂©e
 
is
 
•ike
. 
PÀa£
 
ch™ge
.

136 
simcmd
 = 
£lf
.
dut_exe
 + ' -®{0} {1}'.
	$f‹m©
(
sig_fûe
, 
ñf
)

138 
simcmd
 = 'echo "NO RUN"'

140 #c⁄ˇã«ã 
Æl
 
comm™ds
 
th©
 
√ed
 
to
 
be
 
execuãd
 
wôhö
 
a
 
make
-
èrgë
.

141 
execuã
 = '@cd {0}; {1}; {2};'.
	`f‹m©
(
ã°íåy
['w‹k_dú'], 
cmd
, 
simcmd
)

143 #¸óã 
a
 
èrgë
. 
The
 
makeutû
 
wûl
 
¸óã
áÅ¨gë 
wôh
 
the
 
«me
 "TARGET<num>" 
whîe
 
num


144 #°¨t†
‰om
 0 
™d
 
ö¸emíts
 
autom©iˇŒy
 
óch
 
√w
 
èrgë
 
th©
 
is
 
added


145 
make
.
	$add_èrgë
(
execuã
)

147 #⁄˚ 
the
 
make
-
èrgës
 
¨e
 
d⁄e
 
™d
Åhê
makefûe
 
has
 
bìn
 
¸óãd
, 
run
 
Æl
Åhêèrgë†
ö


148 #∑øŒñ 
usög
 
the
 
make
 
comm™d
 
£t
 
above
.

149 
make
.
	$execuã_Æl
(
£lf
.
w‹k_dú
)

151 #i‡
èrgë
 
runs
 
¨e
 
nŸ
 
ªquúed
 
thí
 
we
 
sim∂y
 
exô
 
as
 
this
 
poöt
 
a·î
 
ru¬ög
 
Æl


152 #thê
makefûe
 
èrgës
.

153 
nŸ
 
£lf
.
èrgë_run
:

154 
øi£
 
	`Sy°emExô
(0)

	@tests/arch-test-target/sail_cSim/env/model_test.h

1 #¥agm®
⁄˚


4 
	#RVMODEL_DATA_SECTION
 \

5 .
push£˘i⁄
 .
toho°
,"aw",@
¥ogbôs
; \

6 .
Æign
 8; .
globÆ
 
toho°
;Åoho°: .
dw‹d
 0; \

7 .
Æign
 8; .
globÆ
 
‰omho°
; fromho°: .
dw‹d
 0; \

8 .
p›£˘i⁄
; \

9 .
Æign
 8; .
globÆ
 
begö_ªg°©e
; begin_regstate: \

10 .
w‹d
 128; \

11 .
Æign
 8; .
globÆ
 
íd_ªg°©e
;Énd_regstate: \

12 .
w‹d
 4;

	)

16 
	#RVMODEL_HALT
 \

17 
li
 
x1
, 1; \

18 
wrôe_toho°
: \

19 
sw
 
x1
, 
toho°
, 
t5
; \

20 
j
 
wrôe_toho°
;

	)

22 
	#RVMODEL_BOOT


	)

25 
	#RVMODEL_DATA_BEGIN
 \

26 
RVMODEL_DATA_SECTION
.
Æign
 4; \

27 .
globÆ
 
begö_sig«tuª
; \

28 
begö_sig«tuª
:

	)

31 
	#RVMODEL_DATA_END
 \

32 .
Æign
 4; \

33 .
globÆ
 
íd_sig«tuª
; \

34 
íd_sig«tuª
:

	)

37 
	#RVMODEL_IO_INIT


	)

39 
	#RVMODEL_IO_WRITE_STR
(
_R
, 
_STR
)

	)

41 
	#RVMODEL_IO_CHECK
()

	)

43 
	#RVMODEL_IO_ASSERT_GPR_EQ
(
_S
, 
_R
, 
_I
)

	)

45 
	#RVMODEL_IO_ASSERT_SFPR_EQ
(
_F
, 
_R
, 
_I
)

	)

47 
	#RVMODEL_IO_ASSERT_DFPR_EQ
(
_D
, 
_R
, 
_I
)

	)

48 
	#RVMODEL_SET_MSW_INT


	)

49 
	#RVMODEL_CLEAR_MSW_INT


	)

50 
	#RVMODEL_CLEAR_MTIMER_INT


	)

51 
	#RVMODEL_CLEAR_MEXT_INT


	)

	@tests/arch-test-target/sail_cSim/riscof_sail_cSim.py

1 
imp‹t
 
os


2 
imp‹t
 
ª


3 
imp‹t
 
shutû


4 
imp‹t
 
sub¥o˚ss


5 
imp‹t
 
shÀx


6 
imp‹t
 
loggög


7 
imp‹t
 
øndom


8 
imp‹t
 
°rög


9 
‰om
 
°rög
 
imp‹t
 
Tem∂©e


11 
imp‹t
 
	griscof
.
utûs
 
as
 utils

12 
‰om
 
	griscof
.
∂ugöTem∂©e
 
imp‹t
ÖluginTemplate

13 
imp‹t
 
	griscof
.
c⁄°™ts
 
as
 constants

14 
‰om
 
	griscv_ißc
.
ißc
 
imp‹t
 isac

16 
	gloggî
 = 
loggög
.
	$gëLoggî
()

18 
˛ass
 
	$ßû_cSim
(
∂ugöTem∂©e
):

19 
__modñ__
 = "sail_c_simulator"

20 
__vîsi⁄__
 = "0.5.0"

22 
def
 
	$__öô__
(
£lf
, *
¨gs
, **
kw¨gs
):

23 
s˛ass
 = 
	`su≥r
().
	$__öô__
(*
¨gs
, **
kw¨gs
)

25 
c⁄fig
 = 
kw¨gs
.
	`gë
('config')

26 
c⁄fig
 
is
 
N⁄e
:

27 
loggî
.
	`îr‹
("ConfigÇode for sail_cSim missing.")

28 
øi£
 
	$Sy°emExô
(1)

29 
£lf
.
num_jobs
 = 
	`°r
(
c⁄fig
['jobs'] 'jobs' 
ö
 config 1)

30 
£lf
.
∂ugö∑th
 = 
os
.
∑th
.
	`ab•©h
(
c⁄fig
['pluginpath'])

31 
£lf
.
ßû_exe
 = { '32' : 
os
.
∑th
.
	`joö
(
c⁄fig
['PATH'] 'PATH' 
ö
 config "","riscv_sim_RV32"),

32 '64' : 
os
.
∑th
.
	`joö
(
c⁄fig
['PATH'] 'PATH' 
ö
 c⁄fig "","riscv_sim_RV64")
	}
}

33 
£lf
.
iß_•ec
 = 
os
.
∑th
.
ab•©h
(
c⁄fig
['i•ec']Ë'i•ec' 
ö
 config ''

34 
£lf
.
∂©f‹m_•ec
 = 
os
.
∑th
.
ab•©h
(
c⁄fig
['p•ec']Ë'i•ec' 
ö
 config ''

35 
£lf
.
make
 = 
c⁄fig
['make'] 'make' 
ö
 config 'make'

36 
loggî
.
debug
("SAIL CSimÖlugin initialised usingÅhe following configuration.")

37 
íåy
 
ö
 
c⁄fig
:

38 
loggî
.
debug
(
íåy
+' : '+
c⁄fig
[entry])

39  
s˛ass


41 
def
 
	$öôüli£
(
£lf
, 
suôe
, 
w‹k_dú
, 
¨chã°_ív
):

42 
£lf
.
suôe
 = suite

43 
£lf
.
w‹k_dú
 = work_dir

44 
£lf
.
objdump_cmd
 = 
os
.
	`gëív
("CROSS_COMPILE") + 'objdump -D {0} > {2};'

45 
£lf
.
compûe_cmd
 = 
os
.
	`gëív
("CROSS_COMPILE"Ë+ 'gc¯-m¨ch={0} \
-°©i¯-mcmodñ=med™y -fvisibûôy=hiddí -no°dlib -no°¨tfûes\
-T '+£lf.
∂ugö∑th
+'/ív/lök.ld\
-I '+£lf.∂ugö∑th+'/ív/\
-I ' + 
¨chã°_ív


51 
def
 
	$buûd
(
£lf
, 
iß_yaml
, 
∂©f‹m_yaml
):

52 
i•ec
 = 
utûs
.
	`lﬂd_yaml
(
iß_yaml
)['hart0']

53 
£lf
.
xÀn
 = ('64' 64 
ö
 
i•ec
['supported_xlen'] '32')

54 
£lf
.
iß
 = 'rv' + sñf.
xÀn


55 
£lf
.
compûe_cmd
 = sñf.compûe_cmd+' -mabi='+('Õ64 ' 64 
ö
 
i•ec
['supported_xlen'] 'ilp32 ')

56 "I" 
ö
 
i•ec
["ISA"]:

57 
£lf
.
iß
 += 'i'

58 "M" 
ö
 
i•ec
["ISA"]:

59 
£lf
.
iß
 += 'm'

60 "C" 
ö
 
i•ec
["ISA"]:

61 
£lf
.
iß
 += 'c'

62 "F" 
ö
 
i•ec
["ISA"]:

63 
£lf
.
iß
 += 'f'

64 "D" 
ö
 
i•ec
["ISA"]:

65 
£lf
.
iß
 += 'd'

66 
objdump
 = 
os
.
	`gëív
("CROSS_COMPILE"Ë+ "objdump".
	$f‹m©
(
£lf
.
xÀn
)

67 
shutû
.
	$which
(
objdump
Ë
is
 
N⁄e
:

68 
loggî
.
	`îr‹
(
objdump
+":ÉxecutableÇot found. Please checkÉnvironment setup.")

69 
øi£
 
	$Sy°emExô
(1)

70 
compûî
 = 
os
.
	`gëív
("CROSS_COMPILE"Ë+ "gcc".
	$f‹m©
(
£lf
.
xÀn
)

71 
shutû
.
	$which
(
compûî
Ë
is
 
N⁄e
:

72 
loggî
.
	`îr‹
(
compûî
+":ÉxecutableÇot found. Please checkÉnvironment setup.")

73 
øi£
 
	$Sy°emExô
(1)

74 
shutû
.
	$which
(
£lf
.
ßû_exe
[£lf.
xÀn
]Ë
is
 
N⁄e
:

75 
loggî
.
	`îr‹
(
£lf
.
ßû_exe
[£lf.
xÀn
]+ ":ÉxecutableÇot found. Please checkÉnvironment setup.")

76 
øi£
 
	$Sy°emExô
(1)

77 
shutû
.
	$which
(
£lf
.
make
Ë
is
 
N⁄e
:

78 
loggî
.
	`îr‹
(
£lf
.
make
+":ÉxecutableÇot found. Please checkÉnvironment setup.")

79 
øi£
 
	$Sy°emExô
(1)

82 
def
 
	$runTe°s
(
£lf
, 
ã°Li°
, 
cgf_fûe
=
N⁄e
):

83 
os
.
∑th
.
	`exi°s
(
£lf
.
w‹k_dú
+ "/Makefûe." + sñf.
«me
[:-1]):

84 
os
.
	`ªmove
(
£lf
.
w‹k_dú
+ "/Makefûe." + sñf.
«me
[:-1])

85 
make
 = 
utûs
.
	`makeUtû
(
makefûeP©h
=
os
.
∑th
.
	`joö
(
£lf
.
w‹k_dú
, "Makefûe." + sñf.
«me
[:-1]))

86 
make
.
makeComm™d
 = 
£lf
.makê+ ' -j' + sñf.
num_jobs


87 
fûe
 
ö
 
ã°Li°
:

88 
ã°íåy
 = 
ã°Li°
[
fûe
]

89 
ã°
 = 
ã°íåy
['test_path']

90 
ã°_dú
 = 
ã°íåy
['work_dir']

91 
ã°_«me
 = 
ã°
.
	`r•lô
('/',1)[1][:-2]

93 
ñf
 = 'ref.elf'

95 
execuã
 = "@cd "+
ã°íåy
['work_dir']+";"

97 
cmd
 = 
£lf
.
compûe_cmd
.
	`f‹m©
(
ã°íåy
['iß'].
	`lowî
(), sñf.
xÀn
Ë+ ' ' + 
ã°
 + ' -ÿ' + 
ñf


98 
compûe_cmd
 = 
cmd
 + ' -D' + " -D".
	`joö
(
ã°íåy
['macros'])

99 
execuã
+=
compûe_cmd
+";"

101 
execuã
 +
£lf
.
objdump_cmd
.
	`f‹m©
(
ñf
, sñf.
xÀn
, 'ref.disass')

102 
sig_fûe
 = 
os
.
∑th
.
	`joö
(
ã°_dú
, 
£lf
.
«me
[:-1] + ".signature")

104 
execuã
 +
£lf
.
ßû_exe
[£lf.
xÀn
] + ' --ã°-sig«tuª={0} {1} > {2}.log 2>&1;'.
	$f‹m©
(
sig_fûe
, 
ñf
, 
ã°_«me
)

106 
cov_°r
 = ' '

107 
œbñ
 
ö
 
ã°íåy
['coverage_labels']:

108 
cov_°r
+=' -»'+
œbñ


110 
cgf_fûe
 
is
 
nŸ
 
N⁄e
:

111 
covîage_cmd
 = 'riscv_iß¯--vîbo£ infÿcovîagê-d \
-à{0}.log --∑r£r-«mêc_ßû -ÿcovîage.Ωà \
--sig-œbñ begö_sig«tuªÉnd_sig«tuª \
--ã°-œbñÑvã°_code_begöÑvã°_code_íd \
-êªf.ñ‡-¯{1} -x{2} {3};'.
	`f‹m©
(\

116 
ã°_«me
, ' -¯'.
	`joö
(
cgf_fûe
), 
£lf
.
xÀn
, 
cov_°r
)

118 
covîage_cmd
 = ''

121 
execuã
+=
covîage_cmd


123 
make
.
	$add_èrgë
(
execuã
)

124 
make
.
	`execuã_Æl
(
£lf
.
w‹k_dú
)

	@tests/arch-test-target/setup.py

1 
imp‹t
 
c⁄°™ts


2 
imp‹t
 
¨g∑r£


3 
imp‹t
 
	gruamñ
.
	gyaml


5 #£tu∞
the
 
ISA
 
c⁄fig
 
fûe


6 
def
 
	$£tup_ã°li°
(
riscv_devi˚
):

7 #ISA 
c⁄fig
 
fûe
 
∑th


8 
i•ec
 = 
c⁄°™ts
.
roŸ
 + '/rv32emu/rv32emu_isa.yaml'

9 
miß
 = 0x40000100

10 
ISA
 = 'RV32I'

12 
nŸ
 
riscv_devi˚
:

13 
øi£
 
	`As£πi⁄Eº‹
('There isÇotány ISA.')

15 'M' 
ö
 
riscv_devi˚
:

16 
miß
 |
c⁄°™ts
.
miß_M


17 
ISA
 += 'M'

18 'A' 
ö
 
riscv_devi˚
:

19 
miß
 |
c⁄°™ts
.
miß_A


20 
ISA
 += 'A'

21 'F' 
ö
 
riscv_devi˚
:

22 
miß
 |
c⁄°™ts
.
miß_F


23 
ISA
 += 'F'

24 'C' 
ö
 
riscv_devi˚
:

25 
miß
 |
c⁄°™ts
.
miß_C


26 
ISA
 += 'C'

27 'Zic§' 
ö
 
riscv_devi˚
:

28 
ISA
 += 'Zicsr'

29 'Zi„n˚i' 
ö
 
riscv_devi˚
:

30 
ISA
 +'_Zi„n˚i' 'Zic§' 
ö
 ISA 'Zifencei'

32 
wôh
 
	`›í
(
i•ec
, 'r'Ë
as
 
fûe
:

33 
åy
:

34 
fûe
 = 
ruamñ
.
yaml
.
	`YAML
(
typ
='ß„', 
puª
=
True
).
	$lﬂd
(
fûe
)

35 
ex˚±
 
ruamñ
.
yaml
.
YAMLEº‹
 
as
 
msg
:

36 
	$¥öt
(
msg
)

37 
øi£
 
	$Sy°emExô
(1)

39 
fûe
['h¨t0']['ISA'] = 
ISA


40 
fûe
['h¨t0']['miß']['ª£t-vÆ'] = 
miß


42 
wôh
 
	`›í
(
i•ec
, 'w+'Ë
as
 
outfûe
:

43 
ruamñ
.
yaml
.
	`YAML
(
typ
='unß„', 
puª
=
True
).
	$dump
(
fûe
, 
outfûe
)

45 #£tu∞
the
 
riscof
 
c⁄fig
 
fûe


46 
def
 
	$£tup_c⁄fig
():

47 
cwd
 = 
c⁄°™ts
.cwd

48 
roŸ
 = 
c⁄°™ts
.root

49 
ª‚ame
 = 
c⁄°™ts
.refname

50 
duäame
 = 
c⁄°™ts
.dutname

52 #¸óã 
c⁄fig
 
fûe


53 
c⁄figfûe
 = 
	`›í
(
roŸ
 + '/config.ini','w')

54 
c⁄figfûe
.
	`wrôe
(
c⁄°™ts
.
c⁄fig_ãmp
.
	`f‹m©
(
ª‚ame
, \

55 
roŸ
+'/'+
ª‚ame
, 
duäame
,ÑoŸ+'/'+duäame, 
cwd
))

56 
c⁄figfûe
.
	$˛o£
()

58 
__«me__
=="__main__":

59 
∑r£r
 = 
¨g∑r£
.
	$ArgumítP¨£r
()

60 
∑r£r
.
	`add_¨gumít
('--riscv_devi˚', 
hñp
='the ISA willÅest',

62 
¨gs
 = 
∑r£r
.
	$∑r£_¨gs
()

64 
	$£tup_ã°li°
(
¨gs
.
riscv_devi˚
)

65 
	`£tup_c⁄fig
()

	@tests/bench-aggregator.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄3


3 
imp‹t
 
js⁄


4 
imp‹t
 
sub¥o˚ss


6 
def
 
	$run_bíchm¨k
(
b
):

7 
öãΩ
 = 
N⁄e


8 "sh" 
ö
 
b
:

9 
öãΩ
 = "bash"

10 
ñif
 "py" 
ö
 
b
:

11 
öãΩ
 = "python3"

13 
sub¥o˚ss
.
	$run
(
¨gs
=[
öãΩ
, 
b
], 
shñl
=
FÆ£
, 
check
=
True
)

15 
def
 
	$lﬂd_bíchm¨k
(
fûe
):

16 
f
 = 
	`›í
(
fûe
, "r")

17  
js⁄
.
	$lﬂd
(
f
)

19 #ru¿
bíchm¨ks


20 
bíchm¨ks
 = [

24 
b
 
ö
 
bíchm¨ks
:

25 
	$run_bíchm¨k
(
b
)

27 #comböê
bíchm¨ks
 
ouçut
 
d©a


28 
bíchm¨ks_ouçut
 = [

32 
bíchm¨k_d©a
 = [
	$lﬂd_bíchm¨k
(
bo
Ëbÿ
ö
 
bíchm¨ks_ouçut
]

34 
bíchm¨k_ouçut
 = "benchmark_output.json"

35 
f
 = 
	`›í
(
bíchm¨k_ouçut
, "w")

36 
f
.
	`wrôe
(
js⁄
.
	$dumps
(
bíchm¨k_d©a
, 
ödít
=4))

37 
f
.
	`˛o£
()

	@tests/cache/test-cache.c

1 
	~<as£π.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

4 
	~<°rög.h
>

6 
	~"ˇche.h
"

8 
	$¥öt_vÆue
(*
vÆ
)

10 i‡(
vÆ
)

11 
	`¥ötf
("%d\n", *
vÆ
);

13 
	`¥ötf
("NULL\n");

14 
	}
}

16 
	$•lô
(**
¨r
, *
°r
, c⁄° *
dñ
)

18 *
s
 = 
	`°πok
(
°r
, 
dñ
);

20 
s
) {

21 *
¨r
++ = 
s
;

22 
s
 = 
	`°πok
(
NULL
, 
dñ
);

24 
	}
}

32 
	$maö
(
¨gc
, *
¨gv
[])

34 i‡(
¨gc
 < 2)

37 
FILE
 *
Â
 = 
	`f›í
(
¨gv
[1], "r");

38 
	`as£π
(
Â
);

40 *
löe
 = 
NULL
, *
±r
 = NULL;

41 
size_t
 
Àn
 = 0;

42 
ˇche
 *ˇchê
NULL
;

43 
key
, *
™s
, *
vÆ
;

44 
	`gëlöe
(&
löe
, &
Àn
, 
Â
) != -1) {

45 *
¨r
[3];

46 
	`•lô
(
¨r
, 
löe
, " ");

47 i‡(!
	`°rcmp
(
¨r
[0], "GET")) {

48 
key
 = (Ë
	`°πﬁ
(
¨r
[1], &
±r
, 10);

49 
™s
 = 
	`ˇche_gë
(
ˇche
, 
key
, 
åue
);

50 
	`¥öt_vÆue
(
™s
);

51 } i‡(!
	`°rcmp
(
¨r
[0], "PUT")) {

52 
key
 = (Ë
	`°πﬁ
(
¨r
[1], &
±r
, 10);

53 
vÆ
 = 
	`mÆloc
(());

54 *
vÆ
 = (Ë
	`°πﬁ
(
¨r
[2], &
±r
, 10);

55 
vÆ
 = 
	`ˇche_put
(
ˇche
, 
key
, val);

56 i‡(
vÆ
) {

57 
	`¥ötf
("REPLACE %d\n", *
vÆ
);

58 
	`‰ì
(
vÆ
);

60 } i‡(!
	`°rcmp
(
¨r
[0], "NEW\n")) {

61 
ˇche
 = 
	`ˇche_¸óã
(8);

62 
	`as£π
(
ˇche
);

63 
	`¥ötf
("NEW CACHE\n");

64 } i‡(!
	`°rcmp
(
¨r
[0], "FREE\n")) {

65 
	`ˇche_‰ì
(
ˇche
);

66 
	`¥ötf
("FREE CACHE\n");

69 
	`f˛o£
(
Â
);

72 
	}
}

	@tests/captcha.c

23 
	~<f˙é.h
>

24 
	~<°döt.h
>

25 
	~<°dio.h
>

26 
	~<°rög.h
>

27 
	~<uni°d.h
>

29 
	#GIF_SIZE
 (17646)

	)

30 
	#IMG_SIZE
 (70 * 200)

	)

32 
öt8_t
 *
	g…
[];

34 
ˇ±cha
(
uöt8_t
 *
im
);

36 
	$makegif
(
uöt8_t
 *
im
, uöt8_à
gif
[
GIF_SIZE
])

42 
	`mem˝y
(
gif
,

70 
uöt8_t
 *
i
 = 
im
;

71 
uöt8_t
 *
p
 = 
gif
 + 13 + 48 + 10 + 1;

72 
y
 = 0; y < 70; y++) {

73 *
p
++ = 250;

74 
x
 = 0; x < 50; x++) {

75 
uöt8_t
 
a
 = 
i
[0] >> 4, 
b
 = i[1] >> 4, 
c
 = i[2] >> 4, 
d
 = i[3] >> 4;

77 
p
[0] = 16 | (
a
 << 5);

78 
p
[1] = (
a
 >> 3Ë| 64 | (
b
 << 7);

79 
p
[2] = 
b
 >> 1;

80 
p
[3] = 1 | (
c
 << 1);

81 
p
[4] = 4 | (
d
 << 3);

82 
i
 += 4;

83 
p
 += 5;

88 
	`mem˝y
(
gif
 + 
GIF_SIZE
 - 4,

94 
	}
}

96 c⁄° 
öt8_t
 
	gsw
[200] = {

116 
	#MAX
(
x
, 
y
Ë((x > yË? (xË: (y))

	)

118 
	$Àâî
(
n
, 
pos
, 
uöt8_t
 *
im
, c⁄° uöt8_à*
swr
)

120 
öt8_t
 *
p
 = 
…
[
n
];

121 
uöt8_t
 *
r
 = 
im
 + 200 * 16 + 
pos
;

122 
uöt8_t
 *
i
 = 
r
;

123 
sk1
 = 
pos
;

124 
sk2
 = 
pos
;

125 
mpos
 = 
pos
;

126 
row
 = 0;

127 ; *
p
 != -101;Ö++) {

128 i‡(*
p
 < 0) {

129 i‡(*
p
 == -100) {

130 
r
 += 200;

131 
i
 = 
r
;

132 
sk1
 = 
pos
;

133 
row
++;

136 
i
 +-*
p
;

140 i‡(
sk1
 >= 200)

141 
sk1
 %= 200;

142 
skew
 = 
sw
[
sk1
] / 16;

143 
sk1
 +(
swr
[
pos
 + 
i
 - 
r
] & 0x1) + 1;

145 i‡(
sk2
 >= 200)

146 
sk2
 = sk2 % 200;

147 
skewh
 = 
sw
[
sk2
] / 70;

148 
sk2
 +(
swr
[
row
] & 0x1);

150 
uöt8_t
 *
x
 = 
i
 + 
skew
 * 200 + 
skewh
;

151 
mpos
 = 
	`MAX
(mpos, 
pos
 + 
i
 - 
r
);

153 i‡((
x
 - 
im
Ë< 
IMG_SIZE
)

154 *
x
 = (*
p
) << 4;

155 
i
++;

157  
mpos
;

158 
	}
}

160 
	#NDOTS
 100

	)

162 
uöt32_t
 
	gdr
[
NDOTS
];

164 
	$löe
(
uöt8_t
 *
im
, c⁄° uöt8_à*
swr
)

166 
sk1
 = 0;

167 
x
 = 0; x < 199; x++) {

168 i‡(
sk1
 >= 200)

169 
sk1
 = sk1 % 200;

170 
skew
 = 
sw
[
sk1
] / 16;

171 
sk1
 +
swr
[
x
] & 0x3 + 1;

172 
uöt8_t
 *
i
 = 
im
 + (200 * (45 + 
skew
Ë+ 
x
);

173 
i
[0] = 0;

174 
i
[1] = 0;

175 
i
[200] = 0;

176 
i
[201] = 0;

178 
	}
}

180 
	$dŸs
(
uöt8_t
 *
im
)

182 
n
 = 0;Ç < 
NDOTS
;Ç++) {

183 
uöt32_t
 
v
 = 
dr
[
n
];

184 
uöt8_t
 *
i
 = 
im
 + 
v
 % (200 * 67);

186 
i
[0] = 0xff;

187 
i
[1] = 0xff;

188 
i
[2] = 0xff;

189 
i
[200] = 0xff;

190 
i
[201] = 0xff;

191 
i
[202] = 0xff;

193 
	}
}

195 
	$blur
(
uöt8_t
 *
im
)

197 
uöt8_t
 *
i
 = 
im
;

198 
y
 = 0; y < 68; y++) {

199 
x
 = 0; x < 198; x++) {

200 
c11
 = *
i
, 
c12
 = i[1], 
c21
 = i[200], 
c22
 = i[201];

201 *
i
++ = ((
c11
 + 
c12
 + 
c21
 + 
c22
) / 4);

204 
	}
}

206 
	$fûãr
(
uöt8_t
 *
im
)

208 
uöt8_t
 
om
[
IMG_SIZE
];

209 
uöt8_t
 *
i
 = 
im
;

210 
uöt8_t
 *
o
 = 
om
;

212 
	`mem£t
(
om
, 0xff, (om));

214 
y
 = 0; y < 70; y++) {

215 
x
 = 4; x < 200 - 4; x++) {

216 i‡(
i
[0] > 0xf0 && i[1] < 0xf0) {

217 
o
[0] = 0;

218 
o
[1] = 0;

219 } i‡(
i
[0] < 0xf0 && i[1] > 0xf0) {

220 
o
[0] = 0;

221 
o
[1] = 0;

224 
i
++;

225 
o
++;

229 
	`memmove
(
im
, 
om
, (om));

230 
	}
}

232 
	$ˇ±cha
(
uöt8_t
 *
im
)

234 
uöt8_t
 
swr
[200];

235 
uöt8_t
 
l
[6] = "riscv";

237 
	`mem£t
(
im
, 0xff, 200 * 70);

238 
i
 = 0; i < 5; i++)

239 
l
[
i
] -= 'a';

240 
l
[5] = 0;

242 
p
 = 30;

243 
p
 = 
	`Àâî
(
l
[0],Ö, 
im
, 
swr
);

244 
p
 = 
	`Àâî
(
l
[1],Ö, 
im
, 
swr
);

245 
p
 = 
	`Àâî
(
l
[2],Ö, 
im
, 
swr
);

246 
p
 = 
	`Àâî
(
l
[3],Ö, 
im
, 
swr
);

247 
	`Àâî
(
l
[4], 
p
, 
im
, 
swr
);

248 
	`dŸs
(
im
);

249 
	`blur
(
im
);

250 
	`fûãr
(
im
);

251 
	`löe
(
im
, 
swr
);

252 
	}
}

254 
	#OUT_FILE
 "ˇ±cha.gif"

	)

255 
	$maö
()

257 
out
 = 
	`›í
(
OUT_FILE
, 
O_CREAT
 | 
O_WRONLY
, 
S_IRUSR
 | 
S_IWUSR
);

258 i‡(
out
 == -1)

261 
uöt8_t
 
im
[
IMG_SIZE
];

262 
uöt8_t
 
gif
[
GIF_SIZE
];

264 
	`ˇ±cha
(
im
);

265 
	`makegif
(
im
, 
gif
);

267 
	`wrôe
(
out
, 
gif
, 
GIF_SIZE
);

268 
	`˛o£
(
out
);

269 
	`¥ötf
("Fûê" 
OUT_FILE


271 
	`¥ötf
("Its content is 'riscv'.\n");

274 
	}
}

276 
öt8_t
 
	g…0
[] = {

309 
öt8_t
 
	g…1
[] = {

347 
öt8_t
 
	g…2
[] = {

372 
öt8_t
 
	g…3
[] = {

413 
öt8_t
 
	g…5
[] = {

443 
öt8_t
 
	g…7
[] = {

481 
öt8_t
 
	g…8
[] = {

504 
öt8_t
 
	g…9
[] = {

530 
öt8_t
 
	g…10
[] = {

570 
öt8_t
 
	g…11
[] = {

597 
öt8_t
 
	g…12
[] = {

647 
öt8_t
 
	g…13
[] = {

682 
öt8_t
 
	g…14
[] = {

713 
öt8_t
 
	g…15
[] = {

752 
öt8_t
 
	g…16
[] = {

790 
öt8_t
 
	g…17
[] = {

815 
öt8_t
 
	g…18
[] = {

841 
öt8_t
 
	g…19
[] = {

867 
öt8_t
 
	g…20
[] = {

904 
öt8_t
 
	g…21
[] = {

933 
öt8_t
 
	g…22
[] = {

973 
öt8_t
 
	g…23
[] = {

1005 
öt8_t
 
	g…24
[] = {

1042 
öt8_t
 *
	g…
[] = {

1043 
…0
, 
…1
, 
…2
, 
…3
,Üt0, 
…5
,Üt0, 
…7
, 
…8
,

1044 
…9
, 
…10
, 
…11
, 
…12
, 
…13
, 
…14
, 
…15
, 
…16
, 
…17
,

1045 
…18
, 
…19
, 
…20
, 
…21
, 
…22
, 
…23
, 
…24
,

	@tests/cc/cc.c

50 
	$£t_32bô
(*
p
, 
x
)

52 
p
[0] = 
x
;

53 
p
[1] = 
x
 >> 8;

54 
p
[2] = 
x
 >> 16;

55 
p
[3] = 
x
 >> 24;

56 
	}
}

59 
	$gë_32bô
(*
p
)

61  
p
[0] + (p[1] << 8) + (p[2] << 16) + (p[3] << 24);

62 
	}
}

66 
	gch
;

67 
	glöío
;

68 
	gtokí
;

69 
	gtokí_öt
;

70 
	gtokí_size
;

71 *
	gtokí_buf
;

73 
	$ôﬂ4
(
x
)

75 *
s
 = (*Ë
buf
 + 
code_pos
;

76 
x
 = x * 134218;

77 
s
[0] = (
x
 >> 27) + '0';

78 
x
 = (x & 134217727) * 5;

79 
s
[1] = (
x
 >> 26) + '0';

80 
x
 = (x & 67108863) * 5;

81 
s
[2] = (
x
 >> 25) + '0';

82 
x
 = (x & 33554431) * 5;

83 
s
[3] = (
x
 >> 24) + '0';

84 
	`wrôe
(2, 
s
, 4);

85 
	}
}

87 
	$îr‹
(
no
)

89 
	`wrôe
(2, "Error ", 6);

90 
	`ôﬂ4
(
no
);

91 
	`wrôe
(2, " inÜine ", 9);

92 
	`ôﬂ4
(
löío
);

93 
	`wrôe
(2, ".\x0d\x0a", 3);

94 
	`exô
(
no
);

95 
	}
}

97 
	$tokí_cmp
(*
s
, 
n
)

99 
i
 = 0;

100 
s
[
i
] =
tokí_buf
[i]) {

101 
i
 = i + 1;

102 i‡(
i
 =
n
)

106 
	}
}

108 
	$√xt_ch¨
()

110 
ch
 = 
	`gëch¨
();

111 i‡(
ch
 == 10)

112 
löío
 =Üineno + 1;

113  
ch
;

114 
	}
}

116 
	$°‹e_ch¨
()

118 
tokí_buf
[
tokí_öt
] = 
ch
;

119 
tokí_öt
 =Åoken_int + 1;

120 i‡(
tokí_öt
 >
tokí_size
)

121 
	`îr‹
(100);

122 
	`√xt_ch¨
();

123 
	}
}

125 
	$gë_tokí
()

128 *
fú°_m≠
 = " !\x22 \x0a\x07\x27()\x08\x06,\x03 \x09^^^^^^^^^^ ;\x12=\x14 __________________________[ ]\x05_ __________________________{\x04} ";

131 
tokí_size
 = 
syms_hód
 - 
code_pos
;

132 i‡(
tokí_size
 < 1024)

133 
	`îr‹
(100);

134 
tokí_size
 =Åoken_size - 512;

135 
tokí_buf
 = (*Ë
buf
 + 
code_pos
 + 256;

136 
tokí_öt
 = 0;

137 
tokí
 = 0;

139 (
ch
 == ' ') | (ch == 9) | (ch == 10) | (ch == '/')) {

140 i‡(
ch
 == '/') {

141 i‡(
	`√xt_ch¨
() != '*') {

142 
tokí
 = 9;

145 
	`√xt_ch¨
() != '/') {

146 
ch
 != '*') {

147 
	`√xt_ch¨
();

151 
	`√xt_ch¨
();

153 i‡(
ch
 > 255)

156 i‡((
ch
 - 32) >= 96)

157 
	`îr‹
(101);

158 
tokí
 = 
fú°_m≠
[
ch
 - 32];

159 i‡(
tokí
 == ' ')

160 
	`îr‹
(101);

162 i‡(
ch
 == 39) {

163 
tokí
 = '^';

164 
tokí_öt
 = 
	`√xt_ch¨
();

165 
	`√xt_ch¨
() != 39) {

167 
	`√xt_ch¨
();

168 } i‡(
tokí
 == '"') {

169 
	`√xt_ch¨
();

170 
ch
 != 34) {

171 i‡(
ch
 == 92) {

172 i‡(
	`√xt_ch¨
() == 'x') {

173 
h
 = 
	`√xt_ch¨
() - 48;

174 i‡(
h
 > 9)

175 
h
 = h - 39;

176 
l
 = 
	`√xt_ch¨
() - 48;

177 i‡(
l
 > 9)

178 
l
 =Ü - 39;

179 
ch
 = (
h
 << 4Ë+ 
l
;

182 
	`°‹e_ch¨
();

184 
	`√xt_ch¨
();

185 } i‡(
tokí
 == '^') {

186 (
ch
 >= '0') & (ch <= '9')) {

187 
tokí_öt
 = (10 *Åokí_ötË+ 
ch
 - '0';

188 
	`√xt_ch¨
();

190 } i‡(
tokí
 == '_') {

193 
j
 = 1;

194 
j
) {

195 
	`°‹e_ch¨
();

196 i‡((
ch
 - 32) < 96)

197 
j
 = ((
fú°_m≠
[
ch
 - 32] & 254) == 94);

199 
j
 = 0;

201 
tokí_buf
[
tokí_öt
] = 0;

204 *
keyw‹ds
 =

206 
i
 = 0;

207 
Àn
 = 2;

208 
tokí
 = 96;

209 
Àn
) {

210 i‡(
Àn
 =
tokí_öt
) {

211 i‡(
	`tokí_cmp
(
keyw‹ds
 + 
i
 + 1, 
tokí_öt
))

214 
tokí
 =Åoken + 1;

215 
i
 = i + 
Àn
 + 1;

216 
Àn
 = 
keyw‹ds
[
i
] - '0';

218 
tokí
 = '_';

219 } i‡(
ch
 == '!') {

220 i‡(
	`√xt_ch¨
() == '=') {

221 
	`√xt_ch¨
();

222 
tokí
 = 17;

224 
	`îr‹
(101);

225 } i‡(
ch
 == '<') {

226 i‡(
	`√xt_ch¨
() == '<') {

227 
	`√xt_ch¨
();

228 
tokí
 = 1;

229 } i‡(
ch
 == '=') {

230 
	`√xt_ch¨
();

231 
tokí
 = 21;

233 } i‡(
ch
 == '=') {

234 i‡(
	`√xt_ch¨
() == '=') {

235 
	`√xt_ch¨
();

236 
tokí
 = 16;

238 } i‡(
ch
 == '>') {

239 i‡(
	`√xt_ch¨
() == '=') {

240 
	`√xt_ch¨
();

241 
tokí
 = 19;

242 } i‡(
ch
 == '>') {

243 
	`√xt_ch¨
();

244 
tokí
 = 2;

247 
	`√xt_ch¨
();

249 
	}
}

253 
	$sym_lookup
()

255 i‡(
tokí
 != '_')

256 
	`îr‹
(103);

258 
s
 = 
syms_hód
;

259 
s
 < 
buf_size
) {

260 
Àn
 = 
buf
[
s
 + 5];

261 i‡(
Àn
 =
tokí_öt
) {

262 i‡(
	`tokí_cmp
((*Ë
buf
 + 
s
 + 6, 
tokí_öt
))

263  
s
;

265 
s
 = s + 
Àn
 + 6;

268 
	}
}

270 
	$sym_≠≥nd
(
addr
, 
ty≥
)

272 
syms_hód
 = syms_hód - 
tokí_öt
 - 6;

273 
	`£t_32bô
(
buf
 + 
syms_hód
, 
addr
);

274 
buf
[
syms_hód
 + 4] = 
ty≥
;

275 
buf
[
syms_hód
 + 5] = 
tokí_öt
;

278 
tokí_öt
 != 0) {

279 
tokí_öt
 =Åoken_int - 1;

280 
buf
[
syms_hód
 + 6 + 
tokí_öt
] = 
tokí_buf
[token_int];

282 
	`gë_tokí
();

283 
	}
}

286 
	$sym_fix
(
s
)

288 i‡(
buf
[
s
 + 4] != 72)

289 
	`îr‹
(105);

291 
i
 = 
	`gë_32bô
(
buf
 + 
s
);

292 
i
) {

293 
i
 = 
	`emô_fix_ˇŒ_hîe
(i);

295 
	`£t_32bô
(
buf
 + 
s
, 
code_pos
);

296 
buf
[
s
 + 4] = 73;

297 
	}
}

301 
	$ac˚±
(
ch
)

304 i‡(
tokí
 =
ch
) {

305 
	`gë_tokí
();

309 
	}
}

311 
	$ex≥˘
(
t
)

313 i‡(
	`ac˚±
(
t
) == 0)

314 
	`îr‹
(102);

315 
	}
}

317 
	$ac˚±_ty≥_id
()

319 i‡(
tokí
 < 101)

321 i‡(
tokí
 > 105)

323 
	`gë_tokí
();

325 
	}
}

327 
	$ac˚±_ty≥
()

329 i‡(
	`ac˚±_ty≥_id
()) {

330 
	`ac˚±_ty≥_id
()) {

332 
	`ac˚±
(8)) {

337 
	}
}

339 
	$ex≥˘_ty≥
()

341 i‡(
	`ac˚±_ty≥
() == 0)

342 
	`îr‹
(106);

343 
	}
}

345 
∑r£_ex¥essi⁄
();

355 
	$∑r£_Á˘‹
()

357 i‡(
tokí
 == '(') {

358 
tokí
 == '(') {

359 
	`gë_tokí
();

360 i‡(
	`ac˚±_ty≥
()) {

361 
	`ex≥˘
(')');

363 
	`∑r£_ex¥essi⁄
();

364 
	`ex≥˘
(')');

370 i‡(
tokí
 == '^') {

371 
	`emô_numbî
(
tokí_öt
);

372 
	`gë_tokí
();

373 } i‡(
tokí
 == '"') {

374 
	`emô_°rög
(
tokí_öt
, 
tokí_buf
);

375 
	`gë_tokí
();

377 
sym
 = 
	`sym_lookup
();

378 i‡(
sym
 == 0)

379 
	`îr‹
(104);

380 
ty≥
 = 
buf
[
sym
 + 4];

381 
ofs
 = 
	`gë_32bô
(
buf
 + 
sym
);

382 
	`gë_tokí
();

384 i‡((
ty≥
 == 72) | (type == 73)) {

385 
	`ex≥˘
('(');

386 
¨gno
 = 0;

387 
ßve
 = 
	`emô_¥e_ˇŒ
();

388 i‡(
	`ac˚±
(')') == 0) {

389 
	`∑r£_ex¥essi⁄
();

390 
	`emô_¨g
(0);

391 
¨gno
 =árgno + 1;

392 
	`ac˚±
(',')) {

393 
	`∑r£_ex¥essi⁄
();

394 
	`emô_¨g
(
¨gno
);

395 
¨gno
 =árgno + 1;

397 
	`ex≥˘
(')');

399 
	`emô_ˇŒ
(
ty≥
 & 1, 
sym
, 
ofs
, 
¨gno
, 
ßve
);

400 } i‡(
	`ac˚±
('[')) {

401 
	`∑r£_ex¥essi⁄
();

402 
	`emô_ödex
(
ty≥
 & 1, 
ofs
);

403 
	`ex≥˘
(']');

404 i‡(
	`ac˚±
('=')) {

405 
	`emô_push
();

406 
	`∑r£_ex¥essi⁄
();

407 
	`emô_p›_°‹e_¨øy
();

409 
	`emô_lﬂd_¨øy
();

411 i‡(
	`ac˚±
('=')) {

412 
	`∑r£_ex¥essi⁄
();

413 
	`emô_°‹e
(
ty≥
 & 1, 
ofs
);

415 
	`emô_lﬂd
(
ty≥
 & 1, 
ofs
);

418 
	}
}

423 
	$∑r£_›î©i⁄
()

425 
	`∑r£_Á˘‹
();

426 
tokí
 < 16) {

427 
	`emô_push
();

428 
›
 = 
tokí
;

429 
	`gë_tokí
();

430 
	`∑r£_Á˘‹
();

431 
	`emô_›î©i⁄
(
›
);

433 
	}
}

438 
	$∑r£_ex¥essi⁄
()

440 
	`∑r£_›î©i⁄
();

441 i‡((
tokí
 & 240) == 16) {

442 
	`emô_push
();

443 
›
 = 
tokí
;

444 
	`gë_tokí
();

445 
	`∑r£_›î©i⁄
();

446 
	`emô_comp
(
›
);

448 
	}
}

452 
	$∑r£_c⁄dôi⁄
()

454 
	`ex≥˘
('(');

455 
	`∑r£_›î©i⁄
();

456 i‡((
tokí
 & 240) == 16) {

457 
	`emô_push
();

458 
›
 = 
tokí
;

459 
	`gë_tokí
();

460 
	`∑r£_›î©i⁄
();

461 
	`ex≥˘
(')');

462  
	`emô_bønch_if_c⁄d
(
›
);

464 
	`ex≥˘
(')');

465  
	`emô_bønch_if0
();

466 
	}
}

475 
	$∑r£_°©emít
()

477 i‡(
	`ac˚±
('{')) {

478 
h
 = 
syms_hód
;

479 
s
 = 
	`emô_sc›e_begö
();

480 
	`ac˚±
('}') == 0)

481 
	`∑r£_°©emít
();

482 
	`emô_sc›e_íd
(
s
);

483 
syms_hód
 = 
h
;

484 } i‡(
	`ac˚±
(96)) {

485 
bønch_pos
 = 
	`∑r£_c⁄dôi⁄
();

486 
	`∑r£_°©emít
();

487 i‡(
	`ac˚±
(97)) {

488 
nŸ_ñ£_pos
 = 
	`emô_jump
(0 );

489 
	`emô_fix_bønch_hîe
(
bønch_pos
);

490 
	`∑r£_°©emít
();

491 
	`emô_fix_jump_hîe
(
nŸ_ñ£_pos
);

493 
	`emô_fix_bønch_hîe
(
bønch_pos
);

494 } i‡(
	`ac˚±
(98)) {

495 
lo›
 = 
code_pos
;

496 
exô_pos
 = 
	`∑r£_c⁄dôi⁄
();

497 
	`∑r£_°©emít
();

498 
	`emô_jump
(
lo›
);

499 
	`emô_fix_bønch_hîe
(
exô_pos
);

500 } i‡(
	`ac˚±
(99)) {

501 i‡(
	`ac˚±
(';') == 0) {

502 
	`∑r£_ex¥essi⁄
();

503 
	`ex≥˘
(';');

505 
	`emô_ªtu∫
();

506 } i‡(
	`ac˚±_ty≥
()) {

507 
	`sym_≠≥nd
(0 , 74);

508 i‡(
	`ac˚±
('='))

509 
	`∑r£_ex¥essi⁄
();

510 
	`ex≥˘
(';');

511 
	`£t_32bô
(
buf
 + 
syms_hód
, 
	`emô_loˇl_v¨
());

513 
	`∑r£_ex¥essi⁄
();

514 
	`ex≥˘
(';');

516 
	}
}

522 
	$∑r£_fun˘i⁄
(
sym
)

524 
	`ex≥˘
('(');

525 
ª°‹e_hód
 = 
syms_hód
;

527 
n
 = 0;

528 
	`ac˚±
(')') == 0) {

529 
n
 =Ç + 1;

530 
	`ex≥˘_ty≥
();

531 i‡(
tokí
 == '_') {

532 
	`sym_≠≥nd
(
n
, 74);

534 
	`ac˚±
(',');

537 i‡(
	`ac˚±
(100)) {

538 
	`ex≥˘
('(');

539 
tokí
 != ')') {

540 i‡(
tokí
 == '"') {

541 i‡(
	`tokí_cmp
("emit ", 5)) {

542 
	`sym_fix
(
sym
);

543 
	`emô_mu…i
(
tokí_öt
 - 5, 
tokí_buf
 + 5);

546 
	`gë_tokí
();

548 
	`gë_tokí
();

549 
	`ex≥˘
(';');

550 } i‡(
	`ac˚±
(';') == 0) {

551 
	`sym_fix
(
sym
);

552 
	`emô_íãr
(
n
);

553 
	`∑r£_°©emít
();

554 
	`emô_ªtu∫
();

556 
syms_hód
 = 
ª°‹e_hód
;

557 
	}
}

562 
	$∑r£_¥ogøm
()

564 
tokí
 != 0) {

565 
	`ex≥˘_ty≥
();

566 
sym
 = 
	`sym_lookup
();

567 i‡(
sym
 == 0) {

568 
	`sym_≠≥nd
(0, 72);

569 i‡(
	`ac˚±
(';')) {

570 
	`£t_32bô
(
buf
 + 
syms_hód
, 
	`emô_globÆ_v¨
());

571 
buf
[
syms_hód
 + 4] = 71;

573 
	`∑r£_fun˘i⁄
(
syms_hód
);

576 
	`gë_tokí
();

577 
	`∑r£_fun˘i⁄
(
sym
);

580 
	}
}

582 
	$maö
()

584 
buf_size
 = 65536;

585 
buf
 = 
	`mÆloc
(
buf_size
);

586 
code_pos
 = 0;

587 
syms_hód
 = 
buf_size
;

588 
löío
 = 1;

590 
	`√xt_ch¨
();

591 
tokí_öt
 = 4;

592 
tokí_buf
 = "main";

593 
	`sym_≠≥nd
(
	`emô_begö
(), 72);

594 
	`∑r£_¥ogøm
();

595 
	`emô_íd
();

596 
	`wrôe
(1, (*Ë
buf
, 
code_pos
);

599 
	}
}

	@tests/cc/emit.c

20 
	gbuf_size
;

23 *
	gbuf
;

24 
	gcode_pos
;

25 
	gsyms_hód
;

26 
	g°ack_pos
;

27 
	gnum_∑øms
;

28 
	gªg_pos
;

29 
	gglobÆ_pos
;

30 
	gœ°_ö¢
;

32 
£t_32bô
(*
p
, 
x
);

33 
gë_32bô
(*
p
);

35 
	$emô
(
b
)

37 
buf
[
code_pos
] = 
b
;

38 
code_pos
 = code_pos + 1;

39 
	}
}

41 
	$emô_mu…i
(
n
, *
s
)

43 
i
 = 0;

44 
i
 < 
n
) {

45 
	`emô
(
s
[
i
]);

46 
i
 = i + 1;

48 
	}
}

50 
	$emô32
(
n
)

52 
	`emô
(
n
);

53 
	`emô
(
n
 >> 8);

54 
	`emô
(
n
 >> 16);

55 
	`emô
(
n
 >> 24);

56 
œ°_ö¢
 = 
n
;

57 
	}
}

59 
	$ö¢_jÆ
(
rd
, 
immj
)

61  ((
immj
 & 1048576) << 11) |

62 ((
immj
 & 2046) << 20) |

63 ((
immj
 & 2048) << 9) |

64 ((
immj
 & 1044480)) |

65 (
rd
 << 7) |

67 
	}
}

69 
	$emô_ö¢_sw
(
rs2
, 
rs1
, 
immi
)

71 
	`emô32
(((
immi
 & 4064) << 20) |

72 (
rs2
 << 20) |

73 (
rs1
 << 15) |

74 ((
immi
 & 31) << 7) |

77 
	}
}

79 
	$emô_ö¢_lw
(
rd
, 
rs
, 
immi
)

81 
	`emô32
((
immi
 << 20) |

82 (
rs
 << 15) |

83 (
rd
 << 7) |

86 
	}
}

88 
	$emô_ö¢_add•
(
n
)

90 i‡(
n
)

91 
	`emô32
(65811 + (
n
 << 22));

92 
	}
}

94 
	$emô_ö¢_d_s_t1
(
›code
)

96 
	`emô32
(
›code
 + ((
ªg_pos
 + 10) << 7) + ((reg_pos + 10) << 15) +

97 ((
ªg_pos
 + 11) << 20));

98 
	}
}

100 
	$emô_ö¢_d_s1_t
(
›code
)

103 
	`emô32
(
›code
 + ((
ªg_pos
 + 10) << 7) + ((reg_pos + 11) << 15) +

104 ((
ªg_pos
 + 10) << 20));

105 
	}
}

107 
	$emô_ö¢_d_s
(
›code
)

109 
	`emô32
(
›code
 + ((
ªg_pos
 + 10) << 7) + ((reg_pos + 10) << 15));

110 
	}
}

112 
	$emô_ö¢_d_t
(
›code
)

114 
	`emô32
(
›code
 + ((
ªg_pos
 + 10) << 7) + ((reg_pos + 10) << 20));

115 
	}
}

117 
	$emô_ö¢_d
(
›code
)

119 
	`emô32
(
›code
 + ((
ªg_pos
 + 10) << 7));

120 
	}
}

122 
	$emô_ö¢_s_t1
(
›code
)

125 
	`emô32
(
›code
 + ((
ªg_pos
 + 10) << 15) + ((reg_pos + 11) << 20));

126 
	}
}

128 
	$emô_push
()

130 
ªg_pos
 =Ñeg_pos + 1;

131 
	}
}

133 
	$emô_sc›e_begö
()

135  
°ack_pos
;

136 
	}
}

138 
	$emô_sc›e_íd
(
ßve
)

140 
	`emô_ö¢_add•
(
°ack_pos
 - 
ßve
);

141 
°ack_pos
 = 
ßve
;

142 
	}
}

144 
	$emô_numbî
(
imm
)

146 i‡((
imm
 + 2048) < 4096) {

147 
	`emô_ö¢_d
(19 + (
imm
 << 20));

150 
	`emô_ö¢_d
(55 + (((
imm
 + 2048) >> 12) << 12));

152 i‡((
imm
 << 20)) {

153 
	`emô_ö¢_d_s
(19 + (
imm
 << 20));

157 
	}
}

159 
	$emô_°rög
(
Àn
, *
s
)

161 
	`emô32
(
	`ö¢_jÆ
(
ªg_pos
 + 10, (
Àn
 + 8) & 4294967292));

163 
	`emô_mu…i
(
Àn
, 
s
);

164 
	`emô_mu…i
(4 - (
Àn
 & 3), "\x00\x00\x00\x00");

166 
	}
}

168 
	$loˇl_ofs
(
globÆ
, 
ofs
)

170 i‡(
globÆ
 == 0)

171 
ofs
 = (
°ack_pos
 + ofs) << 2;

172  
ofs
;

173 
	}
}

175 
	$emô_°‹e
(
globÆ
, 
ofs
)

177 
	`emô_ö¢_sw
(
ªg_pos
 + 10, 2 + 
globÆ
, 
	`loˇl_ofs
(globÆ, 
ofs
));

178 
	}
}

180 
	$emô_lﬂd
(
globÆ
, 
ofs
)

182 
	`emô_ö¢_lw
(
ªg_pos
 + 10, 2 + 
globÆ
, 
	`loˇl_ofs
(globÆ, 
ofs
));

183 
	}
}

185 
	$emô_ödex
(
globÆ
, 
ofs
)

187 
	`emô_ö¢_lw
(
ªg_pos
 + 11, 2 + 
globÆ
, 
	`loˇl_ofs
(globÆ, 
ofs
));

188 
	`emô_ö¢_d_s_t1
(51);

190 
	}
}

192 
	$emô_p›_°‹e_¨øy
()

194 
ªg_pos
 =Ñeg_pos - 1;

195 
	`emô_ö¢_s_t1
(35);

197 
	}
}

199 
	$emô_lﬂd_¨øy
()

201 
	`emô_ö¢_d_s
(16387);

203 
	}
}

205 
	$emô_¥e_ˇŒ
()

208 
r
 = 
ªg_pos
;

209 i‡(
r
) {

211 
	`emô_ö¢_add•
(0 - 
r
);

212 
°ack_pos
 = sèck_po†+ 
r
;

213 
i
 = 0;

214 
i
 < 
r
) {

215 
	`emô_ö¢_sw
(
i
 + 10, 2, i << 2);

216 
i
 = i + 1;

219 
ªg_pos
 = 0;

220  
r
;

221 
	}
}

223 
	$emô_¨g
(
i
)

225 
ªg_pos
 =Ñeg_pos + 1;

226 
	}
}

228 
	$emô_ˇŒ
(
deföed
,

229 
sym
,

230 
ofs
,

231 
p›
,

232 
ßve
)

234 i‡(
deföed
) {

235 
	`emô32
(
	`ö¢_jÆ
(1, 
ofs
 - 
code_pos
));

237 
	`£t_32bô
(
buf
 + 
sym
, 
code_pos
);

238 
	`emô32
(
ofs
);

240 
ªg_pos
 = 
ßve
;

242 i‡(
ªg_pos
 != 0) {

244 
	`emô_ö¢_d
(327699);

246 
i
 = 0;

247 
i
 < 
ªg_pos
) {

248 
	`emô_ö¢_lw
(
i
 + 10, 2, i << 2);

249 
i
 = i + 1;

251 
	`emô_ö¢_add•
(
ªg_pos
);

252 
°ack_pos
 = sèck_po†- 
ªg_pos
;

254 
	}
}

256 
	$emô_fix_ˇŒ_hîe
(
pos
)

258 
√xt
 = 
	`gë_32bô
(
buf
 + 
pos
);

259 
	`£t_32bô
(
buf
 + 
pos
, 
	`ö¢_jÆ
(1, 
code_pos
 -Öos));

260  
√xt
;

261 
	}
}

263 
	$emô_›î©i⁄
(
t
)

265 
ªg_pos
 =Ñeg_pos - 1;

267 
o
;

268 i‡(
t
 == 1)

269 
o
 = 4147;

270 i‡(
t
 == 2)

271 
o
 = 20531;

272 i‡(
t
 == 3)

273 
o
 = 1073741875;

274 i‡(
t
 == 4)

275 
o
 = 24627;

276 i‡(
t
 == 5)

277 
o
 = 16435;

278 i‡(
t
 == 6)

279 
o
 = 51;

280 i‡(
t
 == 7)

281 
o
 = 28723;

282 i‡(
t
 == 8)

283 
o
 = 33554483;

284 i‡(
t
 == 9)

285 
o
 = 33574963;

286 i‡(
t
 == 10)

287 
o
 = 33583155;

290 i‡(((
œ°_ö¢
 & 1044607Ë=19Ë& (
t
 < 8)) {

294 
imm
 = (
œ°_ö¢
 >> 20) << 20;

295 
code_pos
 = code_pos - 4;

296 i‡(
t
 == 3) {

297 
	`emô_ö¢_d_s
(19 + (0 - 
imm
));

302 
	`emô_ö¢_d_s
((
o
 ^ 32Ë| 
imm
);

304 
	`emô_ö¢_d_s_t1
(
o
);

305 
	}
}

307 
	$emô_comp
(
t
)

309 
ªg_pos
 =Ñeg_pos - 1;

311 i‡(
t
 < 18) {

312 i‡((
œ°_ö¢
 & 4294963327) == 19) {

314 
code_pos
 = code_pos - 4;

316 
	`emô_ö¢_d_s_t1
(1073741875);

319 i‡(
t
 == 16)

320 
	`emô_ö¢_d_s
(1060883);

323 
	`emô_ö¢_d_t
(12339);

326 i‡(
t
 < 20)

327 
	`emô_ö¢_d_s_t1
(12339);

330 
	`emô_ö¢_d_s1_t
(12339);

332 i‡(
t
 & 1)

333 
	`emô_ö¢_d_s
(1064979);

336 
	}
}

338 
	$emô_bønch_if0
()

341 
	`emô32
(327779);

342  
code_pos
 - 4;

344 
	}
}

346 
	$emô_bønch_if_c⁄d
(
t
)

354 
ªg_pos
 = 0;

356 
o
 = 10874979;

357 i‡(
t
 < 18) {

358 
o
 = 11866211;

359 i‡(
œ°_ö¢
 == 1427) {

361 
code_pos
 = code_pos - 4;

362 
o
 = 331875;

364 } i‡(
t
 < 20)

365 
o
 = 11890787;

366 i‡(
t
 & 1)

367 
o
 = o - 4096;

368 
	`emô32
(
o
);

378  
code_pos
 - 4;

379 
	}
}

381 
	$emô_fix_bønch_hîe
(
ö¢_pos
)

383 
immb
 = 
code_pos
 - 
ö¢_pos
;

384 
immb
 = ((immb & 4096) << 19) |

385 ((
immb
 & 2016) << 20) |

386 ((
immb
 & 30) << 7) |

387 ((
immb
 & 2048) >> 4);

388 
	`£t_32bô
(
buf
 + 
ö¢_pos
, 
	`gë_32bô
(bu‡+ in¢_posË| 
immb
);

389 
	}
}

391 
	$emô_fix_jump_hîe
(
ö¢_pos
)

393 
	`£t_32bô
(
buf
 + 
ö¢_pos
, 
	`ö¢_jÆ
(0, 
code_pos
 - insn_pos));

394 
	}
}

396 
	$emô_jump
(
de°ö©i⁄
)

398 
	`emô32
(
	`ö¢_jÆ
(0, 
de°ö©i⁄
 - 
code_pos
));

399  
code_pos
 - 4;

400 
	}
}

402 
	$emô_íãr
(
n
)

404 
ªg_pos
 = 0;

405 
°ack_pos
 = 0;

406 
num_∑øms
 = 
n
;

407 
	`emô_ö¢_add•
(0 - 
n
 - 1);

408 
	`emô32
(1122339);

410 
i
 = 0;

411 
i
 < 
n
) {

412 
	`emô_ö¢_sw
(
i
 + 10, 2, (i + 1) << 2);

413 
i
 = i + 1;

415 
	}
}

417 
	$emô_ªtu∫
()

419 
	`emô_ö¢_lw
(1, 2, 
°ack_pos
 << 2);

420 
	`emô_ö¢_add•
(
°ack_pos
 + 
num_∑øms
 + 1);

421 
	`emô32
(32871);

422 
	}
}

424 
	$emô_loˇl_v¨
()

427 
	`emô_mu…i
(8, "\x13\x01\xc1\xff\x23\x20\xa1\x00");

430 
°ack_pos
 = stack_pos + 1;

431  0 - 
°ack_pos
;

432 
	}
}

434 
	$emô_globÆ_v¨
()

436 
globÆ_pos
 = global_pos + 4;

437  
globÆ_pos
 - 2052;

438 
	}
}

440 
	$emô_begö
()

442 
°ack_pos
 = 0;

443 
globÆ_pos
 = 0;

445 
	`emô_mu…i
(104, "\x7f\x45\x4c\x46\x01\x01\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00\xf3\x00\x01\x00\x00\x00\x54\x00\x01\x00\x34\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x34\x00\x20\x00\x01\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x01\x00........\x07\x00\x00\x00\x00\x10\x00\x00\x13\x00\x00\x00\x13\x00\x00\x00\x00\x00\x00\x00\x93\x68\xd0\x05\x73\x00\x00\x00");

487 
	}
}

489 
	$emô_íd
()

491 
addr
 = 
code_pos
 + 1964;

492 
	`£t_32bô
(
buf
 + 84, 407 + (((
addr
 + 2048) >> 12) << 12));

494 
	`£t_32bô
(
buf
 + 88, 98707 + (
addr
 << 20));

496 
i
 = 0;

497 
i
 < 
globÆ_pos
) {

498 
	`emô32
(0);

499 
i
 = i + 4;

502 
	`£t_32bô
(
buf
 + 68, 
code_pos
);

503 
	`£t_32bô
(
buf
 + 72, 
code_pos
);

504 
	}
}

	@tests/cc/hello.c

6 
	$maö
()

8 
	`wrôe
(1 , "Hello World\x0d\x0a" ,

11 
	}
}

	@tests/cc/stdlib.c

5 
	$exô
(Ë
	`_Pøgma
("emit \x93\x08\xd0\x05\x73\x00\x00\x00");

9 
	$gëch¨
(Ë
	`_Pøgma
("emit \x13\x01\xc1\xff\x13\x05\x00\x00\x93\x05\x01\x00\x13\x06\x10\x00\x93\x08\xf0\x03\x73\x00\x00\x00\x93\x05\x05\x00\x03\x45\x01\x00\x13\x01\x41\x00\x63\x44\xb0\x00\x13\x05\xf0\xff\x67\x80\x00\x00");

23 *
	$mÆloc
(Ë
	`_Pøgma
("emit \x13\x01\x41\xff\x23\x24\xa1\x00\x13\x05\x00\x00\x93\x08\x60\x0d\x73\x00\x00\x00\x23\x20\xa1\x00\x83\x28\x81\x00\x33\x05\x15\x01\x23\x22\xa1\x00\x93\x08\x60\x0d\x73\x00\x00\x00\x83\x28\x41\x00\x63\x08\x15\x01\x13\x05\x00\x00\x13\x01\xc1\x00\x67\x80\x00\x00\x03\x25\x01\x00\x13\x01\xc1\x00\x67\x80\x00\x00");

44 
	$wrôe
(, *, Ë
	`_Pøgma
("emit \x93\x08\x00\x04\x73\x00\x00\x00\x67\x80\x00\x00");

49 
	$ªad
(, *, Ë
	`_Pøgma
("emit \x93\x08\xf0\x03\x73\x00\x00\x00\x67\x80\x00\x00");

54 
	$putch¨
(Ë
	`_Pøgma
("emit \x13\x05\x10\x00\x93\x05\x01\x00\x13\x06\x10\x00\x93\x08\x00\x04\x73\x00\x00\x00\x67\x80\x00\x00");

	@tests/chacha20/chacha20.c

1 
	~<°döt.h
>

2 
	~<°dio.h
>

3 
	~<°rög.h
>

5 
chacha20
(
uöt8_t
 *
out
,

6 c⁄° 
uöt8_t
 *
ö
,

7 
size_t
 
öÀn
,

8 c⁄° 
uöt8_t
 *
key
,

9 c⁄° 
uöt8_t
 *
n⁄˚
,

10 
uöt32_t
 
˘r
);

12 
	$maö
()

17 c⁄° 
uöt8_t
 
key
[32] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10,

20 c⁄° 
uöt8_t
 
n⁄˚
[12] = {0, 0, 0, 0, 0, 0, 0, 74, 0, 0, 0, 0};

21 c⁄° 
uöt32_t
 
˘r
 = 1;

22 
uöt8_t
 
ö
[4096] =

25 
uöt8_t
 
out
[4096];

27 c⁄° 
uöt8_t
 
exp
[] = {

39 
	`chacha20
(
out
, 
ö
, (ö), 
key
, 
n⁄˚
, 
˘r
);

41 
	`¥ötf
("ChaCha20: %s\n", !
	`memcmp
(
out
, 
exp
, (exp)) ? "OK" : "FAIL");

43 
	}
}

	@tests/coremark.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄3


2 
imp‹t
 
sub¥o˚ss


3 
imp‹t
 
ª


4 
imp‹t
 
numpy


5 
imp‹t
 
os


6 
imp‹t
 
js⁄


8 
	gôî
 = 10

9 
ªs
 = []

10 
fûe_exi°
 = 
os
.
∑th
.
exi°s
('build/rv32emu')

11 
nŸ
 
fûe_exi°
:

12 
¥öt
("Please compile beforeÑunningÅest")

13 
	$exô
(1)

14 
	`¥öt
("Start Test CoreMark benchmark")

15 
comp_¥oc
 = 
sub¥o˚ss
.
	`check_ouçut
(

16 'buûd/rv32emu buûd/c‹em¨k.ñf', 
shñl
=
True
).
	`decode
("utf-8")

17 
nŸ
 
comp_¥oc
 
‹
 comp_¥oc.
	`föd
("Error") != -1:

18 
	`¥öt
("Test Error")

19 
	$exô
(1)

21 
	`¥öt
("Test Pass")

23 
i
 
ö
 
	$ønge
(
ôî
):

24 
	`¥öt
("Ru¬ög C‹eM¨k bíchm¨k - Ru¿#{}".
	`f‹m©
(
i
 + 1))

25 
comp_¥oc
 = 
sub¥o˚ss
.
	`check_ouçut
(

26 'buûd/rv32emu buûd/c‹em¨k.ñf', 
shñl
=
True
).
	`decode
("utf-8")

27 
nŸ
 
comp_¥oc
:

28 
	`¥öt
("Fail\n")

29 
	$exô
(1)

31 
ªs
.
	`≠≥nd
((
ª
.
	`födÆl
(

32 
r
'Iãøti⁄s/Se¯ : [0-9]+.[0-9]+', 
comp_¥oc
)[0][19:]))

34 
món
 = 
numpy
.
	$món
(
ªs
, 
dty≥
=
numpy
.
Êﬂt64
)

35 
devüti⁄
 = 
numpy
.
	$°d
(
ªs
, 
dty≥
=
numpy
.
Êﬂt64
)

36 
n
 
ö
 
ªs
:

37 i‡(
	`abs
(
n
 - 
món
Ë> (
devüti⁄
 * 2)):

38 
ªs
.
	$ªmove
(
n
)

40 
	`¥öt
("{:.3f}".
	`f‹m©
(
numpy
.
	$món
(
ªs
, 
dty≥
=
numpy
.
Êﬂt64
)))

42 #ßvê
Avîage
 
Iãøti⁄s
/
Sec
 
ö
 
JSON
 
f‹m©
 
bíchm¨k
 
a˘i⁄
 
w‹kÊow


43 
bíchm¨k_ouçut
 = "coremark_output.json"

44 
bíchm¨k_d©a
 = {

47 "vÆue":("{:.3f}".
	`f‹m©
(
numpy
.
	`món
(
ªs
, 
dty≥
Úumpy.
Êﬂt64
)))

48 
	}
}

49 
	gf
 = 
›í
(
bíchm¨k_ouçut
, "w")

50 
	gf
.
wrôe
(
js⁄
.
	$dumps
(
bíchm¨k_d©a
))

51 
f
.
	`˛o£
()

	@tests/coro/context.c

1 
	~<as£π.h
>

2 
	~<°döt.h
>

3 
	~<°rög.h
>

5 
	~"c⁄ãxt.h
"

7 
hñ≥r_c⁄ãxt
();

9 
öôülize_c⁄ãxt
(
c⁄ãxt_t
 
˘x
,

10 *
°ack_ba£
,

11 
size_t
 
°ack_size
,

12 (*
íåy
)(*
d©a
),

13 *
d©a
)

18 
	#RED_ZONE
 128

	)

19 
uöçå_t
 
°ack_íd
 = (uöçå_tË
°ack_ba£
 + 
°ack_size
 - 
RED_ZONE
;

20 
°ack_íd
 &= -16;

22 
	`mem£t
(
˘x
, 0,  *ctx);

23 
˘x
->
•
 = 
°ack_íd
;

24 
˘x
->
ø
 = (
uöçå_t
Ë
hñ≥r_c⁄ãxt
;

25 
˘x
->
d©a
 = data;

26 
˘x
->
íåy
 =Éntry;

27 
	}
}

	@tests/coro/context.h

1 #¥agm®
⁄˚


3 
	~<°ddef.h
>

4 
	~<°döt.h
>

6 
	sc⁄ãxt_Á°e°_s
 {

7 
uöçå_t
 
	mø
;

8 
uöçå_t
 
	m•
;

9 
uöçå_t
 
	ms0
;

10 
uöçå_t
 
	ms1
;

11 
uöçå_t
 
	ms2
;

12 
uöçå_t
 
	ms3
;

13 
uöçå_t
 
	ms4
;

14 
uöçå_t
 
	ms5
;

15 
uöçå_t
 
	ms6
;

16 
uöçå_t
 
	ms7
;

17 
uöçå_t
 
	ms8
;

18 
uöçå_t
 
	ms9
;

19 
uöçå_t
 
	ms10
;

20 
uöçå_t
 
	ms11
;

22 (*
	míåy
)(*);

23 *
	md©a
;

24 } 
	tc⁄ãxt_t
[1];

26 
öôülize_c⁄ãxt
(
c⁄ãxt_t
 
˘x
,

27 *
°ack_ba£
,

28 
size_t
 
°ack_size
,

29 (*
íåy
)(*
d©a
),

30 *
d©a
);

32 
	`swôch_c⁄ãxt
(
c⁄ãxt_t
 
‰om
, c⁄ãxt_à
to
);

	@tests/coro/coro.c

1 
	~<°döt.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

4 
	~<sys/time.h
>

6 
	~"c⁄ãxt.h
"

8 
	#ITERATIONS
 (1000 * 1000)

	)

10 
	#STACKSIZE
 32768

	)

12 
c⁄ãxt_t
 
	gthªad1
, 
	gthªad2
, 
	gthªad3
;

14 
	$thªad1_fun
(*
d©a
)

16 
timevÆ
 
tv0
, 
tv
;

17 
	`gëtimeofday
(&
tv0
, 
NULL
);

19 
i
 = 0; i < 
ITERATIONS
; ++i)

20 
	`swôch_c⁄ãxt
(
thªad1
, 
thªad2
);

22 
	`gëtimeofday
(&
tv
, 
NULL
);

24 
t
 = 
tv
.
tv_£c
 - 
tv0
.tv_£¯+ 1e-6 * (tv.
tv_u£c
 -Åv0.tv_usec);

25 
f
 = 3 * 
ITERATIONS
 / 
t
;

27 
	`¥ötf
("%d context switches in %.1f s, %.1f/s, %.1fÇsÉach\n",

28 3 * 
ITERATIONS
, 
t
, 
f
, 1e9 / f);

29 
	}
}

31 
	$thªad2_fun
(*
d©a
)

34 
	`swôch_c⁄ãxt
(
thªad2
, 
thªad1
);

37 
	`swôch_c⁄ãxt
(
thªad2
, 
thªad1
);

40 
	`swôch_c⁄ãxt
(
thªad2
, 
thªad3
);

43 
	`swôch_c⁄ãxt
(
thªad2
, 
thªad1
);

46 
i
 = 0;; ++i)

47 
	`swôch_c⁄ãxt
(
thªad2
, 
thªad3
);

48 
	}
}

50 
	$thªad3_fun
(*
d©a
)

53 
	`swôch_c⁄ãxt
(
thªad3
, 
thªad2
);

56 
	`swôch_c⁄ãxt
(
thªad3
, 
thªad1
);

59 
i
 = 0;; ++i)

60 
	`swôch_c⁄ãxt
(
thªad3
, 
thªad1
);

61 
	}
}

63 
	#ALIGN
 64

	)

64 *
	$Æig√d_mÆloc
(
size
)

66 *
mem
 = 
	`mÆloc
(
size
 + 
ALIGN
 + (*));

67 **
±r
 =

68 (**Ë(((
uöçå_t
Ë
mem
 + 
ALIGN
 + (*)) & ~(ALIGN - 1));

69 
±r
[-1] = 
mem
;

70  
±r
;

71 
	}
}

73 
	$Æig√d_‰ì
(*
±r
)

75 
	`‰ì
(((**Ë
±r
)[-1]);

76 
	}
}

78 
	#RED_ZONE
 128

	)

79 
öô_c⁄ãxt
(
c⁄ãxt_t
 
˘x
, (*
íåy
)(*
d©a
), *data)

81 *
°ack
 = 
	`Æig√d_mÆloc
(
STACKSIZE
 + 
RED_ZONE
 + 8) - 8;

82 
	`öôülize_c⁄ãxt
(
˘x
, 
°ack
, 
STACKSIZE
, 
íåy
, 
d©a
);

83 
	}
}

85 
	$maö
()

87 
	`öô_c⁄ãxt
(
thªad2
, 
thªad2_fun
, (*) 0xDEEEECAF);

88 
	`öô_c⁄ãxt
(
thªad3
, 
thªad3_fun
, (*) 0xF000000D);

89 
	`thªad1_fun
((*) 0xBABEBABE);

92 
	}
}

	@tests/dhrystone.c

125 
	~<°dboﬁ.h
>

126 
	~<°dio.h
>

127 
	~<°dlib.h
>

128 
	~<°rög.h
>

129 
	~<sys/time.h
>

131 
	#LOOPS
 10000000

	)

133 
	gVîsi⁄
[] = "1.1-mc";

135 íum { 
	mIdít1
, 
	mIdít2
, 
	mIdít3
, 
	mIdít4
, 
	mIdít5
 } 
	tEnumî©i⁄
;

137 
	tO√ToThúty
;

138 
	tO√ToFi·y
;

139 
	tC≠ôÆLëãr
;

140 
	tSåög30
[31];

141 
	tAºay1Dim
[51];

142 
	tAºay2Dim
[51][51];

144 
	sRec‹d
 {

145 
Rec‹d
 *
	mPåComp
;

146 
Enumî©i⁄
 
	mDis¸
;

147 
Enumî©i⁄
 
	mEnumComp
;

148 
O√ToFi·y
 
	mI¡Comp
;

149 
Såög30
 
	mSåögComp
;

152 
Rec‹d
 
	tRec‹dTy≥
;

153 
Rec‹dTy≥
 *
	tRec‹dPå
;

154 
	tboﬁón
;

156 
Proc0
();

157 
Proc1
(
Rec‹dPå
 
PåP¨In
);

158 
Proc2
(
O√ToFi·y
 *
I¡P¨IO
);

159 
Proc3
(
Rec‹dPå
 *
PåP¨Out
);

160 
Proc4
();

161 
Proc5
();

162 
Proc6
(
Enumî©i⁄
 
EnumP¨In
, Enumî©i⁄ *
EnumP¨Out
);

163 
Proc7
(
O√ToFi·y
 
I¡P¨I1
, O√ToFi·y 
I¡P¨I2
, O√ToFi·y *
I¡P¨Out
);

164 
Proc8
(
Aºay1Dim
 
Aºay1P¨
,

165 
Aºay2Dim
 
Aºay2P¨
,

166 
O√ToFi·y
 
I¡P¨I1
,

167 
O√ToFi·y
 
I¡P¨I2
);

168 
Enumî©i⁄
 
Func1
(
C≠ôÆLëãr
 
Ch¨P¨1
, C≠ôÆLëã∏
Ch¨P¨2
);

169 
boﬁón
 
Func2
(
Såög30
 
SåP¨I1
, Såög30 
SåP¨I2
);

171 
	$maö
()

173 
	`Proc0
();

174 
	`exô
(0);

175 
	}
}

180 
	gI¡Glob
;

181 
boﬁón
 
	gBoﬁGlob
;

182 
	gCh¨1Glob
;

183 
	gCh¨2Glob
;

184 
Aºay1Dim
 
	gAºay1Glob
;

185 
Aºay2Dim
 
	gAºay2Glob
;

186 
Rec‹dPå
 
	gPåGlb
;

187 
Rec‹dPå
 
	gPåGlbNext
;

189 
	$Proc0
()

191 
O√ToFi·y
 
I¡Loc1
;

192 
O√ToFi·y
 
I¡Loc2
;

193 
O√ToFi·y
 
I¡Loc3
;

194 
Ch¨Index
;

195 
Enumî©i⁄
 
EnumLoc
;

196 
Såög30
 
Såög1Loc
;

197 
Såög30
 
Såög2Loc
;

199 
i
;

200 
timevÆ
 
°¨âime
;

201 
timevÆ
 
ídtime
;

202 
bíchtime
;

204 
PåGlbNext
 = (
Rec‹dPå
Ë
	`mÆloc
((
Rec‹dTy≥
));

205 
PåGlb
 = (
Rec‹dPå
Ë
	`mÆloc
((
Rec‹dTy≥
));

206 
PåGlb
->
PåComp
 = 
PåGlbNext
;

207 
PåGlb
->
Dis¸
 = 
Idít1
;

208 
PåGlb
->
EnumComp
 = 
Idít3
;

209 
PåGlb
->
I¡Comp
 = 40;

210 
	`°r˝y
(
PåGlb
->
SåögComp
, "DHRYSTONE PROGRAM, SOME STRING");

211 
Aºay2Glob
[8][7] = 10;

216 
	`gëtimeofday
(&
°¨âime
, 
NULL
);

217 
i
 = 0; i < 
LOOPS
; ++i) {

218 
	`Proc5
();

219 
	`Proc4
();

220 
I¡Loc1
 = 2;

221 
I¡Loc2
 = 3;

222 
	`°r˝y
(
Såög2Loc
, "DHRYSTONE PROGRAM, 2'ND STRING");

223 
EnumLoc
 = 
Idít2
;

224 
BoﬁGlob
 = !
	`Func2
(
Såög1Loc
, 
Såög2Loc
);

225 
I¡Loc1
 < 
I¡Loc2
) {

226 
I¡Loc3
 = 5 * 
I¡Loc1
 - 
I¡Loc2
;

227 
	`Proc7
(
I¡Loc1
, 
I¡Loc2
, &
I¡Loc3
);

228 ++
I¡Loc1
;

230 
	`Proc8
(
Aºay1Glob
, 
Aºay2Glob
, 
I¡Loc1
, 
I¡Loc3
);

231 
	`Proc1
(
PåGlb
);

232 
Ch¨Index
 = 'A'; Ch¨Index <
Ch¨2Glob
; ++CharIndex)

233 i‡(
EnumLoc
 =
	`Func1
(
Ch¨Index
, 'C'))

234 
	`Proc6
(
Idít1
, &
EnumLoc
);

235 
I¡Loc3
 = 
I¡Loc2
 * 
I¡Loc1
;

236 
I¡Loc2
 = 
I¡Loc3
 / 
I¡Loc1
;

237 
I¡Loc2
 = 7 * (
I¡Loc3
 - I¡Loc2Ë- 
I¡Loc1
;

238 
	`Proc2
(&
I¡Loc1
);

245 
	`gëtimeofday
(&
ídtime
, 
NULL
);

246 
bíchtime
 = (
ídtime
.
tv_£c
 * 1000000 +Éndtime.
tv_u£c
) -

247 (
°¨âime
.
tv_£c
 * 1000000 + sèπtime.
tv_u£c
);

248 
	`¥ötf
("Dhry°⁄e(%s), %ldÖas£s, %ld mi¸o£c⁄ds, %ld DMIPS\n", 
Vîsi⁄
,

249 (Ë
LOOPS
, 
bíchtime
,

251 (
LOOPS
 * 71Ë/ (
bíchtime
 >> 3));

252 
	}
}

254 
	$Proc1
(
Rec‹dPå
 
PåP¨In
)

256 
	#NextRec‹d
 (*(
PåP¨In
->
PåComp
))

	)

258 
NextRec‹d
 = *
PåGlb
;

259 
PåP¨In
->
I¡Comp
 = 5;

260 
NextRec‹d
.
I¡Comp
 = 
PåP¨In
->IntComp;

261 
NextRec‹d
.
PåComp
 = 
PåP¨In
->PtrComp;

262 
	`Proc3
(&
NextRec‹d
.
PåComp
);

263 i‡(
NextRec‹d
.
Dis¸
 =
Idít1
) {

264 
NextRec‹d
.
I¡Comp
 = 6;

265 
	`Proc6
(
PåP¨In
->
EnumComp
, &
NextRec‹d
.EnumComp);

266 
NextRec‹d
.
PåComp
 = 
PåGlb
->PtrComp;

267 
	`Proc7
(
NextRec‹d
.
I¡Comp
, 10, &NextRecord.IntComp);

269 *
PåP¨In
 = 
NextRec‹d
;

271 #unde‡
NextRec‹d


272 
	}
}

274 
	$Proc2
(
O√ToFi·y
 *
I¡P¨IO
)

276 
O√ToFi·y
 
I¡Loc
;

277 
Enumî©i⁄
 
EnumLoc
;

279 
I¡Loc
 = *
I¡P¨IO
 + 10;

281 i‡(
Ch¨1Glob
 == 'A') {

282 --
I¡Loc
;

283 *
I¡P¨IO
 = 
I¡Loc
 - 
I¡Glob
;

284 
EnumLoc
 = 
Idít1
;

286 i‡(
EnumLoc
 =
Idít1
)

289 
	}
}

291 
	$Proc3
(
Rec‹dPå
 *
PåP¨Out
)

293 i‡(
PåGlb
 !
NULL
)

294 *
PåP¨Out
 = 
PåGlb
->
PåComp
;

296 
I¡Glob
 = 100;

297 
	`Proc7
(10, 
I¡Glob
, &
PåGlb
->
I¡Comp
);

298 
	}
}

300 
	$Proc4
()

302 
boﬁón
 
BoﬁLoc
;

304 
BoﬁLoc
 = 
Ch¨1Glob
 == 'A';

305 
BoﬁLoc
 |
BoﬁGlob
;

306 
Ch¨2Glob
 = 'B';

307 
	}
}

309 
	$Proc5
()

311 
Ch¨1Glob
 = 'A';

312 
BoﬁGlob
 = 
Ál£
;

313 
	}
}

315 
boﬁón
 
Func3
();

317 
	$Proc6
(
Enumî©i⁄
 
EnumP¨In
, Enumî©i⁄ *
EnumP¨Out
)

319 *
EnumP¨Out
 = 
EnumP¨In
;

320 i‡(!
	`Func3
(
EnumP¨In
))

321 *
EnumP¨Out
 = 
Idít4
;

322 
EnumP¨In
) {

323 
Idít1
:

324 *
EnumP¨Out
 = 
Idít1
;

326 
Idít2
:

327 i‡(
I¡Glob
 > 100)

328 *
EnumP¨Out
 = 
Idít1
;

330 *
EnumP¨Out
 = 
Idít4
;

332 
Idít3
:

333 *
EnumP¨Out
 = 
Idít2
;

335 
Idít4
:

337 
Idít5
:

338 *
EnumP¨Out
 = 
Idít3
;

340 
	}
}

342 
	$Proc7
(
O√ToFi·y
 
I¡P¨I1
, O√ToFi·y 
I¡P¨I2
, O√ToFi·y *
I¡P¨Out
)

344 
O√ToFi·y
 
I¡Loc
;

346 
I¡Loc
 = 
I¡P¨I1
 + 2;

347 *
I¡P¨Out
 = 
I¡P¨I2
 + 
I¡Loc
;

348 
	}
}

350 
	$Proc8
(
Aºay1Dim
 
Aºay1P¨
,

351 
Aºay2Dim
 
Aºay2P¨
,

352 
O√ToFi·y
 
I¡P¨I1
,

353 
O√ToFi·y
 
I¡P¨I2
)

355 
O√ToFi·y
 
I¡Loc
;

356 
O√ToFi·y
 
I¡Index
;

358 
I¡Loc
 = 
I¡P¨I1
 + 5;

359 
Aºay1P¨
[
I¡Loc
] = 
I¡P¨I2
;

360 
Aºay1P¨
[
I¡Loc
 + 1] = Array1Par[IntLoc];

361 
Aºay1P¨
[
I¡Loc
 + 30] = IntLoc;

362 
I¡Index
 = 
I¡Loc
; IntIndex <= (IntLoc + 1); ++IntIndex)

363 
Aºay2P¨
[
I¡Loc
][
I¡Index
] = IntLoc;

364 ++
Aºay2P¨
[
I¡Loc
][IntLoc - 1];

365 
Aºay2P¨
[
I¡Loc
 + 20][I¡Loc] = 
Aºay1P¨
[IntLoc];

366 
I¡Glob
 = 5;

367 
	}
}

369 
Enumî©i⁄
 
	$Func1
(
C≠ôÆLëãr
 
Ch¨P¨1
, C≠ôÆLëã∏
Ch¨P¨2
)

371 
C≠ôÆLëãr
 
Ch¨Loc1
;

372 
C≠ôÆLëãr
 
Ch¨Loc2
;

374 
Ch¨Loc1
 = 
Ch¨P¨1
;

375 
Ch¨Loc2
 = 
Ch¨Loc1
;

376 i‡(
Ch¨Loc2
 !
Ch¨P¨2
)

377  (
Idít1
);

379  (
Idít2
);

380 
	}
}

382 
boﬁón
 
	$Func2
(
Såög30
 
SåP¨I1
, Såög30 
SåP¨I2
)

384 
O√ToThúty
 
I¡Loc
;

385 
C≠ôÆLëãr
 
Ch¨Loc
;

387 
I¡Loc
 = 1;

388 
I¡Loc
 <= 1)

389 i‡(
	`Func1
(
SåP¨I1
[
I¡Loc
], 
SåP¨I2
[I¡Lo¯+ 1]Ë=
Idít1
) {

390 
Ch¨Loc
 = 'A';

391 ++
I¡Loc
;

393 i‡(
Ch¨Loc
 >= 'W' && CharLoc <= 'Z')

394 
I¡Loc
 = 7;

395 i‡(
Ch¨Loc
 == 'X')

396  
åue
;

397 i‡(
	`°rcmp
(
SåP¨I1
, 
SåP¨I2
) > 0) {

398 
I¡Loc
 += 7;

399  
åue
;

401  
Ál£
;

402 
	}
}

404 
boﬁón
 
	$Func3
(
Enumî©i⁄
 
EnumP¨In
)

406 
Enumî©i⁄
 
EnumLoc
;

408 
EnumLoc
 = 
EnumP¨In
;

409 i‡(
EnumLoc
 =
Idít3
)

410  
åue
;

411  
Ál£
;

412 
	}
}

	@tests/donut.c

35 
	~<°döt.h
>

36 
	~<°dio.h
>

37 
	~<°rög.h
>

38 
	~<time.h
>

42 
	mRESX_SHIFT
 = 0,

43 
	mRESY_SHIFT
 = 0,

50 c⁄° 
	gdz
 = 5, 
	gr1
 = 1, 
	gr2
 = 2;

59 
	#R
(
s
, 
x
, 
y
) \

60 
x
 -(
y
 >> 
s
); \

61 
y
 +(
x
 >> 
s
)

	)

71 
	#N_CORDIC
 6

	)

72 
	$Àngth_c‹dic
(
öt16_t
 
x
, i¡16_à
y
, i¡16_à*
x2_
, i¡16_à
y2
)

74 
x2
 = *
x2_
;

75 i‡(
x
 < 0) {

76 
x
 = -x;

77 
x2
 = -x2;

79 
i
 = 0; i < 
N_CORDIC
; i++) {

80 
t
 = 
x
;

81 
t2
 = 
x2
;

82 i‡(
y
 < 0) {

83 
x
 -
y
 >> 
i
;

84 
y
 +
t
 >> 
i
;

85 
x2
 -
y2
 >> 
i
;

86 
y2
 +
t2
 >> 
i
;

88 
x
 +
y
 >> 
i
;

89 
y
 -
t
 >> 
i
;

90 
x2
 +
y2
 >> 
i
;

91 
y2
 -
t2
 >> 
i
;

98 *
x2_
 = (
x2
 >> 1) + (x2 >> 3) - (x2 >> 6);

99  (
x
 >> 1) + (x >> 3) - (x >> 6);

100 
	}
}

102 
	$maö
()

105 
öt16_t
 
sB
 = 0, 
cB
 = 16384;

106 
öt16_t
 
sA
 = 11583, 
cA
 = 11583;

107 
öt16_t
 
sAsB
 = 0, 
cAsB
 = 0;

108 
öt16_t
 
sAcB
 = 11583, 
cAcB
 = 11583;

110 
cou¡
 = 0; count < 500; count++) {

114 c⁄° 
öt16_t
 
p0x
 = 
dz
 * 
sB
 >> 6;

115 c⁄° 
öt16_t
 
p0y
 = 
dz
 * 
sAcB
 >> 6;

116 c⁄° 
öt16_t
 
p0z
 = -
dz
 * 
cAcB
 >> 6;

118 c⁄° 
r1i
 = 
r1
 * 256;

119 c⁄° 
r2i
 = 
r2
 * 256;

121 
nôîs
 = 0;

122 
¬‹mÆs
 = 0;

126 
öt16_t
 
yöcC
 = (12 * 
cA
Ë>> (8 + 
RESY_SHIFT
);

127 
öt16_t
 
yöcS
 = (12 * 
sA
Ë>> (8 + 
RESY_SHIFT
);

130 
öt16_t
 
xöcX
 = (6 * 
cB
Ë>> (8 + 
RESX_SHIFT
);

131 
öt16_t
 
xöcY
 = (6 * 
sAsB
Ë>> (8 + 
RESX_SHIFT
);

132 
öt16_t
 
xöcZ
 = (6 * 
cAsB
Ë>> (8 + 
RESX_SHIFT
);

135 
öt16_t
 
ycA
 = -((
cA
 >> 1) + (cA >> 4));

136 
öt16_t
 
ysA
 = -((
sA
 >> 1) + (sA >> 4));

138 
j
 = 0; j < (24 << 
RESY_SHIFT
) - 1;

139 
j
++, 
ycA
 +
yöcC
, 
ysA
 +
yöcS
) {

141 
xsAsB
 = (
sAsB
 >> 4) - sAsB;

142 
xcAsB
 = (
cAsB
 >> 4) - cAsB;

145 
öt16_t
 
vxi14
 = (
cB
 >> 4Ë- cB - 
sB
;

146 
öt16_t
 
vyi14
 = (
ycA
 - 
xsAsB
 - 
sAcB
);

147 
öt16_t
 
vzi14
 = (
ysA
 + 
xcAsB
 + 
cAcB
);

149 
i
 = 0; i < ((80 << 
RESX_SHIFT
) - 1);

150 
i
++, 
vxi14
 +
xöcX
, 
vyi14
 -
xöcY
, 
vzi14
 +
xöcZ
) {

151 
t
 = 512;

154 
öt16_t
 
px
 = 
p0x
 + (
vxi14
 >> 5);

155 
öt16_t
 
py
 = 
p0y
 + (
vyi14
 >> 5);

156 
öt16_t
 
pz
 = 
p0z
 + (
vzi14
 >> 5);

157 
öt16_t
 
lx0
 = 
sB
 >> 2;

158 
öt16_t
 
ly0
 = (
sAcB
 - 
cA
) >> 2;

159 
öt16_t
 
lz0
 = (-
cAcB
 - 
sA
) >> 2;

161 
t0
, 
t1
, 
t2
, 
d
;

162 
öt16_t
 
lx
 = 
lx0
, 
ly
 = 
ly0
, 
lz
 = 
lz0
;

163 
t0
 = 
	`Àngth_c‹dic
(
px
, 
py
, &
lx
, 
ly
);

164 
t1
 = 
t0
 - 
r2i
;

165 
t2
 = 
	`Àngth_c‹dic
(
pz
, 
t1
, &
lz
, 
lx
);

166 
d
 = 
t2
 - 
r1i
;

167 
t
 +
d
;

169 i‡(
t
 > 8 * 256) {

170 
	`putch¨
(' ');

172 } i‡(
d
 < 2) {

173 
N
 = 
lz
 >> 9;

174 c⁄° 
ch¨£t
[] = ".,-~:;!*=#$@";

175 
	`¥ötf
("\033[48;05;%dm%c\033[0m", 
N
 / 4 + 1,

176 
ch¨£t
[
N
 > 0 ? N < 12 ? N : 11 : 0]);

177 
¬‹mÆs
++;

195 
öt16_t
 
dx
 = 0, 
dy
 = 0, 
dz
 = 0;

196 
öt16_t
 
a
 = 
vxi14
, 
b
 = 
vyi14
, 
c
 = 
vzi14
;

197 
d
) {

198 i‡(
d
 & 1024) {

199 
dx
 +
a
;

200 
dy
 +
b
;

201 
dz
 +
c
;

203 
d
 = (d & 1023) << 1;

204 
a
 >>= 1;

205 
b
 >>= 1;

206 
c
 >>= 1;

211 
px
 +
dx
 >> 4;

212 
py
 +
dy
 >> 4;

213 
pz
 +
dz
 >> 4;

216 
nôîs
++;

219 
	`puts
("");

221 
	`¥ötf
("%d iãøti⁄†%dÜôÖixñs\x1b[K", 
nôîs
, 
¬‹mÆs
);

222 
	`fÊush
(
°dout
);

227 
	`R
(5, 
cA
, 
sA
);

228 
	`R
(5, 
cAsB
, 
sAsB
);

229 
	`R
(5, 
cAcB
, 
sAcB
);

230 
	`R
(6, 
cB
, 
sB
);

231 
	`R
(6, 
cAcB
, 
cAsB
);

232 
	`R
(6, 
sAcB
, 
sAsB
);

235 
time•ec
 
ts
 = {.
tv_£c
 = 0, .
tv_n£c
 = 30000};

236 
	`«no¶ìp
(&
ts
, &ts);

238 
	`¥ötf
("\r\x1b[%dA", (24 << 
RESY_SHIFT
) - 1);

240 
	}
}

	@tests/falling-nes.h

27 
	~<°dlib.h
>

30 c⁄° 
	gÁŒög_√s
[] = "\
\032\002\001\000\000\000\000\000\000\000\000\000\000\001\002\004\b\020 \003\006\f\0300\005\n\
\016\a\v\026\266\204\270\204\272\204\302\204\314\204\343\204\372\204\v\205 \205&\205*\2051\2058\205>\205C\205G\205K\205U\205_\205f\205l\205\215\205\256\205\260\205\262\205\306\205\313\205\320\205K\203d\203o\203u\203{\203\222\203\230\203\245\203\253\203\251\017\215\025\100\251\000\215\000\003\251\377\215\003\003\215\004\003\2510\215u\003\215y\003\215\201\003\251\200\215}\003`\251\000\215\025\100\251\001\215\000\003`\215\001\003\n\
\250\271\352\205\215E\000\271\353\205\215F\000\240\000\261E\215\002\003\310\261E\252\310\261E\235\017\003\360=\310\261E\235\025\003\310\261E\235\033\003\310\261E\235!\003\310\261E\235-\003\310\261E\2353\003\310\261E\2359\003\251\000\235'\003\251\377\235K\003\251\001\235Q\003\251\000\235]\003\251\000\235i\003\310\255\001\003\235\t\003\316\002\003\320\254`\255\000\003\320.\242\000\275\017\003)\001\360\035\275K\003\030}9\003\235K\003\220\021\336Q\003\320\t\275W\003\235Q\003 7\201 2\202\350\340\006\320\327 \315\201`\251\001\215\a\003`\251\000\215\a\003`\275-\003\215E\000\2753\003\215F\000\240\000\261E\020(\311\240\220\016 \234\201\310\275\017\003)\001\320\355L\233\201)\177\214\001\003\250\271\000\200\235W\003\235Q\003\254\001\003\310LE\201\214\001\003\n\
\250\271\270\203\235\077\003\271\271\203\235E\003\254\001\003\251\000\235'\003 \267\201\310\230\030}-\003\235-\003\220\003\3763\003`\214\001\0038\351\240\n\
\250\271I\200\215\005\003\271J\200\215\006\003\254\001\003\310l\005\003\261E\311^\320\a\275\017\003\t\002\320\005\275\017\003)\375\235\017\003`\255u\003\215\000\100\255v\003\215\001\100\255w\003\215\002\100\255x\003\315\003\003\360\006\215\003\100\215\003\003\255y\003\215\004\100\255z\003\215\005\100\255{\003\215\006\100\255|\003\315\004\003\360\006\215\a\100\215\004\003\255}\003\215\b\100\255\177\003\215\n\
\100\255\200\003\215\v\100\255\201\003\215\f\100\255\203\003\215\016\100\255\204\003\215\017\100`\275\025\003\n\
\n\
\250 M\202\251\b\231v\003\275\077\003\231w\003\275E\003\231x\003`\214\001\003\275!\003\n\
\250\271\021\200\215E\000\271\022\200\215F\000\274'\003\261E\311\377\320\006\336'\003La\202\215\002\003\340\002\320\t\255\002\003\320\004\251\2000\b\275\033\003)\360\r\002\003 \254\202\254\001\003\231u\003\376'\003\275\017\003)\002\360\020\275\025\003\311\002\360\004\2510\320\002\251\200\231u\003`H)\017\215\b\003\255\a\003\360b\340\004\260^\275\025\003\311\000\320\024\255\b\003\2508\371\033\203\215\b\003h)\360\r\b\003L\032\203\275\025\003\311\001\320\024\255\b\003\2508\371+\203\215\b\003h)\360\r\b\003L\032\203\275\025\003\311\002\320\006h\251\200L\032\203\275\025\003\311\003\320\024\255\b\003\2508\371;\203\215\b\003h)\360\r\b\003L\032\203h`\000\000\000\001\002\003\004\004\005\006\006\a\a\a\b\b\000\001\001\002\002\003\004\005\006\a\b\b\t\t\n\
\n\
\000\000\000\001\001\002\002\003\003\004\005\006\006\a\a\b\275\017\003)\376\235\017\003\275\025\003\311\002\360\004\2510\320\002\251\200\235\033\003`\261E\235!\003\251\000\235'\003`\261E\235\033\003`\261E\2359\003`\261E\235-\003\310\261E\2353\003\215F\000\275-\003\215E\000\240\377`\261E\235]\003`\336]\003\275]\003\360\003L{\203\310`\261E\235i\003`\336i\003\275i\003\360\003L{\203\310`\361\a\200\a\023\a\255\006M\006\363\005\235\005M\005\000\005\270\004u\0045\004\370\003\277\003\211\003V\003&\003\371\002\316\002\246\002\177\002\\\002:\002\032\002\373\001\337\001\304\001\253\001\223\001|\001g\001Q\001\077\001-\001\034\001\f\001\375\000\357\000\342\000\322\000\311\000\275\000\263\000\251\000\237\000\226\000\216\000\206\000~\000w\000p\000j\000d\000^\000Y\000T\000O\000K\000F\000B\000\077\000;\0008\0004\0001\000/\000,\000)\000'\000%\000#\000!\000\037\000\035\000\033\000\032\000\030\000\027\000\025\000\024\000\023\000\022\000\021\000\020\000\017\000\016\000\r\000\f\000\f\000\v\000\n\
\000\n\
\000\t\000\b\000\377\b\000\000\001\000\002\000\003\000\004\000\005\000\006\000\a\000\b\000\t\000\n\
\000\v\000\f\000\r\000\016\000\017\000\200\000\201\000\202\000\203\000\204\000\205\000\206\000\207\000\210\000\211\000\212\000\213\000\214\000\215\000\216\000\217\000\000\377\017\377\017\016\r\f\t\005\000\377\017\017\016\r\f\n\
\b\005\000\377\001\001\002\002\003\003\004\004\a\a\b\b\n\
\n\
\f\f\r\r\016\016\017\017\377\017\017\016\016\r\r\f\f\v\v\n\
\n\
\t\t\b\b\a\006\005\004\002\000\377\017\017\016\016\r\f\v\v\n\
\t\b\006\005\003\002\000\377\r\r\r\f\v\000\000\000\000\000\000\000\000\000\006\006\006\005\004\000\377\017\017\017\017\000\377\r\006\000\377\017\016\v\006\002\000\377\017\006\004\002\001\000\377\017\r\t\005\000\377\016\a\001\000\377\016\004\000\377\a\002\000\377\017\017\016\r\v\t\005\003\000\377\n\
\n\
\t\b\006\005\003\002\000\377\t\b\006\004\002\000\377\v\t\005\002\000\377\b\n\
\f\r\r\f\n\
\b\b\n\
\f\r\r\f\n\
\b\b\n\
\f\r\r\f\n\
\b\b\n\
\f\r\r\f\n\
\b\377\r\f\t\a\b\n\
\f\016\r\f\t\a\b\n\
\f\016\r\f\t\a\b\n\
\f\016\r\f\t\a\b\n\
\f\016\377\n\
\377\b\377\n\
\n\
\t\t\b\b\a\a\a\006\006\005\005\004\003\003\002\001\000\377\n\
\a\003\000\377\n\
\a\003\000\377\n\
\n\
\n\
\n\
\n\
\t\t\t\b\b\b\a\a\006\006\005\005\004\004\003\003\002\002\001\000\377\000\206\r\206\020\215\271\221\211\222\377\224\017\225!\2251\225\100\225O\225\006\000\000\001\000\002\000\003\000\004\000\005\000\004\000\001\000p\006.\206P\001\001\001\260\002\026\207P\002\001\002\200\000\214\210P\003\001\0030\rM\212P\201^\204\f\f\003\003\a\a\b\005\f\f\003\003\a\a\b\005\241\002\245\004\203\f\f\f\f\003\003\003\003\a\a\a\a\b\b\005\005\246E\206\241\006\245\004\203\f\f\f\f\003\003\003\003\a\a\a\a\b\b\005\005\246]\206\202\f\f\f\f\f\f\f\f\003\003\003\003\003\003\003\003\a\a\a\a\a\a\a\a\b\b\b\b\005\005\005\005\f\f\f\f\f\f\f\f\003\003\003\003\003\003\003\003\a\a\a\a\a\a\a\a\b\b\b\b^^^^\245\004\f\f^\f^\f\f\f\003\003^\003^\003\003\003\a\a\a^^\a\a\a\b^\b\a^\005^\005\246\264\206\245\002\f\f\f\f^\f\f\f\003\003\003^\003\003\003\003\a\a\a^^\a\a\a\b\b\b\a^\005^\005\246\331\206\245\002\203\f\f\f\f\003\003\003\003\a\a\a\a\b\b\005\005\246\376\206\244A\206\240\201^\202\033^\030^\033^^ \033^\"^\033\035\037\030\033^\030^\033^^ \033^\"^\033\"\037\035\033^\030^\033^^ \033^\"^\033\035\"\030\033^\030^\033^^\030\033\035\033^\026^\030^\245\004\033^\"^\033^\" \033^\"^\033\035\044\032\033\035\"^\033^ \037\033\035\033^\026^\030^\246[\207\037\035\"\037\033^\"\037^\033\"\037^\033\035'\033\035\"^\033^ \037\033\035\033^\026^\030^\037\035\"\037\033^\"\037^\033\"\037\033\035\"'\033\035\"\037\033^ \037^\035\033^\033^\032^\245\002\033\035\"\037\033\035\" \033\035\"\037\033\035\"'\033\035\"\037\033\035 \037\033\035\037\"\033\035\030\026\246\300\207\245\006\033\035\"\037\033\035\" \033\035\"\037\033\035\"'\033\035\"\037\033\035 \037\033\035\037\"\033\035\030\026\246\345\207\033\035\"\037\033\035\"\033^\035\"\037\033^\"^\033\035\"\037\033\035^ ^\037 \"\032^\033^\033\035\"\037\033\035\"\033^\035\"\037\033\035\033^\033\035\"\037\033\035^ ^\037 \037 \037\033^\033^^\033\033\035^\"^\035^\033\033\035\"^\033^\037\033\033\035\" ^\037^\035\037^\033^\033^^\033\033\035^\"^\035^\033\033\035'^\033^\037\033\033\035\"\035^\033^\030\032^\033^\244Y\207\240\201^\205^^^^^^^^\241\b\202\245\002^^^3^3^^53^^75^^^0^0^3^5^.,^0^3^\246\234\210^^\077^^\077^^A\077^:^^<^^^<AC\077<:78^8^^:^^^\077^^\077^^A\077^:78<^^<^<^<^<^:^8578:<<7^:^7\077^<78:87\077^<7^:^78<87^3^5^\077<7<:^7\077^<78:^7^357:5^87<87^:^<^\245\002<<77::77<<77::\077\077<<77::77<<::8855\246A\211<<77::77<<77::^\077<<77::77<:<:<875<<77::77<<77::^\077<<77::77<:<:^^^^\245\004^3^3^3^3^<^<^<^:^7^7^7^7^8^8^8^8\246\246\211^<7^:^7\077^<7^:^7^^<7^:^^7<78^753^^<7^:^7\077^<7^:7:\077^<7^:7^8^78^8^^^^<7^:^7\077^<7^:^7^^<7^:^^7<78^73^3^<7^:^7\077^<7^:7:\077^<7^:^^7<8^3^^^3\244\227\210\240\201^\202\245\002^^b^^^b^^^b^^^^b^^b^^^b^^^b^^^bb\246R\212\202\245\004\241\tm^\241\rb^^\241\tm\241\rb^\241\tm^\241\rb^^^^b\241\tm^\241\rb^^\241\tm\241\rb^\241\tm^\241\rb^\241\tm^\241\rbb\246x\212\241\r\245\004^^b^^^b^^^b^^^^b^^b^^^b^^^b^^^bb\246\273\212\245\004\203\241\rbbbb\246\341\212\245\004\202\241\rbbbb\246\355\212\245\004\201\241\016bbbb\246\371\212\245\004\200\241\016bbbb\246\005\213\203^^\202\241\r\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\241\tk\201\241\rb\241\vi\202^i\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vii\202\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\241\tk\201\241\rb\241\vi\202^i\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vii\245\b\203\241\tk\241\020b\202^\241\tk\203\241\020b\246\325\213\202\241\tk^\241\rb\241\vi^\241\tk\241\rb^\241\tk^\241\rb\241\tk\241\vi^\241\rb^\241\tk^\241\rb\241\vi^\241\tk\241\rb^\241\tk\241\rb\241\vi\241\rb\241\tk\241\rb\241\vi\241\rb\202\241\tk^\241\rb\241\vi^\241\tk\241\rb^\241\tk^\241\rb\241\tk\241\vi^\241\rb^\241\tk^\241\rb\241\vi^\241\tk\241\rb^\241\tk^\241\vi\241\rb\241\tk^\241\tk^\202\241\tk^\241\rb\241\tk\241\vi^\241\rb^\241\tk^\241\rb\241\vi^\241\rb\241\vi\241\rb\241\tk^\241\rb\241\tk\241\vi^\241\rb\241\vi^^\241\rb\241\vi\241\tk^\241\rb\241\rb\202\241\tk^\241\rb^^\241\tk\241\rb^\241\tk^\241\rb^^\241\rb^\241\rb\241\tk^\241\rb^^\241\tk\241\rb^\241\tk^\241\rb^\241\tk^^^\244u\212\240\004\000\001\000p\0211\215U\001\001\001\360\033X\215U\002\001\002\200\001\237\216U\003\001\0030\000\261\216U\202\245\004\024\023\017\024\023\017\024\023\2464\215\245\003\024\023\017\024\023\017\024\023\246A\215\024\023\017\024\026\024\023\017\2441\215\240\202\241\024^\033\037 ^^^^^\033\037 ^^^^^\030\033\037^^^^^\030\033\037 \037\035\033^\033\037 ^^^^^\033\037 ^^^^^\030\033\037^^^^\030\033\037 \" \037\033^\033\037 ^^^^^\033\037 ^^^^^\030\033\037^^^^^\030\033\037 \037\035\033\033\037 ^^ ^ \033\037 \035^\033^\033^\030\033\037^^^\037\033\030\033\037\" \037\033\241\033\033\037 \033\037 \033\037\033\037 \033\037 \033\037\033\037 \033\037 \033\037\033\037 \033\" \037\033\033\037 \033\037 \033\037\033\037 \033\037 \033\037\033\037 \033\037 \033\037\033\037 \033 \037\033^\241\033\"^\"\"^\044^\"^^ ^\037^\033^\035^\035\035^\037^\035^^^^^^^^\"^\"\"^\044^\"^^'^)^'^+^''^\"^\"^ \037 \037\035\033^\241\030\203\"\202\"\203\"\044\210\"\203 \037\033\203\035\202\035\203\035\037\241\033\205\035\202^\241\030\203\"\202\"\203\"\044\210\"\203')'\203+\202'\203'\"\203\"\202 \037 \037\035\033\033\244X\215\240\205\024\021\017\204\021\023\205\024\021\017\204\021\026\244\237\216\240\205\241\000^^^^^^^^\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i^\203\241\vm\202\241\023i\241\vm\202mm\241\023i^\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i^\203\241\vm\202\241\023i\241\vm\202\241\023i\201\241\vmm\241\023i\241\vmm^\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i\241\vm\203\241\vm\202\241\023i\241\vm\202mm\201\241\023i\241\vm\202m\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i^\203\241\vm\202\241\023i\241\vm\202\241\023i\201\241\vmm\241\023i\241\vmm^\245\002\201\241\vm\241\017j\241\vm\241\017j\201\241\023i\241\017j\241\vm\241\017j\201\241\vm\241\017j\241\vm\241\017j\201\241\023i\241\017j\202\241\021g\201\241\vm\241\017j\241\vm\241\017j\201\241\023i\241\017j\241\vm\241\017j\201\241\vm\241\017j\241\vm\241\017j\202\241\023i\241\vm\201\241\vm\241\017j\241\vm\241\017j\201\241\023i\241\017j\241\vm\241\017j\201\241\vm\241\017j\241\vm\241\017j\201\241\023i\241\017j\202\241\021g\201\241\vm\241\017j\241\vm\241\017j\201\241\023i\241\017j\241\vm\241\017j\201\241\vm\241\017j\241\vm\241\017j\201\241\023i\241\017j\241\023i\241\017j\246q\217\202\241\vmm\241\023i\241\vm\202^\201\241\vmm\241\023i^\202\241\vm\203\241\vm\202\241\023i\241\vm\202mm\241\023i\201\241\vmm\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i\201^\241\vm\203\241\vm\202\241\023i\241\vm\202\241\023i\201\241\vmm\241\023i\241\vmm^\202\241\vmm\241\023i\241\vm\202^\201\241\vmm\241\023i^\202\241\vm\203\241\vm\202\241\023i\241\vm\202mm\241\023i\201\241\vmm\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i\201^\241\vm\203\241\vm\202\241\023i\241\vm\202\241\023i\201\241\vmm\241\023i\241\vmm^\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i^\203\241\vm\202\241\023i\241\vm\202mm\241\023i^\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i^\203\241\vm\202\241\023i\241\vm\202\241\023i\201\241\vmm\241\023i\241\vmm^\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i\241\vm\203\241\vm\202\241\023i\241\vm\202mm\201\241\023i\241\vm\202m\203\241\vm\202\241\023i\241\vm^\202\241\vm\241\023i^\203\241\vm\202\241\023i\241\vm\202\241\023i\201\241\vmm\241\023i\241\vmm^\244\261\216\240\004\000\001\000\260\025\332\221M\001\001\001\260\026\343\221M\002\001\002\200\001\377\221M\003\001\0030\000\026\222M\205\a\003\b\n\
\244\332\221\240\205\037\203\033\033\033\201\033^\202\033\205 \241\025\211\241\026\"\201^\206! \244\343\221\240\203)\211+\201-\207.\211.\201/\2070\2110\2040.\244\377\221\240\203\241\vmm\202\241\023i\200^\241\017b^^b^^^\202\241\vm\202^\200^\241\017b^^\203\241\vm\202\241\023i\200^\241\017b^^\202\241\vm\200^\241\017b^^\203\241\vmm\202\241\023i\200^\241\017b^^b^^^\202\241\vm\202^\200^\241\017b^^\203\241\vm\202\241\023i\200^\241\017b^^\203\241\vm\244\026\222\240\004\000\001\000p\020\252\222\077\001\001\001\260\006\277\222~\002\001\002\200\006\210\223~\003\001\0030\000Q\224\077\204\022\022\022\022\020\020\020\020\022\022\022\022\t\t\v\v\244\252\222\240\204^\214(\220%\214#\220%\214%\207'\213(\202'\216%\204#\204^\214(\220%\214#\207%\214^\207#\214%\207'\214(\207%\214(\207*\204^\214(\220%\214#\220%\214%\207'\213(\202'\216%\214#\207!\204^\214\036\207\034\214\036\207 \214!\220#\214!\207 \204\036\034\204^\214*\2201\214*\207/\214^\207*\204-\201,\203-\207,\214*\207(\204^\214#\207%\214(\215*\201+\204,\204-\207*\213-*\207(\213'#\207!\204^\214'\220%\214#\220%\214%\207'\213(\202'\216%\214#\207!\204^\214\036\207\034\214\036\207 \214!\220#\214!\207 \214\031\207\033\214\034\207\036\244\277\222\240\204^\214(\220%\214#\220%\214%\207'\213(\202'\216%\204#\204^\214(\220%\214#\207%\214^\207#\214%\207'\214(\207%\214(\207*\204^\214(\220%\214#\220%\214%\207'\213(\202'\216%\214#\207!\204^\214\036\207\034\214\036\207 \214!\220#\214!\207 \204\036\034\204^\214*\2201\214*\207/\214^\207*\204-\201,\203-\207,\214*\207(\204^\214#\207%\214(\215*\201+\204,\204-\207*\213-*\207(\213'#\207!\204^\214'\220%\214#\220%\214%\207'\213(\202'\216%\214#\207!\204^\214\036\207\034\214\036\207 \214!\220#\214!\207 \214\031\207\033\214\034\207\036\244\210\223\240\245\004\202\241\022b\200^\241\017b^^\202\241\023i\200^\241\017b^^\246S\224\202^\200^\241\017b^^\202\241\023i\200^\241\017b^^\202\241\022b\200^\241\017b^^\202\241\023i\200^\241\017b^^\245\002\202\241\022b\200^\241\017b^^\202\241\023i\200^\241\017b^^\246\230\224\245\004\202\241\022b\200^\241\017b^^\202\241\023i\200^\241\017b^^\246\263\224\245\002\202^\200^\241\017b^^\202\241\023i\200^\241\017b^^\202\241\022b\200^\241\017b^^\202\241\023i\200^\241\017b^^\246\316\224\244Q\224\240\001\004\001\002\200\001\b\225P\200\077CFK^\240\001\004\001\002\200\001\030\225\100\200FC\077<A\077^\240\001\005\001\003\200\003*\225\300\202nm\202~^\240\001\005\001\001\260\001:\225P\201\044\037\031^\240\001\005\001\001\260\001I\225P\201\031\037\044^\240\001\005\001\0030\001X\225`\200vw\207x\206z^\240\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377,\002 \020\373`x\330\242\100\216\027\100\242\377\232\350\216\000 \216\001 \216\020\100 \000\300\251\000\235\000\000\235\000\001\235\000\003\235\000\004\235\000\005\235\000\006\235\000\a\251\376\235\000\002\350\320\341 \000\300\251\022\215\001\000\2514\215\002\000\251\220\215\016\000\251\036\215\017\000\251\200\215\022\000\251X\215\023\000\251\001\215\026\000\251\003\215\031\000 X\315\251 \2150\000\251\360\2151\000\251\240\2153\000\251\360\2154\000\251\000\215\003 \251\002\215\024\100\242\000\275\200\340\235\000\002\350\340\314\320\365\255\002 \251(\215\006 \251\000\215\006 \242\000\240\000\251L\215:\000\251\345\215;\000 6\315\251\000\215\000\000 \263\301\255\016\000\215\000 \255\017\000\215\001 [\200L\312\300\255\020\000\311\360\320\r\251\000\215\020\000\255\021\000I\002\215\021\000\251\000\215\005 \255\020\000\215\005 \255\016\000\r\021\000\215\000 \255\017\000\215\001 \251\000\215\003 \251\002\215\024\100 !\317 _\314\251\020,\n\
\000\320\017\251\000\3157\000\360n\251\000\2157\000L\207\301\251\000\3157\000\360\003L\207\301\255\000\000\311\001\320\020\251\002\215\000\000 \206\303\251\001\2157\000L\207\301\255\000\000\311\000\320\020\251\001\215\000\000 1\305\251\001\2157\000L\207\301\255\000\000\311\002\320\020\251\001\215\000\000 \326\304\251\001\2157\000L\207\301\255\000\000\311\003\320\020\251\000\215\000\000 \263\301\251\001\2157\000L\207\301\255\000\000\311\000\320\003L\204\302\255\000\000\311\001\320\003L\202\306\255\000\000\311\002\320\003L\n\
\304\255\000\000\311\003\320\003L\323\304 \367\200\100\251\000\215\020\000\251\000\215\021\000\251\003\215\031\000\251\000\215\f\000\251\000\215\r\000\255\002 \251\077\215\006 \251\000\215\006 \242\000\275 \340\215\a \350\340 \320\365\255\017\000I\030\215\001 \255\002 \251 \215\006 \251\000\215\006 \242\000\240\000\251L\215:\000\251\351\215;\000 6\315\242\000\275\002\002I \235\002\002\350\350\350\350\340\310\320\360\251\360\215\022\000\215\023\000 f\307\251\377\215(\000\215)\000\215*\000 \352\315\242 O\315\242\044 O\315\242( O\315\242, O\315\2420 O\315\2424 O\315\2428 O\315\242< O\315\251\000\2159\000\251\217\215\310\002\255\312\002)\374\t\000\215\312\002\251\000\215\v\000 1\201\251\001\215G\000 \211\200` \320\316\251\000\215\t\000\215\b\000\215\a\000\215\006\000\251\b,\n\
\000\360\033\251\000\3158\000\360\003Lo\303\2559\0008\351\001\2159\000\251\001\2158\000L\341\302\251\004,\n\
\000\360\033\251\000\3158\000\360\003Lo\303\2559\000\030i\001\2159\000\251\001\2158\000L\341\302\251\000\2158\000Lo\303\2559\000\311\377\320\b\251\000\2159\000Lo\303\2559\000\311\003\320\b\251\002\2159\000Lo\303\2559\000\311\000\320\032\251\217\215\310\002\255\312\002)\374\t\000\215\312\002 v\314\251\000\215\v\000LX\303\311\001\320\032\251\247\215\310\002\255\312\002)\374\t\001\215\312\002 \266\314\251\001\215\v\000LX\303\251\277\215\310\002\255\312\002)\374\t\002\215\312\002 \366\314\251\002\215\v\000LX\303\255\312\002\t \215\312\002\251\377\215\004\000\251\000\215\003 \251\002\215\024\100\255\004\000\240\020 \024\317\311\000\320\b\255\312\002I \215\312\002L\257\301\255\002 \251\077\215\006 \251\000\215\006 \242\000\275\100\340\215\a \350\340 \320\365\251\000\215\005 \255\020\000\215\005 \255\016\000\r\021\000\215\000 \255\017\000\215\001 \240\000\242 \251\351 \351\303\242\044\251\332 \351\303\242(\251\356 \351\303\242,\251\354 \351\303\2420\251\336 \351\303\2424\251\335 \351\303L\001\304\235\001\002\230\030ih\235\003\002\251`\235\000\002\310\310\310\310\310\310\310\310`\251\b \211\200 +\201`L\257\301\255\017\000I\030\215\001 \255\002 \251\077\215\006 \251\000\215\006 \242\000\275`\340\215\a \350\340 \320\365\251\000\215\005 \255\020\000\215\005 \255\016\000\r\021\000\215\000 \255\017\000\215\001 \240\000\242 \251\340 \216\304\242\044\251\332 \216\304\242(\251\346 \216\304\242,\251\336 \216\304\310\310\310\310\310\310\310\310\2420\251\350 \216\304\2424\251\357 \216\304\2428\251\336 \216\304\242<\251\353 \216\304L\246\304\235\001\002\230\030i\\\235\003\002\251`\235\000\002\310\310\310\310\310\310\310\310`\255\035\000\315\033\000\220\r\320\027\255\036\000\315\034\000\220\003L\307\304\255\033\000\215\035\000\255\034\000\215\036\000 \230\316\251\n\
\211\200 +\201`L\257\301\255\002 \251\077\215\006 \251\000\215\006 \242\000\275\000\340\215\a \350\340 \320\365\251\000\215\005 \255\020\000\215\005 \255\016\000\r\021\000\215\000 \255\017\000\215\001 \242 O\315\242\044 O\315\242( O\315\242, O\315\2420 O\315\2424 O\315\251\t \211\200 1\201`\255\017\000I\030\215\001 \251\000\215\020\000\251\000\215\021\000\255\002 \251\077\215\006 \251\000\215\006 \242\000\275\000\340\215\a \350\340 \320\365\255\002 \251 \215\006 \251\000\215\006 \242\000\240\000\251L\215:\000\251\341\215;\000 6\315\251\000\215\032\000\215\033\000\215\034\000\242\000\275\002\002I \235\002\002\350\350\350\350\340\310\320\360\255\312\002)\337\t \215\312\002 X\315 \031\316\215%\000 !\317 \031\316\215&\000 !\317 \031\316\215'\000 \273\315 \352\315\251\200\215\022\000\251X\215\023\000 f\307\251\360\215\003\002\251\f\215\000\002\251\323\215\001\002\251\344\215K\002\251\f\215H\002\251\370\215I\002\251\b\215\a\002\251\f\215\004\002\251\320\215\005\002\251\020\215\v\002\251\f\215\b\002\251\320\215\t\002\251\030\215\017\002\251\f\215\f\002\251\320\215\r\002\251t\215\023\002\251\f\215\020\002\251\001\215\022\002\251|\215\027\002\251\f\215\024\002\251\001\215\026\002\251\204\215\033\002\251\f\215\030\002\251\001\215\032\002 \230\316\255\v\000\311\000\320\v v\314\251\002\215G\000 \211\200\255\v\000\311\001\320\v \266\314\251\003\215G\000 \211\200\255\v\000\311\002\320\v \366\314\251\004\215G\000 \211\200` \320\316\255\r\000\320\034\255\t\000\254\f\000\331\000\332\220\021\356\f\000\254\f\000\271\000\332\320\006\255\000\000\215\r\000\255\f\000\311\020\220\004\311\020\260\022\255\003\000\240\002 \024\317\311\000\320\003\356\020\000L\306\306\356\020\000\251\000\215\037\000\215 \000\215!\000\251\002,\n\
\000\360!\256\f\000\255\022\0008\3755\332\215\022\000\255\024\0008\375j\332\260\003\316\022\000\215\024\000\251\000\215\026\000\251\001,\n\
\000\360!\256\f\000\255\022\000\030}5\332\215\022\000\255\024\000\030}j\332\220\003\356\022\000\215\024\000\251\001\215\026\000\255\022\000\311\r\260\005\251\r\215\022\000\255\022\000\311\366\220\005\251\366\215\022\000\255\023\000\311(\260\005\251(\215\023\000\255\023\000\311\240\220\005\251\240\215\023\000L\355\307\030\230m\023\000\235\220\002`\030\230m\022\000\235\223\002`\240\364\242\000 ]\307\242\f ]\307\242\030 ]\307\242\044 ]\307\240\374\242\004 ]\307\242\020 ]\307\242\034 ]\307\242( ]\307\240\004\242\b ]\307\242\024 ]\307\242 ]\307\242, ]\307\240\340\242\000 T\307\242\004 T\307\242\b T\307\240\350\242\f T\307\242\020 T\307\242\024 T\307\240\360\242\030 T\307\242\034 T\307\242 T\307\240\370\242\044 T\307\242( T\307\242, T\307` f\307\255\003\000\240\n\
\024\317\311\000\360\003Lo\310\356\027\000\255\027\000\311\b\320\005\251\000\215\027\000\255\027\000\311\000\320\a\242\000\2403Li\310\311\001\320\a\242\003\240#Li\310\311\002\320\a\242\023\240\023Li\310\311\003\320\a\242#\240\003Li\310\311\004\320\a\2423\240\000Li\310\311\005\320\a\242#\240\003Li\310\311\006\320\a\242\023\240\023Li\310\311\a\320\a\242\003\240#Li\310\216\231\002\214\221\002\240\000\314\026\000\360\003L\262\310\242\004\275\222\002\t\100\235\222\002\242\044\275\222\002\t\100\235\222\002\242(\275\222\002\t\100\235\222\002\242,\275\222\002\t\100\235\222\002\242,\2510\235\221\002\242\044\2512\235\221\002L\353\310\242\004\275\222\002)\277\235\222\002\242\044\275\222\002)\277\235\222\002\242(\275\222\002)\277\235\222\002\242,\275\222\002)\277\235\222\002\242,\2512\235\221\002\242\044\2510\235\221\002L\353\310\255\004\000\240\b \024\317\311\000\320\037\356\030\000\255\030\000\311\020\320\005\251\000\215\030\000\255\030\000\311\b\260\006\356\023\000L\026\311\316\023\000L;\311\275\222\002I \235\222\002\350\350\350\350\3400\320\360`\275\222\002)\337\235\222\002\350\350\350\350\3400\320\360`\255\032\000\360\032\311\001\360\021\240\n\
\024\317\311\000\320\r\242\000 \031\311LZ\311\242\000 *\311\251\000\256\"\000\360\006\316\"\000Lo\311\242\000 \207\315\215(\000\251\020\256#\000\360\006\316#\000L\204\311\242\001 \207\315\215)\000\251 \256\044\000\360\006\316\044\000L\231\311\242\002 \207\315\215*\000\242\000\275`\002\311\024\260\005\251\001\215\037\000\242\020\275`\002\311\024\260\005\251\001\215 \000\242 \275`\002\311\024\260\005\251\001\215!\000\255\037\000\r \000\r!\000\311\000\3606\255\037\000\360\v \031\316\215%\000\251\377\215(\000\255 \000\360\v \031\316\215&\000\251\377\215)\000\255!\000\360\v \031\316\215'\000\251\377\215*\000 \273\315 \352\315\255\032\000\360\0068\351\001\215\032\000L]\312\255\032\000\311\000\360\003LI\312\255\031\0008\351\001\215\031\000\251\a \211\200\251P\215\032\000\255\001\0028\351\001\215\001\002\255\031\000\311\000\320\b \r\304\251\003\215\000\000`\030i\002\315\023\000\260\n\
\030i\b\315\023\000\220\002\240\001`\240\000\255(\000 J\312\300\001\360\027\255)\000 J\312\300\001\360-\255*\000 J\312\300\001\360CL\340\312\255\022\000\030i\b\315%\000\220U\255\022\0008\351(\260\002\251\000\315%\000\260F \024\312L\340\312\255\022\000\030i\b\315&\000\2205\255\022\0008\351(\260\002\251\000\315&\000\260& \024\312L\340\312\255\022\000\030i\b\315'\000\220\025\255\022\0008\351(\260\002\251\000\315'\000\260\006 \024\312L\340\312\256/\000\360'\251\000\242\000 !\316\2151\000\311\024\2603\251\000\215/\000\251\360\215\300\002\2151\000 J\316\215\303\002\2150\000L&\313\255\005\000\240\n\
\024\317\320\020\254\f\000\276\250\333 \303\316\360\005\251\001\215/\000\2562\000\360*\251\004\242\001 !\316\2154\000\311\024\2606\251\000\2152\000\251\360\215\304\002\2154\000 !\317 J\316\215\307\002\2153\000Lo\313\255\005\000\240\n\
\024\317\320\020\254\f\000\276s\333 \303\316\360\005\251\001\2152\000L'\314\251\200,.\000\320\003L\273\313\251\000\215/\000 J\316\2150\000\215\303\002\251\360\2151\000\215\300\002\255\031\000\030i\001\215\031\000\251\006 \211\200\255\031\000\311\n\
\320\b\251\t\215\031\000L\273\313\255\001\002\030i\001\215\001\002L\273\313\251\100,.\000\320\003L\363\313\251\000\2152\000 !\317 J\316\2153\000\215\307\002\251\360\2154\000\215\304\002\251\005 \211\200\356\034\000\255\034\000\311\000\320\003\356\033\000 R\316`\030i\002\315\023\000\260\n\
\030i \315\023\000\220\002\240\001`8\351\b\260\002\251\000\315\022\000\260\023\030i\030\220\002\251\377\315\022\000\220\a\212\r.\000\215.\000`\251\000\215.\000\240\000\2551\000 \364\313\300\001\320\b\2550\000\242\200 \a\314\240\000\2554\000 \364\313\300\001\320\b\2553\000\242\100 \a\314\255.\000\360\003Ñ\313L\257\301\251\001\215\026\100\251\000\215\026\100\242\b\255\026\100J.\n\
\000\312\320\366`\255\002 \251#\215\006 \251\300\215\006 \242\000 \252\314\255\000\000\311\000\360\022\255\002 \251+\215\006 \251\300\215\006 \242\000 \252\314\251\000\215\005 \215\005 `\275L\355\215\a \350\340\100\320\365`\255\002 \251#\215\006 \251\300\215\006 \242\000 \352\314\255\000\000\311\000\360\022\255\002 \251+\215\006 \251\300\215\006 \242\000 \352\314\251\000\215\005 \215\005 `\275\214\355\215\a \350\340\100\320\365`\255\002 \251#\215\006 \251\300\215\006 \242\000 *\315\255\000\000\311\000\360\022\255\002 \251+\215\006 \251\300\215\006 \242\000 *\315\251\000\215\005 \215\005 `\275\314\355\215\a \350\340\100\320\365`\261:\215\a \310\300\377\320\366\261:\215\a \310\350\356;\000\340\004\320\350`\251\377\235\000\002\235\003\002`\2510\215%\000\251`\215&\000\251\220\215'\000\251\377\215(\000\251\377\215)\000\251\377\215*\000\251\000\215\"\000\251P\215#\000\251P\n\
\215\044\000`H\254\f\000\271\237\332\215=\000\275+\000\030y\324\332\220\003\356=\000\235+\000\240\000h\252\275`\0028\355=\000\235`\002\350\350\350\350\310\300\004\360\003L\244\315`\240\000\242\000\255%\000 \332\315\240\000\242\020\255&\000 \332\315\240\000\242 \255'\000 \332\315`\235c\002\030i\b\350\350\350\350\310\300\004\320\361`\240\000\242\000\255(\000 \t\316\240\000\242\020\255)\000 \t\316\240\000\242 \255*\000 \t\316`\235`\002\350\350\350\350\310\300\004\320\364` !\317\255\001\000\311\340\260\366`H\254\f\000\271\t\333\215=\000\2755\000\030y>\333\2355\000\220\003\356=\000h\252\275\300\0028\355=\000\235\300\002` !\317\255\001\000\311\370\260\366`\356\r\002\255\r\002\311\332\320;\251\320\215\r\002\356\t\002\255\t\002\311\332\320,\251\320\215\t\002\356\005\002\255\005\002\311\332\320\035\251\320\215\r\002\215\t\002\215\005\002\251\000\215\033\000\215\034\000\251\003\215\035\000\251\347\215\036\000`\255\035\000\215\077\000\255\036\000\215>\000 7\317\251\320\030m\100\000\215\031\002\251\320\030mA\000\215\025\002\251\320\030mB\000\215\021\002`\354\001\000\220\005\360\003\242\001`\242\000`\356\003\000\255\003\000\311d\320\005\251\000\215\003\000\356\005\000\255\005\000\311<\320\005\251\000\215\005\000\255\005\000\311\000\320\033\356\t\000\255\t\000\320\023\356\b\000\255\b\000\320\v\356\a\000\255\a\000\320\003\356\006\000\356\004\000`8\214<\000\355<\000\260\373m<\000`\242\b\255\001\000\n\
.\002\000\220\002I-\312\320\365\215\001\000\311\000`\251\000\215\100\000\215A\000\215B\000\215C\000\215D\000\242\020\016>\000.\077\000\254\100\000\271\177\317*\215\100\000\254A\000\271\177\317*\215A\000\254B\000\271\177\317*\215B\000\254C\000\271\177\317*\215C\000.D\000\312\320\314`\000\001\002\003\004\200\201\202\203\204\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\003\006\n\
\016\022\026\032\036!\044'*-036<\100DGJMPSVY\\_behjx|\200\204\207\212\215\220\223\226\231\234\237\242\245\252\271\310\334\372\000\001\001\001\001\001\001\001\001\001\001\001\001\002\002\002\002\002\002\002\002\002\002\002\002\002\002\002\002\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\004\004\004\004\004\004\004\005\005\100P`p\200\220\240\260\300\320\340\360\000\020 0\100P`p\200\220\240\260\300\320\340\360\000\020 0\100P`p\200\220\240\260\300\320\340\360\000\020 0p\240\340 \001\001\001\001\001\001\001\001\001\001\001\001\001\001\002\002\002\002\002\002\002\002\002\002\002\002\002\002\002\002\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\004\004\004\004\004\005\005 0\100P`p\200\220\240\260\300\320\340\360\000\020 0\100P`p\200\220\240\260\300\320\340\360\000\020 0\100P`p\200\220\240\260\300\320\340\360\000\020P\220\320 \000\000\000\000\001\001\001\001\001\001\001\001\001\001\001\001\001\001\001\001\002\002\002\002\002\002\002\002\002\002\002\002\002\002\002\002\003\003\003\003\003\003\003\003\003\003\003\003\003\004\004\004\004\300\320\340\360\000\020 0\100P`p\200\220\240\260\300\320\340\360\000\020 0\100P`p\200\220\240\260\300\320\340\360\000\020 0\100P`p\200\220\240\260\320\000 \100\100\016\016\016\016\016\016\016\016\016\016\016\016\016\016\016\016\020\020\020\020\020\020\020\020\020\020\022\022\022\022\022\022\024\024\026\026\030\030\032\032\034\034\034\034\036\036\036\036\036 \002\002\002\002\002\002\002\002\003\003\003\003\003\003\003\003\004\004\004\004\004\004\004\004\004\004\004\004\006\006\006\006\006\006\006\006\006\006\006\006\006\006\b\b\b\b\b\b\b\b\b\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\017\02110\017\027(8\017\077=-\017'7\027\017\a\001\b\017\a>\000\0178\026\006\017'\077\027\017!1\021\017'7\027\017- \r\017\"2\022\017!1\021\017'7\027\017- \r\017\"2\022\017\020\000 \017\020\000 \017\020\000 \017\020\000 \017\000- \017\000- \017\000= \017'\077\027\017\006\000-\017\006\000-\017\006\000-\017\006\000-\017\077\077\077\017\077\006\006\017\077-0\017'\077\027\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\000\003\377\377\004\0010\377\005\0018\377\006\001\100\377\a\001H\377\024\001`\377\025\001h\377\026\001p\377\027\001x\377\044\001\220\377%\001\230\377&\001\240\377'\001\2508\000\000t8\001\001|8\002\100\204\100\020\000t\100\021\000|\100\022\000\204H \000tH!\000|H\"\000\204P0\000tP1\000|P2\000\204\360\203\002 \360\202\003\240\217\301\000Z\000\000\000\000\000\000\000\000\000\000\000\b\t\n\
\v\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\030\031\032\033\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\004\005\006\a\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\024\025\026\027\000\000\000\000\000\000\000\000\000\000()*+\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\00089:;\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\b\t\n\
\v\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\030\031\032\033\000\000\000\000\000\000\000\000\000\000\044%&'\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\0004567\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000 !\"#\000\000\000\000\000\000\000\000\000\004\005\006\a\000\000\000\000\000\000\000\000\000\000\000\000\000\000\0000123\000\000\000\000\000\000\000\000\000\024\025\026\027\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000 !\"#\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\0000123\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\b\t\n\
\v\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\030\031\032\033\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\004\005\006\a\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\024\025\026\027\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\b\t\n\
\v\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\030\031\032\033\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000()*+\000\000\000\000\000\000\000\000\000\000\000\000\000\000 !\"#\000\000\000\000\000\000\000\000\000\00089:;\000\000\000\000\000\000\000\000\000\000\000\000\000\0000123\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\004\005\006\a\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000()*+\000\000\000\000\000\000\024\025\026\027\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\00089:;\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\004\005\006\a\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\024\025\026\027\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000 !\"#\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\b\t\n\
\v\000\000\000\000\000\0000123\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\030\031\032\033\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\b\t\n\
\v\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\030\031\032\033\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\044%&'\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\0004567\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\b\t\n\
\v\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\030\031\032\033\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000 !\"#\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\0000123\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\b\t\n\
\v\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\044%&'\000\000\000\000\030\031\032\033\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\0004567\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003PQQQQQQQQQQQQQQQQQQQQR\003\003\003\003\003\003\003\003\003\003`\200\201\202\203\204\205\206\207\210\211\212\213\214\215\216\217\f\r\016\017b\003\003\003\003\003\003\003\003\003\003`\220\221\222\223\224\225\226\227\230\231\232\233\234\235\236\237\034\035\036\037b\003\003\003\003\003\003\003\003\003\003`\240\241\242\243\244\245\246\247\250\251\252\253\254\255\256\257\257-./b\003\003\003\003\003\003\003\003\003\003`\260\261\262\263\264\265\266\267\270\271\272\273\274\275\276\277<=>\077b\003\003\003\003\003\003\003\003\003\003`\300\301\302\303\304\305\306\307\310\311\312\313\314\315\316\317LMNOb\003\003\003\003\003\003\003\003\003\003`\320\321\322\323\324\325\326\327\330\331\332\333\334\335\336\337\\]^_b\003\003\003\003\003\003\003\003\003\003`\340\341\342\343\344\345\346\347\350\351\352\353\354\355\356\357lmnob\003\003\003\003\003\003\003\003\003\003`\360\361\362\363\364\365\366\367\370\371\372\373\374\375\376\377|}~\177b\003\003\003\003\003\003\003\003\003\003pqqqqqqqqqqqqqqqqqqqqr\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\100ABCDEFGHSTUVW\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003PQQQQQQQQQQQQQQR\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003\003\003\003\003\003\003\003\003\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003IJKYZ[\003\003\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003\003\003\003\003\003\003\003\003\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003\003\003\003\003\003\003\003\003\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003stuvwxyz\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003\003\003\003\003\003\003\003\003\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003\003\003\003\003\003\003\003\003\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003cdefghi\003\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003`\003\003\003\003\003\003\003\003\003\003\003\003\003\003b\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003pqqqqqqqqqqqqqqr\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\003\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000UUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUUU\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\252\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\315\300\006\300\000\000\f\f\f\034\034\030\030\030\000\000\000\000\000\000\000\000\000\017\177\177\377\377\3768\377\361\377\201\000\000\000\00000088\030\030\030\000\000\000\000\000\000\000\000\030\030\030\030\030\030\030\030\000\000\000\000\000\000\000\000\377\201\324\2760\033\006\000\000~+A\017\004\000\000\377\302\031\177\203\001\000\000\000=\346\200\000\000\000\000\377\003y:\263\366\336\f\000\374\206\305L\b\000\000\377|\021\307\022\f\000\000\000\203\3568\f\000\000\000\377\341\224>p\312\220\200\000\036k\301\2174`\000\377\301\033x\215\001\000\000\000>\344\207\002\000\000\000\377\203\271\2723\326\336\f\000|FE\314(\000\000\377|\021\307\023\016\000\000\000\203\3568\f\000\000\000\377\341\224>`J\030\000\000\036k\301\2374\000\000\377\301\033x\215\001\000\000\000>\344\207\002\000\000\000\377\203\271\2723\326\336\f\000|FE\314(\000\000\377|\021\307\023\016\000\000\000\203\3568\f\000\000\000\037\037\003\001\001\000\000\000\003\003\003\001\001\000\000\000\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\370\370\300\200\200\000\000\000\300\300\300\200\200\000\000\00000088\030\030\030\000\000\000\000\000\000\000\000\377>\210\343\310p\000\000\000\301w\0340\000\000\000\377\000\222\267\365x\020\000\000\377mH\b\000\000\000\377\373pF\231\370p \000\004\217\271`\000\000\000\377\201+}\f\330`\000\000~\324\202\360 \000\000\377>\210\343\367\210\000\000\000\301w\034\b\004\000\000\377\000\222\267\365x\020\000\000\377mH\b\000\000\000\377\373pF\231\370p \000\004\217\271`\000\000\000\377\200+|\016\334`\000\000\177\324\203\361 \000\000\377>\210\343w\b\000\000\000\301w\034\210\004\000\000\377\000\222\267\365x\020\000\000\377mH\b\000\000\000\377\373pF\231\370p \000\004\217\271`\000\000\000\377\200+y\f\336a\000\000\177\324\206\363!\000\000\001\001\000\000\000\000\000\000\001\001\001\001\001\001\001\001\377\377\000\000\000\000\000\000\377\377\377\377\377\377\347\303\200\200\000\000\000\000\000\000\200\200\200\200\200\200\200\200\000``p008\030\000\000\000\000\000\000\000\000\377\217\303\271<\a\000\000\000p<F\003\000\000\000\377\301\030\177s!\000\000\000>\347\200\200\300\000\000\377\300\031;\273\234\330`\000\077\346\304D` \000\377|\021\307q>\030\000\000\203\3568\016\000\000\000\377\217\303\271<\a\000\000\000p<F\003\000\000\000\377\301\030\177s!\000\000\000>\347\200\200\300\000\000\377\300\031;\273\234\330`\000\077\346\304D` \000\362y\023\307s\034\a\000\r\206\3548\f\003\000\000\377\217\3039|\207\000\000\000p<\306\203\000\000\000\377\301\030\177s!\000\000\000>\347\200\200\300\000\000\377\300\031;\273\234\330`\000\077\346\304D` \000\377|\021\307r<\030\000\000\203\3568\f\000\000\000\000\000\000\000\000\000\003\003\001\001\003\003\003\003\000\000\000\000\000\000\000\000\207\207\303\307\307\307\207\207\000\000\000\000\000\000\000\000\000\000\200\200\200\200\000\000\000\000\000\000\300\340`08\030\000\000\000\000\000\000\000\000\360\304\035\317\330p\000\000\017;\3420 \000\000\000\377\100\036\\\315o0\000\000\277\341\2432\020\000\000\377c\230\336\301\000\000\000\000\234g!\000\000\000\000\315\231\3330\200\330`\0002f\044\316| \000\000\360\304\035\317\3300\100\000\017;\3420 \300\200\000\377\100\036\\\315o0\000\000\277\341\2432\020\000\000\377c\230\336\301\000\000\000\000\234g!\000\000\000\000\315\231\3330\203\335b\0002f\044\317|\"\001\000\360\304\035\317X\260\200\000\017;\3420\240\100\100\000\377\100\036\\\315o0\000\000\277\341\2432\020\000\000\377c\230\337\316\002\001\000\000\234g \001\001\000\000\315\231\3331n\314\220\0002f\044\316\2200`\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000<|\370\370\370\374~><|\370\370x<\036\000\000\017\377\177\377\377\376\000\377\376\000\376\377\377\376\000<~\231\303\357\347v<\000\000\000\000\000\000\000\000\b\023/v\254\3300`\006\016\0348p\340\300\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\377\377\277\217\203\217\277\377\377\077Os}sO\077\377\377\277\217\303\217\277\377\377\077Os=sO\077\377\377\277\217\343\217\277\377\377\077Os\035sO\077\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000|\376\347\347\347\177>\000\0008!!!\003>\000\030<\034\034\034~\077\000\000\004\004\004\004\000\077\000|\376\177\177\374\376\177\000\0008a\a\034\000\177\000~\077<\036\307\177>\000\0007\000\030\001\003>\000\034>~\356\376\177\006\000\000\002\022\"\000s\006\000\374\376\374~\307\177>\000\000>\000x\001\003>\000|\376\374\376\347\177>\000\000>\0008!\003>\000\376\377o\036<8\030\000\0009c\006\f\b\030\000|\376\177\376\347\177>\000\0008\0038!\003>\000|\376\347\177\077\177>\000\0008!\0019\003>\0008|\366\347\377\377\347c\000\0200!\0019!c\374\376\347\377\376\347\377~\0008!\0038!\003~<~\363\340\340f\077\036\000\0303 \000\003\036\370\374\346\347\347\357\376|\0000 !!#\006|\376\377\340\374\376\340\376\177\000\077 \000> \000\177\376\377\340\374\376\340\340`\000\077 \000> `>\177\360\356\347g\077\037\000\0370 !\001\001\037\306\347\347\377\377\347\347c\000!!\0019!!c~\037\034\034\034\034~\077\000\a\004\004\004\004\000\077\036\a\a\a\307\347\177>\000\001\001\001\001!\003>\306\357\376\374\370\374\356g\000#&\f\000 g`ppppp~\077\000\020\020\020\020\020\000\077\306\357\377\377\377\357\347c\000\001\001\001))!c\306\347\367\377\377\357\347c\000\001\001\001!!!c|\376\347\347\347\347\177>\0008!!!!\003>\374\376\347\347\377\376\340`\0008!!\003> `|\376\347\347\377\357~=\0008!!!#\004=\374\376\347\357\377\374\356g\0008!!\a gx\374\346|>\307\177>\0000&\0008\001\003>~\037\034\034\034\034\034\f\000\a\004\004\004\004\004\f\306\347\347\347\347\347\177>\000!!!!!\003>\306\347\347\357\177>\034\b\000!!\001\003\006\f\b\306\347\367\377\377\377\367c\000!!\001\001\0211c\306\357\177>|\376\367c\000\001\003\006\000\0201cfww\077\034\034\034\f\000\021\021\003\004\004\004\f\376\177\037>|\370\376\177\000q\003\006\f\030\000\177\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\016\000~\377\377\3768\377\361\377\201\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\000\000\000\a\017\017\077\077\377\377\377\377\377\377\377\377\000\000\000\370\377\377\377\377\377\377\377\377\377\377\377\377\000\000\037\077\377\377\377\377\377\377\377\377\377\377\377\377\000\000\000\340\370\370\370\374\377\377\377\377\377\377\377\377\000\000\001\003\017\037\077\037\377\377\377\377\377\377\377\377\000\000\370\374\377\377\377\377\377\377\377\377\377\377\377\377\000\000\000\000\077\377\377\377\377\377\377\377\377\377\377\377\000\000\000\000\370\374\376\376\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\001\002\005\n\
\377\000\000\377\376\375\372\365\377\377\377\377\177\277_\257\377\177\037\017\207C\243Q\252U\252U\252U\252U\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\252U\252U\252U\252UU\252U\252U\252U\252\252U\252U\252U\252U\377\377\377\377\377\377\377\377\252U\252U\252U\252U\377\337\317\307\340\361\377\377\077\077\077\077\037\016\000\000\377\377\347\303\300\341\377\377\377\377\377\377\377\036\000\000\377\377\377\3777\017\377\377\377\377\377\377\376\360\000\000\377\377\377\077\237\307\343\377\376\376\377\377~>\034\000\377\363\360\370\377\377\377\377\017\017\017\a\000\000\000\000\377\377\3778\376\377\377\377\377\377\377\307\001\000\000\000\377\377\377\077\002\301\377\377\377\377\377\377\377>\000\000\377\377\377\377\037\317\377\377\376\376\376\374\3700\000\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\001\002\005\377\377\377\377\377\376\375\372\000\025*U\252U\252U\252\352\325\252U\252U\252UW\257W\257W\257W\257\251Q\251Q\251Q\251Q\377\377\377\377\377\377\377\377\000\000\000\000\003\077\177\177\377\377\377\377\377\377\377\377\000~\377\377\377\377\377\377\377\377\377\377\377\377\377\377\000\000\340\371\377\377\377\377\377\377\377\377\377\377\377\377\000\000\000\340\360\370\376\376\377\377\377\377\377\377\377\337\000\a\037\037\077\077\077\077\377\377\377\377\377\377\377\377\001\037\377\377\377\377\377\377\377\377\377\377\377\377\377\377\340\370\377\377\377\377\377\377\377\377\377\377\377\377\377\377\000\340\360\370\374\374\376\376\377\377\377\377\377\377\377\377\000\000\001\003\017\037\077\077\377\377\377\377\377\377\377\377\000\000\370\374\377\377\377\377\377\377\377\377\377\377\377\377\000\000\017\177\377\377\377\377\377\377\377\377\377\377\377\377\000\000\200\300\360\370\374\374\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\325\352\365\372\375\376\375\376*\025\n\
\005\002\001\002\001W\257W\257W\257W\257\251Q\251Q\251Q\251Q\337\307\340\377\377\377\377\377\077\077\037\000\000\000\000\000\377\377\077\037\300\370\377\377\377\377\377\377\077\a\000\000\377\377\377\370<\037\377\377\377\377\377\377\363\340\000\000\377\377\377\377\017\377\377\377\376\374\374\370\360\000\000\000\307\343\360\370\374\377\377\377\077\037\017\a\003\000\000\000\377\377\375\363\017\377\377\377\377\377\377\374\360\000\000\000\377\377\237\307\340\376\377\377\377\377\177\077\037\001\000\000\377\377\377\377\177\077\377\377\376\376\376\374\340\300\000\000\377\337\317\340\377\377\377\377\077\077\077\037\000\000\000\000\377\377\377\017\000\377\377\377\377\377\377\377\377\000\000\000\377\377\377\377>\217\377\377\377\377\377\377\377p\000\000\377\377\377\377\037\317\377\377\376\376\376\374\3700\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\375\376\375\376\375\376\375\376\002\001\002\001\002\001\002\001W\257W\257W\257W\257\251Q\251Q\251Q\251Q\377\370\373\373\370\373\373\373\377\377\377\377\377\377\377\377\377\177\277\251g\357\357\357\377\377\377\377\377\377\377\377\377\377\377\216u\006\177\214\377\377\377\377\377\377\377\377\377\377\377\030\3678\3370\377\377\377\377\377\377\377\377\377\376\375}\376\377}\376\377\377\377\377\377\377\377\377\3770\335\375=\335\335=\377\377\377\377\377\377\377\377\377c\335\335\301\335\335\335\377\377\377\377\377\377\377\377\377\fww\017_ow\377\377\377\377\377\377\377\377\377\037\177\177\177\177\177\177\377\377\377\377\377\377\377\377\377\217\267\273\273\273\266\217\377\377\377\377\377\377\377\377\377\377\377\033\355\016\356\t\377\377\377\377\377\377\377\377\377\377\377\276\276~\376\376\377\377\377\377\377\377\377\377\377\377\377\377\377\300\300\300\000\000\000\000\000\077\077\077\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\375\376\375\376\375\016\r\016\002\001\002\001\002\361\362\361W\257W\257W\257W\257\251Q\251Q\251Q\251Q\377\340\337\260\257\257\257\257\300\237 \100OOOO\377\000\377\000\377\377\377\377\000\377\000\000\377\377\377\377\377\a\373\r\365\365\365\365\003\371\004\002\362\362\362\362\377\377\277\034\273\273\253\334\377\377\377\377\377\377\377\377\377\377\377~\276\276\276~\377\377\377\377\377\377\377\377\377\371\375\035\355\035\375\370\377\377\377\377\377\377\377\377\377\377\377\306\373\303\273\302\377\377\377\377\377\377\377\377\377\377\377\357o\237\277\177\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\\\253\253\253\254\377\377\377\377\377\377\377\377\377\376\376r\254\256\256p\377\377\377\377\377\377\377\377\377\377\377\307\273\203\277\307\377\377\377\377\377\377\377\377\300\300\300\300\300\300\300\300\077\077\077\077\077\077\077\077\000\077\077\077\077\077\0770\377\300\300\300\300\300\300\317\r\016\r\016\r\376\375\016\362\361\362\361\362\001\002\361W\257W\257W\257W\257\251Q\251Q\251Q\251Q\257\257\257\257\257\257\257\257OOOOOOOO\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\365\365\365\365\365\365\365\365\362\362\362\362\362\362\362\362\377\273\273\233\253\263\273\273\377\377\377\377\377\377\377\377\377\277\3778\267\270\277\030\377\377\377\377\377\377\377\377\377\337\337SM]]\335\377\377\377\377\377\377\377\377\377\377\277\037\277\277\257\337\377\377\377\377\377\377\377\377\377\377\377\227\252\252\252\253\377\377\377\377\377\377\377\377\377\377\377\034\353\353\353\034\377\377\377\377\377\377\377\377\377\277\277\261.\240\2571\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\300\300\300\300\300\300\300\300\077\077\077\077\077\077\077\077000\077\077\000\000\000\317\317\317\300\300\377\377\377\r\016\r\016\r\016\r\016\362\361\362\361\362\361\362\361W\257W\257W\257W\257\251Q\251Q\251Q\251Q\257\257\257\257\260\337\340\377OOOO\100 \237\300\377\377\377\377\000\377\000\377\377\377\377\377\000\000\377\000\365\365\365\365\r\373\a\377\362\362\362\362\002\004\371\003\377\307\273\276\306\372\272\307\377\377\377\377\377\377\377\377\377\377\377\352\351\353\313+\377\377\377\377\377\377\377\377\377\377\377p\257\261\276\241\377\377\377\377\377\377\377\377\377\377\377\306\273\203\277\307\377\377\377\377\377\377\377\377\377\377\177\077\177\177_\277\377\377\377\377\377\377\377\377\377\377\377.UUUV\377\377\377\377\377\377\377\377\377\377\3779\326\327\3278\377\377\377\377\377\377\377\377\377\177\177c]A_c\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\300\300\300\300\300\377\377\377\077\077\077\077\077\000\000\377\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\377\r\016\r\016\r\377\377\377\362\361\362\361\362\000\000\377W\257W\257W\377\377\377\251Q\251Q\251\001\001\377\377\377\377\377\374\370\360\360\377\376\370\360\343\307\317\217\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\377\000\000\377\377\377\377\377\340\340\340\340\340\340\340\340\237\237\237\237\237\237\237\237\000\000\000\000\000\000\000\001\377\377\377\377\377\377\377\376\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\340\340\340\340\340\340\340\340\237\237\237\237\237\237\237\237\001\001\001\001\001\001\001\001\376\376\376\376\376\376\376\376\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\340\340\340\340\340\340\340\340\237\237\237\237\237\237\237\237\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\003\003\003\003\003\003\003\003\374\374\374\374\374\374\374\374\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\340\340\340\340\340\340\340\340\237\237\237\237\237\237\237\237\000\000\001\001\001\001\001\001\377\377\376\376\376\376\376\376\000\000\377\377\377\377\374\370\377\377\000\000\000\000\003\a\003\003\377\377\377\000\000\000\374\374\000\000\000\377\377\377\377\377\377\377\377\017\a\003\000\000\000\000\000\360\370\374\377\377\377\377\377\360\360\360\000\000\000\000\000\017\017\017\377\377\377\377\377\017\017\017\000\000\000\000\000\360\360\360\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\300\300\300\000\000\000\000\000\077\077\077\377\377\377\377\377\077\077\077\000\000\000\000\000\300\300\300\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\377\377\377\377\377\377\377\377\360\360\360\000\000\000\000\000\017\017\017\377\377\377\377\377\017\017\017\000\000\000\000\000\360\360\360\377\377\377\377\377\003\003\003\000\000\000\000\000\374\374\374\340\340\340\340\340\340\340\340\237\237\237\237\237\237\237\237\001\001\001\001\001\001\001\001\376\376\376\376\376\376\376\376\360\360\340\340\340\340\340\340\017\017\037\037\037\037\037\037\000\000\000\000\037\077\077\077\377\377\377\377\340\300\300\300\001\001\000\000\200\300\300\300\376\376\377\377\177\077\077\077\360\360\360\360\360\360\360\360\017\017\017\017\017\017\017\017\017\017\017\017\017\017\017\017\360\360\360\360\360\360\360\360\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\300\300\300\300\300\300\300\300\077\077\077\077\077\077\077\077\077\077\077\077\077\077\077\077\300\300\300\300\300\300\300\300\377\377\377\377\377\377\377\377\000\000\000\000\000\000\000\000\000\000\000\374\374\374\374\374\377\377\377\003\003\003\003\003\000\000\000\077\077\077\077\077\377\377\377\300\300\300\300\300\360\360\360\360\360\360\360\360\017\017\017\017\017\017\017\017\017\017\017\a\a\003\003\001\360\360\360\370\370\374\374\376\003\003\003\003\003\003\003\003\374\374\374\374\374\374\374\374\340\340\340\340\340\340\340\340\237\237\237\237\237\237\237\237\001\001\001\001\001\001\001\001\376\376\376\376\376\376\376\376\340\340\340\340\340\340\340\340\037\037\037\037\037\037\037\037\077\077\000\000\000\077\077\077\300\300\377\377\377\300\300\300\300\300\000\000\000\300\300\300\077\077\377\377\377\077\077\077\360\360\360\360\360\360\360\360\017\017\017\017\017\017\017\017\017\017\017\017\017\000\000\000\360\360\360\360\360\377\377\377\377\003\003\003\003\003\003\003\000\374\374\374\374\374\374\374\300\300\300\300\300\300\300\300\077\077\077\077\077\077\077\077\077<<<<\000\000\000\300\303\303\303\303\377\377\377\377\017\017\017\017\017\017\017\000\360\360\360\360\360\360\360\374\374\374\374\374\000\000\000\003\003\003\003\003\377\377\377\077\077\077\077\077\000\000\000\300\300\300\300\300\377\377\377\360\360\360\360\360\360\360\360\017\017\017\017\017\017\017\017\001\000\000\000\000\b\b\f\376\377\377\377\377\367\367\363\003\003\003\003\003\003\003\003\374\374\374\374\374\374\374\374\340\340\340\340\340\377\377\377\237\237\237\237\237\200\200\377\001\001\001\001\001\377\377\377\376\376\376\376\376\000\000\377\340\340\340\340\340\377\377\377\037\037\037\037\037\000\000\377\077\077\077\077\077\377\377\377\300\300\300\300\300\000\000\377\300\300\300\300\300\377\377\377\077\077\077\077\077\000\000\377\360\360\360\360\360\377\377\377\017\017\017\017\017\000\000\377\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\377\003\003\003\003\003\377\377\377\374\374\374\374\374\000\000\377\300\300\300\300\300\377\377\377\077\077\077\077\077\000\000\377\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\377\017\017\017\017\017\377\377\377\360\360\360\360\360\000\000\377\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\377\000\000\000\000\000\377\377\377\377\377\377\377\377\000\000\377\360\360\360\360\360\377\377\377\017\017\017\017\017\000\000\377\f\016\016\017\017\377\377\377\363\361\361\360\360\000\000\377\003\003\003\003\003\377\377\377\374\374\374\374\374\000\000\377";

104 c⁄° 
size_t
 
	gÁŒög_√s_Àn
 = (
ÁŒög_√s
) - 1;

	@tests/fcalc.c

14 
	$fˇlc
(c⁄° **
°r
, *
îr
, 
_
)

16 
_
) {

18 c⁄° *
°r1
 = *
°r
;

19 
îr1
 = 0;

20 
ªt
 = 
	`fˇlc
(&
°r1
, &
îr1
, 1);

21 *
°r1
 != 0) {

22 i‡(*
°r1
 != ' ' && *str1 != '\n')

23 
îr1
 = 1;

24 
°r1
++;

26 i‡(
îr
)

27 *
îr
 = 
îr1
;

28  
ªt
;

30 **
°r
 == ' ')

31 (*
°r
)++;

32 **
°r
) {

34 (*
°r
)++;

35  -
	`fˇlc
(
°r
, 
îr
, -1);

37 (*
°r
)++;

38 
ªt
 = 
	`fˇlc
(
°r
, 
îr
, 1);

39 i‡(**
°r
 != ')') {

40 *
îr
 = -1;

43 (*
°r
)++;

44  
ªt
;

56 
_
 = 0;

57 
dig
 = 0.0, 
bak
 = 1.0;

59 i‡(**
°r
 == '.') {

60 
_
 = 1;

61 (*
°r
)++;

63 i‡(!(**
°r
 >= '0' && **str <= '9'))

65 i‡(
_
 == 1)

66 
bak
 /= 10.0;

67 
dig
 = dig * 10.0 + (**
°r
 - '0');

68 (*
°r
)++;

70  
dig
 * 
bak
;

73 (*
°r
)++;

74 i‡(**
°r
 != 'i' && **str != 'I') {

75 *
îr
 = -1;

78 (*
°r
)++;

81 *
îr
 = -1;

85 
lhs
 = 
	`fˇlc
(
°r
, 
îr
, -1);

86 i‡(*
îr
)

89 **
°r
 == ' ')

90 (*
°r
)++;

91 
	#BINOP
(
sym
, 
¥ec
, 
›
) \

92 i‡(
¥ec
 >
_
 && **
°r
 =
sym
) { \

93 (*
°r
)++; \

94 
rhs
 = 
	`fˇlc
(
°r
, 
îr
, (
¥ec
 + 1)); \

95 i‡(*
îr
) \

97 
›
; \

98 }

	)

100 
	`BINOP
('+', 1, 
lhs
 +
rhs
)

101 
	`BINOP
('-', 1, 
lhs
 -
rhs
)

102 
	`BINOP
('*', 2, 
lhs
 *
rhs
)

103 
	`BINOP
('/', 2, 
lhs
 /
rhs
)

104  
lhs
;

106 #unde‡
BINOP


109 
	}
}

111 
	~<°dio.h
>

113 c⁄° 
	gEPSILON
 = 0.00001;

115 
	gÁûs
, 
	gtŸÆ
;

117 
	$ã°
(c⁄° *
«me
, c⁄° *
°r
, 
î
, 
ì
)

119 
tŸÆ
++;

120 
e
;

121 
r
 = 
	`fˇlc
(&
°r
, &
e
, 0);

122 
dr
 = 
r
 - 
î
;

123 i‡((
dr
 > 0.0 ? d∏: -drË> 
EPSILON
 || 
e
 !
ì
) {

124 
	`¥ötf
("Te° '%s' faûed; Ex≥˘ed %f/%d, gŸ %f/%d\n", 
«me
, 
î
, 
ì
, 
r
,

125 
e
);

126 
Áûs
++;

128 
	}
}

130 
	$maö
()

132 
	`ã°
("Integer", "11", 11, 0);

133 
	`ã°
("RealÇumber", "11.32", 11.32, 0);

134 
	`ã°
("Sub-0-Real", ".32", 0.32, 0);

135 
	`ã°
("Negation", "-42", -42, 0);

136 
	`ã°
("Addition", "1.2 + 5", 6.2, 0);

137 
	`ã°
("Subtraction", "3 - 1.4", 1.6, 0);

138 
	`ã°
("Multiplication", "10 * 5", 50, 0);

139 
	`ã°
("Division", "50 / 10", 5, 0);

140 
	`ã°
("Precedence", "3 - 2 * 5", -7, 0);

141 
	`ã°
("Pi", "pi", 3.14159265358979, 0);

142 
	`ã°
("Parentheses", "3 * (1 + 2)", 9, 0);

143 
	`ã°
("Unmatched (", "(1 + 2", 0.0, -1);

144 
	`¥ötf
("Pîf‹med %dÅe°s, %d faûuªs, %d%% suc˚s†øã.\n", 
tŸÆ
,

145 
Áûs
, 100 - faû†* 100 / 
tŸÆ
);

147  
Áûs
 == 0 ? 0 : -1;

148 
	}
}

	@tests/fenster.h

30 #i‚de‡
FENSTER_H


31 
	#FENSTER_H


	)

33 
	~<°döt.h
>

34 
	~<°dlib.h
>

35 
	~<°rög.h
>

36 
	~<time.h
>

38 
	s„n°î
 {

39 c⁄° *
	mtôÀ
;

40 c⁄° 
	mwidth
, 
	mheight
;

41 
uöt32_t
 *
	mbuf
;

42 
	mkeys
[256];

43 
	mmod
;

44 
	mx
, 
	my
;

45 
	mmou£
;

46 *
	mevít_queue
;

47 
uöt32_t
 
	mevít_cou¡
;

48 
size_t
 
	mevít_queue_°¨t
;

51 #i‚de‡
FENSTER_API


52 
	#FENSTER_API
 

	)

54 
FENSTER_API
 
„n°î_›í
(
„n°î
 *
f
);

55 
FENSTER_API
 
„n°î_lo›
(
„n°î
 *
f
);

56 
FENSTER_API
 
„n°î_˛o£
(
„n°î
 *
f
);

57 
FENSTER_API
 
„n°î_¶ìp
(
öt64_t
 
ms
);

58 
FENSTER_API
 
öt64_t
 
„n°î_time
();

59 
	#„n°î_pixñ
(
f
, 
x
, 
y
Ë((f)->
buf
[((yË* (f)->
width
Ë+ (x)])

	)

61 #i‚de‡
FENSTER_HEADER


62 
	#RV_QUEUE_CAPACITY
 128

	)

65 
	mRV_KEYCODE_RETURN
 = 0x0000000D,

66 
	mRV_KEYCODE_UP
 = 0x40000052,

67 
	mRV_KEYCODE_DOWN
 = 0x40000051,

68 
	mRV_KEYCODE_RIGHT
 = 0x4000004F,

69 
	mRV_KEYCODE_LEFT
 = 0x40000050,

70 
	mRV_KEYCODE_LCTRL
 = 0x400000E0,

71 
	mRV_KEYCODE_RCTRL
 = 0x400000E4,

72 
	mRV_KEYCODE_LSHIFT
 = 0x400000E1,

73 
	mRV_KEYCODE_RSHIFT
 = 0x400000E5,

74 
	mRV_KEYCODE_LALT
 = 0x400000E2,

75 
	mRV_KEYCODE_RALT
 = 0x400000E6,

76 
	mRV_KEYCODE_LMETA
 = 0x400000E3,

77 
	mRV_KEYCODE_RMETA
 = 0x400000E7,

81 
uöt32_t
 
	mkeycode
;

82 
uöt8_t
 
	m°©e
;

83 
uöt16_t
 
	mmod
;

84 } 
	trv_key_rv_evít_t
;

87 
öt32_t
 
	mx
, 
	my
, 
	mxªl
, 
	myªl
;

88 } 
	trv_mou£_mŸi⁄_t
;

91 
	mRV_MOUSE_BUTTON_LEFT
 = 1,

95 
uöt8_t
 
	mbuâ⁄
;

96 
uöt8_t
 
	m°©e
;

97 } 
	trv_mou£_buâ⁄_t
;

100 
	mRV_KEY_EVENT
 = 0,

101 
	mRV_MOUSE_MOTION_EVENT
 = 1,

102 
	mRV_MOUSE_BUTTON_EVENT
 = 2,

103 
	mRV_QUIT_EVENT
 = 3,

107 
uöt32_t
 
	mty≥
;

109 
rv_key_rv_evít_t
 
	mkey_evít
;

111 
rv_mou£_mŸi⁄_t
 
	mmŸi⁄
;

112 
rv_mou£_buâ⁄_t
 
	mbuâ⁄
;

113 } 
	mmou£
;

115 } 
	trv_evít_t
;

118 
	mRV_RELATIVE_MODE_SUBMISSION
 = 0,

119 
	mRV_WINDOW_TITLE_SUBMISSION
 = 1,

123 
uöt8_t
 
	míabÀd
;

124 } 
	trv_mou£_rv_submissi⁄_t
;

127 
uöt32_t
 
	mtôÀ
;

128 
uöt32_t
 
	msize
;

129 } 
	trv_tôÀ_rv_submissi⁄_t
;

132 
uöt32_t
 
	mty≥
;

134 
rv_mou£_rv_submissi⁄_t
 
	mmou£
;

135 
rv_tôÀ_rv_submissi⁄_t
 
	mtôÀ
;

137 } 
	trv_submissi⁄_t
;

139 
FENSTER_API
 
	$„n°î_›í
(
„n°î
 *
f
)

141 
f
->
evít_queue
 = 
	`mÆloc
(((
rv_evít_t
Ë+ (
rv_submissi⁄_t
)) *

142 
RV_QUEUE_CAPACITY
);

143 
f
->
evít_cou¡
 = 0;

144 
a0
 
	`__asm
("a0"Ë(Ë
f
->
evít_queue
;

145 
a1
 
	`__asm
("a1"Ë
RV_QUEUE_CAPACITY
;

146 
a2
 
	`__asm
("a2"Ë(Ë&
f
->
evít_cou¡
;

147 
a7
 
	`__asm
("a7") = 0xc0de;

148 
__asm
 vﬁ©ûe("sˇŒ" : : "r"(
a0
), "r"(
a1
), "r"(
a2
), "r"(
a7
) : "memory");

149 
f
->
evít_queue_°¨t
 = 0;

151 
rv_submissi⁄_t
 
submissi⁄
 = {

152 .
ty≥
 = 
RV_WINDOW_TITLE_SUBMISSION
,

153 .
tôÀ
.tôÀ = (
uöt32_t
Ë
f
->title,

154 .
tôÀ
.
size
 = 
	`°æí
(
f
->title),

156 
rv_submissi⁄_t
 *
submissi⁄_queue
 =

157 (
rv_submissi⁄_t
 *Ë((
rv_evít_t
 *Ë
f
->
evít_queue
 + 
RV_QUEUE_CAPACITY
);

158 
submissi⁄_queue
[0] = 
submissi⁄
;

159 
a0
 = 1;

160 
a7
 = 0xfeed;

161 
__asm
 vﬁ©ûe("sˇŒ" : : "r"(
a0
), "r"(
a7
) : "memory");

164 
	}
}

166 
FENSTER_API
 
	$„n°î_˛o£
(
„n°î
 *
f
)

168 
	`‰ì
(
f
->
evít_queue
);

169 
	}
}

171 
FENSTER_API
 
	$„n°î_lo›
(
„n°î
 *
f
)

173 ; 
f
->
evít_cou¡
 > 0; f->event_count--) {

174 
rv_evít_t
 
evít
 =

175 ((
rv_evít_t
 *Ë
f
->
evít_queue
)[f->
evít_queue_°¨t
];

176 
evít
.
ty≥
) {

177 
RV_KEY_EVENT
: {

178 
uöt32_t
 
keycode
 = 
evít
.
key_evít
.keycode;

179 
uöt8_t
 
°©e
 = 
evít
.
key_evít
.state;

181 i‡(
keycode
 =
RV_KEYCODE_RETURN
)

182 
f
->
keys
[10] = 
°©e
;

183 i‡(
keycode
 < 128)

184 
f
->
keys
[
keycode
] = 
°©e
;

186 i‡(
keycode
 =
RV_KEYCODE_UP
)

187 
f
->
keys
[17] = 
°©e
;

188 i‡(
keycode
 =
RV_KEYCODE_DOWN
)

189 
f
->
keys
[18] = 
°©e
;

190 i‡(
keycode
 =
RV_KEYCODE_RIGHT
)

191 
f
->
keys
[19] = 
°©e
;

192 i‡(
keycode
 =
RV_KEYCODE_LEFT
)

193 
f
->
keys
[20] = 
°©e
;

195 i‡(
keycode
 =
RV_KEYCODE_LCTRL
 || keycodê=
RV_KEYCODE_RCTRL
)

196 
f
->
mod
 = 
°©e
 ? f->mod | 1 : f->mod & 0b1110;

197 i‡(
keycode
 =
RV_KEYCODE_LSHIFT
 || keycodê=
RV_KEYCODE_RSHIFT
)

198 
f
->
mod
 = 
°©e
 ? f->mod | 2 : f->mod & 0b1101;

199 i‡(
keycode
 =
RV_KEYCODE_LALT
 || keycodê=
RV_KEYCODE_RALT
)

200 
f
->
mod
 = 
°©e
 ? f->mod | 4 : f->mod & 0b1011;

201 i‡(
keycode
 =
RV_KEYCODE_LMETA
 || keycodê=
RV_KEYCODE_RMETA
)

202 
f
->
mod
 = 
°©e
 ? f->mod | 8 : f->mod & 0b0111;

206 
RV_MOUSE_MOTION_EVENT
:

207 
f
->
x
 = 
evít
.
mou£
.
mŸi⁄
.x;

208 
f
->
y
 = 
evít
.
mou£
.
mŸi⁄
.y;

210 
RV_MOUSE_BUTTON_EVENT
:

211 i‡(
evít
.
mou£
.
buâ⁄
.buâ⁄ =
RV_MOUSE_BUTTON_LEFT
)

212 
f
->
mou£
 = 
evít
.mou£.
buâ⁄
.
°©e
;

214 
RV_QUIT_EVENT
:

217 
f
->
evít_queue_°¨t
 =

218 (
f
->
evít_queue_°¨t
 + 1Ë& (
RV_QUEUE_CAPACITY
 - 1);

221 
a0
 
	`__asm
("a0"Ë(
uöçå_t
Ë
f
->
buf
;

222 
a1
 
	`__asm
("a1"Ë
f
->
width
;

223 
a2
 
	`__asm
("a2"Ë
f
->
height
;

224 
a7
 
	`__asm
("a7") = 0xbeef;

225 
__asm
 vﬁ©ûe("sˇŒ" : : "r"(
a0
), "r"(
a1
), "r"(
a2
), "r"(
a7
) : "memory");

227 
	}
}

229 #unde‡
RV_QUEUE_CAPACITY


231 
FENSTER_API
 
öt64_t
 
	$„n°î_time
()

233  (
öt64_t
Ë
	`˛ock
(Ë/ (
CLOCKS_PER_SEC
 / 1000.0f);

234 
	}
}

235 
FENSTER_API
 
	$„n°î_¶ìp
(
öt64_t
 
ms
)

237 
öt64_t
 
°¨t
 = 
	`„n°î_time
();

238 
	`„n°î_time
(Ë- 
°¨t
 < 
ms
)

240 
	}
}

242 #ifde‡
__˝lu•lus


243 ˛as†
	cFí°î


245 
„n°î
 
	mf
;

246 
öt64_t
 
	mnow
;

248 
	mpublic
:

249 
	$Fí°î
(c⁄° 
w
, c⁄° 
h
, c⁄° *
tôÀ
)

250 : 
f
{.
tôÀ
 =ÅôÀ, .
width
 = 
w
, .
height
 = 
h
}

252 
this
->
f
.
buf
 = 
√w
 
uöt32_t
[
w
 * 
h
];

253 
this
->
now
 = 
	`„n°î_time
();

254 
	`„n°î_›í
(&
this
->
f
);

255 
	}
}

256 ~
	$Fí°î
()

258 
	`„n°î_˛o£
(&
this
->
f
);

259 
dñëe
[] 
this
->
f
.
buf
;

260 
	}
}

261 
boﬁ
 
	$lo›
(c⁄° 
Âs
)

263 
öt64_t
 
t
 = 
	`„n°î_time
();

264 i‡(
t
 - 
this
->
now
 < 1000 / 
Âs
) {

265 
	`„n°î_¶ìp
(
t
 - 
now
);

267 
this
->
now
 = 
t
;

268  
	`„n°î_lo›
(&
this
->
f
) == 0;

269 
	}
}

270 
ölöe
 
	guöt32_t
 &
	$px
(c⁄° 
x
, c⁄° 
y
)

272  
	`„n°î_pixñ
(&
this
->
f
, 
x
, 
y
);

273 
	}
}

274 
boﬁ
 
	$key
(
c
Ë{  c >0 && c < 128 ? 
this
->
f
.
keys
[c] : 
Ál£
; 
	}
}

275 
	$x
(Ë{  
this
->
f
.
x
; 
	}
}

276 
	$y
(Ë{  
this
->
f
.
y
; 
	}
}

277 
	$mou£
(Ë{  
this
->
f
.
mou£
; 
	}
}

278 
	$mod
(Ë{  
this
->
f
.
mod
; 
	}
}

293 
	~"„n°î.h
"

294 íum { 
	mW
 = 320, 
	mH
 = 240 };

295 
	$maö
()

297 
uöt32_t
 
buf
[
W
 * 
H
];

298 
„n°î
 
f
 = {.
tôÀ
 = "hñlo", .
width
 = 
W
, .
height
 = 
H
, .
buf
 = buf};

299 
	`„n°î_›í
(&
f
);

300 
uöt32_t
 
t
 = 0;

301 
	`„n°î_lo›
(&
f
) == 0) {

302 
t
++;

303 
i
 = 0; i < 320; i++) {

304 
j
 = 0; j < 240; j++)

305 
	`„n°î_pixñ
(&
f
, 
i
, 
j
Ëò^ j ^ 
t
;

307 
	`„n°î_¶ìp
(100);

309 
	`„n°î_˛o£
(&
f
);

311 
	}
}

	@tests/hamilton.c

25 
	~<as£π.h
>

26 
	~<öây≥s.h
>

27 
	~<°dboﬁ.h
>

28 
	~<°döt.h
>

29 
	~<°dio.h
>

30 
	~<°dlib.h
>

31 
	~<°rög.h
>

33 
uöt64_t
 
	tu64
;

34 
uöt32_t
 
	tu32
;

35 
uöt8_t
 
	tu8
;

36 
öt8_t
 
	ts8
;

39 
u32
 
	gx_bôs
 = 13, 
	gy_bôs
 = 11;

40 
u32
 
	gr_bôs
 = 8, 
	gg_bôs
 = 8, 
	gb_bôs
 = 8;

43 
ölöe
 
u32
 
	$x_•™
()

45  1 << 
x_bôs
;

46 
	}
}

49 
ölöe
 
u32
 
	$y_•™
()

51  1 << 
y_bôs
;

52 
	}
}

55 
ölöe
 
u32
 
	$pixñs
()

57  
	`x_•™
(Ë* 
	`y_•™
();

58 
	}
}

61 
ölöe
 
u32
 
	$r_•™
()

63  1 << 
r_bôs
;

64 
	}
}

67 
ölöe
 
u32
 
	$g_•™
()

69  1 << 
g_bôs
;

70 
	}
}

73 
ölöe
 
u32
 
	$b_•™
()

75  1 << 
b_bôs
;

76 
	}
}

79 
ölöe
 
u32
 
	$cﬁ‹s
()

81  
	`r_•™
(Ë* 
	`g_•™
(Ë* 
	`b_•™
();

82 
	}
}

85 
ölöe
 
u32
 
	$bf_com¥ess
(
u32
 
vÆue
, u32 
ba£_ödex
, u32 
width
)

87  (
vÆue
 & ((1 << 
width
Ë- 1)Ë<< 
ba£_ödex
;

88 
	}
}

91 
ölöe
 
u32
 
	$bf_exåa˘
(
u32
 
vÆue
, u32 
ba£_ödex
, u32 
width
)

93  (
vÆue
 >> 
ba£_ödex
Ë& ((1 << 
width
) - 1);

94 
	}
}

97 
u8
 
	tsign_Êag
;

99 íum { 
	mSIGN_FLAG_POS
 = 0, 
	mSIGN_FLAG_NEG
 = 1 };

102 
ölöe
 
	$sign_Êag_to_öt
(
sign_Êag
 
sf
)

104  ((Ë
sf
) * -2 + 1;

105 
	}
}

108 
u8
 
	taxis
;

110 íum { 
	mAXIS_X
 = 0, 
	mAXIS_Y
, 
	mAXIS_Z
 };

113 
u32
 
	$axis_•™_squ¨e
(
axis
 
ax
)

115  (
ax
 =
AXIS_X
Ë? 
	`x_•™
(Ë: 
	`y_•™
();

116 
	}
}

119 
u32
 
	$axis_•™_cube
(
axis
 
ax
)

121  (
ax
 =
AXIS_X
Ë? 
	`r_•™
(Ë: (ax =
AXIS_Y
Ë? 
	`g_•™
(Ë: 
	`b_•™
();

122 
	}
}

125 
u8
 
	taxis_Êag
;

128 
u8
 
	tdú
;

129 
	#DIR_PX
 
	`dú_make
(
SIGN_FLAG_POS
, 
AXIS_X
)

	)

130 
	#DIR_NX
 
	`dú_make
(
SIGN_FLAG_NEG
, 
AXIS_X
)

	)

131 
	#DIR_PY
 
	`dú_make
(
SIGN_FLAG_POS
, 
AXIS_Y
)

	)

132 
	#DIR_NY
 
	`dú_make
(
SIGN_FLAG_NEG
, 
AXIS_Y
)

	)

133 
	#DIR_PZ
 
	`dú_make
(
SIGN_FLAG_POS
, 
AXIS_Z
)

	)

134 
	#DIR_NZ
 
	`dú_make
(
SIGN_FLAG_NEG
, 
AXIS_Z
)

	)

135 
	#DIR_INVALID
 (
DIR_NZ
 + 1)

	)

138 
ölöe
 
dú
 
	$dú_make
(
sign_Êag
 
sf
, 
axis
 
ax
)

140  
ax
 * 2 + 
sf
;

141 
	}
}

144 
ölöe
 
dú
 
	$dú_axis
(
dú
 
d
)

146  
d
 >> 1;

147 
	}
}

150 
ölöe
 
sign_Êag
 
	$dú_sign_Êag
(
u8
 
d
)

152  
d
 & 1;

153 
	}
}

156 
ölöe
 
dú
 
	$dú_övît
(
dú
 
d
)

158  
	`dú_make
(!
	`dú_sign_Êag
(
d
), 
	`dú_axis
(d));

159 
	}
}

162 
u8
 
	tdú_Êag
;

165 
ölöe
 
dú_Êag
 
	$dú_to_dú_Êag
(
dú
 
d
)

167  1 << 
d
;

168 
	}
}

171 
u32
 
	tsq_poöt
;

174 
u32
 
	tsq_hpoöt
;

177 
u32
 
	tcb_poöt
;

180 
u32
 
	tcb_hpoöt
;

183 
sq_poöt
 
	$sq_poöt_make
(
u32
 
x
, u32 
y
)

185  
	`bf_com¥ess
(
x
, 0, 
x_bôs
Ë| bf_com¥ess(
y
, x_bôs, 
y_bôs
);

186 
	}
}

189 
sq_hpoöt
 
	$sq_hpoöt_make
(
u32
 
x
, u32 
y
)

191  
	`bf_com¥ess
(
x
 >> 1, 0, 
x_bôs
 - 1) |

192 
	`bf_com¥ess
(
y
 >> 1, 
x_bôs
 - 1, 
y_bôs
 - 1);

193 
	}
}

196 
u32
 
	$sq_poöt_x
(
sq_poöt
 
±
)

198  
	`bf_exåa˘
(
±
, 0, 
x_bôs
);

199 
	}
}

202 
u32
 
	$sq_hpoöt_x
(
sq_hpoöt
 
±
)

204  
	`bf_exåa˘
(
±
, 0, 
x_bôs
 - 1) << 1;

205 
	}
}

208 
u32
 
	$sq_poöt_y
(
sq_poöt
 
±
)

210  
	`bf_exåa˘
(
±
, 
x_bôs
, 
y_bôs
);

211 
	}
}

214 
u32
 
	$sq_hpoöt_y
(
sq_hpoöt
 
±
)

216  
	`bf_exåa˘
(
±
, 
x_bôs
 - 1, 
y_bôs
 - 1) << 1;

217 
	}
}

220 
u32
 
	$sq_poöt_add_dú
(
sq_poöt
 
±
, 
dú
 
d
)

222 
sign
 = 
	`sign_Êag_to_öt
(
	`dú_sign_Êag
(
d
));

223  
	`sq_poöt_make
(
	`sq_poöt_x
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_X
Ë* 
sign
,

224 
	`sq_poöt_y
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_Y
Ë* 
sign
);

225 
	}
}

228 
sq_hpoöt
 
	$sq_hpoöt_add_dú
(
sq_hpoöt
 
±
, 
dú
 
d
)

230 
sign
 = 
	`sign_Êag_to_öt
(
	`dú_sign_Êag
(
d
));

231  
	`sq_hpoöt_make
(
	`sq_hpoöt_x
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_X
Ë* 
sign
 * 2,

232 
	`sq_hpoöt_y
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_Y
Ë* 
sign
 * 2);

233 
	}
}

236 
u32
 
	$sq_hpoöt_gë_axis
(
sq_hpoöt
 
±
, 
axis
 
ax
)

238  (
ax
 =
AXIS_X
Ë? 
	`sq_hpoöt_x
(
±
Ë: 
	`sq_hpoöt_y
(pt);

239 
	}
}

242 
cb_poöt
 
	$cb_poöt_make
(
u32
 
r
, u32 
g
, u32 
b
)

244  
	`bf_com¥ess
(
r
, 0, 
r_bôs
Ë| bf_com¥ess(
g
,Ñ_bôs, 
g_bôs
) |

245 
	`bf_com¥ess
(
b
, 
r_bôs
 + 
g_bôs
, 
b_bôs
);

246 
	}
}

249 
cb_hpoöt
 
	$cb_hpoöt_make
(
u32
 
r
, u32 
g
, u32 
b
)

251  
	`bf_com¥ess
(
r
 >> 1, 0, 
r_bôs
 - 1) |

252 
	`bf_com¥ess
(
g
 >> 1, 
r_bôs
 - 1, 
g_bôs
 - 1) |

253 
	`bf_com¥ess
(
b
 >> 1, (
r_bôs
 - 1 + 
g_bôs
 - 1), 
b_bôs
 - 1);

254 
	}
}

257 
u32
 
	$cb_poöt_r
(
cb_poöt
 
±
)

259  
	`bf_exåa˘
(
±
, 0, 
r_bôs
);

260 
	}
}

263 
u32
 
	$cb_hpoöt_r
(
cb_hpoöt
 
±
)

265  
	`bf_exåa˘
(
±
, 0, 
r_bôs
 - 1) << 1;

266 
	}
}

269 
u32
 
	$cb_poöt_g
(
cb_poöt
 
±
)

271  
	`bf_exåa˘
(
±
, 
r_bôs
, 
g_bôs
);

272 
	}
}

275 
ölöe
 
u32
 
	$cb_hpoöt_g
(
cb_hpoöt
 
±
)

277  
	`bf_exåa˘
(
±
, 
r_bôs
 - 1, 
g_bôs
 - 1) << 1;

278 
	}
}

281 
ölöe
 
u32
 
	$cb_poöt_b
(
cb_poöt
 
±
)

283  
	`bf_exåa˘
(
±
, 
r_bôs
 + 
g_bôs
, 
b_bôs
);

284 
	}
}

287 
ölöe
 
u32
 
	$cb_hpoöt_b
(
cb_hpoöt
 
±
)

289  
	`bf_exåa˘
(
±
, 
r_bôs
 - 1 + 
g_bôs
 - 1, 
b_bôs
 - 1) << 1;

290 
	}
}

293 
u32
 
	$cb_poöt_add_dú
(
cb_poöt
 
±
, 
dú
 
d
)

295 
sign
 = 
	`sign_Êag_to_öt
(
	`dú_sign_Êag
(
d
));

296  
	`cb_poöt_make
(
	`cb_poöt_r
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_X
Ë* 
sign
,

297 
	`cb_poöt_g
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_Y
Ë* 
sign
,

298 
	`cb_poöt_b
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_Z
Ë* 
sign
);

299 
	}
}

302 
u32
 
	$cb_hpoöt_add_dú
(
cb_hpoöt
 
±
, 
dú
 
d
)

304 
sign
 = 
	`sign_Êag_to_öt
(
	`dú_sign_Êag
(
d
));

305  
	`cb_hpoöt_make
(
	`cb_hpoöt_r
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_X
Ë* 
sign
 * 2,

306 
	`cb_hpoöt_g
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_Y
Ë* 
sign
 * 2,

307 
	`cb_hpoöt_b
(
±
Ë+ (
	`dú_axis
(
d
Ë=
AXIS_Z
Ë* 
sign
 * 2);

308 
	}
}

311 
u32
 
	$cb_hpoöt_gë_axis
(
cb_hpoöt
 
±
, 
axis
 
ax
)

313  (
ax
 =
AXIS_X
Ë? 
	`cb_hpoöt_r
(
±
)

314 : (
ax
 =
AXIS_Y
Ë? 
	`cb_hpoöt_g
(
±
)

315 : 
	`cb_hpoöt_b
(
±
);

316 
	}
}

319 
u32
 
	tnode_id
;

320 
	sedge
 {

321 
node_id
 
	m‰om
;

322 
node_id
 
	mto
;

323 } 
	tedge
;

326 
edge
 
	$edge_make
(
node_id
 
‰om
,Çode_id 
to
)

328 
edge
 
out
 = {.
‰om
 = from, .
to
 =Åo};

329  
out
;

330 
	}
}

333 
	$edges_s‹t
(
edge
 *
edges
,

334 
u32
 *
weights
,

335 
u32
 
‰om
,

336 
u32
 
to
,

337 
edge
 *
edges_èrgë
,

338 
u32
 *
weights_èrgë
)

340 i‡((sig√dË
to
 - 
‰om
 <= 1)

343 
u32
 
mid
 = (
‰om
 + 
to
) / 2;

344 
	`edges_s‹t
(
edges_èrgë
, 
weights_èrgë
, 
‰om
, 
mid
, 
edges
, 
weights
);

345 
	`edges_s‹t
(
edges_èrgë
, 
weights_èrgë
, 
mid
, 
to
, 
edges
, 
weights
);

346 
u32
 
À·
 = 
‰om
;

347 
u32
 
right
 = 
mid
;

348 
u32
 
i
 = 
À·
;

349 ; 
i
 < 
to
 && 
À·
 < 
mid
 && 
right
 <Åo; i++) {

350 i‡(
weights
[
À·
] <weights[
right
]) {

351 
weights_èrgë
[
i
] = 
weights
[
À·
];

352 
edges_èrgë
[
i
] = 
edges
[
À·
];

353 
À·
++;

355 
weights_èrgë
[
i
] = 
weights
[
right
];

356 
edges_èrgë
[
i
] = 
edges
[
right
];

357 
right
++;

360 i‡(
À·
 < 
mid
) {

361 
	`memmove
(&
weights_èrgë
[
i
], &
weights
[
À·
], (
mid
 -Üe·Ë* (
u32
));

362 
	`memmove
(&
edges_èrgë
[
i
], &
edges
[
À·
], (
mid
 -Üe·Ë* (
edge
));

363 } i‡(
right
 < 
to
) {

364 
	`memmove
(&
weights_èrgë
[
i
], &
weights
[
right
],

365 (
to
 - 
right
Ë* (
u32
));

366 
	`memmove
(&
edges_èrgë
[
i
], &
edges
[
right
], (
to
 -ÑightË* (
edge
));

368 
	}
}

371 
	sdsu
 {

372 
node_id
 *
	m∑ª¡
;

373 
u32
 *
	mønk
;

374 } 
	tdsu
;

377 
	$dsu_öô
(
dsu
 *
d
, 
node_id
 
max_node
)

379 
d
->
∑ª¡
 = 
	`mÆloc
((
node_id
Ë* 
max_node
);

380 
d
->
ønk
 = 
	`mÆloc
((
u32
Ë* 
max_node
);

381 
	`as£π
(
d
->
∑ª¡
 && d->
ønk
);

382 
node_id
 
i
 = 0; i < 
max_node
; i++)

383 
d
->
∑ª¡
[
i
] = i, d->
ønk
[i] = 1;

384 
	}
}

387 
	$dsu_de°roy
(
dsu
 *
d
)

389 
	`‰ì
(
d
->
∑ª¡
);

390 
	`‰ì
(
d
->
ønk
);

391 
	}
}

394 
node_id
 
	$dsu_föd
(
dsu
 *
d
, 
node_id
 
node
)

396 
node_id
 
roŸ
 = 
node
;

398 
	#DSU_JIT_METHOD
 0

	)

399 #i‡
DSU_JIT_METHOD
 == 0

401 
d
->
∑ª¡
[
roŸ
] !=Ñoot)

403 
roŸ
 = 
d
->
∑ª¡
[root];

404 
d
->
∑ª¡
[
node
] !
roŸ
) {

406 
node_id
 
∑ª¡
 = 
d
->∑ª¡[
node
];

407 
d
->
∑ª¡
[
node
] = 
roŸ
;

408 
node
 = 
∑ª¡
;

410 #ñi‡
DSU_JIT_METHOD
 == 1

412 
d
->
∑ª¡
[
roŸ
] !=Ñoot) {

413 
node_id
 
∑ª¡
 = 
d
->∑ª¡[
roŸ
], 
gønd∑ª¡
 = d->parent[parent];

414 
d
->
∑ª¡
[
roŸ
] =Ö¨ít, d->∑ª¡[∑ª¡] = 
gønd∑ª¡
;

415 
roŸ
 = 
∑ª¡
;

417 #ñi‡
DSU_JIT_METHOD
 == 2

419 
d
->
∑ª¡
[
roŸ
] !=Ñoot) {

420 
node_id
 
∑ª¡
 = 
d
->∑ª¡[
roŸ
], 
gønd∑ª¡
 = d->parent[parent];

421 
d
->
∑ª¡
[∑ª¡] = 
gønd∑ª¡
;

422 
d
->
∑ª¡
[
roŸ
] = 
gønd∑ª¡
;

423 
roŸ
 = 
gønd∑ª¡
;

427  
roŸ
;

428 
	}
}

431 
	$dsu_roŸ_uni⁄
(
dsu
 *
d
, 
node_id
 
roŸ_x
,Çode_id 
roŸ_y
)

434 
	`as£π
(
roŸ_x
 !
roŸ_y
);

435 i‡(
d
->
ønk
[
roŸ_x
] < d->ønk[
roŸ_y
]) {

437 
node_id
 
ãmp
 = 
roŸ_x
;

438 
roŸ_x
 = 
roŸ_y
;

439 
roŸ_y
 = 
ãmp
;

441 
d
->
∑ª¡
[
roŸ_y
] = 
roŸ_x
;

442 i‡(
d
->
ønk
[
roŸ_x
] =d->ønk[
roŸ_y
])

443 
d
->
ønk
[
roŸ_x
] += 1;

444 
	}
}

447 
edge
 *
	$kruskö©e
(
u32
 
num_nodes
, u32 
num_edges
, 
edge
 *
edges
, u32 *
weights
)

449 
dsu
 
d
;

450 
	`dsu_öô
(&
d
, 
num_nodes
);

451 
edge
 *
edges_s‹ãd
 = 
	`mÆloc
(”dgeË* 
num_edges
);

452 
u32
 *
weights_s‹ãd
 = 
	`mÆloc
((u32Ë* 
num_edges
);

453 
edge
 *
out_edges
 = 
	`mÆloc
(”dgeË* (
num_nodes
 - 1));

454 
	`as£π
(
edges_s‹ãd
 && 
weights_s‹ãd
 && 
out_edges
);

457 
	`mem˝y
(
edges_s‹ãd
, 
edges
, (
edge
Ë* 
num_edges
);

458 
	`mem˝y
(
weights_s‹ãd
, 
weights
, (
u32
Ë* 
num_edges
);

459 
	`edges_s‹t
(
edges
, 
weights
, 0, 
num_edges
, 
edges_s‹ãd
, 
weights_s‹ãd
);

462 
	`‰ì
(
edges
);

463 
	`‰ì
(
weights
);

465 
u32
 
p›_idx
 = 
num_edges
;

466 
u32
 
åì_num_edges
 = 0;

467 
u32
 
åì_max_edges
 = 
num_nodes
 - 1;

468 
åì_num_edges
 !
åì_max_edges
) {

469 
	`as£π
(
p›_idx
);

470 
edge
 
√xt_edge
 = 
edges_s‹ãd
[--
p›_idx
];

471 
node_id
 
roŸ_a
 = 
	`dsu_föd
(&
d
, 
√xt_edge
.
‰om
);

472 
node_id
 
roŸ_b
 = 
	`dsu_föd
(&
d
, 
√xt_edge
.
to
);

473 i‡(
roŸ_a
 !
roŸ_b
) {

474 
	`dsu_roŸ_uni⁄
(&
d
, 
roŸ_a
, 
roŸ_b
);

475 
out_edges
[
åì_num_edges
++] = 
√xt_edge
;

478 
	`dsu_de°roy
(&
d
);

479 
	`‰ì
(
edges_s‹ãd
);

480 
	`‰ì
(
weights_s‹ãd
);

481  
out_edges
;

482 
	}
}

485 
edge
 *
	$sq_edges_make
(
u32
 
w
, u32 
h
, u32 *
out_num_edges
)

487 
	`as£π
(!(
w
 % 2Ë&& !(
h
 % 2));

488 
edge
 *
out_edges
 = 
	`mÆloc
(”dgeË* ((
w
 / 2Ë* (
h
 / 2) * 2));

489 
	`as£π
(
out_edges
);

490 
u32
 
x
, 
y
;

491 *
out_num_edges
 = 0;

492 
y
 = 0; y < 
h
; y += 2) {

493 
x
 = 0; x < 
w
; x += 2) {

494 
sq_hpoöt
 
this_co‹d
 = 
	`sq_hpoöt_make
(
x
, 
y
);

495 i‡(
x
)

497 
out_edges
[(*
out_num_edges
)++] = 
	`edge_make
(

498 
	`sq_hpoöt_add_dú
(
this_co‹d
, 
DIR_NX
),Åhis_coord);

499 i‡(
y
)

501 
out_edges
[(*
out_num_edges
)++] = 
	`edge_make
(

502 
	`sq_hpoöt_add_dú
(
this_co‹d
, 
DIR_NY
),Åhis_coord);

505  
out_edges
;

506 
	}
}

509 
edge
 *
	$make_cube_edges
(
u32
 
w
, u32 
h
, u32 
d
, u32 *
out_num_edges
)

511 
	`as£π
(!(
w
 % 2Ë&& !(
h
 % 2Ë&& !(
d
 % 2));

512 
edge
 *
out_edges
 = 
	`mÆloc
(”dgeË* ((
w
 / 2Ë* (
h
 / 2Ë* (
d
 / 2) * 3));

513 
	`as£π
(
out_edges
);

514 
u32
 
r
, 
g
, 
b
;

515 *
out_num_edges
 = 0;

516 
b
 = 0; b < 
d
; b += 2) {

517 
g
 = 0; g < 
h
; g += 2) {

518 
r
 = 0;Ñ < 
w
;Ñ += 2) {

519 
u32
 
this_co‹d
 = 
	`cb_hpoöt_make
(
r
, 
g
, 
b
);

520 i‡(
r
)

522 
out_edges
[(*
out_num_edges
)++] = 
	`edge_make
(

523 
	`cb_hpoöt_add_dú
(
this_co‹d
, 
DIR_NX
),Åhis_coord);

524 i‡(
g
)

526 
out_edges
[(*
out_num_edges
)++] = 
	`edge_make
(

527 
	`cb_hpoöt_add_dú
(
this_co‹d
, 
DIR_NY
),Åhis_coord);

528 i‡(
b
)

530 
out_edges
[(*
out_num_edges
)++] = 
	`edge_make
(

531 
	`cb_hpoöt_add_dú
(
this_co‹d
, 
DIR_NZ
),Åhis_coord);

535  
out_edges
;

536 
	}
}

539 
dú_Êag
 *
	$m≠_squ¨e_edges
(
u32
 
num_edges
, c⁄° 
edge
 *
edges
)

541 
dú_Êag
 *
dú_m≠
 = 
	`mÆloc
((
u8
Ë* 
	`pixñs
() / 4);

542 
	`as£π
(
dú_m≠
);

543 
	`mem£t
(
dú_m≠
, 0, (
u8
Ë* 
	`pixñs
() / 4);

544 
num_edges
--) {

545 
edge
 
e
 = 
edges
[
num_edges
];

546 
dú_Êag
 
dú_mask
 = 0;

547 
dú
 
i
 = 0; i < 4; i++) {

548 i‡(
e
.
to
 =
	`sq_hpoöt_add_dú
”.
‰om
, 
i
)) {

549 
dú_mask
 = 
	`dú_to_dú_Êag
(
i
);

553 
dú_m≠
[
e
.
‰om
] |
dú_mask
;

555  
dú_m≠
;

556 
	}
}

559 
dú_Êag
 *
	$m≠_cube_edges
(
u32
 
num_edges
, c⁄° 
edge
 *
edges
)

561 
dú_Êag
 *
dú_m≠
 = 
	`mÆloc
((
u8
Ë* 
	`cﬁ‹s
() / 8);

562 
	`as£π
(
dú_m≠
);

563 
	`mem£t
(
dú_m≠
, 0, (
u8
Ë* 
	`cﬁ‹s
() / 8);

564 
num_edges
--) {

565 
edge
 
e
 = 
edges
[
num_edges
];

566 
dú_Êag
 
dú_mask
 = 0;

567 
dú
 
i
 = 0; i < 6; i++) {

568 i‡(
e
.
to
 =
	`cb_hpoöt_add_dú
”.
‰om
, 
i
)) {

569 
dú_mask
 = 
	`dú_to_dú_Êag
(
i
);

573 
dú_m≠
[
e
.
‰om
] |
dú_mask
;

575  
dú_m≠
;

576 
	}
}

581 
dú_Êag
 *
	$ª‹õ¡_squ¨e_edges
(
dú_Êag
 *
dú_m≠
, 
sq_hpoöt
 
°¨t_idx
)

583 
sq_hpoöt
 *
°k
 = 
	`mÆloc
((
u32
Ë* 
	`pixñs
() / 4);

584 
dú_Êag
 *
undú_m≠
 = 
	`mÆloc
((dú_ÊagË* 
	`pixñs
() / 4);

585 
	`as£π
(
°k
 && 
undú_m≠
);

586 
	`mem£t
(
undú_m≠
, 0, (
dú_Êag
Ë* 
	`pixñs
() / 4);

587 
u32
 
°k_±r
 = 0;

588 
°k
[
°k_±r
++] = 
°¨t_idx
;

589 
°k_±r
) {

590 
sq_hpoöt
 
t›
 = 
°k
[--
°k_±r
];

591 
dú
 
i
 = 0; i < 4; i++) {

592 
u32
 
≈os
;

593 
dú
 
ndú
;

594 i‡(
	`sq_hpoöt_gë_axis
(
t›
, 
	`dú_axis
(
i
)) ==

595 ((
	`dú_sign_Êag
(
i
Ë=
SIGN_FLAG_POS
)

596 ? 
	`axis_•™_squ¨e
(
	`dú_axis
(
i
)) - 1

599 i‡(
dú_m≠
[
≈os
 = 
	`sq_hpoöt_add_dú
(
t›
, 
i
)] &

600 (
ndú
 = 
	`dú_to_dú_Êag
(
	`dú_övît
(
i
))))

601 
dú_m≠
[
≈os
] &~
ndú
, 
undú_m≠
[
t›
] |
	`dú_to_dú_Êag
(
i
),

602 
°k
[
°k_±r
++] = 
≈os
;

604 
dú
 
i
 = 0; i < 4; i++) {

605 
dú
 
d_Êag
;

606 i‡(
dú_m≠
[
t›
] & (
d_Êag
 = 
	`dú_to_dú_Êag
(
i
)))

607 
dú_m≠
[
t›
] &~
d_Êag
, 
undú_m≠
[top] |= d_flag,

608 
°k
[
°k_±r
++] = 
	`sq_hpoöt_add_dú
(
t›
, 
i
);

611 
	`‰ì
(
dú_m≠
);

612 
	`‰ì
(
°k
);

613  
undú_m≠
;

614 
	}
}

619 
dú_Êag
 *
	$ª‹õ¡_cube_edges
(
dú_Êag
 *
dú_m≠
, 
cb_hpoöt
 
°¨t_idx
)

621 
cb_hpoöt
 *
°k
 = 
	`mÆloc
((
u32
Ë* 
	`cﬁ‹s
() / 8);

622 
dú_Êag
 *
undú_m≠
 = 
	`mÆloc
((dú_ÊagË* 
	`cﬁ‹s
() / 8);

623 
	`as£π
(
°k
 && 
undú_m≠
);

624 
	`mem£t
(
undú_m≠
, 0, (
dú_Êag
Ë* 
	`cﬁ‹s
() / 8);

625 
u32
 
°k_±r
 = 0;

626 
°k
[
°k_±r
++] = 
°¨t_idx
;

627 
°k_±r
) {

628 
cb_hpoöt
 
t›
 = 
°k
[--
°k_±r
];

629 
dú
 
i
 = 0; i < 6; i++) {

630 
u32
 
≈os
;

631 
dú
 
ndú
;

632 i‡(
	`cb_hpoöt_gë_axis
(
t›
, 
	`dú_axis
(
i
)) ==

633 ((
	`dú_sign_Êag
(
i
Ë=
SIGN_FLAG_POS
)

634 ? 
	`axis_•™_cube
(
	`dú_axis
(
i
)) - 1

637 i‡(
dú_m≠
[
≈os
 = 
	`cb_hpoöt_add_dú
(
t›
, 
i
)] &

638 (
ndú
 = 
	`dú_to_dú_Êag
(
	`dú_övît
(
i
))))

639 
dú_m≠
[
≈os
] &~
ndú
, 
undú_m≠
[
t›
] |
	`dú_to_dú_Êag
(
i
),

640 
°k
[
°k_±r
++] = 
≈os
;

642 
dú
 
i
 = 0; i < 6; i++) {

643 
dú
 
d_Êag
;

644 i‡(
dú_m≠
[
t›
] & (
d_Êag
 = 
	`dú_to_dú_Êag
(
i
)))

645 
dú_m≠
[
t›
] &~
d_Êag
, 
undú_m≠
[top] |= d_flag,

646 
°k
[
°k_±r
++] = 
	`cb_hpoöt_add_dú
(
t›
, 
i
);

649 
	`‰ì
(
dú_m≠
);

650 
	`‰ì
(
°k
);

651  
undú_m≠
;

652 
	}
}

654 
u8
 *
	tgøy3
;

657 
	$gøy3_övît
(
gøy3
 
g
, 
axis_Êag
 
mask
)

659 
i
 = 0; i < 8; i++)

660 
g
[
i
] = ((~g[i] & 
mask
) | (g[i] & ~mask)) & 7;

661 
	}
}

664 
	$gøy3_sw≠
(
gøy3
 
g
, 
axis_Êag
 
a_mask
,áxis_Êag 
b_mask
)

666 
u8
 
Ÿhîs
 = ~(
a_mask
 | 
b_mask
);

667 
i
 = 0; i < 8; i++) {

668 
g
[
i
] = (g[i] & 
Ÿhîs
Ë| (!!(g[i] & 
a_mask
Ë* 
b_mask
) |

669 (!!(
g
[
i
] & 
b_mask
Ë* 
a_mask
);

671 
	}
}

674 
ölöe
 
u8
 
	$p›cou¡_3
(
axis_Êag
 
poöt
)

676  !!(
poöt
 & 1) + !!(point & 2) + !!(point & 4);

677 
	}
}

680 
dú
 
	$dú_¨gmö
(
u32
 
∑cked_axis_cou¡
)

682 
u8
 
mö
 = 4;

683 
dú
 
d
 = 0;

684 
dú
 
i
 = 0; i < 6; i++) {

685 
u8
 
num_ªmaöög_•li˚s
 = 
∑cked_axis_cou¡
 & ((1 << 2) - 1);

686 i‡(
num_ªmaöög_•li˚s
 &&Çum_ªmaöög_•li˚†< 
mö
)

687 
mö
 = 
num_ªmaöög_•li˚s
, 
d
 = 
i
;

688 
∑cked_axis_cou¡
 >>= 2;

690  
d
;

691 
	}
}

697 
	$gøyö©e_2
(
dú_Êag
 
chûd_£t
,

698 
dú
 
dú_out
,

699 
dú
 *
out_dús
,

700 
axis_Êag
 *
out_gøy
)

703 c⁄° 
axis_Êag
 
gøy
[4] = {0, 1, 3, 2};

706 c⁄° 
dú
 
dús
[4] = {
DIR_PX
, 
DIR_PY
, 
DIR_NX
, 
DIR_NY
};

709 c⁄° 
u8
 
dú_to_idx
[4] = {1, 3, 2, 0};

712 
dú
 
i
 = 0; i < 4; i++)

713 
out_dús
[
i
] = 
dús
[i];

716 i‡(
dú_out
 < 6)

717 
out_dús
[
dú_to_idx
[
dú_out
]] = dir_out;

720 
dú
 
i
 = 0; i < 4; i++) {

721 i‡(
chûd_£t
 & 
	`dú_to_dú_Êag
(
i
))

722 
out_dús
[
dú_to_idx
[
i
]] = i;

723 
out_gøy
[
i
] = 
gøy
[i];

725 
	}
}

732 
	$gøyö©e_3
(
axis_Êag
 
°¨t_poöt
,

733 
axis_Êag
 
íd_poöt
,

734 
dú_Êag
 
chûd_£t
,

735 
dú
 
dú_out
,

736 
dú
 *
out_dús
,

737 
u8
 *
out_gøy
)

739 
u8
 
gøy
[8] = {0, 1, 3, 2, 6, 7, 5, 4}, 
°¨t_pc
, 
‹ig_chûd_£t
 = 
chûd_£t
;

740 
	`as£π
(
chûd_£t
 < (1 << 6));

743 i‡((
°¨t_pc
 = 
	`p›cou¡_3
(
°¨t_poöt
)Ë>Ö›cou¡_3(
íd_poöt
))

747 
	`gøy3_övît
(
gøy
, 7);

748 
i
 = 1; 
	`p›cou¡_3
(
gøy
[0]Ë!
°¨t_pc
; i <<= 1) {

750 i‡((
gøy
[0] & 
i
) == (gray[7] & i))

751 
	`gøy3_övît
(
gøy
, 
i
);

753 
i
 = 1; i < 4; i <<= 1) {

754 
j
 = 
i
 << 1; j < 8; j <<= 1) {

758 i‡(((
gøy
[0] & 
i
Ë!(
°¨t_poöt
 & i)) &&

759 (
gøy
[0] & 
j
Ë!(
°¨t_poöt
 & j))

760 
	`gøy3_sw≠
(
gøy
, 
i
, 
j
);

762 i‡(((
gøy
[7] & 
i
Ë!(
íd_poöt
 & i)) &&

763 (
gøy
[7] & 
j
Ë!(
íd_poöt
 & j))

764 
	`gøy3_sw≠
(
gøy
, 
i
, 
j
);

769 
u8
 
dús
[8] = {0, 0, 0, 0, 0, 0, 0, 0};

770 
i
 = 0; i < 8; i++) {

772 
u8
 
a
 = 
gøy
[
i
], 
b
 = gray[(i + 1) & 7];

773 
u8
 
diff
 = 
a
 ^ 
b
;

774 
u8
 
sign
 = !(
b
 & 
diff
);

775 
dús
[
i
] = !!(
diff
 & 1Ë* 
DIR_PX
 + !!(dif‡& 2Ë* 
DIR_PY
 +

776 !!(
diff
 & 4Ë* 
DIR_PZ
 + 
sign
;

780 
u64
 
axis_cou¡
 = 0, 
axis
;

781 
u64
 
dú_axis_£t
[8] = {0, 0, 0, 0, 0, 0, 0, 0};

782 
i
 = 0; i < 8; i++) {

783 
u8
 
dú
 = 
dús
[
i
], 
poöt
 = 
gøy
[i], 
öv
 = 
	`dú_övît
(dir);

784 
axis
 = 0;áxis < 3;áxis++) {

785 
u8
 
sgn
 = !((1 << 
axis
Ë& 
poöt
);

786 
u8
 
com∑t_dú
 = 
	`dú_make
(
sgn
, 
axis
);

787 i‡(
com∑t_dú
 !
öv
)

788 
dú_axis_£t
[
i
] |1 << (2 * 
com∑t_dú
);

790 
axis_cou¡
 +
dú_axis_£t
[
i
];

792 i‡(
dú_out
 < 6) {

793 
axis_cou¡
 -
dú_axis_£t
[7];

794 
dú_axis_£t
[7] = 0;

795 
dús
[7] = 
dú_out
;

796 
k
 = 0; k < 8; k++) {

798 
dú_axis_£t
[
k
] &~(3 << (2 * 
dú_out
));

801 
i
 = 0; i < 6 && 
chûd_£t
; i++) {

802 
u8
 
cuºít_dú
 = 
	`dú_¨gmö
(
axis_cou¡
);

803 
u8
 
cuºít_dú_Êag
 = 
	`dú_to_dú_Êag
(
cuºít_dú
);

804 
u64
 
dú_mask
 = 3 << (2 * 
cuºít_dú
), 
dú_mask_öv
 = ~dir_mask;

805 i‡(
cuºít_dú_Êag
 & 
chûd_£t
) {

806 
j
 = 0; j < 8; j++) {

807 i‡(
dú_axis_£t
[
j
] &

808 
dú_mask
) {

809 
axis_cou¡
 -
dú_axis_£t
[
j
];

810 
axis_cou¡
 &
dú_mask_öv
;

811 
dú_axis_£t
[
j
] = 0;

812 
dús
[
j
] = 
cuºít_dú
;

813 
k
 = 0; k < 8; k++) {

815 
dú_axis_£t
[
k
] &
dú_mask_öv
;

820 
chûd_£t
 &~
cuºít_dú_Êag
;

823 
k
 = 0; k < 8; k++)

824 
dú_axis_£t
[
k
] &
dú_mask_öv
;

825 
axis_cou¡
 &
dú_mask_öv
;

828 
i
 = 0; i < 8; i++) {

829 
out_dús
[
i
] = 
dús
[i];

830 
out_gøy
[
i
] = 
gøy
[i];

831 
	`as£π
(
gøy
[
i
] < 8 && 
dús
[i] < 6);

834 
u8
 
check_
 = 
‹ig_chûd_£t
 | ((
dú_out
 < 6Ë? 
	`dú_to_dú_Êag
(dir_out) : 0);

835 
j
 = 0; j < 8; j++) {

836 
u8
 
d
 = 
out_dús
[
j
];

837 
axis
 = 0;áxis < 3;áxis++) {

838 i‡(
d
 =
	`dú_make
(!(
gøy
[
j
] & (1 << 
axis
)),áxis)) {

839 
	`as£π
((
gøy
[(
j
 + 1Ë% 8] ^ gøy[j]Ë!(1 << 
axis
));

840 
	`as£π
(
check_
 & (1 << 
d
));

841 
check_
 ^1 << 
d
;

846 i‡(
dú_out
 < 6)

847 
	`as£π
(
dús
[7] =
dú_out
);

848 
	`as£π
(!
check_
);

849 
	}
}

851 
u8
 *
	$ªsﬁve_edges_2
(
u32
 
num_nodes
, c⁄° 
u8
 *
dú_m≠
, u32 
°¨t_idx
)

853 
u32
 *
°k
 = 
	`mÆloc
((u32Ë* 
num_nodes
);

854 
u8
 *
dú_out_°k
 = 
	`mÆloc
((u8Ë* 
num_nodes
);

855 
u8
 *
out
 = 
	`mÆloc
((u8Ë* 
num_nodes
 * 4);

856 
	`as£π
(
°k
 && 
dú_out_°k
 && 
out
);

857 
	`mem£t
(
out
, 6, (
u8
Ë* 
num_nodes
 * 4);

858 
u32
 
°k_±r
 = 0;

859 
dú_out_°k
[
°k_±r
] = 6;

860 
°k
[
°k_±r
++] = 
°¨t_idx
;

861 
°k_±r
) {

862 
u32
 
t›
 = 
°k
[
°k_±r
 - 1];

863 
u8
 
dú
 = 
dú_m≠
[
t›
], 
dús
[4], 
dú_out
 = 
dú_out_°k
[
°k_±r
 - 1],

864 
gøy
[4];

865 
°k_±r
--;

866 
	`gøyö©e_2
(
dú
, 
dú_out
, 
dús
, 
gøy
);

867 
u32
 
idx
 = 
	`sq_poöt_make
(
	`sq_hpoöt_x
(
t›
), 
	`sq_hpoöt_y
(top));

868 
u32
 
i
 = 0; i < 4; i++) {

869 
u8
 
gøy_poöt
 = 
gøy
[
i
];

870 
u32
 
out_idx
 = 
	`sq_poöt_make
(
	`sq_poöt_x
(
idx
Ë+ (
gøy_poöt
 & 1),

871 
	`sq_poöt_y
(
idx
Ë+ !!(
gøy_poöt
 & 2));

872 
	`as£π
(
out
[
out_idx
] == 6);

873 
out
[
out_idx
] = 
dús
[
i
];

875 
u32
 
i
 = 0; i < 4; i++) {

876 i‡(
dú
 & 
	`dú_to_dú_Êag
(
i
)) {

877 
dú_out_°k
[
°k_±r
] = 
	`dú_övît
(
i
);

878 
°k
[
°k_±r
++] = 
	`sq_hpoöt_add_dú
(
t›
, 
i
);

882 
	`‰ì
(
dú_out_°k
);

883 
	`‰ì
(
°k
);

884  
out
;

885 
	}
}

887 
u8
 *
	$ªsﬁve_edges_3
(
u32
 
num_nodes
, c⁄° 
u8
 *
dú_m≠
, u32 
°¨t_idx
)

889 
u32
 *
°k
 = 
	`mÆloc
((u32Ë* 
num_nodes
);

890 
u8
 *
dú_out_°k
 = 
	`mÆloc
((u8Ë* 
num_nodes
);

891 
u8
 *
°¨t_poöt_°k
 = 
	`mÆloc
((u8Ë* 
num_nodes
);

892 
u8
 *
íd_poöt_°k
 = 
	`mÆloc
((u8Ë* 
num_nodes
);

893 
u8
 *
out
 = 
	`mÆloc
((u8Ë* 
num_nodes
 * 8);

894 
	`as£π
(
°k
 && 
dú_out_°k
 && 
°¨t_poöt_°k
 && 
íd_poöt_°k
 && 
out
);

895 
	`mem£t
(
out
, 7, (
u8
Ë* 
num_nodes
 * 8);

896 
u32
 
°k_±r
 = 0;

898 
dú_out_°k
[
°k_±r
] = 6;

899 
°¨t_poöt_°k
[
°k_±r
] = 0;

900 
íd_poöt_°k
[
°k_±r
] = 1;

901 
°k
[
°k_±r
++] = 
°¨t_idx
;

902 
°k_±r
) {

903 
u32
 
t›
 = 
°k
[
°k_±r
 - 1];

904 
u8
 
dú
 = 
dú_m≠
[
t›
], 
dús
[8], 
dú_out
 = 
dú_out_°k
[
°k_±r
 - 1],

905 
gøy
[8];

906 
u8
 
°¨t_poöt
 = 
°¨t_poöt_°k
[
°k_±r
 - 1],

907 
íd_poöt
 = 
íd_poöt_°k
[
°k_±r
 - 1];

908 
°k_±r
--;

909 
	`gøyö©e_3
(
°¨t_poöt
, 
íd_poöt
, 
dú
, 
dú_out
, 
dús
, 
gøy
);

910 
u32
 
idx
 =

911 
	`cb_poöt_make
(
	`cb_hpoöt_r
(
t›
), 
	`cb_hpoöt_g
—›), 
	`cb_hpoöt_b
(top));

912 
u32
 
i
 = 0; i < 8; i++) {

913 
u8
 
gøy_poöt
 = 
gøy
[
i
];

914 
	`as£π
(
dús
[
i
] < 6);

915 
u32
 
out_idx
 = 
	`cb_poöt_make
(
	`cb_poöt_r
(
idx
Ë+ (
gøy_poöt
 & 1),

916 
	`cb_poöt_g
(
idx
Ë+ !!(
gøy_poöt
 & 2),

917 
	`cb_poöt_b
(
idx
Ë+ !!(
gøy_poöt
 & 4));

918 
	`as£π
(
out
[
out_idx
] == 7);

919 
out
[
out_idx
] = 
dús
[
i
];

920 
u8
 
dú_mask
 = (1 << (
dús
[
i
] >> 1));

921 i‡(((
t›
 =
°¨t_idx
Ë|| 
i
 < 7) &&

922 !!(
gøy_poöt
 & 
dú_mask
Ë^ (
dús
[
i
] & 1)) {

923 
°¨t_poöt_°k
[
°k_±r
] = 
gøy_poöt
 ^ 
dú_mask
;

924 
íd_poöt_°k
[
°k_±r
] = 
gøy
[(
i
 + 1Ë% 8] ^ 
dú_mask
;

925 
dú_out_°k
[
°k_±r
] = 
	`dú_övît
(
dús
[
i
]);

926 
°k
[
°k_±r
++] = 
	`cb_hpoöt_add_dú
(
t›
, 
dús
[
i
]);

930 
	`‰ì
(
dú_out_°k
);

931 
	`‰ì
(
°k
);

932 
	`‰ì
(
°¨t_poöt_°k
);

933 
	`‰ì
(
íd_poöt_°k
);

934  
out
;

935 
	}
}

938 
uöt64_t
 
	m°©e
;

939 
uöt64_t
 
	möc
;

940 } 
	tpcg32_øndom_t
;

942 
uöt32_t
 
	$pcg32_øndom_r
(
pcg32_øndom_t
 *
∫g
)

944 
uöt64_t
 
ﬁd°©e
 = 
∫g
->
°©e
;

946 
∫g
->
°©e
 = 
ﬁd°©e
 * 6364136223846793005ULL + (∫g->
öc
 | 1);

948 
uöt32_t
 
x‹shi·ed
 = ((
ﬁd°©e
 >> 18u) ^ oldstate) >> 27u;

949 
uöt32_t
 
rŸ
 = 
ﬁd°©e
 >> 59u;

950  (
x‹shi·ed
 >> 
rŸ
) | (xorshifted << ((-rot) & 31));

951 
	}
}

953 
pcg32_øndom_t
 
	g∫g_°©e
 = {0xDEADBEEF, 1};

955 
uöt32_t
 
	$∫g
()

957  
	`pcg32_øndom_r
(&
∫g_°©e
);

958 
	}
}

960 
	$u32
 (*
	tweight_func
)(
	tedge
 *
	te
);

962 
u32
 *
	$make_edge_weights
(
u32
 
num_edges
, 
edge
 *
edges
, 
weight_func
 
func
)

964 
u32
 *
out
 = 
	`mÆloc
((u32Ë* 
num_edges
);

965 
	`as£π
(
out
);

966 
u32
 
i
 = 0; i < 
num_edges
; i++)

967 
out
[
i
] = 
	`func
(
edges
 + i);

968  
out
;

969 
	}
}

971 
u32
 
	$∫g_weight_func
(
edge
 *
e
)

973 i‡(
	`∫g
() & 1) {

974 
u32
 
ãmp
 = 
e
->
‰om
;

975 
e
->
‰om
 =É->
to
;

976 
e
->
to
 = 
ãmp
;

978  
	`∫g
();

979 
	}
}

982 
boﬁ
 
	gcheck
 = 
Ál£
;

984 
u8
 *
	$bmp_√w
(
u32
 
num_ñemíts
)

986 
u8
 *
out
 = 
	`ˇŒoc
((
num_ñemíts
 + 7) / 8, 1);

987  
out
;

988 
	}
}

990 
ölöe
 
	$bmp_£t
(
u8
 *
bmp
, 
u32
 
idx
, 
v
)

992 
u8
 
mask
 = 1 << (
idx
 & 7);

993 
bmp
[
idx
 / 8] = (bmp[idx / 8] & ~
mask
Ë| (
v
 * mask);

994 
	}
}

996 
ölöe
 
boﬁ
 
	$bmp_gë
(c⁄° 
u8
 *
bmp
, 
u32
 
idx
)

998  (
boﬁ
Ë(
bmp
[
idx
 / 8] & (1 << (idx & 7)));

999 
	}
}

1001 
	$run_pic
(c⁄° 
u8
 *
s¸ìn_dús
,

1002 c⁄° 
u8
 *
cube_dús
,

1003 
u32
 
s¸ìn_idx
,

1004 
u32
 
cube_idx
,

1005 
FILE
 *
f
)

1007 
u32
 
‹ig_cube_idx
 = 
cube_idx
;

1008 
u32
 *
pix
 = 
	`mÆloc
((u32Ë* 
	`x_•™
(Ë* 
	`y_•™
());

1009 
u8
 *
out_f
 = 
	`mÆloc
((u8Ë* 
	`x_•™
(Ë* 
	`y_•™
() * 3);

1010 
u32
 
max_bµ
 = 
r_bôs
 > 
g_bôs
 ?Ñ_bits : g_bits;

1011 
u8
 *
check_bmp
 = 
check
 ? 
	`bmp_√w
(
	`x_•™
(Ë* 
	`y_•™
()Ë: 
NULL
;

1012 
max_bµ
 = 
b_bôs
 > max_bpp ? b_bits : max_bpp;

1013 
max_bµ
 = 8;

1014 
	`as£π
(
pix
 && 
out_f
);

1015 
u32
 
out_f_±r
 = 0;

1016 
	`Ârötf
(
f
, "P6\n%" 
PRIu32
 "%" PRIu32 "\n%d\n", 
	`x_•™
(), 
	`y_•™
(),

1017 (1 << 
max_bµ
) - 1);

1019 
s¸ìn_idx
 = 
	`sq_poöt_add_dú
(s¸ìn_idx, 
s¸ìn_dús
[screen_idx]);

1020 
cube_idx
 = 
	`cb_poöt_add_dú
(cube_idx, 
cube_dús
[cube_idx]);

1021 
pix
[
s¸ìn_idx
] = 
cube_idx
;

1022 } 
cube_idx
 !
‹ig_cube_idx
);

1023 
u32
 
i
 = 0; i < 
	`x_•™
(Ë* 
	`y_•™
(); i++) {

1024 
u32
 
cube_idx
 = 
pix
[
i
];

1025 
u8
 
r
 = 
	`cb_poöt_r
(
cube_idx
), 
g
 = 
	`cb_poöt_g
(cube_idx),

1026 
b
 = 
	`cb_poöt_b
(
cube_idx
);

1027 
r
 = (∏<< (
max_bµ
 - 
r_bôs
));

1028 
g
 = (g << (
max_bµ
 - 
g_bôs
));

1029 
b
 = (b << (
max_bµ
 - 
b_bôs
));

1030 
out_f
[
out_f_±r
++] = 
r
;

1031 
out_f
[
out_f_±r
++] = 
g
;

1032 
out_f
[
out_f_±r
++] = 
b
;

1033 i‡(
check
)

1034 
	`bmp_£t
(
check_bmp
, 
cube_idx
, 1);

1036 i‡(
check
) {

1037 
u32
 
i
 = 0; i < 
	`x_•™
(Ë* 
	`y_•™
(); i++)

1039 i‡(!
	`bmp_gë
(
check_bmp
, 
i
))

1040 
	`puts
("rgb check failed");

1042 
	`fwrôe
(
out_f
, 
out_f_±r
, 1, 
f
);

1043 
	`f˛o£
(
f
);

1044 
	`‰ì
(
out_f
);

1045 
	`‰ì
(
pix
);

1046 
	`‰ì
(
check_bmp
);

1047 
	}
}

1049 
ölöe
 
boﬁ
 
	$is_pow2
(
v
)

1053  
v
 > 0 && (v & (v - 1)) == 0;

1054 
	}
}

1056 
ölöe
 
u32
 
	$öt_log2
(
v
)

1059 
u32
 
out
 = 0;

1060 
v
 >>= 1)

1061 
out
++;

1062  
out
;

1063 
	}
}

1065 
	$Áèl
(c⁄° *
msg
)

1067 
	`puts
(
msg
);

1068 
	`exô
(1);

1069 
	}
}

1071 
	$maö
(
¨gc
, *
¨gv
[])

1073 
w
 = 4096 , 
h
 = 4096 ;

1074 
r
 = 256 , 
g
 = 256 , 
b
 = 256 ;

1075 
ö_£ed
 = 0;

1076 c⁄° *
out_pbm
 = "out.pbm";

1078 i‡(!
	`is_pow2
(
w
Ë|| !is_pow2(
h
Ë|| !is_pow2(
r
Ë|| !is_pow2(
g
Ë|| !is_pow2(
b
))

1079 
	`Áèl
(

1082 
x_bôs
 = 
	`öt_log2
(
w
);

1083 
y_bôs
 = 
	`öt_log2
(
h
);

1084 
r_bôs
 = 
	`öt_log2
(
r
);

1085 
g_bôs
 = 
	`öt_log2
(
g
);

1086 
b_bôs
 = 
	`öt_log2
(
b
);

1087 i‡(
x_bôs
 + 
y_bôs
 !
r_bôs
 + 
g_bôs
 + 
b_bôs
)

1088 
	`Áèl
(

1092 
FILE
 *
out_fûe
 = 
	`f›í
(
out_pbm
, "w");

1094 
∫g_°©e
.
°©e
 = (
u32
Ë
ö_£ed
;

1096 
u32
 
num_s¸ìn_edges
, 
num_cube_edges
;

1097 
u32
 
num_s¸ìn_nodes
 = 
	`x_•™
(Ë/ 2 * 
	`y_•™
() / 2;

1098 
u32
 
num_cube_nodes
 = 
	`r_•™
(Ë/ 2 * 
	`g_•™
(Ë/ 2 * 
	`b_•™
() / 2;

1099 
sq_hpoöt
 
s¸ìn_°¨t
 =

1100 
	`sq_hpoöt_make
(
	`∫g
(Ë& (
	`x_•™
(Ë- 1),Ñng(Ë& (
	`y_•™
() - 1));

1101 
cb_hpoöt
 
cube_°¨t
 = 
	`cb_hpoöt_make
(

1102 
	`∫g
(Ë& (
	`r_•™
(Ë- 1),Ñng(Ë& (
	`g_•™
(Ë- 1),Ñng(Ë& (
	`b_•™
() - 1));

1104 
	`puts
("makingÉdges...");

1105 
edge
 *
s¸ìn_edges
 = 
	`sq_edges_make
(
	`x_•™
(), 
	`y_•™
(), &
num_s¸ìn_edges
);

1106 
edge
 *
cube_edges
 =

1107 
	`make_cube_edges
(
	`r_•™
(), 
	`g_•™
(), 
	`b_•™
(), &
num_cube_edges
);

1109 
	`puts
("makingÉdge weights..");

1110 
u32
 *
s¸ìn_edge_weights
 =

1111 
	`make_edge_weights
(
num_s¸ìn_edges
, 
s¸ìn_edges
, &
∫g_weight_func
);

1112 
u32
 *
cube_edge_weights
 =

1113 
	`make_edge_weights
(
num_cube_edges
, 
cube_edges
, &
∫g_weight_func
);

1115 
	`puts
("kruskinating...");

1116 
s¸ìn_edges
 = 
	`kruskö©e
(
num_s¸ìn_nodes
, 
num_s¸ìn_edges
, screen_edges,

1117 
s¸ìn_edge_weights
);

1118 
cube_edges
 = 
	`kruskö©e
(
num_cube_nodes
, 
num_cube_edges
, cube_edges,

1119 
cube_edge_weights
);

1121 
	`puts
("mappingÉdges...");

1122 
u8
 *
s¸ìn_edge_dús
 = 
	`m≠_squ¨e_edges
(
num_s¸ìn_nodes
 - 1, 
s¸ìn_edges
);

1123 
u8
 *
cube_edge_dús
 = 
	`m≠_cube_edges
(
num_cube_nodes
 - 1, 
cube_edges
);

1125 
	`puts
("reorientingÉdges...");

1126 
s¸ìn_edge_dús
 = 
	`ª‹õ¡_squ¨e_edges
(s¸ìn_edge_dús, 
s¸ìn_°¨t
);

1127 
cube_edge_dús
 = 
	`ª‹õ¡_cube_edges
(cube_edge_dús, 
cube_°¨t
);

1129 
	`puts
("resolvingÉdges...");

1130 c⁄° 
u8
 *
out_s¸ìn_dús
 =

1131 
	`ªsﬁve_edges_2
(
num_s¸ìn_nodes
, 
s¸ìn_edge_dús
, 
s¸ìn_°¨t
);

1132 c⁄° 
u8
 *
out_cube_dús
 =

1133 
	`ªsﬁve_edges_3
(
num_cube_nodes
, 
cube_edge_dús
, 
cube_°¨t
);

1134 
	`run_pic
(
out_s¸ìn_dús
, 
out_cube_dús
, 
s¸ìn_°¨t
, 
cube_°¨t
, 
out_fûe
);

1136 
	`¥ötf
("D⁄e! check %s\n", 
out_pbm
);

1138 
	}
}

	@tests/ieee754.c

18 
	~<Êﬂt.h
>

19 
	~<limôs.h
>

20 
	~<m©h.h
>

21 
	~<°döt.h
>

22 
	~<°dio.h
>

24 
	#STRINGIFY
(
S
Ë#S

	)

25 
	#MAKE_STR
(
S
Ë
	`STRINGIFY
(S)

	)

27 #ifde‡
FP_CONTRACT


28 #unde‡
FP_CONTRACT


29 
	#FP_CONTRACT
 "ON"

	)

30 #¥agm®
STDC
 
FP_CONTRACT
 
ON


32 
	#FP_CONTRACT
 "OFF"

	)

33 #¥agm®
STDC
 
FP_CONTRACT
 
OFF


36 #i‚de‡
NO_FENV_H


37 
	~<„nv.h
>

38 #¥agm®
STDC
 
FENV_ACCESS
 
ON


41 #i‚de‡
NAN


42 
	#NAN
 (0.0 / 0.0)

	)

45 #i‚de‡
INFINITY


46 
	#INFINITY
 (1.0 / 0.0)

	)

49 
	#DBL_NAN
 (
NAN
)

	)

50 
	#DBL_POS_INF
 (
INFINITY
)

	)

51 
	#DBL_NEG_INF
 (-
DBL_POS_INF
)

	)

59 
	#PREC_EPSILON
(
T
, 
V
, 
F
) \

61 vﬁ©ûê
T
 
ïs
 = 1.0; \

62 
	`¥ötf
(#V " = %" 
F
 "g = %" F "a\n", (
T
Ë(
V
), (T) (V)); \

63 
ïs
 != 0) { \

64 vﬁ©ûê
T
 
x
 = 1.0, 
e
 = 
ïs
 / 
FLT_RADIX
; \

65 
x
 = (x + 
e
) - 1.0; \

66 i‡(
x
 !
e
) \

68 
ïs
 = 
e
; \

70 i‡(
ïs
 == 0) \

71 
	`¥ötf
(" (cannot computeÅhe dynamicÉpsilon)\n"); \

72 i‡(
ïs
 !(
V
)) \

73 
	`¥ötf
(" (dy«mi¯ïsû⁄ = %" 
F
 "g = %" F "a)\n", 
ïs
,Éps); \

74 } 0)

	)

76 
	#ERRSTR
(
X
Ë((XË? " [ERROR]" : "")

	)

78 
	gÊt_max
 = 
FLT_MAX
;

79 
	gdbl_max
 = 
DBL_MAX
;

80 
	gldbl_max
 = 
LDBL_MAX
;

82 
	gÊt_ïsû⁄
 = 
FLT_EPSILON
;

83 
	gdbl_ïsû⁄
 = 
DBL_EPSILON
;

84 
	gldbl_ïsû⁄
 = 
LDBL_EPSILON
;

87 
	$Êﬂt_h
()

89 
	`¥ötf
("FLT_RADIX = %d\n", (Ë
FLT_RADIX
);

90 
	`¥ötf
("FLT_MANT_DIG = %d\n", (Ë
FLT_MANT_DIG
);

91 
	`¥ötf
("DBL_MANT_DIG = %d\n", (Ë
DBL_MANT_DIG
);

92 
	`¥ötf
("LDBL_MANT_DIG = %d\n\n", (Ë
LDBL_MANT_DIG
);

94 
	`¥ötf
("FLT_MIN_EXP = %d\n", (Ë
FLT_MIN_EXP
);

95 
	`¥ötf
("DBL_MIN_EXP = %d\n", (Ë
DBL_MIN_EXP
);

96 
	`¥ötf
("LDBL_MIN_EXP = %d\n\n", (Ë
LDBL_MIN_EXP
);

98 
	`¥ötf
("FLT_MAX_EXP = %d\n", (Ë
FLT_MAX_EXP
);

99 
	`¥ötf
("DBL_MAX_EXP = %d\n", (Ë
DBL_MAX_EXP
);

100 
	`¥ötf
("LDBL_MAX_EXP = %d\n\n", (Ë
LDBL_MAX_EXP
);

102 
	`PREC_EPSILON
(, 
FLT_EPSILON
, "");

103 
	`PREC_EPSILON
(, 
DBL_EPSILON
, "");

104 
	`PREC_EPSILON
(, 
LDBL_EPSILON
, "L");

105 
	`putch¨
('\n');

107 
	`¥ötf
("FLT_MIN = %g = %a\n", (Ë
FLT_MIN
, () FLT_MIN);

108 
	`¥ötf
("DBL_MIN = %g = %a\n", (Ë
DBL_MIN
, () DBL_MIN);

109 
	`¥ötf
("LDBL_MIN = %Lg = %La\n\n", (Ë
LDBL_MIN
,

110 (Ë
LDBL_MIN
);

112 
	`¥ötf
("FLT_MAX = %g = %a\n", (Ë
FLT_MAX
, () FLT_MAX);

113 
	`¥ötf
("DBL_MAX = %g = %a\n", (Ë
DBL_MAX
, () DBL_MAX);

114 
	`¥ötf
("LDBL_MAX = %Lg = %La\n\n", (Ë
LDBL_MAX
,

115 (Ë
LDBL_MAX
);

116 
	}
}

118 
	#TSIZEOF
(
T
Ë
	`¥ötf
("sizeof(" #T "Ë%d\n", (Ë(T))

	)

120 
	$Êﬂt_sizeof
()

122 
	`TSIZEOF
();

123 
	`TSIZEOF
();

124 
	`TSIZEOF
();

125 
	`putch¨
('\n');

126 
	}
}

128 
	uf
 {

129 
	mf
;

130 
	mi
;

133 *
	g∫ds
[4] = {"toÇearest", "toward 0", "to +oo", "to -oo"};

139 
	$∫d_dëe˘
()

141 i‡(
UINT_MAX
 == 0xffffffff) {

142 c⁄° 
∫dc
 = -1.02735137937997933477e+00;

143 vﬁ©ûê
∫dv
;

144 
·c
, 
·v
;

145 vﬁ©ûê
·m
;

146 
f
 
fw
;

147 
ic
, 
im
, 
iv
;

149 
·c
 = (Ë
∫dc
;

150 
fw
.
f
 = 
·c
 * ftc;

151 
ic
 = 
fw
.
i
 & 3;

153 
·m
 = (Ë
∫dc
;

154 
fw
.
f
 = 
·m
 * ftm;

155 
im
 = 
fw
.
i
 & 3;

157 
∫dv
 = 
∫dc
;

158 
·v
 = (Ë
∫dv
;

159 
fw
.
f
 = 
·v
 * ftv;

160 
iv
 = 
fw
.
i
 & 3;

162 
	`¥ötf
("-------> %†(%†/ %s)\n", 
∫ds
[
iv
],Ñnds[
im
],Ñnds[
ic
]);

164 
	}
}

166 
	$t°ˇ°
()

168 
x
 = () 0;

169 
	`¥ötf
("(doubÀË0 = %g\n", 
x
);

170 
	}
}

175 
	$sig√d_zîo_öf
()

177 
x
 = 0.0, 
y
 = -0.0, 
px
, 
py
, 
nx
, 
ny
;

179 
	`¥ötf
("Signed zeroÅests (x is 0.0ánd y is -0.0):\n");

181 i‡(
x
 =
y
)

182 
	`¥ötf
(" Test 1.0 / x != 1.0 / yÑeturns %d (should be 1).\n",

183 1.0 / 
x
 !1.0 / 
y
);

185 
	`¥ötf
("x != y;Åhis is wrong!\n");

187 
px
 = +
x
;

188 i‡(
x
 =
px
)

189 
	`¥ötf
(" Test 1.0 / x == 1.0 / +xÑeturns %d (should be 1).\n",

190 1.0 / 
x
 =1.0 / 
px
);

192 
	`¥ötf
("x != +x;Åhis is wrong!\n");

194 
py
 = +
y
;

195 i‡(
x
 =
py
)

196 
	`¥ötf
(" Test 1.0 / x != 1.0 / +yÑeturns %d (should be 1).\n",

197 1.0 / 
x
 !1.0 / 
py
);

199 
	`¥ötf
("x != +y;Åhis is wrong!\n");

201 
nx
 = -
x
;

202 i‡(
x
 =
nx
)

203 
	`¥ötf
(" Test 1.0 / x != 1.0 / -xÑeturns %d (should be 1).\n",

204 1.0 / 
x
 !1.0 / 
nx
);

206 
	`¥ötf
("x != -x;Åhis is wrong!\n");

208 
ny
 = -
y
;

209 i‡(
x
 =
ny
)

210 
	`¥ötf
(" Test 1.0 / x == 1.0 / -yÑeturns %d (should be 1).\n",

211 1.0 / 
x
 =1.0 / 
ny
);

213 
	`¥ötf
("x != -y;Åhis is wrong!\n");

214 
	}
}

216 
	$t°add
(
x
, 
y
)

218 
a
 = 
x
 + 
y
;

219 
s
 = 
x
 - 
y
;

220 
	`¥ötf
("%g + %g = %g\n", 
x
, 
y
, 
a
);

221 
	`¥ötf
("%g - %g = %g\n", 
x
, 
y
, 
s
);

222 
	}
}

224 
	$t°mul
(
x
, 
y
)

226 
m
 = 
x
 * 
y
;

227 
	`¥ötf
("%g * %g = %g\n", 
x
, 
y
, 
m
);

228 
	}
}

230 
	#TSTCONST
(
S
, 
OP
) \

231 
	`¥ötf
("C⁄°™àex¥essi⁄ 1 " 
S
 \

233 "V¨übÀÉx¥essi⁄ 1 " 
S
 " DBL_MIN = %.20g\n", \

234 1.0 
OP
 
DBL_MIN
, 1.0 OP 
x
);

	)

236 
	$t°c⁄°
()

238 vﬁ©ûê
x
 = 
DBL_MIN
;

240 
	`TSTCONST
("+", +);

241 
	`TSTCONST
("-", -);

242 
	}
}

244 
	#TSTDIV
(
T
, 
S
) \

246 vﬁ©ûê
T
 
x
 = 1.0, 
y
 = 3.0; \

247 
x
 /
y
; \

248 
	`¥ötf
("1/3 i¿%-12s: %" 
S
 "a\n", #T, 
x
); \

249 } 0)

	)

251 
	$t°pow
()

253 
vÆ
[] = {0.0, 0.0, 0.0, +0.0, -0.0, +0.5,

255 
i
, 
j
;

258 
vÆ
[0] = 
DBL_NAN
;

259 
vÆ
[1] = 
DBL_POS_INF
;

260 
vÆ
[2] = 
DBL_NEG_INF
;

262 
i
 = 0; i < (
vÆ
) / (val[0]); i++)

263 
j
 = 0; j < (
vÆ
) / (val[0]); j++) {

264 
p
;

265 
p
 = 
	`pow
(
vÆ
[
i
], vÆ[
j
]);

266 
	`¥ötf
("pow(%g, %gË%g\n", 
vÆ
[
i
], vÆ[
j
], 
p
);

268 
	}
}

270 
	$t°Æl
()

272 
fm
 = 
FLT_MAX
, 
„
 = 
FLT_EPSILON
;

273 
dm
 = 
DBL_MAX
, 
de
 = 
DBL_EPSILON
;

274 
lm
 = 
LDBL_MAX
, 
À
 = 
LDBL_EPSILON
;

276 
	`∫d_dëe˘
();

277 
	`t°ˇ°
();

278 
	`sig√d_zîo_öf
();

280 
	`t°add
(+0.0, +0.0);

281 
	`t°add
(+0.0, -0.0);

282 
	`t°add
(-0.0, +0.0);

283 
	`t°add
(-0.0, -0.0);

284 
	`t°add
(+1.0, +1.0);

285 
	`t°add
(+1.0, -1.0);

287 
	`t°mul
(+0.0, +0.0);

288 
	`t°mul
(+0.0, -0.0);

289 
	`t°mul
(-0.0, +0.0);

290 
	`t°mul
(-0.0, -0.0);

292 
	`t°c⁄°
();

293 
	`TSTDIV
(, "");

294 
	`TSTDIV
(, "");

295 
	`TSTDIV
(, "L");

297 
	`¥ötf
("Dec 1.1 = %a\n", () 1.1);

298 
	`¥ötf
("FLT_MAX = %a%s\n", (Ë
fm
, 
	`ERRSTR
(fm !
Êt_max
));

299 
	`¥ötf
("DBL_MAX = %a%s\n", 
dm
, 
	`ERRSTR
(dm !
dbl_max
));

301 
	`¥ötf
("LDBL_MAX = %La%s\n", 
lm
, 
	`ERRSTR
÷m !
ldbl_max
));

303 
	`¥ötf
("FLT_EPSILON = %a%s\n", (Ë
„
, 
	`ERRSTR
(„ !
Êt_ïsû⁄
));

304 
	`¥ötf
("DBL_EPSILON = %a%s\n", 
de
, 
	`ERRSTR
(dê!
dbl_ïsû⁄
));

305 
	`¥ötf
("LDBL_EPSILON = %La%s\n", 
À
, 
	`ERRSTR
÷ê!
ldbl_ïsû⁄
));

307 
	`t°pow
();

308 
	}
}

310 
	$t°evÆ_mëhod
()

312 vﬁ©ûê
x
, 
y
, 
z
;

314 #i‡
__STDC__
 =1 && 
__STDC_VERSION__
 >199901 && 
	`deföed
(
__STDC_IEC_559__
)

315 
	`¥ötf
(

318 #ifde‡
FLT_EVAL_METHOD


319 
	`¥ötf
("FLT_EVAL_METHOD is %d (see ISO/IEC 9899, 5.2.4.2.2#8).\n\n",

320 (Ë
FLT_EVAL_METHOD
);

322 
	`¥ötf
("But FLT_EVAL_METHOD isÇot defined!\n\n");

326 
x
 = 9007199254740994.0;

327 
y
 = 1.0 - 1 / 65536.0;

328 
z
 = 
x
 + 
y
;

329 
	`¥ötf
(

335 
z
);

337 i‡(
z
 == 9007199254740996.0) {

338 vﬁ©ûê
a
, 
b
;

339 
c
;

341 
a
 = 9007199254740992.0;

342 
b
 = 
a
 + 0.25;

343 
c
 = 
a
 + 0.25;

344 i‡(
b
 !
c
)

345 
	`¥ötf
(

350 
	}
}

359 
	$ldˇ°_ã°
()

361 vﬁ©ûê
a
 = 4294967219.0;

362 vﬁ©ûê
b
 = 4294967429.0;

363 
c
, 
d
;

364 
Æ
, 
bl
;

366 
Æ
 = 
a
;

367 
bl
 = 
b
;

368 
c
 = (Ë
a
 * (Ë
b
;

369 
d
 = 
Æ
 * 
bl
;

370 i‡(
c
 !
d
)

371 
	`¥ötf
(

377 
	}
}

379 
	$t°«n
()

381 
d
;

391 
d
 = 
NAN
;

392 
	`¥ötf
("\n");

393 
	`¥ötf
("NAN !NAN --> %d (should bê1)\n", 
d
 != d);

394 
	`¥ötf
("i¢™(NANË--> %d (should bê1)\n", 
	`i¢™
(
d
));

395 
	`¥ötf
("NAN >0.0 --> %d (should bê0)\n", 
d
 >= 0.0);

396 
	`¥ötf
("NAN <0.0 --> %d (should bê0)\n", 
d
 <= 0.0);

397 
	`¥ötf
(" #3||#4 --> %d (should bê0)\n", 
d
 >= 0.0 || d <= 0.0);

398 
	`¥ötf
("!(#3||#4Ë --> %d (should bê1)\n", !(
d
 >= 0.0 || d <= 0.0));

399 
	`¥ötf
(" #3 + #4 --> %d (should bê0)\n", (
d
 >= 0.0) + (d <= 0.0));

400 
	`¥ötf
("!(#3 + #4Ë--> %d (should bê1)\n", !((
d
 >= 0.0) + (d <= 0.0)));

401 
	}
}

403 
	#TSTINVALID
(
F
, 
C
) \

405 
	`„˛óªx˚±
(
FE_INVALID
); \

406 (Ë(
d
 
C
 0.0); \

407 i‡((
F
Ë^ !
	`„ã°ex˚±
(
FE_INVALID
)) \

408 
	`¥ötf
("The FE_INVALID flag is%s set for NAN " #C " 0.\n", \

409 (
F
) ? "" : "Çot"); \

410 } 0)

	)

412 
	$t°övÆid
()

414 #ifde‡
NO_FENV_H


415 
	`¥ötf
("The FE_INVALID flag couldÇot beÅested (no <fenv.h>)\n");

417 
d
 = 
NAN
;

418 
	`TSTINVALID
(1, ==);

419 
	`TSTINVALID
(1, !=);

420 
	`TSTINVALID
(0, >=);

421 
	`TSTINVALID
(0, <=);

422 
	`TSTINVALID
(0, >);

423 
	`TSTINVALID
(0, <);

425 
	}
}

431 
	$fu£d_madd_ã°
()

433 
	#TWO40
 (1099511627776.0Ë

	)

434 
	#C1U40
 (1.0 + 1.0 / 
TWO40
Ë

	)

435 vﬁ©ûê
x
 = 
C1U40
, 
y
 = C1U40, 
z
 = -1.0, 
d
;

437 
d
 = 
x
 * 
y
 + 
z
;

438 
	`¥ötf
("\nx * y + z wôh FP_CONTRACT " 
FP_CONTRACT
 " is %sfused.\n",

439 
d
 =2.0 * (1 + 0.5 / 
TWO40
) / TWO40 ? "" : "not ");

440 
	}
}

446 
	$doubÀ_to_unsig√d
()

448 
uöt64_t
 
i
 = (uint64_t) 1 << 63;

449 vﬁ©ûê
d
 = 
i
;

451 
	`„˛óªx˚±
(
FE_INVALID
);

452 
t1
 = (
uöt64_t
Ë
d
 !
i
;

453 
t2
 = 
	`„ã°ex˚±
(
FE_INVALID
);

454 i‡(
t1
 || 
t2
)

455 
	`¥ötf
("\nError in cast of doubleÅo unsigned: %s value%s\n",

456 
t1
 ? "öc‹ª˘" : "c‹ª˘", 
t2
 ? ", FE_INVALID" : "");

457 
	}
}

459 
	$ibm_ldc⁄v
()

461 
	#CAT1
(
X
Ë1##
	)
X

462 
	#CAT2
(
X
Ë
	`CAT1
(X)

	)

463 
	#LD0
 .000000000000000000000000000000000001L

	)

464 
	#LD1
 
	`CAT2
(
LD0
)

	)

465 
x
 = 1.0L + 
LD0
, 
y
 = 
LD1
;

467 i‡(
x
 > 1.0L && 
y
 == 1.0L) {

468 
	`¥ötf
("\nBad c⁄vîsi⁄ o‡" 
	`MAKE_STR
(
LD1
) "\n");

469 
	`¥ötf
("GŸ 1 in°ód o‡abouà1 + %La\n", 
x
 - 1.0L);

471 
	}
}

473 
	$maö
()

475 
	`Êﬂt_h
();

476 
	`Êﬂt_sizeof
();

477 
	`t°evÆ_mëhod
();

478 
	`ldˇ°_ã°
();

479 
	`t°«n
();

480 
	`t°övÆid
();

481 
	`fu£d_madd_ã°
();

482 
	`doubÀ_to_unsig√d
();

484 i‡(
LDBL_MIN_EXP
 =-968 && 
LDBL_MAX_EXP
 == 1024 &&

485 
LDBL_MANT_DIG
 == 106)

486 
	`ibm_ldc⁄v
();

488 
	`¥ötf
("\nRoundingÅoÇearest\n");

489 #ifde‡
FE_TONEAREST


490 i‡(
	`„£åound
(
FE_TONEAREST
))

491 
	`¥ötf
(

495 
	`t°Æl
();

497 #ifde‡
FE_TOWARDZERO


498 
	`¥ötf
("\nRoundingÅoward 0\n");

499 i‡(
	`„£åound
(
FE_TOWARDZERO
))

500 
	`¥ötf
("Error\n");

502 
	`t°Æl
();

505 #ifde‡
FE_DOWNWARD


506 
	`¥ötf
("\nRoundingÅo -oo\n");

507 i‡(
	`„£åound
(
FE_DOWNWARD
))

508 
	`¥ötf
("Error\n");

510 
	`t°Æl
();

513 #ifde‡
FE_UPWARD


514 
	`¥ötf
("\nRoundingÅo +oo\n");

515 i‡(
	`„£åound
(
FE_UPWARD
))

516 
	`¥ötf
("Error\n");

518 
	`t°Æl
();

522 
	}
}

	@tests/jit.c

9 
	~<°döt.h
>

10 
	~<°dio.h
>

12 
	tfunc_t
();

26 
	$maö
(
¨gc
, *
¨gv
[])

28 
uöt32_t
 
ö°ru˘i⁄s
[] = {

34 
func_t
 *
jô
 = (func_à*Ë
ö°ru˘i⁄s
;

35 
	`¥ötf
("%d\n", 
	`jô
());

38 
	}
}

	@tests/lena.c

8 
	~<°dio.h
>

9 
	~<°dlib.h
>

10 
	~<°rög.h
>

12 
	#ACTX_SIGN
 3

	)

13 
	#ACTX_VDATA
 4

	)

14 
	#ACTX_LEN
 5

	)

15 
	#ACTX_LEVEL
 25

	)

16 
	#ACTX_IPRED
 73

	)

17 
	#ACTX_UE_LEN
 10

	)

18 
	#ACTX_COUNT2
 166

	)

19 
	#ACTX_EOB2
 61

	)

21 *
	göp
 =

62 
	#IMG_SIZE_MAX_LOG2
 20

	)

64 
	#DCT_BITS
 10

	)

65 
	#DCT_SIZE_LOG2_MAX
 5

	)

66 
	#DCT_SIZE_MAX
 32

	)

67 
	#DCT_SIZE_MAX4
 128

	)

68 
	#DCT_SIZE_MAX_SQ2
 2048

	)

70 
	#FREQ_MAX
 63

	)

71 
	#SYM_COUNT
 1968

	)

73 
	gimg_d©a
[3][1 << 
IMG_SIZE_MAX_LOG2
];

74 
	ga_˘x
[
ACTX_COUNT2
];

75 
	ga_low
, 
	ga_ønge
 = 1, 
	g°ride
, 
	gy_sˇÀ
, 
	gc_sˇÀ
;

76 
	gd˘_c€f
[
DCT_SIZE_MAX4
];

78 
	$gë_bô
(
c
)

80 
v
, *
p
 = 
a_˘x
 + 
c
 * 2, 
b
 = *∞+ 1, 
s
 = b +Ö[1] + 1;

81 i‡(
a_ønge
 < 
SYM_COUNT
) {

82 
a_ønge
 *
SYM_COUNT
;

83 
a_low
 *
SYM_COUNT
;

84 i‡((
v
 = *
öp
)) {

86 
a_low
 +(
v
 - 1 - (v > 10) - (v > 13) - (v > 34) - (v > 92)) << 4;

88 
v
 = *++
öp
;

89 
öp
++;

90 
a_low
 +
v
 < 33 ? (v ^ 8) * 2 % 5

91 : (
v
 ^ 6Ë% 3 * 4 + (*
öp
++ ^ 8) * 2 % 5 + 4;

95 
v
 = 
a_ønge
 * 
b
 / 
s
;

96 i‡((
b
 = (
a_low
 >
v
))) {

97 
a_low
 -
v
;

98 
a_ønge
 -
v
;

100 
a_ønge
 = 
v
;

101 
p
[
b
]++;

102 i‡(
s
 > 
FREQ_MAX
) {

103 *
p
 /= 2;

104 
p
[1] /= 2;

106  
b
;

107 
	}
}

110 
	$gë_ue
(
c
)

112 
i
 = 0, 
v
 = 1;

113 !
	`gë_bô
(
c
 + 
i
))

114 
i
++;

115 
i
--)

116 
v
 +v + 
	`gë_bô
(
ACTX_VDATA
);

117  
v
 - 1;

118 
	}
}

120 
	$id˘
(*
d°
,

121 
d°_°ride
,

122 *
§c
,

123 
§c_°ride
,

124 
°ride2
,

125 
n
,

126 
rshi·
)

128 
l
 = 0;Ü < 
n
;Ü++)

129 
i
 = 0; i < 
n
; i++) {

130 
sum
 = 1 << (
rshi·
 - 1);

131 
j
 = 0; j < 
n
; j++)

132 
sum
 +
§c
[
j
 * 
§c_°ride
 + 
l
 * 
°ride2
] *

133 
d˘_c€f
[(2 * 
i
 + 1Ë* 
j
 * 
DCT_SIZE_MAX
 / 
n
 %

134 
DCT_SIZE_MAX4
];

135 
d°
[
i
 * 
d°_°ride
 + 
l
 * 
°ride2
] = 
sum
 >> 
rshi·
;

137 
	}
}

139 
	gbuf1
[
DCT_SIZE_MAX_SQ2
];

140 
	$decode_ªc
(
x
, 
y
, 
w_log2
)

142 
b
;

143 
w
 = 1 << 
w_log2
, 
n
 = w * w;

145 i‡((
w_log2
 > 
DCT_SIZE_LOG2_MAX
Ë|| (w_log2 > 2 && 
	`gë_bô
(w_log2 - 3))) {

146 
w
 /= 2;

147 
i
 = 0; i < 4; i++)

148 
	`decode_ªc
(
x
 + 
i
 % 2 * 
w
, 
y
 + i / 2 * w, 
w_log2
 - 1);

152 
¥ed_idx
 = 
	`gë_ue
(
ACTX_IPRED
);

153 
c_idx
 = 0; c_idx < 3; c_idx++) {

154 *
out
 = 
img_d©a
[
c_idx
] + 
y
 * 
°ride
 + 
x
;

155 
c_idx1
 = 
c_idx
 > 0;

158 
	`mem£t
(
buf1
, 0, 
n
 * ());

159 
i
 = 0; i < 
n
; i++) {

160 i‡(
	`gë_bô
(
ACTX_EOB2
 + 
w_log2
 * 2 + 
c_idx1
))

162 
i
 +
	`gë_ue
(
ACTX_LEN
 + 
c_idx1
 * 
ACTX_UE_LEN
);

163 
b
 = 1 - 2 * 
	`gë_bô
(
ACTX_SIGN
);

164 
buf1
[
i
] =

165 
b
 *

166 (
	`gë_ue
(
ACTX_LEVEL
 + (
c_idx1
 + (
i
 < 
n
 / 8Ë* 2Ë* 
ACTX_UE_LEN
) +

168 (
c_idx
 ? 
c_sˇÀ
 : 
y_sˇÀ
);

172 i‡(!
¥ed_idx
) {

173 
dc
 = 0;

174 
i
 = 0; i < 
w
; i++) {

175 
dc
 +
y
 ? 
out
[-
°ride
 + 
i
] : 0;

176 
dc
 +
x
 ? 
out
[
i
 * 
°ride
 - 1] : 0;

178 *
buf1
 +
x
 && 
y
 ? 
dc
 / 2 : dc;

182 
	`id˘
(
buf1
 + 
n
, 1, buf1, 1, 
w
, w, 
DCT_BITS
);

184 
	`id˘
(
out
, 
°ride
, 
buf1
 + 
n
, 
w
, 1, w, 
DCT_BITS
 + 
w_log2
);

186 i‡(!
¥ed_idx
)

190 
sw≠
 = 
¥ed_idx
 < 17, 
‰ac
;

191 
dñè
 = 
sw≠
 ? 9 - 
¥ed_idx
 :Öred_idx - 25;

192 
i
 = 0; i < 
w
; i++)

193 
j
 = 0; j < 
w
; j++) {

194 
k
 = 0; k < 2; k++) {

195 
x1
 = 
i
 * 
dñè
 + delta;

196 
‰ac
 = 
x1
 & 7;

197 
x1
 = (x1 >> 3Ë+ 
j
 + 
k
;

198 i‡((
b
 = (
x1
 < 0)))

199 
x1
 = (x1 * 8 + 
dñè
 / 2) / delta - 2;

200 
x1
 = x1 < 
w
 ? x1 : w - 1;

201 
buf1
[
k
] =

202 
b
 ^ 
sw≠
 ? 
out
[
x1
 * 
°ride
 - 1] : out[-stride + x1];

204 
out
[
sw≠
 ? 
j
 * 
°ride
 + 
i
 : i * stride + j] +=

205 (*
buf1
 * (8 - 
‰ac
) + buf1[1] * frac + 4) >> 3;

208 
	}
}

210 
	$maö
()

212 
a
 = 0;

213 
b
 = 74509276;

214 
i
 = 0; i < 128; i++) {

215 
d˘_c€f
[
i
 + 96 & 127] = ((
a
 >> 19) + 1) >> 1;

216 
c
 = 
b
;

217 
b
 = (2144896910LL * b >> 30Ë- 
a
;

218 
a
 = 
c
;

221 *
d˘_c€f
 = 1024;

222 
w_log2
 = 
	`gë_ue
(
ACTX_LEN
);

223 
°ride
 = 1 << 
w_log2
;

224 
h
 = 
°ride
 - 
	`gë_ue
(
ACTX_LEN
);

225 
y_sˇÀ
 = 
	`gë_ue
(
ACTX_LEN
);

226 
c_sˇÀ
 = 
	`gë_ue
(
ACTX_LEN
);

228 
	`decode_ªc
(0, 0, 
w_log2
);

231 
FILE
 *
Â
 = 
	`f›í
("lena.ppm", "wb");

232 
	`Ârötf
(
Â
, "P6 %d %d 255 ", 
°ride
, 
h
);

233 
i
 = 0; i < 
h
 * 
°ride
; i++) {

234 
y
 = 
img_d©a
[0][
i
], 
cg
 = img_d©a[1][i], 
co
 = img_data[2][i];

235 
t
 = 
y
 - 
cg
;

236 
	#PUT
(
v
Ë
	`Ârötf
(
Â
, "%c", (v < 0Ë? 0 : (v > 255Ë? 255 : v)

	)

237 
	`PUT
(
t
 + 
co
);

238 
	`PUT
(
y
 + 
cg
);

239 
	`PUT
(
t
 - 
co
);

240 #unde‡
PUT


242 
	`f˛o£
(
Â
);

245 
	}
}

	@tests/line.c

34 
	~<°dboﬁ.h
>

35 
	~<°döt.h
>

36 
	~<°dio.h
>

39 
	#SVPNG_PUT
(
u
Ë
	`Âutc
(u, 
Â
)

	)

49 
	$sv≤g
(
FILE
 *
Â
, 
w
, 
h
, c⁄° 
uöt8_t
 *
img
, 
boﬁ
 
Æpha
)

51 c⁄° 
t
[] = {

69 
a
 = 1, 
b
 = 0, 
c
, 
p
 = 
w
 * (
Æpha
 ? 4 : 3Ë+ 1, 
x
, 
y
;

71 
	#SVPNG_U8A
(
ua
, 
l
) \

72 
size_t
 
i
 = 0; i < 
l
; i++) \

73 
	`SVPNG_PUT
((
ua
)[
i
]);

	)

75 
	#SVPNG_U32
(
u
) \

77 
	`SVPNG_PUT
((
u
) >> 24); \

78 
	`SVPNG_PUT
(((
u
) >> 16) & 255); \

79 
	`SVPNG_PUT
(((
u
) >> 8) & 255); \

80 
	`SVPNG_PUT
((
u
) &255); \

81 } 0)

	)

83 
	#SVPNG_U8C
(
u
) \

85 
	`SVPNG_PUT
(
u
); \

86 
c
 ^(
u
); \

87 
c
 = (¯>> 4Ë^ 
t
[c & 15]; \

88 
c
 = (¯>> 4Ë^ 
t
[c & 15]; \

89 } 0)

	)

91 
	#SVPNG_U8AC
(
ua
, 
l
) \

92 
size_t
 
i
 = 0; i < 
l
; i++) \

93 
	`SVPNG_U8C
((
ua
)[
i
])

	)

95 
	#SVPNG_U16LC
(
u
) \

97 
	`SVPNG_U8C
((
u
) &255); \

98 
	`SVPNG_U8C
(((
u
) >> 8) & 255); \

99 } 0)

	)

101 
	#SVPNG_U32C
(
u
) \

103 
	`SVPNG_U8C
((
u
) >> 24); \

104 
	`SVPNG_U8C
(((
u
) >> 16) & 255); \

105 
	`SVPNG_U8C
(((
u
) >> 8) & 255); \

106 
	`SVPNG_U8C
((
u
) &255); \

107 } 0)

	)

109 
	#SVPNG_U8ADLER
(
u
) \

111 
	`SVPNG_U8C
(
u
); \

112 
a
 = (®+ (
u
)) % 65521; \

113 
b
 = (b + 
a
) % 65521; \

114 } 0)

	)

116 
	#SVPNG_BEGIN
(
s
, 
l
) \

118 
	`SVPNG_U32
(
l
); \

119 
c
 = ~0U; \

120 
	`SVPNG_U8AC
(
s
, 4); \

121 } 0)

	)

123 
	#SVPNG_END
(Ë
	`SVPNG_U32
(~
c
)

	)

125 
	`SVPNG_U8A
("\x89PNG\r\n\32\n", 8);

126 
	`SVPNG_BEGIN
("IHDR", 13);

127 
	`SVPNG_U32C
(
w
);

128 
	`SVPNG_U32C
(
h
);

129 
	`SVPNG_U8C
(8);

131 
	`SVPNG_U8C
(
Æpha
 ? 6 : 2);

133 
	`SVPNG_U8AC
("\0\0\0", 3);

134 
	`SVPNG_END
();

135 
	`SVPNG_BEGIN
("IDAT", 2 + 
h
 * (5 + 
p
) + 4);

136 
	`SVPNG_U8AC
("\x78\1", 2);

138 
y
 = 0; y < 
h
; y++) {

140 
	`SVPNG_U8C
(
y
 =
h
 - 1);

141 
	`SVPNG_U16LC
(
p
);

143 
	`SVPNG_U16LC
(~
p
);

144 
	`SVPNG_U8ADLER
(0);

145 
x
 = 0; x < 
p
 - 1; x++, 
img
++)

146 
	`SVPNG_U8ADLER
(*
img
);

148 
	`SVPNG_U32C
((
b
 << 16Ë| 
a
);

149 
	`SVPNG_END
();

150 
	`SVPNG_BEGIN
("IEND", 0);

151 
	`SVPNG_END
();

152 
	}
}

154 
	~<°rög.h
>

155 
	#Q
 (20)

	)

156 
	#Q_PI
 (1686629713 >> (29 - 
Q
))

	)

159 
öt32_t
 
	tqfixed_t
;

162 
öt64_t
 
	tqbuf_t
;

165 
	#f2Q
(
x
Ë((
qfixed_t
Ë((xË* (1 << 
Q
)))

	)

168 
	#Q2f
(
x
Ë(((Ë(x)Ë/ (1 << 
Q
))

	)

171 
	#Q2I
(
x
Ë((Ë((xË>> 
Q
))

	)

174 
	#I2Q
(
x
Ë((
qfixed_t
Ë((xË<< 
Q
))

	)

177 
	#QFMT_MAX
 0x7FFFFFFF

	)

180 
	#QFMT_MIN
 0x80000000

	)

183 
ölöe
 
qfixed_t
 
	$q_add
(
qfixed_t
 
a
, qfixed_à
b
)

185 
qbuf_t
 
tmp
 = (qbuf_tË
a
 + (qbuf_tË
b
;

186 i‡(
tmp
 > (
qbuf_t
Ë
QFMT_MAX
)

187  (
qfixed_t
Ë
QFMT_MAX
;

188 i‡(~
tmp
 + 1 >(
qbuf_t
Ë
QFMT_MIN
)

189  (
qfixed_t
Ë
QFMT_MIN
;

190  (
qfixed_t
Ë
tmp
;

191 
	}
};

194 
ölöe
 
qfixed_t
 
	$q_mul
(
qfixed_t
 
a
, qfixed_à
b
)

196 
qbuf_t
 
tmp
 = (qbuf_tË
a
 * (qbuf_tË
b
;

199 
tmp
 +(
qbuf_t
Ë(1 << (
Q
 - 1));

200 
tmp
 >>
Q
;

203 i‡(
tmp
 > (
qbuf_t
Ë
QFMT_MAX
)

204  (
qfixed_t
Ë
QFMT_MAX
;

205 i‡(
tmp
 * -1 >(
qbuf_t
Ë
QFMT_MIN
)

206  (
qfixed_t
Ë
QFMT_MIN
;

207  (
qfixed_t
Ë
tmp
;

208 
	}
}

211 
ölöe
 
qfixed_t
 
	$q_div
(
qfixed_t
 
a
, qfixed_à
b
)

213 
qbuf_t
 
tmp
 = (qbuf_tË
a
 << 
Q
;

214 i‡((
tmp
 >0 && 
b
 >= 0) || (tmp < 0 && b < 0)) {

215 
tmp
 +(
b
 >> 1);

217 
tmp
 -(
b
 >> 1);

219  (
qfixed_t
Ë(
tmp
 / 
b
);

220 
	}
}

223 
ölöe
 
qfixed_t
 
	$q_Êo‹
(
qfixed_t
 
x
)

225 
qfixed_t
 
mask
 = (0xFFFFFFFF >> 
Q
) << Q;

226  
x
 & 
mask
;

227 
	}
}

230 
ölöe
 
qfixed_t
 
	$q_˚û
(
qfixed_t
 
x
)

232 
qfixed_t
 
mask
 = (0xFFFFFFFF >> 
Q
) << Q;

233 
qfixed_t
 
dñè
 = 
x
 & ~
mask
;

234 
x
 = x & 
mask
;

235  
dñè
 ? 
	`q_add
(
x
, 1 << 
Q
) : x;

236 
	}
}

239 
ölöe
 
qfixed_t
 
	$q_sqπ
(
qfixed_t
 
x
)

241 i‡(
x
 <= 0)

243 i‡(
x
 < 
	`I2Q
(1Ë+ (1 << (
Q
 / 2 - 1)) && x > I2Q(1) - (1 << (Q / 2 - 1)))

244  
	`I2Q
(1);

246 
qfixed_t
 
ªs
 = 0;

247 
qfixed_t
 
bô
 = 1 << 15;

250 
off£t
 = 0;

251 
qfixed_t
 
i
 = 
x
; !(0x40000000 & i); i <<= 1)

252 ++
off£t
;

253 
off£t
 = (offset & ~1);

254 
x
 <<
off£t
;

257 
bô
 > 
x
)

258 
bô
 >>= 1;

260 ; 
bô
 > 0; bit >>= 1) {

261 
tmp
 = 
bô
 + 
ªs
;

264 i‡(
tmp
 > 46340)

267 
squ¨e
 = 
tmp
 *Åmp;

268 i‡(
squ¨e
 <
x
) {

269 
ªs
 = 
tmp
;

270 i‡(
squ¨e
 =
x
)

275 
off£t
 >>= 1;

276 
off£t
 -(
Q
 >> 1);

277  (
off£t
 >0Ë? 
ªs
 >> offset :Ñes << (-offset);

278 
	}
}

281 
ölöe
 
	$q_söcos
(
qfixed_t
 
ødius
, qfixed_à*
sö_t
, qfixed_à*
cos_t
)

283 
ªgi⁄
 = (
ødius
 / (
Q_PI
 >> 1)) & 0b11;

286 
qfixed_t
 
thëa
 = 
ødius
 % (
Q_PI
 >> 1);

287 i‡(
ªgi⁄
 & 0b1)

288 
thëa
 = (
Q_PI
 >> 1) -Åheta;

291 
ødius
 = 
Q_PI
 >> 1;

292 
qfixed_t
 
cos_ød
 = 0;

293 
qfixed_t
 
sö_ød
 = 
	`I2Q
(1);

296 *
cos_t
 = 
	`I2Q
(1);

297 *
sö_t
 = 0;

299 
ødius
 > 0) {

300 i‡(
ødius
 <
thëa
) {

301 
thëa
 -
ødius
;

307 
qfixed_t
 
tmp
 = 
	`q_mul
(*
cos_t
, 
cos_ød
Ë- q_mul(*
sö_t
, 
sö_ød
);

308 *
sö_t
 = 
	`q_mul
(*sö_t, 
cos_ød
Ë+ q_mul(*
cos_t
, 
sö_ød
);

309 *
cos_t
 = 
tmp
;

311 i‡(
thëa
 == 0)

315 
ødius
 >>= 1;

316 
sö_ød
 = 
	`q_sqπ
((
	`I2Q
(1Ë- 
cos_ød
) >> 1);

317 
cos_ød
 = 
	`q_sqπ
((
	`I2Q
(1) + cos_rad) >> 1);

320 i‡(
ªgi⁄
 == 0b10 ||Ñegion == 0b01)

321 *
cos_t
 = ~*cos_t + 1;

322 i‡(
ªgi⁄
 & 0b10)

323 *
sö_t
 = ~*sin_t + 1;

324 
	}
}

326 
	#W
 512

	)

327 
	#H
 512

	)

328 
uöt8_t
 
	gimg
[
W
 * 
H
 * 3];

330 
	#max
(
a
, 
b
Ë(◊Ë> (bË? (aË: (b))

	)

331 
	#mö
(
a
, 
b
Ë(◊Ë< (bË? (aË: (b))

	)

337 
qfixed_t
 
	$ˇpsuÀSDF
(
qfixed_t
 
px
,

338 
qfixed_t
 
py
,

339 
qfixed_t
 
ax
,

340 
qfixed_t
 
ay
,

341 
qfixed_t
 
bx
,

342 
qfixed_t
 
by
,

343 
qfixed_t
 
r
)

345 
qfixed_t
 
∑x
 = 
	`q_add
(
px
, -
ax
);

346 
qfixed_t
 
∑y
 = 
	`q_add
(
py
, -
ay
);

347 
qfixed_t
 
bax
 = 
	`q_add
(
bx
, -
ax
);

348 
qfixed_t
 
bay
 = 
	`q_add
(
by
, -
ay
);

350 
qfixed_t
 
t0
 = 
	`q_add
(
	`q_mul
(
∑x
, 
bax
), q_mul(
∑y
, 
bay
));

351 
qfixed_t
 
t1
 = 
	`q_add
(
	`q_mul
(
bax
, bax), q_mul(
bay
, bay));

352 
qfixed_t
 
tmp
 = 
	`mö
(
	`q_div
(
t0
, 
t1
), 
	`I2Q
(1));

353 
qfixed_t
 
h
 = 
	`max
(
tmp
, 0);

355 
qfixed_t
 
dx
 = 
	`q_add
(
∑x
, -
	`q_mul
(
bax
, 
h
));

356 
qfixed_t
 
dy
 = 
	`q_add
(
∑y
, -
	`q_mul
(
bay
, 
h
));

358 
tmp
 = 
	`q_add
(
	`q_mul
(
dx
, dx), q_mul(
dy
, dy));

359 
qfixed_t
 
ªs
 = 
	`q_add
(
	`q_sqπ
(
tmp
), -
r
);

360  
ªs
;

361 
	}
}

363 
	#PUT
(
v
) \

364 
p
[
v
] = (
uöt8_t
Ë
	`Q2I
( \

365 
	`q_add
(
p
[
v
] * q_add((1 << 
Q
), -
Æpha
), 
	`q_mul
(
g
,áÕhaË* 255))

	)

368 
	$ÆphabÀnd
(
x
,

369 
y
,

370 
qfixed_t
 
Æpha
,

371 
qfixed_t
 
r
,

372 
qfixed_t
 
g
,

373 
qfixed_t
 
b
)

375 
uöt8_t
 *
p
 = 
img
 + (
y
 * 
W
 + 
x
) * 3;

376 
	`PUT
(0);

377 
	`PUT
(1);

378 
	`PUT
(2);

379 
	}
}

380 #unde‡
PUT


383 
	$löeSDFAABB
(
qfixed_t
 
ax
, qfixed_à
ay
, qfixed_à
bx
, qfixed_à
by
, qfixed_à
r
)

385 
x0
 = 
	`Q2I
(
	`q_Êo‹
(
	`q_add
(
	`mö
(
ax
, 
bx
), -
r
)));

386 
x1
 = 
	`Q2I
(
	`q_˚û
(
	`q_add
(
	`max
(
ax
, 
bx
), 
r
)));

387 
y0
 = 
	`Q2I
(
	`q_Êo‹
(
	`q_add
(
	`mö
(
ay
, 
by
), -
r
)));

388 
y1
 = 
	`Q2I
(
	`q_˚û
(
	`q_add
(
	`max
(
ay
, 
by
), 
r
)));

389 
y
 = 
y0
; y <
y1
; y++) {

390 
x
 = 
x0
; x <
x1
; x++)

391 
	`ÆphabÀnd
(
x
, 
y
,

392 
	`max
(
	`mö
((1 << (
Q
 - 1)Ë- 
	`ˇpsuÀSDF
(
	`I2Q
(
x
), I2Q(
y
), 
ax
,

393 
ay
, 
bx
, 
by
, 
r
),

394 
	`I2Q
(1)),

398 
	}
}

400 
	$maö
()

402 
	`mem£t
(
img
, 255, (img));

405 
qfixed_t
 
cx
 = 
W
 * (1 << (
Q
 - 1)), 
cy
 = 
H
 * (1 << (Q - 1));

407 
qfixed_t
 
˘
, 
°
;

409 
j
 = 0; j < 5; j++) {

410 
qfixed_t
 
r1
 = 
	`mö
(
W
, 
H
Ë* 
	`q_mul
((
	`I2Q
(
j
Ë+ (1 << (
Q
 - 1))), 
	`f2Q
(0.085f));

411 
qfixed_t
 
r2
 = 
	`mö
(
W
, 
H
Ë* 
	`q_mul
((
	`I2Q
(
j
Ë+ (3 << (
Q
 - 1))), 
	`f2Q
(0.085f));

412 
qfixed_t
 
t
 = 
j
 * 
	`q_div
(
Q_PI
, 
	`I2Q
(64));

413 
qfixed_t
 
r
 = (
j
 + 1Ë* (1 << (
Q
 - 1));

414 
i
 = 1; i <= 64; i++) {

415 
t
 = 
	`q_add
—, 
	`q_mul
(
	`I2Q
(2), 
	`q_div
(
Q_PI
, I2Q(64))));

416 
	`q_söcos
(
t
, &
°
, &
˘
);

417 
	`löeSDFAABB
(
	`q_add
(
cx
, 
	`q_mul
(
r1
, 
˘
)), q_add(
cy
, -q_mul‘1, 
°
)),

418 
	`q_add
(
cx
, 
	`q_mul
(
r2
, 
˘
)), q_add(
cy
, -q_mul‘2, 
°
)), 
r
);

421 
	`sv≤g
(
	`f›í
("löe.≤g", "wb"), 
W
, 
H
, 
img
, 
Ál£
);

422 
	}
}

	@tests/maj2random.c

19 
	~<m©h.h
>

20 
	tuöt
;

22 
	ma
[2];

23 } 
	tvec2
;

25 
uöt
 
	ma
[2];

26 } 
	tuvec2
;

29 
uöt
 
	gsha256_k
[8] = {

34 
uöt
 
	$r‹
(
uöt
 
x
, 
d
)

36  (
x
 >> 
d
) | (x << (32 - d));

37 
	}
}

38 
uöt
 
	$sigma0
(
uöt
 
h1
)

40  
	`r‹
(
h1
, 2) ^Ñor(h1, 13) ^Ñor(h1, 22);

41 
	}
}

42 
uöt
 
	$sigma1
(
uöt
 
h4
)

44  
	`r‹
(
h4
, 6) ^Ñor(h4, 11) ^Ñor(h4, 25);

45 
	}
}

46 
uöt
 
	$ch
(
uöt
 
x
, uöà
y
, uöà
z
)

48  
z
 ^ (
x
 & (
y
 ^ z));

49 
	}
}

50 
uöt
 
	$maj
(
uöt
 
x
, uöà
y
, uöà
z
)

52  (
x
 & 
y
Ë^ ((x ^ yË& 
z
);

53 
	}
}

54 
uöt
 
	$gamma0
(
uöt
 
a
)

56  
	`r‹
(
a
, 7) ^Ñor(a, 18) ^ (a >> 3);

57 
	}
}

58 
uöt
 
	$gamma1
(
uöt
 
b
)

60  
	`r‹
(
b
, 17) ^Ñor(b, 19) ^ (b >> 10);

61 
	}
}

63 
vec2
 
	$un‹m
(
uvec2
 
n
)

65 
vec2
 
r
 = {(Ë(
n
.
a
[0] & ((1u << 23) - 1u)) / () ((1u << 23) - 1u),

66 (Ë(
n
.
a
[1] & ((1u << 23) - 1u)) / () ((1u << 23) - 1u)};

67  
r
;

68 
	}
}

69 
uvec2
 
	$sign
(
vec2
 
v
)

71 
uvec2
 
r
 = {
v
.
a
[0] < 0.0f, v.a[1] < 0.0f};

72  
r
;

73 
	}
}

75 
uvec2
 
	$maj_exåa˘
(
vec2
 
uv
)

86 
uvec2
 
s
 = 
	`sign
(
uv
);

87 
uöt
 
x
 = (uötË(
	`Ábsf
(
uv
.
a
[0]Ë* (Ë(1u << 23)Ë| (
s
.a[0] << 23);

88 
uöt
 
y
 = (uötË(
	`Ábsf
(
uv
.
a
[1]Ë* (Ë(1u << 23)Ë| (
s
.a[1] << 23);

90 
uvec2
 
r
 = {(
x
Ë| (
y
 << 24), (y >> 8) | (x << 16)};

91  
r
;

92 
	}
}

94 
vec2
 
	$maj_øndom
(
vec2
 
uv
, 
uöt
 
NROUNDS
)

96 
uöt
 
H
[8] = {0u, 0u, 0u, 0u, 0u, 0u, 0u, 0u};

97 
uöt
 
W
[2];

99 
uvec2
 
°
 = 
	`maj_exåa˘
(
uv
);

101 
W
[0] = 
°
.
a
[0];

102 
W
[1] = 
°
.
a
[1];

104 
uöt
 
i
 = 0; i < 
NROUNDS
; i++) {

105 
W
[
i
 & 1] = 
	`gamma1
(W[(i - 2) & 1]) + W[(i - 7) & 1] +

106 
	`gamma0
(
W
[(
i
 - 15) & 1]) + W[(i - 16) & 1];

110 
uöt
 
i
 = 0; i < 
NROUNDS
; i++) {

111 
uöt
 
T0
 =

112 
W
[
i
 & 1] + 
H
[7] + 
	`sigma1
(H[4]Ë+ 
	`ch
(H[4], H[5], H[6]Ë+ 
sha256_k
[i];

113 
uöt
 
T1
 = 
	`maj
(
H
[0], H[1], H[2]Ë+ 
	`sigma0
(H[0]);

114 
H
[7] = H[6];

115 
H
[6] = H[5];

116 
H
[5] = H[4];

117 
H
[4] = H[3] + 
T0
;

118 
H
[3] = H[2];

119 
H
[2] = H[1];

120 
H
[1] = H[0];

121 
H
[0] = 
T0
 + 
T1
;

123 
uvec2
 
u
 = {
H
[0] ^ H[1] ^ H[2] ^ H[3], H[4] ^ H[5] ^ H[6] ^ H[7]};

124  
	`un‹m
(
u
);

125 
	}
}

127 
	~<öây≥s.h
>

128 
	~<°döt.h
>

129 
	~<°dio.h
>

130 
	~<°dlib.h
>

131 
	~<°rög.h
>

133 
	tuŒ⁄g
;

135 
	$¢ˇçrötf
(*
buf
, 
size_t
 
buÊí
, c⁄° *
fmt
, 
öt64_t
 
n
)

137 
size_t
 
Àn
 = 
	`°æí
(
buf
);

138 
	`¢¥ötf
(
buf
 + 
Àn
, 
buÊí
 -Üí, 
fmt
, 
n
);

139 
	}
}

141 *
	$f‹m©_comma
(
öt64_t
 
n
)

143 
buf
[65];

145 
buf
[0] = 0;

146 
n2
 = 0;

147 
sˇÀ
 = 1;

148 i‡(
n
 < 0) {

149 
buf
[0] = '-';

150 
buf
[1] = 0;

151 
n
 = -n;

153 
n
 >= 1000) {

154 
n2
 =Ç2 + 
sˇÀ
 * (
n
 % 1000);

155 
n
 /= 1000;

156 
sˇÀ
 *= 1000;

158 
	`¢ˇçrötf
(
buf
, (buf), "%d", 
n
);

159 
sˇÀ
 != 1) {

160 
sˇÀ
 /= 1000;

161 
n
 = 
n2
 / 
sˇÀ
;

162 
n2
 =Ç2 % 
sˇÀ
;

163 
	`¢ˇçrötf
(
buf
, (buf), ",%03d", 
n
);

165  
buf
;

166 
	}
}

168 *
	$f‹m©_øã
(
øã
)

170 
buf
[65];

171 
unô
 = ' ';

172 
divis‹
 = 1;

173 i‡(
øã
 > 1e9) {

174 
divis‹
 = 1e9;

175 
unô
 = 'G';

176 } i‡(
øã
 > 1e6) {

177 
divis‹
 = 1e6;

178 
unô
 = 'M';

179 } i‡(
øã
 > 1e3) {

180 
divis‹
 = 1e3;

181 
unô
 = 'K';

183 
	`¢¥ötf
(
buf
, (buf), "%.1‡%c", 
øã
 / 
divis‹
, 
unô
);

184  
buf
;

185 
	}
}

187 
vec2
 
	$f1
(
uŒ⁄g
 
i
, uŒ⁄g 
j
)

189  (
vec2
){0.0f, (Ë
i
 / (Ë
j
};

190 
	}
}

191 
vec2
 
	$f2
(
uŒ⁄g
 
i
, uŒ⁄g 
j
)

193  (
vec2
){(Ë
i
 / (Ë
j
, 0.0f};

194 
	}
}

195 
vec2
 
	$f3
(
uŒ⁄g
 
i
, uŒ⁄g 
j
)

197  (
vec2
){(Ë
i
 / (Ë
j
, () i / () j};

198 
	}
}

200 
ã°_maj
(c⁄° *
«me
,

201 
NROUNDS
,

202 
uŒ⁄g
 
cou¡
,

203 
uŒ⁄g
 
ønge
,

204 
	$vec2
 (*
f
)(
uŒ⁄g
, ullong))

206 
vec2
 
sum
 = {0.f, 0.f};

207 
vec2
 
v¨
 = {0.f, 0.f};

209 
	`fÊush
(
°dout
);

210 
uŒ⁄g
 
i
 = 0; i < 
cou¡
; i++) {

211 
vec2
 
p
 = 
	`f
(
i
, 
ønge
);

212 
vec2
 
q
 = 
	`maj_øndom
(
p
, 
NROUNDS
);

213 
sum
.
a
[0] +
q
.a[0];

214 
sum
.
a
[1] +
q
.a[1];

215 
v¨
.
a
[0] +(
q
.a[0] - .5f) * (q.a[0] - .5f);

216 
v¨
.
a
[1] +(
q
.a[1] - .5f) * (q.a[1] - .5f);

219 
	`¥ötf
("%-32s%12s%12.5f%12.5f%12.5f%12.5f%12.5f%12.5f\n", 
«me
,

220 
	`f‹m©_comma
(
cou¡
), 
sum
.
a
[0] / count, sum.a[1] / count,

221 
v¨
.
a
[0] / 
cou¡
, v¨.a[1] / cou¡, 
	`sqπ
(var.a[0] / count),

222 
	`sqπ
(
v¨
.
a
[1] / 
cou¡
));

223 
	}
}

225 
	$ã°_hódî
(c⁄° *
«me
)

227 
	`¥ötf
("%-32s%12s%12s%12s%12s%12s%12s%12s\n", 
«me
, "count", "mean(x)",

229 
	}
}

231 
	$run_Æl_ã°s
(
NROUNDS
, 
uŒ⁄g
 
i
, uŒ⁄g 
j
)

233 
«me
[32];

234 
	`¢¥ötf
(
«me
, “ame), "maj_øndom (NROUNDS=%d)", 
NROUNDS
);

235 
	`¥ötf
("\n");

236 
	`ã°_hódî
(
«me
);

237 
	`ã°_maj
("– 0, (0 - 1K)/8K )", 
NROUNDS
, 
i
, 
j
, 
f1
);

238 
	`ã°_maj
("– 0, (0 - 8K)/8K )", 
NROUNDS
, 
j
, j, 
f1
);

239 
	`ã°_maj
("–(0 - 1K)/8K ), 0 )", 
NROUNDS
, 
i
, 
j
, 
f2
);

240 
	`ã°_maj
("–(0 - 8K)/8K ), 0 )", 
NROUNDS
, 
j
, j, 
f2
);

241 
	`ã°_maj
("–(0 - 1K)/8K ), (0 - 1K)/8K )", 
NROUNDS
, 
i
, 
j
, 
f3
);

242 
	`ã°_maj
("–(0 - 8K)/8K ), (0 - 8K)/8K )", 
NROUNDS
, 
j
, j, 
f3
);

243 
	`¥ötf
("\n");

244 
	}
}

246 
	$maö
(
¨gc
, **
¨gv
)

248 
uŒ⁄g
 
i
 = 1000;

249 
uŒ⁄g
 
j
 = 8000;

250 
	`run_Æl_ã°s
(2, 
i
, 
j
);

251 
	`run_Æl_ã°s
(4, 
i
, 
j
);

252 
	`run_Æl_ã°s
(6, 
i
, 
j
);

253 
	`run_Æl_ã°s
(8, 
i
, 
j
);

255 
	}
}

	@tests/mandelbrot.c

12 
	~<°döt.h
>

13 
	~<°dio.h
>

14 
	~<°dlib.h
>

15 
	~<°rög.h
>

19 
	$toPªc
(
f
, 
bôsPªcisi⁄
)

21 
whﬁe
 = ((Ë
	`Êo‹
(
f
Ë<< (
bôsPªcisi⁄
));

22 
∑π
 = (
f
 - 
	`Êo‹
(f)Ë* (
	`pow
(2, 
bôsPªcisi⁄
));

23 
ªt
 = 
whﬁe
 + 
∑π
;

24 
	`¥ötf
("%x\n", 
ªt
);

25  
ªt
;

26 
	}
}

29 c⁄° 
	gwidth
 = 64;

30 c⁄° 
	gheight
 = 32;

31 c⁄° 
	gzoom
 = 1;

33 
	$maö
(
¨gc
, *
¨gv
[])

35 c⁄° 
bôsPªcisi⁄
 = 6;

37 c⁄° 
X1
 = 0xE0;

38 c⁄° 
X2
 = 0x90;

39 c⁄° 
Y1
 = 0xC0;

40 c⁄° 
Y2
 = 0x60;

41 c⁄° 
LIMIT
 = 0x100;

44 
ch¨£t
[] = ".:-=X$#@ ";

45 c⁄° 
max_ôî
 = (
ch¨£t
) - 1;

47 
py
 = 0;Öy < 
height
 * 
zoom
;Öy++) {

48 
px
 = 0;Öx < 
width
 * 
zoom
;Öx++) {

49 
x0
 = ((
px
 * 
X1
Ë/ 
width
Ë- 
X2
;

50 
y0
 = ((
py
 * 
Y1
Ë/ 
height
Ë- 
Y2
;

51 
x
 = 0, 
y
 = 0;

53 
i
;

54 
i
 = 0; i < 
max_ôî
; i++) {

55 
xSqr
 = (
x
 * xË>> 
bôsPªcisi⁄
;

56 
ySqr
 = (
y
 * yË>> 
bôsPªcisi⁄
;

66 i‡((
xSqr
 + 
ySqr
Ë>
LIMIT
)

69 
xt
 = 
xSqr
 - 
ySqr
 + 
x0
;

70 
y
 = (((
x
 * yË>> 
bôsPªcisi⁄
Ë* 2Ë+ 
y0
;

71 
x
 = 
xt
;

73 
	`¥ötf
("\033[48;05;%dm%c\033[0m", 
i
, 
ch¨£t
[i - 1]);

76 
	`¥ötf
("\n");

78 
	}
}

	@tests/map/mt19937.c

6 
	~"mt19937.h
"

8 
uöt64_t
 
	gMT
[624];

9 
uöt64_t
 
	gödex
 = 0;

11 
	$mt19937_öô
(
uöt64_t
 
£ed
)

13 
MT
[0] = 
£ed
;

14 
i
 = 1; i < 624; i++) {

15 
MT
[
i
] = 0xffffffffULL &

16 (0x6c078965ULL * (
MT
[
i
 - 1] ^ (MT[i - 1] >> 30)) + i);

18 
	}
}

20 
	$gíî©e_numbîs
()

22 
i
 = 0; i < 624; i++) {

23 
uöt64_t
 
y
 =

24 (
MT
[
i
] & 0x80000000ULL) + (MT[(i + 1) % 624] & 0x7fffffffULL);

25 
MT
[
i
] = MT[(ò+ 397Ë% 624] ^ (
y
 >> 1);

26 i‡(
y
 % 2 != 0)

27 
MT
[
i
] = MT[i] ^ 0x9908b0dfULL;

29 
	}
}

31 
uöt64_t
 
	$mt19937_exåa˘
()

33 i‡(
ödex
 == 0)

34 
	`gíî©e_numbîs
();

36 
uöt64_t
 
y
 = 
MT
[
ödex
];

37 
y
 = y ^ (y >> 11);

38 
y
 = y ^ ((y << 7) & 0x9d2c5680ULL);

39 
y
 = y ^ ((y << 15) & 0xefc60000ULL);

40 
y
 = y ^ (y >> 18);

42 
ödex
 = (index + 1) % 624;

43  
y
;

44 
	}
}

	@tests/map/mt19937.h

6 #¥agm®
⁄˚


8 
	~<°döt.h
>

17 
mt19937_öô
(
uöt64_t
 
£ed
);

20 
uöt64_t
 
mt19937_exåa˘
();

	@tests/map/test-map.c

1 
	~<as£π.h
>

2 
	~<°döt.h
>

3 
	~<°dio.h
>

4 
	~<°dlib.h
>

5 
	~<time.h
>

7 
	~"m≠.h
"

8 
	~"mt19937.h
"

10 
	$sw≠
(*
x
, *
y
)

12 
tmp
 = *
x
;

13 *
x
 = *
y
;

14 *
y
 = 
tmp
;

15 
	}
}

17 íum { 
	mN_NODES
 = 10000 };

20 
	$ã°_m≠_mixed_›î©i⁄s
()

22 
ªt
 = 0;

23 
m≠_t
 
åì
 = 
	`m≠_öô
(, , 
m≠_cmp_öt
);

25 
key
[
N_NODES
], 
vÆ
[N_NODES];

30 
i
 = 0; i < 
N_NODES
; i++) {

31 
key
[
i
] = i;

32 
vÆ
[
i
] = 
	`mt19937_exåa˘
();

35 
i
 = 0; i < 
N_NODES
; i++) {

36 
pos_a
 = 
	`mt19937_exåa˘
(Ë% 
N_NODES
;

37 
pos_b
 = 
	`mt19937_exåa˘
(Ë% 
N_NODES
;

38 
	`sw≠
(&
key
[
pos_a
], &key[
pos_b
]);

39 
	`sw≠
(&
vÆ
[
pos_a
], &vÆ[
pos_b
]);

43 
i
 = 0; i < 
N_NODES
 / 2; i++) {

44 
m≠_ôî_t
 
my_ô
;

45 
	`m≠_ö£π
(
åì
, 
key
 + 
i
, 
vÆ
 + i);

46 
	`m≠_föd
(
åì
, &
my_ô
, 
key
 + 
i
);

47 i‡(!
my_ô
.
node
) {

48 
ªt
 = 1;

49 
‰ì_åì
;

51 
	`as£π
((*(*Ë(
my_ô
.
node
->
d©a
)Ë=
vÆ
[
i
]);

55 
i
 = 0; i < 
N_NODES
 / 4; i++) {

56 
m≠_ôî_t
 
my_ô
;

57 
	`m≠_föd
(
åì
, &
my_ô
, 
key
 + 
i
);

58 i‡(
	`m≠_©_íd
(
åì
, &
my_ô
))

60 
	`m≠_îa£
(
åì
, &
my_ô
);

61 
	`m≠_föd
(
åì
, &
my_ô
, 
key
 + 
i
);

62 i‡(
my_ô
.
node
) {

63 
ªt
 = 1;

64 
‰ì_åì
;

69 
i
 = 
N_NODES
 / 2 + 1; i < N_NODES; i++) {

70 
m≠_ôî_t
 
my_ô
;

71 
	`m≠_ö£π
(
åì
, 
key
 + 
i
, 
vÆ
 + i);

72 
	`m≠_föd
(
åì
, &
my_ô
, 
key
 + 
i
);

73 i‡(!
my_ô
.
node
) {

74 
ªt
 = 1;

75 
‰ì_åì
;

77 
	`as£π
((*(*Ë(
my_ô
.
node
->
d©a
)Ë=
vÆ
[
i
]);

82 
i
 = 
N_NODES
 / 4 + 1; i < N_NODES / 2; i++) {

83 
m≠_ôî_t
 
my_ô
;

84 
	`m≠_föd
(
åì
, &
my_ô
, 
key
 + 
i
);

85 i‡(
	`m≠_©_íd
(
åì
, &
my_ô
)) {

86 
ªt
 = 1;

87 
‰ì_åì
;

89 
	`m≠_îa£
(
åì
, &
my_ô
);

90 
	`m≠_föd
(
åì
, &
my_ô
, 
key
 + 
i
);

91 i‡(
my_ô
.
node
) {

92 
ªt
 = 1;

93 
‰ì_åì
;

97 
‰ì_åì
:

98 
	`m≠_˛ór
(
åì
);

99 
	`m≠_dñëe
(
åì
);

100  
ªt
;

101 
	}
}

103 
	$maö
(
¨gc
, *
¨gv
[])

105 (Ë
¨gc
;

106 (Ë
¨gv
;

108 
	`mt19937_öô
(
	`time
(
NULL
));

110  
	`ã°_m≠_mixed_›î©i⁄s
();

111 
	}
}

	@tests/nqueens.c

5 
	~<öây≥s.h
>

6 
	~<°döt.h
>

7 
	~<°dio.h
>

9 
	#MAXSIZE
 15

	)

11 
	gsize_e
;

12 
	gbﬂrd
[
MAXSIZE
], *
	gbﬂrd_e
, *
	gbﬂrd1
, *
	gbﬂrd2
;

13 
	gMASK
, 
	gTOPBIT
, 
	gSIDEMASK
, 
	gLASTMASK
, 
	gENDBIT
;

15 
öt64_t
 
	gcou¡8
, 
	gcou¡4
, 
	gcou¡2
;

18 
	$check
()

20 *
own
, *
you
, 
bô
, 
±n
;

23 i‡(*
bﬂrd2
 == 1) {

24 
±n
 = 2, 
own
 = 
bﬂrd
 + 1; ow¿<
bﬂrd_e
; own++,Ötn <<= 1) {

25 
bô
 = 1;

26 
you
 = 
bﬂrd_e
; *you !
±n
 && *
own
 >
bô
; you--)

27 
bô
 <<= 1;

28 i‡(*
own
 > 
bô
)

30 i‡(*
own
 < 
bô
)

33 i‡(
own
 > 
bﬂrd_e
) {

34 
cou¡2
++;

40 i‡(*
bﬂrd_e
 =
ENDBIT
) {

41 
you
 = 
bﬂrd_e
 - 1, 
own
 = 
bﬂrd
 + 1; own <= board_e; own++, you--) {

42 
bô
 = 1;

43 
±n
 = 
TOPBIT
;Öä !*
you
 && *
own
 >
bô
;Ötn >>= 1)

44 
bô
 <<= 1;

45 i‡(*
own
 > 
bô
)

47 i‡(*
own
 < 
bô
)

50 i‡(
own
 > 
bﬂrd_e
) {

51 
cou¡4
++;

57 i‡(*
bﬂrd1
 =
TOPBIT
) {

58 
±n
 = 
TOPBIT
 >> 1, 
own
 = 
bﬂrd
 + 1; ow¿<
bﬂrd_e
;

59 
own
++, 
±n
 >>= 1) {

60 
bô
 = 1;

61 
you
 = 
bﬂrd
; *you !
±n
 && *
own
 >
bô
; you++)

62 
bô
 <<= 1;

63 i‡(*
own
 > 
bô
)

65 i‡(*
own
 < 
bô
)

69 
cou¡8
++;

70 
	}
}

73 
	$backåack2
(
y
,

74 
À·
,

75 
down
,

76 
right
,

77 
bound1
,

78 
bound2
)

80 
bôm≠
 = 
MASK
 & ~(
À·
 | 
down
 | 
right
);

81 i‡(
y
 =
size_e
) {

82 i‡(
bôm≠
) {

83 i‡(!(
bôm≠
 & 
LASTMASK
)) {

84 
bﬂrd
[
y
] = 
bôm≠
;

85 
	`check
();

89 i‡(
y
 < 
bound1
) {

90 
bôm≠
 |
SIDEMASK
;

91 
bôm≠
 ^
SIDEMASK
;

92 } i‡(
y
 =
bound2
) {

93 i‡(!(
down
 & 
SIDEMASK
))

95 i‡((
down
 & 
SIDEMASK
) != SIDEMASK)

96 
bôm≠
 &
SIDEMASK
;

98 
bôm≠
) {

99 
bô
;

100 
bôm≠
 ^
bﬂrd
[
y
] = 
bô
 = -bitmap & bitmap;

101 
	`backåack2
(
y
 + 1, (
À·
 | 
bô
Ë<< 1, 
down
 | bô, (
right
 | bit) >> 1,

102 
bound1
, 
bound2
);

105 
	}
}

108 
	$backåack1
(
y
, 
À·
, 
down
, 
right
, 
bound1
)

110 
bôm≠
 = 
MASK
 & ~(
À·
 | 
down
 | 
right
);

111 i‡(
y
 =
size_e
) {

112 i‡(
bôm≠
) {

113 
bﬂrd
[
y
] = 
bôm≠
;

114 
cou¡8
++;

117 i‡(
y
 < 
bound1
) {

118 
bôm≠
 |= 2;

119 
bôm≠
 ^= 2;

121 
bôm≠
) {

122 
bô
;

123 
bôm≠
 ^
bﬂrd
[
y
] = 
bô
 = -bitmap & bitmap;

124 
	`backåack1
(
y
 + 1, (
À·
 | 
bô
Ë<< 1, 
down
 | bô, (
right
 | bit) >> 1,

125 
bound1
);

128 
	}
}

131 
	$nquìns
(
size
)

133 
bô
;

136 
cou¡8
 = 
cou¡4
 = 
cou¡2
 = 0;

137 
size_e
 = 
size
 - 1;

138 
bﬂrd_e
 = &
bﬂrd
[
size_e
];

139 
TOPBIT
 = 1 << 
size_e
;

140 
MASK
 = (1 << 
size
) - 1;

144 
bﬂrd
[0] = 1;

145 
bound1
 = 2; bound1 < 
size_e
; bound1++) {

146 
bﬂrd
[1] = 
bô
 = 1 << 
bound1
;

147 
	`backåack1
(2, (2 | 
bô
Ë<< 1, 1 | bô, bô >> 1, 
bound1
);

151 
SIDEMASK
 = 
LASTMASK
 = 
TOPBIT
 | 1;

152 
ENDBIT
 = 
TOPBIT
 >> 1;

153 
bound1
 = 1, 
bound2
 = 
size
 - 2; bound1 < bound2;

154 
bound1
++, 
bound2
--) {

155 
bﬂrd1
 = &
bﬂrd
[
bound1
];

156 
bﬂrd2
 = &
bﬂrd
[
bound2
];

157 
bﬂrd
[0] = 
bô
 = 1 << 
bound1
;

158 
	`backåack2
(1, 
bô
 << 1, bô, bô >> 1, 
bound1
, 
bound2
);

159 
LASTMASK
 |= LASTMASK >> 1 | LASTMASK << 1;

160 
ENDBIT
 >>= 1;

162 
	}
}

164 
	$maö
()

166 
	`¥ötf
("<--- N-Queens Solutions --->\n");

167 
	`¥ötf
(" N: Total Unique\n");

168 
size
 = 2; sizê<
MAXSIZE
; size++) {

169 
	`nquìns
(
size
);

170 
	`¥ötf
("%2d:%13" 
PRId64
 "%13" PRId64 "\n", 
size
,

171 
cou¡8
 * 8 + 
cou¡4
 * 4 + 
cou¡2
 * 2 ,

172 
cou¡8
 + 
cou¡4
 + 
cou¡2
 );

176 
	}
}

	@tests/nyancat.c

29 c⁄° *
	g‰ame0
[] = {

96 c⁄° *
	g‰ame1
[] = {

163 c⁄° *
	g‰ame2
[] = {

230 c⁄° *
	g‰ame3
[] = {

297 c⁄° *
	g‰ame4
[] = {

364 c⁄° *
	g‰ame5
[] = {

431 c⁄° *
	g‰ame6
[] = {

498 c⁄° *
	g‰ame7
[] = {

565 c⁄° *
	g‰ame8
[] = {

632 c⁄° *
	g‰ame9
[] = {

699 c⁄° *
	g‰ame10
[] = {

766 c⁄° *
	g‰ame11
[] = {

833 
	~<°ddef.h
>

835 c⁄° **
	g‰ames
[] = {

836 
‰ame0
, 
‰ame1
, 
‰ame2
, 
‰ame3
, 
‰ame4
, 
‰ame5
, 
‰ame6
,

837 
‰ame7
, 
‰ame8
, 
‰ame9
, 
‰ame10
, 
‰ame11
, 
NULL
,

840 
	#FRAME_WIDTH
 64

	)

841 
	#FRAME_HEIGHT
 64

	)

843 
	~<°dio.h
>

844 
	~<°dlib.h
>

845 
	~<time.h
>

847 
	#WIDTH
 80

	)

848 
	#HEIGHT
 24

	)

850 c⁄° *
	gcﬁ‹s
[256] = {
NULL
};

851 c⁄° *
	gouçut
 = " ";

853 
	gmö_row
 = -1, 
	gmax_row
 = -1;

854 
	gmö_cﬁ
 = -1, 
	gmax_cﬁ
 = -1;

856 
	$föish
()

858 
	`¥ötf
("\033[?25h\033[0m\033[H\033[2J");

859 
	`exô
(0);

860 
	}
}

862 
	$upd©e_wödow_size
()

864 
mö_cﬁ
 = (
FRAME_WIDTH
 - 
WIDTH
 / 2) / 2;

865 
max_cﬁ
 = (
FRAME_WIDTH
 + 
WIDTH
 / 2) / 2;

867 
mö_row
 = (
FRAME_HEIGHT
 - (
HEIGHT
 - 1)) / 2;

868 
max_row
 = (
FRAME_HEIGHT
 + (
HEIGHT
 - 1)) / 2;

869 
	}
}

871 
	$√wlöe
(
n
)

873 
i
 = 0; i < 
n
; ++i)

874 
	`putc
('\n', 
°dout
);

875 
	}
}

877 
	$maö
(
¨gc
, **
¨gv
)

881 
cﬁ‹s
[','] = "\033[48;5;17m";

882 
cﬁ‹s
['.'] = "\033[48;5;231m";

883 
cﬁ‹s
['\''] = "\033[48;5;16m";

884 
cﬁ‹s
['@'] = "\033[48;5;230m";

885 
cﬁ‹s
['$'] = "\033[48;5;175m";

886 
cﬁ‹s
['-'] = "\033[48;5;162m";

887 
cﬁ‹s
['>'] = "\033[48;5;196m";

888 
cﬁ‹s
['&'] = "\033[48;5;214m";

889 
cﬁ‹s
['+'] = "\033[48;5;226m";

890 
cﬁ‹s
['#'] = "\033[48;5;118m";

891 
cﬁ‹s
['='] = "\033[48;5;33m";

892 
cﬁ‹s
[';'] = "\033[48;5;19m";

893 
cﬁ‹s
['*'] = "\033[48;5;240m";

894 
cﬁ‹s
['%'] = "\033[48;5;175m";

897 
	`upd©e_wödow_size
();

898 
	`¥ötf
("\033[H\033[2J\033[?25l");

900 
size_t
 
i
 = 0;

901 
f
 = 0;

902 
œ°
 = 0;

904 
	`¥ötf
("\033[H");

905 
y
 = 
mö_row
; y < 
max_row
; ++y) {

906 
x
 = 
mö_cﬁ
; x < 
max_cﬁ
; ++x) {

907 
cﬁ‹
;

908 i‡(
y
 > 23 && y < 43 && 
x
 < 0) {

909 
mod_x
 = ((-
x
 + 2) % 16) / 8;

910 i‡((
i
 / 2) % 2)

911 
mod_x
 = 1 - mod_x;

912 c⁄° *
øöbow
 = ",,>>&&&+++###==;;;,,";

913 
cﬁ‹
 = 
øöbow
[
mod_x
 + 
y
 - 23];

914 i‡(
cﬁ‹
 == 0)

915 
cﬁ‹
 = ',';

916 } i‡(
x
 < 0 || 
y
 < 0 || y >
FRAME_HEIGHT
 ||

917 
x
 >
FRAME_WIDTH
) {

918 
cﬁ‹
 = ',';

920 
cﬁ‹
 = 
‰ames
[
i
][
y
][
x
];

923 i‡(
cﬁ‹
 !
œ°
 && 
cﬁ‹s
[() color]) {

924 
œ°
 = 
cﬁ‹
;

925 
	`¥ötf
("%s%s", 
cﬁ‹s
[(Ë
cﬁ‹
], 
ouçut
);

927 
	`¥ötf
("%s", 
ouçut
);

930 
	`√wlöe
(1);

933 
œ°
 = 0;

934 i‡(++
f
 == 60)

935 
	`föish
();

936 i‡(!
‰ames
[++
i
])

937 
i
 = 0;

939 
time•ec
 
ts
 = {.
tv_£c
 = 0, .
tv_n£c
 = 90000};

940 
	`«no¶ìp
(&
ts
, &ts);

944 
	}
}

	@tests/path/test-path.c

1 
	~<as£π.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

4 
	~<°rög.h
>

5 
	~"utûs.h
"

7 
	$com∑ª
(*
öput
, *
ex≥˘ed_ouçut
)

9 *
öput_ßnôized
 = 
	`ßnôize_∑th
(
öput
);

10 i‡(!
öput_ßnôized
) {

11 
	`exô
(1);

14 i‡(
	`°rcmp
(
öput_ßnôized
, 
ex≥˘ed_ouçut
)) {

15 
	`¥ötf
("\n\nInput =\t\t\t%s\nOutput =\t\t%s\nExpected output =\t%s\n",

16 
öput
, 
öput_ßnôized
, 
ex≥˘ed_ouçut
);

18 
	`exô
(1);

21 
	`‰ì
(
öput_ßnôized
);

22 
	}
}

24 
	$ßnôize_∑th_ã°
()

27 
	`com∑ª
("", ".");

28 
	`com∑ª
("abc", "abc");

29 
	`com∑ª
("abc/def", "abc/def");

30 
	`com∑ª
(".", ".");

31 
	`com∑ª
("..", "..");

32 
	`com∑ª
("../..", "../..");

33 
	`com∑ª
("../../abc", "../../abc");

34 
	`com∑ª
("/abc", "/abc");

35 
	`com∑ª
("/", "/");

38 
	`com∑ª
("abc/", "abc");

39 
	`com∑ª
("abc/def/", "abc/def");

40 
	`com∑ª
("a/b/c/", "a/b/c");

41 
	`com∑ª
("./", ".");

42 
	`com∑ª
("../", "..");

43 
	`com∑ª
("../../", "../..");

44 
	`com∑ª
("/abc/", "/abc");

47 
	`com∑ª
("abc//def//ghi", "abc/def/ghi");

48 
	`com∑ª
("//abc", "/abc");

49 
	`com∑ª
("///abc", "/abc");

50 
	`com∑ª
("//abc//", "/abc");

51 
	`com∑ª
("abc//", "abc");

54 
	`com∑ª
("abc/./def", "abc/def");

55 
	`com∑ª
("/./abc/def", "/abc/def");

56 
	`com∑ª
("abc/.", "abc");

59 
	`com∑ª
("abc/def/ghi/../jkl", "abc/def/jkl");

60 
	`com∑ª
("abc/def/../ghi/../jkl", "abc/jkl");

61 
	`com∑ª
("abc/def/..", "abc");

62 
	`com∑ª
("abc/def/../..", ".");

63 
	`com∑ª
("/abc/def/../..", "/");

64 
	`com∑ª
("abc/def/../../..", "..");

65 
	`com∑ª
("/abc/def/../../..", "/");

66 
	`com∑ª
("abc/def/../../../ghi/jkl/../../../mno", "../../mno");

69 
	`com∑ª
("abc/./../def", "def");

70 
	`com∑ª
("abc//./../def", "def");

71 
	`com∑ª
("abc/../../././../def", "../../def");

72 
	}
}

74 
	$maö
()

76 
	`ßnôize_∑th_ã°
();

79 
	}
}

	@tests/perfcounter/main.c

1 
	~<°döt.h
>

2 
	~<°dio.h
>

3 
	~<°rög.h
>

5 
uöt64_t
 
gë_cy˛es
();

6 
uöt64_t
 
gë_ö°ªt
();

14 
•¨kÀ_asm
(*
°©e
, 
ns
);

16 
	#WORDS
 12

	)

17 
	#ROUNDS
 7

	)

19 
	$maö
()

21 
°©e
[
WORDS
] = {0};

24 
uöt64_t
 
ö°ªt
 = 
	`gë_ö°ªt
();

25 
uöt64_t
 
ﬁdcou¡
 = 
	`gë_cy˛es
();

26 
	`•¨kÀ_asm
(
°©e
, 
ROUNDS
);

27 
uöt64_t
 
cy˛ecou¡
 = 
	`gë_cy˛es
(Ë- 
ﬁdcou¡
;

29 
	`¥ötf
("cy˛êcou¡: %u\n", (Ë
cy˛ecou¡
);

30 
	`¥ötf
("ö°ªt: %x\n", (Ë(
ö°ªt
 & 0xffffffff));

32 
	`mem£t
(
°©e
, 0, 
WORDS
 * (
uöt32_t
));

34 
	`•¨kÀ_asm
(
°©e
, 
ROUNDS
);

36 
	`¥ötf
("Sparkle state:\n");

37 
i
 = 0; i < 
WORDS
; i += 2)

38 
	`¥ötf
("%X %X\n", 
°©e
[
i
], state[i + 1]);

41 
	}
}

	@tests/pi.c

25 
	~<°döt.h
>

26 
	~<°dio.h
>

35 
ölöe
 
öt32_t
 
	$mul_mod_21
(
öt32_t
 
a
, i¡32_à
b
, i¡32_à
m
)

37 
öt32_t
 
a1
 = (
a
 >> 0) & 0xFF;

38 
öt32_t
 
a2
 = (
a
 >> 8) & 0xFF;

39 
öt32_t
 
a3
 = (
a
 >> 16) & 0xFF;

40 
öt32_t
 
b2
 = (
b
 << 8Ë% 
m
;

41 
öt32_t
 
b3
 = (
b2
 << 8Ë% 
m
;

42  (
a1
 * 
b
 + 
a2
 * 
b2
 + 
a3
 * 
b3
Ë% 
m
;

43 
	}
}

52 
ölöe
 
öt32_t
 
	$mul_mod_22
(
öt32_t
 
a
, i¡32_à
b
, i¡32_à
m
)

54 
öt32_t
 
a1
 = (
uöt32_t
Ë
a
 >> 0 & 0xFF;

55 
öt32_t
 
a2
 = (
uöt32_t
Ë
a
 >> 8 & 0xFF;

56 
öt32_t
 
a3
 = (
uöt32_t
Ë
a
 >> 16 & 0xFF;

57 
öt32_t
 
a4
 = (
uöt32_t
Ë
a
 >> 24 & 0xFF;

58 
öt32_t
 
b2
 = (
b
 << 8Ë% 
m
;

59 
öt32_t
 
b3
 = (
b2
 << 8Ë% 
m
;

60 
öt32_t
 
b4
 = (
b3
 << 8Ë% 
m
;

61  
a1
 * 
b
 + 
a2
 * 
b2
 + 
a3
 * 
b3
 + 
a4
 * 
b4
;

62 
	}
}

71 
ölöe
 
öt32_t
 
	$mul_mod_23
(
öt32_t
 
a
, i¡32_à
b
, i¡32_à
m
)

73 
öt32_t
 
a1
 = (
uöt32_t
Ë
a
 >> 0 & 0xFF;

74 
öt32_t
 
a2
 = (
uöt32_t
Ë
a
 >> 8 & 0xFF;

75 
öt32_t
 
a3
 = (
uöt32_t
Ë
a
 >> 16 & 0xFF;

76 
öt32_t
 
a4
 = (
uöt32_t
Ë
a
 >> 24 & 0xFF;

77 
öt32_t
 
b2
 = (
b
 << 8Ë% 
m
;

78 
öt32_t
 
b3
 = (
b2
 << 8Ë% 
m
;

79 
öt32_t
 
b4
 = (
b3
 << 8Ë% 
m
;

80  
a1
 * 
b
 % 
m
 + 
a2
 * 
b2
 % m + 
a3
 * 
b3
 % m + 
a4
 * 
b4
 % m;

81 
	}
}

84 
öt32_t
 
	$powi
(
öt32_t
 
ba£
, i¡32_à
exp
)

86 
öt32_t
 
ªsu…
 = 1;

87 
exp
) {

88 i‡(
exp
 & 1)

89 
ªsu…
 *
ba£
;

90 
ba£
 *= base;

91 
exp
 >>= 1;

93  
ªsu…
;

94 
	}
}

97 
öt32_t
 
	$pow_mod
(
öt32_t
 
a
, i¡32_à
b
, i¡32_à
m
)

99 
öt32_t
 
ªsu…
 = 1;

100 
b
 > 0) {

101 i‡(
b
 & 1)

102 
ªsu…
 = 
	`mul_mod_21
‘esu…, 
a
, 
m
);

103 
a
 = 
	`mul_mod_21
◊,á, 
m
);

104 
b
 >>= 1;

106  
ªsu…
;

107 
	}
}

119 
öt32_t
 
	$öv_mod
(
öt32_t
 
a
, i¡32_à
m
)

121 
a
 %
m
;

122 
öt32_t
 
b
 = 
m
;

123 
öt32_t
 
x
 = 1;

124 
öt32_t
 
y
 = 0;

125 
öt32_t
 
i
 = 0; i < 15; i++) {

126 
öt32_t
 
q
 = (
a
 =0Ë? 0 : 
b
 /á;

127 
b
 -
a
 * 
q
;

128 
y
 -
x
 * 
q
;

129 
q
 = (
b
 =0Ë? 0 : 
a
 / b;

130 
a
 -
b
 * 
q
;

131 
x
 -
y
 * 
q
;

134  
b
 ? (
y
 + 
m
Ë: 
x
;

135 
	}
}

138 
öt32_t
 
	$√xt_¥ime
(
öt32_t
 
n
)

140 
n
++;

142 
uöt32_t
 
squ¨e_roŸ
 = 0;

143 i‡(
squ¨e_roŸ
 >
n
)

144 
squ¨e_roŸ
 = 0;

147 
squ¨e_roŸ
 * squ¨e_roŸ < 
n
 - 1)

148 
squ¨e_roŸ
++;

150 
öt32_t
 
Á˘‹s
 = 0;

151 
öt32_t
 
i
 = 2; i <
squ¨e_roŸ
; i++) {

152 i‡(
n
 % 
i
 == 0) {

153 
Á˘‹s
++;

158 i‡(
Á˘‹s
 <= 0)

159  
n
;

161 
n
++;

163 
	}
}

166 
öt32_t
 
	g¥ime_powî
[15], 
	g¥ime_powî_cou¡
;

167 
öt32_t
 
	$Á˘‹_cou¡
(
öt32_t
 *
n
)

169 
öt32_t
 
i
 = 
¥ime_powî_cou¡
 - 1; i >= 0; i--) {

170 i‡(*
n
 % 
¥ime_powî
[
i
] == 0) {

171 *
n
 /
¥ime_powî
[
i
];

172  
i
;

175 
	`__buûtö_uƒóchabÀ
();

176 
	}
}

186 
	$fixed_poöt_sum
(
öt32_t
 
n
, i¡32_à
d
, i¡32_à*
hi
, i¡32_à*
lo
)

189 
öt32_t
 
n1
 = 
n
 * 200;

190 
öt32_t
 
n2
 = 
n1
 % 
d
 * 200;

191 
öt32_t
 
n3
 = 
n2
 % 
d
 * 200;

192 
öt32_t
 
n4
 = 
n3
 % 
d
 * 125;

193 *
hi
 +
n1
 / 
d
 * 5000000;

194 *
hi
 +
n2
 / 
d
 * 25000;

195 *
hi
 +
n3
 / 
d
 * 125;

196 *
hi
 +
n4
 / 
d
;

199 
öt32_t
 
n5
 = 
n4
 % 
d
 * 200;

200 
öt32_t
 
n6
 = 
n5
 % 
d
 * 200;

201 
öt32_t
 
n7
 = 
n6
 % 
d
 * 200;

202 
öt32_t
 
n8
 = 
n7
 % 
d
 * 125;

203 *
lo
 +
n5
 / 
d
 * 5000000;

204 *
lo
 +
n6
 / 
d
 * 25000;

205 *
lo
 +
n7
 / 
d
 * 125;

206 *
lo
 +
n8
 / 
d
;

209 i‡(*
lo
 > 1000000000)

210 *
hi
 += 1;

213 *
hi
 = *hi % 1000000000;

214 *
lo
 = *lo % 1000000000;

215 
	}
}

218 
öt32_t
 
	$piÁ˘‹y
(
öt32_t
 
°¨t_digô
)

220 
öt32_t
 
sum
 = 0, 
sum_low
 = 0;

225 
öt32_t
 
N
 = (
°¨t_digô
 + 19) * 238 / 269;

228 
öt32_t
 
¥ime
 = 2;Örimê< 3 * 
N
;Örimê
	`√xt_¥ime
(prime)) {

233 c⁄° 
öt32_t
 
ROOT_10M
[15] = {

236 
¥ime_powî_cou¡
 = 0;

237 
öt32_t
 
i
 = 0; i < 15; i++) {

238 i‡(
¥ime
 <
ROOT_10M
[
i
]) {

239 
¥ime_powî
[
i
] = 
	`powi
(
¥ime
, i);

240 
¥ime_powî_cou¡
++;

245 
öt32_t
 
exp⁄ít
 = -1;

246 
öt32_t
 
i
 = 0; i < 
¥ime_powî_cou¡
; i++) {

247 i‡(
¥ime_powî
[
i
] < 3 * 
N
)

248 
exp⁄ít
++;

250 
öt32_t
 
m
 = 
	`powi
(
¥ime
, 
exp⁄ít
);

252 i‡(
¥ime
 == 2) {

254 
exp⁄ít
 +
N
 - 1;

258 
m
 = 
	`powi
(
¥ime
, 
exp⁄ít
 - 
°¨t_digô
);

262 i‡(
m
 == 0)

269 
öt32_t
 
decimÆ
 = 10;

270 i‡(
¥ime
 == 2)

271 
decimÆ
 = 5;

272 
öt32_t
 
decimÆ_shi·
 = 
	`pow_mod
(
decimÆ
, 
°¨t_digô
, 
m
);

275 
öt32_t
 
subtŸÆ
 = 0;

276 
öt32_t
 
numî©‹
 = 1;

277 
öt32_t
 
díomö©‹
 = 1;

278 
öt32_t
 
k
 = 1; k <
N
; k++) {

280 
öt32_t
 
t1
 = 2 * 
k
, 
t2
 = 2 * k - 1;

281 
exp⁄ít
 +
	`Á˘‹_cou¡
(&
t1
);

282 
exp⁄ít
 +
	`Á˘‹_cou¡
(&
t2
);

283 
öt32_t
 
ãrms
 = 
	`mul_mod_21
(
t1
 % 
m
, 
t2
 % m, m);

284 
numî©‹
 = 
	`mul_mod_22
“umî©‹, 
ãrms
, 
m
);

287 
öt32_t
 
t3
 = 6 * 
k
 - 4, 
t4
 = 9 * k - 3;

288 
exp⁄ít
 -
	`Á˘‹_cou¡
(&
t3
);

289 
exp⁄ít
 -
	`Á˘‹_cou¡
(&
t4
);

290 
ãrms
 = 
	`mul_mod_21
(
t3
 % 
m
, 
t4
 % m, m);

291 
díomö©‹
 = 
	`mul_mod_22
(díomö©‹, 
ãrms
, 
m
);

294 
öt32_t
 
övî£
 = 
	`öv_mod
(
díomö©‹
, 
m
);

295 
öt32_t
 
t
 = (50 * 
k
 - 6Ë% 
m
;

296 
t
 = 
	`mul_mod_23
(
numî©‹
,Å, 
m
);

297 
t
 = 
	`mul_mod_21
—, 
	`powi
(
¥ime
, 
exp⁄ít
), 
m
);

298 
t
 = 
	`mul_mod_21
—, 
övî£
, 
m
);

300 
subtŸÆ
 = (subtŸÆ + 
t
Ë% 
m
;

302 
subtŸÆ
 = 
	`mul_mod_21
(subtŸÆ, 
decimÆ_shi·
, 
m
);

305 
	`fixed_poöt_sum
(
subtŸÆ
, 
m
, &
sum
, &
sum_low
);

307  
sum
;

308 
	}
}

310 
öt32_t
 
	$maö
()

312 
öt32_t
 
°¨t
 = 0, 
íd
 = 100;

315 
	`¥ötf
("3.");

316 
°¨t
++;

318 
öt32_t
 
i
 = 
°¨t
 - 1; i < 
íd
; i += 9)

319 
	`¥ötf
("%09d", 
	`piÁ˘‹y
(
i
));

320 
	`¥ötf
("\n");

323 
	}
}

	@tests/puzzle.c

3 
	~<°dboﬁ.h
>

4 
	~<°döt.h
>

5 
	~<°dio.h
>

7 
	#SIZE
 511

	)

8 
	#CLASS_MAX
 3

	)

9 
	#TYPE_MAX
 12

	)

11 
	gpõ˚cou¡
[
CLASS_MAX
 + 1];

12 
uöt8_t
 
	g˛ass
[
TYPE_MAX
 + 1];

13 
	gpõ˚max
[
TYPE_MAX
 + 1];

14 
boﬁ
 
	gpuzzÀ
[
SIZE
 + 1];

15 
boﬁ
 
	gp
[
TYPE_MAX
 + 1][
SIZE
 + 1];

17 
	gm
, 
	gn
;

18 
	gkou¡
;

20 
	$fô
(
i
, 
j
)

22 
k
 = 0; k <
põ˚max
[
i
]; k++) {

23 i‡(
p
[
i
][
k
] && 
puzzÀ
[
j
 + k])

24  
Ál£
;

27  
åue
;

28 
	}
}

30 
	$∂a˚
(
i
, 
j
)

32 
k
 = 0; k <
põ˚max
[
i
]; k++) {

33 i‡(
p
[
i
][
k
])

34 
puzzÀ
[
j
 + 
k
] = 
åue
;

36 
põ˚cou¡
[
˛ass
[
i
]] =Öiececount[class[i]] - 1;

37 
k
 = 
j
; k <
SIZE
; k++) {

38 i‡(!
puzzÀ
[
k
])

39  
k
;

42  
Ál£
;

43 
	}
}

45 
	$ªmove_
(
i
, 
j
)

47 
k
 = 0; k <
põ˚max
[
i
]; k++) {

48 i‡(
p
[
i
][
k
])

49 
puzzÀ
[
j
 + 
k
] = 
Ál£
;

51 
põ˚cou¡
[
˛ass
[
i
]] =Öiececount[class[i]] + 1;

52 
	}
}

54 
	$åül
(
j
)

56 
i
 = 0; i <
TYPE_MAX
; i++) {

57 i‡(
põ˚cou¡
[
˛ass
[
i
]] && 
	`fô
(i, 
j
)) {

58 
k
 = 
	`∂a˚
(
i
, 
j
);

59 i‡(
	`åül
(
k
) || (k == 0)) {

60 
kou¡
++;

61  
åue
;

63 
	`ªmove_
(
i
, 
j
);

67 
kou¡
++;

68  
Ál£
;

69 
	}
}

71 
	$run_puzzÀ
()

73 
i
, 
j
, 
k
;

75 
m
 = 0; m <
SIZE
; m++)

76 
puzzÀ
[
m
] = 1;

78 
i
 = 1; i <= 5; i++) {

79 
j
 = 1; j <= 5; j++)

80 
k
 = 1; k <= 5; k++)

81 
puzzÀ
[
i
 + 8 * (
j
 + 8 * 
k
)] = 0;

83 
i
 = 0; i <= 12; i++) {

84 
m
 = 0; m <= 511; m++)

85 
p
[
i
][
m
] = 
Ál£
;

87 
i
 = 0; i <= 3; i++) {

88 
j
 = 0; j <= 1; j++)

89 
k
 = 0; k <= 0; k++)

90 
p
[0][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

93 
˛ass
[0] = 0;

94 
põ˚max
[0] = 3 + 8 * 1 + 8 * 8 * 0;

95 
i
 = 0; i <= 1; i++) {

96 
j
 = 0; j <= 0; j++)

97 
k
 = 0; k <= 3; k++)

98 
p
[1][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

101 
˛ass
[1] = 0;

102 
põ˚max
[1] = 1 + 8 * 0 + 8 * 8 * 3;

103 
i
 = 0; i <= 0; i++) {

104 
j
 = 0; j <= 3; j++)

105 
k
 = 0; k <= 1; k++)

106 
p
[2][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

109 
˛ass
[2] = 0;

110 
põ˚max
[2] = 0 + 8 * 3 + 8 * 8 * 1;

111 
i
 = 0; i <= 1; i++) {

112 
j
 = 0; j <= 3; j++)

113 
k
 = 0; k <= 0; k++)

114 
p
[3][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

117 
˛ass
[3] = 0;

118 
põ˚max
[3] = 1 + 8 * 3 + 8 * 8 * 0;

119 
i
 = 0; i <= 3; i++) {

120 
j
 = 0; j <= 0; j++)

121 
k
 = 0; k <= 1; k++)

122 
p
[4][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

125 
˛ass
[4] = 0;

126 
põ˚max
[4] = 3 + 8 * 0 + 8 * 8 * 1;

127 
i
 = 0; i <= 0; i++) {

128 
j
 = 0; j <= 1; j++)

129 
k
 = 0; k <= 3; k++)

130 
p
[5][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

133 
˛ass
[5] = 0;

134 
põ˚max
[5] = 0 + 8 * 1 + 8 * 8 * 3;

135 
i
 = 0; i <= 2; i++) {

136 
j
 = 0; j <= 0; j++)

137 
k
 = 0; k <= 0; k++)

138 
p
[6][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

141 
˛ass
[6] = 1;

142 
põ˚max
[6] = 2 + 8 * 0 + 8 * 8 * 0;

143 
i
 = 0; i <= 0; i++) {

144 
j
 = 0; j <= 2; j++)

145 
k
 = 0; k <= 0; k++)

146 
p
[7][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

149 
˛ass
[7] = 1;

150 
põ˚max
[7] = 0 + 8 * 2 + 8 * 8 * 0;

151 
i
 = 0; i <= 0; i++) {

152 
j
 = 0; j <= 0; j++)

153 
k
 = 0; k <= 2; k++)

154 
p
[8][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

157 
˛ass
[8] = 1;

158 
põ˚max
[8] = 0 + 8 * 0 + 8 * 8 * 2;

159 
i
 = 0; i <= 1; i++) {

160 
j
 = 0; j <= 1; j++)

161 
k
 = 0; k <= 0; k++)

162 
p
[9][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

165 
˛ass
[9] = 2;

166 
põ˚max
[9] = 1 + 8 * 1 + 8 * 8 * 0;

167 
i
 = 0; i <= 1; i++) {

168 
j
 = 0; j <= 0; j++)

169 
k
 = 0; k <= 1; k++)

170 
p
[10][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

173 
˛ass
[10] = 2;

174 
põ˚max
[10] = 1 + 8 * 0 + 8 * 8 * 1;

175 
i
 = 0; i <= 0; i++) {

176 
j
 = 0; j <= 1; j++)

177 
k
 = 0; k <= 1; k++)

178 
p
[11][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

181 
˛ass
[11] = 2;

182 
põ˚max
[11] = 0 + 8 * 1 + 8 * 8 * 1;

183 
i
 = 0; i <= 1; i++) {

184 
j
 = 0; j <= 1; j++)

185 
k
 = 0; k <= 1; k++)

186 
p
[12][
i
 + 8 * (
j
 + 8 * 
k
)] = 
åue
;

189 
˛ass
[12] = 3;

190 
põ˚max
[12] = 1 + 8 * 1 + 8 * 8 * 1;

191 
põ˚cou¡
[0] = 13;

192 
põ˚cou¡
[1] = 3;

193 
põ˚cou¡
[2] = 1;

194 
põ˚cou¡
[3] = 1;

196 
m
 = 1 + 8 * (1 + 8 * 1);

197 
kou¡
 = 0;

199 i‡(
	`fô
(0, 
m
)) {

200 
n
 = 
	`∂a˚
(0, 
m
);

202 
	`¥ötf
("error 1\n");

204 i‡(
	`åül
(
n
)) {

205 
	`¥ötf
("suc˚s†ö %dÅrüls\n", 
kou¡
);

207 
	`¥ötf
("failure\n");

209 
	}
}

211 
	$maö
(
¨gc
, **
¨gv
)

213 
	`run_puzzÀ
();

215 
	}
}

	@tests/qrcode.c

28 
	~<°dboﬁ.h
>

29 
	~<°döt.h
>

30 
	~<°dio.h
>

31 
	~<°dlib.h
>

32 
	~<°rög.h
>

34 
	tuöt
;

39 
	#QR_OPT
 1

	)

41 
	#QR_LINES
 29

	)

43 
	sqr_˘x
 {

44 
uöt8_t
 
	msize
;

45 
uöt8_t
 
	mÀn
;

46 c⁄° 
uöt8_t
 *
	md©a
;

47 *
	m∑øms
;

48 
uöt32_t
 
	mbmp
[
QR_LINES
];

49 } 
	tqr_˘x
;

54 
ölöe
 
boﬁ
 
	$qr_gëdŸ
(
qr_˘x
 *
˘x
, 
uöt
 
x
, uöà
y
)

56  
˘x
->
bmp
[
y
] << 
x
 >> 31;

57 
	}
}

63 
	$_öô_bmp
(
uöt32_t
 
A
[], 
uöt
 
size
)

66 
A
[0] = A[6] = 0xFE000000;

67 
A
[1] = A[5] = 0x82000000;

68 
A
[2] = A[3] = A[4] = 0xBA000000;

71 
y
;

72 
y
 = 0; y < 7; y++) {

73 
A
[
size
 - 1 - 
y
] = A[y];

74 
A
[
y
] |A[y] >> (
size
 - 7);

78 
A
[6] |= 0xAAA800;

81 
y
 = 9; y < 
size
 - 7; y++)

82 
A
[
y
] = ((y + 1) & 1) << 25;

85 
y
 -= 1;

86 
i
 = 0; i < 8; i++) {

87 i‡(
i
 == 4)

89 
A
[
y
 + 
i
] |= 0x800000;

93 
A
[2] |= 0x800000;

94 
A
[7] = 0x800000;

95 
A
[8] = 0xEF800000 | 0x31 << (34 - 
size
);

98 i‡(
size
 > 21) {

99 
uöt
 
∑t
 = 0x1F << (36 - 
size
);

100 
A
[
size
 - 9] |
∑t
;

101 
A
[
size
 - 5] |
∑t
;

102 
∑t
 = 0x11 << (36 - 
size
);

103 
A
[
size
 - 8] |
∑t
;

104 
A
[
size
 - 6] |
∑t
;

105 
A
[
size
 - 7] |= 0x15 << (36 - size);

107 
	}
}

109 
	sqr_∑øms
 {

110 
uöt8_t
 
	mˇ∑
;

111 
uöt8_t
 
	meccdeg
;

112 
uöt8_t
 
	mgí
[];

113 } 
	tqr_∑øms
;

125 
boﬁ
 
	$qr_evÆ
(
qr_˘x
 *
˘x
, 
uöt
 
vî
, c⁄° 
uöt8_t
 *
d©a
, uöà
Àn
)

127 c⁄° 
uöt8_t
 
_∑øms_blob
[] = {

136 i‡(!
˘x
)

137  
Ál£
;

138 
˘x
->
d©a
 = data;

139 
˘x
->
Àn
 =Üen;

141 
uöçå_t
 
∑øms
 = (uöçå_tË
_∑øms_blob
;

143 
vî
) {

147 
∑øms
 += 9;

150 
∑øms
 += 21;

153  
Ál£
;

156 
uöt
 
size
 = 
vî
 * 4 + 17;

157 
˘x
->
∑øms
 = (*)Öarams;

159 
uöt
 
ußbÀ
 =

160 ((
qr_∑øms
 *Ë
∑øms
)->
ˇ∑
 - ((qr_∑øm†*Ë∑øms)->
eccdeg
 - 2;

161 i‡(
ußbÀ
 < 
Àn
)

162  
Ál£
;

164 
˘x
->
size
 = size;

165 
	`_öô_bmp
(
˘x
->
bmp
, ctx->
size
);

166  
åue
;

167 
	}
}

172 
	$_£rülize_d©a
(
qr_˘x
 *
˘x
, 
uöt8_t
 *
buf
)

175 
uöt
 
b
 = 4 << 8 | 
˘x
->
Àn
;

176 
buf
[0] = 
b
 >> 4;

177 
uöt
 
i
 = 0;

178 
i
 < 
˘x
->
Àn
) {

179 
b
 <<= 8;

180 
b
 |
˘x
->
d©a
[
i
++];

181 
buf
[
i
] = 
b
 >> 4;

185 
i
++;

186 
buf
[
i
++] = 
b
 << 4;

189 
b
 = 0xEC;

190 
qr_∑øms
 *
∑ø
 = (qr_∑øm†*Ë
˘x
->
∑øms
;

191 
i
 < 
∑ø
->
ˇ∑
 -Ö¨a->
eccdeg
) {

192 
buf
[
i
++] = 
b
;

193 
b
 ^= 0xFD;

199 
i
 <
∑ø
->
ˇ∑
)

200 
buf
[
i
++] = 0;

201 
	}
}

203 #i‡
deföed
(
QR_OPT
)

208 
ölöe
 
uöt
 
	$_rs_mul
(
uöt
 
x
, uöà
y
)

210 c⁄° 
uöt8_t
 
_luts
[2][256] = {

253 i‡(!
x
 || !
y
)

255 
uöt
 
xp
 = 
_luts
[0][
x
] + _luts[0][
y
];

256 i‡(
xp
 > 255)

257 
xp
 -= 255;

258  
_luts
[1][
xp
];

259 
	}
}

262 
ölöe
 
uöt
 
	$_rs_mul
(
uöt
 
x
, uöà
y
)

264 
uöt
 
z
 = 0;

266 
i
 = 7; i >= 0; i--) {

268 
z
 = (z << 1) ^ ((z >> 7) * 0x11D);

269 
z
 ^((
y
 >> 
i
Ë& 1Ë* 
x
;

271  
z
;

272 
	}
}

278 
	$_ªed_sﬁom⁄
(
qr_˘x
 *
˘x
, 
uöt8_t
 *
buf
)

280 
qr_∑øms
 *
∑ø
 = (qr_∑øm†*Ë
˘x
->
∑øms
;

281 
uöt
 
deg
 = 
∑ø
->
eccdeg
;

282 
uöt8_t
 *
gí
 = 
∑ø
->gen;

283 
uöt
 
Àn
 = 
∑ø
->
ˇ∑
 -Ö¨a->
eccdeg
;

284 
uöt8_t
 *
ªs
 = 
buf
 + 
Àn
;

285 
uöt
 
i
 = 0; i < 
Àn
; i++) {

286 
uöt
 
Á˘‹
 = 
buf
[
i
] ^ 
ªs
[0];

287 
uöt
 
j
 = 1; j < 
deg
; j++)

288 
ªs
[
j
 - 1] =Ñes[j];

289 
ªs
[
deg
 - 1] = 0;

290 
uöt
 
j
 = 0; j < 
deg
; j++)

291 
ªs
[
j
] ^
	`_rs_mul
(
gí
[j], 
Á˘‹
);

293 
	}
}

298 
ölöe
 
boﬁ
 
	$_is_d©a
(
uöt
 
x
, uöà
y
, uöà
size_m1
)

300 i‡(
x
 =6 || 
y
 == 6)

301  
Ál£
;

302 i‡(
y
 <= 8)

303  
x
 >9 && x <
size_m1
 - 8;

304 i‡(
y
 >
size_m1
 - 7 && 
x
 <= 8)

305  
Ál£
;

306 i‡(
size_m1
 > 20 && 
x
 >= size_m1 - 8 && x <= size_m1 - 4 &&

307 
y
 >
size_m1
 - 8 && y <= size_m1 - 4)

308  
Ál£
;

309  
åue
;

310 
	}
}

312 
	upﬁy64_t
 {

313 
uöt64_t
 
	mbôs
;

314 
uöt32_t
 
	mu
[2];

316 
uöt32_t
 
	mu0
;

317 
uöt32_t
 
	mu1
;

319 } 
	tpﬁy64_t
;

327 
uöt64_t
 
	$zigzag_°ï
(
uöt
 
x
, uöà
y
, uöà
size_m1
)

329 
pﬁy64_t
 
r
;

330 
åue
) {

331 (
x
 - (x > 6)) & 3) {

333 i‡(
y
 < 
size_m1
)

334 
x
 +1, 
y
 += 1;

336 
x
 -= 1;

339 
x
 -= 1;

342 i‡(
y
 > 0)

343 
x
 +1, 
y
 -= 1;

345 
x
 -= 1;

346 i‡(
x
 == 6)

347 
x
 = 5;

351 
x
 -= 1;

353 i‡(
	`_is_d©a
(
x
, 
y
, 
size_m1
))

356 
r
.
u0
 = 
x
,Ñ.
u1
 = 
y
;

357  
r
.
bôs
;

358 
	}
}

364 
	$_∂a˚_d©a
(
qr_˘x
 *
˘x
, c⁄° 
uöt8_t
 *
buf
)

366 
uöt
 
size_m1
 = 
˘x
->
size
 - 1;

367 
pﬁy64_t
 
xy
 = {.
u0
 = 
size_m1
, .
u1
 = size_m1};

368 
qr_∑øms
 *
∑ø
 = (qr_∑øm†*Ë
˘x
->
∑øms
;

369 
uöt
 
nbôs
 = 
∑ø
->
ˇ∑
 * 8;

372 i‡(
size_m1
 > 20)

373 
nbôs
 += 7;

375 
i
 = 0; i < 
nbôs
; i++) {

376 
boﬁ
 
mask0
 = (
xy
.
u0
 + xy.
u1
) % 2 == 0;

377 
boﬁ
 
dŸ
 = 
buf
[
i
 / 8] & (0x80u >> i % 8);

378 i‡(
dŸ
 ^ 
mask0
)

379 
˘x
->
bmp
[
xy
.
u1
] |0x80000000u >> xy.
u0
;

380 
xy
.
bôs
 = 
	`zigzag_°ï
(xy.
u0
, xy.
u1
, 
size_m1
);

382 
	}
}

387 
	$qr_ícode
(
qr_˘x
 *
˘x
)

389 i‡(!
˘x
)

392 
uöt8_t
 
dbuf
[72];

393 
	`_£rülize_d©a
(
˘x
, 
dbuf
);

394 
	`_ªed_sﬁom⁄
(
˘x
, 
dbuf
);

395 
	`_∂a˚_d©a
(
˘x
, 
dbuf
);

396 
	}
}

398 
	$dump_bmp
(
qr_˘x
 *
˘x
)

400 
i
 = 0; i < 
˘x
->
size
 + 2; i++)

401 
	`¥ötf
("‚ñà‚ñà");

402 
	`¥ötf
("\n");

404 
y
 = 0; y < 
˘x
->
size
; y++) {

405 
	`¥ötf
("‚ñà‚ñà");

406 
x
 = 0; x < 
˘x
->
size
; x++)

407 i‡(
	`qr_gëdŸ
(
˘x
, 
x
, 
y
))

408 
	`¥ötf
(" ");

410 
	`¥ötf
("‚ñà‚ñà");

411 
	`¥ötf
("‚ñà‚ñà\n");

413 
i
 = 0; i < 
˘x
->
size
 + 2; i++)

414 
	`¥ötf
("‚ñà‚ñà");

415 
	`¥ötf
("\n");

416 
	}
}

418 
	$maö
(
¨gc
, c⁄° *
¨gv
[])

420 
qr_˘x
 
˘x
[1];

421 c⁄° *
°r
 = "https://github.com/sysprog21/rv32emu";

423 i‡(!
	`qr_evÆ
(
˘x
, 3, (c⁄° 
uöt8_t
 *Ë
°r
, 
	`°æí
(str))) {

424 
	`¥ötf
("Evaluation failed. Version invalid or dataÅooÜong?\n");

427 
	`qr_ícode
(
˘x
);

428 
	`dump_bmp
(
˘x
);

430 
	}
}

	@tests/readelf/elf.c

1 
	~"ñf.h
"

2 
	~"ñf_idít.h
"

4 
	$check_ñf_magic_num
(c⁄° *
e_idít
)

6  
e_idít
[
EI_MAG0
] !
ELFMAG0
 ||É_idít[
EI_MAG1
] !
ELFMAG1
 ||

7 
e_idít
[
EI_MAG2
] !
ELFMAG2
 ||É_idít[
EI_MAG3
] !
ELFMAG3
;

8 
	}
}

	@tests/readelf/elf.h

1 
	~<°döt.h
>

3 #i‚de‡
ELF_H


4 
	#ELF_H


	)

6 
uöt32_t
 
	tElf32_Addr
;

7 
uöt32_t
 
	tElf32_Off
;

8 
uöt16_t
 
	tElf32_HÆf
;

9 
uöt32_t
 
	tElf32_W‹d
;

10 
öt32_t
 
	tElf32_Sw‹d
;

12 
uöt64_t
 
	tElf64_Addr
;

13 
uöt64_t
 
	tElf64_Off
;

14 
uöt16_t
 
	tElf64_HÆf
;

15 
uöt32_t
 
	tElf64_W‹d
;

16 
öt32_t
 
	tElf64_SW‹d
;

17 
uöt64_t
 
	tElf64_Xw‹d
;

18 
öt64_t
 
	tElf64_Sxw‹d
;

20 
check_ñf_magic_num
(const *);

	@tests/readelf/elf_header.h

1 
	~"ñf.h
"

2 
	~"ñf_idít.h
"

4 #i‚de‡
ELF_HEADER_H


5 
	#ELF_HEADER_H


	)

8 
	me_idít
[
EI_NIDENT
];

9 
Elf32_HÆf
 
	me_ty≥
;

10 
Elf32_HÆf
 
	me_machöe
;

11 
Elf32_W‹d
 
	me_vîsi⁄
;

12 
Elf32_Addr
 
	me_íåy
;

13 
Elf32_Off
 
	me_phoff
;

14 
Elf32_Off
 
	me_shoff
;

15 
Elf32_W‹d
 
	me_Êags
;

16 
Elf32_HÆf
 
	me_ehsize
;

17 
Elf32_HÆf
 
	me_phítsize
;

18 
Elf32_HÆf
 
	me_phnum
;

19 
Elf32_HÆf
 
	me_shítsize
;

20 
Elf32_HÆf
 
	me_shnum
;

21 
Elf32_HÆf
 
	me_sh°∫dx
;

22 } 
	tElf32_Ehdr
;

25 
	me_idít
[
EI_NIDENT
];

26 
Elf64_HÆf
 
	me_ty≥
;

27 
Elf64_HÆf
 
	me_machöe
;

28 
Elf64_W‹d
 
	me_vîsi⁄
;

29 
Elf64_Addr
 
	me_íåy
;

30 
Elf64_Off
 
	me_phoff
;

31 
Elf64_Off
 
	me_shoff
;

32 
Elf64_W‹d
 
	me_Êags
;

33 
Elf64_HÆf
 
	me_ehsize
;

34 
Elf64_HÆf
 
	me_phítsize
;

35 
Elf64_HÆf
 
	me_phnum
;

36 
Elf64_HÆf
 
	me_shítsize
;

37 
Elf64_HÆf
 
	me_shnum
;

38 
Elf64_HÆf
 
	me_sh°∫dx
;

39 } 
	tElf64_Ehdr
;

43 
	me_idít
[
EI_NIDENT
];

45 
uöt16_t
 
	me_ty≥
;

47 
uöt16_t
 
	me_machöe
;

49 
uöt32_t
 
	me_vîsi⁄
;

51 
uöt64_t
 
	me_íåy
;

53 
uöt64_t
 
	me_phoff
;

55 
uöt64_t
 
	me_shoff
;

57 
uöt32_t
 
	me_Êags
;

59 
uöt16_t
 
	me_ehsize
;

61 
uöt16_t
 
	me_phítsize
;

63 
uöt16_t
 
	me_phnum
;

65 
uöt16_t
 
	me_shítsize
;

67 
uöt16_t
 
	me_shnum
;

69 
uöt16_t
 
	me_sh°∫dx
;

70 } 
	tElf_I¡î«l_Ehdr
;

75 
	#ET_NONE
 0

	)

76 
	#ET_REL
 1

	)

77 
	#ET_EXEC
 2

	)

78 
	#ET_DYN
 3

	)

79 
	#ET_CORE
 4

	)

80 
	#ET_LOOS
 0x„00

	)

81 
	#ET_HIOS
 0x„ff

	)

82 
	#ET_LOPROC
 0xff00

	)

83 
	#ET_HIPROC
 0xffff

	)

88 
	#EM_NONE
 0

	)

89 
	#EM_M32
 1

	)

90 
	#EM_SPARC
 2

	)

91 
	#EM_386
 3

	)

92 
	#EM_68K
 4

	)

93 
	#EM_88K
 5

	)

94 
	#EM_IAMCU
 6

	)

95 
	#EM_860
 7

	)

96 
	#EM_MIPS
 8

	)

97 
	#EM_S370
 9

	)

98 
	#EM_MIPS_RS3_LE
 10

	)

99 
	#EM_PARISC
 15

	)

100 
	#EM_VPP500
 17

	)

101 
	#EM_SPARC32PLUS
 18

	)

102 
	#EM_960
 19

	)

103 
	#EM_PPC
 20

	)

104 
	#EM_PPC64
 21

	)

105 
	#EM_S390
 22

	)

106 
	#EM_SPU
 23

	)

107 
	#EM_V800
 36

	)

108 
	#EM_FR20
 37

	)

109 
	#EM_RH32
 38

	)

110 
	#EM_RCE
 39

	)

111 
	#EM_ARM
 40

	)

112 
	#EM_ALPHA
 41

	)

113 
	#EM_SH
 42

	)

114 
	#EM_SPARCV9
 43

	)

115 
	#EM_TRICORE
 44

	)

116 
	#EM_ARC
 45

	)

117 
	#EM_H8_300
 46

	)

118 
	#EM_H8_300H
 47

	)

119 
	#EM_H8S
 48

	)

120 
	#EM_H8_500
 49

	)

121 
	#EM_IA_64
 50

	)

122 
	#EM_MIPS_X
 51

	)

123 
	#EM_COLDFIRE
 52

	)

124 
	#EM_68HC12
 53

	)

125 
	#EM_MMA
 54

	)

126 
	#EM_PCP
 55

	)

127 
	#EM_NCPU
 56

	)

128 
	#EM_NDR1
 57

	)

129 
	#EM_STARCORE
 58

	)

130 
	#EM_ME16
 59

	)

131 
	#EM_ST100
 60

	)

132 
	#EM_TINYJ
 61

	)

133 
	#EM_X86_64
 62

	)

134 
	#EM_PDSP
 63

	)

135 
	#EM_PDP10
 64

	)

136 
	#EM_PDP11
 65

	)

137 
	#EM_FX66
 66

	)

138 
	#EM_ST9PLUS
 67

	)

139 
	#EM_ST7
 68

	)

140 
	#EM_68HC16
 69

	)

141 
	#EM_68HC11
 70

	)

142 
	#EM_68HC08
 71

	)

143 
	#EM_68HC05
 72

	)

144 
	#EM_SVX
 73

	)

145 
	#EM_ST19
 74

	)

146 
	#EM_VAX
 75

	)

147 
	#EM_CRIS
 76

	)

148 
	#EM_JAVELIN
 77

	)

149 
	#EM_FIREPATH
 78

	)

150 
	#EM_ZSP
 79

	)

151 
	#EM_MMIX
 80

	)

152 
	#EM_HUANY
 81

	)

153 
	#EM_PRISM
 82

	)

154 
	#EM_AVR
 83

	)

155 
	#EM_FR30
 84

	)

156 
	#EM_D10V
 85

	)

157 
	#EM_D30V
 86

	)

158 
	#EM_V850
 87

	)

159 
	#EM_M32R
 88

	)

160 
	#EM_MN10300
 89

	)

161 
	#EM_MN10200
 90

	)

162 
	#EM_PJ
 91

	)

163 
	#EM_OPENRISC
 92

	)

164 
	#EM_ARC_COMPACT
 93

	)

165 
	#EM_XTENSA
 94

	)

166 
	#EM_VODEPCPRE
 95

	)

167 
	#EM_TMM_GPP
 96

	)

168 
	#EM_NS32K
 97

	)

169 
	#EM_TPC
 98

	)

170 
	#EM_SNP1K
 99

	)

171 
	#EM_ST200
 100

	)

172 
	#EM_IP2K
 101

	)

173 
	#EM_MAX
 102

	)

174 
	#EM_CR
 103

	)

175 
	#EM_F2MC16
 104

	)

176 
	#EM_MSP430
 105

	)

177 
	#EM_BLACKFIN
 106

	)

178 
	#EM_SE_C33
 107

	)

179 
	#EM_SEP
 108

	)

180 
	#EM_ARCA
 109

	)

181 
	#EM_UNICORE
 110

	)

182 
	#EM_EXCESS
 111

	)

183 
	#EM_DXP
 112

	)

184 
	#EM_ALTERA_NIOS2
 113

	)

185 
	#EM_CRX
 114

	)

186 
	#EM_XGATE
 115

	)

187 
	#EM_C116
 116

	)

188 
	#EM_M16C
 117

	)

189 
	#EM_DSPIC30F
 118

	)

190 
	#EM_CE
 119

	)

191 
	#EM_M32C
 120

	)

192 
	#EM_TSK3000
 131

	)

193 
	#EM_RS08
 132

	)

194 
	#EM_SHARC
 133

	)

195 
	#EM_ECOG2
 134

	)

196 
	#EM_SCORE7
 135

	)

197 
	#EM_DSP24
 136

	)

198 
	#EM_VIDEOCORE3
 137

	)

199 
	#EM_LATTINCEMICO32
 138

	)

200 
	#EM_SE_C17
 139

	)

201 
	#EM_TI_C6000
 140

	)

202 
	#EM_TI_C2000
 141

	)

203 
	#EM_TI_C5500
 142

	)

204 
	#EM_TI_ARP32
 143

	)

205 
	#EM_TI_PRU
 144

	)

206 
	#EM_MMDSP_PLUS
 160

	)

207 
	#EM_CYPRESS_M8C
 161

	)

208 
	#EM_R32C
 162

	)

209 
	#EM_TRIMEDIA
 163

	)

210 
	#EM_QDSP6
 164

	)

211 
	#EM_8051
 165

	)

212 
	#EM_STXP7X
 166

	)

213 
	#EM_NDS32
 167

	)

214 
	#EM_ECOG1
 168

	)

215 
	#EM_ECOG1X
 168

	)

216 
	#EM_MAXQ30
 169

	)

217 
	#EM_XIMO16
 170

	)

218 
	#EM_MANIK
 171

	)

219 
	#EM_CRAYNV2
 172

	)

220 
	#EM_RX
 173

	)

221 
	#EM_METAG
 174

	)

222 
	#EM_MCST_ELBRUS
 175

	)

223 
	#EM_ECOG16
 176

	)

224 
	#EM_CR16
 177

	)

225 
	#EM_ETPU
 178

	)

226 
	#EM_SLE9X
 179

	)

227 
	#EM_L10M
 180

	)

228 
	#EM_K10M
 181

	)

229 
	#EM_AARCH64
 183

	)

230 
	#EM_AVR32
 195

	)

231 
	#EM_STM8
 186

	)

232 
	#EM_TILE64
 187

	)

233 
	#EM_TILEPRO
 188

	)

234 
	#EM_MICROBLAZE
 189

	)

235 
	#EM_CUDA
 190

	)

236 
	#EM_TILEGX
 191

	)

237 
	#EM_CLOUDSHIELD
 192

	)

238 
	#EM_COREA_1ST
 193

	)

239 
	#EM_COREA_2ND
 194

	)

240 
	#EM_ARC_COMPACT2
 195

	)

241 
	#EM_OPEN8
 196

	)

242 
	#EM_RL78
 197

	)

243 
	#EM_VIDEOCORE5
 198

	)

244 
	#EM_78KOR
 199

	)

245 
	#EM_56800EX
 200

	)

246 
	#EM_BA1
 201

	)

247 
	#EM_BA2
 202

	)

248 
	#EM_XCORE
 203

	)

249 
	#EM_MCHP_PIC
 204

	)

250 
	#EM_INTEL205
 205

	)

251 
	#EM_INTEL206
 206

	)

252 
	#EM_INTEL207
 207

	)

253 
	#EM_INTEL208
 208

	)

254 
	#EM_INTEL209
 209

	)

255 
	#EM_KM32
 210

	)

256 
	#EM_KMX32
 211

	)

257 
	#EM_KMX16
 212

	)

258 
	#EM_KMX8
 213

	)

259 
	#EM_KVARC
 214

	)

260 
	#EM_CDP
 215

	)

261 
	#EM_COGE
 216

	)

262 
	#EM_COOL
 217

	)

263 
	#EM_NORC
 218

	)

264 
	#EM_CSR_KALIMBA
 219

	)

265 
	#EM_Z80
 220

	)

266 
	#EM_VISIUM
 221

	)

267 
	#EM_FT32
 222

	)

268 
	#EM_MOXIE
 223

	)

269 
	#EM_AMDGPU
 224

	)

270 
	#EM_RISCV
 243

	)

275 
	#EV_NONE
 0

	)

276 
	#EV_CURRENT
 1

	)

278 
Elf_I¡î«l_Ehdr
 *
gë_ñf_hódî
(
FILE
 *);

280 
di•œy_fûe_hódî
(c⁄° 
Elf_I¡î«l_Ehdr
 *);

	@tests/readelf/elf_ident.h

1 #i‚de‡
ELF_IDENT_H


2 
	#ELF_IDENT_H


	)

5 
	#EI_MAG0
 0

	)

7 
	#EI_MAG1
 1

	)

9 
	#EI_MAG2
 2

	)

11 
	#EI_MAG3
 3

	)

16 
	#EI_CLASS
 4

	)

18 
	#EI_DATA
 5

	)

20 
	#EI_VERSION
 6

	)

21 
	#EI_OSABI
 7

	)

22 
	#EI_ABIVERSION
 8

	)

24 
	#EI_PAD
 9

	)

26 
	#EI_NIDENT
 16

	)

28 
	#ELFMAG0
 0x7f

	)

29 
	#ELFMAG1
 'E'

	)

30 
	#ELFMAG2
 'L'

	)

31 
	#ELFMAG3
 'F'

	)

33 
	#ELFCLASSNONE
 0

	)

34 
	#ELFCLASS32
 1

	)

35 
	#ELFCLASS64
 2

	)

37 
	#ELFDATANONE
 0

	)

38 
	#ELFDATA2LSB
 1

	)

39 
	#ELFDATA2MSB
 2

	)

41 
	#ELFOSABI_NONE
 0

	)

42 
	#ELFOSABI_HPUX
 1

	)

43 
	#ELFOSABI_NETBSD
 2

	)

44 
	#ELFOSABI_GNU
 3

	)

45 
	#ELFOSABI_LINUX
 3

	)

46 
	#ELFOSABI_SOLARIS
 6

	)

47 
	#ELFOSABI_AIX
 7

	)

48 
	#ELFOSABI_IRIX
 8

	)

49 
	#ELFOSABI_FREEBSD
 9

	)

50 
	#ELFOSABI_TRU64
 10

	)

51 
	#ELFOSABI_MODESTO
 11

	)

52 
	#ELFOSABI_OPENBSD
 12

	)

53 
	#ELFOSABI_OPENVMS
 13

	)

54 
	#ELFOSABI_NSK
 14

	)

55 
	#ELFOSABI_AROS
 15

	)

56 
	#ELFOSABI_FENIXOS
 16

	)

57 
	#ELFOSABI_CLOUDABI
 17

	)

58 
	#ELFOSABI_OPENVOS
 18

	)

	@tests/readelf/file.c

1 
	~<î∫o.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

5 
FILE
 *
	$›í_fûe
(c⁄° *
fûíame
)

7 
FILE
 *
fûe
 = 
	`f›í
(
fûíame
, "r");

8 i‡(!
fûe
) {

9 
	`≥º‹
("readelf");

10 
	`exô
(
î∫o
);

13  
fûe
;

14 
	}
}

16 *
	$ªad_fûe
(
FILE
 *
fûe
, 
size_t
 
size
, 
off_t
 
off£t
)

18 *
buf
 = 
	`mÆloc
(
size
);

19 i‡(!
buf
) {

20 
	`≥º‹
("readelf");

21 
	`exô
(
î∫o
);

24 
off_t
 
off
 = 
	`f£ek
(
fûe
, 
off£t
, 
SEEK_SET
);

25 i‡(
off
 == -1) {

26 
	`≥º‹
("readelf");

27 
	`exô
(
î∫o
);

30 
n
 = 
	`‰ód
(
buf
, 
size
, 1, 
fûe
);

31 i‡(
n
 == 1) {

32  
buf
;

35 i‡(
n
 < 0) {

36 
	`≥º‹
("readelf");

38 
	`Ârötf
(
°dîr
, "readelf: Error: Notá valid ELF file\n");

41 
	`‰ì
(
buf
);

42 
	`exô
(
î∫o
);

43 
	}
}

	@tests/readelf/file.h

1 #i‚de‡
FILE_H


2 
	#FILE_H


	)

4 
FILE
 *
›í_fûe
(const *);

6 *
ªad_fûe
(
FILE
 *, 
size_t
, 
off_t
);

	@tests/readelf/file_header.c

1 
	~<î∫o.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

5 
	~"ñf.h
"

6 
	~"ñf_hódî.h
"

7 
	~"ñf_idít.h
"

8 
	~"fûe.h
"

10 
Elf_I¡î«l_Ehdr
 *
	$gë_ñf_hódî
(
FILE
 *
fûe
)

12 *
buf
 = (*Ë
	`ªad_fûe
(
fûe
, (
Elf64_Ehdr
), 0);

13 
Elf_I¡î«l_Ehdr
 *
hódî
 =

14 (
Elf_I¡î«l_Ehdr
 *Ë
	`mÆloc
((Elf_Internal_Ehdr));

15 i‡(!
hódî
) {

16 
	`≥º‹
("readelf");

17 
	`‰ì
(
buf
);

18 
	`exô
(
î∫o
);

21 
i
 = 0; i < 
EI_NIDENT
; i++)

22 
hódî
->
e_idít
[
i
] = 
buf
[i];

24 i‡(
buf
[
EI_CLASS
] =
ELFCLASS64
) {

25 
Elf64_Ehdr
 *
ñf64
 = (Elf64_Ehd∏*Ë
buf
;

27 
hódî
->
e_ty≥
 = 
ñf64
->e_type;

28 
hódî
->
e_machöe
 = 
ñf64
->e_machine;

29 
hódî
->
e_vîsi⁄
 = 
ñf64
->e_version;

30 
hódî
->
e_íåy
 = 
ñf64
->e_entry;

31 
hódî
->
e_phoff
 = 
ñf64
->e_phoff;

32 
hódî
->
e_shoff
 = 
ñf64
->e_shoff;

33 
hódî
->
e_Êags
 = 
ñf64
->e_flags;

34 
hódî
->
e_ehsize
 = 
ñf64
->e_ehsize;

35 
hódî
->
e_phítsize
 = 
ñf64
->e_phentsize;

36 
hódî
->
e_phnum
 = 
ñf64
->e_phnum;

37 
hódî
->
e_shítsize
 = 
ñf64
->e_shentsize;

38 
hódî
->
e_shnum
 = 
ñf64
->e_shnum;

39 
hódî
->
e_sh°∫dx
 = 
ñf64
->e_shstrndx;

41 
Elf32_Ehdr
 *
ñf32
 = (Elf32_Ehd∏*Ë
buf
;

43 
hódî
->
e_ty≥
 = 
ñf32
->e_type;

44 
hódî
->
e_machöe
 = 
ñf32
->e_machine;

45 
hódî
->
e_vîsi⁄
 = 
ñf32
->e_version;

46 
hódî
->
e_íåy
 = 
ñf32
->e_entry;

47 
hódî
->
e_phoff
 = 
ñf32
->e_phoff;

48 
hódî
->
e_shoff
 = 
ñf32
->e_shoff;

49 
hódî
->
e_Êags
 = 
ñf32
->e_flags;

50 
hódî
->
e_ehsize
 = 
ñf32
->e_ehsize;

51 
hódî
->
e_phítsize
 = 
ñf32
->e_phentsize;

52 
hódî
->
e_phnum
 = 
ñf32
->e_phnum;

53 
hódî
->
e_shítsize
 = 
ñf32
->e_shentsize;

54 
hódî
->
e_shnum
 = 
ñf32
->e_shnum;

55 
hódî
->
e_sh°∫dx
 = 
ñf32
->e_shstrndx;

58 
	`‰ì
(
buf
);

60  
hódî
;

61 
	}
}

63 
	$¥öt_magic
(c⁄° *
e_idít
)

65 
	`Ârötf
(
°dout
, " Magic: ");

66 
i
 = 0; i < 
EI_NIDENT
; i++) {

67 
	`¥ötf
(" %02x", 
e_idít
[
i
]);

69 
	`Ârötf
(
°dout
, "\n");

70 
	}
}

72 *
	$gë_fûe_˛ass
(c⁄° 
˛ass
)

74 
buf
[32];

76 
˛ass
) {

77 
ELFCLASSNONE
:

79 
ELFCLASS32
:

81 
ELFCLASS64
:

84 
	`¢¥ötf
(
buf
, (buf), "<unknown: %u>", 
˛ass
);

87  
buf
;

88 
	}
}

90 *
	$gë_d©a_ícodög
(c⁄° 
ícodög
)

92 
buf
[32];

94 
ícodög
) {

95 
ELFDATANONE
:

97 
ELFDATA2LSB
:

99 
ELFDATA2MSB
:

102 
	`¢¥ötf
(
buf
, (buf), "<unknown: %x>", 
ícodög
);

105  
buf
;

106 
	}
}

108 *
	$gë_ñf_vîsi⁄
(c⁄° 
vîsi⁄
)

110 
buf
[32];

112 
vîsi⁄
) {

113 
EV_CURRENT
:

115 
EV_NONE
:

118 
	`¢¥ötf
(
buf
, (buf), "%x <unknown>", 
vîsi⁄
);

121  
buf
;

122 
	}
}

124 *
	$gë_oßbi_«me
(c⁄° 
oßbi
)

126 
buf
[32];

128 
oßbi
) {

129 
ELFOSABI_NONE
:

131 
ELFOSABI_HPUX
:

133 
ELFOSABI_NETBSD
:

135 
ELFOSABI_GNU
:

137 
ELFOSABI_SOLARIS
:

139 
ELFOSABI_AIX
:

141 
ELFOSABI_IRIX
:

143 
ELFOSABI_FREEBSD
:

145 
ELFOSABI_TRU64
:

147 
ELFOSABI_MODESTO
:

149 
ELFOSABI_OPENBSD
:

151 
ELFOSABI_OPENVMS
:

153 
ELFOSABI_NSK
:

155 
ELFOSABI_AROS
:

157 
ELFOSABI_FENIXOS
:

159 
ELFOSABI_CLOUDABI
:

161 
ELFOSABI_OPENVOS
:

164 i‡(
oßbi
 >= 64) {

168 
	`¢¥ötf
(
buf
, (buf), "<unknown: %x>", 
oßbi
);

172  
buf
;

173 
	}
}

175 *
	$gë_fûe_ty≥
(
uöt16_t
 
e_ty≥
)

177 
buf
[32];

179 
e_ty≥
) {

180 
ET_NONE
:

182 
ET_REL
:

184 
ET_EXEC
:

186 
ET_DYN
:

188 
ET_CORE
:

191 i‡(
e_ty≥
 >
ET_LOOS
 &&É_ty≥ <
ET_HIOS
) {

192 
	`¢¥ötf
(
buf
, (buf), "OS S≥cific: (%x)", 
e_ty≥
);

193 } i‡(
e_ty≥
 >
ET_LOPROC
 &&É_ty≥ <
ET_HIPROC
) {

194 
	`¢¥ötf
(
buf
, (buf), "Pro˚ss‹ S≥cific: (%x)", 
e_ty≥
);

196 
	`¢¥ötf
(
buf
, (buf), "<unknown>: (%x)", 
e_ty≥
);

200  
buf
;

201 
	}
}

203 *
	$gë_machöe_«me
(
uöt16_t
 
e_machöe
)

205 
buf
[64];

207 
e_machöe
) {

208 
EM_NONE
:

210 
EM_M32
:

212 
EM_SPARC
:

214 
EM_386
:

216 
EM_68K
:

218 
EM_88K
:

220 
EM_IAMCU
:

222 
EM_860
:

224 
EM_MIPS
:

226 
EM_S370
:

228 
EM_MIPS_RS3_LE
:

230 
EM_PARISC
:

232 
EM_VPP500
:

234 
EM_SPARC32PLUS
:

236 
EM_960
:

238 
EM_PPC
:

240 
EM_PPC64
:

242 
EM_S390
:

244 
EM_SPU
:

246 
EM_V800
:

248 
EM_FR20
:

250 
EM_RH32
:

252 
EM_RCE
:

254 
EM_ARM
:

256 
EM_ALPHA
:

258 
EM_SH
:

260 
EM_SPARCV9
:

262 
EM_TRICORE
:

264 
EM_ARC
:

266 
EM_H8_300
:

268 
EM_H8_300H
:

270 
EM_H8S
:

272 
EM_H8_500
:

274 
EM_IA_64
:

276 
EM_MIPS_X
:

279 
EM_LATTINCEMICO32
:

281 
EM_SE_C17
:

283 
EM_TI_C6000
:

285 
EM_TI_C2000
:

287 
EM_TI_C5500
:

289 
EM_TI_PRU
:

291 
EM_MMDSP_PLUS
:

293 
EM_CYPRESS_M8C
:

295 
EM_R32C
:

297 
EM_TRIMEDIA
:

299 
EM_QDSP6
:

301 
EM_8051
:

303 
EM_STXP7X
:

305 
EM_NDS32
:

308 
EM_ECOG1X
:

310 
EM_MAXQ30
:

312 
EM_XIMO16
:

314 
EM_MANIK
:

316 
EM_CRAYNV2
:

318 
EM_RX
:

320 
EM_METAG
:

322 
EM_MCST_ELBRUS
:

324 
EM_ECOG16
:

326 
EM_CR16
:

327 
EM_MICROBLAZE
:

329 
EM_ETPU
:

331 
EM_SLE9X
:

333 
EM_L10M
:

335 
EM_K10M
:

337 
EM_AARCH64
:

339 
EM_AVR32
:

341 
EM_STM8
:

343 
EM_TILE64
:

345 
EM_TILEPRO
:

347 
EM_CUDA
:

350 
EM_AMDGPU
:

352 
EM_RISCV
:

355 
	`¢¥ötf
(
buf
, (buf), "<unknown>: 0x%x", 
e_machöe
);

358  
buf
;

359 
	}
}

361 
	$di•œy_fûe_hódî
(c⁄° 
Elf_I¡î«l_Ehdr
 *
hódî
)

363 i‡(
	`check_ñf_magic_num
(
hódî
->
e_idít
)) {

364 
	`Ârötf
(
°dîr
,

367 
	`exô
(1);

370 
	`Ârötf
(
°dout
, "ELF Header:\n");

371 
	`¥öt_magic
(
hódî
->
e_idít
);

372 
	`Ârötf
(
°dout
, " Class: %s\n",

373 
	`gë_fûe_˛ass
(
hódî
->
e_idít
[
EI_CLASS
]));

374 
	`Ârötf
(
°dout
, " Data: %s\n",

375 
	`gë_d©a_ícodög
(
hódî
->
e_idít
[
EI_DATA
]));

376 
	`Ârötf
(
°dout
, " Version: %s\n",

377 
	`gë_ñf_vîsi⁄
(
hódî
->
e_idít
[
EI_VERSION
]));

378 
	`Ârötf
(
°dout
, " OS/ABI: %s\n",

379 
	`gë_oßbi_«me
(
hódî
->
e_idít
[
EI_OSABI
]));

380 
	`Ârötf
(
°dout
, " ABI Version: %x\n",

381 
hódî
->
e_idít
[
EI_ABIVERSION
]);

382 
	`Ârötf
(
°dout
, " Type: %s\n",

383 
	`gë_fûe_ty≥
(
hódî
->
e_ty≥
));

384 
	`Ârötf
(
°dout
, " Machine: %s\n",

385 
	`gë_machöe_«me
(
hódî
->
e_machöe
));

386 
	`Ârötf
(
°dout
, " Version: 0x%x\n",

387 
hódî
->
e_vîsi⁄
);

388 
	`Ârötf
(
°dout
, " EntryÖointáddress: 0x%llx\n",

389 
hódî
->
e_íåy
);

390 
	`Ârötf
(
°dout
,

392 
hódî
->
e_phoff
);

393 
	`Ârötf
(
°dout
,

395 
hódî
->
e_shoff
);

397 
	`Ârötf
(
°dout
, " Flags: 0x%x\n",

398 
hódî
->
e_Êags
);

399 
	`Ârötf
(
°dout
, " Size ofÅhis header: %d (bytes)\n",

400 
hódî
->
e_ehsize
);

401 
	`Ârötf
(
°dout
, " Size ofÖrogram headers: %d (bytes)\n",

402 
hódî
->
e_phítsize
);

403 
	`Ârötf
(
°dout
, " Number ofÖrogram headers: %d\n",

404 
hódî
->
e_phnum
);

405 
	`Ârötf
(
°dout
, " Size of section headers: %d (bytes)\n",

406 
hódî
->
e_shítsize
);

407 
	`Ârötf
(
°dout
, " Number of section headers: %d\n",

408 
hódî
->
e_shnum
);

409 
	`Ârötf
(
°dout
, " Section header stringÅable index: %d\n",

410 
hódî
->
e_sh°∫dx
);

411 
	}
}

	@tests/readelf/readelf.c

1 
	~<î∫o.h
>

2 
	~<gë›t.h
>

3 
	~<°dio.h
>

4 
	~<°dlib.h
>

6 
	~"ñf.h
"

7 
	~"ñf_hódî.h
"

8 
	~"fûe.h
"

9 
	~"ªadñf.h
"

10 
	~"£˘i⁄.h
"

12 
	$ªad_ñf_d©a
(c⁄° *
∑th
, 
Êags
)

14 
FILE
 *
fûe
 = 
	`›í_fûe
(
∑th
);

15 
Elf_I¡î«l_Ehdr
 *
hódî
 = 
	`gë_ñf_hódî
(
fûe
);

17 i‡(
Êags
 & 
FLAG_ELF_HEADER
)

18 
	`di•œy_fûe_hódî
(
hódî
);

20 i‡(
Êags
 & 
FLAG_SECTION_HEADER
)

21 
	`di•œy_£˘i⁄_hódî
(
fûe
, 
hódî
);

23 
	`‰ì
(
hódî
);

25 i‡(
	`f˛o£
(
fûe
)) {

26 
	`≥º‹
("readelf");

27 
	`exô
(
î∫o
);

29 
	}
}

31 
	$maö
(
¨gc
, *
¨gv
[])

33 
	`ªad_ñf_d©a
(
¨gv
[0], 
FLAG_ELF_HEADER
 | 
FLAG_SECTION_HEADER
);

36 
	}
}

	@tests/readelf/readelf.h

1 #i‚de‡
READELF_H


2 
	#READELF_H


	)

4 
	#FLAG_ELF_HEADER
 0x01

	)

5 
	#FLAG_PROGRAM_HEADER
 0x02

	)

6 
	#FLAG_SECTION_HEADER
 0x04

	)

	@tests/readelf/section.c

1 
	~<î∫o.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

5 
	~"ñf_hódî.h
"

6 
	~"fûe.h
"

7 
	~"£˘i⁄.h
"

8 
	~"°rög_èbÀ.h
"

10 
Elf_I¡î«l_Shdr
 **
	$gë_£˘i⁄_hódîs
(
FILE
 *
fûe
,

11 
Elf_I¡î«l_Ehdr
 *
ñf_hódî
,

12 
shnum
,

13 
is64
)

15 
off_t
 
off£t
 = 
ñf_hódî
->
e_shoff
;

16 
size_t
 
size
 = (
is64
 ? (
Elf64_Shdr
Ë: (
Elf32_Shdr
)Ë* 
shnum
;

17 *
buf
 = 
	`ªad_fûe
(
fûe
, 
size
, 
off£t
);

19 
Elf_I¡î«l_Shdr
 **
hódîs
 =

20 (
Elf_I¡î«l_Shdr
 **Ë
	`mÆloc
((Elf_I¡î«l_ShdrË* 
shnum
);

21 i‡(!
hódîs
) {

22 
	`≥º‹
("readelf");

23 
	`exô
(
î∫o
);

26 
i
 = 0; i < 
shnum
; i++) {

27 
Elf_I¡î«l_Shdr
 *
hódî
 = (Elf_I¡î«l_Shd∏*Ë
hódîs
 + 
i
;

29 i‡(
is64
) {

30 
Elf64_Shdr
 *
shdr
 = (Elf64_Shd∏*Ë(
buf
 + (Elf64_ShdrË* 
i
);

32 
hódî
->
sh_«me
 = 
shdr
->sh_name;

33 
hódî
->
sh_ty≥
 = 
shdr
->sh_type;

34 
hódî
->
sh_Êags
 = 
shdr
->sh_flags;

35 
hódî
->
sh_addr
 = 
shdr
->sh_addr;

36 
hódî
->
sh_off£t
 = 
shdr
->sh_offset;

37 
hódî
->
sh_size
 = 
shdr
->sh_size;

38 
hódî
->
sh_lök
 = 
shdr
->sh_link;

39 
hódî
->
sh_öfo
 = 
shdr
->sh_info;

40 
hódî
->
sh_addølign
 = 
shdr
->sh_addralign;

41 
hódî
->
sh_ítsize
 = 
shdr
->sh_entsize;

43 
Elf32_Shdr
 *
shdr
 = (Elf32_Shd∏*Ë(
buf
 + (Elf32_ShdrË* 
i
);

45 
hódî
->
sh_«me
 = 
shdr
->sh_name;

46 
hódî
->
sh_ty≥
 = 
shdr
->sh_type;

47 
hódî
->
sh_Êags
 = 
shdr
->sh_flags;

48 
hódî
->
sh_addr
 = 
shdr
->sh_addr;

49 
hódî
->
sh_off£t
 = 
shdr
->sh_offset;

50 
hódî
->
sh_size
 = 
shdr
->sh_size;

51 
hódî
->
sh_lök
 = 
shdr
->sh_link;

52 
hódî
->
sh_öfo
 = 
shdr
->sh_info;

53 
hódî
->
sh_addølign
 = 
shdr
->sh_addralign;

54 
hódî
->
sh_ítsize
 = 
shdr
->sh_entsize;

58 
	`‰ì
(
buf
);

60  
hódîs
;

61 
	}
}

63 *
	$gë_£˘i⁄_ty≥
(
uöt32_t
 
sh_ty≥
)

65 
buf
[32];

67 
sh_ty≥
) {

68 
SHT_NULL
:

70 
SHT_PROGBITS
:

72 
SHT_SYMTAB
:

74 
SHT_STRTAB
:

76 
SHT_RELA
:

78 
SHT_HASH
:

80 
SHT_DYNAMIC
:

82 
SHT_NOTE
:

84 
SHT_NOBITS
:

86 
SHT_REL
:

88 
SHT_SHLIB
:

90 
SHT_DYNSYM
:

92 
SHT_INIT_ARRAY
:

94 
SHT_FINI_ARRAY
:

96 
SHT_PREINIT_ARRAY
:

98 
SHT_GROUP
:

100 
SHT_SYMTAB_SHNDX
:

103 
	`¢¥ötf
(
buf
, (buf), "%08x: <unknown>", 
sh_ty≥
);

106  
buf
;

107 
	}
}

109 *
	$gë_£˘i⁄_Êags
(c⁄° 
uöt64_t
 
sh_Êags
)

111 
buf
[64];

112 *
p
 = 
buf
;

113 
uöt64_t
 
mask
 = 1;

115 
sh_Êags
 >
mask
) {

116 
sh_Êags
 & 
mask
) {

117 
SHF_WRITE
:

118 *
p
 = 'W';

120 
SHF_ALLOC
:

121 *
p
 = 'A';

123 
SHF_EXECINSTR
:

124 *
p
 = 'X';

126 
SHF_MERGE
:

127 *
p
 = 'M';

129 
SHF_STRINGS
:

130 *
p
 = 'S';

132 
SHF_INFO_LINK
:

133 *
p
 = 'I';

135 
SHF_LINK_ORDER
:

136 *
p
 = 'L';

138 
SHF_OS_NONCONFORMING
:

139 *
p
 = 'O';

141 
SHF_GROUP
:

142 *
p
 = 'G';

144 
SHF_TLS
:

145 *
p
 = 'T';

147 
SHF_COMPRESSED
:

148 *
p
 = 'C';

151 
mask
 <<= 1;

155 
p
++;

156 
mask
 <<= 1;

159 *
p
 = '\0';

161  
buf
;

162 
	}
}

164 
	$di•œy_£˘i⁄_hódî
(
FILE
 *
fûe
, 
Elf_I¡î«l_Ehdr
 *
ñf_hódî
)

166 i‡(
	`check_ñf_magic_num
(
ñf_hódî
->
e_idít
)) {

167 
	`Ârötf
(
°dîr
,

170 
	`exô
(1);

173 
	`Ârötf
(
°dout
, "Thereáre %d section headers, startingát offset 0x%x\n\n",

174 
ñf_hódî
->
e_shnum
,Élf_hódî->
e_shoff
);

175 
	`Ârötf
(
°dout
, "Section Headers:\n");

177 
	`Ârötf
(
°dout
,

181 
Elf_I¡î«l_Shdr
 **
shdrs
 =

182 
	`gë_£˘i⁄_hódîs
(
fûe
, 
ñf_hódî
,Élf_hódî->
e_shnum
,

183 
ñf_hódî
->
e_idít
[
EI_CLASS
] =
ELFCLASS64
);

185 *
°πab
 = 
	`lﬂd_°rög_èbÀ
(
fûe
, 
ñf_hódî
, 
shdrs
);

187 
i
 = 0; i < 
ñf_hódî
->
e_shnum
; i++) {

188 
Elf_I¡î«l_Shdr
 *
shdr
 = (Elf_I¡î«l_Shd∏*Ë
shdrs
 + 
i
;

191 
	`Ârötf
(
°dout
, " [%2d]", 
i
);

193 
	`Ârötf
(
°dout
, " %-17s", 
	`gë_°r_by_ödex
(
°πab
, 
shdr
->
sh_«me
));

195 
	`Ârötf
(
°dout
, " %-15s", 
	`gë_£˘i⁄_ty≥
(
shdr
->
sh_ty≥
));

197 
	`Ârötf
(
°dout
, " %08lx", 
shdr
->
sh_addr
);

199 
	`Ârötf
(
°dout
, " %06lx", 
shdr
->
sh_off£t
);

201 
	`Ârötf
(
°dout
, " %06lx", 
shdr
->
sh_size
);

203 
	`Ârötf
(
°dout
, " %02x", 
shdr
->
sh_ítsize
);

205 
	`Ârötf
(
°dout
, " %3s", 
	`gë_£˘i⁄_Êags
(
shdr
->
sh_Êags
));

207 
	`Ârötf
(
°dout
, " %2u", 
shdr
->
sh_lök
);

209 
	`Ârötf
(
°dout
, " %3u", 
shdr
->
sh_öfo
);

211 
	`Ârötf
(
°dout
, " %2lu", 
shdr
->
sh_addølign
);

213 
	`Ârötf
(
°dout
, "\n");

216 
	`Ârötf
(
°dout
, "KeyÅo Flags:\n");

217 
	`Ârötf
(
°dout
,

220 
	`Ârötf
(
°dout
,

223 
	`Ârötf
(
°dout
, " C (compressed)\n");

225 
	`‰ì
(
shdrs
);

226 
	`‰ì
(
°πab
);

227 
	}
}

	@tests/readelf/section.h

1 
	~"ñf.h
"

3 #i‚de‡
SECTION_H


4 
	#SECTION_H


	)

7 
Elf32_W‹d
 
	msh_«me
;

8 
Elf32_W‹d
 
	msh_ty≥
;

9 
Elf32_W‹d
 
	msh_Êags
;

10 
Elf32_Addr
 
	msh_addr
;

11 
Elf32_Off
 
	msh_off£t
;

12 
Elf32_W‹d
 
	msh_size
;

13 
Elf32_W‹d
 
	msh_lök
;

14 
Elf32_W‹d
 
	msh_öfo
;

15 
Elf32_W‹d
 
	msh_addølign
;

16 
Elf32_W‹d
 
	msh_ítsize
;

17 } 
	tElf32_Shdr
;

20 
Elf64_W‹d
 
	msh_«me
;

21 
Elf64_W‹d
 
	msh_ty≥
;

22 
Elf64_Xw‹d
 
	msh_Êags
;

23 
Elf64_Addr
 
	msh_addr
;

24 
Elf64_Off
 
	msh_off£t
;

25 
Elf64_Xw‹d
 
	msh_size
;

26 
Elf64_W‹d
 
	msh_lök
;

27 
Elf64_W‹d
 
	msh_öfo
;

28 
Elf64_Xw‹d
 
	msh_addølign
;

29 
Elf64_Xw‹d
 
	msh_ítsize
;

30 } 
	tElf64_Shdr
;

33 
uöt32_t
 
	msh_«me
;

34 
uöt32_t
 
	msh_ty≥
;

35 
uöt64_t
 
	msh_Êags
;

36 
uöt64_t
 
	msh_addr
;

37 
uöt64_t
 
	msh_off£t
;

38 
uöt64_t
 
	msh_size
;

39 
uöt32_t
 
	msh_lök
;

40 
uöt32_t
 
	msh_öfo
;

41 
uöt64_t
 
	msh_addølign
;

42 
uöt64_t
 
	msh_ítsize
;

43 } 
	tElf_I¡î«l_Shdr
;

48 
	#SHT_NULL
 0

	)

49 
	#SHT_PROGBITS
 1

	)

50 
	#SHT_SYMTAB
 2

	)

51 
	#SHT_STRTAB
 3

	)

52 
	#SHT_RELA
 4

	)

53 
	#SHT_HASH
 5

	)

54 
	#SHT_DYNAMIC
 6

	)

55 
	#SHT_NOTE
 7

	)

56 
	#SHT_NOBITS
 8

	)

57 
	#SHT_REL
 9

	)

58 
	#SHT_SHLIB
 10

	)

59 
	#SHT_DYNSYM
 11

	)

60 
	#SHT_INIT_ARRAY
 14

	)

61 
	#SHT_FINI_ARRAY
 15

	)

62 
	#SHT_PREINIT_ARRAY
 16

	)

63 
	#SHT_GROUP
 17

	)

64 
	#SHT_SYMTAB_SHNDX
 18

	)

65 
	#SHT_LOOS
 0x60000000

	)

66 
	#SHT_HIOS
 0x6fffffff

	)

67 
	#SHT_LOPROC
 0x70000000

	)

68 
	#SHT_HIPROC
 0x7fffffff

	)

69 
	#SHT_LOUSER
 0x80000000

	)

70 
	#SHT_HIUSER
 0xffffffff

	)

75 
	#SHF_WRITE
 0x1

	)

76 
	#SHF_ALLOC
 0x2

	)

77 
	#SHF_EXECINSTR
 0x4

	)

78 
	#SHF_MERGE
 0x10

	)

79 
	#SHF_STRINGS
 0x20

	)

80 
	#SHF_INFO_LINK
 0x40

	)

81 
	#SHF_LINK_ORDER
 0x80

	)

82 
	#SHF_OS_NONCONFORMING
 0x100

	)

83 
	#SHF_GROUP
 0x200

	)

84 
	#SHF_TLS
 0x400

	)

85 
	#SHF_COMPRESSED
 0x800

	)

86 
	#SHF_MASKOS
 0x0ff00000

	)

87 
	#SHF_MASKPROC
 0xf0000000

	)

89 
di•œy_£˘i⁄_hódî
(
FILE
 *, 
Elf_I¡î«l_Ehdr
 *);

	@tests/readelf/string_table.c

1 
	~<î∫o.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

5 
	~"ñf_hódî.h
"

6 
	~"fûe.h
"

7 
	~"£˘i⁄.h
"

9 *
	$lﬂd_°rög_èbÀ
(
FILE
 *
fûe
,

10 
Elf_I¡î«l_Ehdr
 *
ehdr
,

11 
Elf_I¡î«l_Shdr
 **
shdrs
)

13 
Elf_I¡î«l_Shdr
 *
shdr
 = (Elf_I¡î«l_Shd∏*Ë
shdrs
 + 
ehdr
->
e_sh°∫dx
;

15 *
buf
 = 
	`ªad_fûe
(
fûe
, 
shdr
->
sh_size
, shdr->
sh_off£t
);

17  
buf
;

18 
	}
}

20 *
	$gë_°r_by_ödex
(*
°πab
, 
ödex
)

22  &
°πab
[
ödex
];

23 
	}
}

	@tests/readelf/string_table.h

1 
	~"ñf_hódî.h
"

2 
	~"£˘i⁄.h
"

4 #i‚de‡
STRING_TABLE_H


5 
	#STRING_TABLE_H


	)

7 *
lﬂd_°rög_èbÀ
(
FILE
 *, 
Elf_I¡î«l_Ehdr
 *, 
Elf_I¡î«l_Shdr
 **);

9 *
gë_°r_by_ödex
(*, );

	@tests/richards.c

16 
	~<°döt.h
>

17 
	~<°dio.h
>

18 
	~<°dlib.h
>

19 
	~<sys/time.h
>

21 
	#COUNT
 10000

	)

22 
	#QPKT_COUNT_FINAL
 23246

	)

23 
	#HOLD_COUNT_FINAL
 9297

	)

25 
	#MAXINT
 32767

	)

27 
	#BUFSIZE
 3

	)

30 
	mI_IDLE
 = 1,

31 
	mI_WORK
,

32 
	mI_HANDLERA
,

33 
	mI_HANDLERB
,

34 
	mI_DEVA
,

35 
	mI_DEVB
,

38 
	#PKT_BIT
 1

	)

39 
	#WAIT_BIT
 2

	)

40 
	#HOLD_BIT
 4

	)

41 
	#NOTHOLD_BIT
 0xFFFB

	)

44 
	mS_RUN
 = 0,

45 
	mS_RUNPKT
,

46 
	mS_WAIT
,

47 
	mS_WAITPKT
,

48 
	mS_HOLD
,

49 
	mS_HOLDPKT
,

50 
	mS_HOLDWAIT
,

51 
	mS_HOLDWAITPKT
,

54 
	#K_DEV
 1000

	)

55 
	#K_WORK
 1001

	)

57 
	s∑ckë
 {

58 
∑ckë
 *
	mp_lök
;

59 
	mp_id
;

60 
	mp_köd
;

61 
	mp_a1
;

62 
	mp_a2
[
BUFSIZE
 + 1];

65 
	sèsk
 {

66 
èsk
 *
	mt_lök
;

67 
	mt_id
;

68 
	mt_¥i
;

69 
∑ckë
 *
	mt_wkq
;

70 
	mt_°©e
;

71 
	mèsk
 *(*
	mt_‚
)(
	m∑ckë
 *);

72 
uöçå_t
 
	mt_v1
, 
	mt_v2
;

75 c⁄° 
	gÆphabë
[28] = "0ABCDEFGHIJKLMNOPQRSTUVWXYZ";

76 
èsk
 *
	gèskèb
[11] = {

77 (
èsk
 *) 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,

79 
èsk
 *
	gèsk_li°
 = 
NULL
;

80 
èsk
 *
	gtcb
;

81 
	gèskid
;

82 
uöçå_t
 
	gv1
, 
	gv2
;

83 
	gqpkt_cou¡
 = 0, 
	ghﬁd_cou¡
 = 0;

85 
≠≥nd
(
∑ckë
 *
pkt
, ∑ckë *
±r
);

87 
¸óã_èsk
(
id
,

88 
¥i
,

89 
∑ckë
 *
wkq
,

90 
°©e
,

91 
èsk
 *(*
‚
)(
∑ckë
 *),

92 
uöçå_t
 
v1
,

93 
uöçå_t
 
v2
)

95 
èsk
 *
	gt
 = 
mÆloc
((task));

97 
	gèskèb
[
id
] = 
t
;

98 
	gt
->
	gt_lök
 = 
èsk_li°
;

99 
	gt
->
	gt_id
 = 
id
;

100 
	gt
->
	gt_¥i
 = 
¥i
;

101 
	gt
->
	gt_wkq
 = 
wkq
;

102 
	gt
->
	gt_°©e
 = 
°©e
;

103 
	gt
->
	gt_‚
 = 
‚
;

104 
	gt
->
	gt_v1
 = 
v1
;

105 
	gt
->
	gt_v2
 = 
v2
;

106 
	gèsk_li°
 = 
t
;

109 
∑ckë
 *
	$pkt
(
∑ckë
 *
lök
, 
id
, 
köd
)

111 
∑ckë
 *
p
 = 
	`mÆloc
((packet));

113 
i
 = 0; i <
BUFSIZE
; i++)

114 
p
->
p_a2
[
i
] = 0;

116 
p
->
p_lök
 = 
lök
;

117 
p
->
p_id
 = 
id
;

118 
p
->
p_köd
 = 
köd
;

119 
p
->
p_a1
 = 0;

121  
p
;

122 
	}
}

124 
	$scheduÀ
()

126 
tcb
) {

127 
∑ckë
 *
_pkt
 = 
NULL
;

129 
tcb
->
t_°©e
) {

130 
S_WAITPKT
:

131 
_pkt
 = 
tcb
->
t_wkq
;

132 
tcb
->
t_wkq
 = 
_pkt
->
p_lök
;

133 
tcb
->
t_°©e
 = !tcb->
t_wkq
 ? 
S_RUN
 : 
S_RUNPKT
;

135 
S_RUN
:

136 
S_RUNPKT
: {

137 
èskid
 = 
tcb
->
t_id
;

138 
v1
 = 
tcb
->
t_v1
;

139 
v2
 = 
tcb
->
t_v2
;

140 
èsk
 *
√wtcb
 = (*(
tcb
->
t_‚
))(
_pkt
);

141 
tcb
->
t_v1
 = 
v1
;

142 
tcb
->
t_v2
 = 
v2
;

143 
tcb
 = 
√wtcb
;

147 
S_WAIT
:

148 
S_HOLD
:

149 
S_HOLDPKT
:

150 
S_HOLDWAIT
:

151 
S_HOLDWAITPKT
:

152 
tcb
 =Åcb->
t_lök
;

159 
	}
}

161 
èsk
 *
	$waô_èsk
()

163 
tcb
->
t_°©e
 |
WAIT_BIT
;

164  
tcb
;

165 
	}
}

167 
èsk
 *
	$hﬁd_£lf
()

169 ++
hﬁd_cou¡
;

170 
tcb
->
t_°©e
 |
HOLD_BIT
;

171  
tcb
->
t_lök
;

172 
	}
}

174 
èsk
 *
	$föd_tcb
(
id
)

176 
èsk
 *
t
 = 
NULL
;

178 i‡(1 <
id
 && id <(Ë
èskèb
[0])

179 
t
 = 
èskèb
[
id
];

180 i‡(!
t
)

181 
	`¥ötf
("\nBadÅask id %d\n", 
id
);

182  
t
;

183 
	}
}

185 
èsk
 *
	$ªÀa£
(
id
)

187 
èsk
 *
t
 = 
	`föd_tcb
(
id
);

188 i‡(!
t
)

189  
NULL
;

191 
t
->
t_°©e
 &
NOTHOLD_BIT
;

192 i‡(
t
->
t_¥i
 > 
tcb
->t_pri)

193  
t
;

195  
tcb
;

196 
	}
}

198 
èsk
 *
	$qpkt
(
∑ckë
 *
pkt
)

200 
èsk
 *
t
 = 
	`föd_tcb
(
pkt
->
p_id
);

201 i‡(!
t
)

202  
NULL
;

204 
qpkt_cou¡
++;

206 
pkt
->
p_lök
 = 
NULL
;

207 
pkt
->
p_id
 = 
èskid
;

209 i‡(!
t
->
t_wkq
) {

210 
t
->
t_wkq
 = 
pkt
;

211 
t
->
t_°©e
 |
PKT_BIT
;

212 i‡(
t
->
t_¥i
 > 
tcb
->t_pri)

213  
t
;

215 
	`≠≥nd
(
pkt
, (
∑ckë
 *Ë&(
t
->
t_wkq
));

218  
tcb
;

219 
	}
}

221 
èsk
 *
	$idÀ‚
(
∑ckë
 *
pkt
)

223 i‡(--
v2
 == 0)

224  
	`hﬁd_£lf
();

226 i‡((
v1
 & 1) == 0) {

227 
v1
 = (v1 >> 1Ë& 
MAXINT
;

228  
	`ªÀa£
(
I_DEVA
);

231 
v1
 = ((v1 >> 1Ë& 
MAXINT
) ^ 0XD008;

232  
	`ªÀa£
(
I_DEVB
);

233 
	}
}

235 
èsk
 *
	$w‹k‚
(
∑ckë
 *
pkt
)

237 i‡(!
pkt
)

238  
	`waô_èsk
();

240 
v1
 = 
I_HANDLERA
 + 
I_HANDLERB
 - v1;

241 
pkt
->
p_id
 = 
v1
;

243 
pkt
->
p_a1
 = 0;

244 
i
 = 0; i <
BUFSIZE
; i++) {

245 
v2
++;

246 i‡(
v2
 > 26)

247 
v2
 = 1;

248 (
pkt
->
p_a2
)[
i
] = 
Æphabë
[
v2
];

250  
	`qpkt
(
pkt
);

251 
	}
}

253 
èsk
 *
	$h™dÀr‚
(
∑ckë
 *
pkt
)

255 i‡(
pkt
)

256 
	`≠≥nd
(
pkt
, (
∑ckë
 *Ë’kt->
p_köd
 =
K_WORK
 ? &
v1
 : &
v2
));

258 i‡(
v1
) {

259 
∑ckë
 *
w‹kpkt
 = (∑ckë *Ë
v1
;

260 
cou¡
 = 
w‹kpkt
->
p_a1
;

262 i‡(
cou¡
 > 
BUFSIZE
) {

263 
v1
 = (
uöçå_t
Ë(((
∑ckë
 *Ëv1)->
p_lök
);

264  
	`qpkt
(
w‹kpkt
);

267 i‡(
v2
) {

268 
∑ckë
 *
devpkt
 = (∑ckë *Ë
v2
;

269 
v2
 = (
uöçå_t
Ë(((
∑ckë
 *Ëv2)->
p_lök
);

270 
devpkt
->
p_a1
 = 
w‹kpkt
->
p_a2
[
cou¡
];

271 
w‹kpkt
->
p_a1
 = 
cou¡
 + 1;

272  
	`qpkt
(
devpkt
);

275  
	`waô_èsk
();

276 
	}
}

278 
èsk
 *
	$dev‚
(
∑ckë
 *
pkt
)

280 i‡(!
pkt
) {

281 i‡(!
v1
)

282  
	`waô_èsk
();

283 
pkt
 = (
∑ckë
 *Ë
v1
;

284 
v1
 = 0;

285  
	`qpkt
(
pkt
);

287 
v1
 = (
uöçå_t
Ë
pkt
;

288  
	`hﬁd_£lf
();

289 
	}
}

291 
	$≠≥nd
(
∑ckë
 *
pkt
, ∑ckë *
±r
)

293 
pkt
->
p_lök
 = 
NULL
;

295 
±r
->
p_lök
)

296 
±r
 =Öå->
p_lök
;

298 
±r
->
p_lök
 = 
pkt
;

299 
	}
}

301 
	$bích
()

303 
∑ckë
 *
wkq
 = 
NULL
;

305 
	`¸óã_èsk
(
I_IDLE
, 0, 
wkq
, 
S_RUN
, 
idÀ‚
, 1, 
COUNT
);

307 
wkq
 = 
	`pkt
(0, 0, 
K_WORK
);

308 
wkq
 = 
	`pkt
(wkq, 0, 
K_WORK
);

310 
	`¸óã_èsk
(
I_WORK
, 1000, 
wkq
, 
S_WAITPKT
, 
w‹k‚
, 
I_HANDLERA
, 0);

312 
wkq
 = 
	`pkt
(0, 
I_DEVA
, 
K_DEV
);

313 
wkq
 = 
	`pkt
(wkq, 
I_DEVA
, 
K_DEV
);

314 
wkq
 = 
	`pkt
(wkq, 
I_DEVA
, 
K_DEV
);

316 
	`¸óã_èsk
(
I_HANDLERA
, 2000, 
wkq
, 
S_WAITPKT
, 
h™dÀr‚
, 0, 0);

318 
wkq
 = 
	`pkt
(0, 
I_DEVB
, 
K_DEV
);

319 
wkq
 = 
	`pkt
(wkq, 
I_DEVB
, 
K_DEV
);

320 
wkq
 = 
	`pkt
(wkq, 
I_DEVB
, 
K_DEV
);

322 
	`¸óã_èsk
(
I_HANDLERB
, 3000, 
wkq
, 
S_WAITPKT
, 
h™dÀr‚
, 0, 0);

324 
wkq
 = 
NULL
;

325 
	`¸óã_èsk
(
I_DEVA
, 4000, 
wkq
, 
S_WAIT
, 
dev‚
, 0, 0);

326 
	`¸óã_èsk
(
I_DEVB
, 5000, 
wkq
, 
S_WAIT
, 
dev‚
, 0, 0);

328 
tcb
 = 
èsk_li°
;

330 
qpkt_cou¡
 = 
hﬁd_cou¡
 = 0;

332 
	`scheduÀ
();

334 i‡(!(
qpkt_cou¡
 =
QPKT_COUNT_FINAL
 && 
hﬁd_cou¡
 =
HOLD_COUNT_FINAL
)) {

335 
	`¥ötf
("qpkt_cou¡ = %d hﬁd_cou¡ = %d\n", 
qpkt_cou¡
, 
hﬁd_cou¡
);

336 
	`¥ötf
("TheseÑesultsáre incorrect");

337 
	`exô
(1);

339  
qpkt_cou¡
;

340 
	}
}

343 
	$ö√r_lo›
(
ö√r
)

345 
r
 = 0;

346 
ö√r
 > 0) {

347 
r
 +
	`bích
();

348 
ö√r
--;

350  
r
;

351 
	}
}

353 
	$mi¸o£c⁄ds
()

355 
timevÆ
 
t
;

356 
	`gëtimeofday
(&
t
, 
NULL
);

357  (
t
.
tv_£c
 * 1000 * 1000Ë+Å.
tv_u£c
;

358 
	}
}

360 
	$maö
(
¨gc
, *
¨gv
[])

362 
ôî©i⁄s
 = 5;

363 
ö√r_ôî©i⁄s
 = 20;

365 
	`¥ötf
("Richards benchmark starting...\n");

367 
ªsu…
 = 0;

368 
ôî©i⁄s
 > 0) {

369 
°¨t
 = 
	`mi¸o£c⁄ds
();

370 
ªsu…
 +
	`ö√r_lo›
(
ö√r_ôî©i⁄s
);

371 
ñ≠£d
 = 
	`mi¸o£c⁄ds
(Ë- 
°¨t
;

372 
	`¥ötf
("Ñu¡ime: %lu us\n", 
ñ≠£d
);

373 
ôî©i⁄s
--;

376 
	}
}

	@tests/rvsim.c

25 
	~<as£π.h
>

26 
	~<°d¨g.h
>

27 
	~<°döt.h
>

28 
	~<°dio.h
>

29 
	~<°dlib.h
>

31 
	#NELEM
(
X
Ë(XË/ (X[0])

	)

33 
	#MASK_LSB_W
(
X
, 
LSB
, 
W
Ë(X >> LSBË& ((1 << WË- 1)

	)

34 
	#MASK_MSB_LSB
(
X
, 
MSB
, 
LSB
Ë(X >> LSBË& ((1 << (MSB - LSB + 1)Ë- 1)

	)

36 íum { 
	mMAX_STEPS
 = 100 };

38 
	#EXT_M
 0

	)

39 
	#EXT_F
 0

	)

40 
	#EXT_D
 0

	)

41 
	#EXT_C
 1

	)

43 
	#OPCODE_LIST_RV32I
 \

44 
	`X
(0x0000007f, 0x00000037, 
FMT_U
, 
MNEM_LUI
, "lui") \

45 
	`X
(0x0000007f, 0x00000017, 
FMT_U
, 
MNEM_AUIPC
, "auipc") \

46 
	`X
(0x0000007f, 0x0000006f, 
FMT_J
, 
MNEM_JAL
, "jal") \

47 
	`X
(0x0000707f, 0x00000067, 
FMT_I
, 
MNEM_JALR
, "jalr") \

48 
	`X
(0x0000707f, 0x00000063, 
FMT_B
, 
MNEM_BEQ
, "beq") \

49 
	`X
(0x0000707f, 0x00001063, 
FMT_B
, 
MNEM_BNE
, "bne") \

50 
	`X
(0x0000707f, 0x00004063, 
FMT_B
, 
MNEM_BLT
, "blt") \

51 
	`X
(0x0000707f, 0x00005063, 
FMT_B
, 
MNEM_BGE
, "bge") \

52 
	`X
(0x0000707f, 0x00006063, 
FMT_B
, 
MNEM_BLTU
, "bltu") \

53 
	`X
(0x0000707f, 0x00007063, 
FMT_B
, 
MNEM_BGEU
, "bgeu") \

54 
	`X
(0x0000707f, 0x00000003, 
FMT_I
, 
MNEM_LB
, "lb") \

55 
	`X
(0x0000707f, 0x00001003, 
FMT_I
, 
MNEM_LH
, "lh") \

56 
	`X
(0x0000707f, 0x00002003, 
FMT_I
, 
MNEM_LW
, "lw") \

57 
	`X
(0x0000707f, 0x00004003, 
FMT_I
, 
MNEM_LBU
, "lbu") \

58 
	`X
(0x0000707f, 0x00005003, 
FMT_I
, 
MNEM_LHU
, "lhu") \

59 
	`X
(0x0000707f, 0x00000023, 
FMT_S
, 
MNEM_SB
, "sb") \

60 
	`X
(0x0000707f, 0x00001023, 
FMT_S
, 
MNEM_SH
, "sh") \

61 
	`X
(0x0000707f, 0x00002023, 
FMT_S
, 
MNEM_SW
, "sw") \

62 
	`X
(0x0000707f, 0x00000013, 
FMT_I
, 
MNEM_ADDI
, "addi") \

63 
	`X
(0x0000707f, 0x00002013, 
FMT_I
, 
MNEM_SLTI
, "slti") \

64 
	`X
(0x0000707f, 0x00003013, 
FMT_I
, 
MNEM_SLTIU
, "sltiu") \

65 
	`X
(0x0000707f, 0x00004013, 
FMT_I
, 
MNEM_XORI
, "xori") \

66 
	`X
(0x0000707f, 0x00006013, 
FMT_I
, 
MNEM_ORI
, "ori") \

67 
	`X
(0x0000707f, 0x00007013, 
FMT_I
, 
MNEM_ANDI
, "andi") \

68 
	`X
(0x„00707f, 0x00001013, 
FMT_I
, 
MNEM_SLLI
, "slli") \

69 
	`X
(0x„00707f, 0x00005013, 
FMT_I
, 
MNEM_SRLI
, "srli") \

70 
	`X
(0x„00707f, 0x40005013, 
FMT_I
, 
MNEM_SRAI
, "srai") \

71 
	`X
(0x„00707f, 0x00000033, 
FMT_R
, 
MNEM_ADD
, "add") \

72 
	`X
(0x„00707f, 0x40000033, 
FMT_R
, 
MNEM_SUB
, "sub") \

73 
	`X
(0x„00707f, 0x00001033, 
FMT_R
, 
MNEM_SLL
, "sll") \

74 
	`X
(0x„00707f, 0x00002033, 
FMT_R
, 
MNEM_SLT
, "slt") \

75 
	`X
(0x„00707f, 0x00003033, 
FMT_R
, 
MNEM_SLTU
, "sltu") \

76 
	`X
(0x„00707f, 0x00004033, 
FMT_R
, 
MNEM_XOR
, "xor") \

77 
	`X
(0x„00707f, 0x00005033, 
FMT_R
, 
MNEM_SRL
, "srl") \

78 
	`X
(0x„00707f, 0x40005033, 
FMT_R
, 
MNEM_SRA
, "sra") \

79 
	`X
(0x„00707f, 0x00006033, 
FMT_R
, 
MNEM_OR
, "or") \

80 
	`X
(0x„00707f, 0x00007033, 
FMT_R
, 
MNEM_AND
, "and") \

81 
	`X
(0xf00fffff, 0x0000000f, 
FMT_I
, 
MNEM_FENCE
, "fence") \

82 
	`X
(0xffffffff, 0x0000100f, 
FMT_I
, 
MNEM_FENCE_I
, "fence.i") \

83 
	`X
(0xffffffff, 0x00000073, 
FMT_I
, 
MNEM_ECALL
, "ecall") \

84 
	`X
(0xffffffff, 0x00100073, 
FMT_I
, 
MNEM_EBREAK
, "ebreak") \

85 
	`X
(0x0000707f, 0x00001073, 
FMT_I
, 
MNEM_CSRRW
, "csrrw") \

86 
	`X
(0x0000707f, 0x00002073, 
FMT_I
, 
MNEM_CSRRS
, "csrrs") \

87 
	`X
(0x0000707f, 0x00003073, 
FMT_I
, 
MNEM_CSRRC
, "csrrc") \

88 
	`X
(0x0000707f, 0x00005073, 
FMT_I
, 
MNEM_CSRRWI
, "csrrwi") \

89 
	`X
(0x0000707f, 0x00006073, 
FMT_I
, 
MNEM_CSRRSI
, "csrrsi") \

90 
	`X
(0x0000707f, 0x00007073, 
FMT_I
, 
MNEM_CSRRCI
, "c§rci")

	)

92 #i‡
EXT_M


93 
	#OPCODE_LIST_M
 \

94 
	`X
(0x„00707f, 0x02000033, 
FMT_R
, 
MNEM_MUL
, "mul") \

95 
	`X
(0x„00707f, 0x02001033, 
FMT_R
, 
MNEM_MULH
, "mulh") \

96 
	`X
(0x„00707f, 0x02002033, 
FMT_R
, 
MNEM_MULHSU
, "mulhsu") \

97 
	`X
(0x„00707f, 0x02003033, 
FMT_R
, 
MNEM_MULHU
, "mulhu") \

98 
	`X
(0x„00707f, 0x02004033, 
FMT_R
, 
MNEM_DIV
, "div") \

99 
	`X
(0x„00707f, 0x02005033, 
FMT_R
, 
MNEM_DIVU
, "divu") \

100 
	`X
(0x„00707f, 0x02006033, 
FMT_R
, 
MNEM_REM
, "rem") \

101 
	`X
(0x„00707f, 0x02007033, 
FMT_R
, 
MNEM_REMU
, "ªmu")

	)

103 
	#OPCODE_LIST_M


	)

106 #i‡
EXT_F


107 
	#OPCODE_LIST_F
 \

108 
	`X
(0x0000707f, 0x00002007, 
FMT_I
, 
MNEM_FLW
, "flw") \

109 
	`X
(0x0000707f, 0x00002027, 
FMT_S
, 
MNEM_FSW
, "fsw") \

110 
	`X
(0x0600007f, 0x00000043, 
FMT_R4
, 
MNEM_FMADD_S
, "fmadd.s") \

111 
	`X
(0x0600007f, 0x00000047, 
FMT_R4
, 
MNEM_FMSUB_S
, "fmsub.s") \

112 
	`X
(0x0600007f, 0x0000004b, 
FMT_R4
, 
MNEM_FNMSUB_S
, "fnmsub.s") \

113 
	`X
(0x0600007f, 0x0000004e, 
FMT_R4
, 
MNEM_FNMADD_S
, "fnmadd.s") \

114 
	`X
(0x„00007f, 0x00000053, 
FMT_R
, 
MNEM_FADD_S
, "fadd.s") \

115 
	`X
(0x„00007f, 0x08000053, 
FMT_R
, 
MNEM_FSUB_S
, "fsub.s") \

116 
	`X
(0x„00007f, 0x10000053, 
FMT_R
, 
MNEM_FMUL_S
, "fmul.s") \

117 
	`X
(0x„00007f, 0x18000053, 
FMT_R
, 
MNEM_FDIV_S
, "fdiv.s") \

118 
	`X
(0xfff0007f, 0x58000053, 
FMT_R
, 
MNEM_FSQRT_S
, "fsqrt.s") \

119 
	`X
(0x„00707f, 0x20000053, 
FMT_R
, 
MNEM_FSGNJ_S
, "fsgnj.s") \

120 
	`X
(0x„00707f, 0x20001053, 
FMT_R
, 
MNEM_FSGNJN_S
, "fsgnjn.s") \

121 
	`X
(0x„00707f, 0x20002053, 
FMT_R
, 
MNEM_FSGNJX_S
, "fsgnjx.s") \

122 
	`X
(0x„00707f, 0x28000053, 
FMT_R
, 
MNEM_FMIN_S
, "fmin.s") \

123 
	`X
(0x„00707f, 0x28001053, 
FMT_R
, 
MNEM_FMAX_S
, "fmax.s") \

124 
	`X
(0xfff0007f, 0xc0000053, 
FMT_R
, 
MNEM_FCVT_W_S
, "fcvt.w.s") \

125 
	`X
(0xfff0007f, 0xc0100053, 
FMT_R
, 
MNEM_FCVT_WU_S
, "fcvt.wu.s") \

126 
	`X
(0xfff0707f, 0xe0000053, 
FMT_R
, 
MNEM_FMV_X_W
, "fmv.x.w") \

127 
	`X
(0x„00707f, 0xa0002053, 
FMT_R
, 
MNEM_FEQ_S
, "feq.s") \

128 
	`X
(0x„00707f, 0xa0001053, 
FMT_R
, 
MNEM_FLT_S
, "flt.s") \

129 
	`X
(0x„00707f, 0xa0000053, 
FMT_R
, 
MNEM_FLE_S
, "fle.s") \

130 
	`X
(0xfff0707f, 0xe0001053, 
FMT_R
, 
MNEM_FCLASS_S
, "fclass.s") \

131 
	`X
(0xfff0007f, 0xd0000053, 
FMT_R
, 
MNEM_FCVT_S_W
, "fcvt.s.w") \

132 
	`X
(0xfff0007f, 0xd0100053, 
FMT_R
, 
MNEM_FCVT_S_WU
, "fcvt.s.wu") \

133 
	`X
(0xfff0707f, 0xe0000053, 
FMT_R
, 
MNEM_FMV_W_X
, "fmv.w.x")

	)

135 
	#OPCODE_LIST_F


	)

138 #i‡
EXT_D


139 
	#OPCODE_LIST_D
 \

140 
	`X
(0x0000707f, 0x00003007, 
FMT_I
, 
MNEM_FLD
, "fld") \

141 
	`X
(0x0000707f, 0x00003027, 
FMT_S
, 
MNEM_FSD
, "fsd") \

142 
	`X
(0x0600007f, 0x02000043, 
FMT_R4
, 
MNEM_FMADD_D
, "fmadd.d") \

143 
	`X
(0x0600007f, 0x02000047, 
FMT_R4
, 
MNEM_FMSUB_D
, "fmsub.d") \

144 
	`X
(0x0600007f, 0x0200004b, 
FMT_R4
, 
MNEM_FNMSUB_D
, "fnmsub.d") \

145 
	`X
(0x0600007f, 0x0200004f, 
FMT_R4
, 
MNEM_FNMADD_D
, "fnmadd.d") \

146 
	`X
(0x„00007f, 0x02000053, 
FMT_R
, 
MNEM_FADD_D
, "fadd.d") \

147 
	`X
(0x„00007f, 0x0a000053, 
FMT_R
, 
MNEM_FSUB_D
, "fsub.d") \

148 
	`X
(0x„00007f, 0x12000053, 
FMT_R
, 
MNEM_FMUL_D
, "fmul.d") \

149 
	`X
(0x„00007f, 0x1a000053, 
FMT_R
, 
MNEM_FDIV_D
, "fdiv.d") \

150 
	`X
(0xfff0007f, 0x5a000053, 
FMT_R
, 
MNEM_FSQRT_D
, "fsqrt.d") \

151 
	`X
(0x„00707f, 0x22000053, 
FMT_R
, 
MNEM_FSGNJ_D
, "fsgnj.d") \

152 
	`X
(0x„00707f, 0x22001053, 
FMT_R
, 
MNEM_FSGNJN_D
, "fsgnjn.d") \

153 
	`X
(0x„00707f, 0x22002053, 
FMT_R
, 
MNEM_FSGNJX_D
, "fsgnjx.d") \

154 
	`X
(0x„00707f, 0x2a000053, 
FMT_R
, 
MNEM_FMIN_D
, "fmin.d") \

155 
	`X
(0x„00707f, 0x2a001053, 
FMT_R
, 
MNEM_FMAX_D
, "fmax.d") \

156 
	`X
(0xfff0007f, 0x40100053, 
FMT_R
, 
MNEM_FCVT_S_D
, "fcvt.s.d") \

157 
	`X
(0xfff0007f, 0x42000053, 
FMT_R
, 
MNEM_FCVT_D_S
, "fcvt.d.s") \

158 
	`X
(0x„00707f, 0xa2002053, 
FMT_R
, 
MNEM_FEQ_D
, "feq.d") \

159 
	`X
(0x„00707f, 0xa2001053, 
FMT_R
, 
MNEM_FLT_D
, "flt.d") \

160 
	`X
(0x„00707f, 0xa2000053, 
FMT_R
, 
MNEM_FLE_D
, "fle.d") \

161 
	`X
(0xfff0707f, 0xe2001053, 
FMT_R
, 
MNEM_FCLASS_D
, "fclass.d") \

162 
	`X
(0xfff0007f, 0xc2000053, 
FMT_R
, 
MNEM_FCVT_W_D
, "fcvt.w.d") \

163 
	`X
(0xfff0007f, 0xc2100053, 
FMT_R
, 
MNEM_FCVT_WU_D
, "fcvt.wu.d") \

164 
	`X
(0xfff0007f, 0xd2000053, 
FMT_R
, 
MNEM_FCVT_D_W
, "fcvt.d.w") \

165 
	`X
(0xfff0007f, 0xd2100053, 
FMT_R
, 
MNEM_FCVT_D_WU
, "fcvt.d.wu")

	)

167 
	#OPCODE_LIST_D


	)

170 #i‡
EXT_A


171 
	#OPCODE_LIST_A
 \

172 
	`X
(0xf9f0707f, 0x1000202f, 
FMT_R
, 
MNEM_LR_W
, "lr.w") \

173 
	`X
(0xf800707f, 0x1800202f, 
FMT_R
, 
MNEM_SC_W
, "sc.w") \

174 
	`X
(0xf800707f, 0x0800202f, 
FMT_R
, 
MNEM_AMOSWAP_W
, "amoswap.w") \

175 
	`X
(0xf800707f, 0x0000202f, 
FMT_R
, 
MNEM_AMOADD_W
, "amoadd.w") \

176 
	`X
(0xf800707f, 0x2000202f, 
FMT_R
, 
MNEM_AMOXOR_W
, "amoxor.w") \

177 
	`X
(0xf800707f, 0x6000202f, 
FMT_R
, 
MNEM_AMOAND_W
, "amoand.w") \

178 
	`X
(0xf800707f, 0x4000202f, 
FMT_R
, 
MNEM_AMOOR_W
, "amoor.w") \

179 
	`X
(0xf800707f, 0x8000202f, 
FMT_R
, 
MNEM_AMOMIN_W
, "amomin.w") \

180 
	`X
(0xf800707f, 0xa000202f, 
FMT_R
, 
MNEM_AMOMAX_W
, "amomax.w") \

181 
	`X
(0xf800707f, 0xc000202f, 
FMT_R
, 
MNEM_AMOMINU_W
, "amominu.w") \

182 
	`X
(0xf800707f, 0xe000202f, 
FMT_R
, 
MNEM_AMOMAXU_W
, "amomaxu.w")

	)

184 
	#OPCODE_LIST_A


	)

187 #i‡
EXT_C


188 
	#OPCODE_LIST_C
 \

189 
	`X
(0xef83, 0x0001, 
FMT_CI
, 
MNEM_C_NOP
, "c.nop") \

190 
	`X
(0xe003, 0x0001, 
FMT_CI
, 
MNEM_C_ADDI
, "c.addi") \

191 
	`X
(0xe003, 0x2001, 
FMT_CJ
, 
MNEM_C_JAL
, "c.jal") \

192 
	`X
(0xe003, 0x4001, 
FMT_CI
, 
MNEM_C_LI
, "c.li") \

193 
	`X
(0xef83, 0x6101, 
FMT_CI
, 
MNEM_C_ADDI16SP
, "c.addi16sp") \

194 
	`X
(0xe003, 0x6001, 
FMT_CI
, 
MNEM_C_LUI
, "c.lui") \

195 
	`X
(0xec03, 0x8001, 
FMT_CI
, 
MNEM_C_SRLI
, "c.srli") \

196 
	`X
(0xec03, 0x8401, 
FMT_CI
, 
MNEM_C_SRAI
, "c.srai") \

197 
	`X
(0xec03, 0x8801, 
FMT_CI
, 
MNEM_C_ANDI
, "c.andi") \

198 
	`X
(0xfc63, 0x8c01, 
FMT_CR
, 
MNEM_C_SUB
, "c.sub") \

199 
	`X
(0xfc63, 0x8c21, 
FMT_CR
, 
MNEM_C_XOR
, "c.xor") \

200 
	`X
(0xfc63, 0x8c41, 
FMT_CR
, 
MNEM_C_OR
, "c.or") \

201 
	`X
(0xfc63, 0x8c61, 
FMT_CR
, 
MNEM_C_AND
, "c.and") \

202 
	`X
(0xe003, 0xa001, 
FMT_CJ
, 
MNEM_C_J
, "c.j") \

203 
	`X
(0xe003, 0xc001, 
FMT_CB
, 
MNEM_C_BEQZ
, "c.beqz") \

204 
	`X
(0xe003, 0xe001, 
FMT_CB
, 
MNEM_C_BNEZ
, "c.bnez") \

205 
	`X
(0xffff, 0x0000, 
FMT_CIW
, 
MNEM_C_ILLEGAL
, "Illegal instruction") \

206 
	`X
(0xe003, 0x0000, 
FMT_CIW
, 
MNEM_C_ADDI4SPN
, "c.addi4spn") \

207 
	`X
(0xe003, 0x2000, 
FMT_CL
, 
MNEM_C_FLD
, "c.fld") \

208 
	`X
(0xe003, 0x4000, 
FMT_CL
, 
MNEM_C_LW
, "c.lw") \

209 
	`X
(0xe003, 0x6000, 
FMT_CL
, 
MNEM_C_FLW
, "c.flw") \

210 
	`X
(0xe003, 0xa000, 
FMT_CL
, 
MNEM_C_FSD
, "c.fsd") \

211 
	`X
(0xe003, 0xc000, 
FMT_CL
, 
MNEM_C_SW
, "c.sw") \

212 
	`X
(0xe003, 0xe000, 
FMT_CL
, 
MNEM_C_FSW
, "c.fsw") \

213 
	`X
(0xe003, 0x0002, 
FMT_CI
, 
MNEM_C_SLLI
, "c.slli") \

214 
	`X
(0xf07f, 0x0002, 
FMT_CI
, 
MNEM_C_SLLI64
, "c.slli64") \

215 
	`X
(0xe003, 0x2002, 
FMT_CSS
, 
MNEM_C_FLDSP
, "c.fldsp") \

216 
	`X
(0xe003, 0x3002, 
FMT_CSS
, 
MNEM_C_LWSP
, "c.lwsp") \

217 
	`X
(0xe003, 0x6002, 
FMT_CSS
, 
MNEM_C_FLWSP
, "c.flwsp") \

218 
	`X
(0xf07f, 0x8002, 
FMT_CJ
, 
MNEM_C_JR
, "c.jr") \

219 
	`X
(0xf003, 0x8002, 
FMT_CR
, 
MNEM_C_MV
, "c.mv") \

220 
	`X
(0xffff, 0x9002, 
FMT_CI
, 
MNEM_C_EBREAK
, "c.ebreak") \

221 
	`X
(0xf07f, 0x9002, 
FMT_CJ
, 
MNEM_C_JALR
, "c.jalr") \

222 
	`X
(0xf003, 0x9002, 
FMT_CR
, 
MNEM_C_ADD
, "c.add") \

223 
	`X
(0xe003, 0xa002, 
FMT_CSS
, 
MNEM_C_FSDSP
, "c.fsdsp") \

224 
	`X
(0xe003, 0xc002, 
FMT_CSS
, 
MNEM_C_SWSP
, "c.swsp") \

225 
	`X
(0xe003, 0xe002, 
FMT_CSS
, 
MNEM_C_FSWSP
, "c.fsw•")

	)

227 
	#OPCODE_LIST_C


	)

233 #i‡
EXT_PRIV


234 
	#OPCODE_LIST_PRIV
 \

235 
	`X
(0xffffffff, 0x10200073, 
FMT_R
, 
MNEM_SRET
, "sret") \

236 
	`X
(0xffffffff, 0x30200073, 
FMT_R
, 
MNEM_MRET
, "mret") \

237 
	`X
(0xffffffff, 0x10500073, 
FMT_R
, 
MNEM_WFI
, "wfi") \

238 
	`X
(0x„007fff, 0x12000073, 
FMT_R
, 
MNEM_SFENCE_VMA
, "s„n˚.vma")

	)

240 
	#OPCODE_LIST_PRIV


	)

243 
	#OPCODE_LIST
 \

244 
OPCODE_LIST_RV32I
 \

245 
OPCODE_LIST_M
 \

246 
OPCODE_LIST_F
 \

247 
OPCODE_LIST_D
 \

248 
OPCODE_LIST_A
 \

249 
OPCODE_LIST_C
 \

250 
OPCODE_LIST_PRIV


	)

252 
	#REG_LIST
 \

253 
	`X
(
R_X0
, "x0") \

254 
	`X
(
R_RA
, "ra") \

255 
	`X
(
R_SP
, "sp") \

256 
	`X
(
R_GP
, "gp") \

257 
	`X
(
R_TP
, "tp") \

258 
	`X
(
R_T0
, "t0") \

259 
	`X
(
R_T1
, "t1") \

260 
	`X
(
R_T2
, "t2") \

261 
	`X
(
R_S0
, "s0") \

262 
	`X
(
R_FP
 = 8, "fp") \

263 
	`X
(
R_S1
, "s1") \

264 
	`X
(
R_A0
, "a0") \

265 
	`X
(
R_A1
, "a1") \

266 
	`X
(
R_A2
, "a2") \

267 
	`X
(
R_A3
, "a3") \

268 
	`X
(
R_A4
, "a4") \

269 
	`X
(
R_A5
, "a5") \

270 
	`X
(
R_A6
, "a6") \

271 
	`X
(
R_A7
, "a7") \

272 
	`X
(
R_S2
, "s2") \

273 
	`X
(
R_S3
, "s3") \

274 
	`X
(
R_S4
, "s4") \

275 
	`X
(
R_S5
, "s5") \

276 
	`X
(
R_S6
, "s6") \

277 
	`X
(
R_S7
, "s7") \

278 
	`X
(
R_S8
, "s8") \

279 
	`X
(
R_S9
, "s9") \

280 
	`X
(
R_S10
, "s10") \

281 
	`X
(
R_S11
, "s11") \

282 
	`X
(
R_T3
, "t3") \

283 
	`X
(
R_T4
, "t4") \

284 
	`X
(
R_T5
, "t5") \

285 
	`X
(
R_T6
, "t6")

	)

288 
	#X
(
ENUM
, 
STR
ËENUM,

	)

289 
	mREG_LIST


290 #unde‡
X


293 c⁄° *
	gªg_«mes
[] = {

294 
	#X
(
ENUM
, 
STR
ËSTR,

	)

295 
REG_LIST


296 #unde‡
X


300 
	#X
(
MASK
, 
VALUE
, 
FMT
, 
MNEM
, 
STR
ËMNEM,

	)

301 
	mOPCODE_LIST


302 #unde‡
X


303 
	mMNEM_INVALID


304 } 
	tm√m⁄ic_t
;

306 c⁄° *
	g›_m√m⁄ics
[] = {

307 
	#X
(
MASK
, 
VALUE
, 
FMT
, 
MNEM
, 
STR
ËSTR,

	)

308 
OPCODE_LIST


309 #unde‡
X


313 
	mFMT_R
,

314 
	mFMT_R4
,

315 
	mFMT_I
,

316 
	mFMT_S
,

317 
	mFMT_B
,

318 
	mFMT_U
,

319 
	mFMT_J
,

320 
	mFMT_CB
,

321 
	mFMT_CI
,

322 
	mFMT_CIW
,

323 
	mFMT_CJ
,

324 
	mFMT_CL
,

325 
	mFMT_CR
,

326 
	mFMT_CSS


327 } 
	tfmt_t
;

330 
fmt_t
 
	mf‹m©
;

331 
m√m⁄ic_t
 
	mm√m⁄ic
;

332 } 
	tö°r_hódî_t
;

335 
ö°r_hódî_t
 
	mhódî
;

336 
	mrd
;

337 
	mfunc3
;

338 
	mrs1
;

339 
	mrs2
;

340 
	mfunc7
;

341 } 
	tr_ö°r_t
;

344 
ö°r_hódî_t
 
	mhódî
;

345 
	mrd
;

346 
	mfunc3
;

347 
	mrs1
;

348 
	mimm_11_0
;

349 } 
	ti_ö°r_t
;

352 
ö°r_hódî_t
 
	mhódî
;

353 
	mimm_4_0
;

354 
	mfunc3
;

355 
	mrs1
;

356 
	mrs2
;

357 
	mimm_11_5
;

358 } 
	ts_ö°r_t
;

361 
ö°r_hódî_t
 
	mhódî
;

362 
	mimm_11_a7
;

363 
	mimm_4_1
;

364 
	mfunc3
;

365 
	mrs1
;

366 
	mrs2
;

367 
	mimm_12
;

368 
	mimm_10_5
;

369 } 
	tb_ö°r_t
;

372 
ö°r_hódî_t
 
	mhódî
;

373 
	mrd
;

374 
	mimm_31_12
;

375 } 
	tu_ö°r_t
;

378 
ö°r_hódî_t
 
	mhódî
;

379 
	mrd
;

380 
	mimm_19_12
;

381 
	mimm_11_a20
;

382 
	mimm_10_1
;

383 
	mimm_20
;

384 } 
	tj_ö°r_t
;

387 
r_ö°r_t
 
	mri
;

388 
i_ö°r_t
 
	mii
;

389 
s_ö°r_t
 
	msi
;

390 
b_ö°r_t
 
	mbi
;

391 
u_ö°r_t
 
	mui
;

392 
j_ö°r_t
 
	mji
;

393 } 
	tö°r_t
;

396 
uöt32_t
 
	mªgs
[32];

397 
uöt32_t
 
	mpc
;

398 } 
	g°©e
;

403 
uöt32_t
 
	gmem‹y
[256];

405 
uöt32_t
 
	$M_r
(
uöt32_t
 
addr
, 
size
)

407 
addr
 %= 1024;

409 i‡(
addr
 % 
size
 != 0) {

410 
	`Ârötf
(
°dîr
,

412 
addr
, 
size
);

413 
	`exô
(
EXIT_FAILURE
);

416 
uöt32_t
 
w‹d
 = 
mem‹y
[
addr
 / 4];

417 
uöt32_t
 
d©a
;

418 i‡(
size
 == 1)

419 
d©a
 = (
w‹d
 >> (
addr
 % 4) * 8) & 0xff;

420 i‡(
size
 == 2)

421 
d©a
 = (
w‹d
 >> (
addr
 % 4) * 8) & 0xffff;

422 i‡(
size
 == 4)

423 
d©a
 = 
w‹d
;

424  
d©a
;

425 
	}
}

427 
	$M_w
(
uöt32_t
 
addr
, uöt32_à
d©a
, 
size
)

429 i‡(
addr
 % 
size
 != 0) {

430 
	`Ârötf
(
°dîr
,

431 "îr‹: u«lig√d wrôêac˚ss,ádd∏%08x, sizê%d\n", 
addr
,

432 
size
);

433 
	`exô
(
EXIT_FAILURE
);

436 
addr
 %= 1024;

437 
uöt32_t
 
w‹d
 = 
mem‹y
[
addr
 / 4];

438 i‡(
size
 == 1) {

439 
w‹d
 &~(0xf‡<< (
addr
 % 4) * 8);

440 
w‹d
 |(
d©a
 & 0xffË<< 8 * (
addr
 % 4);

441 } i‡(
size
 == 2) {

442 
w‹d
 &~(0xfff‡<< (
addr
 % 4) * 8);

443 
w‹d
 |(
d©a
 & 0xffffË<< 8 * (
addr
 % 4);

444 } i‡(
size
 == 4) {

445 
w‹d
 = 
d©a
;

447 
mem‹y
[
addr
 / 4] = 
w‹d
;

448 
	}
}

451 
uöt32_t
 
	$£xt
(
uöt32_t
 
x
, 
w
)

453 i‡(
w
 == 32)

454  
x
;

455 
msb
 = (
x
 >> (
w
 - 1)) & 0x1;

456 
uöt32_t
 
Æl1
 = ~0;

457  
msb
 ? 
x
 | ((
Æl1
 >> 
w
) << w) : x & ((1 << w) - 1);

458 
	}
}

460 
uöt32_t
 
	$gë_imm
(
ö°r_t
 *
i_p
)

462 
uöt32_t
 
imm
;

463 
ö°r_hódî_t
 *
hódî_p
 = (ö°r_hódî_à*Ë
i_p
;

464 
hódî_p
->
f‹m©
) {

465 
FMT_I
:

466 
imm
 = 
	`£xt
(
i_p
->
ii
.
imm_11_0
, 12);

468 
FMT_S
:

469 
imm
 = 
	`£xt
((
i_p
->
si
.
imm_11_5
 << 5Ë+ i_p->si.
imm_4_0
, 12);

471 
FMT_B
:

472 
imm
 = 
	`£xt
((
i_p
->
bi
.
imm_12
 << 12Ë+ (i_p->bi.
imm_11_a7
 << 11) +

473 (
i_p
->
bi
.
imm_10_5
 << 5Ë+ (i_p->bi.
imm_4_1
 << 1),

476 
FMT_U
:

477 
imm
 = (
i_p
->
ui
.
imm_31_12
 << 12);

479 
FMT_J
:

480 
imm
 = 
	`£xt
((
i_p
->
ji
.
imm_20
 << 20Ë+ (i_p->ji.
imm_19_12
 << 12) +

481 (
i_p
->
ji
.
imm_11_a20
 << 11Ë+ (i_p->ji.
imm_10_1
 << 1),

485 
imm
 = 0;

486 
	`as£π
(0);

489  
imm
;

490 
	}
}

493 
	$¢¥öt_ö°r
(*
°r
, 
size_t
 
size
, 
ö°r_t
 *
i_p
)

495 
ö°r_hódî_t
 *
hódî_p
 = (ö°r_hódî_à*Ë
i_p
;

496 c⁄° *
m√m⁄ic
 = 
›_m√m⁄ics
[
hódî_p
->mnemonic];

498 c⁄° *
rd
;

499 c⁄° *
rs1
;

500 c⁄° *
rs2
;

501 
imm
;

502 
n
;

504 
hódî_p
->
f‹m©
) {

505 
FMT_R
:

506 
rd
 = 
ªg_«mes
[
i_p
->
ri
.rd];

507 
rs1
 = 
ªg_«mes
[
i_p
->
ri
.rs1];

508 
rs2
 = 
ªg_«mes
[
i_p
->
ri
.rs2];

509 
n
 = 
	`¢¥ötf
(
°r
, 
size
, "%†%s,%s,%s", 
m√m⁄ic
, 
rd
, 
rs1
, 
rs2
);

511 
FMT_I
:

512 
rd
 = 
ªg_«mes
[
i_p
->
ii
.rd];

513 
rs1
 = 
ªg_«mes
[
i_p
->
ii
.rs1];

514 
imm
 = 
	`gë_imm
(
i_p
);

515 i‡(
m√m⁄ic
[0] == 'l') {

516 
n
 = 
	`¢¥ötf
(
°r
, 
size
, "%†%s,%d(%s)", 
m√m⁄ic
, 
rd
, 
imm
, 
rs1
);

517 } i‡(
m√m⁄ic
[0] == 'e') {

518 
n
 = 
	`¢¥ötf
(
°r
, 
size
, "%s", 
m√m⁄ic
);

520 
n
 = 
	`¢¥ötf
(
°r
, 
size
, "%†%s,%s,%d", 
m√m⁄ic
, 
rd
, 
rs1
, 
imm
);

523 
FMT_S
:

524 
rs1
 = 
ªg_«mes
[
i_p
->
si
.rs1];

525 
rs2
 = 
ªg_«mes
[
i_p
->
si
.rs2];

526 
imm
 = 
	`gë_imm
(
i_p
);

527 
n
 = 
	`¢¥ötf
(
°r
, 
size
, "%†%s,%d(%s)", 
m√m⁄ic
, 
rs2
, 
imm
, 
rs1
);

529 
FMT_B
:

530 
rs1
 = 
ªg_«mes
[
i_p
->
bi
.rs1];

531 
rs2
 = 
ªg_«mes
[
i_p
->
bi
.rs2];

532 
imm
 = 
	`gë_imm
(
i_p
);

533 
n
 = 
	`¢¥ötf
(
°r
, 
size
, "%†%s,%s,%d", 
m√m⁄ic
, 
rs1
, 
rs2
, 
imm
);

535 
FMT_U
:

536 
rd
 = 
ªg_«mes
[
i_p
->
ui
.rd];

537 
imm
 = 
	`gë_imm
(
i_p
);

538 
n
 = 
	`¢¥ötf
(
°r
, 
size
, "%†%s,%d", 
m√m⁄ic
, 
rd
, 
imm
);

540 
FMT_J
:

541 
rd
 = 
ªg_«mes
[
i_p
->
ji
.rd];

542 
imm
 = 
	`gë_imm
(
i_p
);

543 
n
 = 
	`¢¥ötf
(
°r
, 
size
, "%†%s,%d", 
m√m⁄ic
, 
rd
, 
imm
);

546 
FMT_R4
:

547 
	`as£π
(0);

549 
FMT_CB
:

550 
	`as£π
(0);

552 
FMT_CI
:

553 
	`as£π
(0);

555 
FMT_CIW
:

556 
	`as£π
(0);

558 
FMT_CJ
:

559 
	`as£π
(0);

561 
FMT_CL
:

562 
	`as£π
(0);

564 
FMT_CR
:

565 
	`as£π
(0);

567 
FMT_CSS
:

568 
	`as£π
(0);

571 
	`as£π
(0);

574  
n
;

575 
	}
}

578 
ö°r_t
 
	$decode
(
uöt32_t
 
›
)

580 
ö°r_t
 
ouçut
;

582 
ö°r_hódî_t
 *
hódî_p
 = (ö°r_hódî_à*Ë&
ouçut
;

584 
rd
 = 
	`MASK_MSB_LSB
(
›
, 11, 7);

585 
rs1
 = 
	`MASK_MSB_LSB
(
›
, 19, 15);

586 
rs2
 = 
	`MASK_MSB_LSB
(
›
, 24, 20);

587 
func3
 = 
	`MASK_MSB_LSB
(
›
, 14, 12);

588 
func7
 = 
	`MASK_MSB_LSB
(
›
, 31, 25);

589 
imm_11_0
 = 
	`MASK_MSB_LSB
(
›
, 31, 20);

590 
imm_4_0
 = 
	`MASK_MSB_LSB
(
›
, 11, 7);

591 
imm_11_5
 = 
	`MASK_MSB_LSB
(
›
, 31, 25);

592 
imm_11_a7
 = 
	`MASK_MSB_LSB
(
›
, 7, 7);

593 
imm_4_1
 = 
	`MASK_MSB_LSB
(
›
, 11, 8);

594 
imm_10_5
 = 
	`MASK_MSB_LSB
(
›
, 30, 25);

595 
imm_12
 = 
	`MASK_MSB_LSB
(
›
, 31, 31);

596 
imm_31_12
 = 
	`MASK_MSB_LSB
(
›
, 31, 12);

597 
imm_19_12
 = 
	`MASK_MSB_LSB
(
›
, 19, 12);

598 
imm_11_a20
 = 
	`MASK_MSB_LSB
(
›
, 20, 20);

599 
imm_10_1
 = 
	`MASK_MSB_LSB
(
›
, 30, 21);

600 
imm_20
 = 
	`MASK_MSB_LSB
(
›
, 31, 31);

602 
m√m⁄ic_t
 
m
 = 
MNEM_INVALID
;

607 
	#X
(
MASK
, 
VALUE
, 
FMT
, 
MNEM
, 
STR
Ëi‡((
›
 & MASKË=VALUEË
m
 = MNEM;

	)

608 
OPCODE_LIST


609 #unde‡
X


611 
fmt_t
 
fmt
;

613 
m
) {

614 
	#X
(
MASK
, 
VALUE
, 
FMT
, 
MNEM
, 
STR
) \

615 
MNEM
: \

616 
fmt
 = 
FMT
; \

617 ;

	)

618 
OPCODE_LIST


619 #unde‡
X


621 
	`as£π
(0);

625 
hódî_p
->
m√m⁄ic
 = 
m
;

626 
hódî_p
->
f‹m©
 = 
fmt
;

628 
fmt
) {

629 
FMT_R
:

630 
ouçut
.
ri
.
rd
 =Ñd;

631 
ouçut
.
ri
.
func3
 = func3;

632 
ouçut
.
ri
.
rs1
 =Ñs1;

633 
ouçut
.
ri
.
rs2
 =Ñs2;

634 
ouçut
.
ri
.
func7
 = func7;

636 
FMT_I
:

637 
ouçut
.
ii
.
rd
 =Ñd;

638 
ouçut
.
ii
.
func3
 = func3;

639 
ouçut
.
ii
.
rs1
 =Ñs1;

640 
ouçut
.
ii
.
imm_11_0
 = imm_11_0;

643 
FMT_S
:

644 
ouçut
.
si
.
imm_4_0
 = imm_4_0;

645 
ouçut
.
si
.
func3
 = func3;

646 
ouçut
.
si
.
rs1
 =Ñs1;

647 
ouçut
.
si
.
rs2
 =Ñs2;

648 
ouçut
.
si
.
imm_11_5
 = imm_11_5;

651 
FMT_B
:

652 
ouçut
.
bi
.
imm_11_a7
 = imm_11_a7;

653 
ouçut
.
bi
.
imm_4_1
 = imm_4_1;

654 
ouçut
.
bi
.
func3
 = func3;

655 
ouçut
.
bi
.
rs1
 =Ñs1;

656 
ouçut
.
bi
.
rs2
 =Ñs2;

657 
ouçut
.
bi
.
imm_12
 = imm_12;

658 
ouçut
.
bi
.
imm_10_5
 = imm_10_5;

661 
FMT_U
:

662 
ouçut
.
ui
.
rd
 =Ñd;

663 
ouçut
.
ui
.
imm_31_12
 = imm_31_12;

666 
FMT_J
:

667 
ouçut
.
ji
.
rd
 =Ñd;

668 
ouçut
.
ji
.
imm_19_12
 = imm_19_12;

669 
ouçut
.
ji
.
imm_11_a20
 = imm_11_a20;

670 
ouçut
.
ji
.
imm_10_1
 = imm_10_1;

671 
ouçut
.
ji
.
imm_20
 = imm_20;

675 
FMT_R4
:

676 
	`as£π
(0);

678 
FMT_CB
:

679 
	`as£π
(0);

681 
FMT_CI
:

682 
	`as£π
(0);

684 
FMT_CIW
:

685 
	`as£π
(0);

687 
FMT_CJ
:

688 
	`as£π
(0);

690 
FMT_CL
:

691 
	`as£π
(0);

693 
FMT_CR
:

694 
	`as£π
(0);

696 
FMT_CSS
:

697 
	`as£π
(0);

701 
	`as£π
(0);

705  
ouçut
;

706 
	}
}

708 
	$ª£t
()

710 
size_t
 
i
;

711 
i
 = 0; i < 32; i++) {

712 
°©e
.
ªgs
[
i
] = 0;

714 
°©e
.
pc
 = 0;

717 
°©e
.
ªgs
[
R_A1
] = 5;

718 
°©e
.
ªgs
[
R_A0
] = 0x54;

719 
°©e
.
ªgs
[
R_RA
] = 0x4c;

720 
	}
}

723 
	$°ï
()

725 
uöt32_t
 
›
 = 
	`M_r
(
°©e
.
pc
, 4);

727 
com¥es£d
 = ((
›
 & 3) != 3);

728 i‡(
com¥es£d
)

729 
›
 &= 0xffff;

730 
ö°r_t
 
ö°r
 = 
	`decode
(
›
);

731 
ö°r_hódî_t
 *
hódî_p
 = (ö°r_hódî_à*Ë&
ö°r
;

733 
öt32_t
 *
x
 = (öt32_à*Ë
°©e
.
ªgs
;

734 
uöt32_t
 *
x_u
 = 
°©e
.
ªgs
;

735 
uöt32_t
 
pc
 = 
°©e
.pc;

736 
uöt32_t
 
√xt_pc
 = 
pc
 + (
com¥es£d
 ? 2 : 4);

738 
rd
;

739 
rs1
;

740 
rs2
;

741 
öt32_t
 
imm
;

742 
uöt32_t
 
imm_u
;

743 
öt32_t
 
t
;

745 
shamt
;

746 
¥ed
;

747 
succ
;

748 
c§
;

749 
zimm
;

751 
hódî_p
->
f‹m©
) {

752 
FMT_R
:

753 
rd
 = 
ö°r
.
ri
.rd;

754 
rs1
 = 
ö°r
.
ri
.rs1;

755 
rs2
 = 
ö°r
.
ri
.rs2;

757 
FMT_I
:

758 
rd
 = 
ö°r
.
ii
.rd;

759 
rs1
 = 
ö°r
.
ii
.rs1;

760 
imm
 = 
	`gë_imm
(&
ö°r
);

761 
shamt
 = 
	`MASK_MSB_LSB
(
ö°r
.
ii
.
imm_11_0
, 4, 0);

762 
¥ed
 = 
	`MASK_MSB_LSB
(
ö°r
.
ii
.
imm_11_0
, 7, 4);

763 
succ
 = 
	`MASK_MSB_LSB
(
ö°r
.
ii
.
imm_11_0
, 3, 0);

764 
c§
 = 
ö°r
.
ii
.
imm_11_0
;

765 
zimm
 = 
ö°r
.
ii
.
rs1
;

767 
FMT_S
:

768 
rs1
 = 
ö°r
.
si
.rs1;

769 
rs2
 = 
ö°r
.
si
.rs2;

770 
imm
 = 
	`gë_imm
(&
ö°r
);

771 
imm_u
 = (
uöt32_t
Ë
imm
;

773 
FMT_B
:

774 
rs1
 = 
ö°r
.
bi
.rs1;

775 
rs2
 = 
ö°r
.
bi
.rs2;

776 
imm
 = 
	`gë_imm
(&
ö°r
);

777 
imm_u
 = (
uöt32_t
Ë
imm
;

779 
FMT_U
:

780 
rd
 = 
ö°r
.
ii
.rd;

781 
imm
 = 
	`gë_imm
(&
ö°r
);

782 
imm_u
 = (
uöt32_t
Ë
imm
;

784 
FMT_J
:

785 
rd
 = 
ö°r
.
ii
.rd;

786 
imm
 = 
	`gë_imm
(&
ö°r
);

787 
imm_u
 = (
uöt32_t
Ë
imm
;

790 
FMT_R4
:

791 
	`as£π
(0);

793 
FMT_CB
:

794 
	`as£π
(0);

796 
FMT_CI
:

797 
	`as£π
(0);

799 
FMT_CIW
:

800 
	`as£π
(0);

802 
FMT_CJ
:

803 
	`as£π
(0);

805 
FMT_CL
:

806 
	`as£π
(0);

808 
FMT_CR
:

809 
	`as£π
(0);

811 
FMT_CSS
:

812 
	`as£π
(0);

815 
	`as£π
(0);

819 
xd_£t
 = 0;

820 
wrôe
 = 0;

821 
lﬂd
 = 0;

822 
br_èkí
 = 0;

824 
hódî_p
->
m√m⁄ic
) {

825 
MNEM_LUI
:

826 
x
[
rd
] = 
imm
;

827 
xd_£t
 = 1;

829 
MNEM_AUIPC
:

830 
x
[
rd
] = 
pc
 + 
imm
;

831 
xd_£t
 = 1;

833 
MNEM_JAL
:

834 
x
[
rd
] = 
pc
 + 4;

835 
√xt_pc
 = 
pc
 + 
imm
;

836 
br_èkí
 = 1;

837 
xd_£t
 = 1;

839 
MNEM_JALR
:

840 
t
 = 
pc
 + 4;

841 
√xt_pc
 = (
x
[
rs1
] + 
imm
) & ~1;

842 
br_èkí
 = 1;

843 
x
[
rd
] = 
t
;

844 
xd_£t
 = 1;

846 
MNEM_BEQ
:

847 i‡(
x
[
rs1
] =x[
rs2
]) {

848 
√xt_pc
 = 
pc
 + 
imm
;

849 
br_èkí
 = 1;

852 
MNEM_BNE
:

853 i‡(
x
[
rs1
] !x[
rs2
]) {

854 
√xt_pc
 = 
pc
 + 
imm
;

855 
br_èkí
 = 1;

858 
MNEM_BLT
:

859 i‡(
x
[
rs1
] < x[
rs2
]) {

860 
√xt_pc
 = 
pc
 + 
imm
;

861 
br_èkí
 = 1;

864 
MNEM_BGE
:

865 i‡(
x
[
rs1
] >x[
rs2
]) {

866 
√xt_pc
 = 
pc
 + 
imm
;

867 
br_èkí
 = 1;

870 
MNEM_BLTU
:

871 i‡(
x_u
[
rs1
] < x_u[
rs2
]) {

872 
√xt_pc
 = 
pc
 + 
imm
;

873 
br_èkí
 = 1;

876 
MNEM_BGEU
:

877 i‡(
x_u
[
rs1
] >x_u[
rs2
]) {

878 
√xt_pc
 = 
pc
 + 
imm
;

879 
br_èkí
 = 1;

882 
MNEM_LB
:

883 
x
[
rd
] = 
	`£xt
(
	`M_r
(x[
rs1
] + 
imm
, 1), 8);

884 
xd_£t
 = 1;

885 
lﬂd
 = 1;

887 
MNEM_LH
:

888 
x
[
rd
] = 
	`£xt
(
	`M_r
(x[
rs1
] + 
imm
, 2), 16);

889 
xd_£t
 = 1;

890 
lﬂd
 = 1;

892 
MNEM_LW
:

893 
x
[
rd
] = 
	`£xt
(
	`M_r
(x[
rs1
] + 
imm
, 4), 32);

894 
xd_£t
 = 1;

895 
lﬂd
 = 1;

897 
MNEM_LBU
:

898 
x
[
rd
] = 
	`M_r
(x[
rs1
] + 
imm
, 1);

899 
xd_£t
 = 1;

901 
MNEM_LHU
:

902 
x
[
rd
] = 
	`M_r
(x[
rs1
] + 
imm
, 2);

903 
xd_£t
 = 1;

905 
MNEM_SB
:

906 
	`M_w
(
x
[
rs1
] + 
imm
, x[
rs2
], 1);

907 
wrôe
 = 1;

909 
MNEM_SH
:

910 
	`M_w
(
x
[
rs1
] + 
imm
, x[
rs2
], 2);

911 
wrôe
 = 1;

913 
MNEM_SW
:

914 
	`M_w
(
x
[
rs1
] + 
imm
, x[
rs2
], 4);

915 
wrôe
 = 1;

917 
MNEM_ADDI
:

918 
x
[
rd
] = x[
rs1
] + 
imm
;

919 
xd_£t
 = 1;

921 
MNEM_SLTI
:

922 
x
[
rd
] = x[
rs1
] < 
imm
;

923 
xd_£t
 = 1;

925 
MNEM_SLTIU
:

926 
x
[
rd
] = 
x_u
[
rs1
] < 
imm_u
;

927 
xd_£t
 = 1;

929 
MNEM_XORI
:

930 
x
[
rd
] = x[
rs1
] ^ 
imm
;

931 
xd_£t
 = 1;

933 
MNEM_ORI
:

934 
x
[
rd
] = x[
rs1
] | 
imm
;

935 
xd_£t
 = 1;

937 
MNEM_ANDI
:

938 
x
[
rd
] = x[
rs1
] & 
imm
;

939 
xd_£t
 = 1;

941 
MNEM_SLLI
:

942 
x
[
rd
] = x[
rs1
] << 
shamt
;

943 
xd_£t
 = 1;

945 
MNEM_SRLI
:

948 
x
[
rd
] = 
x_u
[
rs1
] >> 
shamt
;

949 
xd_£t
 = 1;

951 
MNEM_SRAI
:

952 
x
[
rd
] = x[
rs1
] >> 
shamt
;

953 
xd_£t
 = 1;

955 
MNEM_ADD
:

956 
x
[
rd
] = x[
rs1
] + x[
rs2
];

957 
xd_£t
 = 1;

959 
MNEM_SUB
:

960 
x
[
rd
] = x[
rs1
] - x[
rs2
];

961 
xd_£t
 = 1;

963 
MNEM_SLL
:

964 
x
[
rd
] = x[
rs1
] << x[
rs2
];

965 
xd_£t
 = 1;

967 
MNEM_SLT
:

968 
x
[
rd
] = x[
rs1
] < x[
rs2
];

969 
xd_£t
 = 1;

971 
MNEM_SLTU
:

972 
x
[
rd
] = 
x_u
[
rs1
] < x_u[
rs2
];

973 
xd_£t
 = 1;

975 
MNEM_XOR
:

976 
x
[
rd
] = x[
rs1
] ^ x[rs1];

977 
xd_£t
 = 1;

979 
MNEM_SRL
:

980 
x
[
rd
] = 
x_u
[
rs1
] >> x_u[
rs2
];

981 
xd_£t
 = 1;

983 
MNEM_SRA
:

984 
x
[
rd
] = x[
rs1
] >> x[
rs2
];

985 
xd_£t
 = 1;

987 
MNEM_OR
:

988 
x
[
rd
] = x[
rs1
] | x[rs1];

989 
xd_£t
 = 1;

991 
MNEM_AND
:

992 
x
[
rd
] = x[
rs1
] & x[rs1];

993 
xd_£t
 = 1;

995 
MNEM_FENCE
:

998 
MNEM_FENCE_I
:

1001 
MNEM_ECALL
:

1004 
MNEM_EBREAK
:

1008 
MNEM_CSRRW
:

1011 
MNEM_CSRRS
:

1014 
MNEM_CSRRC
:

1017 
MNEM_CSRRWI
:

1020 
MNEM_CSRRSI
:

1023 
MNEM_CSRRCI
:

1027 
	`as£π
(0);

1031 
buf„r
[1024];

1032 
Àn
 = 
	`¢¥öt_ö°r
(
buf„r
, (buf„r), &
ö°r
);

1033 
	`¥ötf
("%08x: %08x ; %s", (Ë
pc
, 
›
, 
buf„r
);

1034 
i
 = 0; i < 20 - 
Àn
; i++)

1035 
	`¥ötf
(" ");

1036 i‡(
br_èkí
)

1037 
	`¥ötf
("[branch]");

1038 i‡(
xd_£t
)

1039 
	`¥ötf
(" x[%d] <%d", 
rd
, 
x
[rd]);

1040 i‡(
wrôe
)

1041 
	`¥ötf
(" M[%x] = %x", 
x
[
rs1
] + 
imm
, x[
rs2
]);

1042 i‡(
lﬂd
)

1043 
	`¥ötf
(" M[%x]", 
x
[
rs1
] + 
imm
);

1044 
	`¥ötf
("\n");

1046 
°©e
.
pc
 = 
√xt_pc
;

1047 
x
[0] = 0;

1052 
	}
}

1054 
	$¥öt_°©e
()

1056 
uöt32_t
 
pc
 = 
°©e
.pc;

1057 
öt32_t
 *
x
 = (öt32_à*Ë
°©e
.
ªgs
;

1058 
	`¥ötf
("pc: %08x x8: %08x x16: %08x x24: %08x\n", 
pc
, 
x
[8], x[16], x[24]);

1059 
	`¥ötf
("x1: %08x x9: %08x x17: %08x x25: %08x\n", 
x
[1], x[9], x[17],

1060 
x
[25]);

1061 
	`¥ötf
("x2: %08x x10: %08x x18: %08x x26: %08x\n", 
x
[2], x[10], x[18],

1062 
x
[26]);

1063 
	`¥ötf
("x3: %08x x11: %08x x19: %08x x27: %08x\n", 
x
[3], x[11], x[19],

1064 
x
[27]);

1065 
	`¥ötf
("x4: %08x x12: %08x x20: %08x x28: %08x\n", 
x
[4], x[12], x[20],

1066 
x
[28]);

1067 
	`¥ötf
("x5: %08x x13: %08x x21: %08x x29: %08x\n", 
x
[5], x[13], x[21],

1068 
x
[29]);

1069 
	`¥ötf
("x6: %08x x14: %08x x22: %08x x30: %08x\n", 
x
[6], x[14], x[22],

1070 
x
[30]);

1071 
	`¥ötf
("x7: %08x x15: %08x x23: %08x x31: %08x\n", 
x
[7], x[15], x[23],

1072 
x
[31]);

1073 
	}
}

1075 
	$maö
()

1077 
uöt32_t
 
›s
[] = {

1085 
size_t
 
n_›s
 = 
	`NELEM
(
›s
);

1088 
size_t
 
i
 = 0; i < 
n_›s
; i++) {

1089 
	`M_w
(
i
 * 4, 
›s
[i], 4);

1092 
	`ª£t
();

1094 
	`¥öt_°©e
();

1095 
°ï_˙t
 = 0;

1097 i‡(
	`°ï
())

1099 i‡(
°ï_˙t
++ > 
MAX_STEPS
) {

1100 
	`Ârötf
(
°dîr
, "exceeded MAX_STEPS, quitting\n");

1104 
	`¥öt_°©e
();

1107 
	}
}

	@tests/scimark2/FFT.c

1 
	~<m©h.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

5 
	~"FFT.h
"

7 #i‚de‡
M_PI


8 
	#M_PI
 3.1415926535897932

	)

13 
öt_log2
(
n
);

15 
	$FFT_num_Ê›s
(
N
)

17 
Nd
 = (Ë
N
;

18 
logN
 = (Ë
	`öt_log2
(
N
);

20  (5.0 * 
Nd
 - 2Ë* 
logN
 + 2 * (Nd + 1);

21 
	}
}

23 
	$öt_log2
(
n
)

25 
log
 = 0;

26 
k
 = 1; k < 
n
; k *2, 
log
++)

28 i‡(
n
 !(1 << 
log
)) {

29 
	`¥ötf
("FFT: D©®Àngth i†nŸáÖowî o‡2!: %d ", 
n
);

30 
	`exô
(1);

32  
log
;

33 
	}
}

35 
	$FFT_å™sf‹m_öã∫Æ
(
N
, *
d©a
, 
dúe˘i⁄
)

37 
n
 = 
N
 / 2;

38 
bô
 = 0;

39 
logn
;

40 
duÆ
 = 1;

42 i‡(
n
 == 1)

44 
logn
 = 
	`öt_log2
(
n
);

47 i‡(
N
 == 0)

51 
	`FFT_bôªvî£
(
N
, 
d©a
);

55 
bô
 = 0; bô < 
logn
; bô++, 
duÆ
 *= 2) {

56 
w_ªÆ
 = 1.0;

57 
w_imag
 = 0.0;

58 
a
, 
b
;

60 
thëa
 = 2.0 * 
dúe˘i⁄
 * 
M_PI
 / (2.0 * (Ë
duÆ
);

61 
s
 = 
	`sö
(
thëa
);

62 
t
 = 
	`sö
(
thëa
 / 2.0);

63 
s2
 = 2.0 * 
t
 *Å;

65 
a
 = 0, 
b
 = 0; b < 
n
; b +2 * 
duÆ
) {

66 
i
 = 2 * 
b
;

67 
j
 = 2 * (
b
 + 
duÆ
);

69 
wd_ªÆ
 = 
d©a
[
j
];

70 
wd_imag
 = 
d©a
[
j
 + 1];

72 
d©a
[
j
] = d©a[
i
] - 
wd_ªÆ
;

73 
d©a
[
j
 + 1] = d©a[
i
 + 1] - 
wd_imag
;

74 
d©a
[
i
] +
wd_ªÆ
;

75 
d©a
[
i
 + 1] +
wd_imag
;

79 
a
 = 1;á < 
duÆ
;á++) {

82 
tmp_ªÆ
 = 
w_ªÆ
 - 
s
 * 
w_imag
 - 
s2
 * w_real;

83 
tmp_imag
 = 
w_imag
 + 
s
 * 
w_ªÆ
 - 
s2
 * w_imag;

84 
w_ªÆ
 = 
tmp_ªÆ
;

85 
w_imag
 = 
tmp_imag
;

87 
b
 = 0; b < 
n
; b +2 * 
duÆ
) {

88 
i
 = 2 * (
b
 + 
a
);

89 
j
 = 2 * (
b
 + 
a
 + 
duÆ
);

91 
z1_ªÆ
 = 
d©a
[
j
];

92 
z1_imag
 = 
d©a
[
j
 + 1];

94 
wd_ªÆ
 = 
w_ªÆ
 * 
z1_ªÆ
 - 
w_imag
 * 
z1_imag
;

95 
wd_imag
 = 
w_ªÆ
 * 
z1_imag
 + 
w_imag
 * 
z1_ªÆ
;

97 
d©a
[
j
] = d©a[
i
] - 
wd_ªÆ
;

98 
d©a
[
j
 + 1] = d©a[
i
 + 1] - 
wd_imag
;

99 
d©a
[
i
] +
wd_ªÆ
;

100 
d©a
[
i
 + 1] +
wd_imag
;

104 
	}
}

106 
	$FFT_bôªvî£
(
N
, *
d©a
)

109 
n
 = 
N
 / 2;

110 
nm1
 = 
n
 - 1;

111 
i
 = 0;

112 
j
 = 0;

113 ; 
i
 < 
nm1
; i++) {

115 
ii
 = 
i
 << 1;

118 
jj
 = 
j
 << 1;

121 
k
 = 
n
 >> 1;

123 i‡(
i
 < 
j
) {

124 
tmp_ªÆ
 = 
d©a
[
ii
];

125 
tmp_imag
 = 
d©a
[
ii
 + 1];

126 
d©a
[
ii
] = d©a[
jj
];

127 
d©a
[
ii
 + 1] = d©a[
jj
 + 1];

128 
d©a
[
jj
] = 
tmp_ªÆ
;

129 
d©a
[
jj
 + 1] = 
tmp_imag
;

132 
k
 <
j
) {

134 
j
 -
k
;

137 
k
 >>= 1;

139 
j
 +
k
;

141 
	}
}

143 
	$FFT_å™sf‹m
(
N
, *
d©a
)

145 
	`FFT_å™sf‹m_öã∫Æ
(
N
, 
d©a
, -1);

146 
	}
}

148 
	$FFT_övî£
(
N
, *
d©a
)

150 
n
 = 
N
 / 2;

151 
n‹m
 = 0.0;

152 
i
 = 0;

153 
	`FFT_å™sf‹m_öã∫Æ
(
N
, 
d©a
, +1);

156 
n‹m
 = 1 / ((Ë
n
);

157 
i
 = 0; i < 
N
; i++)

158 
d©a
[
i
] *
n‹m
;

159 
	}
}

	@tests/scimark2/FFT.h

1 #¥agm®
⁄˚


3 
FFT_å™sf‹m
(
N
, *
d©a
);

4 
FFT_övî£
(
N
, *
d©a
);

5 
FFT_bôªvî£
(
N
, *
d©a
);

6 
FFT_num_Ê›s
(
N
);

	@tests/scimark2/LU.c

1 
	~"LU.h
"

2 
	~<m©h.h
>

4 
	$LU_num_Ê›s
(
N
)

7 
Nd
 = (Ë
N
;

9  (2.0 * 
Nd
 * Nd * Nd / 3.0);

10 
	}
}

12 
	$LU_Á˘‹
(
M
, 
N
, **
A
, *
pivŸ
)

14 
möMN
 = 
M
 < 
N
 ? M : N;

16 
j
 = 0; j < 
möMN
; j++) {

18 
jp
 = 
j
;

20 
t
 = 
	`Ábs
(
A
[
j
][j]);

21 
i
 = 
j
 + 1; i < 
M
; i++) {

22 
ab
 = 
	`Ábs
(
A
[
i
][
j
]);

23 i‡(
ab
 > 
t
) {

24 
jp
 = 
i
;

25 
t
 = 
ab
;

29 
pivŸ
[
j
] = 
jp
;

34 i‡(
A
[
jp
][
j
] == 0)

37 i‡(
jp
 !
j
) {

39 *
tA
 = 
A
[
j
];

40 
A
[
j
] = A[
jp
];

41 
A
[
jp
] = 
tA
;

44 i‡(
j
 < 
M
 - 1) {

48 
ª˝
 = 1.0 / 
A
[
j
][j];

49 
k
;

50 
k
 = 
j
 + 1; k < 
M
; k++)

51 
A
[
k
][
j
] *
ª˝
;

54 i‡(
j
 < 
möMN
 - 1) {

59 
ii
 = 
j
 + 1; iò< 
M
; ii++) {

60 *
Aii
 = 
A
[
ii
];

61 *
Aj
 = 
A
[
j
];

62 
AiiJ
 = 
Aii
[
j
];

63 
jj
 = 
j
 + 1; jj < 
N
; jj++)

64 
Aii
[
jj
] -
AiiJ
 * 
Aj
[jj];

70 
	}
}

	@tests/scimark2/LU.h

1 #¥agm®
⁄˚


3 
LU_num_Ê›s
(
N
);

4 
LU_Á˘‹
(
M
, 
N
, **
A
, *
pivŸ
);

	@tests/scimark2/MonteCarlo.c

1 
	~"R™dom.h
"

32 c⁄° 
	gSEED
 = 113;

34 
	$M⁄ãC¨lo_num_Ê›s
(
Num_ßm∂es
)

37  ((Ë
Num_ßm∂es
) * 4.0;

38 
	}
}

40 
	$M⁄ãC¨lo_öãgøã
(
Num_ßm∂es
)

42 
R™dom
 
R
 = 
	`√w_R™dom_£ed
(
SEED
);

44 
undî_curve
 = 0;

46 
cou¡
 = 0; cou¡ < 
Num_ßm∂es
; count++) {

47 
x
 = 
	`R™dom_√xtDoubÀ
(
R
);

48 
y
 = 
	`R™dom_√xtDoubÀ
(
R
);

50 i‡(
x
 * x + 
y
 * y <= 1.0)

51 
undî_curve
++;

54 
	`R™dom_dñëe
(
R
);

56  ((Ë
undî_curve
 / 
Num_ßm∂es
) * 4.0;

57 
	}
}

	@tests/scimark2/MonteCarlo.h

1 #¥agm®
⁄˚


3 
M⁄ãC¨lo_öãgøã
(
Num_ßm∂es
);

4 
M⁄ãC¨lo_num_Ê›s
(
Num_ßm∂es
);

	@tests/scimark2/Random.c

1 
	~<°dlib.h
>

3 
	~"R™dom.h
"

6 
	#MDIG
 32

	)

9 
	#ONE
 1

	)

11 c⁄° 
	gm1
 = (
ONE
 << (
MDIG
 - 2)) + ((ONE << (MDIG - 2)) - ONE);

12 c⁄° 
	gm2
 = 
ONE
 << 
MDIG
 / 2;

20 
	gdm1
;

24 
öôülize
(
R™dom
 
R
, 
£ed
);

26 
R™dom
 
	$√w_R™dom_£ed
(
£ed
)

28 
R™dom
 
R
 = (R™domË
	`mÆloc
((
R™dom_°ru˘
));

30 
	`öôülize
(
R
, 
£ed
);

31 
R
->
À·
 = 0.0;

32 
R
->
right
 = 1.0;

33 
R
->
width
 = 1.0;

35  
R
;

36 
	}
}

38 
	$R™dom_dñëe
(
R™dom
 
R
)

40 
	`‰ì
(
R
);

41 
	}
}

44 
	$R™dom_√xtDoubÀ
(
R™dom
 
R
)

46 
k
;

48 
I
 = 
R
->
i
;

49 
J
 = 
R
->
j
;

50 *
m
 = 
R
->m;

52 
k
 = 
m
[
I
] - m[
J
];

53 i‡(
k
 < 0)

54 
k
 +
m1
;

55 
R
->
m
[
J
] = 
k
;

57 i‡(
I
 == 0)

58 
I
 = 16;

60 
I
--;

61 
R
->
i
 = 
I
;

63 i‡(
J
 == 0)

64 
J
 = 16;

66 
J
--;

67 
R
->
j
 = 
J
;

69  
dm1
 * (Ë
k
;

70 
	}
}

76 
	$öôülize
(
R™dom
 
R
, 
£ed
)

78 
j£ed
, 
k0
, 
k1
, 
j0
, 
j1
, 
ûo›
;

80 
dm1
 = 1.0 / (Ë
m1
;

82 
R
->
£ed
 = seed;

84 i‡(
£ed
 < 0)

85 
£ed
 = -seed;

86 
j£ed
 = (
£ed
 < 
m1
 ? seed : m1);

87 i‡(
j£ed
 % 2 == 0)

88 --
j£ed
;

89 
k0
 = 9069 % 
m2
;

90 
k1
 = 9069 / 
m2
;

91 
j0
 = 
j£ed
 % 
m2
;

92 
j1
 = 
j£ed
 / 
m2
;

93 
ûo›
 = 0; iloop < 17; ++iloop) {

94 
j£ed
 = 
j0
 * 
k0
;

95 
j1
 = (
j£ed
 / 
m2
 + 
j0
 * 
k1
 + j1 * 
k0
) % (m2 / 2);

96 
j0
 = 
j£ed
 % 
m2
;

97 
R
->
m
[
ûo›
] = 
j0
 + 
m2
 * 
j1
;

99 
R
->
i
 = 4;

100 
R
->
j
 = 16;

101 
	}
}

103 *
	$R™domVe˘‹
(
N
, 
R™dom
 
R
)

105 *
x
 = (*Ë
	`mÆloc
((Ë* 
N
);

107 
i
 = 0; i < 
N
; i++)

108 
x
[
i
] = 
	`R™dom_√xtDoubÀ
(
R
);

110  
x
;

111 
	}
}

113 **
	$R™domM©rix
(
M
, 
N
, 
R™dom
 
R
)

116 **
A
 = (**Ë
	`mÆloc
((*Ë* 
M
);

118 i‡(
A
 =
NULL
)

119  
NULL
;

121 
i
 = 0; i < 
M
; i++) {

122 
A
[
i
] = (*Ë
	`mÆloc
((Ë* 
N
);

123 i‡(
A
[
i
] =
NULL
) {

124 
	`‰ì
(
A
);

125  
NULL
;

127 
j
 = 0; j < 
N
; j++)

128 
A
[
i
][
j
] = 
	`R™dom_√xtDoubÀ
(
R
);

130  
A
;

131 
	}
}

	@tests/scimark2/Random.h

1 #¥agm®
⁄˚


4 
	mm
[17];

5 
	m£ed
;

6 
	mi
;

7 
	mj
;

8 
	mÀ·
;

9 
	mright
;

10 
	mwidth
;

11 } 
	tR™dom_°ru˘
, *
	tR™dom
;

13 
R™dom
 
√w_R™dom_£ed
(
£ed
);

14 
R™dom_√xtDoubÀ
(
R™dom
 
R
);

15 
R™dom_dñëe
(
R™dom
 
R
);

16 *
R™domVe˘‹
(
N
, 
R™dom
 
R
);

17 **
R™domM©rix
(
M
, 
N
, 
R™dom
 
R
);

	@tests/scimark2/SOR.c

1 
	~"SOR.h
"

3 
	$SOR_num_Ê›s
(
M
, 
N
, 
num_ôî©i⁄s
)

5 
Md
 = (Ë
M
;

6 
Nd
 = (Ë
N
;

7 
num_ôîD
 = (Ë
num_ôî©i⁄s
;

9  (
Md
 - 1Ë* (
Nd
 - 1Ë* 
num_ôîD
 * 6.0;

10 
	}
}

12 
	$SOR_execuã
(
M
, 
N
, 
omega
, **
G
, 
num_ôî©i⁄s
)

14 
omega_ovî_four
 = 
omega
 * 0.25;

15 
⁄e_möus_omega
 = 1.0 - 
omega
;

18 
Mm1
 = 
M
 - 1;

19 
Nm1
 = 
N
 - 1;

20 *
Gi
;

21 *
Gim1
;

22 *
Gù1
;

24 
p
 = 0;Ö < 
num_ôî©i⁄s
;Ö++) {

25 
i
 = 1; i < 
Mm1
; i++) {

26 
Gi
 = 
G
[
i
];

27 
Gim1
 = 
G
[
i
 - 1];

28 
Gù1
 = 
G
[
i
 + 1];

29 
j
 = 1; j < 
Nm1
; j++)

30 
Gi
[
j
] = 
omega_ovî_four
 *

31 (
Gim1
[
j
] + 
Gù1
[j] + 
Gi
[j - 1] + Gi[j + 1]) +

32 
⁄e_möus_omega
 * 
Gi
[
j
];

35 
	}
}

	@tests/scimark2/SOR.h

1 #¥agm®
⁄˚


3 
SOR_num_Ê›s
(
M
, 
N
, 
num_ôî©i⁄s
);

4 
SOR_execuã
(
M
, 
N
, 
omega
, **
G
, 
num_ôî©i⁄s
);

	@tests/scimark2/SparseCompRow.c

4 
	$S∑r£CompRow_num_Ê›s
(
N
, 
nz
, 
num_ôî©i⁄s
)

9 
a˘uÆ_nz
 = (
nz
 / 
N
) * N;

10  ((Ë
a˘uÆ_nz
Ë* 2.0 * ((Ë
num_ôî©i⁄s
);

11 
	}
}

19 
	$S∑r£CompRow_m©mu…
(
M
,

20 *
y
,

21 c⁄° *
vÆ
,

22 c⁄° *
row
,

23 c⁄° *
cﬁ
,

24 c⁄° *
x
,

25 
NUM_ITERATIONS
)

27 
ªps
 = 0;Ñï†< 
NUM_ITERATIONS
;Ñeps++) {

28 
r
 = 0;Ñ < 
M
;Ñ++) {

29 
sum
 = 0.0;

30 
rowR
 = 
row
[
r
];

31 
rowRp1
 = 
row
[
r
 + 1];

32 
i
 = 
rowR
; i < 
rowRp1
; i++)

33 
sum
 +
x
[
cﬁ
[
i
]] * 
vÆ
[i];

34 
y
[
r
] = 
sum
;

37 
	}
}

	@tests/scimark2/SparseCompRow.h

1 #¥agm®
⁄˚


3 
S∑r£CompRow_num_Ê›s
(
N
, 
nz
, 
num_ôî©i⁄s
);

5 
S∑r£CompRow_m©mu…
(
M
,

6 *
y
,

7 *
vÆ
,

8 *
row
,

9 *
cﬁ
,

10 *
x
,

11 
NUM_ITERATIONS
);

	@tests/scimark2/Stopwatch.c

1 
	~<°dlib.h
>

3 
	~"St›w©ch.h
"

5 
	$£c⁄ds
()

7  ((Ë
	`˛ock
()Ë/ (Ë
CLOCKS_PER_SEC
;

8 
	}
}

10 
	$St›wèch_ª£t
(
St›w©ch
 
Q
)

12 
Q
->
ru¬ög
 = 
Ál£
;

13 
Q
->
œ°_time
 = 0.0;

14 
Q
->
tŸÆ
 = 0.0;

15 
	}
}

17 
St›w©ch
 
	$√w_St›w©ch
()

19 
St›w©ch
 
S
 = (St›w©chË
	`mÆloc
((Stopwatch));

20 i‡(
S
 =
NULL
)

21  
NULL
;

23 
	`St›wèch_ª£t
(
S
);

24  
S
;

25 
	}
}

27 
	$St›w©ch_dñëe
(
St›w©ch
 
S
)

29 i‡(
S
 !
NULL
)

30 
	`‰ì
(
S
);

31 
	}
}

35 
	$St›w©ch_°¨t
(
St›w©ch
 
Q
)

37 i‡(!(
Q
->
ru¬ög
)) {

38 
Q
->
ru¬ög
 = 
åue
;

39 
Q
->
tŸÆ
 = 0.0;

40 
Q
->
œ°_time
 = 
	`£c⁄ds
();

42 
	}
}

44 
	$St›w©ch_°›
(
St›w©ch
 
Q
)

46 i‡(
Q
->
ru¬ög
) {

47 
Q
->
tŸÆ
 +
	`£c⁄ds
(Ë- Q->
œ°_time
;

48 
Q
->
ru¬ög
 = 
Ál£
;

50 
	}
}

52 
	$St›w©ch_ªad
(
St›w©ch
 
Q
)

54 i‡(
Q
->
ru¬ög
) {

55 
t
 = 
	`£c⁄ds
();

56 
Q
->
tŸÆ
 +
t
 - Q->
œ°_time
;

57 
Q
->
œ°_time
 = 
t
;

59  
Q
->
tŸÆ
;

60 
	}
}

	@tests/scimark2/Stopwatch.h

1 #¥agm®
⁄˚


3 
	~<°dboﬁ.h
>

4 
	~<time.h
>

6 
	sSt›w©ch
 {

7 
boﬁ
 
	mru¬ög
;

8 
	mœ°_time
;

9 
	mtŸÆ
;

11 
St›w©ch
 *
	tSt›w©ch
;

13 
St›w©ch
 
√w_St›w©ch
();

14 
St›wèch_ª£t
(
St›w©ch
 
Q
);

15 
St›w©ch_dñëe
(
St›w©ch
 
S
);

16 
St›w©ch_°¨t
(
St›w©ch
 
Q
);

17 
St›w©ch_°›
(
St›w©ch
 
Q
);

18 
St›w©ch_ªad
(
St›w©ch
 
Q
);

	@tests/scimark2/array.c

1 
	~<°dboﬁ.h
>

2 
	~<°dio.h
>

3 
	~<°dlib.h
>

5 
	~"¨øy.h
"

7 **
	$√w_Aºay2D_doubÀ
(
M
, 
N
)

9 
i
 = 0;

10 
boﬁ
 
Áûed
 = 
Ál£
;

12 **
A
 = (**Ë
	`mÆloc
((*Ë* 
M
);

13 i‡(
A
 =
NULL
)

14  
NULL
;

16 
i
 = 0; i < 
M
; i++) {

17 
A
[
i
] = (*Ë
	`mÆloc
(
N
 * ());

18 i‡(
A
[
i
] =
NULL
) {

19 
Áûed
 = 
åue
;

27 i‡(
Áûed
) {

28 
i
--;

29 ; 
i
 <= 0; i--)

30 
	`‰ì
(
A
[
i
]);

31 
	`‰ì
(
A
);

32  
NULL
;

34  
A
;

35 
	}
}

36 
	$Aºay2D_doubÀ_dñëe
(
M
, 
N
, **
A
)

38 i‡(
A
 =
NULL
)

41 
i
 = 0; i < 
M
; i++)

42 
	`‰ì
(
A
[
i
]);

44 
	`‰ì
(
A
);

45 
	}
}

47 
	$Aºay2D_doubÀ_c›y
(
M
, 
N
, **
B
, **
A
)

49 
ªmaödî
 = 
N
 & 3;

51 
i
 = 0; i < 
M
; i++) {

52 *
Bi
 = 
B
[
i
];

53 *
Ai
 = 
A
[
i
];

54 
j
 = 0; j < 
ªmaödî
; j++)

55 
Bi
[
j
] = 
Ai
[j];

56 
j
 = 
ªmaödî
; j < 
N
; j += 4) {

57 
Bi
[
j
] = 
Ai
[j];

58 
Bi
[
j
 + 1] = 
Ai
[j + 1];

59 
Bi
[
j
 + 2] = 
Ai
[j + 2];

60 
Bi
[
j
 + 3] = 
Ai
[j + 3];

63 
	}
}

	@tests/scimark2/array.h

1 #¥agm®
⁄˚


3 **
√w_Aºay2D_doubÀ
(
M
, 
N
);

4 
Aºay2D_doubÀ_dñëe
(
M
, 
N
, **
A
);

5 
Aºay2D_doubÀ_c›y
(
M
, 
N
, **
B
, **
A
);

	@tests/scimark2/constants.h

1 #¥agm®
⁄˚


3 c⁄° 
	gRESOLUTION_DEFAULT
 = 2.0;

4 c⁄° 
	gRANDOM_SEED
 = 101010;

7 c⁄° 
	gFFT_SIZE
 = 1024;

8 c⁄° 
	gSOR_SIZE
 = 100;

9 c⁄° 
	gSPARSE_SIZE_M
 = 1000;

10 c⁄° 
	gSPARSE_SIZE_nz
 = 5000;

11 c⁄° 
	gLU_SIZE
 = 100;

14 c⁄° 
	gLG_FFT_SIZE
 = 1048576;

15 c⁄° 
	gLG_SOR_SIZE
 = 1000;

16 c⁄° 
	gLG_SPARSE_SIZE_M
 = 100000;

17 c⁄° 
	gLG_SPARSE_SIZE_nz
 = 1000000;

18 c⁄° 
	gLG_LU_SIZE
 = 1000;

24 c⁄° 
	gTINY_FFT_SIZE
 = 16;

25 c⁄° 
	gTINY_SOR_SIZE
 = 10;

26 c⁄° 
	gTINY_SPARSE_SIZE_M
 = 10;

27 c⁄° 
	gTINY_SPARSE_SIZE_N
 = 10;

28 c⁄° 
	gTINY_SPARSE_SIZE_nz
 = 50;

29 c⁄° 
	gTINY_LU_SIZE
 = 10;

	@tests/scimark2/kernel.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

4 
	~"FFT.h
"

5 
	~"LU.h
"

6 
	~"M⁄ãC¨lo.h
"

7 
	~"R™dom.h
"

8 
	~"SOR.h
"

9 
	~"S∑r£CompRow.h
"

10 
	~"St›w©ch.h
"

11 
	~"¨øy.h
"

13 
	$kî√l_mósuªFFT
(
N
, 
mötime
, 
R™dom
 
R
)

16 
twoN
 = 2 * 
N
;

17 *
x
 = 
	`R™domVe˘‹
(
twoN
, 
R
);

18 
cy˛es
 = 1;

19 
St›w©ch
 
Q
 = 
	`√w_St›w©ch
();

20 
ªsu…
 = 0.0;

23 
	`St›w©ch_°¨t
(
Q
);

24 
i
 = 0; i < 
cy˛es
; i++) {

25 
	`FFT_å™sf‹m
(
twoN
, 
x
);

26 
	`FFT_övî£
(
twoN
, 
x
);

28 
	`St›w©ch_°›
(
Q
);

29 i‡(
	`St›w©ch_ªad
(
Q
Ë>
mötime
)

32 
cy˛es
 *= 2;

36 
ªsu…
 = 
	`FFT_num_Ê›s
(
N
Ë* 
cy˛es
 / 
	`St›w©ch_ªad
(
Q
) * 1.0e-6;

37 
	`St›w©ch_dñëe
(
Q
);

38 
	`‰ì
(
x
);

39  
ªsu…
;

40 
	}
}

42 
	$kî√l_mósuªSOR
(
N
, 
mö_time
, 
R™dom
 
R
)

44 **
G
 = 
	`R™domM©rix
(
N
, N, 
R
);

45 
ªsu…
 = 0.0;

47 
St›w©ch
 
Q
 = 
	`√w_St›w©ch
();

48 
cy˛es
 = 1;

50 
	`St›w©ch_°¨t
(
Q
);

51 
	`SOR_execuã
(
N
, N, 1.25, 
G
, 
cy˛es
);

52 
	`St›w©ch_°›
(
Q
);

54 i‡(
	`St›w©ch_ªad
(
Q
Ë>
mö_time
)

57 
cy˛es
 *= 2;

61 
ªsu…
 = 
	`SOR_num_Ê›s
(
N
, N, 
cy˛es
Ë/ 
	`St›w©ch_ªad
(
Q
) * 1.0e-6;

62 
	`St›w©ch_dñëe
(
Q
);

63 
	`Aºay2D_doubÀ_dñëe
(
N
, N, 
G
);

64  
ªsu…
;

65 
	}
}

67 
	$kî√l_mósuªM⁄ãC¨lo
(
mö_time
, 
R™dom
 
R
)

69 
ªsu…
 = 0.0;

70 
St›w©ch
 
Q
 = 
	`√w_St›w©ch
();

72 
cy˛es
 = 1;

74 
	`St›w©ch_°¨t
(
Q
);

75 
	`M⁄ãC¨lo_öãgøã
(
cy˛es
);

76 
	`St›w©ch_°›
(
Q
);

77 i‡(
	`St›w©ch_ªad
(
Q
Ë>
mö_time
)

80 
cy˛es
 *= 2;

83 
ªsu…
 = 
	`M⁄ãC¨lo_num_Ê›s
(
cy˛es
Ë/ 
	`St›w©ch_ªad
(
Q
) * 1.0e-6;

84 
	`St›w©ch_dñëe
(
Q
);

85  
ªsu…
;

86 
	}
}

89 
	$kî√l_mósuªS∑r£M©Mu…
(
N
, 
nz
, 
mö_time
, 
R™dom
 
R
)

94 *
x
 = 
	`R™domVe˘‹
(
N
, 
R
);

95 *
y
 = (*Ë
	`mÆloc
((Ë* 
N
);

97 
ªsu…
 = 0.0;

119 
ƒ
 = 
nz
 / 
N
;

120 
™z
 = 
ƒ
 * 
N
;

122 *
vÆ
 = 
	`R™domVe˘‹
(
™z
, 
R
);

123 *
cﬁ
 = (*Ë
	`mÆloc
((Ë* 
nz
);

124 *
row
 = (*Ë
	`mÆloc
((Ë* (
N
 + 1));

125 
r
 = 0;

126 
cy˛es
 = 1;

128 
St›w©ch
 
Q
 = 
	`√w_St›w©ch
();

130 
row
[0] = 0;

131 
r
 = 0;Ñ < 
N
;Ñ++) {

133 
rowr
 = 
row
[
r
];

134 
°ï
 = 
r
 / 
ƒ
;

135 
i
 = 0;

137 
row
[
r
 + 1] = 
rowr
 + 
ƒ
;

138 i‡(
°ï
 < 1)

139 
°ï
 = 1;

142 
i
 = 0; i < 
ƒ
; i++)

143 
cﬁ
[
rowr
 + 
i
] = i * 
°ï
;

147 
	`St›w©ch_°¨t
(
Q
);

148 
	`S∑r£CompRow_m©mu…
(
N
, 
y
, 
vÆ
, 
row
, 
cﬁ
, 
x
, 
cy˛es
);

149 
	`St›w©ch_°›
(
Q
);

150 i‡(
	`St›w©ch_ªad
(
Q
Ë>
mö_time
)

153 
cy˛es
 *= 2;

157 
ªsu…
 =

158 
	`S∑r£CompRow_num_Ê›s
(
N
, 
nz
, 
cy˛es
Ë/ 
	`St›w©ch_ªad
(
Q
) * 1.0e-6;

160 
	`St›w©ch_dñëe
(
Q
);

161 
	`‰ì
(
row
);

162 
	`‰ì
(
cﬁ
);

163 
	`‰ì
(
vÆ
);

164 
	`‰ì
(
y
);

165 
	`‰ì
(
x
);

167  
ªsu…
;

168 
	}
}

170 
	$kî√l_mósuªLU
(
N
, 
mö_time
, 
R™dom
 
R
)

172 **
A
 = 
NULL
;

173 **
lu
 = 
NULL
;

174 *
pivŸ
 = 
NULL
;

176 
St›w©ch
 
Q
 = 
	`√w_St›w©ch
();

177 
ªsu…
 = 0.0;

178 
cy˛es
 = 1;

180 i‡((
A
 = 
	`R™domM©rix
(
N
, N, 
R
)Ë=
NULL
)

181 
	`exô
(1);

182 i‡((
lu
 = 
	`√w_Aºay2D_doubÀ
(
N
, N)Ë=
NULL
)

183 
	`exô
(1);

184 i‡((
pivŸ
 = (*Ë
	`mÆloc
(
N
 * ())Ë=
NULL
)

185 
	`exô
(1);

188 
	`St›w©ch_°¨t
(
Q
);

189 
i
 = 0; i < 
cy˛es
; i++) {

190 
	`Aºay2D_doubÀ_c›y
(
N
, N, 
lu
, 
A
);

191 
	`LU_Á˘‹
(
N
, N, 
lu
, 
pivŸ
);

193 
	`St›w©ch_°›
(
Q
);

194 i‡(
	`St›w©ch_ªad
(
Q
Ë>
mö_time
)

197 
cy˛es
 *= 2;

201 
ªsu…
 = 
	`LU_num_Ê›s
(
N
Ë* 
cy˛es
 / 
	`St›w©ch_ªad
(
Q
) * 1.0e-6;

203 
	`St›w©ch_dñëe
(
Q
);

204 
	`‰ì
(
pivŸ
);

205 
	`Aºay2D_doubÀ_dñëe
(
N
, N, 
lu
);

206 
	`Aºay2D_doubÀ_dñëe
(
N
, N, 
A
);

208  
ªsu…
;

209 
	}
}

	@tests/scimark2/kernel.h

1 #¥agm®
⁄˚


3 
kî√l_mósuªFFT
(
FFT_size
, 
mö_time
, 
R™dom
 
R
);

4 
kî√l_mósuªSOR
(
SOR_size
, 
mö_time
, 
R™dom
 
R
);

5 
kî√l_mósuªM⁄ãC¨lo
(
mö_time
, 
R™dom
 
R
);

6 
kî√l_mósuªS∑r£M©Mu…
(
S∑r£_size_N
,

7 
S∑r£_size_nz
,

8 
mö_time
,

9 
R™dom
 
R
);

10 
kî√l_mósuªLU
(
LU_size
, 
mö_time
, 
R™dom
 
R
);

	@tests/scimark2/scimark2.c

1 
	~<°dio.h
>

2 
	~<°dlib.h
>

3 
	~<°rög.h
>

5 
	~"R™dom.h
"

6 
	~"c⁄°™ts.h
"

7 
	~"kî√l.h
"

9 
	$¥öt_b™√r
()

11 
	`¥ötf
(

13 
	`¥ötf
(

15 
	`¥ötf
(

17 
	`¥ötf
(

19 
	}
}

21 
	$maö
(
¨gc
, *
¨gv
[])

24 
mö_time
 = 
RESOLUTION_DEFAULT
;

26 
FFT_size
 = 
FFT_SIZE
;

27 
SOR_size
 = 
SOR_SIZE
;

28 
S∑r£_size_M
 = 
SPARSE_SIZE_M
;

29 
S∑r£_size_nz
 = 
SPARSE_SIZE_nz
;

30 
LU_size
 = 
LU_SIZE
;

33 
ªs
[6] = {0.0};

34 
R™dom
 
R
 = 
	`√w_R™dom_£ed
(
RANDOM_SEED
);

36 i‡(
¨gc
 > 1) {

37 
cuºít_¨g
 = 1;

39 i‡(
	`°rcmp
(
¨gv
[1], "-help") == 0 || strcmp(argv[1], "-h") == 0) {

40 
	`Ârötf
(
°dîr
, "Usage: [-large] [minimum_time]\n");

41 
	`exô
(0);

44 i‡(
	`°rcmp
(
¨gv
[1], "-large") == 0) {

45 
FFT_size
 = 
LG_FFT_SIZE
;

46 
SOR_size
 = 
LG_SOR_SIZE
;

47 
S∑r£_size_M
 = 
LG_SPARSE_SIZE_M
;

48 
S∑r£_size_nz
 = 
LG_SPARSE_SIZE_nz
;

49 
LU_size
 = 
LG_LU_SIZE
;

51 
cuºít_¨g
++;

54 i‡(
cuºít_¨g
 < 
¨gc
) {

55 
mö_time
 = 
	`©of
(
¨gv
[
cuºít_¨g
]);

59 
	`¥öt_b™√r
();

60 
	`¥ötf
("Usög %10.2‡£c⁄d†möÅimê≥∏kíñ.\n", 
mö_time
);

62 
ªs
[1] = 
	`kî√l_mósuªFFT
(
FFT_size
, 
mö_time
, 
R
);

63 
ªs
[2] = 
	`kî√l_mósuªSOR
(
SOR_size
, 
mö_time
, 
R
);

64 
ªs
[3] = 
	`kî√l_mósuªM⁄ãC¨lo
(
mö_time
, 
R
);

65 
ªs
[4] =

66 
	`kî√l_mósuªS∑r£M©Mu…
(
S∑r£_size_M
, 
S∑r£_size_nz
, 
mö_time
, 
R
);

67 
ªs
[5] = 
	`kî√l_mósuªLU
(
LU_size
, 
mö_time
, 
R
);

71 
ªs
[0] = (res[1] +Ñes[2] +Ñes[3] +Ñes[4] +Ñes[5]) / 5;

74 
	`¥ötf
("ComposôêSc‹e: %8.2f\n", 
ªs
[0]);

75 
	`¥ötf
("FFT MÊ›s: %8.2‡ (N=%d)\n", 
ªs
[1], 
FFT_size
);

76 
	`¥ötf
("SOR MÊ›s: %8.2‡ (%d x %d)\n", 
ªs
[2], 
SOR_size
,

77 
SOR_size
);

78 
	`¥ötf
("M⁄ãC¨lo: MÊ›s: %8.2f\n", 
ªs
[3]);

79 
	`¥ötf
("S∑r£ m©mu… MÊ›s: %8.2‡ (N=%d,Çz=%d)\n", 
ªs
[4],

80 
S∑r£_size_M
, 
S∑r£_size_nz
);

81 
	`¥ötf
("LU MÊ›s: %8.2‡ (M=%d, N=%d)\n", 
ªs
[5], 
LU_size
,

82 
LU_size
);

85 
	`R™dom_dñëe
(
R
);

88 
	}
}

	@tests/smolnes.c

31 
	~<as£π.h
>

32 
	~<°dboﬁ.h
>

33 
	~<°ddef.h
>

34 
	~<°döt.h
>

35 
	~<°dio.h
>

36 
	~<°dlib.h
>

37 
	~<°rög.h
>

39 
	#INDEX_RIGHT
 0

	)

40 
	#INDEX_LEFT
 1

	)

41 
	#INDEX_DOWN
 2

	)

42 
	#INDEX_UP
 3

	)

43 
	#INDEX_RETURN
 4

	)

44 
	#INDEX_TAB
 5

	)

45 
	#INDEX_Z
 6

	)

46 
	#INDEX_X
 7

	)

48 
	#SCREEN_WIDTH
 256

	)

49 
	#SCREEN_HEIGHT
 240

	)

51 
	#PULL
 
	`mem
(++
S
, 1, 0, 
Ál£
)

	)

52 
	#PUSH
(
x
Ë
	`mem
(
S
--, 1, x, 
åue
);

	)

54 
	#OP16
(
x
) \

56 
x
: \

57 
x
 + 16:

	)

60 
	mKEY_EVENT
 = 0,

61 
	mMOUSE_MOTION_EVENT
 = 1,

62 
	mMOUSE_BUTTON_EVENT
 = 2,

63 
	mQUIT_EVENT
 = 3

67 
uöt32_t
 
	mkeycode
;

68 
uöt8_t
 
	m°©e
;

69 } 
	tkey_evít_t
;

72 
öt32_t
 
	mx
, 
	my
, 
	mxªl
, 
	myªl
;

73 } 
	tmou£_mŸi⁄_t
;

76 
uöt8_t
 
	mbuâ⁄
;

77 
uöt8_t
 
	m°©e
;

78 } 
	tmou£_buâ⁄_t
;

81 
uöt32_t
 
	mty≥
;

83 
key_evít_t
 
	mkey_evít
;

85 
mou£_mŸi⁄_t
 
	mmŸi⁄
;

86 
mou£_buâ⁄_t
 
	mbuâ⁄
;

87 } 
	mmou£
;

89 } 
	tevít_t
;

92 
evít_t
 *
	mba£
;

93 
size_t
 
	m°¨t
;

94 
size_t
 
	mˇ∑côy
;

95 } 
	tevít_queue_t
;

97 
evít_queue_t
 
	gevít_queue
 = {.
ba£
 = 
NULL
, .
	g°¨t
 = 0, .
	gˇ∑côy
 = 0};

99 íum { 
	mRELATIVE_MODE_SUBMISSION
 = 0, 
	mWINDOW_TITLE_SUBMISSION
 = 1 };

102 
uöt8_t
 
	míabÀd
;

103 } 
	tmou£_submissi⁄_t
;

106 
uöt32_t
 
	mtôÀ
;

107 
uöt32_t
 
	msize
;

108 } 
	ttôÀ_submissi⁄_t
;

111 
uöt32_t
 
	mty≥
;

113 
mou£_submissi⁄_t
 
	mmou£
;

114 
tôÀ_submissi⁄_t
 
	mtôÀ
;

116 } 
	tsubmissi⁄_t
;

118 
size_t
 
	gevít_cou¡
;

121 
uöt32_t
 
	grgba
[64] = {

133 
	gsˇny
,

134 
	gshi·_©
;

136 
uöt8_t
 *
	grom
, *
	gchºom
,

137 
	g¥g
[2], 
	gchr
[2],

138 
	gA
, 
	gX
, 
	gY
, 
	gP
 = 4, 
	gS
 = ~2, 
	gPCH
, 
	gPCL
,

139 
	gaddr_lo
, 
	gaddr_hi
,

140 
	gnomem
,

141 
	gªsu…
,

142 
	gvÆ
,

143 
	g¸oss
,

144 
	gtmp
, 
	gtmp2
,

145 
	gµumask
, 
	gµu˘æ
, 
	gµu°©us
,

146 
	gµubuf
,

147 
	gW
,

148 
	gföe_x
,

149 
	g›code
,

150 
	gnmi
,

151 
	g¡b
,

152 
	g±b_lo
, 
	g±b_hi
,

153 
	gvøm
[2048],

154 
	g∑Àâe_øm
[64],

155 
	gøm
[8192],

156 
	gchºam
[8192],

157 
	g¥gøm
[8192],

158 
	gﬂm
[256],

159 
	gmask
[] =

163 
	gkeys
,

164 
	gmúr‹
,

165 
	gmmc1_bôs
, 
	gmmc1_d©a
, 
	gmmc1_˘æ
,

166 
	gchrb™k0
, 
	gchrb™k1
, 
	g¥gb™k
,

167 
	grombuf
[1024 * 1024],

168 
	gkey_°©e
[8];

170 
uöt16_t
 
	gT
, 
	gV
,

171 
	gsum
,

172 
	gdŸ
,

173 
	g©b
,

174 
	gshi·_hi
, 
	gshi·_lo
,

175 
	gcy˛es
;

177 
uöt32_t
 
	g‰ame_buf„r
[61440];

180 
	$døw_‰ame
(*
ba£
, 
width
, 
height
)

182 *
a0
 
	`asm
("a0"Ë
ba£
;

183 
a1
 
	`asm
("a1"Ë
width
;

184 
a2
 
	`asm
("a2"Ë
height
;

185 
size_t
 
a7
 
	`asm
("a7") = 0xbeef;

186 
asm
 vﬁ©ûe("sˇŒ" : : "r"(
a0
), "r"(
a1
), "r"(
a2
), "r"(
a7
));

187 
	}
}

189 
	$£tup_queue
(*
ba£
, 
size_t
 
ˇ∑côy
)

191 *
a0
 
	`asm
("a0"Ë
ba£
;

192 
size_t
 
a1
 
	`asm
("a1"Ë
ˇ∑côy
;

193 
size_t
 *
a2
 
	`asm
("a2"Ë&
evít_cou¡
;

194 
size_t
 
a7
 
	`asm
("a7") = 0xc0de;

195 
asm
 vﬁ©ûe("sˇŒ" : : "r"(
a0
), "r"(
a1
), "r"(
a2
), "r"(
a7
));

197 
evít_queue
.
ba£
 = base;

198 
evít_queue
.
ˇ∑côy
 = capacity;

200 
	}
}

202 
	$pﬁl_evít
(
evít_t
 *
evít
)

204 i‡(
evít_cou¡
 == 0)

207 *
evít
 = 
evít_queue
.
ba£
[evít_queue.
°¨t
];

208 ++
evít_queue
.
°¨t
;

209 
evít_queue
.
°¨t
 &evít_queue.
ˇ∑côy
 - 1;

210 --
evít_cou¡
;

213 
	}
}

216 
ölöe
 
uöt8_t
 *
	$gë_chr_byã
(
uöt16_t
 
a
)

218  &
chºom
[
chr
[
a
 >> 12] << 12 |á & 4095];

219 
	}
}

222 
ölöe
 
uöt8_t
 *
	$gë_«mëabÀ_byã
(
uöt16_t
 
a
)

224  &
vøm
[!
múr‹
 ? 
a
 % 1024

225 : 
múr‹
 =1 ? 
a
 % 1024 + 1024

226 : 
múr‹
 == 2

227 ? 
a
 & 2047

228 : 
a
 / 2 & 1024 |á % 1024];

229 
	}
}

234 
ölöe
 
uöt8_t
 
	$mem
(
uöt8_t
 
lo
, uöt8_à
hi
, uöt8_à
vÆ
, 
boﬁ
 
is_wrôe
)

236 
uöt16_t
 
a
 = 
hi
 << 8 | 
lo
;

238 
hi
 >> 4) {

240  
is_wrôe
 ? 
øm
[
a
] = 
vÆ
 :Ñam[a];

243 
lo
 &= 7;

246 i‡(
lo
 == 7) {

247 
tmp
 = 
µubuf
;

248 
uöt8_t
 *
rom
 =

250 
V
 < 8192

251 ? !
is_wrôe
 || 
chºom
 =
chºam
 ? 
	`gë_chr_byã
(
V
Ë: &
tmp2


253 : 
V
 < 16128

254 ? 
	`gë_«mëabÀ_byã
(
V
)

256 : 
∑Àâe_øm
 + (
uöt8_t
Ë((
V
 & 19) == 16 ? V ^ 16 : V);

257 
is_wrôe
 ? *
rom
 = 
vÆ
 : (
µubuf
 = *rom);

258 
V
 +
µu˘æ
 & 4 ? 32 : 1;

259 
V
 %= 16384;

260  
tmp
;

263 i‡(
is_wrôe
)

264 
lo
) {

266 
µu˘æ
 = 
vÆ
;

267 
T
 = T & 62463 | 
vÆ
 % 4 << 10;

271 
µumask
 = 
vÆ
;

275 
T
 = (
W
 ^1Ë? 
föe_x
 = 
vÆ
 & 7,

276 
T
 & ~31 | 
vÆ
 / 8 : T & 35871 | val % 8 << 12 | (val & 248) * 4;

280 
T
 = (
W
 ^1Ë? T & 255 | 
vÆ
 % 64 << 8 : (
V
 = T & ~255 | val);

283 i‡(
lo
 == 2)

284  
tmp
 = 
µu°©us
 & 224,Öpu°©u†&127, 
W
 = 0,Åmp;

289 i‡(
is_wrôe
 && 
lo
 == 20)

290 
sum
 = 256; sum--;)

291 
ﬂm
[
sum
] = 
	`mem
(sum, 
vÆ
, 0, 
Ál£
);

293  (
lo
 =22Ë? 
is_wrôe
 ? 
keys
 = (
key_°©e
[
INDEX_RIGHT
] * 8 +

294 
key_°©e
[
INDEX_LEFT
] * 4 +

295 
key_°©e
[
INDEX_DOWN
] * 2 +

296 
key_°©e
[
INDEX_UP
]) *

298 
key_°©e
[
INDEX_RETURN
] * 8 +

299 
key_°©e
[
INDEX_TAB
] * 4 +

300 
key_°©e
[
INDEX_Z
] * 2 +

301 
key_°©e
[
INDEX_X
]

302 : (
tmp
 = 
keys
 & 1, keys /= 2,Åmp)

306  
is_wrôe
 ? 
¥gøm
[
a
 & 8191] = 
vÆ
 :Örgram[a & 8191];

310 i‡(
is_wrôe
)

311 
rombuf
[6] >> 4) {

313 
múr‹
 = !(
vÆ
 / 16);

314 *
¥g
 = 
vÆ
 = val % 8 * 2;

315 
¥g
[1] = 
vÆ
 + 1;

319 *
chr
 = 
vÆ
 = val % 4 * 2;

320 
chr
[1] = 
vÆ
 + 1;

324 *
¥g
 = 
vÆ
 & 31;

328 i‡(
vÆ
 & 128) {

329 
mmc1_bôs
 = 5, 
mmc1_d©a
 = 0, 
mmc1_˘æ
 |= 12;

330 } i‡(
mmc1_d©a
 = mmc1_d©®/ 2 | 
vÆ
 << 4 & 16,

331 !--
mmc1_bôs
) {

332 
mmc1_bôs
 = 5, 
tmp
 = 
a
 >> 13;

333 *(
tmp
 =4 ? 
múr‹
 = 
mmc1_d©a
 & 3, &
mmc1_˘æ


334 : 
tmp
 =5 ? &
chrb™k0


335 : 
tmp
 =6 ? &
chrb™k1


336 : &
¥gb™k
Ë
mmc1_d©a
;

339 *
chr
 = 
chrb™k0
 & ~!(
mmc1_˘æ
 & 16);

340 
chr
[1] = 
mmc1_˘æ
 & 16 ? 
chrb™k1
 : 
chrb™k0
 | 1;

343 
tmp
 = 
mmc1_˘æ
 / 4 & 3;

344 *
¥g
 = 
tmp
 =2 ? 0 :Åm∞=3 ? 
¥gb™k
 :Örgbank & ~1;

345 
¥g
[1] = 
tmp
 =2 ? 
¥gb™k


346 : 
tmp
 =3 ? 
rombuf
[4] - 1

347 : 
¥gb™k
 | 1;

350  
rom
[
¥g
[(
a
 >> 14) - 2] << 14 |á & 16383];

354 
	}
}

357 
ölöe
 
uöt8_t
 
	$ªad_pc
()

359 
vÆ
 = 
	`mem
(
PCL
, 
PCH
, 0, 
Ál£
);

360 !++
PCL
 ? ++
PCH
 : 0;

361  
vÆ
;

362 
	}
}

365 
ölöe
 
uöt8_t
 
	$£t_nz
(
uöt8_t
 
vÆ
)

367  
P
 = P & ~130 | 
vÆ
 & 128 | !val * 2;

368 
	}
}

370 
	~"ÁŒög-√s.h
"

372 
	$maö
(
¨gc
, **
¨gv
)

374 
FILE
 *
fûe
 = 
NULL
;

375 i‡(
¨gc
 == 2) {

376 
fûe
 = 
	`f›í
(
¨gv
[1], "rb");

377 
	`‰ód
(
rombuf
, 1024 * 1024, 1, 
fûe
);

378 
	`f˛o£
(
fûe
);

381 
	`mem˝y
(
rombuf
, 
ÁŒög_√s
, (falling_nes));

384 *
ba£
 = 
	`mÆloc
((
evít_t
Ë* 128 + (
submissi⁄_t
) * 128);

385 
	`£tup_queue
(
ba£
, 128);

388 
rom
 = 
rombuf
 + 16;

390 
¥g
[1] = 
rombuf
[4] - 1;

394 
chºom
 = 
rombuf
[5] ? 
rom
 + ((
¥g
[1] + 1Ë<< 14Ë: 
chºam
;

396 
chr
[1] = (
rombuf
[5] ?Ñombuf[5] : 1) * 2 - 1;

398 
múr‹
 = !(
rombuf
[6] & 1) + 2;

401 
PCL
 = 
	`mem
(~3, ~0, 0, 
Ál£
);

402 
PCH
 = 
	`mem
(~2, ~0, 0, 
Ál£
);

405 
cy˛es
 = 
nomem
 = 0;

406 i‡(
nmi
)

407 
nmi
;

409 (
›code
 = 
	`ªad_pc
()) & 31) {

411 i‡(
›code
 & 128) {

412 
	`ªad_pc
();

413 
nomem
 = 1;

414 
nomem›
;

417 
›code
 >> 5) {

419 !++
PCL
 ? ++
PCH
 : 0;

420 
nmi
:

421 
	`PUSH
(
PCH
)

422 
	`PUSH
(
PCL
)

423 
	`PUSH
(
P
 | 32)

425 
PCL
 = 
	`mem
(~1 - 
nmi
 * 4, ~0, 0, 
Ál£
);

426 
PCH
 = 
	`mem
(~0 - 
nmi
 * 4, ~0, 0, 
Ál£
);

427 
cy˛es
++;

428 
nmi
 = 0;

432 
ªsu…
 = 
	`ªad_pc
();

433 
	`PUSH
(
PCH
)

434 
	`PUSH
(
PCL
)

435 
PCH
 = 
	`ªad_pc
();

436 
PCL
 = 
ªsu…
;

440 
P
 = 
PULL
 & ~32;

441 
PCL
 = 
PULL
;

442 
PCH
 = 
PULL
;

446 
PCL
 = 
PULL
;

447 
PCH
 = 
PULL
;

448 !++
PCL
 ? ++
PCH
 : 0;

452 
cy˛es
 += 4;

456 
	`ªad_pc
();

457 i‡(!(
P
 & 
mask
[
›code
 >> 6 & 3]) ^ opcode / 32 & 1) {

458 i‡(
¸oss
 = 
PCL
 + (
öt8_t
Ë
vÆ
 >> 8)

459 
PCH
 +
¸oss
, 
cy˛es
++;

460 
cy˛es
++, 
PCL
 +(Ë
vÆ
;

463 
	`OP16
(8)

464 
›code
 >>= 4) {

466 
	`PUSH
(
P
 | 48)

467 
cy˛es
++;

471 
P
 = 
PULL
 & ~16;

472 
cy˛es
 += 2;

476 
	`PUSH
(
A
)

477 
cy˛es
++;

481 
	`£t_nz
(
A
 = 
PULL
);

482 
cy˛es
 += 2;

486 
	`£t_nz
(--
Y
);

490 
	`£t_nz
(
A
 = 
Y
);

494 
	`£t_nz
(
Y
 = 
A
);

498 
	`£t_nz
(++
Y
);

502 
	`£t_nz
(++
X
);

506 
P
 = P & ~
mask
[
›code
 + 3] | mask[opcode + 4];

510 
	`OP16
(10)

511 
›code
 >> 4) {

513 
	`£t_nz
(
A
 = 
X
);

517 
S
 = 
X
;

521 
	`£t_nz
(
X
 = 
A
);

525 
	`£t_nz
(
X
 = 
S
);

529 
	`£t_nz
(--
X
);

536 
nomem
 = 1;

537 
vÆ
 = 
A
;

538 
nomem›
;

543 
	`ªad_pc
();

544 
vÆ
 +
X
;

545 
addr_lo
 = 
	`mem
(
vÆ
, 0, 0, 
Ál£
);

546 
addr_hi
 = 
	`mem
(
vÆ
 + 1, 0, 0, 
Ál£
);

547 
cy˛es
 += 4;

548 
›code
;

551 
addr_lo
 = 
	`ªad_pc
();

552 
addr_hi
 = 0;

553 
cy˛es
++;

554 
›code
;

558 
	`ªad_pc
();

559 
nomem
 = 1;

560 
nomem›
;

563 
addr_lo
 = 
	`ªad_pc
();

564 
addr_hi
 = 
	`ªad_pc
();

565 
cy˛es
 += 2;

566 
›code
;

569 
addr_lo
 = 
	`mem
(
	`ªad_pc
(), 0, 0, 
Ál£
);

570 
addr_hi
 = 
	`mem
(
vÆ
 + 1, 0, 0, 
Ál£
);

571 
vÆ
 = 
Y
;

572 
tmp
 = 
›code
 == 145;

573 
cy˛es
++;

574 
¸oss
;

577 
addr_lo
 =

578 
	`ªad_pc
(Ë+ ((
›code
 & 214Ë=150 ? 
Y
 : 
X
);

579 
addr_hi
 = 0;

580 
cy˛es
 += 2;

581 
›code
;

584 
addr_lo
 = 
	`ªad_pc
();

585 
addr_hi
 = 
	`ªad_pc
();

586 
vÆ
 = 
Y
;

587 
tmp
 = 
›code
 == 153;

588 
¸oss
;

591 
addr_lo
 = 
	`ªad_pc
();

592 
addr_hi
 = 
	`ªad_pc
();

593 
vÆ
 = 
›code
 =190 ? 
Y
 : 
X
;

594 
tmp
 = 
›code
 ==

597 
›code
 % 16 == 14 && opcode != 190;

599 
¸oss
:

600 
addr_hi
 +
¸oss
 = 
addr_lo
 + 
vÆ
 > 255;

601 
addr_lo
 +
vÆ
;

602 
cy˛es
 +2 + 
tmp
 | 
¸oss
;

605 
›code
:

609 i‡((
›code
 & 224) != 128 && opcode != 76)

610 
vÆ
 = 
	`mem
(
addr_lo
, 
addr_hi
, 0, 
Ál£
);

612 
nomem›
:

613 
›code
 & 243) {

614 
	`OP16
(1Ë
	`£t_nz
(
A
 |
vÆ
);

615 
	`OP16
(33Ë
	`£t_nz
(
A
 &
vÆ
);

616 
	`OP16
(65Ë
	`£t_nz
(
A
 ^
vÆ
);

618 
	`OP16
(225)

619 
vÆ
 = ~val;

620 
add
;

622 
	`OP16
(97)

623 
add
:

624 
sum
 = 
A
 + 
vÆ
 + (
P
 & 1);

625 
P
 = P & ~65 | 
sum
 > 255 | (~(
A
 ^ 
vÆ
) & (val ^ sum) & 128) / 2;

626 
	`£t_nz
(
A
 = 
sum
);

628 
	`OP16
(2)

629 
ªsu…
 = 
vÆ
 * 2;

630 
P
 = P & ~1 | 
vÆ
 / 128;

631 
mem›
;

633 
	`OP16
(34)

634 
ªsu…
 = 
vÆ
 * 2 | 
P
 & 1;

635 
P
 = P & ~1 | 
vÆ
 / 128;

636 
mem›
;

638 
	`OP16
(66)

639 
ªsu…
 = 
vÆ
 / 2;

640 
P
 = P & ~1 | 
vÆ
 & 1;

641 
mem›
;

643 
	`OP16
(98)

644 
ªsu…
 = 
vÆ
 / 2 | 
P
 << 7;

645 
P
 = P & ~1 | 
vÆ
 & 1;

646 
mem›
;

648 
	`OP16
(194)

649 
ªsu…
 = 
vÆ
 - 1;

650 
mem›
;

652 
	`OP16
(226)

653 
ªsu…
 = 
vÆ
 + 1;

656 
mem›
:

657 
	`£t_nz
(
ªsu…
);

659 
nomem
 ? 
A
 = 
ªsu…


660 : (
cy˛es
 +2, 
	`mem
(
addr_lo
, 
addr_hi
, 
ªsu…
, 
åue
));

664 
P
 = P & 61 | 
vÆ
 & 192 | !(
A
 & val) * 2;

668 
PCL
 = 
addr_lo
;

669 
PCH
 = 
addr_hi
;

670 
cy˛es
--;

674 
PCL
 = 
vÆ
;

675 
PCH
 = 
	`mem
(
addr_lo
 + 1, 
addr_hi
, 0, 
Ál£
);

676 
cy˛es
++;

678 
	`OP16
(160Ë
	`£t_nz
(
Y
 = 
vÆ
);

679 
	`OP16
(161Ë
	`£t_nz
(
A
 = 
vÆ
);

680 
	`OP16
(162Ë
	`£t_nz
(
X
 = 
vÆ
);

682 
	`OP16
(128Ë
ªsu…
 = 
Y
;

683 
°‹e
;

684 
	`OP16
(129Ë
ªsu…
 = 
A
;

685 
°‹e
;

686 
	`OP16
(130Ë
ªsu…
 = 
X
;

688 
°‹e
:

689 
	`mem
(
addr_lo
, 
addr_hi
, 
ªsu…
, 
åue
);

691 
	`OP16
(192Ë
ªsu…
 = 
Y
;

692 
cmp
;

693 
	`OP16
(193Ë
ªsu…
 = 
A
;

694 
cmp
;

695 
	`OP16
(224Ë
ªsu…
 = 
X
;

696 
cmp
:

697 
P
 = P & ~1 | 
ªsu…
 >
vÆ
;

698 
	`£t_nz
(
ªsu…
 - 
vÆ
);

706 
tmp
 = 
cy˛es
 * 3 + 6;Åmp--;) {

708 i‡(!(
µumask
 & 24))

709 
h™dÀ_evíts
;

711 i‡(
sˇny
 < 240) {

712 i‡(
dŸ
 < 256 || dot > 319) {

713 
dŸ
 & 7) {

715 
¡b
 = *
	`gë_«mëabÀ_byã
(
V
);

718 
©b
 = (*
	`gë_«mëabÀ_byã
(960 | 
V
 & 3072 |

719 
V
 >> 4 & 56 | V / 4 & 7) >>

720 (
V
 >> 5 & 2 | V / 2 & 1) * 2) &

723 c⁄° 
uöt16_t
 
lut
[] = {0x0, 0x5555, 0xaaaa,

725 
©b
 = 
lut
[atb];

729 
±b_lo
 = *
	`gë_chr_byã
(
µu˘æ
 << 8 & 4096 | 
¡b
 << 4 |

730 
V
 >> 12);

733 
±b_hi
 = *
	`gë_chr_byã
(
µu˘æ
 << 8 & 4096 | 
¡b
 << 4 |

734 
V
 >> 12 | 8);

736 
V
 = (V & 31) == 31 ? V & ~31 ^ 1024 : V + 1;

741 i‡((
uöt16_t
Ë
sˇny
 < 240 && 
dŸ
 < 256) {

743 
uöt8_t
 
cﬁ‹
 = 
shi·_hi
 >> 14 - 
föe_x
 & 2 |

744 
shi·_lo
 >> 15 - 
föe_x
 & 1,

745 
∑Àâe
 = 
shi·_©
 >> 28 - 
föe_x
 * 2 & 12;

748 i‡(!(
µumask
 & 16))

752 
uöt8_t
 *
•rôe
 = 
ﬂm
; sprite < oam + 256;

753 
•rôe
 += 4) {

754 
uöt16_t
 
•rôe_h
 = 
µu˘æ
 & 32 ? 16 : 8,

755 
•rôe_x
 = 
dŸ
 - 
•rôe
[3],

756 
•rôe_y
 = 
sˇny
 - *
•rôe
 - 1,

757 
sx
 = 
•rôe_x
 ^ (
•rôe
[2] & 64 ? 0 : 7),

758 
sy
 = 
•rôe_y
 ^

759 (
•rôe
[2] & 128 ? 
•rôe_h
 - 1 : 0);

760 i‡(
•rôe_x
 >8 || 
•rôe_y
 >
•rôe_h
)

763 
uöt16_t
 
•rôe_tûe
 = 
•rôe
[1],

764 
•rôe_addr
 =

765 
µu˘æ
 & 32

767 ? 
•rôe_tûe
 % 2 << 12 |

768 (
•rôe_tûe
 & ~1) << 4 |

769 (
sy
 & 8) * 2 | sy & 7

771 : (
µu˘æ
 & 8) << 9 |

772 
•rôe_tûe
 << 4 | 
sy
 & 7,

773 
•rôe_cﬁ‹
 =

774 *
	`gë_chr_byã
(
•rôe_addr
 + 8) >>

775 
sx
 << 1 &

777 *
	`gë_chr_byã
(
•rôe_addr
Ë>> 
sx
 & 1;

780 i‡(
•rôe_cﬁ‹
) {

783 !(
•rôe
[2] & 32 && 
cﬁ‹
)

784 ? 
cﬁ‹
 = 
•rôe_cﬁ‹
,

785 
∑Àâe
 = 16 | 
•rôe
[2] * 4 & 12 : 0;

787 
•rôe
 =
ﬂm
 &&
cﬁ‹
 ? 
µu°©us
 |= 64 : 0;

794 
‰ame_buf„r
[
sˇny
 * 256 + 
dŸ
] =

795 
rgba
[
∑Àâe_øm
[
cﬁ‹
 ? 
∑Àâe
 | color : 0]];

799 i‡(
dŸ
 < 336) {

800 
shi·_hi
 *2, 
shi·_lo
 *2, 
shi·_©
 *= 4;

804 i‡(
dŸ
 % 8 == 7) {

805 
shi·_hi
 |
±b_hi
, 
shi·_lo
 |
±b_lo
, 
shi·_©
 |
©b
;

810 i‡(
dŸ
 == 256) {

811 
V
 = ((V & 7 << 12) != 7 << 12 ? V + 4096

812 : (
V
 & 992) == 928 ? V & 35871 ^ 2048

813 : (
V
 & 992) == 992 ? V & 35871

814 : 
V
 & 35871 | V + 32 & 992) &

817 
T
 & 1055;

822 i‡(
sˇny
 =-1 && 
dŸ
 > 279 && dot < 305)

823 
V
 = V & 33823 | 
T
 & 31712;

825 
h™dÀ_evíts
:

826 i‡(
sˇny
 =241 && 
dŸ
 == 1) {

828 
µu˘æ
 & 128 ? 
nmi
 = 1 : 0;

829 
µu°©us
 |= 128;

832 
	`døw_‰ame
(
‰ame_buf„r
 + 4096, 256, 224);

834 
evít_t
 
evít
; 
	`pﬁl_evít
(&event);)

835 
evít
.
ty≥
) {

836 
KEY_EVENT
: {

837 
uöt8_t
 
°©e
 = 
evít
.
key_evít
.state;

838 
evít
.
key_evít
.
keycode
) {

840 
key_°©e
[
INDEX_RIGHT
] = 
°©e
;

843 
key_°©e
[
INDEX_LEFT
] = 
°©e
;

846 
key_°©e
[
INDEX_DOWN
] = 
°©e
;

849 
key_°©e
[
INDEX_UP
] = 
°©e
;

852 
key_°©e
[
INDEX_RETURN
] = 
°©e
;

855 
key_°©e
[
INDEX_TAB
] = 
°©e
;

858 
key_°©e
[
INDEX_Z
] = 
°©e
;

861 
key_°©e
[
INDEX_X
] = 
°©e
;

866 
QUIT_EVENT
:

872 
sˇny
 =-1 &&
dŸ
 =1 ? 
µu°©us
 = 0 : 0;

877 ++
dŸ
 =341 ? dŸ = 0, 
sˇny
 = scany == 260 ? -1 : scany + 1 : 0;

880 
	}
}

	@tests/sound/sound.c

1 
	~<as£π.h
>

2 
	~<°dboﬁ.h
>

3 
	~<°döt.h
>

4 
	~<°dio.h
>

5 
	~<°dlib.h
>

6 
	~<°rög.h
>

10 
	mINIT_SOUND
,

11 
	mSHUTDOWN_SOUND
,

12 
	mPLAY_MUSIC
,

13 
	mPLAY_SFX
,

14 
	mSET_MUSIC_VOLUME
,

15 
	mSTOP_MUSIC
,

19 *
	md©a
;

20 
	msize
;

21 } 
	tmusicöfo_t
;

24 *
	md©a
;

25 
	msize
;

26 } 
	tsfxöfo_t
;

28 
	#MUSIC_MAX_SIZE
 65536

	)

29 
	#SFX_MAX_SIZE
 32768

	)

31 
sfxöfo_t
 *
	gsfx
;

32 
musicöfo_t
 *
	gmusic
;

34 *
	gsfx_§c
;

35 *
	gmusic_§c
;

36 
	gmusic_dñay
 = 30;

37 
	gmusic_lo›ög
 = 0;

38 
	gmusic_vﬁume
 = 3;

39 
	gsfx_vﬁume
 = 15;

42 
	mMUSIC
 = 1,

43 
	mSFX
 = 2,

44 
	mINCREASING_MUSIC_VOLUME
 = 4,

45 
	mSFX_REPEAT
 = 8,

47 
	gÊag
 = 0;

49 
	$∂ay_music
()

51 
ªque°_ty≥
 = 
PLAY_MUSIC
;

53 
a0
 
	`asm
("a0"Ë
ªque°_ty≥
;

54 
a1
 
	`asm
("a1"Ë(
uöçå_t
Ë
music
;

55 
a2
 
	`asm
("a2"Ë
music_vﬁume
;

56 
a3
 
	`asm
("a3"Ë
music_lo›ög
;

57 
a7
 
	`asm
("a7") = 0xD00D;

59 
asm
 vﬁ©ûe("sˇŒ" : "+r"(
a0
Ë: "r"(
a1
), "r"(
a2
), "r"(
a3
), "r"(
a7
));

60 
	}
}

62 
	$°›_music
()

64 
ªque°_ty≥
 = 
STOP_MUSIC
;

66 
a0
 
	`asm
("a0"Ë
ªque°_ty≥
;

67 
a7
 
	`asm
("a7") = 0xD00D;

69 
asm
 vﬁ©ûe("sˇŒ" : "+r"(
a0
Ë: "r"(
a7
));

70 
	}
}

72 
	$∂ay_sfx
()

74 
ªque°_ty≥
 = 
PLAY_SFX
;

76 
a0
 
	`asm
("a0"Ë
ªque°_ty≥
;

77 
a1
 
	`asm
("a1"Ë(
uöçå_t
Ë
sfx
;

78 
a2
 
	`asm
("a2"Ë
sfx_vﬁume
;

79 
a7
 
	`asm
("a7") = 0xD00D;

81 
asm
 vﬁ©ûe("sˇŒ" : "+r"(
a0
Ë: "r"(
a1
), "r"(
a2
), "r"(
a7
));

82 
	}
}

84 
	$£t_music_vﬁume
()

86 
ªque°_ty≥
 = 
SET_MUSIC_VOLUME
;

88 
a0
 
	`asm
("a0"Ë
ªque°_ty≥
;

89 
a1
 
	`asm
("a1"Ë
music_vﬁume
;

90 
a7
 
	`asm
("a7") = 0xD00D;

92 
asm
 vﬁ©ûe("sˇŒ" : "+r"(
a0
Ë: "r"(
a1
), "r"(
a7
));

93 
	}
}

99 
	$lﬂd_sfx
()

101 
sfx
 = 
	`mÆloc
((
sfxöfo_t
));

102 
	`as£π
(
sfx
);

103 
sfx
->
d©a
 = 
	`mÆloc
((
uöt8_t
Ë* 
SFX_MAX_SIZE
);

104 
	`as£π
(
sfx
->
d©a
);

105 
sfx
->
size
 = 5669;

107 
FILE
 *
sfx_fûe
 = 
	`f›í
(
sfx_§c
, "rb");

108 
	`as£π
(
sfx_fûe
);

109 
	`‰ód
(
sfx
->
d©a
, 5669, 1, 
sfx_fûe
);

110 
	`f˛o£
(
sfx_fûe
);

111 
	}
}

113 
	$u∆ﬂd_sfx
()

115 
	`‰ì
(
sfx
->
d©a
);

116 
	`‰ì
(
sfx
);

117 
	}
}

120 
	$lﬂd_music
()

122 
music
 = 
	`mÆloc
((
musicöfo_t
));

123 
	`as£π
(
music
);

124 
music
->
d©a
 = 
	`mÆloc
((
uöt8_t
Ë* 
MUSIC_MAX_SIZE
);

125 
	`as£π
(
music
->
d©a
);

126 
music
->
size
 = 17283;

128 
FILE
 *
music_fûe
 = 
	`f›í
(
music_§c
, "rb");

129 
	`as£π
(
music_fûe
);

130 
	`‰ód
(
music
->
d©a
, 17283, 1, 
music_fûe
);

131 
	`f˛o£
(
music_fûe
);

132 
	}
}

134 
	$u∆ﬂd_music
()

136 
	`‰ì
(
music
->
d©a
);

137 
	`‰ì
(
music
);

138 
	}
}

140 
	$öô_sound
()

142 
ªque°_ty≥
 = 
INIT_SOUND
;

144 
a0
 
	`asm
("a0"Ë
ªque°_ty≥
;

145 
a7
 
	`asm
("a7") = 0xBABE;

147 
asm
 vﬁ©ûe("sˇŒ" : "+r"(
a0
Ë: "r"(
a7
));

148 
	}
}

150 
	$shutdown_sound
()

152 
ªque°_ty≥
 = 
SHUTDOWN_SOUND
;

154 
a0
 
	`asm
("a0"Ë
ªque°_ty≥
;

155 
a7
 
	`asm
("a7") = 0xBABE;

157 
asm
 vﬁ©ûe("sˇŒ" : "+r"(
a0
Ë: "r"(
a7
));

158 
	}
}

161 
	$ußge
(c⁄° *
¥og
)

163 
	`Ârötf
(

164 
°dîr
,

182 
¥og
);

183 
	`exô
(1);

184 
	}
}

187 
boﬁ
 
	$∑r£_¨gs
(
¨gc
, **
¨gv
)

189 
i
 = 0; i < 
¨gc
; i++) {

190 i‡(!
	`°rcmp
(
¨gv
[
i
], "=m")) {

191 
music_§c
 = 
¨gv
[
i
 + 1];

192 
Êag
 |
MUSIC
;

193 } i‡(!
	`°rcmp
(
¨gv
[
i
], "=s")) {

194 
sfx_§c
 = 
¨gv
[
i
 + 1];

195 
Êag
 |
SFX
;

196 } i‡(!
	`°rcmp
(
¨gv
[
i
], "=d")) {

197 
music_dñay
 = (Ë
	`°πﬁ
(
¨gv
[
i
 + 1], 
NULL
, 10);

198 } i‡(!
	`°rcmp
(
¨gv
[
i
], "=upmv")) {

199 
Êag
 |
INCREASING_MUSIC_VOLUME
;

200 } i‡(!
	`°rcmp
(
¨gv
[
i
], "=srep")) {

201 
Êag
 |
SFX_REPEAT
;

202 } i‡(!
	`°rcmp
(
¨gv
[
i
], "=mv")) {

203 
music_vﬁume
 = (Ë
	`°πﬁ
(
¨gv
[
i
 + 1], 
NULL
, 10);

204 } i‡(!
	`°rcmp
(
¨gv
[
i
], "=sv")) {

205 
sfx_vﬁume
 = (Ë
	`°πﬁ
(
¨gv
[
i
 + 1], 
NULL
, 10);

206 } i‡(!
	`°rcmp
(
¨gv
[
i
], "=h")) {

207  
Ál£
;

211  
åue
;

212 
	}
}

215 
	$busy_lo›
(
n
)

217 
dñay
 = 
n
 * 10000000;

218 
öãrvÆ
 = 
dñay
 / (15 - 
music_vﬁume
);

220 
i
 = 0; i < 
dñay
; i++) {

221 i‡(
Êag
 & 
INCREASING_MUSIC_VOLUME
 && fœg & 
MUSIC
) {

222 i‡(!(
i
 % 
öãrvÆ
)) {

223 i‡(
music_vﬁume
 < 15) {

224 
music_vﬁume
++;

225 
	`£t_music_vﬁume
();

227 i‡(
Êag
 & 
SFX_REPEAT
 && fœg & 
SFX
)

228 
	`∂ay_sfx
();

232 
	}
}

234 
	$do_∂ay_sound
()

236 i‡(
Êag
 & 
MUSIC
)

237 
	`lﬂd_music
();

238 i‡(
Êag
 & 
SFX
)

239 
	`lﬂd_sfx
();

241 i‡(
Êag
 & 
MUSIC
) {

242 i‡(
Êag
 & 
SFX
)

243 
	`∂ay_sfx
();

244 
	`∂ay_music
();

245 
	`busy_lo›
(
music_dñay
);

246 
	`°›_music
();

247 } i‡(
Êag
 & 
SFX
) {

248 
	`∂ay_sfx
();

249 
	`busy_lo›
(2);

252 i‡(
Êag
 & 
MUSIC
)

253 
	`u∆ﬂd_music
();

254 i‡(
Êag
 & 
SFX
)

255 
	`u∆ﬂd_sfx
();

256 
	}
}

258 
	$maö
(
¨gc
, *
¨gv
[])

260 i‡(!
	`∑r£_¨gs
(
¨gc
, 
¨gv
))

261 
	`ußge
(
¨gv
[0]);

263 i‡(!(
Êag
 & 
MUSIC
 || fœg & 
SFX
)) {

264 
	`Ârötf
(
°dîr
, "AtÜeastá music or soundÉffect should be given\n");

265 
	`ußge
(
¨gv
[0]);

268 
	`öô_sound
();

269 
	`do_∂ay_sound
();

270 
	`shutdown_sound
();

273 
	}
}

	@tests/spirograph.c

8 
	~<m©h.h
>

9 
	~<°döt.h
>

10 
	~<°dio.h
>

11 
	~<°dlib.h
>

13 #i‚de‡
GL_FPS


14 
	#GL_FPS
 30

	)

17 #i‚de‡
GL_width


18 
	#GL_width
 80

	)

21 #i‚de‡
GL_height


22 
	#GL_height
 25

	)

30 
ölöe
 
	$GL_gŸoxy
(
x
, 
y
)

32 
	`¥ötf
("\033[%d;%dH", 
y
, 
x
);

33 
	}
}

43 
ölöe
 
	$GL_£çixñRGBhîe
(
uöt8_t
 
R
, uöt8_à
G
, uöt8_à
B
)

46 
	`¥ötf
("\033[48;2;%d;%d;%dm ", (Ë
R
, (Ë
G
, (Ë
B
);

47 
	}
}

58 
ölöe
 
	$GL_£t2pixñsRGBhîe
(
uöt8_t
 
r1
,

59 
uöt8_t
 
g1
,

60 
uöt8_t
 
b1
,

61 
uöt8_t
 
r2
,

62 
uöt8_t
 
g2
,

63 
uöt8_t
 
b2
)

65 i‡((
r2
 =
r1
Ë&& (
g2
 =
g1
Ë&& (
b2
 =
b1
)) {

66 
	`GL_£çixñRGBhîe
(
r1
, 
g1
, 
b1
);

68 
	`¥ötf
("\033[48;2;%d;%d;%dm", (Ë
r1
, (Ë
g1
, (Ë
b1
);

69 
	`¥ötf
("\033[38;2;%d;%d;%dm", (Ë
r2
, (Ë
g2
, (Ë
b2
);

73 
	`¥ötf
("\xE2\x96\x83");

75 
	}
}

77 
	#GL_RGB
(
R
, 
G
, 
B
Ë#R ";" #G ";" #B

	)

79 
ölöe
 
	$GL_£çixñIhîe
(c⁄° **
cm≠
, 
c
)

82 
	`¥ötf
("\033[48;2;%sm ", 
cm≠
[
c
]);

83 
	}
}

85 
ölöe
 
	$GL_£t2pixñsIhîe
(c⁄° **
cm≠
, 
c1
, 
c2
)

87 i‡(
c1
 =
c2
) {

88 
	`GL_£çixñIhîe
(
cm≠
, 
c1
);

90 
	`¥ötf
("\033[48;2;%sm", 
cm≠
[
c1
]);

91 
	`¥ötf
("\033[38;2;%sm", 
cm≠
[
c2
]);

95 
	`¥ötf
("\xE2\x96\x83");

97 
	}
}

103 
ölöe
 
	$GL_√wlöe
()

105 
	`¥ötf
("\033[38;2;0;0;0m");

106 
	`¥ötf
("\033[48;2;0;0;0m\n");

107 
	}
}

115 
ölöe
 
	$GL_£çixñRGB
(
x
, 
y
, 
uöt8_t
 
R
, uöt8_à
G
, uöt8_à
B
)

117 
	`GL_gŸoxy
(
x
, 
y
);

118 
	`GL_£çixñRGBhîe
(
R
, 
G
, 
B
);

119 
	}
}

124 
ölöe
 
	$GL_ª°‹e_deÁu…_cﬁ‹s
()

126 
	`¥ötf
(

130 
	}
}

135 
ölöe
 
	$GL_˛ór
()

137 
	`GL_ª°‹e_deÁu…_cﬁ‹s
();

138 
	`¥ötf
("\033[2J");

139 
	}
}

145 
ölöe
 
	$GL_home
()

147 
	`¥ötf
("\033[H");

148 
	}
}

154 
ölöe
 
	$GL_öô
()

156 
	`¥ötf
("\033[?25l");

157 
	`GL_home
();

158 
	`GL_˛ór
();

159 
	}
}

164 
ölöe
 
	$GL_ãrmö©e
()

166 
	`GL_ª°‹e_deÁu…_cﬁ‹s
();

167 
	`GL_gŸoxy
(0, 
GL_height
);

168 
	`¥ötf
("\033[?25h");

169 
	}
}

174 
ölöe
 
	$GL_sw≠buf„rs
()

176 #ifde‡
__löux__


177 
	`u¶ìp
(1000000 / 
GL_FPS
);

179 
	}
}

182 *
	tGL_pixñfunc_RGB
)(
	tx
, 
	ty
, 
	tuöt8_t
 *
	tr
, uöt8_à*
	tg
, uöt8_à*
	tb
);

183 (*
	tGL_pixñfunc_RGBf
)(
	tx
, 
	ty
, *
	tr
, *
	tg
, *
	tb
);

193 
ölöe
 
	$GL_sˇn_RGB
(
width
, 
height
, 
GL_pixñfunc_RGB
 
do_pixñ
)

195 
uöt8_t
 
r1
, 
g1
, 
b1
;

196 
uöt8_t
 
r2
, 
g2
, 
b2
;

197 
	`GL_home
();

198 
j
 = 0; j < 
height
; j += 2) {

199 
i
 = 0; i < 
width
; i++) {

200 
	`do_pixñ
(
i
, 
j
, &
r1
, &
g1
, &
b1
);

201 
	`do_pixñ
(
i
, 
j
 + 1, &
r2
, &
g2
, &
b2
);

202 
	`GL_£t2pixñsRGBhîe
(
r1
, 
g1
, 
b1
, 
r2
, 
g2
, 
b2
);

203 i‡(
i
 =
width
 - 1) {

204 
	`GL_√wlöe
();

208 
	}
}

216 
ölöe
 
uöt8_t
 
	$GL_·oi
(
f
)

218 
f
 = (f < 0.0f) ? 0.0f : f;

219 
f
 = (f > 1.0f) ? 1.0f : f;

220  (
uöt8_t
Ë(255.0‡* 
f
);

221 
	}
}

231 
ölöe
 
	$GL_sˇn_RGBf
(
width
,

232 
height
,

233 
GL_pixñfunc_RGBf
 
do_pixñ
)

235 
‰1
, 
fg1
, 
fb1
;

236 
‰2
, 
fg2
, 
fb2
;

237 
uöt8_t
 
r1
, 
g1
, 
b1
;

238 
uöt8_t
 
r2
, 
g2
, 
b2
;

239 
	`GL_home
();

240 
j
 = 0; j < 
height
; j += 2) {

241 
i
 = 0; i < 
width
; i++) {

242 
	`do_pixñ
(
i
, 
j
, &
‰1
, &
fg1
, &
fb1
);

243 
r1
 = 
	`GL_·oi
(
‰1
);

244 
g1
 = 
	`GL_·oi
(
fg1
);

245 
b1
 = 
	`GL_·oi
(
fb1
);

246 
	`do_pixñ
(
i
, 
j
 + 1, &
‰2
, &
fg2
, &
fb2
);

247 
r2
 = 
	`GL_·oi
(
‰2
);

248 
g2
 = 
	`GL_·oi
(
fg2
);

249 
b2
 = 
	`GL_·oi
(
fb2
);

250 
	`GL_£t2pixñsRGBhîe
(
r1
, 
g1
, 
b1
, 
r2
, 
g2
, 
b2
);

251 i‡(
i
 =
width
 - 1) {

252 
	`GL_√wlöe
();

256 
	}
}

258 
	#INSIDE
 0

	)

259 
	#LEFT
 1

	)

260 
	#RIGHT
 2

	)

261 
	#BOTTOM
 4

	)

262 
	#TOP
 8

	)

264 
	#XMIN
 0

	)

265 
	#XMAX
 (
GL_width
 - 1)

	)

266 
	#YMIN
 0

	)

267 
	#YMAX
 (
GL_height
 - 1)

	)

269 
	#code
(
x
, 
y
) \

270 ((
x
Ë< 
XMIN
Ë| (((xË> 
XMAX
Ë<< 1Ë| (((
y
Ë< 
YMIN
) << 2) | \

271 (((
y
Ë> 
YMAX
Ë<< 3)

	)

273 
ölöe
 
	$GL_löe
(
x1
, 
y1
, 
x2
, 
y2
, 
R
, 
G
, 
B
)

275 
x
, 
y
, 
dx
, 
dy
, 
sy
, 
tmp
;

278 
code1
 = 
	`code
(
x1
, 
y1
);

279 
code2
 = 
	`code
(
x2
, 
y2
);

280 
codeout
;

284 i‡(
code1
 =0 && 
code2
 == 0)

288 i‡(
code1
 & 
code2
)

292 
codeout
 = 
code1
 ? code1 : 
code2
;

295 i‡(
codeout
 & 
TOP
) {

296 
x
 = 
x1
 + (
x2
 - x1Ë* (
YMAX
 - 
y1
Ë/ (
y2
 - y1);

297 
y
 = 
YMAX
;

298 } i‡(
codeout
 & 
BOTTOM
) {

299 
x
 = 
x1
 + (
x2
 - x1Ë* (
YMIN
 - 
y1
Ë/ (
y2
 - y1);

300 
y
 = 
YMIN
;

301 } i‡(
codeout
 & 
RIGHT
) {

302 
y
 = 
y1
 + (
y2
 - y1Ë* (
XMAX
 - 
x1
Ë/ (
x2
 - x1);

303 
x
 = 
XMAX
;

304 } i‡(
codeout
 & 
LEFT
) {

305 
y
 = 
y1
 + (
y2
 - y1Ë* (
XMIN
 - 
x1
Ë/ (
x2
 - x1);

306 
x
 = 
XMIN
;

310 i‡(
codeout
 =
code1
) {

311 
x1
 = 
x
;

312 
y1
 = 
y
;

313 
code1
 = 
	`code
(
x1
, 
y1
);

315 
x2
 = 
x
;

316 
y2
 = 
y
;

317 
code2
 = 
	`code
(
x2
, 
y2
);

322 i‡(
x2
 < 
x1
) {

323 
tmp
 = 
x2
;

324 
x2
 = 
x1
;

325 
x1
 = 
tmp
;

326 
tmp
 = 
y2
;

327 
y2
 = 
y1
;

328 
y1
 = 
tmp
;

332 
dy
 = 
y2
 - 
y1
;

333 
sy
 = 1;

334 i‡(
dy
 < 0) {

335 
sy
 = -1;

336 
dy
 = -dy;

339 
dx
 = 
x2
 - 
x1
;

341 
x
 = 
x1
;

342 
y
 = 
y1
;

344 i‡(
dy
 > 
dx
) {

345 
ex
 = (
dx
 << 1Ë- 
dy
;

346 
u
 = 0; u < 
dy
; u++) {

347 
	`GL_£çixñRGB
(
x
, 
y
, 
R
, 
G
, 
B
);

348 
y
 +
sy
;

349 i‡(
ex
 >= 0) {

350 
x
++;

351 
ex
 -
dy
 << 1;

352 
	`GL_£çixñRGB
(
x
, 
y
, 
R
, 
G
, 
B
);

354 
ex
 >= 0) {

355 
x
++;

356 
ex
 -
dy
 << 1;

357 
	`putch¨
(' ');

359 
ex
 +
dx
 << 1;

362 
ey
 = (
dy
 << 1Ë- 
dx
;

363 
u
 = 0; u < 
dx
; u++) {

364 
	`GL_£çixñRGB
(
x
, 
y
, 
R
, 
G
, 
B
);

365 
x
++;

366 
ey
 >= 0) {

367 
y
 +
sy
;

368 
ey
 -
dx
 << 1;

369 
	`GL_£çixñRGB
(
x
, 
y
, 
R
, 
G
, 
B
);

371 
ey
 +
dy
 << 1;

374 
	}
}

377 c⁄° 
	gsöèb
[64] = {

386 
	$maö
()

388 
	`GL_öô
();

389 
	`GL_˛ór
();

390 
‰ame
 = 0;

392 
±s
[8];

394 i‡(
‰ame
 & (1 << 6))

395 
	`GL_˛ór
();

397 
a
 = 
‰ame
 << 1;

398 
sˇlög
 = 
söèb
[
‰ame
 & 63] + 200;

400 
Ux
 = (
söèb
[
a
 & 63] * 
sˇlög
) >> 12;

401 
Uy
 = (
söèb
[(
a
 + 16Ë& 63] * 
sˇlög
) >> 12;

402 
Vx
 = -
Uy
;

403 
Vy
 = 
Ux
;

405 
±s
[0] = (
GL_width
 / 2Ë+ 
Ux
 + 
Vx
;

406 
±s
[1] = (
GL_height
 / 2Ë+ 
Uy
 + 
Vy
;

408 
±s
[2] = (
GL_width
 / 2Ë- 
Ux
 + 
Vx
;

409 
±s
[3] = (
GL_height
 / 2Ë- 
Uy
 + 
Vy
;

411 
±s
[4] = (
GL_width
 / 2Ë- 
Ux
 - 
Vx
;

412 
±s
[5] = (
GL_height
 / 2Ë- 
Uy
 - 
Vy
;

414 
±s
[6] = (
GL_width
 / 2Ë+ 
Ux
 - 
Vx
;

415 
±s
[7] = (
GL_height
 / 2Ë+ 
Uy
 - 
Vy
;

417 
R
 = 
‰ame
 & 255;

418 
G
 = (
‰ame
 >> 2) & 255;

419 
B
 = 255 - 
R
;

421 
	`GL_löe
(
±s
[0],Öts[1],Öts[2],Öts[3], 
R
, 
G
, 
B
);

422 
	`GL_löe
(
±s
[2],Öts[3],Öts[4],Öts[5], 
R
, 
G
, 
B
);

423 
	`GL_löe
(
±s
[4],Öts[5],Öts[6],Öts[7], 
R
, 
G
, 
B
);

424 
	`GL_löe
(
±s
[6],Öts[7],Öts[0],Öts[1], 
R
, 
G
, 
B
);

426 
	`GL_sw≠buf„rs
();

428 i‡(++
‰ame
 > 14000)

431 
	`GL_ãrmö©e
();

432 
	}
}

	@tests/stream.c

39 
	~<Êﬂt.h
>

40 
	~<limôs.h
>

41 
	~<m©h.h
>

42 
	~<°dio.h
>

43 
	~<sys/time.h
>

44 
	~<uni°d.h
>

86 
	#STREAM_ARRAY_SIZE
 10000000

	)

97 #i‡
deföed
(
NTIMES
) && NTIMES <= 1

98 #unde‡
NTIMES


100 #i‚de‡
NTIMES


101 
	#NTIMES
 7

	)

112 #i‚de‡
OFFSET


113 
	#OFFSET
 0

	)

139 
	#HLINE
 "-------------------------------------------------------------\n"

	)

141 #i‚de‡
MIN


142 
	#MIN
(
x
, 
y
Ë((xË< (yË? (xË: (y))

	)

144 #i‚de‡
MAX


145 
	#MAX
(
x
, 
y
Ë((xË> (yË? (xË: (y))

	)

148 #i‚de‡
STREAM_TYPE


149 
	#STREAM_TYPE
 

	)

151 
	#ALIGNED_STREAM
 
	`__©åibuã__
((
	`Æig√d
(32)))

	)

153 
STREAM_TYPE
 
	ga
[
STREAM_ARRAY_SIZE
 + 
OFFSET
] 
	gALIGNED_STREAM
,

154 
	gb
[
STREAM_ARRAY_SIZE
 + 
OFFSET
] 
	gALIGNED_STREAM
,

155 
	gc
[
STREAM_ARRAY_SIZE
 + 
OFFSET
] 
	gALIGNED_STREAM
;

157 
	gavgtime
[4] = {0}, 
	gmaxtime
[4] = {0},

158 
	gmötime
[4] = {
FLT_MAX
, FLT_MAX, FLT_MAX, FLT_MAX};

160 *
	gœbñ
[4] = {

163 
	gbyãs
[4] = {2 * (
STREAM_TYPE
Ë* 
STREAM_ARRAY_SIZE
,

164 2 * (
STREAM_TYPE
Ë* 
STREAM_ARRAY_SIZE
,

165 3 * (
STREAM_TYPE
Ë* 
STREAM_ARRAY_SIZE
,

166 3 * (
STREAM_TYPE
Ë* 
STREAM_ARRAY_SIZE
};

168 
my£c⁄d
();

169 
checkSTREAMªsu…s
();

171 
	$maö
()

173 
qu™tum
, 
	`checktick
();

174 
ByãsPîW‹d
;

175 
k
;

176 
ssize_t
 
j
;

177 
STREAM_TYPE
 
sˇœr
;

178 
t
, 
times
[4][
NTIMES
];

182 
	`¥ötf
(
HLINE
);

183 
	`¥ötf
("STREAM version $Revision: 5.10 $\n");

184 
	`¥ötf
(
HLINE
);

185 
ByãsPîW‹d
 = (
STREAM_TYPE
);

186 
	`¥ötf
("Thi†sy°em u£†%d byã†≥∏¨øyÉÀmít.\n", 
ByãsPîW‹d
);

188 
	`¥ötf
(
HLINE
);

189 #ifde‡
N


190 
	`¥ötf
("***** WARNING: ******\n");

191 
	`¥ötf
(

194 
	`¥ötf
(

197 
	`¥ötf
(" RevertingÅo default value of STREAM_ARRAY_SIZE=%llu\n",

198 (Ë
STREAM_ARRAY_SIZE
);

199 
	`¥ötf
("***** WARNING: ******\n");

202 
	`¥ötf
("Array size = %llu (elements), Offset = %d (elements)\n",

203 (Ë
STREAM_ARRAY_SIZE
, 
OFFSET
);

204 
	`¥ötf
(

206 
ByãsPîW‹d
 * ((Ë
STREAM_ARRAY_SIZE
 / 1024.0 / 1024.0),

207 
ByãsPîW‹d
 * ((Ë
STREAM_ARRAY_SIZE
 / 1024.0 / 1024.0 / 1024.0));

208 
	`¥ötf
("Total memoryÑequired = %.1f MiB (= %.1f GiB).\n",

209 (3.0 * 
ByãsPîW‹d
Ë* ((Ë
STREAM_ARRAY_SIZE
 / 1024.0 / 1024.),

210 (3.0 * 
ByãsPîW‹d
) *

211 ((Ë
STREAM_ARRAY_SIZE
 / 1024.0 / 1024. / 1024.));

212 
	`¥ötf
("Each kî√»wû»bêexecuãd %dÅimes.\n", 
NTIMES
);

213 
	`¥ötf
(

215 
	`¥ötf
(" will be usedÅo computeÅheÑeported bandwidth.\n");

218 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++) {

219 
a
[
j
] = 1.0;

220 
b
[
j
] = 2.0;

221 
c
[
j
] = 0.0;

224 
	`¥ötf
(
HLINE
);

226 i‡((
qu™tum
 = 
	`checktick
()) >= 1)

227 
	`¥ötf
(

230 
qu™tum
);

232 
	`¥ötf
(

235 
qu™tum
 = 1;

238 
t
 = 
	`my£c⁄d
();

239 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++)

240 
a
[
j
] = 2.0E0 *á[j];

241 
t
 = 1.0E6 * (
	`my£c⁄d
() -Å);

243 
	`¥ötf
(

246 (Ë
t
);

247 
	`¥ötf
(" (%d clockÅicks)\n", (Ë(
t
 / 
qu™tum
));

248 
	`¥ötf
("IncreaseÅhe size ofÅheárrays ifÅhis showsÅhat\n");

249 
	`¥ötf
("youáreÇot gettingátÜeast 20 clockÅicksÖerÅest.\n");

251 
	`¥ötf
(
HLINE
);

253 
	`¥ötf
("WARNING -- Theábove is onlyáÑough guideline.\n");

254 
	`¥ötf
("For bestÑesults,Ölease be sure you knowÅhe\n");

255 
	`¥ötf
("precision of your systemÅimer.\n");

256 
	`¥ötf
(
HLINE
);

260 
sˇœr
 = 3.0;

261 
k
 = 0; k < 
NTIMES
; k++) {

262 
times
[0][
k
] = 
	`my£c⁄d
();

263 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++)

264 
c
[
j
] = 
a
[j];

265 
times
[0][
k
] = 
	`my£c⁄d
() -Åimes[0][k];

267 
times
[1][
k
] = 
	`my£c⁄d
();

268 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++)

269 
b
[
j
] = 
sˇœr
 * 
c
[j];

270 
times
[1][
k
] = 
	`my£c⁄d
() -Åimes[1][k];

272 
times
[2][
k
] = 
	`my£c⁄d
();

273 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++)

274 
c
[
j
] = 
a
[j] + 
b
[j];

275 
times
[2][
k
] = 
	`my£c⁄d
() -Åimes[2][k];

277 
times
[3][
k
] = 
	`my£c⁄d
();

278 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++)

279 
a
[
j
] = 
b
[j] + 
sˇœr
 * 
c
[j];

280 
times
[3][
k
] = 
	`my£c⁄d
() -Åimes[3][k];

285 
k
 = 1; k < 
NTIMES
; k++)

287 
j
 = 0; j < 4; j++) {

288 
avgtime
[
j
] =ávgtime[j] + 
times
[j][
k
];

289 
mötime
[
j
] = 
	`MIN
(mötime[j], 
times
[j][
k
]);

290 
maxtime
[
j
] = 
	`MAX
(maxtime[j], 
times
[j][
k
]);

294 
	`¥ötf
("Function Best Rate MB/s AvgÅime MinÅime MaxÅime\n");

295 
j
 = 0; j < 4; j++) {

296 
avgtime
[
j
] =ávgtime[j] / (Ë(
NTIMES
 - 1);

298 
	`¥ötf
("%s%12.1‡ %11.6‡ %11.6‡ %11.6f\n", 
œbñ
[
j
],

299 1.0E-06 * 
byãs
[
j
] / 
mötime
[j], 
avgtime
[j], mintime[j],

300 
maxtime
[
j
]);

302 
	`¥ötf
(
HLINE
);

305 
	`checkSTREAMªsu…s
();

306 
	`¥ötf
(
HLINE
);

309 
	}
}

311 
	#M
 20

	)

313 
	$checktick
()

315 
i
, 
möDñè
, 
Dñè
;

316 
t1
, 
t2
, 
timesfound
[
M
];

320 
i
 = 0; i < 
M
; i++) {

321 
t1
 = 
	`my£c⁄d
();

322 ((
t2
 = 
	`my£c⁄d
()Ë- 
t1
) < 1.0E-6)

324 
timesfound
[
i
] = 
t1
 = 
t2
;

333 
möDñè
 = 1000000;

334 
i
 = 1; i < 
M
; i++) {

335 
Dñè
 = (Ë(1.0E6 * (
timesfound
[
i
] -Åimesfound[i - 1]));

336 
möDñè
 = 
	`MIN
(möDñè, 
	`MAX
(
Dñè
, 0));

339  (
möDñè
);

340 
	}
}

345 
	~<sys/time.h
>

347 
	$my£c⁄d
()

349 
timevÆ
 
ç
;

350 
timez⁄e
 
tzp
;

352 (Ë
	`gëtimeofday
(&
ç
, &
tzp
);

353  ((Ë
ç
.
tv_£c
 + (Ëç.
tv_u£c
 * 1.e-6);

354 
	}
}

356 #i‚de‡
abs


357 
	#abs
(
a
Ë(◊Ë>0 ? (aË: -◊))

	)

359 
	$checkSTREAMªsu…s
()

361 
STREAM_TYPE
 
aj
, 
bj
, 
cj
, 
sˇœr
;

362 
STREAM_TYPE
 
aSumEº
, 
bSumEº
, 
cSumEº
;

363 
STREAM_TYPE
 
aAvgEº
, 
bAvgEº
, 
cAvgEº
;

364 
ïsû⁄
;

365 
ssize_t
 
j
;

366 
k
, 
õº
, 
îr
;

369 
aj
 = 1.0;

370 
bj
 = 2.0;

371 
cj
 = 0.0;

373 
aj
 = 2.0E0 *áj;

375 
sˇœr
 = 3.0;

376 
k
 = 0; k < 
NTIMES
; k++) {

377 
cj
 = 
aj
;

378 
bj
 = 
sˇœr
 * 
cj
;

379 
cj
 = 
aj
 + 
bj
;

380 
aj
 = 
bj
 + 
sˇœr
 * 
cj
;

384 
aSumEº
 = 0.0;

385 
bSumEº
 = 0.0;

386 
cSumEº
 = 0.0;

387 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++) {

388 
aSumEº
 +
	`abs
(
a
[
j
] - 
aj
);

389 
bSumEº
 +
	`abs
(
b
[
j
] - 
bj
);

390 
cSumEº
 +
	`abs
(
c
[
j
] - 
cj
);

394 
aAvgEº
 = 
aSumEº
 / (
STREAM_TYPE
Ë
STREAM_ARRAY_SIZE
;

395 
bAvgEº
 = 
bSumEº
 / (
STREAM_TYPE
Ë
STREAM_ARRAY_SIZE
;

396 
cAvgEº
 = 
cSumEº
 / (
STREAM_TYPE
Ë
STREAM_ARRAY_SIZE
;

398 i‡((
STREAM_TYPE
) == 4) {

399 
ïsû⁄
 = 1.e-6;

400 } i‡((
STREAM_TYPE
) == 8) {

401 
ïsû⁄
 = 1.e-13;

403 
	`¥ötf
("WEIRD: sizeof(STREAM_TYPEË%u\n", (
STREAM_TYPE
));

404 
ïsû⁄
 = 1.e-6;

407 
îr
 = 0;

408 i‡(
	`abs
(
aAvgEº
 / 
aj
Ë> 
ïsû⁄
) {

409 
îr
++;

410 
	`¥ötf
("Failed Validation onárrayá[], AvgRelAbsErr >Épsilon (%e)\n",

411 
ïsû⁄
);

412 
	`¥ötf
(" Ex≥˘ed VÆue: %e, AvgAbsEº: %e, AvgRñAbsEº: %e\n", 
aj
,

413 
aAvgEº
, 
	`abs
◊AvgEºË/ 
aj
);

414 
õº
 = 0;

415 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++) {

416 i‡(
	`abs
(
a
[
j
] / 
aj
 - 1.0Ë> 
ïsû⁄
) {

417 
õº
++;

418 #ifde‡
VERBOSE


419 i‡(
õº
 < 10) {

420 
	`¥ötf
(

423 
j
, 
aj
, 
a
[j], 
	`abs
(◊j -á[j]Ë/ 
aAvgEº
));

428 
	`¥ötf
(" F‹áºayá[], %dÉº‹†wîêfound.\n", 
õº
);

430 i‡(
	`abs
(
bAvgEº
 / 
bj
Ë> 
ïsû⁄
) {

431 
îr
++;

432 
	`¥ötf
("Failed Validation onárray b[], AvgRelAbsErr >Épsilon (%e)\n",

433 
ïsû⁄
);

434 
	`¥ötf
(" Ex≥˘ed VÆue: %e, AvgAbsEº: %e, AvgRñAbsEº: %e\n", 
bj
,

435 
bAvgEº
, 
	`abs
(bAvgEºË/ 
bj
);

436 
	`¥ötf
(" AvgRñAbsEº > Epsû⁄ (%e)\n", 
ïsû⁄
);

437 
õº
 = 0;

438 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++) {

439 i‡(
	`abs
(
b
[
j
] / 
bj
 - 1.0Ë> 
ïsû⁄
) {

440 
õº
++;

441 #ifde‡
VERBOSE


442 i‡(
õº
 < 10) {

443 
	`¥ötf
(

446 
j
, 
bj
, 
b
[j], 
	`abs
((bj - b[j]Ë/ 
bAvgEº
));

451 
	`¥ötf
(" F‹áºay b[], %dÉº‹†wîêfound.\n", 
õº
);

453 i‡(
	`abs
(
cAvgEº
 / 
cj
Ë> 
ïsû⁄
) {

454 
îr
++;

455 
	`¥ötf
("Failed Validation onárray c[], AvgRelAbsErr >Épsilon (%e)\n",

456 
ïsû⁄
);

457 
	`¥ötf
(" Ex≥˘ed VÆue: %e, AvgAbsEº: %e, AvgRñAbsEº: %e\n", 
cj
,

458 
cAvgEº
, 
	`abs
(cAvgEºË/ 
cj
);

459 
	`¥ötf
(" AvgRñAbsEº > Epsû⁄ (%e)\n", 
ïsû⁄
);

460 
õº
 = 0;

461 
j
 = 0; j < 
STREAM_ARRAY_SIZE
; j++) {

462 i‡(
	`abs
(
c
[
j
] / 
cj
 - 1.0Ë> 
ïsû⁄
) {

463 
õº
++;

464 #ifde‡
VERBOSE


465 i‡(
õº
 < 10) {

466 
	`¥ötf
(

469 
j
, 
cj
, 
c
[j], 
	`abs
((cj - c[j]Ë/ 
cAvgEº
));

474 
	`¥ötf
(" F‹áºay c[], %dÉº‹†wîêfound.\n", 
õº
);

476 i‡(
îr
 == 0) {

477 
	`¥ötf
(

479 
ïsû⁄
);

481 #ifde‡
VERBOSE


482 
	`¥ötf
("Results Validation Verbose Results: \n");

483 
	`¥ötf
(" Ex≥˘edá(1), b(1), c(1): %‡%‡%‡\n", 
aj
, 
bj
, 
cj
);

484 
	`¥ötf
(" Ob£rvedá(1), b(1), c(1): %‡%‡%‡\n", 
a
[1], 
b
[1], 
c
[1]);

485 
	`¥ötf
(" Rñ Eº‹†⁄á, b, c: %ê%ê%ê\n", 
	`abs
(
aAvgEº
 / 
aj
),

486 
	`abs
(
bAvgEº
 / 
bj
),ábs(
cAvgEº
 / 
cj
));

488 
	}
}

	@tests/system/main.c

1 
	#SECTION_TEXT_MAIN
 
	`__©åibuã__
((
	`£˘i⁄
(".ãxt.maö")))

	)

2 
	#SECTION_DATA_MAIN
 
	`__©åibuã__
((
	`£˘i⁄
(".d©a.maö")))

	)

3 
	#SECTION_BSS_MAIN
 
	`__©åibuã__
((
	`£˘i⁄
(".bss.maö")))

	)

5 
	#¥öt°r
(
±r
, 
Àngth
) \

7 
asm
 volatile( \

14 : "r"(
±r
), "r"(
Àngth
) \

16 } 0)

	)

18 
	#TEST_OUTPUT
(
msg
, 
Àngth
Ë
	`¥öt°r
(msg,Üígth)

	)

20 
	#TEST_LOGGER
(
msg
) \

22 
_msg
[] = 
msg
; \

23 
	`TEST_OUTPUT
(
_msg
, (_msg)); \

24 }

	)

26 
	#SUCCESS
 0

	)

27 
	#FAIL
 1

	)

29 
__©åibuã__
((
£˘i⁄
(".my°rög"))Ëc⁄° 
	g∑geÁu…_lﬂd_°r
[] =

32 
SECTION_TEXT_MAIN
 
	$maö
()

35 
x
 = 100;

36 
y
 = 200;

37 
z
 = 
x
 + 
y
;

38 
	`TEST_LOGGER
("INSTRUCTION FETCH PAGE FAULT TEST PASSED!\n");

41 
buf
[8];

43 
i
 = 0; i < 8; i++) {

44 
buf
[
i
] = 0;

47 *
qå
 = 0x1000;

49 
i
 = 0; i < 8; i++) {

50 
qå
 = 0x1000;

51 
buf
[
i
] = *(
qå
 + i);

54 
i
 = 0; i < 8; i++) {

55 i‡(
buf
[
i
] !*(
qå
 + i)) {

56 
	`TEST_LOGGER
("[LOAD PAGE FAULT TEST]Ñv32emu stringÇot match\n")

57 
	`_exô
(
FAIL
);

60 
	`TEST_LOGGER
("LOAD PAGE FAULT TEST PASSED!\n");

64 
i
 = 0; i < 8; i++) {

65 
buf
[
i
] = 0;

68 *
±r
 = 0x2000;

69 *
±r
 = 'r';

70 
±r
 = 0x2000;

71 *(
±r
 + 1) = 'v';

72 
±r
 = 0x2000;

73 *(
±r
 + 2) = '3';

74 
±r
 = 0x2000;

75 *(
±r
 + 3) = '2';

76 
±r
 = 0x2000;

77 *(
±r
 + 4) = 'e';

78 
±r
 = 0x2000;

79 *(
±r
 + 5) = 'm';

80 
±r
 = 0x2000;

81 *(
±r
 + 6) = 'u';

82 
±r
 = 0x2000;

83 *(
±r
 + 7) = '\0';

85 
i
 = 0; i < 8; i++) {

86 
buf
[
i
] = *(
±r
 + i);

89 
i
 = 0; i < 8; i++) {

90 i‡(
buf
[
i
] !*(
±r
 + i)) {

91 
	`TEST_LOGGER
("[STORE PAGE FAULT TEST]Ñv32emu stringÇot match\n")

92 
	`_exô
(
FAIL
);

95 
	`TEST_LOGGER
("STORE PAGE FAULT TEST PASSED!\n");

97 
	`_exô
(
SUCCESS
);

98 
	}
}

	@tests/system/vm_setup.c

1 
	~<°d¨g.h
>

2 
	~<°ddef.h
>

3 
	~<°döt.h
>

5 #i‡!
deföed
(
__GNUC__
Ë|| !deföed(
__riscv
Ë|| 32 !
__riscv_xÀn


9 
	#SECTION_TEXT_VMSETUP
 
	`__©åibuã__
((
	`£˘i⁄
(".ãxt.vm_£tup")))

	)

10 
	#SECTION_DATA_VMSETUP
 
	`__©åibuã__
((
	`£˘i⁄
(".d©a.vm_£tup")))

	)

11 
	#SECTION_BSS_VMSETUP
 
	`__©åibuã__
((
	`£˘i⁄
(".bss.vm_£tup")))

	)

13 
	#as£π
(
x
) \

15 i‡(!
x
) { \

16 
	`¥ötf
("Assertion failed '%s'átÜine %d of '%s'\n", #x); \

17 
	`_exô
(1); \

19 } 0)

	)

21 
	#ªad_c§
(
ªg
) \

23 
uöt32_t
 
__tmp
; \

24 
asm
 vﬁ©ûe("c§∏%0, " #ªg : "Ù"(
__tmp
)); \

25 
__tmp
; \

26 })

	)

28 
	#wrôe_c§
(
ªg
, 
vÆ
Ë({ 
asm
 vﬁ©ûe("c§w " #ªg ", %0" ::"rK"(vÆ)); })

	)

30 
	#sw≠_c§
(
ªg
, 
vÆ
) \

32 
uöt32_t
 
__tmp
; \

33 
asm
 vﬁ©ûe("c§rw %0, " #ªg ", %1" : "Ù"(
__tmp
Ë: "rK"(
vÆ
)); \

34 
__tmp
; \

35 })

	)

37 
	#£t_c§
(
ªg
, 
bô
) \

39 
uöt32_t
 
__tmp
; \

40 
asm
 vﬁ©ûe("c§r†%0, " #ªg ", %1" : "Ù"(
__tmp
Ë: "rK"(
bô
)); \

41 
__tmp
; \

42 })

	)

44 
	#˛ór_c§
(
ªg
, 
bô
) \

46 
uöt32_t
 
__tmp
; \

47 
asm
 vﬁ©ûe("c§r¯%0, " #ªg ", %1" : "Ù"(
__tmp
Ë: "rK"(
bô
)); \

48 
__tmp
; \

49 })

	)

52 
uöt32_t
 
	mø
;

53 
uöt32_t
 
	m•
;

54 
uöt32_t
 
	mgp
;

55 
uöt32_t
 
	mç
;

56 
uöt32_t
 
	mt0
;

57 
uöt32_t
 
	mt1
;

58 
uöt32_t
 
	mt2
;

59 
uöt32_t
 
	ms0
;

60 
uöt32_t
 
	ms1
;

61 
uöt32_t
 
	ma0
;

62 
uöt32_t
 
	ma1
;

63 
uöt32_t
 
	ma2
;

64 
uöt32_t
 
	ma3
;

65 
uöt32_t
 
	ma4
;

66 
uöt32_t
 
	ma5
;

67 
uöt32_t
 
	ma6
;

68 
uöt32_t
 
	ma7
;

69 
uöt32_t
 
	ms2
;

70 
uöt32_t
 
	ms3
;

71 
uöt32_t
 
	ms4
;

72 
uöt32_t
 
	ms5
;

73 
uöt32_t
 
	ms6
;

74 
uöt32_t
 
	ms7
;

75 
uöt32_t
 
	ms8
;

76 
uöt32_t
 
	ms9
;

77 
uöt32_t
 
	ms10
;

78 
uöt32_t
 
	ms11
;

79 
uöt32_t
 
	mt3
;

80 
uöt32_t
 
	mt4
;

81 
uöt32_t
 
	mt5
;

82 
uöt32_t
 
	mt6
;

83 
uöt32_t
 
	m°©us
;

84 
uöt32_t
 
	mïc
;

85 
uöt32_t
 
	mbadvaddr
;

86 
uöt32_t
 
	mˇu£
;

87 } 
	tå≠‰ame_t
;

89 
	#SV32_MODE
 0x80000000

	)

90 
	#BARE_MODE
 0x00000000

	)

91 
	#PG_SHIFT
 12

	)

92 
	#PG_SIZE
 (1U << 12)

	)

93 
	#FREE_FRAME_BASE
 0x400000

	)

94 
	#MAX_TEST_PG
 32

	)

95 
	#MEGA_PG
 (
PG_SIZE
 << 10Ë

	)

97 
	#CAUSE_USER_ECALL
 (1U << 8)

	)

98 
	#CAUSE_SUPERVISOR_ECALL
 (1U << 9)

	)

99 
	#CAUSE_FETCH_PAGE_FAULT
 (1U << 12)

	)

100 
	#CAUSE_LOAD_PAGE_FAULT
 (1U << 13)

	)

101 
	#CAUSE_STORE_PAGE_FAULT
 (1U << 15)

	)

103 
	#SSTATUS_SUM
 (1U << 18)

	)

105 
	#PTE_V
 (1U)

	)

106 
	#PTE_R
 (1U << 1)

	)

107 
	#PTE_W
 (1U << 2)

	)

108 
	#PTE_X
 (1U << 3)

	)

109 
	#PTE_U
 (1U << 4)

	)

110 
	#PTE_G
 (1U << 5)

	)

111 
	#PTE_A
 (1U << 6)

	)

112 
	#PTE_D
 (1U << 7)

	)

114 
maö
();

115 
_°¨t
();

116 
u£r_íåy
();

117 
su≥rvis‹_å≠_íåy
();

118 
p›_tf
(
å≠‰ame_t
 *);

119 
_exô
(
°©us
);

121 
uöt32_t
 
	t±e_t
;

123 
±e_t
 
	maddr
;

124 *
	m√xt
;

125 } 
	t‰ìli°_t
;

127 
‰ìli°_t
 
	g‰ìli°_nodes
[
MAX_TEST_PG
] 
	gSECTION_BSS_VMSETUP
;

128 
‰ìli°_t
 *
SECTION_BSS_VMSETUP
 
	g‰ìli°_hód
;

129 
‰ìli°_t
 *
SECTION_BSS_VMSETUP
 
	g‰ìli°_èû
;

131 
	#l1±
 
±
[0]

	)

132 
	#u£r_l1±
 
±
[1]

	)

133 
	#NPT
 2

	)

134 
	#PTES_PER_PT
 (1U << 10)

	)

135 
	#PTE_PPN_SHIFT
 10

	)

136 
±e_t
 
	g±
[
NPT
][
PTES_PER_PT
] 
SECTION_BSS_VMSETUP


137 
__©åibuã__
((
Æig√d
(
PG_SIZE
)));

139 
	#MASK
(
n
Ë(~((~0U << (n))))

	)

140 
	#∑2kva
(
x
Ë((
±e_t
Ë(xË- (±e_tË(
_°¨t
Ë-
MEGA_PG
)

	)

141 
	#uva2kva
(
x
Ë((
±e_t
Ë(xË-
MEGA_PG
)

	)

143 *
SECTION_TEXT_VMSETUP
 
	$mem˝y
(*
±r
, *
§c
, 
size_t
 
Àn
)

145 
uöt32_t
 *
w‹d_±r
 = 
±r
;

146 
uöt32_t
 *
w‹d_§c
 = 
§c
;

148 
Àn
 >= 4) {

149 *
w‹d_±r
++ = *
w‹d_§c
++;

150 
Àn
 -= 4;

153 *
byã_±r
 = (*Ë
w‹d_±r
;

154 *
byã_§c
 = (*Ë
w‹d_§c
;

155 
Àn
--) {

156 *
byã_±r
++ = *
byã_§c
++;

159  
±r
;

160 
	}
}

162 *
SECTION_TEXT_VMSETUP
 
	$mem£t
(*
±r
, 
vÆ
, 
size_t
 
Àn
)

164 
uöt32_t
 *
w‹d_±r
 = 
±r
;

165 
uöt32_t
 
wrôe_w‹d
 = (Ë
vÆ
;

166 
wrôe_w‹d
 |= write_word << 8;

167 
wrôe_w‹d
 |= write_word << 16;

169 
Àn
 >= 4) {

170 *
w‹d_±r
++ = 
wrôe_w‹d
;

171 
Àn
 -= 4;

174 *
byã_±r
 = (*Ë
w‹d_±r
;

175 
Àn
--) {

176 *
byã_±r
++ = 
vÆ
;

179  
±r
;

180 
	}
}

182 
	#SYSCALL_WRITE
 64

	)

183 
SECTION_TEXT_VMSETUP
 
	$putch¨
(
ch
)

185 
sysˇŒ_ƒ
 = 
SYSCALL_WRITE
;

186 
asm
 volatile(

193 : "r"(
sysˇŒ_ƒ
), "r"(&
ch
)

197 
	}
}

199 
SECTION_TEXT_VMSETUP
 
	$_puts
(c⁄° *
s
)

201 
ªs
 = 0;

202 *
s
) {

203 
	`putch¨
(*(
s
++));

204 ++
ªs
;

207  
ªs
;

208 
	}
}

210 
SECTION_TEXT_VMSETUP
 
	$puts
(c⁄° *
s
)

212 
ªs
 = 1;

213 
ªs
 +
	`_puts
(
s
);

214 
	`putch¨
('\n');

216  
ªs
;

217 
	}
}

219 *
SECTION_TEXT_VMSETUP
 
	$ôﬂ
(
uöt32_t
 
vÆue
,

220 
ba£
,

221 
mö_Àn
,

222 
fûl_ch¨
)

224 
digôÆs
[16] = {'0', '1', '2', '3', '4', '5', '6', '7',

226 
°r
[64];

227 *
±r
 = 
°r
 + 63;

228 
tmp
;

229 *
±r
 = 0;

231 i‡(!
vÆue
)

232 *--
±r
 = 
fûl_ch¨
;

234 *--
±r
 = 
digôÆs
[
vÆue
 % 
ba£
];

235 
vÆue
 /
ba£
;

236 } --
mö_Àn
 > 0 || 
vÆue
);

238  
±r
;

239 
	}
}

241 
SECTION_TEXT_VMSETUP
 
	$¥ötf
(c⁄° *
f‹m©
, ...)

243 c⁄° *
±r
 = 
f‹m©
;

244 
ªs
 = 0;

246 
va_li°
 
va
;

247 
	`va_°¨t
(
va
, 
f‹m©
);

249 *
±r
) {

250 i‡(*
±r
 == '%') {

251 
mö_Àn
 = 0;

252 
fûl_ch¨
 = 0;

253 
lo›1
:

254 *(++
±r
)) {

256 
	`as£π
(!(
mö_Àn
 || 
fûl_ch¨
));

257 ++
ªs
;

258 
	`putch¨
(
	`va_¨g
(
va
, ));

261 
	`as£π
(!(
mö_Àn
 || 
fûl_ch¨
));

262 
ªs
 +
	`_puts
(
	`va_¨g
(
va
, const *));

265 
	`as£π
(!(!
fûl_ch¨
 ^ !
mö_Àn
));

266 
uöt32_t
 
n
 = 
	`va_¨g
(
va
, uint32_t);

267 
ªs
 +
	`_puts
(
	`ôﬂ
(
n
, 16, 
mö_Àn
, mö_À¿? 
fûl_ch¨
 : '0'));

270 
	`as£π
(!(!
fûl_ch¨
 ^ !
mö_Àn
));

271 
öt64_t
 
n
 = 
	`va_¨g
(
va
, int64_t);

272 i‡(
n
 < 0) {

273 ++
ªs
;

274 
	`putch¨
('-');

275 
n
 = -n;

277 
ªs
 +
	`_puts
(
	`ôﬂ
(
n
, 10, 
mö_Àn
, mö_À¿? 
fûl_ch¨
 : '0'));

280 ++
ªs
;

281 
	`putch¨
('%');

284 
	`as£π
(
fûl_ch¨
);

285 
mö_Àn
 *= 10;

286 
mö_Àn
 += 1;

287 
lo›1
;

289 
	`as£π
(
fûl_ch¨
);

290 
mö_Àn
 *= 10;

291 
mö_Àn
 += 2;

292 
lo›1
;

294 
	`as£π
(
fûl_ch¨
);

295 
mö_Àn
 *= 10;

296 
mö_Àn
 += 3;

297 
lo›1
;

299 
	`as£π
(
fûl_ch¨
);

300 
mö_Àn
 *= 10;

301 
mö_Àn
 += 4;

302 
lo›1
;

304 
	`as£π
(
fûl_ch¨
);

305 
mö_Àn
 *= 10;

306 
mö_Àn
 += 5;

307 
lo›1
;

309 
	`as£π
(
fûl_ch¨
);

310 
mö_Àn
 *= 10;

311 
mö_Àn
 += 6;

312 
lo›1
;

314 
	`as£π
(
fûl_ch¨
);

315 
mö_Àn
 *= 10;

316 
mö_Àn
 += 7;

317 
lo›1
;

319 
	`as£π
(
fûl_ch¨
);

320 
mö_Àn
 *= 10;

321 
mö_Àn
 += 8;

322 
lo›1
;

324 
	`as£π
(
fûl_ch¨
);

325 
mö_Àn
 *= 10;

326 
mö_Àn
 += 9;

327 
lo›1
;

329 
	`as£π
(!
mö_Àn
);

330 
fûl_ch¨
 = *
±r
;

331 
lo›1
;

334 ++
ªs
;

335 
	`putch¨
(*
±r
);

337 ++
±r
;

339  
ªs
;

340 
	}
}

342 
SECTION_TEXT_VMSETUP
 
	$h™dÀ_Áu…
(
uöt32_t
 
addr
, uöt32_à
ˇu£
)

344 
addr
 =ádd∏>> 
PG_SHIFT
 << PG_SHIFT;

345 
±e_t
 *
±e
 = 
u£r_l1±
 + ((
addr
 >> 
PG_SHIFT
Ë& 
	`MASK
(10));

348 
	`as£π
(
‰ìli°_hód
);

349 
±e_t
 
∑
 = 
‰ìli°_hód
->
addr
;

350 
‰ìli°_hód
 = fªñi°_hód->
√xt
;

351 *
±e
 = (
∑
 >> 
PG_SHIFT
 << 
PTE_PPN_SHIFT
Ë| 
PTE_A
 | 
PTE_U
 | 
PTE_R
 | 
PTE_W
 |

352 
PTE_X
 | 
PTE_V
;

353 i‡((1U << 
ˇu£
Ë=
CAUSE_STORE_PAGE_FAULT
)

354 *
±e
 |
PTE_D
;

357 
	`£t_c§
(
s°©us
, 
SSTATUS_SUM
);

359 
	`mem˝y
((
uöt32_t
 *Ë
addr
, (uöt32_à*Ë
	`uva2kva
◊ddr), 
PG_SIZE
);

361 
	`˛ór_c§
(
s°©us
, 
SSTATUS_SUM
);

362 
	}
}

364 
SECTION_TEXT_VMSETUP
 
	$h™dÀ_å≠
(
å≠‰ame_t
 *
tf
)

366 i‡((1U << 
tf
->
ˇu£
Ë=
CAUSE_FETCH_PAGE_FAULT
 ||

367 (1U << 
tf
->
ˇu£
Ë=
CAUSE_LOAD_PAGE_FAULT
 ||

368 (1U << 
tf
->
ˇu£
Ë=
CAUSE_STORE_PAGE_FAULT
) {

369 
	`h™dÀ_Áu…
(
tf
->
badvaddr
,Åf->
ˇu£
);

371 
	`as£π
(!"UnknownÉxception");

373 
	`p›_tf
(
tf
);

374 
	}
}

376 
SECTION_TEXT_VMSETUP
 
	$vm_boŸ
()

379 
l1±
[0] = ((
±e_t
Ë
u£r_l1±
 >> 
PG_SHIFT
 << 
PTE_PPN_SHIFT
Ë| 
PTE_V
;

384 
l1±
[
PTES_PER_PT
 - 1] = ((
±e_t
Ë
maö
 >> 
PG_SHIFT
 << 
PTE_PPN_SHIFT
) |

385 
PTE_V
 | 
PTE_R
 | 
PTE_W
 | 
PTE_X
 | 
PTE_A
 | 
PTE_D
;

388 
l1±
[
PTES_PER_PT
 >> 1] = ((
±e_t
Ë
_°¨t
 >> 
PG_SHIFT
 << 
PTE_PPN_SHIFT
) |

389 
PTE_V
 | 
PTE_R
 | 
PTE_W
 | 
PTE_X
 | 
PTE_A
 | 
PTE_D
;

392 
uöçå_t
 
ßç_vÆ
 = ((
±e_t
Ë&
l1±
 >> 
PG_SHIFT
Ë| 
SV32_MODE
;

393 
	`wrôe_c§
(
ßç
, 
ßç_vÆ
);

396 
	`wrôe_c§
(
°vec
, 
su≥rvis‹_å≠_íåy
);

397 
	`wrôe_c§
(
ss¸©ch
, 
	`ªad_c§
(
ms¸©ch
));

398 
	`wrôe_c§
(
medñeg
, 
CAUSE_FETCH_PAGE_FAULT
 | 
CAUSE_LOAD_PAGE_FAULT
 |

399 
CAUSE_STORE_PAGE_FAULT
);

401 
‰ìli°_hód
 = (*Ë&
‰ìli°_nodes
[0];

402 
‰ìli°_èû
 = &
‰ìli°_nodes
[
MAX_TEST_PG
 - 1];

403 
uöt32_t
 
i
 = 0; i < 
MAX_TEST_PG
; i++) {

404 
‰ìli°_nodes
[
i
].
addr
 = 
FREE_FRAME_BASE
 + i * 
PG_SIZE
;

405 
‰ìli°_nodes
[
i
].
√xt
 = &freelist_nodes[i + 1];

407 
‰ìli°_nodes
[
MAX_TEST_PG
 - 1].
√xt
 = 0;

409 
å≠‰ame_t
 
tf
;

410 
	`mem£t
(&
tf
, 0, (tf));

411 
tf
.
ïc
 = &
u£r_íåy
;

412 
	`p›_tf
(&
tf
);

413 
	}
}

	@tests/ticks.c

1 
	~<öây≥s.h
>

2 
	~<°döt.h
>

3 
	~<°dio.h
>

5 
uöt64_t
 
	tticks
;

6 
ölöe
 
ticks
 
	$gëticks
()

8 
uöt64_t
 
ªsu…
;

9 
uöt32_t
 
l
, 
h
, 
h2
;

10 
asm
 volatile(

18 : "Ù"(
h
), "Ù"(
l
), "Ù"(
h2
));

19 
ªsu…
 = (((
uöt64_t
Ë
h
Ë<< 32Ë| ((uöt64_tË
l
);

20  
ªsu…
;

21 
	}
}

23 
uöt64_t
 
	$fib
(
uöt64_t
 
n
)

25 i‡(
n
 <= 1)

26  
n
;

27  
	`fib
(
n
 - 1) + fib(n - 2);

28 
	}
}

30 
	$maö
()

32 
ticks
 
t0
 = 
	`gëticks
();

33 
	`fib
(19);

34 
ticks
 
t1
 = 
	`gëticks
();

35 
	`¥ötf
("ñ≠£d cy˛e: %" 
PRIu64
 "\n", 
t1
 - 
t0
);

37 
	}
}

	@tools/gen-jit-template.py

1 #!/
u§
/
bö
/
ív
 
pyth⁄3


4 
This
 
s¸ùt
 
£rves
 
as
 
a
 
code
 
gíî©‹
 
¸ótög
 
JIT
 codê
ãm∂©es


5 
ba£d
 
⁄
 
exi°ög
 
code
 
fûes
 
ö
 
	gthe
 '§c' 
	gdúe˘‹y
, 
ñimö©ög
 
the
 
√ed


6 
wrôög
 
du∂iˇãd
 
	gcode
.

9 
imp‹t
 
ª


10 
imp‹t
 
sys


12 
	gINSN
 = {

105 
EXT_LIST
 = ["Zifencei", "Zicsr", "EXT_M", "EXT_A", "EXT_F", "EXT_C"]

106 
	gSKIP_LIST
 = []

107 #check 
íabÀd
 
exãnsi⁄
 
ö
 
Makefûe


110 
def
 
	$∑r£_¨gv
(
EXT_LIST
, 
SKIP_LIST
):

111 
¨gv
 
ö
 
sys
.argv:

112 
¨gv
.
	`föd
("RV32_FEATURE_") != -1:

113 
ext
 = 
¨gv
[¨gv.
	`föd
("RV32_FEATURE_") + 13:-2]

114 
¨gv
[-1:] ="1" 
™d
 
EXT_LIST
.
	$cou¡
(
ext
):

115 
EXT_LIST
.
	$ªmove
(
ext
)

116 
ext
 
ö
 
EXT_LIST
:

117 
SKIP_LIST
 +
INSN
[
ext
]

118 "EXT_F" 
ö
 
EXT_LIST
 
‹
 "EXT_C" in EXT_LIST:

119 
SKIP_LIST
 +
INSN
["EXT_FC"]

121 
	$∑r£_¨gv
(
EXT_LIST
, 
SKIP_LIST
)

122 #¥ï¨ê
PROLOGUE


123 
ouçut
 = ""

124 
f
 = 
	`›í
('src/rv32_template.c', 'r')

125 
löes
 = 
f
.
	$ªad
()

127 
löes
 = 
ª
.
	`sub
(
r
'/\*[\s|\S]+?\*/', "",Üines)

128 #ªmovê
ex˚±i⁄
 
h™dÀr


129 
löes
 = 
ª
.
	`sub
(
r
'RV_EXC[\S]+?\([\S|\s]+?\);\s', "",Üines)

130 #cﬁÀ˘ 
fun˘i⁄s


131 
emuœã_funcs
 = 
ª
.
	`födÆl
(
r
'RVOP\([\s|\S]+?}\)', 
löes
)

132 
codegí_funcs
 = 
ª
.
	`födÆl
(
r
'GEN\([\s|\S]+?}\)', 
löes
)

133 
›
 = []

134 
im∂
 = []

135 
i
 
ö
 
	`ønge
(
	$Àn
(
emuœã_funcs
)):

136 
›
.
	`≠≥nd
(
emuœã_funcs
[
i
][5:emuœã_funcs[i].
	`föd
(',')].
	$°rù
())

137 
im∂
.
	$≠≥nd
(
codegí_funcs
[
i
])

139 
f
.
	$˛o£
()

141 
fõlds
 = {"imm", "pc", "rs1", "rs2", "rd", "shamt", "bønch_èkí", "bønch_u¡akí"
	}
}

142 
vút_ªgs
 = {"VR0", "VR1", "VR2"}

143 #gíî©ê
jô
 
ãm∂©e


144 
i
 
ö
 
ønge
(
	$Àn
(
›
)):

145 i‡(
nŸ
 
SKIP_LIST
.
	$cou¡
(
›
[
i
])):

146 
ouçut
 +
im∂
[
i
][0:4] + 
›
[i] + ", {"

147 
IRs
 = 
ª
.
	`födÆl
(
r
'[\s|\S]+?;', 
im∂
[
i
][5:])

149 
i
 
ö
 
	`ønge
(
	$Àn
(
IRs
)):

150 
IR
 = 
IRs
[
i
].
	`°rù
()[:-1]

151 
ôems
 = [
s
.
	$°rù
(Ë
s
 
ö
 
IR
.
	`•lô
(',')]

152 
asm
 = ""

153 
i
 
ö
 
	`ønge
(
	$Àn
(
ôems
)):

154 
ôems
[
i
] 
ö
 
fõlds
:

155 
ôems
[
i
] = "ir->" + items[i]

156 
ôems
[
i
] 
ö
 
vút_ªgs
:

157 
ôems
[
i
] = "vm_reg[" + items[i][-1] + "]"

158 
ôems
[
i
] == "TMP":

159 
ôems
[
i
] = "temp_reg"

160 
ôems
[0] == "alu32imm":

161 
	`Àn
(
ôems
) == 8:

162 
asm
 = "emô_Æu32_imm{}(°©e, {}, {}, {}, ({}{}_tË{});".
	$f‹m©
(

163 
ôems
[1], items[2], items[3], items[4], items[5], items[6], items[7])

164 
ñif
 
	`Àn
(
ôems
) == 7:

165 
asm
 = "emô_Æu32_imm{}(°©e, {}, {}, {}, {} & {});".
	$f‹m©
(

166 
ôems
[1], items[2], items[3], items[4], items[5], items[6])

168 
asm
 = "emô_Æu32_imm{}(°©e, {}, {}, {}, {});".
	$f‹m©
(

169 
ôems
[1], items[2], items[3], items[4], items[5])

170 
ñif
 
ôems
[0] == "alu64imm":

171 
asm
 = "emô_Æu64_imm{}(°©e, {}, {}, {}, {});".
	$f‹m©
(

172 
ôems
[1], items[2], items[3], items[4], items[5])

173 
ñif
 
ôems
[0] == "alu64":

174 
asm
 = "emô_Æu64(°©e, {}, {}, {});".
	$f‹m©
(

175 
ôems
[1], items[2], items[3])

176 
ñif
 
ôems
[0] == "alu32":

177 
asm
 = "emô_Æu32(°©e, {}, {}, {});".
	$f‹m©
(

178 
ôems
[1], items[2], items[3])

179 
ñif
 
ôems
[0] == "ldimm":

180 
ôems
[2] == "mem":

181 
asm
 = "emô_lﬂd_imm(°©e, {}, (öçå_tË(m->mem_ba£ + ir->imm));".
	$f‹m©
(

182 
ôems
[1])

183 
ñif
 
	`Àn
(
ôems
) == 4:

184 
asm
 = "emô_lﬂd_imm(°©e, {}, {} + {});".
	$f‹m©
(

185 
ôems
[1], items[2], items[3])

187 
asm
 = "emô_lﬂd_imm(°©e, {}, {});".
	$f‹m©
(

188 
ôems
[1], items[2])

189 
ñif
 
ôems
[0] == "lds":

190 i‡(
ôems
[3] == "X"):

191 
asm
 = "emô_lﬂd_£xt(°©e, {},Ö¨amëî_ªg[0], {}, off£tof‘iscv_t, XË+ 4 * {});".
	$f‹m©
(

192 
ôems
[1], items[2], items[4])

194 
asm
 = "emô_lﬂd_£xt(°©e, {}, {}, {}, {});".
	$f‹m©
(

195 
ôems
[1], items[2], items[3], items[4])

196 
ñif
 
ôems
[0] == "rald":

197 
asm
 = "{} =Ña_lﬂd(°©e, {});".
	$f‹m©
(
ôems
[1], items[2])

198 
ñif
 
ôems
[0] == "rald2":

199 
asm
 = "ø_lﬂd2(°©e, {}, {});".
	$f‹m©
(
ôems
[1], items[2])

200 
ñif
 
ôems
[0] == "rald2s":

201 
asm
 = "ø_lﬂd2_£xt(°©e, {}, {}, {}, {});".
	$f‹m©
(
ôems
[1], items[2], items[3], items[4])

202 
ñif
 
ôems
[0] == "map":

203 
asm
 = "{} = m≠_vm_ªg(°©e, {});".
	$f‹m©
(
ôems
[1], items[2])

204 
ñif
 
ôems
[0] == "ld":

205 i‡(
ôems
[3] == "X"):

206 
asm
 = "emô_lﬂd(°©e, {},Ö¨amëî_ªg[0], {}, off£tof‘iscv_t, XË+ 4 * {});".
	$f‹m©
(

207 
ôems
[1], items[2], items[4])

209 
asm
 = "emô_lﬂd(°©e, {}, {}, {}, {});".
	$f‹m©
(

210 
ôems
[1], items[2], items[3], items[4])

211 
ñif
 
ôems
[0] == "st":

212 i‡(
ôems
[3] == "X"):

213 
asm
 = "emô_°‹e(°©e, {}, {},Ö¨amëî_ªg[0], off£tof‘iscv_t, XË+ 4 * {});".
	$f‹m©
(

214 
ôems
[1], items[2], items[4])

215 
ñif
 
ôems
[3] ="PC" 
‹
 items[3] == "compressed":

216 
asm
 = "emô_°‹e(°©e, {}, {},Ö¨amëî_ªg[0], off£tof‘iscv_t, {}));".
	$f‹m©
(

217 
ôems
[1], items[2], items[3])

219 
asm
 = "emô_°‹e(°©e, {}, {}, {}, {});".
	$f‹m©
(

220 
ôems
[1], items[2], items[3], items[4])

221 
ñif
 
ôems
[0] == "mov":

222 
asm
 = "emô_mov(°©e, {}, {});".
	$f‹m©
(

223 
ôems
[1], items[2])

224 
ñif
 
ôems
[0] == "cmp":

225 
asm
 = "emô_cmp32(°©e, {}, {});".
	$f‹m©
(

226 
ôems
[1], items[2])

227 
ñif
 
ôems
[0] == "cmpimm":

228 
asm
 = "emô_cmp_imm32(°©e, {}, {});".
	$f‹m©
(

229 
ôems
[1], items[2])

230 
ñif
 
ôems
[0] == "jmp":

231 
asm
 = "emô_jmp(°©e, {} + {});".
	$f‹m©
(

232 
ôems
[1], items[2])

233 
ñif
 
ôems
[0] == "jcc":

234 
asm
 = "emô_jcc_off£t(°©e, {});".
	$f‹m©
(
ôems
[1])

235 
ñif
 
ôems
[0] == "setjmpoff":

236 
asm
 = "uint32_t jump_loc = state->offset;"

237 
ñif
 
ôems
[0] == "jmpoff":

238 
asm
 = "emit_jump_target_offset(state, JUMP_LOC, state->offset);"

239 
ñif
 
ôems
[0] == "mem":

240 
asm
 = "memory_t *m = PRIV(rv)->mem;"

241 
ñif
 
ôems
[0] == "call":

242 
asm
 = "emô_ˇŒ(°©e, (öçå_tËrv->io.⁄_{});".
	$f‹m©
(

243 
ôems
[1])

244 
ñif
 
ôems
[0] == "exit":

245 
asm
 = "emit_exit(state);"

246 
ñif
 
ôems
[0] == "mul":

247 
asm
 = "muldivmod(°©e, {}, {}, {}, {});".
	$f‹m©
(

248 
ôems
[1], items[2], items[3], items[4])

249 
ñif
 
ôems
[0] == "div":

250 
asm
 = "muldivmod(°©e, {}, {}, {}, {});".
	$f‹m©
(

251 
ôems
[1], items[2], items[3], items[4])

252 
ñif
 
ôems
[0] == "mod":

253 
asm
 = "muldivmod(°©e, {}, {}, {}, {});".
	$f‹m©
(

254 
ôems
[1], items[2], items[3], items[4])

255 
ñif
 
ôems
[0] == "cond":

256 
ôems
[1] == "regneq":

257 
ôems
[1] = "vm_reg[0] != vm_reg[1]"

258 
asm
 = "if({})".
	`f‹m©
(
ôems
[1]) + "{"

259 
ñif
 
ôems
[0] == "else":

260 
asm
 = "}Élse {"

261 
ñif
 
ôems
[0] == "end":

262 
asm
 = "}"

263 
ñif
 
ôems
[0] == "pollute":

264 
asm
 = "£t_dúty({},Årue);".
	$f‹m©
(
ôems
[1])

265 
ñif
 
ôems
[0] == "break":

266 
asm
 = "store_back(state);"

267 
ñif
 
ôems
[0] == "assert":

268 
asm
 = "assert(NULL);"

269 
ñif
 
ôems
[0] == "predict":

270 
asm
 = "parse_branch_history_table(state, ir);"

271 
ouçut
 +
asm
 + "\n"

272 
ouçut
 += "})\n"

274 
sys
.
°dout
.
	`wrôe
(
ouçut
)

	@tools/rv_histogram.c

6 
	~<°dio.h
>

7 
	~<°dlib.h
>

8 
	~<°rög.h
>

10 #i‡
deföed
(
_WIN32
)

11 
	~<wödows.h
>

13 
	~<sys/io˘l.h
>

14 
	~<uni°d.h
>

17 
	~"decode.h
"

18 
	~"ñf.h
"

20 (*
	thi°_ªc‹d_h™dÀr
)(c⁄° 
	trv_ö¢_t
 *);

22 
boﬁ
 
as˚ndög_‹dî
 = 
Ál£
;

23 
boﬁ
 
show_ªg
 = 
Ál£
;

24 c⁄° *
ñf_¥og
 = 
NULL
;

26 
size_t
 
max_‰eq
 = 0;

27 
size_t
 
tŸÆ_‰eq
 = 0;

28 
max_cﬁ
;

29 
u£d_cﬁ
;

32 
ö¢_ªg
[16];

33 
size_t
 
‰eq
;

34 
uöt8_t
 
ªg_mask
;

35 } 
	trv_hi°_t
;

38 
rv_hi°_t
 
rv_ö¢_°©s
[] = {

39 
	#_
(
ö°
, 
ˇn_bønch
, 
ö¢_Àn
, 
å™¶©abÀ
, 
ªg_mask
Ë{#ö°, 0,Ñeg_mask},

	)

40 
RV_INSN_LIST


41 
	`_
(
unknown
, 0, 0, 0, 0)

42 #unde‡
_


43 
	}
};

46 
rv_hi°_t
 
	grv_ªg_°©s
[] = {

47 
	#_
(
ªg
Ë{#ªg, 0},

	)

48 
RV_REGS_LIST


49 #unde‡
_


52 
	$cmp_dec
(c⁄° *
a
, c⁄° *
b
)

54  ((
rv_hi°_t
 *Ë
b
)->
‰eq
 - (‘v_hi°_à*Ë
a
)->freq;

55 
	}
}

57 
	$cmp_asc
(c⁄° *
a
, c⁄° *
b
)

59  ((
rv_hi°_t
 *Ë
a
)->
‰eq
 - (‘v_hi°_à*Ë
b
)->freq;

60 
	}
}

63 
	$gë_wö_max_cﬁ
()

65 #i‡
	`deföed
(
_WIN32
)

66 
CONSOLE_SCREEN_BUFFER_INFO
 
csbi
;

67 
	`GëC⁄sﬁeS¸ìnBuf„rInfo
(
	`GëStdH™dÀ
(
STD_OUTPUT_HANDLE
), &
csbi
);

68  
csbi
.
§Wödow
.
Right
 - csbi.§Wödow.
Le·
 + 1;

70 
wösize
 
ãrmöÆ_size
;

71 
	`io˘l
(
STDOUT_FILENO
, 
TIOCGWINSZ
, &
ãrmöÆ_size
);

72  
ãrmöÆ_size
.
ws_cﬁ
;

74 
	}
}

76 
	$föd_max_‰eq
(c⁄° 
rv_hi°_t
 *
°©s
, 
size_t
 
°©s_size
)

78 
size_t
 
i
 = 0; i < 
°©s_size
; i++) {

79 i‡(
°©s
[
i
].
‰eq
 > 
max_‰eq
)

80 
max_‰eq
 = 
°©s
[
i
].
‰eq
;

82 
	}
}

84 c⁄° *
	gfmt
 = "%3d. %-10s%5.2f%% [%-10zu] %s\n";

87 
	$gë_u£d_cﬁ
()

89 
u£d_cﬁ
 = 0;

91 
u£d_cﬁ
 += 3u;

92 
u£d_cﬁ
 += 1u;

93 
u£d_cﬁ
 += 1u;

94 
u£d_cﬁ
 += 10u;

95 
u£d_cﬁ
 += 5u;

96 
u£d_cﬁ
 += 1u;

97 
u£d_cﬁ
 += 1u;

98 
u£d_cﬁ
 += 1u;

99 
u£d_cﬁ
 += 10u;

100 
u£d_cﬁ
 += 1u;

101 
u£d_cﬁ
 += 1u;

103  
u£d_cﬁ
;

104 
	}
}

106 *
	$gí_hi°_b¨
(*
hi°_b¨
,

107 
size_t
 
hi°_b¨_Àn
,

108 
size_t
 
ö¢_‰eq
,

109 
size_t
 
max_ö¢_‰eq
,

110 
max_cﬁ
,

111 
u£d_cﬁ
)

113 #i‡
	`deföed
(
_WIN32
)

114 
size_t
 
v
 = 
ö¢_‰eq
 * (
max_cﬁ
 - 
u£d_cﬁ
Ë/ 
max_ö¢_‰eq
;

115 
size_t
 
i
 = 0; i < 
v
; i++) {

116 
hi°_b¨
[
i
] = '*';

118 
hi°_b¨
[
v
] = 0;

120 c⁄° *
a
[] = {" ", "‚ñè", "‚ñé", "‚ñç", "‚ñå", "‚ñã", "‚ñä", "‚ñâ", "‚ñà"};

121 
size_t
 
v
 = 
ö¢_‰eq
 * (
max_cﬁ
 - 
u£d_cﬁ
Ë* 8 / 
max_ö¢_‰eq
;

122 
hi°_b¨
[0] = '\0';

123 
v
 > 8) {

124 
	`°∫ˇt
(
hi°_b¨
, 
a
[8], 
hi°_b¨_Àn
--);

125 
v
 -= 8;

127 
	`°∫ˇt
(
hi°_b¨
, 
a
[
v
], 
hi°_b¨_Àn
--);

130  
hi°_b¨
;

131 
	}
}

133 
	$¥öt_ußge
(c⁄° *
fûíame
)

135 
	`Ârötf
(
°dîr
,

141 
fûíame
);

142 
	}
}

145 
boﬁ
 
	$∑r£_¨gs
(
¨gc
, c⁄° *
¨gs
[])

147 
boﬁ
 
ªt
 = 
åue
;

148 
i
 = 1; (ò< 
¨gc
Ë&& 
ªt
; i++) {

149 c⁄° *
¨g
 = 
¨gs
[
i
];

150 i‡(
¨g
[0] == '-') {

151 i‡(
	`°r°r
(
¨g
, "-ar") || strstr(arg, "-ra")) {

152 
as˚ndög_‹dî
 = 
åue
;

153 
show_ªg
 = 
åue
;

157 i‡(!
	`°rcmp
(
¨g
, "-a")) {

158 
as˚ndög_‹dî
 = 
åue
;

162 i‡(!
	`°rcmp
(
¨g
, "-r")) {

163 
show_ªg
 = 
åue
;

167 
ªt
 = 
Ál£
;

170 
ñf_¥og
 = 
¨g
;

173  
ªt
;

174 
	}
}

176 
	$¥öt_hi°_°©s
(c⁄° 
rv_hi°_t
 *
°©s
, 
size_t
 
°©s_size
)

178 
hi°_b¨
[
max_cﬁ
 * 3 + 1];

179 
≥r˚¡
;

180 
size_t
 
idx
 = 1;

182 
size_t
 
i
 = 0; i < 
°©s_size
; i++) {

183 c⁄° *
ö¢_ªg
 = 
°©s
[
i
].insn_reg;

184 
size_t
 
‰eq
 = 
°©s
[
i
].freq;

186 
≥r˚¡
 = ((Ë
‰eq
 / 
tŸÆ_‰eq
) * 100;

187 i‡(
≥r˚¡
 < 1.00)

190 
	`¥ötf
(
fmt
, 
idx
, 
ö¢_ªg
, 
≥r˚¡
, 
‰eq
,

191 
	`gí_hi°_b¨
(
hi°_b¨
, (hi°_b¨), 
‰eq
, 
max_‰eq
, 
max_cﬁ
,

192 
u£d_cﬁ
));

193 
idx
++;

195 
	}
}

197 
	$ªg_hi°_ö¸
(c⁄° 
rv_ö¢_t
 *
ú
)

199 i‡(!
ú
)

202 
uöt8_t
 
ªg_mask
 = 
rv_ö¢_°©s
[
ú
->
›code
].reg_mask;

204 i‡(
ªg_mask
 & 
F_rs1
) {

205 
rv_ªg_°©s
[
ú
->
rs1
].
‰eq
++;

206 
tŸÆ_‰eq
++;

208 i‡(
ªg_mask
 & 
F_rs2
) {

209 
rv_ªg_°©s
[
ú
->
rs2
].
‰eq
++;

210 
tŸÆ_‰eq
++;

212 i‡(
ªg_mask
 & 
F_rs3
) {

213 
rv_ªg_°©s
[
ú
->
rs3
].
‰eq
++;

214 
tŸÆ_‰eq
++;

216 i‡(
ªg_mask
 & 
F_rd
) {

217 
rv_ªg_°©s
[
ú
->
rd
].
‰eq
++;

218 
tŸÆ_‰eq
++;

220 
	}
}

222 
	$ö¢_hi°_ö¸
(c⁄° 
rv_ö¢_t
 *
ú
)

224 i‡(!
ú
) {

225 
rv_ö¢_°©s
[
N_RV_INSNS
].
‰eq
++;

228 
rv_ö¢_°©s
[
ú
->
›code
].
‰eq
++;

229 
tŸÆ_‰eq
++;

230 
	}
}

232 
	$maö
(
¨gc
, c⁄° *
¨gs
[])

234 i‡(!
	`∑r£_¨gs
(
¨gc
, 
¨gs
Ë|| !
ñf_¥og
) {

235 
	`¥öt_ußge
(
¨gs
[0]);

240 
hi°_ªc‹d_h™dÀr
 
hi°_ªc‹d
 = 
show_ªg
 ? 
ªg_hi°_ö¸
 : 
ö¢_hi°_ö¸
;

242 
ñf_t
 *
e
 = 
	`ñf_√w
();

243 i‡(!
	`ñf_›í
(
e
, 
ñf_¥og
)) {

244 (Ë
	`Ârötf
(
°dîr
, "FaûedÅÿ›í %s\n", 
ñf_¥og
);

248 
Elf32_Ehdr
 *
hdr
 = 
	`gë_ñf_hódî
(
e
);

249 i‡(!
hdr
->
e_shnum
) {

250 (Ë
	`Ârötf
(
°dîr
, "no section headersáre found in %s\n",

251 
ñf_¥og
);

255 
uöt8_t
 *
ñf_fú°_byã
 = 
	`gë_ñf_fú°_byã
(
e
);

256 c⁄° 
Elf32_Shdr
 **
shdrs
 =

257 (c⁄° 
Elf32_Shdr
 **Ë&
ñf_fú°_byã
[
hdr
->
e_shoff
];

259 
rv_ö¢_t
 
ú
;

260 
boﬁ
 
ªs
;

262 
i
 = 0; i < 
hdr
->
e_shnum
; i++) {

263 c⁄° 
Elf32_Shdr
 *
shdr
 = (c⁄° Elf32_Shd∏*Ë&
shdrs
[
i
];

264 
boﬁ
 
is_¥g
 = 
shdr
->
sh_ty≥
 & 
SHT_PROGBITS
;

265 
boﬁ
 
has_ö¢
 = 
shdr
->
sh_Êags
 & 
SHF_EXECINSTR
;

267 i‡(!(
is_¥g
 && 
has_ö¢
))

270 
uöt8_t
 *
exec_°¨t_addr
 = &
ñf_fú°_byã
[
shdr
->
sh_off£t
];

271 c⁄° 
uöt8_t
 *
exec_íd_addr
 = &
exec_°¨t_addr
[
shdr
->
sh_size
];

272 
uöt8_t
 *
±r
 = 
exec_°¨t_addr
;

273 
uöt32_t
 
ö¢
;

275 
±r
 < 
exec_íd_addr
) {

276 #i‡
	`RV32_HAS
(
EXT_C
)

277 i‡((*((
uöt32_t
 *Ë
±r
Ë& 
FC_OPCODE
) != 0x3) {

278 
ö¢
 = *((
uöt16_t
 *Ë
±r
);

279 
±r
 += 2;

280 
decode
;

283 
ö¢
 = *((
uöt32_t
 *Ë
±r
);

284 
±r
 += 4;

287 #i‡
	`RV32_HAS
(
EXT_C
)

288 
decode
:

290 
ªs
 = 
	`rv_decode
(&
ú
, 
ö¢
);

293 i‡(!
ªs
) {

294 
	`hi°_ªc‹d
(
NULL
);

297 
	`hi°_ªc‹d
(&
ú
);

301 
max_cﬁ
 = 
	`gë_wö_max_cﬁ
();

302 
u£d_cﬁ
 = 
	`gë_u£d_cﬁ
();

304 i‡(
show_ªg
) {

305 
	`qs‹t
(
rv_ªg_°©s
, 
	`ARRAYS_SIZE
‘v_ªg_°©s), (
rv_hi°_t
),

306 
as˚ndög_‹dî
 ? 
cmp_asc
 : 
cmp_dec
);

308 
	`¥ötf
("+--------------------------------------+\n");

309 
	`¥ötf
("| RV32 Target Register Usage Histogram |\n");

310 
	`¥ötf
("+--------------------------------------+\n");

311 
	`föd_max_‰eq
(
rv_ªg_°©s
, 
N_RV_REGS
);

312 
	`¥öt_hi°_°©s
(
rv_ªg_°©s
, 
N_RV_REGS
);

314 
	`qs‹t
(
rv_ö¢_°©s
, 
	`ARRAYS_SIZE
‘v_ö¢_°©s), (
rv_hi°_t
),

315 
as˚ndög_‹dî
 ? 
cmp_asc
 : 
cmp_dec
);

317 
	`¥ötf
("+---------------------------------------------+\n");

318 
	`¥ötf
("| RV32 Target Instruction Frequency Histogram |\n");

319 
	`¥ötf
("+---------------------------------------------+\n");

320 
	`föd_max_‰eq
(
rv_ö¢_°©s
, 
N_RV_INSNS
 + 1);

321 
	`¥öt_hi°_°©s
(
rv_ö¢_°©s
, 
N_RV_INSNS
 + 1);

324 
	`ñf_dñëe
(
e
);

327 
	}
}

	@
1
.
0
590
22254
src/breakpoint.c
src/breakpoint.h
src/cache.c
src/cache.h
src/common.h
src/decode.c
src/decode.h
src/elf.c
src/elf.h
src/emulate.c
src/feature.h
src/gdbstub.c
src/io.c
src/io.h
src/jit.c
src/jit.h
src/main.c
src/map.c
src/map.h
src/mpool.c
src/mpool.h
src/riscv.c
src/riscv.h
src/riscv_private.h
src/rv32_constopt.c
src/rv32_template.c
src/softfloat.h
src/softfloat/build/Linux-386-GCC/platform.h
src/softfloat/build/Linux-386-SSE2-GCC/platform.h
src/softfloat/build/Linux-ARM-VFPv2-GCC/platform.h
src/softfloat/build/Linux-RISCV-GCC/platform.h
src/softfloat/build/Linux-x86_64-GCC/platform.h
src/softfloat/build/Win32-MinGW/platform.h
src/softfloat/build/Win32-SSE2-MinGW/platform.h
src/softfloat/build/Win64-MinGW-w64/platform.h
src/softfloat/build/template-FAST_INT64/platform.h
src/softfloat/build/template-not-FAST_INT64/platform.h
src/softfloat/source/8086-SSE/extF80M_isSignalingNaN.c
src/softfloat/source/8086-SSE/f128M_isSignalingNaN.c
src/softfloat/source/8086-SSE/s_bf16UIToCommonNaN.c
src/softfloat/source/8086-SSE/s_commonNaNToBF16UI.c
src/softfloat/source/8086-SSE/s_commonNaNToExtF80M.c
src/softfloat/source/8086-SSE/s_commonNaNToExtF80UI.c
src/softfloat/source/8086-SSE/s_commonNaNToF128M.c
src/softfloat/source/8086-SSE/s_commonNaNToF128UI.c
src/softfloat/source/8086-SSE/s_commonNaNToF16UI.c
src/softfloat/source/8086-SSE/s_commonNaNToF32UI.c
src/softfloat/source/8086-SSE/s_commonNaNToF64UI.c
src/softfloat/source/8086-SSE/s_extF80MToCommonNaN.c
src/softfloat/source/8086-SSE/s_extF80UIToCommonNaN.c
src/softfloat/source/8086-SSE/s_f128MToCommonNaN.c
src/softfloat/source/8086-SSE/s_f128UIToCommonNaN.c
src/softfloat/source/8086-SSE/s_f16UIToCommonNaN.c
src/softfloat/source/8086-SSE/s_f32UIToCommonNaN.c
src/softfloat/source/8086-SSE/s_f64UIToCommonNaN.c
src/softfloat/source/8086-SSE/s_propagateNaNExtF80M.c
src/softfloat/source/8086-SSE/s_propagateNaNExtF80UI.c
src/softfloat/source/8086-SSE/s_propagateNaNF128M.c
src/softfloat/source/8086-SSE/s_propagateNaNF128UI.c
src/softfloat/source/8086-SSE/s_propagateNaNF16UI.c
src/softfloat/source/8086-SSE/s_propagateNaNF32UI.c
src/softfloat/source/8086-SSE/s_propagateNaNF64UI.c
src/softfloat/source/8086-SSE/softfloat_raiseFlags.c
src/softfloat/source/8086-SSE/specialize.h
src/softfloat/source/8086/extF80M_isSignalingNaN.c
src/softfloat/source/8086/f128M_isSignalingNaN.c
src/softfloat/source/8086/s_commonNaNToExtF80M.c
src/softfloat/source/8086/s_commonNaNToExtF80UI.c
src/softfloat/source/8086/s_commonNaNToF128M.c
src/softfloat/source/8086/s_commonNaNToF128UI.c
src/softfloat/source/8086/s_commonNaNToF16UI.c
src/softfloat/source/8086/s_commonNaNToF32UI.c
src/softfloat/source/8086/s_commonNaNToF64UI.c
src/softfloat/source/8086/s_extF80MToCommonNaN.c
src/softfloat/source/8086/s_extF80UIToCommonNaN.c
src/softfloat/source/8086/s_f128MToCommonNaN.c
src/softfloat/source/8086/s_f128UIToCommonNaN.c
src/softfloat/source/8086/s_f16UIToCommonNaN.c
src/softfloat/source/8086/s_f32UIToCommonNaN.c
src/softfloat/source/8086/s_f64UIToCommonNaN.c
src/softfloat/source/8086/s_propagateNaNExtF80M.c
src/softfloat/source/8086/s_propagateNaNExtF80UI.c
src/softfloat/source/8086/s_propagateNaNF128M.c
src/softfloat/source/8086/s_propagateNaNF128UI.c
src/softfloat/source/8086/s_propagateNaNF16UI.c
src/softfloat/source/8086/s_propagateNaNF32UI.c
src/softfloat/source/8086/s_propagateNaNF64UI.c
src/softfloat/source/8086/softfloat_raiseFlags.c
src/softfloat/source/8086/specialize.h
src/softfloat/source/ARM-VFPv2-defaultNaN/extF80M_isSignalingNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/f128M_isSignalingNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToExtF80M.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToExtF80UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF128M.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF128UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF16UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF32UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_commonNaNToF64UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_extF80MToCommonNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_extF80UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_f128MToCommonNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_f128UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_f16UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_f32UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_f64UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNExtF80M.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNExtF80UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF128M.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF128UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF16UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF32UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/s_propagateNaNF64UI.c
src/softfloat/source/ARM-VFPv2-defaultNaN/softfloat_raiseFlags.c
src/softfloat/source/ARM-VFPv2-defaultNaN/specialize.h
src/softfloat/source/ARM-VFPv2/extF80M_isSignalingNaN.c
src/softfloat/source/ARM-VFPv2/f128M_isSignalingNaN.c
src/softfloat/source/ARM-VFPv2/s_commonNaNToExtF80M.c
src/softfloat/source/ARM-VFPv2/s_commonNaNToExtF80UI.c
src/softfloat/source/ARM-VFPv2/s_commonNaNToF128M.c
src/softfloat/source/ARM-VFPv2/s_commonNaNToF128UI.c
src/softfloat/source/ARM-VFPv2/s_commonNaNToF16UI.c
src/softfloat/source/ARM-VFPv2/s_commonNaNToF32UI.c
src/softfloat/source/ARM-VFPv2/s_commonNaNToF64UI.c
src/softfloat/source/ARM-VFPv2/s_extF80MToCommonNaN.c
src/softfloat/source/ARM-VFPv2/s_extF80UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2/s_f128MToCommonNaN.c
src/softfloat/source/ARM-VFPv2/s_f128UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2/s_f16UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2/s_f32UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2/s_f64UIToCommonNaN.c
src/softfloat/source/ARM-VFPv2/s_propagateNaNExtF80M.c
src/softfloat/source/ARM-VFPv2/s_propagateNaNExtF80UI.c
src/softfloat/source/ARM-VFPv2/s_propagateNaNF128M.c
src/softfloat/source/ARM-VFPv2/s_propagateNaNF128UI.c
src/softfloat/source/ARM-VFPv2/s_propagateNaNF16UI.c
src/softfloat/source/ARM-VFPv2/s_propagateNaNF32UI.c
src/softfloat/source/ARM-VFPv2/s_propagateNaNF64UI.c
src/softfloat/source/ARM-VFPv2/softfloat_raiseFlags.c
src/softfloat/source/ARM-VFPv2/specialize.h
src/softfloat/source/RISCV/extF80M_isSignalingNaN.c
src/softfloat/source/RISCV/f128M_isSignalingNaN.c
src/softfloat/source/RISCV/s_bf16UIToCommonNaN.c
src/softfloat/source/RISCV/s_commonNaNToBF16UI.c
src/softfloat/source/RISCV/s_commonNaNToExtF80M.c
src/softfloat/source/RISCV/s_commonNaNToExtF80UI.c
src/softfloat/source/RISCV/s_commonNaNToF128M.c
src/softfloat/source/RISCV/s_commonNaNToF128UI.c
src/softfloat/source/RISCV/s_commonNaNToF16UI.c
src/softfloat/source/RISCV/s_commonNaNToF32UI.c
src/softfloat/source/RISCV/s_commonNaNToF64UI.c
src/softfloat/source/RISCV/s_extF80MToCommonNaN.c
src/softfloat/source/RISCV/s_extF80UIToCommonNaN.c
src/softfloat/source/RISCV/s_f128MToCommonNaN.c
src/softfloat/source/RISCV/s_f128UIToCommonNaN.c
src/softfloat/source/RISCV/s_f16UIToCommonNaN.c
src/softfloat/source/RISCV/s_f32UIToCommonNaN.c
src/softfloat/source/RISCV/s_f64UIToCommonNaN.c
src/softfloat/source/RISCV/s_propagateNaNExtF80M.c
src/softfloat/source/RISCV/s_propagateNaNExtF80UI.c
src/softfloat/source/RISCV/s_propagateNaNF128M.c
src/softfloat/source/RISCV/s_propagateNaNF128UI.c
src/softfloat/source/RISCV/s_propagateNaNF16UI.c
src/softfloat/source/RISCV/s_propagateNaNF32UI.c
src/softfloat/source/RISCV/s_propagateNaNF64UI.c
src/softfloat/source/RISCV/softfloat_raiseFlags.c
src/softfloat/source/RISCV/specialize.h
src/softfloat/source/bf16_isSignalingNaN.c
src/softfloat/source/bf16_to_f32.c
src/softfloat/source/extF80M_add.c
src/softfloat/source/extF80M_div.c
src/softfloat/source/extF80M_eq.c
src/softfloat/source/extF80M_eq_signaling.c
src/softfloat/source/extF80M_le.c
src/softfloat/source/extF80M_le_quiet.c
src/softfloat/source/extF80M_lt.c
src/softfloat/source/extF80M_lt_quiet.c
src/softfloat/source/extF80M_mul.c
src/softfloat/source/extF80M_rem.c
src/softfloat/source/extF80M_roundToInt.c
src/softfloat/source/extF80M_sqrt.c
src/softfloat/source/extF80M_sub.c
src/softfloat/source/extF80M_to_f128M.c
src/softfloat/source/extF80M_to_f16.c
src/softfloat/source/extF80M_to_f32.c
src/softfloat/source/extF80M_to_f64.c
src/softfloat/source/extF80M_to_i32.c
src/softfloat/source/extF80M_to_i32_r_minMag.c
src/softfloat/source/extF80M_to_i64.c
src/softfloat/source/extF80M_to_i64_r_minMag.c
src/softfloat/source/extF80M_to_ui32.c
src/softfloat/source/extF80M_to_ui32_r_minMag.c
src/softfloat/source/extF80M_to_ui64.c
src/softfloat/source/extF80M_to_ui64_r_minMag.c
src/softfloat/source/extF80_add.c
src/softfloat/source/extF80_div.c
src/softfloat/source/extF80_eq.c
src/softfloat/source/extF80_eq_signaling.c
src/softfloat/source/extF80_isSignalingNaN.c
src/softfloat/source/extF80_le.c
src/softfloat/source/extF80_le_quiet.c
src/softfloat/source/extF80_lt.c
src/softfloat/source/extF80_lt_quiet.c
src/softfloat/source/extF80_mul.c
src/softfloat/source/extF80_rem.c
src/softfloat/source/extF80_roundToInt.c
src/softfloat/source/extF80_sqrt.c
src/softfloat/source/extF80_sub.c
src/softfloat/source/extF80_to_f128.c
src/softfloat/source/extF80_to_f16.c
src/softfloat/source/extF80_to_f32.c
src/softfloat/source/extF80_to_f64.c
src/softfloat/source/extF80_to_i32.c
src/softfloat/source/extF80_to_i32_r_minMag.c
src/softfloat/source/extF80_to_i64.c
src/softfloat/source/extF80_to_i64_r_minMag.c
src/softfloat/source/extF80_to_ui32.c
src/softfloat/source/extF80_to_ui32_r_minMag.c
src/softfloat/source/extF80_to_ui64.c
src/softfloat/source/extF80_to_ui64_r_minMag.c
src/softfloat/source/f128M_add.c
src/softfloat/source/f128M_div.c
src/softfloat/source/f128M_eq.c
src/softfloat/source/f128M_eq_signaling.c
src/softfloat/source/f128M_le.c
src/softfloat/source/f128M_le_quiet.c
src/softfloat/source/f128M_lt.c
src/softfloat/source/f128M_lt_quiet.c
src/softfloat/source/f128M_mul.c
src/softfloat/source/f128M_mulAdd.c
src/softfloat/source/f128M_rem.c
src/softfloat/source/f128M_roundToInt.c
src/softfloat/source/f128M_sqrt.c
src/softfloat/source/f128M_sub.c
src/softfloat/source/f128M_to_extF80M.c
src/softfloat/source/f128M_to_f16.c
src/softfloat/source/f128M_to_f32.c
src/softfloat/source/f128M_to_f64.c
src/softfloat/source/f128M_to_i32.c
src/softfloat/source/f128M_to_i32_r_minMag.c
src/softfloat/source/f128M_to_i64.c
src/softfloat/source/f128M_to_i64_r_minMag.c
src/softfloat/source/f128M_to_ui32.c
src/softfloat/source/f128M_to_ui32_r_minMag.c
src/softfloat/source/f128M_to_ui64.c
src/softfloat/source/f128M_to_ui64_r_minMag.c
src/softfloat/source/f128_add.c
src/softfloat/source/f128_div.c
src/softfloat/source/f128_eq.c
src/softfloat/source/f128_eq_signaling.c
src/softfloat/source/f128_isSignalingNaN.c
src/softfloat/source/f128_le.c
src/softfloat/source/f128_le_quiet.c
src/softfloat/source/f128_lt.c
src/softfloat/source/f128_lt_quiet.c
src/softfloat/source/f128_mul.c
src/softfloat/source/f128_mulAdd.c
src/softfloat/source/f128_rem.c
src/softfloat/source/f128_roundToInt.c
src/softfloat/source/f128_sqrt.c
src/softfloat/source/f128_sub.c
src/softfloat/source/f128_to_extF80.c
src/softfloat/source/f128_to_f16.c
src/softfloat/source/f128_to_f32.c
src/softfloat/source/f128_to_f64.c
src/softfloat/source/f128_to_i32.c
src/softfloat/source/f128_to_i32_r_minMag.c
src/softfloat/source/f128_to_i64.c
src/softfloat/source/f128_to_i64_r_minMag.c
src/softfloat/source/f128_to_ui32.c
src/softfloat/source/f128_to_ui32_r_minMag.c
src/softfloat/source/f128_to_ui64.c
src/softfloat/source/f128_to_ui64_r_minMag.c
src/softfloat/source/f16_add.c
src/softfloat/source/f16_div.c
src/softfloat/source/f16_eq.c
src/softfloat/source/f16_eq_signaling.c
src/softfloat/source/f16_isSignalingNaN.c
src/softfloat/source/f16_le.c
src/softfloat/source/f16_le_quiet.c
src/softfloat/source/f16_lt.c
src/softfloat/source/f16_lt_quiet.c
src/softfloat/source/f16_mul.c
src/softfloat/source/f16_mulAdd.c
src/softfloat/source/f16_rem.c
src/softfloat/source/f16_roundToInt.c
src/softfloat/source/f16_sqrt.c
src/softfloat/source/f16_sub.c
src/softfloat/source/f16_to_extF80.c
src/softfloat/source/f16_to_extF80M.c
src/softfloat/source/f16_to_f128.c
src/softfloat/source/f16_to_f128M.c
src/softfloat/source/f16_to_f32.c
src/softfloat/source/f16_to_f64.c
src/softfloat/source/f16_to_i32.c
src/softfloat/source/f16_to_i32_r_minMag.c
src/softfloat/source/f16_to_i64.c
src/softfloat/source/f16_to_i64_r_minMag.c
src/softfloat/source/f16_to_ui32.c
src/softfloat/source/f16_to_ui32_r_minMag.c
src/softfloat/source/f16_to_ui64.c
src/softfloat/source/f16_to_ui64_r_minMag.c
src/softfloat/source/f32_add.c
src/softfloat/source/f32_div.c
src/softfloat/source/f32_eq.c
src/softfloat/source/f32_eq_signaling.c
src/softfloat/source/f32_isSignalingNaN.c
src/softfloat/source/f32_le.c
src/softfloat/source/f32_le_quiet.c
src/softfloat/source/f32_lt.c
src/softfloat/source/f32_lt_quiet.c
src/softfloat/source/f32_mul.c
src/softfloat/source/f32_mulAdd.c
src/softfloat/source/f32_rem.c
src/softfloat/source/f32_roundToInt.c
src/softfloat/source/f32_sqrt.c
src/softfloat/source/f32_sub.c
src/softfloat/source/f32_to_bf16.c
src/softfloat/source/f32_to_extF80.c
src/softfloat/source/f32_to_extF80M.c
src/softfloat/source/f32_to_f128.c
src/softfloat/source/f32_to_f128M.c
src/softfloat/source/f32_to_f16.c
src/softfloat/source/f32_to_f64.c
src/softfloat/source/f32_to_i32.c
src/softfloat/source/f32_to_i32_r_minMag.c
src/softfloat/source/f32_to_i64.c
src/softfloat/source/f32_to_i64_r_minMag.c
src/softfloat/source/f32_to_ui32.c
src/softfloat/source/f32_to_ui32_r_minMag.c
src/softfloat/source/f32_to_ui64.c
src/softfloat/source/f32_to_ui64_r_minMag.c
src/softfloat/source/f64_add.c
src/softfloat/source/f64_div.c
src/softfloat/source/f64_eq.c
src/softfloat/source/f64_eq_signaling.c
src/softfloat/source/f64_isSignalingNaN.c
src/softfloat/source/f64_le.c
src/softfloat/source/f64_le_quiet.c
src/softfloat/source/f64_lt.c
src/softfloat/source/f64_lt_quiet.c
src/softfloat/source/f64_mul.c
src/softfloat/source/f64_mulAdd.c
src/softfloat/source/f64_rem.c
src/softfloat/source/f64_roundToInt.c
src/softfloat/source/f64_sqrt.c
src/softfloat/source/f64_sub.c
src/softfloat/source/f64_to_extF80.c
src/softfloat/source/f64_to_extF80M.c
src/softfloat/source/f64_to_f128.c
src/softfloat/source/f64_to_f128M.c
src/softfloat/source/f64_to_f16.c
src/softfloat/source/f64_to_f32.c
src/softfloat/source/f64_to_i32.c
src/softfloat/source/f64_to_i32_r_minMag.c
src/softfloat/source/f64_to_i64.c
src/softfloat/source/f64_to_i64_r_minMag.c
src/softfloat/source/f64_to_ui32.c
src/softfloat/source/f64_to_ui32_r_minMag.c
src/softfloat/source/f64_to_ui64.c
src/softfloat/source/f64_to_ui64_r_minMag.c
src/softfloat/source/i32_to_extF80.c
src/softfloat/source/i32_to_extF80M.c
src/softfloat/source/i32_to_f128.c
src/softfloat/source/i32_to_f128M.c
src/softfloat/source/i32_to_f16.c
src/softfloat/source/i32_to_f32.c
src/softfloat/source/i32_to_f64.c
src/softfloat/source/i64_to_extF80.c
src/softfloat/source/i64_to_extF80M.c
src/softfloat/source/i64_to_f128.c
src/softfloat/source/i64_to_f128M.c
src/softfloat/source/i64_to_f16.c
src/softfloat/source/i64_to_f32.c
src/softfloat/source/i64_to_f64.c
src/softfloat/source/include/internals.h
src/softfloat/source/include/opts-GCC.h
src/softfloat/source/include/primitiveTypes.h
src/softfloat/source/include/primitives.h
src/softfloat/source/include/softfloat.h
src/softfloat/source/include/softfloat_types.h
src/softfloat/source/s_add128.c
src/softfloat/source/s_add256M.c
src/softfloat/source/s_addCarryM.c
src/softfloat/source/s_addComplCarryM.c
src/softfloat/source/s_addExtF80M.c
src/softfloat/source/s_addF128M.c
src/softfloat/source/s_addM.c
src/softfloat/source/s_addMagsExtF80.c
src/softfloat/source/s_addMagsF128.c
src/softfloat/source/s_addMagsF16.c
src/softfloat/source/s_addMagsF32.c
src/softfloat/source/s_addMagsF64.c
src/softfloat/source/s_approxRecip32_1.c
src/softfloat/source/s_approxRecipSqrt32_1.c
src/softfloat/source/s_approxRecipSqrt_1Ks.c
src/softfloat/source/s_approxRecip_1Ks.c
src/softfloat/source/s_compare128M.c
src/softfloat/source/s_compare96M.c
src/softfloat/source/s_compareNonnormExtF80M.c
src/softfloat/source/s_countLeadingZeros16.c
src/softfloat/source/s_countLeadingZeros32.c
src/softfloat/source/s_countLeadingZeros64.c
src/softfloat/source/s_countLeadingZeros8.c
src/softfloat/source/s_eq128.c
src/softfloat/source/s_invalidExtF80M.c
src/softfloat/source/s_invalidF128M.c
src/softfloat/source/s_isNaNF128M.c
src/softfloat/source/s_le128.c
src/softfloat/source/s_lt128.c
src/softfloat/source/s_mul128By32.c
src/softfloat/source/s_mul128MTo256M.c
src/softfloat/source/s_mul128To256M.c
src/softfloat/source/s_mul64ByShifted32To128.c
src/softfloat/source/s_mul64To128.c
src/softfloat/source/s_mul64To128M.c
src/softfloat/source/s_mulAddF128.c
src/softfloat/source/s_mulAddF128M.c
src/softfloat/source/s_mulAddF16.c
src/softfloat/source/s_mulAddF32.c
src/softfloat/source/s_mulAddF64.c
src/softfloat/source/s_negXM.c
src/softfloat/source/s_normExtF80SigM.c
src/softfloat/source/s_normRoundPackMToExtF80M.c
src/softfloat/source/s_normRoundPackMToF128M.c
src/softfloat/source/s_normRoundPackToExtF80.c
src/softfloat/source/s_normRoundPackToF128.c
src/softfloat/source/s_normRoundPackToF16.c
src/softfloat/source/s_normRoundPackToF32.c
src/softfloat/source/s_normRoundPackToF64.c
src/softfloat/source/s_normSubnormalBF16Sig.c
src/softfloat/source/s_normSubnormalExtF80Sig.c
src/softfloat/source/s_normSubnormalF128Sig.c
src/softfloat/source/s_normSubnormalF128SigM.c
src/softfloat/source/s_normSubnormalF16Sig.c
src/softfloat/source/s_normSubnormalF32Sig.c
src/softfloat/source/s_normSubnormalF64Sig.c
src/softfloat/source/s_remStepMBy32.c
src/softfloat/source/s_roundMToI64.c
src/softfloat/source/s_roundMToUI64.c
src/softfloat/source/s_roundPackMToExtF80M.c
src/softfloat/source/s_roundPackMToF128M.c
src/softfloat/source/s_roundPackToBF16.c
src/softfloat/source/s_roundPackToExtF80.c
src/softfloat/source/s_roundPackToF128.c
src/softfloat/source/s_roundPackToF16.c
src/softfloat/source/s_roundPackToF32.c
src/softfloat/source/s_roundPackToF64.c
src/softfloat/source/s_roundToI32.c
src/softfloat/source/s_roundToI64.c
src/softfloat/source/s_roundToUI32.c
src/softfloat/source/s_roundToUI64.c
src/softfloat/source/s_shiftLeftM.c
src/softfloat/source/s_shiftNormSigF128M.c
src/softfloat/source/s_shiftRightJam128.c
src/softfloat/source/s_shiftRightJam128Extra.c
src/softfloat/source/s_shiftRightJam256M.c
src/softfloat/source/s_shiftRightJam32.c
src/softfloat/source/s_shiftRightJam64.c
src/softfloat/source/s_shiftRightJam64Extra.c
src/softfloat/source/s_shiftRightJamM.c
src/softfloat/source/s_shiftRightM.c
src/softfloat/source/s_shortShiftLeft128.c
src/softfloat/source/s_shortShiftLeft64To96M.c
src/softfloat/source/s_shortShiftLeftM.c
src/softfloat/source/s_shortShiftRight128.c
src/softfloat/source/s_shortShiftRightExtendM.c
src/softfloat/source/s_shortShiftRightJam128.c
src/softfloat/source/s_shortShiftRightJam128Extra.c
src/softfloat/source/s_shortShiftRightJam64.c
src/softfloat/source/s_shortShiftRightJam64Extra.c
src/softfloat/source/s_shortShiftRightJamM.c
src/softfloat/source/s_shortShiftRightM.c
src/softfloat/source/s_sub128.c
src/softfloat/source/s_sub1XM.c
src/softfloat/source/s_sub256M.c
src/softfloat/source/s_subM.c
src/softfloat/source/s_subMagsExtF80.c
src/softfloat/source/s_subMagsF128.c
src/softfloat/source/s_subMagsF16.c
src/softfloat/source/s_subMagsF32.c
src/softfloat/source/s_subMagsF64.c
src/softfloat/source/s_tryPropagateNaNExtF80M.c
src/softfloat/source/s_tryPropagateNaNF128M.c
src/softfloat/source/softfloat_state.c
src/softfloat/source/ui32_to_extF80.c
src/softfloat/source/ui32_to_extF80M.c
src/softfloat/source/ui32_to_f128.c
src/softfloat/source/ui32_to_f128M.c
src/softfloat/source/ui32_to_f16.c
src/softfloat/source/ui32_to_f32.c
src/softfloat/source/ui32_to_f64.c
src/softfloat/source/ui64_to_extF80.c
src/softfloat/source/ui64_to_extF80M.c
src/softfloat/source/ui64_to_f128.c
src/softfloat/source/ui64_to_f128M.c
src/softfloat/source/ui64_to_f16.c
src/softfloat/source/ui64_to_f32.c
src/softfloat/source/ui64_to_f64.c
src/syscall.c
src/syscall_sdl.c
src/t2c.c
src/t2c_template.c
src/uart.c
src/utils.c
src/utils.h
tests/aes.c
tests/arch-test-target/constants.py
tests/arch-test-target/rv32emu/env/model_test.h
tests/arch-test-target/rv32emu/riscof_rv32emu.py
tests/arch-test-target/sail_cSim/env/model_test.h
tests/arch-test-target/sail_cSim/riscof_sail_cSim.py
tests/arch-test-target/setup.py
tests/bench-aggregator.py
tests/cache/test-cache.c
tests/captcha.c
tests/cc/cc.c
tests/cc/emit.c
tests/cc/hello.c
tests/cc/stdlib.c
tests/chacha20/chacha20.c
tests/coremark.py
tests/coro/context.c
tests/coro/context.h
tests/coro/coro.c
tests/dhrystone.c
tests/donut.c
tests/falling-nes.h
tests/fcalc.c
tests/fenster.h
tests/hamilton.c
tests/ieee754.c
tests/jit.c
tests/lena.c
tests/line.c
tests/maj2random.c
tests/mandelbrot.c
tests/map/mt19937.c
tests/map/mt19937.h
tests/map/test-map.c
tests/nqueens.c
tests/nyancat.c
tests/path/test-path.c
tests/perfcounter/main.c
tests/pi.c
tests/puzzle.c
tests/qrcode.c
tests/readelf/elf.c
tests/readelf/elf.h
tests/readelf/elf_header.h
tests/readelf/elf_ident.h
tests/readelf/file.c
tests/readelf/file.h
tests/readelf/file_header.c
tests/readelf/readelf.c
tests/readelf/readelf.h
tests/readelf/section.c
tests/readelf/section.h
tests/readelf/string_table.c
tests/readelf/string_table.h
tests/richards.c
tests/rvsim.c
tests/scimark2/FFT.c
tests/scimark2/FFT.h
tests/scimark2/LU.c
tests/scimark2/LU.h
tests/scimark2/MonteCarlo.c
tests/scimark2/MonteCarlo.h
tests/scimark2/Random.c
tests/scimark2/Random.h
tests/scimark2/SOR.c
tests/scimark2/SOR.h
tests/scimark2/SparseCompRow.c
tests/scimark2/SparseCompRow.h
tests/scimark2/Stopwatch.c
tests/scimark2/Stopwatch.h
tests/scimark2/array.c
tests/scimark2/array.h
tests/scimark2/constants.h
tests/scimark2/kernel.c
tests/scimark2/kernel.h
tests/scimark2/scimark2.c
tests/smolnes.c
tests/sound/sound.c
tests/spirograph.c
tests/stream.c
tests/system/main.c
tests/system/vm_setup.c
tests/ticks.c
tools/gen-jit-template.py
tools/rv_histogram.c
